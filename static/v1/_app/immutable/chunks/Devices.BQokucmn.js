import"./disclose-version.BDr9Qe-U.js";import{t as m,p as G,c as r,r as s,s as u,a as H,ar as A,o as W,$ as Z,l as y,m as X,a6 as ee,f as Y}from"./index-client.Ds4XgiuL.js";import{s as d}from"./render.Bq2-eTRf.js";import{i as R}from"./if.Du7BDhAX.js";import{a as v,n as re,t as k,d as T,e as se}from"./template.DXIK6jcH.js";import{a as ae}from"./index.L0FyJ7Re.js";import{l as V}from"./helpers.BTvs6bnN.js";import{s as j}from"./class.Ik0ma2JO.js";import{p as J}from"./props.CvXd4vKV.js";import{T as te}from"./Tooltip.CE2MIsWS.js";import{B as O}from"./Button.nDjAKZm4.js";import{u as Q}from"./i18n.svelte.CgUwCKxn.js";import{e as oe}from"./each.MnMr4iw5.js";import{p as K}from"./proxy.CB6KOiNf.js";import{d as ie,c as le,f as ve}from"./fetch.DFmyLr06.js";import{I as de}from"./IconStop.k1DB1JtH.js";import{I as ne}from"./pow.C3ENfqN0.js";import{E as ce}from"./Expandable.CX2wPjIu.js";import{f as me}from"./patterns.D9HtGhEC.js";import{L as q}from"./LabeledValue.CfdJ335t.js";var ue=re('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function pe(N,a){let e=J(a,"opacity",3,.9),t=J(a,"width",3,24),p=J(a,"color",3,"currentColor");var n=ue();j(n,"stroke-width",2),m(()=>{j(n,"stroke",p()),j(n,"width",t()),j(n,"opacity",e())}),v(N,n)}var fe=k("<div><!></div>"),he=k('<div class="row svelte-165b9or"><div></div> <div class="deleteBtn svelte-165b9or"><!></div></div>'),be=k('<div class="keyContainer svelte-165b9or"><div class="row svelte-165b9or"><span class="label svelte-165b9or"> </span> <div class="nameUv svelte-165b9or"><b> </b> <!></div></div> <div class="row svelte-165b9or"><span class="label svelte-165b9or"> </span> <span class="font-mono"> </span></div> <div class="row svelte-165b9or"><span class="label svelte-165b9or"> </span> <span class="font-mono"> </span></div> <!></div>');function $e(N,a){G(a,!0);let e=Q();var t=be(),p=r(t),n=r(p),D=r(n,!0);s(n);var f=u(n,2),l=r(f),$=r(l,!0);s(l);var g=u(l,2);{var h=b=>{te(b,{get text(){return e.account.userVerifiedTooltip},children:(P,z)=>{var C=fe();ae(C,"margin-bottom","-.25rem");var F=r(C);pe(F,{width:18,color:"var(--col-acnt)"}),s(C),v(P,C)},$$slots:{default:!0}})};R(g,b=>{a.passkey.user_verified&&b(h)})}s(f),s(p);var x=u(p,2),B=r(x),_=r(B,!0);s(B);var U=u(B,2),E=r(U,!0);m(()=>d(E,V(a.passkey.registered))),s(U),s(x);var M=u(x,2),L=r(M),o=r(L,!0);s(L);var c=u(L,2),i=r(c,!0);m(()=>d(i,V(a.passkey.last_used))),s(c),s(M);var I=u(M,2);{var w=b=>{var P=he(),z=u(r(P),2),C=r(z);O(C,{level:-3,onclick:()=>a.onDelete(a.passkey.name),children:(F,De)=>{A();var S=T();m(()=>d(S,e.common.delete)),v(F,S)},$$slots:{default:!0}}),s(z),s(P),v(b,P)};R(I,b=>{a.showDelete&&b(w)})}s(t),m(()=>{d(D,e.mfa.passkeyName),d($,a.passkey.name),d(_,e.mfa.registerd),d(o,e.mfa.lastUsed)}),v(N,t),H()}var ge=k('<div class="device-header svelte-9n911e"><div class="device-head font-mono svelte-9n911e"> </div></div>'),we=k('<div class="saveButton svelte-9n911e"><!></div>'),ye=k("<div><!></div>"),ke=k("<div> </div>"),xe=k('<div class="device svelte-9n911e"><!> <div class="row svelte-9n911e"><!> <!></div> <!> <!> <!> <!></div>');function _e(N,a){G(a,!0);let e=J(a,"device",15),t=Q(),p=W(K(Z(()=>e().name)));async function n(){let f={device_id:e().id,name:y(p)},l=await ie(`/auth/v1/users/${a.userId}/devices`,f);l.error?console.error(l.error):e(e().name=y(p),!0)}async function D(){let f={device_id:e().id},l=await le(`/auth/v1/users/${a.userId}/devices`,f);l.error?console.error(l.error):e(e().refresh_exp=void 0,!0)}ce(N,{summary:f=>{var l=ge(),$=r(l),g=r($,!0);s($),s(l),m(()=>d(g,e().name)),v(f,l)},details:f=>{var l=xe(),$=r(l);q($,{get label(){return t.account.deviceId},mono:!0,children:(o,c)=>{A();var i=T();m(()=>d(i,e().id)),v(o,i)},$$slots:{default:!0}});var g=u($,2),h=r(g);ne(h,{autocomplete:"off",width:"17rem",get label(){return t.account.deviceName},get placeholder(){return t.account.deviceName},onEnter:n,pattern:me,required:!0,get value(){return y(p)},set value(o){X(p,K(o))},children:(o,c)=>{A();var i=T();m(()=>d(i,t.account.deviceName)),v(o,i)},$$slots:{default:!0}});var x=u(h,2);{var B=o=>{var c=we(),i=r(c);O(i,{onclick:n,children:(I,w)=>{A();var b=T();m(()=>d(b,t.common.save)),v(I,b)},$$slots:{default:!0}}),s(c),v(o,c)};R(x,o=>{y(p)!==e().name&&o(B)})}s(g);var _=u(g,2);q(_,{get label(){return t.account.regDate},children:(o,c)=>{A();var i=T();m(()=>d(i,V(e().created))),v(o,i)},$$slots:{default:!0}});var U=u(_,2);q(U,{get label(){return t.account.accessExp},children:(o,c)=>{A();var i=T();m(()=>d(i,V(e().access_exp))),v(o,i)},$$slots:{default:!0}});var E=u(U,2);{var M=o=>{q(o,{get label(){return t.account.accessRenew},button:c=>{O(c,{get ariaLabel(){return t.common.delete},invisible:!0,onclick:D,children:(i,I)=>{var w=ye(),b=r(w);de(b,{}),s(w),m(()=>j(w,"title",t.common.delete)),v(i,w)},$$slots:{default:!0}})},children:(c,i)=>{var I=ke(),w=r(I,!0);m(()=>d(w,V(e().refresh_exp))),s(I),v(c,I)},$$slots:{button:!0,default:!0}})};R(E,o=>{e().refresh_exp&&o(M)})}var L=u(E,2);q(L,{get label(){return t.account.regIp},children:(o,c)=>{A();var i=T();m(()=>d(i,e().peer_ip)),v(o,i)},$$slots:{default:!0}}),s(l),v(f,l)},$$slots:{summary:!0,details:!0}}),H()}var Ie=k('<div class="head svelte-w0g6eh"> </div> <div class="devices svelte-w0g6eh"><!></div>',1);function Ne(N,a){G(a,!0);let e=Q(),t=W(K([]));ee(()=>{p()});async function p(){let h=await ve(`/auth/v1/users/${a.userId}/devices`);h.body?X(t,K(h.body)):console.error("error fetching devices: "+h.error)}var n=Ie(),D=Y(n),f=r(D,!0);s(D);var l=u(D,2),$=r(l);{var g=h=>{var x=se(),B=Y(x);oe(B,19,()=>y(t),_=>_.id,(_,U,E)=>{_e(_,{get userId(){return a.userId},get device(){return y(t)[y(E)]},set device(M){y(t)[y(E)]=M}})}),v(h,x)};R($,h=>{a.userId&&h(g)})}s(l),m(()=>d(f,(e==null?void 0:e.account.devicesDesc)||"Devices linked to this account")),v(N,n),H()}export{Ne as D,$e as U};
