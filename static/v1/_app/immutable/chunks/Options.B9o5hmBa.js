import"./disclose-version.BDr9Qe-U.js";import{p as N,a4 as q,t as I,a as Q,g as e,f as V,s as E,i as R,c as k,r as b,h,a9 as ot}from"./index-client.ijM6xFk7.js";import{e as rt,d as at,s as nt}from"./render.BjVgqyVR.js";import{i as H}from"./if.BunKWniS.js";import{e as st,i as it}from"./each.K_FVK-xy.js";import{a as g,t as P,e as G,n as W}from"./template.DOyJZ41v.js";import{s as v,r as lt}from"./class.p-n0nTxi.js";import{s as Z}from"./index.R935SZZb.js";import{b as ct}from"./input.DCSqBrTM.js";import{p as X}from"./proxy.DmesnD8z.js";import{b as tt}from"./this.KjBTf3bC.js";import{p as d}from"./props.YiozBtSG.js";import{s as et}from"./snippet.BqUd1njP.js";import{B as J}from"./Button.BiyjpsYY.js";import{m as K}from"./helpers.DMpx17S8.js";import{u as ft}from"./i18n_admin.svelte.DJM2cn1v.js";import{u as mt}from"./i18n.svelte.BPV29n6k.js";var ht=P('<div><!> <div class="popover svelte-15eoy2j" popover="auto"><div class="inner fade-in svelte-15eoy2j"><!></div></div></div>');function vt(m,t){N(t,!0);let n=d(t,"ref",15),p=d(t,"roleButton",3,"button"),i=d(t,"offsetLeft",3,"0px"),r=d(t,"offsetTop",3,"0px"),y=d(t,"close",15);const L=K(),S=K();let l=R(void 0),B=R(!1);q(()=>{y(_)});function T(s){if(s.stopPropagation(),n()&&e(l))if(t.absolute)e(l).style.top=r(),e(l).style.left=i();else{let f=n().getBoundingClientRect();e(l).style.top=`calc(${f.bottom+window.scrollY}px + ${r()})`,e(l).style.left=`calc(${f.left+window.scrollX}px + ${i()})`}else console.warn("button and popover ref missing")}function _(){var s;(s=e(l))==null||s.hidePopover()}function M(s){var w;let f=s.newState;h(B,f==="open"),(w=t.onToggle)==null||w.call(t,f)}var O=ht(),j=k(O);J(j,{get role(){return p()},id:L,ariaControls:S,popovertarget:S,onclick:T,get invisible(){return t.btnInvisible},get isDisabled(){return t.btnDisabled},get onLeft(){return t.onLeft},get onRight(){return t.onRight},get onUp(){return t.onUp},get onDown(){return t.onDown},get ref(){return n()},set ref(s){n(s)},children:(s,f)=>{var w=G(),U=V(w);et(U,()=>t.button),g(s,w)},$$slots:{default:!0}});var x=E(j,2);v(x,"id",S),v(x,"aria-labelledby",L);var F=k(x),o=k(F);{var c=s=>{var f=G(),w=V(f);{var U=A=>{var a=G(),u=V(a);et(u,()=>t.children),g(A,a)};H(w,A=>{e(B)&&A(U)})}g(s,f)},D=s=>{var f=G(),w=V(f);et(w,()=>t.children),g(s,f)};H(o,s=>{t.lazy?s(c):s(D,!1)})}b(F),b(x),tt(x,s=>h(l,s),()=>e(l)),b(O),I(()=>v(x,"aria-label",t.ariaLabel)),rt("toggle",x,M),g(m,O),Q()}var gt=W('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function bt(m,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=gt();v(r,"stroke-width",2),I(()=>{v(r,"stroke",i()),v(r,"width",p()),v(r,"opacity",n())}),g(m,r)}var wt=W('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function kt(m,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=wt();v(r,"stroke-width",2),I(()=>{v(r,"stroke",i()),v(r,"width",p()),v(r,"opacity",n())}),g(m,r)}function yt(m,t,n,p){var i,r,y;switch(m.code){case"Enter":t();break;case"Tab":(i=n.onTab)==null||i.call(n,p());break;case"ArrowUp":(r=n.onUp)==null||r.call(n,p());break;case"ArrowDown":(y=n.onDown)==null||y.call(n,p());break}}var Lt=P('<div class="options svelte-1wttsdc"><!></div>'),xt=m=>m.stopPropagation(),Dt=P("<option></option>"),Tt=P('<datalist class="absolute svelte-1wttsdc"></datalist>'),$t=P('<span class="backspace svelte-1wttsdc"><!></span>'),Ct=P('<div class="btnSearch svelte-1wttsdc"><!></div>'),Bt=P('<search class="flex container svelte-1wttsdc"><!> <input type="search" autocomplete="off" class="svelte-1wttsdc"> <!> <div class="relative"><div class="absolute btnDelete svelte-1wttsdc"><!></div></div> <!></search>');function dt(m,t){N(t,!0);let n=mt(),p=ft(),i=d(t,"id",19,K),r=d(t,"value",15,""),y=d(t,"placeholder",19,()=>p.common.search),L=d(t,"option",15),S=d(t,"focus",15),l=d(t,"width",3,"100%");const B=K();let T=R(void 0),_=ot(()=>t.datalist&&t.datalist.length>0?B:void 0);q(()=>{S(O)});function M(){var a;(a=t.onSearch)==null||a.call(t,r(),L())}function O(){var a;(a=e(T))==null||a.focus()}var j=Bt(),x=k(j);{var F=a=>{var u=Lt(),$=k(u);pt($,{get ariaLabel(){return p.common.searchOptions},get options(){return t.options},borderless:!0,offsetLeft:"-.25rem",get value(){return L()},set value(C){L(C)}}),b(u),g(a,u)};H(x,a=>{t.options&&a(F)})}var o=E(x,2);lt(o),o.__click=[xt],o.__keydown=[yt,M,t,r],tt(o,a=>h(T,a),()=>e(T));var c=E(o,2);{var D=a=>{var u=Tt();v(u,"id",B),st(u,21,()=>t.datalist,it,($,C)=>{var Y=Dt(),z={};I(()=>{z!==(z=e(C))&&(Y.value=(Y.__value=e(C))==null?"":e(C))}),g($,Y)}),b(u),g(a,u)};H(c,a=>{t.datalist&&a(D)})}var s=E(c,2),f=k(s),w=k(f);J(w,{get ariaLabel(){return n.common.delete},invisible:!0,onclick:()=>r(""),children:(a,u)=>{var $=$t(),C=k($);kt(C,{color:"hsl(var(--bg-high))"}),b($),g(a,$)},$$slots:{default:!0}}),b(f),b(s);var U=E(s,2);{var A=a=>{var u=Ct(),$=k(u);J($,{get ariaLabel(){return p.common.search},invisible:!0,onclick:M,children:(C,Y)=>{bt(C,{})},$$slots:{default:!0}}),b(u),g(a,u)};H(U,a=>{t.onSearch&&a(A)})}b(j),I(()=>{Z(j,"border",t.borderless?void 0:"1px solid hsl(var(--bg-high))"),Z(j,"width",l()),v(o,"id",i()),v(o,"list",e(_)),v(o,"aria-label",t.ariaLabel||p.common.search),v(o,"pattern",t.pattern),v(o,"placeholder",y())}),rt("focus",o,()=>{var a;return(a=t.onFocus)==null?void 0:a.call(t)}),ct(o,r),g(m,j),Q()}at(["click","keydown"]);var _t=W('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>');function jt(m,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=_t();v(r,"stroke-width",2),I(()=>{v(r,"width",p()),v(r,"color",i()),v(r,"opacity",n())}),g(m,r)}function Pt(m,t,n,p,i){let r=m.code;r==="ArrowDown"?(m.preventDefault(),t()&&h(n,e(n)+1)):r==="ArrowUp"?(m.preventDefault(),t()&&h(n,e(n)-1)):r==="Enter"&&e(n)>-1?p(e(i)[e(n)]):r==="Enter"&&e(n)===-1&&e(i).length===1&&p(e(i)[0])}var St=P('<div class="btn svelte-5ktp6l"><div class="btnText svelte-5ktp6l"> </div> <!></div>'),Ut=P('<div class="optPopover svelte-5ktp6l"> </div>'),At=P('<div role="listbox" tabindex="0" class="popover svelte-5ktp6l"><!> <div class="popoverOptions svelte-5ktp6l"></div></div> <input type="hidden" aria-hidden="true">',1);function pt(m,t){N(t,!0);let n=d(t,"ref",15),p=d(t,"options",19,()=>[]),i=d(t,"value",15),r=d(t,"borderless",3,!1),y=d(t,"withSearch",3,!1),L=R(void 0),S=R(void 0),l=R(X(y()?-1:0)),B=R(void 0),T=R(""),_=ot(()=>{if(!y())return p();if(typeof i()=="string")return p().filter(c=>c.toLowerCase().includes(e(T).toLowerCase()));let o=Number.parseInt(e(T))||i();return p().filter(c=>c===o)}),M=!1;q(()=>{var c;let o=i();M?(c=t.onChange)==null||c.call(t,o):M=!0}),q(()=>{var o,c;if(e(l)===-1&&((o=e(L))==null||o.scrollTo({top:0,behavior:"smooth"})),y()){if(e(l)<0||e(l)>e(_).length-1){h(l,-1),(c=e(B))==null||c();return}}else e(l)<0?h(l,e(_).length-1):e(l)>e(_).length-1&&h(l,0),O()});function O(){if(e(L)){let o=e(L).getElementsByTagName("button")[e(l)];o==null||o.scrollIntoView({behavior:"smooth",block:"center"}),o==null||o.focus()}else console.error("refOptions is undefined")}function j(o){var c;o==="open"&&(y()?(h(l,-1),(c=e(B))==null||c()):(h(l,X(p().findIndex(D=>D===i())||0)),O()))}function x(){return e(_).length>0?!0:(h(l,-1),!1)}function F(o){i(o),h(T,""),setTimeout(()=>{var c;(c=e(S))==null||c()},20)}vt(m,{get ariaLabel(){return t.ariaLabel},roleButton:"combobox",btnInvisible:!0,get offsetTop(){return t.offsetTop},get offsetLeft(){return t.offsetLeft},onToggle:j,get onLeft(){return t.onLeft},get onRight(){return t.onRight},get onUp(){return t.onUp},get onDown(){return t.onDown},get ref(){return n()},set ref(o){n(o)},get close(){return e(S)},set close(o){h(S,X(o))},button:o=>{var c=St(),D=k(c),s=k(D,!0);b(D);var f=E(D,2);jt(f,{width:".8rem"}),b(c),I(()=>{v(c,"data-border",!r()),nt(s,i())}),g(o,c)},children:(o,c)=>{var D=At(),s=V(D);s.__keydown=[Pt,x,l,F,_];var f=k(s);{var w=a=>{dt(a,{onFocus:()=>h(l,-1),get value(){return e(T)},set value(u){h(T,X(u))},get focus(){return e(B)},set focus(u){h(B,X(u))}})};H(f,a=>{y()&&a(w)})}var U=E(f,2);st(U,21,()=>e(_),it,(a,u,$)=>{J(a,{invisible:!0,invisibleOutline:!0,onclick:()=>F(e(u)),children:(C,Y)=>{var z=Ut(),ut=k(z,!0);b(z),I(()=>{v(z,"aria-selected",i()===e(u)),v(z,"data-focus",e(l)===$),nt(ut,e(u))}),g(C,z)},$$slots:{default:!0}})}),b(U),tt(U,a=>h(L,a),()=>e(L)),b(s);var A=E(s,2);lt(A),I(()=>{Z(s,"max-height",t.maxHeight),v(A,"name",t.name)}),ct(A,i),g(o,D)},$$slots:{button:!0,default:!0}}),Q()}at(["keydown"]);export{pt as O,vt as P,dt as S};
