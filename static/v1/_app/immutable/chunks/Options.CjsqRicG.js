import{a as g,t as P,d as q,n as N}from"./disclose-version.BP4T4xdV.js";import{aa as G,t as I,p as Q,a as W,j as e,f as V,s as E,l as R,c as L,r as b,k as m,a9 as ot}from"./index-client.hxMyB_b4.js";import{e as rt,d as at,s as nt}from"./render.yNX9q8-B.js";import{i as H}from"./if.BeBa1Kxb.js";import{e as st,i as it}from"./each.BUp7aLCc.js";import{s as v,r as lt}from"./class.CF2J4YCf.js";import{B as J,a as Z}from"./Button.BR1gOfNn.js";import{b as ct}from"./input.BqbgywMu.js";import{p as X}from"./proxy.DaVNR9vk.js";import{b as tt}from"./this.uWYFW-L9.js";import{p as d}from"./props.DNAkfByl.js";import{s as et}from"./language.svelte.DowwhO9_.js";import{g as K}from"./helpers.CchIKxjM.js";import{u as ft}from"./i18n_admin.svelte.lt3dD7TQ.js";import{u as ht}from"./i18n.svelte.Ci9wvqOq.js";var gt=P('<div><!> <div class="popover svelte-15eoy2j" popover="auto"><div class="inner fade-in svelte-15eoy2j"><!></div></div></div>');function vt(h,t){W(t,!0);let n=d(t,"ref",15),p=d(t,"roleButton",3,"button"),i=d(t,"offsetLeft",3,"0px"),r=d(t,"offsetTop",3,"0px"),y=d(t,"close",15);const x=K(),S=K();let l=R(void 0),B=R(!1);G(()=>{y(_)});function T(s){if(s.stopPropagation(),n()&&e(l))if(t.absolute)e(l).style.top=r(),e(l).style.left=i();else{let f=n().getBoundingClientRect();e(l).style.top=`calc(${f.bottom+window.scrollY}px + ${r()})`,e(l).style.left=`calc(${f.left+window.scrollX}px + ${i()})`}else console.warn("button and popover ref missing")}function _(){var s;(s=e(l))==null||s.hidePopover()}function M(s){var k;let f=s.newState;m(B,f==="open"),(k=t.onToggle)==null||k.call(t,f)}var O=gt(),A=L(O);J(A,{get role(){return p()},id:x,ariaControls:S,popovertarget:S,onclick:T,get invisible(){return t.btnInvisible},get isDisabled(){return t.btnDisabled},get onLeft(){return t.onLeft},get onRight(){return t.onRight},get onUp(){return t.onUp},get onDown(){return t.onDown},get ref(){return n()},set ref(s){n(s)},children:(s,f)=>{var k=q(),U=V(k);et(U,()=>t.button),g(s,k)},$$slots:{default:!0}});var D=E(A,2);v(D,"id",S),v(D,"aria-labelledby",x);var F=L(D),o=L(F);{var c=s=>{var f=q(),k=V(f);{var U=j=>{var a=q(),u=V(a);et(u,()=>t.children),g(j,a)};H(k,j=>{e(B)&&j(U)})}g(s,f)},w=s=>{var f=q(),k=V(f);et(k,()=>t.children),g(s,f)};H(o,s=>{t.lazy?s(c):s(w,!1)})}b(F),b(D),tt(D,s=>m(l,s),()=>e(l)),b(O),I(()=>v(D,"aria-label",t.ariaLabel)),rt("toggle",D,M),g(h,O),Q()}var mt=N('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function bt(h,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=mt();v(r,"stroke-width",2),I(()=>{v(r,"stroke",i()),v(r,"width",p()),v(r,"opacity",n())}),g(h,r)}var wt=N('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function kt(h,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=wt();v(r,"stroke-width",2),I(()=>{v(r,"stroke",i()),v(r,"width",p()),v(r,"opacity",n())}),g(h,r)}function Lt(h,t,n,p){var i,r,y;switch(h.code){case"Enter":t();break;case"Tab":(i=n.onTab)==null||i.call(n,p());break;case"ArrowUp":(r=n.onUp)==null||r.call(n,p());break;case"ArrowDown":(y=n.onDown)==null||y.call(n,p());break}}var yt=P('<div class="options svelte-1wttsdc"><!></div>'),xt=h=>h.stopPropagation(),Dt=P("<option></option>"),Tt=P('<datalist class="absolute svelte-1wttsdc"></datalist>'),$t=P('<span class="backspace svelte-1wttsdc"><!></span>'),Ct=P('<div class="btnSearch svelte-1wttsdc"><!></div>'),Bt=P('<search class="flex container svelte-1wttsdc"><!> <input type="search" autocomplete="off" class="svelte-1wttsdc"> <!> <div class="relative"><div class="absolute btnDelete svelte-1wttsdc"><!></div></div> <!></search>');function dt(h,t){W(t,!0);let n=ht(),p=ft(),i=d(t,"id",19,K),r=d(t,"value",15,""),y=d(t,"placeholder",19,()=>p.common.search),x=d(t,"option",15),S=d(t,"focus",15),l=d(t,"width",3,"100%");const B=K();let T=R(void 0),_=ot(()=>t.datalist&&t.datalist.length>0?B:void 0);G(()=>{S(O)});function M(){var a;(a=t.onSearch)==null||a.call(t,r(),x())}function O(){var a;(a=e(T))==null||a.focus()}var A=Bt(),D=L(A);{var F=a=>{var u=yt(),$=L(u);pt($,{get ariaLabel(){return p.common.searchOptions},get options(){return t.options},borderless:!0,offsetLeft:"-.25rem",get value(){return x()},set value(C){x(C)}}),b(u),g(a,u)};H(D,a=>{t.options&&a(F)})}var o=E(D,2);lt(o),o.__click=[xt],o.__keydown=[Lt,M,t,r],tt(o,a=>m(T,a),()=>e(T));var c=E(o,2);{var w=a=>{var u=Tt();v(u,"id",B),st(u,21,()=>t.datalist,it,($,C)=>{var Y=Dt(),z={};I(()=>{z!==(z=e(C))&&(Y.value=(Y.__value=e(C))==null?"":e(C))}),g($,Y)}),b(u),g(a,u)};H(c,a=>{t.datalist&&a(w)})}var s=E(c,2),f=L(s),k=L(f);J(k,{get ariaLabel(){return n.common.delete},invisible:!0,onclick:()=>r(""),children:(a,u)=>{var $=$t(),C=L($);kt(C,{color:"hsl(var(--bg-high))"}),b($),g(a,$)},$$slots:{default:!0}}),b(f),b(s);var U=E(s,2);{var j=a=>{var u=Ct(),$=L(u);J($,{get ariaLabel(){return p.common.search},invisible:!0,onclick:M,children:(C,Y)=>{bt(C,{})},$$slots:{default:!0}}),b(u),g(a,u)};H(U,a=>{t.onSearch&&a(j)})}b(A),I(()=>{Z(A,"border",t.borderless?void 0:"1px solid hsl(var(--bg-high))"),Z(A,"width",l()),v(o,"id",i()),v(o,"list",e(_)),v(o,"aria-label",t.ariaLabel||p.common.search),v(o,"pattern",t.pattern),v(o,"placeholder",y())}),rt("focus",o,()=>{var a;return(a=t.onFocus)==null?void 0:a.call(t)}),ct(o,r),g(h,A),Q()}at(["click","keydown"]);var _t=N('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>');function At(h,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=_t();v(r,"stroke-width",2),I(()=>{v(r,"width",p()),v(r,"color",i()),v(r,"opacity",n())}),g(h,r)}function Pt(h,t,n,p,i){let r=h.code;r==="ArrowDown"?(h.preventDefault(),t()&&m(n,e(n)+1)):r==="ArrowUp"?(h.preventDefault(),t()&&m(n,e(n)-1)):r==="Enter"&&e(n)>-1?p(e(i)[e(n)]):r==="Enter"&&e(n)===-1&&e(i).length===1&&p(e(i)[0])}var St=P('<div class="btn svelte-5ktp6l"><div class="btnText svelte-5ktp6l"> </div> <!></div>'),Ut=P('<div class="optPopover svelte-5ktp6l"> </div>'),jt=P('<div role="listbox" tabindex="0" class="popover svelte-5ktp6l"><!> <div class="popoverOptions svelte-5ktp6l"></div></div> <input type="hidden" aria-hidden="true">',1);function pt(h,t){W(t,!0);let n=d(t,"ref",15),p=d(t,"options",19,()=>[]),i=d(t,"value",15),r=d(t,"borderless",3,!1),y=d(t,"withSearch",3,!1),x=R(void 0),S=R(void 0),l=R(X(y()?-1:0)),B=R(void 0),T=R(""),_=ot(()=>{if(!y())return p();if(typeof i()=="string")return p().filter(c=>c.toLowerCase().includes(e(T).toLowerCase()));let o=Number.parseInt(e(T))||i();return p().filter(c=>c===o)}),M=!1;G(()=>{var c;let o=i();M?(c=t.onChange)==null||c.call(t,o):M=!0}),G(()=>{var o,c;if(e(l)===-1&&((o=e(x))==null||o.scrollTo({top:0,behavior:"smooth"})),y()){if(e(l)<0||e(l)>e(_).length-1){m(l,-1),(c=e(B))==null||c();return}}else e(l)<0?m(l,e(_).length-1):e(l)>e(_).length-1&&m(l,0),O()});function O(){if(e(x)){let o=e(x).getElementsByTagName("button")[e(l)];o==null||o.scrollIntoView({behavior:"smooth",block:"center"}),o==null||o.focus()}else console.error("refOptions is undefined")}function A(o){var c;o==="open"&&(y()?(m(l,-1),(c=e(B))==null||c()):(m(l,X(p().findIndex(w=>w===i())||0)),O()))}function D(){return e(_).length>0?!0:(m(l,-1),!1)}function F(o){i(o),m(T,""),setTimeout(()=>{var c;(c=e(S))==null||c()},20)}vt(h,{get ariaLabel(){return t.ariaLabel},roleButton:"combobox",btnInvisible:!0,get offsetTop(){return t.offsetTop},get offsetLeft(){return t.offsetLeft},onToggle:A,get onLeft(){return t.onLeft},get onRight(){return t.onRight},get onUp(){return t.onUp},get onDown(){return t.onDown},get ref(){return n()},set ref(o){n(o)},get close(){return e(S)},set close(o){m(S,X(o))},button:o=>{var c=St(),w=L(c),s=L(w,!0);b(w);var f=E(w,2);At(f,{width:".8rem"}),b(c),I(()=>{v(c,"data-border",!r()),v(w,"title",t.ariaLabel),nt(s,i())}),g(o,c)},children:(o,c)=>{var w=jt(),s=V(w);s.__keydown=[Pt,D,l,F,_];var f=L(s);{var k=a=>{dt(a,{onFocus:()=>m(l,-1),get value(){return e(T)},set value(u){m(T,X(u))},get focus(){return e(B)},set focus(u){m(B,X(u))}})};H(f,a=>{y()&&a(k)})}var U=E(f,2);st(U,21,()=>e(_),it,(a,u,$)=>{J(a,{invisible:!0,invisibleOutline:!0,onclick:()=>F(e(u)),children:(C,Y)=>{var z=Ut(),ut=L(z,!0);b(z),I(()=>{v(z,"aria-selected",i()===e(u)),v(z,"data-focus",e(l)===$),nt(ut,e(u))}),g(C,z)},$$slots:{default:!0}})}),b(U),tt(U,a=>m(x,a),()=>e(x)),b(s);var j=E(s,2);lt(j),I(()=>{Z(s,"max-height",t.maxHeight),v(j,"name",t.name)}),ct(j,i),g(o,w)},$$slots:{button:!0,default:!0}}),Q()}at(["keydown"]);export{pt as O,vt as P,dt as S};
