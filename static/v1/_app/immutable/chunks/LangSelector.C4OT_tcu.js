import{g as t,b as m,d as U,p as V,k as z,t as j,a as J,f as F,s as P,c as $,r as x,y as X,q as oe}from"./index-client.BTDbhFDr.js";import{p as R}from"./proxy.RLXrsQTM.js";import"./disclose-version.BDr9Qe-U.js";import{a as k,t as O,c as Y,n as Q}from"./template.WjkCsOA4.js";import{s as u,r as re,c as W,b as ge}from"./index.C-OHSz9E.js";import{p as d}from"./props.C0sO4y_5.js";import{u as he}from"./i18n.svelte.CR36i7o7.js";import{q as G,L as ae,J as be}from"./helpers.DwhnXD2f.js";import{e as ne,d as se,s as le}from"./render.Bnf33Vuq.js";import{i as N}from"./if.DAPrgfY3.js";import{B as K,b as ie,e as ce,i as ve,a as me}from"./ThemeSwitch.roIqycWj.js";import{b as Z}from"./this.0speaOir.js";import{s as ee}from"./snippet.DrOrOIgy.js";const we="false";let de=U(we==="true");function ke(){return{get(){return t(de)},set(f){m(de,R(f))}}}var Le=O('<div><!> <div class="popover svelte-15eoy2j" popover="auto"><div class="inner fade-in svelte-15eoy2j"><!></div></div></div>');function ue(f,e){V(e,!0);let o=d(e,"ref",15),c=d(e,"roleButton",3,"button"),s=d(e,"offsetLeft",3,"0px"),a=d(e,"offsetTop",3,"0px"),w=d(e,"close",15);const D=G(),B=G();let i=U(void 0),T=U(!1);z(()=>{w(p)});function C(l){if(l.stopPropagation(),o()&&t(i))if(e.absolute)t(i).style.top=a(),t(i).style.left=s();else{let b=o().getBoundingClientRect();t(i).style.top=`calc(${b.bottom+window.scrollY}px + ${a()})`,t(i).style.left=`calc(${b.left+window.scrollX}px + ${s()})`}else console.warn("button and popover ref missing")}function p(){var l;(l=t(i))==null||l.hidePopover()}function M(l){var r;let b=l.newState;m(T,b==="open"),(r=e.onToggle)==null||r.call(e,b)}var A=Le(),y=$(A);K(y,{get role(){return c()},id:D,ariaControls:B,popovertarget:B,onclick:C,get invisible(){return e.btnInvisible},get isDisabled(){return e.btnDisabled},get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get ref(){return o()},set ref(l){o(l)},children:(l,b)=>{var r=Y(),g=F(r);ee(g,()=>e.button),k(l,r)},$$slots:{default:!0}});var I=P(y,2);u(I,"id",B),u(I,"aria-labelledby",D);var E=$(I),n=$(E);{var v=l=>{var b=Y(),r=F(b);{var g=L=>{var h=Y(),S=F(h);ee(S,()=>e.children),k(L,h)};N(r,L=>{t(T)&&L(g)})}k(l,b)},_=l=>{var b=Y(),r=F(b);ee(r,()=>e.children),k(l,b)};N(n,l=>{e.lazy?l(v):l(_,!1)})}x(E),x(I),Z(I,l=>m(i,l),()=>t(i)),x(A),j(()=>u(I,"aria-label",e.ariaLabel)),ne("toggle",I,M),k(f,A),J()}var ye=Q('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function xe(f,e){let o=d(e,"opacity",3,.9),c=d(e,"width",3,"1.5rem"),s=d(e,"color",3,"currentColor");var a=ye();u(a,"stroke-width",2),j(()=>{u(a,"stroke",s()),u(a,"width",c()),u(a,"opacity",o())}),k(f,a)}var Te=Q('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function Se(f,e){let o=d(e,"opacity",3,.9),c=d(e,"width",3,"1.5rem"),s=d(e,"color",3,"currentColor");var a=Te();u(a,"stroke-width",2),j(()=>{u(a,"stroke",s()),u(a,"width",c()),u(a,"opacity",o())}),k(f,a)}function $e(f,e,o,c){var s,a,w;switch(f.code){case"Enter":e();break;case"Tab":(s=o.onTab)==null||s.call(o,c());break;case"ArrowUp":(a=o.onUp)==null||a.call(o,c());break;case"ArrowDown":(w=o.onDown)==null||w.call(o,c());break}}var De=O('<div class="options svelte-hargsl"><!></div>'),Be=f=>f.stopPropagation(),Ie=O("<option></option>"),_e=O('<datalist class="absolute svelte-hargsl"></datalist>'),Ce=O('<span class="backspace svelte-hargsl"><!></span>'),Oe=O('<div class="btnSearch svelte-hargsl"><!></div>'),Me=O('<search class="flex container svelte-hargsl"><!> <input type="search" autocomplete="off" placeholder="Search" class="svelte-hargsl"> <!> <div class="relative"><div class="absolute btnDelete svelte-hargsl"><!></div></div> <!></search>');function Ue(f,e){V(e,!0);let o=d(e,"id",19,G),c=d(e,"value",15,""),s=d(e,"option",15),a=d(e,"focus",15),w=d(e,"width",3,"100%");const D=G();let B=U(void 0),i=X(()=>e.datalist&&e.datalist.length>0?D:void 0);z(()=>{a(C)});function T(){var r;(r=e.onSearch)==null||r.call(e,c())}function C(){var r;(r=t(B))==null||r.focus()}var p=Me(),M=$(p);{var A=r=>{var g=De(),L=$(g);te(L,{ariaLabel:"Search Option",get options(){return e.options},borderless:!0,offsetLeft:"-.25rem",get value(){return s()},set value(h){s(h)}}),x(g),k(r,g)};N(M,r=>{e.options&&r(A)})}var y=P(M,2);re(y),y.__click=[Be],y.__keydown=[$e,T,e,c],Z(y,r=>m(B,r),()=>t(B));var I=P(y,2);{var E=r=>{var g=_e();u(g,"id",D),ce(g,21,()=>e.datalist,ve,(L,h)=>{var S=Ie(),H={};j(()=>{H!==(H=t(h))&&(S.value=(S.__value=t(h))==null?"":t(h))}),k(L,S)}),x(g),k(r,g)};N(I,r=>{e.datalist&&r(E)})}var n=P(I,2),v=$(n),_=$(v);K(_,{ariaLabel:"Delete Input",invisible:!0,onclick:()=>c(""),children:(r,g)=>{var L=Ce(),h=$(L);xe(h,{color:"hsl(var(--bg-high))"}),x(L),k(r,L)},$$slots:{default:!0}}),x(v),x(n);var l=P(n,2);{var b=r=>{var g=Oe(),L=$(g);K(L,{ariaLabel:"Search",invisible:!0,onclick:T,children:(h,S)=>{Se(h,{})},$$slots:{default:!0}}),x(g),k(r,g)};N(l,r=>{e.onSearch&&r(b)})}x(p),j(()=>{W(p,"border",e.borderless?void 0:"1px solid hsl(var(--bg-high))"),W(p,"width",w()),u(y,"id",o()),u(y,"list",t(i)),u(y,"aria-label",e.ariaLabel||"Search"),u(y,"pattern",e.pattern)}),ne("focus",y,()=>{var r;return(r=e.onFocus)==null?void 0:r.call(e)}),ie(y,c),k(f,p),J()}se(["click","keydown"]);var je=Q('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>');function Ae(f,e){let o=d(e,"opacity",3,.9),c=d(e,"width",3,"1.5rem"),s=d(e,"color",3,"currentColor");var a=je();u(a,"stroke-width",2),j(()=>{u(a,"width",c()),u(a,"color",s()),u(a,"opacity",o())}),k(f,a)}function Pe(f,e,o,c,s){let a=f.code;a==="ArrowDown"?(f.preventDefault(),e()&&m(o,t(o)+1)):a==="ArrowUp"?(f.preventDefault(),e()&&m(o,t(o)-1)):a==="Enter"&&t(o)>-1?c(t(s)[t(o)]):a==="Enter"&&t(o)===-1&&t(s).length===1&&c(t(s)[0])}var Re=O('<div class="btn svelte-5ktp6l"><div class="btnText svelte-5ktp6l"> </div> <!></div>'),Ee=O('<div class="optPopover svelte-5ktp6l"> </div>'),ze=O('<div role="listbox" tabindex="0" class="popover svelte-5ktp6l"><!> <div class="popoverOptions svelte-5ktp6l"></div></div> <input type="hidden" aria-hidden="true">',1);function te(f,e){V(e,!0);let o=d(e,"ref",15),c=d(e,"options",19,()=>[]),s=d(e,"value",15),a=d(e,"borderless",3,!1),w=d(e,"withSearch",3,!1),D=U(void 0),B=U(void 0),i=U(R(w()?-1:0)),T=U(void 0),C=U(""),p=X(()=>{if(!w())return c();if(typeof s()=="string")return c().filter(v=>v.toLowerCase().includes(t(C).toLowerCase()));let n=Number.parseInt(t(C))||s();return c().filter(v=>v===n)}),M=!1;z(()=>{var v;let n=s();M?(v=e.onChange)==null||v.call(e,n):M=!0}),z(()=>{var n,v;if(t(i)===-1&&((n=t(D))==null||n.scrollTo({top:0,behavior:"smooth"})),w()){if(t(i)<0||t(i)>t(p).length-1){m(i,-1),(v=t(T))==null||v();return}}else t(i)<0?m(i,t(p).length-1):t(i)>t(p).length-1&&m(i,0),A()});function A(){if(t(D)){let n=t(D).getElementsByTagName("button")[t(i)];n==null||n.scrollIntoView({behavior:"smooth",block:"center"}),n==null||n.focus()}else console.error("refOptions is undefined")}function y(n){var v;n==="open"&&(w()?(m(i,-1),(v=t(T))==null||v()):(m(i,R(c().findIndex(_=>_===s())||0)),A()))}function I(){return t(p).length>0?!0:(m(i,-1),!1)}function E(n){s(n),m(C,""),setTimeout(()=>{var v;(v=t(B))==null||v()},20)}ue(f,{get ariaLabel(){return e.ariaLabel},roleButton:"combobox",btnInvisible:!0,get offsetTop(){return e.offsetTop},get offsetLeft(){return e.offsetLeft},onToggle:y,get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get ref(){return o()},set ref(n){o(n)},get close(){return t(B)},set close(n){m(B,R(n))},button:n=>{var v=Re(),_=$(v),l=$(_,!0);x(_);var b=P(_,2);Ae(b,{width:".8rem"}),x(v),j(()=>{u(v,"data-border",!a()),le(l,s())}),k(n,v)},children:(n,v)=>{var _=ze(),l=F(_);l.__keydown=[Pe,I,i,E,p];var b=$(l);{var r=h=>{Ue(h,{onFocus:()=>m(i,-1),get value(){return t(C)},set value(S){m(C,R(S))},get focus(){return t(T)},set focus(S){m(T,R(S))}})};N(b,h=>{w()&&h(r)})}var g=P(b,2);ce(g,21,()=>t(p),ve,(h,S,H)=>{K(h,{invisible:!0,invisibleOutline:!0,onclick:()=>E(t(S)),children:(fe,Fe)=>{var q=Ee(),pe=$(q,!0);x(q),j(()=>{u(q,"aria-selected",s()===t(S)),u(q,"data-focus",t(i)===H),le(pe,t(S))}),k(fe,q)},$$slots:{default:!0}})}),x(g),Z(g,h=>m(D,h),()=>t(D)),x(l);var L=P(l,2);re(L),j(()=>{W(l,"max-height",e.maxHeight),u(L,"name",e.name)}),ie(L,s),k(n,_)},$$slots:{button:!0,default:!0}}),J()}se(["keydown"]);var Ne=O('<div class="svelte-10y6iii"><!></div>');function qe(f,e){V(e,!0);let o=d(e,"openTop",3,!0);const c=";Path=/;SameSite=Lax;Max-Age=157680000";let s=he(),a=oe(()=>s.lang),w=U(R(a)),D=X(()=>o()?`-${ae.length*2+2}rem`:void 0),B=X(()=>o()?".2rem":void 0);z(()=>{let p=be("locale"),M=oe(()=>t(w));p&&p!==M&&(document.cookie="locale="+M+c)}),z(()=>{t(w)!==a&&i()});async function i(){if(document.cookie="locale="+t(w).toLowerCase()+c,e.updateBackend){let p=await me("/auth/v1/update_language");if(p.error){console.error(p.error);return}}window.location.reload()}var T=Ne(),C=$(T);te(C,{get ariaLabel(){return s.common.selectI18n},options:ae,borderless:!0,get offsetTop(){return t(D)},get offsetLeft(){return t(B)},get value(){return t(w)},set value(p){m(w,R(p))}}),x(T),j(()=>ge(T,"absolute",e.absolute)),k(f,T),J()}export{qe as L,te as O,ue as P,ke as u};
