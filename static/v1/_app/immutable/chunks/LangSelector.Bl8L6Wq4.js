import{a as w,t as h}from"./disclose-version.BP4T4xdV.js";import{O as c,l as x,aa as f,t as y,p as O,a as S,j as e,k as T,a9 as s,c as j,r as A}from"./index-client.hxMyB_b4.js";import{t as B}from"./class.CF2J4YCf.js";import{p as d}from"./proxy.DaVNR9vk.js";import{p as C}from"./props.DNAkfByl.js";import{u as I}from"./i18n.svelte.Ci9wvqOq.js";import{n as M,L as P,o as _}from"./helpers.CchIKxjM.js";import{O as E}from"./Options.CjsqRicG.js";import{b as G}from"./fetch.Bq59EV_b.js";import{p as N}from"./index.Bpmy_Q3z.js";var U=h('<div class="svelte-10y6iii"><!></div>');function W(v,t){S(t,!0);let i=C(t,"openTop",3,!0);const m=";Path=/;SameSite=Lax;Max-Age=157680000";let n=I(),l=c(()=>n.lang),a=x(d(l)),p=s(()=>{var o;return(o=N.route.id)!=null&&o.includes("/admin")?P:_}),g=s(()=>i()?`-${e(p).length*2+2}rem`:void 0),L=s(()=>i()?".2rem":void 0);f(()=>{let o=M("locale"),u=c(()=>e(a));o&&o!==u&&(document.cookie="locale="+u+m)}),f(()=>{e(a)!==l&&b()});async function b(){if(document.cookie="locale="+e(a).toLowerCase()+m,t.updateBackend){let o=await G("/auth/v1/update_language");if(o.error){console.error(o.error);return}}window.location.reload()}var r=U(),k=j(r);E(k,{get ariaLabel(){return n.common.selectI18n},get options(){return e(p)},borderless:!0,get offsetTop(){return e(g)},get offsetLeft(){return e(L)},get value(){return e(a)},set value(o){T(a,d(o))}}),A(r),y(()=>B(r,"absolute",t.absolute)),w(v,r),O()}export{W as L};
