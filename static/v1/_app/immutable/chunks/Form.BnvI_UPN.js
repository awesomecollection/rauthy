import{a as b,t as v}from"./disclose-version.BP4T4xdV.js";import{t as P,p as T,a as D,c as R,r as k}from"./index-client.hxMyB_b4.js";import{e as y}from"./render.yNX9q8-B.js";import{s as E}from"./language.svelte.DowwhO9_.js";import{s as l}from"./class.CF2J4YCf.js";import{p as f}from"./props.DNAkfByl.js";import{f as F}from"./pow.BMnvYon0.js";import{u as x}from"./form.DekAF1-C.js";import{a as A,e as O}from"./fetch.Bq59EV_b.js";var V=v("<form><!></form>");function H(w,o){D(o,!0);let h=f(o,"method",3,"POST"),p=f(o,"isError",15),S=f(o,"convertDateToTs",19,()=>[]);async function d(c){var u;c.preventDefault();const e=c.currentTarget;if(e.reportValidity())p(!1);else{p(!0);return}const s=new FormData(e);for(let a of S()){let m=((u=s.get(a))==null?void 0:u.toString())||"",n=x(m)||"";s.set(a,(n==null?void 0:n.toString())||"")}if(o.withPowAs){let a=await F();s.set(o.withPowAs,a||"")}let t,i=new URLSearchParams;if(s.forEach((a,m)=>{i.append(m,a.toString())}),o.onSubmit){o.onSubmit(e,i);return}t=await A(e,i),t&&(t.ok?o.onResponse&&(o.onResponse(t),o.resetOnSubmit&&t.ok&&e.reset()):await O(t))}var r=V(),g=R(r);E(g,()=>o.children),k(r),P(()=>{l(r,"action",o.action),l(r,"method",h())}),y("submit",r,d),b(w,r),T()}export{H as F};
