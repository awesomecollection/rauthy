import"./disclose-version.BDr9Qe-U.js";import{t as b,p as K,a6 as Q,y as e,z as n,c,r as v,a as R,A as j,s as y,f as V}from"./index-client.Di99sPv0.js";import{e as W,s as z}from"./render.Cjc4CIr8.js";import{i as X}from"./if.DgeUjMU2.js";import{a as x,n as Y,t as L}from"./template.BEKX6jgL.js";import{s as i}from"./class.BCapn1bP.js";import{a as B}from"./index.BnJsthXQ.js";import{c as Z}from"./input.NYWjhvEE.js";import{p as C}from"./proxy.BQ2dmY0t.js";import{p as t}from"./props.ClgLgKUv.js";import{a as q}from"./helpers.D3KrX4pz.js";import{L as aa}from"./Loading.kVoduAVY.js";import{u as ra}from"./i18n_admin.svelte.DI6l2V4l.js";import{u as oa}from"./fetch.DxJS_Pk_.js";var sa=Y('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function ia(A,a){let U=t(a,"opacity",3,.9),g=t(a,"width",3,"1.5rem"),w=t(a,"color",3,"currentColor");var m=sa();i(m,"stroke-width",2),b(()=>{i(m,"stroke",w()),i(m,"width",g()),i(m,"opacity",U())}),x(A,m)}var ea=L('<div class="flex space-between loading svelte-1k623j2"><span class="flex gap-05"><span> </span> <span> </span> <span>/</span> <span> </span></span> <!></div>'),ta=L('<label class="svelte-1k623j2"><!></label> <input type="file" class="svelte-1k623j2">',1),la=L('<form aria-dropeffect="move" aria-label="Upload" class="flex svelte-1k623j2"><!></form>');function na(A,a){K(a,!0);let U=t(a,"method",3,"PUT"),g=t(a,"accept",19,()=>[".image/jpg","image/jpeg","image/png","image/svg"]),w=t(a,"buttonOnly",3,!1),m=t(a,"buttonSize",3,"1.5rem"),I=t(a,"multiple",3,!1),N=t(a,"width",3,"17rem"),O=t(a,"height",3,"2.5rem");const M=q();let P=ra(),k=j(!1),d=j(void 0),S=j(0),u=j(0);Q(()=>{!e(k)&&e(d)&&e(d).length>0&&$(e(d))});function _(s){var o;n(d,C((o=s.dataTransfer)==null?void 0:o.files))}async function $(s){var o;n(S,C(s.length)),n(u,0),n(k,!0);for(let r of s){if(console.log("uploading file",r),g()&&!g().includes(r.type)){n(u,e(u)+1);continue}let p=await oa(U(),a.url,r,a.fileName||r.name);p.error?console.error(p.error):(o=a.onSuccess)==null||o.call(a),n(u,e(u)+1)}n(d,void 0),n(k,!1)}var f=la(),D=c(f);{var E=s=>{var o=ea(),r=c(o),p=c(r),l=c(p);v(p);var h=y(p,2),G=c(h,!0);v(h);var T=y(h,4),H=c(T,!0);v(T),v(r);var J=y(r,2);aa(J,{}),v(o),b(()=>{z(l,`${P.common.loading??""}:`),z(G,e(u)),z(H,e(S))}),x(s,o)},F=s=>{var o=ta(),r=V(o);i(r,"for",M);var p=c(r);ia(p,{get width(){return m()}}),v(r);var l=y(r,2);i(l,"id",M),b(()=>i(l,"accept",g()&&g().join(", "))),b(()=>{i(r,"aria-disabled",a.disabled),i(l,"aria-hidden",w()),i(l,"aria-disabled",a.disabled),l.disabled=a.disabled,l.multiple=I()}),Z(l,()=>e(d),h=>n(d,h)),x(s,o)};X(D,s=>{e(k)?s(E):s(F,!1)})}v(f),b(()=>{i(f,"data-nopad",w()),B(f,"width",N()),B(f,"height",O())}),W("drop",f,_),x(A,f),R()}export{na as I};
