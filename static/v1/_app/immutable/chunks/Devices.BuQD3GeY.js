import{y as ea,z as K,A as _e,I as aa,K as $e,aI as ta,aO as sa,aN as oa,C as ia,as as ra,Z as la,aZ as na,d as Ie,X as ie,W as va,ad as ca,a3 as m,a5 as u,a2 as y,g as l,p as Q,o as Ee,j as A,a_ as da,n as re,a1 as _,a as ee,_ as L,a0 as le,h as ae,a4 as ua}from"./index-client.CGppiJvc.js";import{l as Te,k as ma,w as Ce,d as q,s as I,e as U}from"./render.D4MwAWTL.js";import{d as Se,e as fa,a as k,b as C,t as Ne,c as Me,n as pa}from"./disclose-version.DZhRUPAc.js";import{e as De,i as ba}from"./OptionSelect.BCgZksOM.js";import{s as j,r as Ae,l as xa,t as Re,f as ha,b as wa}from"./Loading.FF_EHyHU.js";import{p as E,s as ne,b as ka,a as ve}from"./props.Df_pGDSd.js";import{t as Ue,y as ga,Y as ya,J as je,Z as _a,$ as $a,a0 as Ia}from"./dataFetching.Dto1xJW6.js";import{r as ce}from"./legacy-client.CgqodnwN.js";import{i as V}from"./if.DUA6Hpfn.js";import{p as H}from"./proxy.DB4Km9hY.js";import{s as de}from"./snippet.xhmr1ywJ.js";import{b as Oe}from"./this.B23tdsYu.js";import{w as Ea}from"./index.BU3V9-NS.js";import{i as Ye}from"./tweened.CQQvc4Vq.js";import{I as Ta}from"./Input.Bj_i2TLU.js";import{I as Ca,a as Sa}from"./CheckIcon.Cjxxxfsf.js";import{u as Na}from"./i18n.svelte.BTGsPiz_.js";function Pe(e,t,o,a,i){var s=e,n="",c;ea(()=>{if(n===(n=t()??"")){K&&_e();return}c!==void 0&&(la(c),c=void 0),n!==""&&(c=aa(()=>{if(K){$e.data;for(var v=_e(),f=v;v!==null&&(v.nodeType!==8||v.data!=="");)f=v,v=ta(v);if(v===null)throw sa(),oa;Se($e,f),s=ia(v);return}var $=n+"",h=fa($);Se(ra(h),h.lastChild),s.before(h)}))})}function Ma(e,t,o=t){var a=na();Te(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=ue(e)?me(s):s,o(s),a&&s!==(s=t())){var n=e.selectionStart,c=e.selectionEnd;e.value=s??"",c!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(c,e.value.length))}}),(K&&e.defaultValue!==e.value||Ie(t)==null&&e.value)&&o(ue(e)?me(e.value):e.value),ie(()=>{var i=t();ue(e)&&i===me(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Da(e,t,o=t){Te(e,"change",a=>{var i=a?e.defaultChecked:e.checked;o(i)}),(K&&e.defaultChecked!==e.checked||Ie(t)==null)&&o(e.checked),ie(()=>{var a=t();e.checked=!!a})}function ue(e){var t=e.type;return t==="number"||t==="range"}function me(e){return e===""?null:+e}function Aa(e,t,o=t){var a=e==="x",i=()=>Ce(()=>{s=!0,clearTimeout(n),n=setTimeout(c,100),o(window[a?"scrollX":"scrollY"])});addEventListener("scroll",i,{passive:!0});var s=!1,n,c=()=>{s=!1},v=!0;ie(()=>{var f=t();v?v=!1:!s&&f!=null&&(s=!0,clearTimeout(n),scrollTo(window.scrollX,f),n=setTimeout(c,100))}),va(i),ca(()=>{removeEventListener("scroll",i)})}function Ra(e,t){ma(window,["resize"],()=>Ce(()=>t(window[e])))}var Ua=(e,t,o)=>t(l(o)),ja=C('<button class="btn font-label svelte-n2aryx"> </button>'),Oa=C('<div class="bar noselect svelte-n2aryx"></div>');function Ya(e,t){let o=E(t,"labels",19,()=>[]),a=E(t,"selected",15);var i=Oa();De(i,21,o,ba,(s,n)=>{var c=ja();c.__click=[Ua,a,n];var v=m(c,!0);u(c),y(()=>{j(c,"data-selected",a()===l(n)),I(v,l(n))}),U("keypress",c,()=>a(l(n))),k(s,c)}),u(i),k(e,i)}q(["click"]);function fe(e,t,o,a){if(typeof o=="number"||Ye(o)){const i=a-o,s=(o-t)/(e.dt||1/60),n=e.opts.stiffness*i,c=e.opts.damping*s,v=(n-c)*e.inv_mass,f=(s+v)*e.dt;return Math.abs(f)<e.opts.precision&&Math.abs(i)<e.opts.precision?a:(e.settled=!1,Ye(o)?new Date(o.getTime()+f):o+f)}else{if(Array.isArray(o))return o.map((i,s)=>fe(e,t[s],o[s],a[s]));if(typeof o=="object"){const i={};for(const s in o)i[s]=fe(e,t[s],o[s],a[s]);return i}else throw new Error(`Cannot spring ${typeof o} values`)}}function pe(e,t={}){const o=Ea(e),{stiffness:a=.15,damping:i=.8,precision:s=.01}=t;let n,c,v,f=e,$=e,h=1,M=0,N=!1;function d(b,p={}){$=b;const x=v={};return e==null||p.hard||r.stiffness>=1&&r.damping>=1?(N=!0,n=Ae.now(),f=b,o.set(e=$),Promise.resolve()):(p.soft&&(M=1/((p.soft===!0?.5:+p.soft)*60),h=0),c||(n=Ae.now(),N=!1,c=xa(w=>{if(N)return N=!1,c=null,!1;h=Math.min(h+M,1);const D={inv_mass:h,opts:r,settled:!0,dt:(w-n)*60/1e3},O=fe(D,f,e,$);return n=w,f=e,o.set(e=O),D.settled&&(c=null),!D.settled})),new Promise(w=>{c.promise.then(()=>{x===v&&w()})}))}const r={set:d,update:(b,p)=>d(b($,e),p),subscribe:o.subscribe,stiffness:a,damping:i,precision:s};return r}var Pa=C('<div class="tooltip svelte-op12yu"><!></div>'),Xa=C('<div role="none"><!> <!></div>');function be(e,t){Q(t,!0);const o=ne(),a=()=>ve(l(f),"$coords",o);let i=E(t,"xOffset",3,10),s=E(t,"yOffset",3,10),n=E(t,"text",3,""),c=E(t,"html",3,""),v=L(!1),f=L(void 0),$;Ee(()=>{ka(A(f,H(pe({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",o)}),da(()=>{clearTimeout($)});function h(){clearTimeout($),A(v,!0)}function M(){$=setTimeout(()=>{A(v,!1)},100)}function N(x){l(f).set({x:x.clientX+i(),y:x.clientY+s()})}var d=Xa();d.__mouseover=h,d.__mouseout=M,d.__mousemove=N;var r=m(d);de(r,()=>t.children??re);var b=_(r,2);{var p=x=>{var w=Pa(),D=m(w);{var O=S=>{var g=Ne();y(()=>I(g,n())),k(S,g)},Z=S=>{var g=Me(),R=le(g);{var J=X=>{var W=Me(),z=le(W);Pe(z,c),k(X,W)};V(R,X=>{c()&&X(J)},!0)}k(S,g)};V(D,S=>{n()?S(O):S(Z,!1)})}u(w),y(()=>j(w,"style",`top: ${`${a().y}px`??""}; left: ${`${a().x}px`??""}`)),Re(7,w,()=>ha,()=>({delay:400,duration:200})),k(x,w)};V(b,x=>{l(v)&&x(p)})}u(d),U("focus",d,h),U("blur",d,M),k(e,d),ee()}q(["mouseover","mouseout","mousemove"]);var Ha=C('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function Wa(e,t){Q(t,!0);const o=ne(),a=()=>ve(n,"$margin",o);let i=E(t,"selected",15,!1);const s=11;let n=pe(0,{stiffness:.15,damping:.5});ce(()=>{n.set(i()?s:0)});function c(){i(!i())}var v=Ha();v.__click=c;var f=m(v);u(v),y(()=>{j(v,"aria-checked",i()),Ue(v,"selectedOuter",i()),j(f,"style",`margin-left: ${`${a()}px`??""}`),Ue(f,"selected",i())}),U("keypress",v,c),k(e,v),ee()}q(["click"]);var Ga=pa('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function Xe(e,t){let o=E(t,"color",3,"var(--col-text)"),a=E(t,"opacity",3,.9),i=E(t,"width",3,20);var s=Ga();j(s,"stroke-width",2),y(()=>{j(s,"width",i()),j(s,"color",o()),j(s,"opacity",a())}),k(e,s)}var La=C('<div class="body svelte-1xshgki"><!></div>'),Va=C('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function He(e,t){Q(t,!0);const o=ne(),a=()=>ve(h,"$rotate",o);let i=E(t,"idx",11,0),s=E(t,"show",15),n=E(t,"expandedCallback",3,()=>{}),c=L(!1),v=L(void 0),f=L(void 0),$=i()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const h=pe(0,{stiffness:.1,damping:.4});function M(){!s()&&n()&&n()(),s(!s())}function N(){const g=l(v).offsetTop+l(f).scrollHeight+100;window.innerHeight+window.scrollY-g<0&&window.scroll({top:g,behavior:"smooth"})}ce(()=>{s()?h.set(90):h.set(0)}),ce(()=>{s()&&l(f)&&setTimeout(()=>{N()},100)});var d=Va(),r=m(d),b=m(r);b.__click=M;var p=m(b),x=m(p),w=ae(()=>l(c)?"var(--col-act2a)":"var(--col-act2)");Xe(x,{get color(){return l(w)}}),u(p),u(b);var D=_(b,2),O=m(D);de(O,()=>t.header??re),u(D),u(r);var Z=_(r,2);{var S=g=>{var R=La(),J=m(R);de(J,()=>t.body??re),u(R),Oe(R,X=>A(f,X),()=>l(f)),Re(7,R,()=>wa,()=>({duration:200})),k(g,R)};V(Z,g=>{s()&&g(S)})}u(d),Oe(d,g=>A(v,g),()=>l(v)),y(()=>{ga(d,"border-left",s()?$:"none"),j(p,"style",`rotate: ${a()??""}deg`)}),U("mouseenter",b,()=>A(c,!0)),U("mouseleave",b,()=>A(c,!1)),U("keypress",b,M),k(e,d),ee()}q(["click"]);var Za=C('<div class="device-header svelte-oumbix"><div class="device-head font-mono svelte-oumbix"> </div></div>'),Ja=(e,t,o)=>t(l(o).id),za=C('<div role="button" tabindex="0" class="icon-btn-input svelte-oumbix"><!></div>'),Ba=(e,t,o)=>t(l(o).id),Fa=C('<div role="button" tabindex="0" class="icon-btn-value svelte-oumbix"><!></div>'),qa=C('<div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="row svelte-oumbix"><div class="value svelte-oumbix"> </div> <!></div></div>'),Ka=C('<div class="device svelte-oumbix"><div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value font-mono svelte-oumbix"> </div></div> <div class="row svelte-oumbix"><!> <!></div> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div> <!> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div></div>'),Qa=C('<div class="head svelte-oumbix"> </div> <div class="devices svelte-oumbix"></div>',1);function et(e,t){Q(t,!0);let o=E(t,"userId",3,""),a=Na(),i=L(H([])),s=H({}),n=H({});Ee(()=>{c()});async function c(){let d=await ya(o()),r=await d.json();if(d.ok){for(let b of r)n[b.id]=b.name;A(i,H(r))}else console.error("error fetching devices: "+r.message)}async function v(d){let r=n[d];if($a.test(r))s[d]="";else{s[d]=(a==null?void 0:a.common.invalidInput)||"Invalid Input";return}let b={device_id:d,name:r},p=await _a(o(),b);if(p.ok){s[d]="";for(let x of l(i))if(x.id===d){x.name=r;break}A(i,H([...l(i)])),n[d]=r}else{let x=await p.json();console.error(x)}}async function f(d){let r={device_id:d},b=await Ia(o(),r);if(b.ok){for(let p of l(i))if(p.id===d){p.refresh_exp=void 0;break}A(i,H([...l(i)]))}else{let p=await b.json();console.error(p)}}var $=Qa(),h=le($),M=m(h,!0);u(h);var N=_(h,2);De(N,21,()=>l(i),d=>d.id,(d,r)=>{He(d,{header:b=>{var p=Za(),x=m(p),w=m(x,!0);u(x),u(p),y(()=>I(w,l(r).name)),k(b,p)},body:b=>{var p=Ka(),x=m(p),w=m(x),D=m(w,!0);y(()=>I(D,(a==null?void 0:a.account.deviceId.toUpperCase())||"ID")),u(w);var O=_(w,2),Z=m(O,!0);u(O),u(x);var S=_(x,2),g=m(S),R=ae(()=>(a==null?void 0:a.account.deviceName.toUpperCase())||"Name");Ta(g,{autocomplete:"off",get placeholder(){return l(R)},get value(){return n[l(r).id]},set value(T){n[l(r).id]=T},get error(){return s[l(r).id]},set error(T){s[l(r).id]=T},$$events:{enter:()=>v(l(r).id)},children:(T,G)=>{ua();var Y=Ne();y(()=>I(Y,(a==null?void 0:a.account.deviceName.toUpperCase())||"NAME")),k(T,Y)},$$slots:{default:!0}});var J=_(g,2);{var X=T=>{var G=ae(()=>(a==null?void 0:a.common.save)||"Save");be(T,{get text(){return l(G)},children:(Y,ye)=>{var P=za();P.__click=[Ja,v,r];var B=m(P);Ca(B,{color:"var(--col-ok)",width:24}),u(P),U("keypress",P,()=>v(l(r).id)),k(Y,P)},$$slots:{default:!0}})};V(J,T=>{n[l(r).id]!=l(r).name&&T(X)})}u(S);var W=_(S,2),z=m(W),We=m(z,!0);y(()=>I(We,(a==null?void 0:a.account.regDate.toUpperCase())||"REGISTRATION DATE")),u(z);var xe=_(z,2),Ge=m(xe,!0);u(xe),u(W);var te=_(W,2),se=m(te),Le=m(se,!0);y(()=>I(Le,(a==null?void 0:a.account.accessExp.toUpperCase())||"ACCESS EXPIRES")),u(se);var he=_(se,2),Ve=m(he,!0);y(()=>I(Ve,je(l(r).access_exp))),u(he),u(te);var we=_(te,2);{var Ze=T=>{var G=qa(),Y=m(G),ye=m(Y,!0);y(()=>I(ye,(a==null?void 0:a.account.accessRenew.toUpperCase())||"ACCESS RENEW UNTIL")),u(Y);var P=_(Y,2),B=m(P),Be=m(B,!0);y(()=>I(Be,je(l(r).refresh_exp))),u(B);var Fe=_(B,2),qe=ae(()=>(a==null?void 0:a.account.accessRenewDelete)||"Delete the possibility to renew");be(Fe,{get text(){return l(qe)},children:(Ke,at)=>{var F=Fa();F.__click=[Ba,f,r];var Qe=m(F);Sa(Qe,{color:"var(--col-err)",width:24}),u(F),U("keypress",F,()=>f(l(r).id)),k(Ke,F)},$$slots:{default:!0}}),u(P),u(G),k(T,G)};V(we,T=>{l(r).refresh_exp&&T(Ze)})}var ke=_(we,2),oe=m(ke),Je=m(oe,!0);y(()=>I(Je,(a==null?void 0:a.account.regIp.toUpperCase())||"REGISTRATION FROM IP")),u(oe);var ge=_(oe,2),ze=m(ge,!0);u(ge),u(ke),u(p),y(()=>{I(Z,l(r).id),I(Ge,l(r).created),I(ze,l(r).peer_ip)}),k(b,p)},$$slots:{header:!0,body:!0}})}),u(N),y(()=>I(M,(a==null?void 0:a.account.devicesDesc)||"Devices linked to this account")),k(e,$),ee()}q(["click"]);export{et as D,He as E,Xe as I,Wa as S,Ya as T,be as a,Ma as b,Ra as c,Aa as d,Da as e,Pe as h};
