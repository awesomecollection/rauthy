import{a as k,n as K,t as L}from"./disclose-version.BP4T4xdV.js";import{t as b,a as Q,aa as R,j as i,k as n,c,r as v,p as V,l as x,s as j,f as W}from"./index-client.hxMyB_b4.js";import{e as X,s as M}from"./render.yNX9q8-B.js";import{i as Y}from"./if.BeBa1Kxb.js";import{s as e}from"./class.CF2J4YCf.js";import{a as B,L as Z}from"./Button.BR1gOfNn.js";import{c as q}from"./input.BqbgywMu.js";import{p as C}from"./proxy.DaVNR9vk.js";import{p as t}from"./props.DNAkfByl.js";import{g as aa}from"./helpers.CchIKxjM.js";import{u as ra}from"./i18n_admin.svelte.lt3dD7TQ.js";import{u as sa}from"./fetch.Bq59EV_b.js";var oa=K('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function ea(U,a){let A=t(a,"opacity",3,.9),g=t(a,"width",3,"1.5rem"),w=t(a,"color",3,"currentColor");var d=oa();e(d,"stroke-width",2),b(()=>{e(d,"stroke",w()),e(d,"width",g()),e(d,"opacity",A())}),k(U,d)}var ia=L('<div class="flex space-between loading svelte-1210bad"><span class="flex gap-05"><span> </span> <span> </span> <span>/</span> <span> </span></span> <!></div>'),ta=L('<label class="svelte-1210bad"><!></label> <input type="file" class="svelte-1210bad">',1),la=L('<form aria-dropeffect="move" aria-label="Upload" class="flex svelte-1210bad"><!></form>');function na(U,a){Q(a,!0);let A=t(a,"method",3,"PUT"),g=t(a,"accept",19,()=>[".image/jpg","image/jpeg","image/png","image/svg"]),w=t(a,"buttonOnly",3,!1),d=t(a,"buttonSize",3,"1.5rem"),I=t(a,"multiple",3,!1),N=t(a,"width",3,"17rem"),O=t(a,"height",3,"2.5rem");const S=aa();let P=ra(),y=x(!1),m=x(void 0),T=x(0),u=x(0);R(()=>{!i(y)&&i(m)&&i(m).length>0&&$(i(m))});function _(o){var s;n(m,C((s=o.dataTransfer)==null?void 0:s.files))}async function $(o){var s;n(T,C(o.length)),n(u,0),n(y,!0);for(let r of o){if(console.log("uploading file",r),g()&&!g().includes(r.type)){n(u,i(u)+1);continue}let p=await sa(A(),a.url,r,a.fileName||r.name);p.error?console.error(p.error):(s=a.onSuccess)==null||s.call(a),n(u,i(u)+1)}n(m,void 0),n(y,!1)}var f=la(),D=c(f);{var E=o=>{var s=ia(),r=c(s),p=c(r),l=c(p);v(p);var h=j(p,2),G=c(h,!0);v(h);var z=j(h,4),H=c(z,!0);v(z),v(r);var J=j(r,2);Z(J,{}),v(s),b(()=>{M(l,`${P.common.loading??""}:`),M(G,i(u)),M(H,i(T))}),k(o,s)},F=o=>{var s=ta(),r=W(s);e(r,"for",S);var p=c(r);ea(p,{get width(){return d()}}),v(r);var l=j(r,2);e(l,"id",S),b(()=>e(l,"accept",g()&&g().join(", "))),b(()=>{e(r,"aria-disabled",a.disabled),e(l,"aria-hidden",w()),e(l,"aria-disabled",a.disabled),l.disabled=a.disabled,l.multiple=I()}),q(l,()=>i(m),h=>n(m,h)),k(o,s)};Y(D,o=>{i(y)?o(E):o(F,!1)})}v(f),b(()=>{e(f,"data-nopad",w()),B(f,"width",N()),B(f,"height",O())}),X("drop",f,_),k(U,f),V()}export{na as I};
