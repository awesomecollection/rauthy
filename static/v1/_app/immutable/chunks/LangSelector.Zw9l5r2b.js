import"./disclose-version.BDr9Qe-U.js";import{p as G,F as O,u as t,v as w,f as H,t as j,a as N,w as z,c as C,r as M,s as U,O as Z,G as oe}from"./runtime.BONl2e88.js";import{e as Y,a as m,t as A,n as K}from"./template.B7ldVCvc.js";import{i as F}from"./if.DS90EFHs.js";import{t as re,s as f,d as ae,b as Q}from"./index.BJiFQ8Di.js";import{p as R}from"./proxy.0BECmVET.js";import{u as ne}from"./i18n.svelte.B1gwAzk0.js";import{B as q,a as me}from"./fetch.JUNnB5kv.js";import{p as u}from"./props.BlbrNjWf.js";import{q as J,Y as ge,Z as se}from"./helpers.CQGRRstl.js";import{e as le,d as ie,s as ce}from"./render.AqJWcVDb.js";import{e as ve,i as de}from"./each.Bce--_O8.js";import{b as ue}from"./input.DulBaC0z.js";import{b as W}from"./this.8_1FeNtN.js";import{s as ee}from"./snippet.D6O6IDbh.js";var be=A(`<div class="icon moon svelte-m6xenu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75
                        0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75
                        21a9.753 9.753 0 009.002-5.998z"></path></svg></div>`),we=A(`<div class="icon sun svelte-m6xenu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12
                        18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75
                        3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"></path></svg></div>`),ke=A('<div class="container svelte-m6xenu"><!></div>');function Le(p,e){G(e,!0);const o="darkMode";let i=ne(),r=z(void 0);O(()=>{var s,g,D;const x=((g=(s=window==null?void 0:window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme:dark)"))==null?void 0:g.matches)??!1;if(t(r)===void 0){const v=(D=window==null?void 0:window.localStorage)==null?void 0:D.getItem(o);if(v){let _=v==="true";t(r)===x&&localStorage.removeItem(o),w(r,_)}else w(r,R(x))}else t(r)?(document.body.classList.remove("theme-light"),document.body.classList.add("theme-dark")):(document.body.classList.remove("theme-dark"),document.body.classList.add("theme-light"));x===t(r)?localStorage.removeItem(o):localStorage.setItem(o,t(r).toString())});function a(){w(r,!t(r))}var h=ke(),$=C(h);q($,{get ariaLabel(){return i.common.changeTheme},invisible:!0,onclick:a,children:(x,s)=>{var g=Y(),D=H(g);{var v=T=>{var k=be();m(T,k)},_=T=>{var k=we();m(T,k)};F(D,T=>{t(r)===!0?T(v):T(_,!1)})}m(x,g)},$$slots:{default:!0}}),M(h),j(()=>re(h,"absolute",e.absolute)),m(p,h),N()}var xe=A('<div><!> <div class="popover svelte-15eoy2j" popover="auto"><div class="inner fade-in svelte-15eoy2j"><!></div></div></div>');function fe(p,e){G(e,!0);let o=u(e,"ref",15),i=u(e,"roleButton",3,"button"),r=u(e,"offsetLeft",3,"0px"),a=u(e,"offsetTop",3,"0px"),h=u(e,"close",15);const $=J(),x=J();let s=z(void 0),g=z(!1);O(()=>{h(v)});function D(c){if(c.stopPropagation(),o()&&t(s))if(e.absolute)t(s).style.top=a(),t(s).style.left=r();else{let y=o().getBoundingClientRect();t(s).style.top=`calc(${y.bottom+window.scrollY}px + ${a()})`,t(s).style.left=`calc(${y.left+window.scrollX}px + ${r()})`}else console.warn("button and popover ref missing")}function v(){var c;(c=t(s))==null||c.hidePopover()}function _(c){var n;let y=c.newState;w(g,y==="open"),(n=e.onToggle)==null||n.call(e,y)}var T=xe(),k=C(T);q(k,{get role(){return i()},id:$,ariaControls:x,popovertarget:x,onclick:D,get invisible(){return e.btnInvisible},get isDisabled(){return e.btnDisabled},get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get ref(){return o()},set ref(c){o(c)},children:(c,y)=>{var n=Y(),b=H(n);ee(b,()=>e.button),m(c,n)},$$slots:{default:!0}});var B=U(k,2);f(B,"id",x),f(B,"aria-labelledby",$);var E=C(B),l=C(E);{var d=c=>{var y=Y(),n=H(y);{var b=S=>{var L=Y(),I=H(L);ee(I,()=>e.children),m(S,L)};F(n,S=>{t(g)&&S(b)})}m(c,y)},P=c=>{var y=Y(),n=H(y);ee(n,()=>e.children),m(c,y)};F(l,c=>{e.lazy?c(d):c(P,!1)})}M(E),M(B),W(B,c=>w(s,c),()=>t(s)),M(T),j(()=>f(B,"aria-label",e.ariaLabel)),le("toggle",B,_),m(p,T),N()}var ye=K('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function Se(p,e){let o=u(e,"opacity",3,.9),i=u(e,"width",3,"1.5rem"),r=u(e,"color",3,"currentColor");var a=ye();f(a,"stroke-width",2),j(()=>{f(a,"stroke",r()),f(a,"width",i()),f(a,"opacity",o())}),m(p,a)}var Me=K('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function De(p,e){let o=u(e,"opacity",3,.9),i=u(e,"width",3,"1.5rem"),r=u(e,"color",3,"currentColor");var a=Me();f(a,"stroke-width",2),j(()=>{f(a,"stroke",r()),f(a,"width",i()),f(a,"opacity",o())}),m(p,a)}function $e(p,e,o,i){var r,a,h;switch(p.code){case"Enter":e();break;case"Tab":(r=o.onTab)==null||r.call(o,i());break;case"ArrowUp":(a=o.onUp)==null||a.call(o,i());break;case"ArrowDown":(h=o.onDown)==null||h.call(o,i());break}}var Te=A('<div class="options svelte-hargsl"><!></div>'),Ce=p=>p.stopPropagation(),_e=A("<option></option>"),Ie=A('<datalist class="absolute svelte-hargsl"></datalist>'),Ae=A('<span class="backspace svelte-hargsl"><!></span>'),Be=A('<div class="btnSearch svelte-hargsl"><!></div>'),Pe=A('<search class="flex container svelte-hargsl"><!> <input type="search" autocomplete="off" placeholder="Search" class="svelte-hargsl"> <!> <div class="relative"><div class="absolute btnDelete svelte-hargsl"><!></div></div> <!></search>');function je(p,e){G(e,!0);let o=u(e,"id",19,J),i=u(e,"value",15,""),r=u(e,"option",15),a=u(e,"focus",15),h=u(e,"width",3,"100%");const $=J();let x=z(void 0),s=Z(()=>e.datalist&&e.datalist.length>0?$:void 0);O(()=>{a(D)});function g(){var n;(n=e.onSearch)==null||n.call(e,i())}function D(){var n;(n=t(x))==null||n.focus()}var v=Pe(),_=C(v);{var T=n=>{var b=Te(),S=C(b);te(S,{ariaLabel:"Search Option",get options(){return e.options},borderless:!0,offsetLeft:"-.25rem",get value(){return r()},set value(L){r(L)}}),M(b),m(n,b)};F(_,n=>{e.options&&n(T)})}var k=U(_,2);ae(k),k.__click=[Ce],k.__keydown=[$e,g,e,i],W(k,n=>w(x,n),()=>t(x));var B=U(k,2);{var E=n=>{var b=Ie();f(b,"id",$),ve(b,21,()=>e.datalist,de,(S,L)=>{var I=_e(),X={};j(()=>{X!==(X=t(L))&&(I.value=(I.__value=t(L))==null?"":t(L))}),m(S,I)}),M(b),m(n,b)};F(B,n=>{e.datalist&&n(E)})}var l=U(B,2),d=C(l),P=C(d);q(P,{ariaLabel:"Delete Input",invisible:!0,onclick:()=>i(""),children:(n,b)=>{var S=Ae(),L=C(S);Se(L,{color:"hsl(var(--bg-high))"}),M(S),m(n,S)},$$slots:{default:!0}}),M(d),M(l);var c=U(l,2);{var y=n=>{var b=Be(),S=C(b);q(S,{ariaLabel:"Search",invisible:!0,onclick:g,children:(L,I)=>{De(L,{})},$$slots:{default:!0}}),M(b),m(n,b)};F(c,n=>{e.onSearch&&n(y)})}M(v),j(()=>{Q(v,"border",e.borderless?void 0:"1px solid hsl(var(--bg-high))"),Q(v,"width",h()),f(k,"id",o()),f(k,"list",t(s)),f(k,"aria-label",e.ariaLabel||"Search"),f(k,"pattern",e.pattern)}),le("focus",k,()=>{var n;return(n=e.onFocus)==null?void 0:n.call(e)}),ue(k,i),m(p,v),N()}ie(["click","keydown"]);var ze=K('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>');function Ue(p,e){let o=u(e,"opacity",3,.9),i=u(e,"width",3,"1.5rem"),r=u(e,"color",3,"currentColor");var a=ze();f(a,"stroke-width",2),j(()=>{f(a,"width",i()),f(a,"color",r()),f(a,"opacity",o())}),m(p,a)}function Re(p,e,o,i,r){let a=p.code;a==="ArrowDown"?(p.preventDefault(),e()&&w(o,t(o)+1)):a==="ArrowUp"?(p.preventDefault(),e()&&w(o,t(o)-1)):a==="Enter"&&t(o)>-1?i(t(r)[t(o)]):a==="Enter"&&t(o)===-1&&t(r).length===1&&i(t(r)[0])}var Ee=A('<div class="btn svelte-5ktp6l"><div class="btnText svelte-5ktp6l"> </div> <!></div>'),Oe=A('<div class="optPopover svelte-5ktp6l"> </div>'),Fe=A('<div role="listbox" tabindex="0" class="popover svelte-5ktp6l"><!> <div class="popoverOptions svelte-5ktp6l"></div></div> <input type="hidden" aria-hidden="true">',1);function te(p,e){G(e,!0);let o=u(e,"ref",15),i=u(e,"options",19,()=>[]),r=u(e,"value",15),a=u(e,"borderless",3,!1),h=u(e,"withSearch",3,!1),$=z(void 0),x=z(void 0),s=z(R(h()?-1:0)),g=z(void 0),D=z(""),v=Z(()=>{if(!h())return i();if(typeof r()=="string")return i().filter(d=>d.toLowerCase().includes(t(D).toLowerCase()));let l=Number.parseInt(t(D))||r();return i().filter(d=>d===l)}),_=!1;O(()=>{var d;let l=r();_?(d=e.onChange)==null||d.call(e,l):_=!0}),O(()=>{var l,d;if(t(s)===-1&&((l=t($))==null||l.scrollTo({top:0,behavior:"smooth"})),h()){if(t(s)<0||t(s)>t(v).length-1){w(s,-1),(d=t(g))==null||d();return}}else t(s)<0?w(s,t(v).length-1):t(s)>t(v).length-1&&w(s,0),T()});function T(){if(t($)){let l=t($).getElementsByTagName("button")[t(s)];l==null||l.scrollIntoView({behavior:"smooth",block:"center"}),l==null||l.focus()}else console.error("refOptions is undefined")}function k(l){var d;l==="open"&&(h()?(w(s,-1),(d=t(g))==null||d()):(w(s,R(i().findIndex(P=>P===r())||0)),T()))}function B(){return t(v).length>0?!0:(w(s,-1),!1)}function E(l){r(l),w(D,""),setTimeout(()=>{var d;(d=t(x))==null||d()},20)}fe(p,{get ariaLabel(){return e.ariaLabel},roleButton:"combobox",btnInvisible:!0,get offsetTop(){return e.offsetTop},get offsetLeft(){return e.offsetLeft},onToggle:k,get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get ref(){return o()},set ref(l){o(l)},get close(){return t(x)},set close(l){w(x,R(l))},button:l=>{var d=Ee(),P=C(d),c=C(P,!0);M(P);var y=U(P,2);Ue(y,{width:".8rem"}),M(d),j(()=>{f(d,"data-border",!a()),ce(c,r())}),m(l,d)},children:(l,d)=>{var P=Fe(),c=H(P);c.__keydown=[Re,B,s,E,v];var y=C(c);{var n=L=>{je(L,{onFocus:()=>w(s,-1),get value(){return t(D)},set value(I){w(D,R(I))},get focus(){return t(g)},set focus(I){w(g,R(I))}})};F(y,L=>{h()&&L(n)})}var b=U(y,2);ve(b,21,()=>t(v),de,(L,I,X)=>{q(L,{invisible:!0,invisibleOutline:!0,onclick:()=>E(t(I)),children:(pe,Ge)=>{var V=Oe(),he=C(V,!0);M(V),j(()=>{f(V,"aria-selected",r()===t(I)),f(V,"data-focus",t(s)===X),ce(he,t(I))}),m(pe,V)},$$slots:{default:!0}})}),M(b),W(b,L=>w($,L),()=>t($)),M(c);var S=U(c,2);ae(S),j(()=>{Q(c,"max-height",e.maxHeight),f(S,"name",e.name)}),ue(S,r),m(l,P)},$$slots:{button:!0,default:!0}}),N()}ie(["keydown"]);var He=A('<div class="svelte-10y6iii"><!></div>');function Ve(p,e){G(e,!0);let o=u(e,"openTop",3,!0);const i=";Path=/;SameSite=Lax;Max-Age=157680000";let r=ne(),a=oe(()=>r.lang),h=z(R(a)),$=Z(()=>o()?`-${se.length*2+2}rem`:void 0),x=Z(()=>o()?".2rem":void 0);O(()=>{let v=ge("locale"),_=oe(()=>t(h));v&&v!==_&&(document.cookie="locale="+_+i)}),O(()=>{t(h)!==a&&s()});async function s(){if(document.cookie="locale="+t(h).toLowerCase()+i,e.updateBackend){let v=await me("/auth/v1/update_language");if(v.error){console.error(v.error);return}}window.location.reload()}var g=He(),D=C(g);te(D,{get ariaLabel(){return r.common.selectI18n},options:se,borderless:!0,get offsetTop(){return t($)},get offsetLeft(){return t(x)},get value(){return t(h)},set value(v){w(h,R(v))}}),M(g),j(()=>re(g,"absolute",e.absolute)),m(p,g),N()}export{Ve as L,te as O,fe as P,Le as T};
