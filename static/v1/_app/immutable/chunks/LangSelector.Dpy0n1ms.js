import"./disclose-version.BDr9Qe-U.js";import{p as M,a6 as b,y as e,z as g,f as j,t as y,a as S,A as I,c as A,r as B,a0 as C,ab as L}from"./index-client.CVQra9Cu.js";import{e as $,a as u,t as h}from"./template.4ZWi6dE6.js";import{i as H}from"./if._4yhN2kP.js";import{t as T}from"./class.BnbJV1WX.js";import{p as x}from"./proxy.Dc6q2r8X.js";import{u as z}from"./i18n.svelte.DVZudxvm.js";import{B as N}from"./Button.B6DffihK.js";import{p as O}from"./props.BVYR8gU-.js";import{L as P,M as V,N as _}from"./helpers.B0e_YzoL.js";import{O as q}from"./Options.CJvP4CKt.js";import{b as D}from"./fetch.B_P4c8fm.js";import{p as E}from"./index.D_qo29lI.js";var F=h(`<div class="icon moon svelte-m6xenu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75
                        0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75
                        21a9.753 9.753 0 009.002-5.998z"></path></svg></div>`),G=h(`<div class="icon sun svelte-m6xenu"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12
                        18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75
                        3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"></path></svg></div>`),J=h('<div class="container svelte-m6xenu"><!></div>');function K(w,i){M(i,!0);const l="darkMode";let v=z(),t=I(void 0);b(()=>{var d,m,r;const n=((m=(d=window==null?void 0:window.matchMedia)==null?void 0:d.call(window,"(prefers-color-scheme:dark)"))==null?void 0:m.matches)??!1;if(e(t)===void 0){const c=(r=window==null?void 0:window.localStorage)==null?void 0:r.getItem(l);if(c){let o=c==="true";e(t)===n&&localStorage.removeItem(l),g(t,o)}else g(t,x(n))}else e(t)?(document.body.classList.remove("theme-light"),document.body.classList.add("theme-dark")):(document.body.classList.remove("theme-dark"),document.body.classList.add("theme-light"));n===e(t)?localStorage.removeItem(l):localStorage.setItem(l,e(t).toString())});function p(){g(t,!e(t))}var a=J(),f=A(a);N(f,{get ariaLabel(){return v.common.changeTheme},invisible:!0,onclick:p,children:(n,d)=>{var m=$(),r=j(m);{var c=s=>{var k=F();u(s,k)},o=s=>{var k=G();u(s,k)};H(r,s=>{e(t)===!0?s(c):s(o,!1)})}u(n,m)},$$slots:{default:!0}}),B(a),y(()=>T(a,"absolute",i.absolute)),u(w,a),S()}var U=h('<div class="svelte-10y6iii"><!></div>');function Q(w,i){M(i,!0);let l=O(i,"openTop",3,!0);const v=";Path=/;SameSite=Lax;Max-Age=157680000";let t=z(),p=C(()=>t.lang),a=I(x(p)),f=L(()=>{var o;return(o=E.route.id)!=null&&o.includes("/admin")?V:_}),n=L(()=>l()?`-${e(f).length*2+2}rem`:void 0),d=L(()=>l()?".2rem":void 0);b(()=>{let o=P("locale"),s=C(()=>e(a));o&&o!==s&&(document.cookie="locale="+s+v)}),b(()=>{e(a)!==p&&m()});async function m(){if(document.cookie="locale="+e(a).toLowerCase()+v,i.updateBackend){let o=await D("/auth/v1/update_language");if(o.error){console.error(o.error);return}}window.location.reload()}var r=U(),c=A(r);q(c,{get ariaLabel(){return t.common.selectI18n},get options(){return e(f)},borderless:!0,get offsetTop(){return e(n)},get offsetLeft(){return e(d)},get value(){return e(a)},set value(o){g(a,x(o))}}),B(r),y(()=>T(r,"absolute",i.absolute)),u(w,r),S()}export{Q as L,K as T};
