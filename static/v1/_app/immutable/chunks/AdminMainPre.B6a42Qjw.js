import"./disclose-version.BDr9Qe-U.js";import{V as Na,a5 as q,p as le,o as Le,j as s,a3 as ee,g as e,a as ie,a6 as S,a7 as d,a9 as c,a4 as i,n as kt,h as Be,aa as Vt,d as Ss,a8 as G,as as oa,aV as Ra,b as Ts,$ as Da}from"./index-client.C1uYfxHd.js";import{h as ja}from"./svelte-head.76d9LV1R.js";import{a as l,n as Ye,c as me,t as T,b as V}from"./template.BehheIQn.js";import{i as O}from"./if.DL6pUnI4.js";import{i as Cs,p as n}from"./proxy.bZKuG6wn.js";import{p as U,s as Oa,b as Ma,c as Pa,r as Jt}from"./props.OoymhrXq.js";import{l as As,m as za,n as Ls,i as Ns,o as Rs,q as Ds,s as js,t as Os}from"./dataFetching.Dq7bE0Ok.js";import{e as va,U as Ms,E as pt,o as ca,q as Ps,V as zs,W as Us,X as Ws,Y as Ua,M as Wa,Z as Pt,k as Xe,$ as qa,w as qs,a0 as Wt,a1 as Ga,a2 as Gs,a3 as Bs,a4 as Qt,j as tt,a5 as Ks,a6 as Fs,a7 as Ba,a8 as wt,a9 as Vs,r as Ka,aa as Fa,ab as Va,ac as qt,ad as da,ae as Js,af as Ys,ag as Ja,ah as Ya,ai as ua,S as Xs}from"./helpers.EoWe9H8J.js";import{B as Se,L as ha}from"./Button.BCobGyYN.js";import{h as Hs,l as Zs,b as ce,s as oe,a as ue,f as mt,t as St,c as be,r as nt,g as pa,i as Qs,d as Nt,e as Rt}from"./index.BcsnDkjo.js";import{i as Xa,s as er,T as Ze,S as Ve,D as tr,a as ar,h as Ha,b as sr}from"./Devices.CeMUjm8z.js";import{r as Te}from"./legacy-client.CLGpwDPz.js";import{l as rr,s as Y,d as ot,e as Oe,k as ma}from"./render.DlGhCWX2.js";import{s as xt}from"./snippet.D-0bt_Xy.js";import{w as Tt}from"./index.BrQhhgF-.js";import{I as ea,C as ta}from"./CheckIcon.DzhsoKrH.js";import{T as Za,b as dt,e as qe,i as ut,j as lr}from"./ThemeSwitch.B8t8VQsu.js";import{s as ir,g as zt,c as He,a as he,b as yt,I as ne}from"./Input.CUOUCx9V.js";import{b as fa}from"./this.B2VKympU.js";import{P as Gt,I as Qa,a as es,b as nr}from"./PasswordInput.UpF6iKp2.js";import{P as or}from"./PasswordPolicy.CJdZqFqF.js";import"./legacy.CJVMz36h.js";function ts(p,a,t){if(p.multiple)return cr(p,a);for(var o of p.options){var r=Yt(o);if(Cs(r,a)){o.selected=!0;return}}(!t||a!==void 0)&&(p.selectedIndex=-1)}function vr(p,a){Na(()=>{var t=new MutationObserver(()=>{var o=p.__value;ts(p,o)});return t.observe(p,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ga(p,a,t=a){var o=!0;rr(p,"change",r=>{var h=r?"[selected]":":checked",m;if(p.multiple)m=[].map.call(p.querySelectorAll(h),Yt);else{var u=p.querySelector(h)??p.querySelector("option:not([disabled])");m=u&&Yt(u)}t(m)}),Na(()=>{var r=a();if(ts(p,r,o),o&&r===void 0){var h=p.querySelector(":checked");h!==null&&(r=Yt(h),t(r))}p.__value=r,o=!1}),vr(p)}function cr(p,a){for(var t of p.options)t.selected=~a.indexOf(Yt(t))}function Yt(p){return"__value"in p?p.__value:p.value}function dr(p){return p}function ur(p){const a=p-1;return a*a*a+1}function wa(p,a){if(p===a||p!==p)return()=>p;const t=typeof p;if(t!==typeof a||Array.isArray(p)!==Array.isArray(a))throw new Error("Cannot interpolate values of different type");if(Array.isArray(p)){const o=a.map((r,h)=>wa(p[h],r));return r=>o.map(h=>h(r))}if(t==="object"){if(!p||!a)throw new Error("Object cannot be null");if(Xa(p)&&Xa(a)){const h=p.getTime(),m=a.getTime()-h;return u=>new Date(h+u*m)}const o=Object.keys(a),r={};return o.forEach(h=>{r[h]=wa(p[h],a[h])}),h=>{const m={};return o.forEach(u=>{m[u]=r[u](h)}),m}}if(t==="number"){const o=a-p;return r=>p+r*o}throw new Error(`Cannot interpolate ${t} values`)}function hr(p,a={}){const t=Tt(p);let o,r=p;function h(m,u){if(r=m,p==null)return t.set(p=m),Promise.resolve();let E=o,I=!1,{delay:v=0,duration:y=400,easing:f=dr,interpolate:A=wa}={...a,...u};if(y===0)return E&&(E.abort(),E=null),t.set(p=r),Promise.resolve();const k=Hs.now()+v;let g;return o=Zs(w=>{if(w<k)return!0;I||(g=A(p,m),typeof y=="function"&&(y=y(p,m)),I=!0),E&&(E.abort(),E=null);const $=w-k;return $>y?(t.set(p=m),!1):(t.set(p=g(f($/y))),!0)}),o.promise}return{set:h,update:(m,u)=>h(m(r,p),u),subscribe:t.subscribe}}const pr=Tt(),mr=Tt(),Xt=Tt(""),aa=Tt(!0);var fr=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg>');function gr(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=fr();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var wr=T('<div class="ver upd svelte-4tal6i"><a target="_blank" class="svelte-4tal6i"> </a></div>'),yr=T('<div class="ver svelte-4tal6i"> </div>');function br(p,a){le(a,!0);let t=S(""),o=S(!1),r=S("");Le(()=>{h()});async function h(){let v=await As();if(v.ok){let y=await v.json();s(t,n(y.current)),y.last_check,y.latest,s(r,n(y.latest_url)),s(o,n(y.update_available))}}var m=me(),u=ee(m);{var E=v=>{var y=wr(),f=d(y),A=d(f);c(f),c(y),q(()=>{ce(f,"href",e(r)),Y(A,`v${e(t)??""} \u26A0\uFE0F`)}),l(v,y)},I=v=>{var y=yr(),f=d(y);c(y),q(()=>Y(f,`v${e(t)??""}`)),l(v,y)};O(u,v=>{e(o)?v(E):v(I,!1)})}l(p,m),ie()}var $r=T('<div role="button" tabindex="0" class="close svelte-1hvg16q"><!></div> <div class="logo"><!></div>',1),_r=T('<div role="button" tabindex="0" class="burger svelte-1hvg16q"><!></div> <div></div> <div class="logo"><!></div>',1),kr=T("<!> <!>",1),xr=T('<div class="theme-collapsed svelte-1hvg16q"><!></div>'),Er=T('<nav class="nav svelte-1hvg16q"><div><!> <div class="menu svelte-1hvg16q"><div class="links svelte-1hvg16q"><!></div></div></div> <div class="version svelte-1hvg16q"><!></div></nav>');function Ir(p,a){le(a,!0);const t=Oa(),o=()=>Ma(E,"$width",t);let r=U(a,"selected",15,""),h=U(a,"widthExpanded",3,185),m=U(a,"widthCollapsed",3,60),u=U(a,"isExpanded",15,!0);const E=hr(u()?h():m(),{duration:200,easing:ur});aa.subscribe(L=>u(L)),Xt.subscribe(L=>{L&&r(L)}),Te(()=>{u()?(aa.set(!0),E.set(h())):(aa.set(!1),setTimeout(()=>{E.set(m())},200))}),Te(()=>{r()&&Xt.set(r())}),Le(()=>{pr.set(h()),mr.set(m()),Xt.set(r())});function I(){u(!u())}var v=Er(),y=d(v),f=d(y);{var A=L=>{var j=$r(),R=ee(j);R.__click=I;var N=d(R);ea(N,{}),c(R);var B=i(R,2),D=d(B);xt(D,()=>a.logo??kt),c(B),q(()=>oe(R,"left",`calc(${o()??""}px - 22px)`)),Oe("keypress",R,I),ue(1,R,()=>mt,()=>({delay:500,duration:200})),ue(2,R,()=>mt,()=>({duration:100})),ue(1,B,()=>mt,()=>({delay:250,duration:100})),ue(2,B,()=>mt,()=>({duration:20})),l(L,j)},k=L=>{var j=_r(),R=ee(j);R.__click=I,oe(R,"left","3px");var N=d(R);gr(N,{width:24}),c(R);var B=i(R,2);oe(B,"height","10px");var D=i(B,2),F=d(D);xt(F,()=>a.logo??kt),c(D),Oe("keypress",R,I),ue(1,R,()=>mt,()=>({delay:500,duration:200})),ue(2,R,()=>mt,()=>({duration:100})),ue(1,D,()=>mt,()=>({delay:250,duration:100})),ue(2,D,()=>mt,()=>({duration:20})),l(L,j)};O(f,L=>{u()?L(A):L(k,!1)})}var g=i(f,2),w=d(g),$=d(w);xt($,()=>a.entries??kt),c(w),c(g),c(y);var _=i(y,2),x=d(_);{var b=L=>{var j=kr(),R=ee(j);Za(R,{});var N=i(R,2);br(N,{}),l(L,j)},C=L=>{var j=xr(),R=d(j);Za(R,{}),c(j),l(L,j)};O(x,L=>{u()?L(b):L(C,!1)})}c(_),c(v),q(()=>{oe(v,"min-width",`${o()??""}px`),oe(v,"width",`${o()??""}px`),oe(v,"padding",u()?"20px 10px":"10px 3px")}),ue(1,_,()=>mt,()=>({delay:500,duration:200})),ue(2,_,()=>mt,()=>({duration:100})),l(p,v),ie()}ot(["click"]);var Sr=T('<div role="menuitem" tabindex="0" class="entry noselect font-label svelte-r55922"><!> <span class="label svelte-r55922"> </span></div>'),Tr=T('<div role="menuitem" tabindex="0" class="entryCollapsed noselect font-label svelte-r55922"><!> <span class="labelCollapsed svelte-r55922"> </span></div>');function ft(p,a){le(a,!0);let t=U(a,"label",3,""),o=U(a,"slotCollapsed",3,!0),r=S(!0),h=S("hsl(var(--text))"),m=S("");Xt.subscribe(k=>s(m,n(k))),aa.subscribe(k=>s(r,n(k)));let u=S(!1);function E(){e(u)?s(h,"hsl(var(--error))"):e(m)===t()?s(h,"hsl(var(--action))"):s(h,"hsl(var(--text))")}function I(){Xt.set(t())}Te(()=>{e(m)&&E()}),Te(()=>{e(u)?s(h,"hsl(var(--error))"):E()});var v=me(),y=ee(v);{var f=k=>{var g=Sr();g.__click=I;var w=d(g);xt(w,()=>a.children??kt);var $=i(w,2),_=d($,!0);c($),c(g),q(()=>{St(g,"selected",e(m)===t()),Y(_,t())}),Oe("keypress",g,I),Oe("mouseenter",g,()=>s(u,!0)),Oe("mouseleave",g,()=>s(u,!1)),ue(7,g,()=>mt,()=>({duration:100})),l(k,g)},A=k=>{var g=Tr();g.__click=I;var w=d(g);{var $=b=>{var C=me(),L=ee(C);xt(L,()=>a.children??kt),l(b,C)};O(w,b=>{o()&&b($)})}var _=i(w,2),x=d(_,!0);c(_),c(g),q(()=>{St(g,"selectedCollapsed",e(m)===t()),Y(x,t())}),Oe("keypress",g,I),Oe("mouseenter",g,()=>s(u,!0)),Oe("mouseleave",g,()=>s(u,!1)),ue(5,g,()=>mt,()=>({delay:200,duration:100})),l(k,g)};O(y,k=>{e(r)?k(f):k(A,!1)})}l(p,v),ie()}ot(["click"]);const lt={"Content-Type":"application/json",Accept:"application/json"};function De(){return{"csrf-token":va(),"Content-Type":"application/json",Accept:"application/json"}}async function ke(p){return p.status===403&&(await p.json()).error==="MfaRequired"&&(console.error("MFA is required for a rauthy admin account"),await ir(3e3),window.location.reload()),(p.status===401||p.status===403)&&window.location.reload(),p}async function Cr(){return await fetch("/auth/v1/oidc/certs",{method:"GET",headers:lt})}async function Ar(){const p=await fetch("/auth/v1/clients",{method:"GET",headers:lt});return await ke(p)}async function Lr(p){const a=await fetch("/auth/v1/clients",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Nr(p){const a=await fetch(`/auth/v1/clients/${p.id}`,{method:"PUT",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Rr(p){const a=await fetch(`/auth/v1/clients/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function Dr(p){const a=await fetch(`/auth/v1/clients/${p}/colors`,{method:"GET",headers:lt});return await ke(a)}async function jr(p,a){const t=await fetch(`/auth/v1/clients/${p}/colors`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Or(p){const a=await fetch(`/auth/v1/clients/${p}/colors`,{method:"DELETE",headers:De()});return await ke(a)}async function Mr(p,a){const t=new FormData;t.append("logo",a);const o=await fetch(`/auth/v1/clients/${p}/logo`,{method:"PUT",headers:{"csrf-token":va()},body:t});return await ke(o)}async function Pr(p){const a=await fetch(`/auth/v1/clients/${p}/logo`,{method:"DELETE",headers:De()});return await ke(a)}async function zr(p){const a=await fetch(`/auth/v1/clients/${p}/secret`,{method:"POST",headers:De()});return await ke(a)}async function Ur(p){const a=await fetch(`/auth/v1/clients/${p}/secret`,{method:"PUT",headers:De()});return await ke(a)}async function Wr(){const p=await fetch("/auth/v1/encryption/keys",{method:"GET",headers:lt});return await ke(p)}async function qr(p){const a=await fetch("/auth/v1/encryption/migrate",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Gr(p){const a=await fetch("/auth/v1/events",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function as(){const p=await fetch("/auth/v1/groups",{method:"GET",headers:lt});return await ke(p)}async function Br(p){const a=await fetch("/auth/v1/groups",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Kr(p,a){const t=await fetch(`/auth/v1/groups/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Fr(p){const a=await fetch(`/auth/v1/groups/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function Vr(){const p=await fetch("/auth/v1/login_time",{method:"GET",headers:lt});return await ke(p)}async function Jr(p){const a=await fetch("/auth/v1/password_hash_times",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Yr(p){const a=await fetch("/auth/v1/password_policy",{method:"PUT",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Xr(p){const a=await fetch("/auth/v1/users/request_reset",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Hr(){return await fetch("/auth/v1/providers",{method:"POST",headers:De()})}async function Zr(p){return await fetch("/auth/v1/providers/create",{method:"POST",headers:De(),body:JSON.stringify(p)})}async function Qr(p,a){return await fetch(`/auth/v1/providers/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)})}async function el(p){return await fetch(`/auth/v1/providers/${p}`,{method:"DELETE",headers:De()})}async function tl(p){return await fetch(`/auth/v1/providers/${p}/delete_safe`,{method:"GET",headers:De()})}async function al(p,a){const t=new FormData;t.append("logo",a);const o=await fetch(`/auth/v1/providers/${p}/img`,{method:"PUT",headers:{"csrf-token":va()},body:t});return await ke(o)}async function sl(p){return await fetch("/auth/v1/providers/lookup",{method:"POST",headers:De(),body:JSON.stringify(p)})}async function rl(){const p=await fetch("/auth/v1/oidc/rotate_jwk",{method:"POST",headers:De()});return await ke(p)}async function ll(){const p=await fetch("/auth/v1/sessions",{method:"GET",headers:lt});return await ke(p)}async function ss(p,a,t,o){let r=`/auth/v1/sessions?page_size=${p}`;a&&(r=`${r}&offset=${a}`),o&&(r=`${r}&backwards=${o}`),t&&(r=`${r}&continuation_token=${t}`);const h=await fetch(r,{method:"GET",headers:lt});return await ke(h)}async function il(){const p=await fetch("/auth/v1/sessions",{method:"DELETE",headers:De()});return await ke(p)}async function nl(p){const a=await fetch(`/auth/v1/sessions/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function ol(){const p=await fetch("/auth/v1/users",{method:"GET",headers:lt});return await ke(p)}async function rs(p,a,t,o){let r=`/auth/v1/users?page_size=${p}`;a&&(r=`${r}&offset=${a}`),o&&(r=`${r}&backwards=${o}`),t&&(r=`${r}&continuation_token=${t}`);const h=await fetch(r,{method:"GET",headers:lt});return await ke(h)}async function vl(p){const a=await fetch("/auth/v1/users",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function ls(p,a){const t=await fetch(`/auth/v1/users/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function cl(p){const a=await fetch(`/auth/v1/users/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function ya(){const p=await fetch("/auth/v1/users/attr",{method:"GET",headers:lt});return await ke(p)}async function dl(p){const a=await fetch("/auth/v1/users/attr",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function ul(p,a){const t=await fetch(`/auth/v1/users/attr/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function hl(p){const a=await fetch(`/auth/v1/users/attr/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function pl(p){const a=await fetch(`/auth/v1/users/${p}/attr`,{method:"GET",headers:lt});return await ke(a)}async function ml(p,a){const t=await fetch(`/auth/v1/users/${p}/attr`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function fl(){const p=await fetch("/auth/v1/api_keys",{method:"GET",headers:lt});return await ke(p)}async function gl(p){const a=await fetch("/auth/v1/api_keys",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function wl(p){const a=await fetch(`/auth/v1/api_keys/${p.name}`,{method:"PUT",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function yl(p){const a=await fetch(`/auth/v1/api_keys/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function bl(p){const a=await fetch(`/auth/v1/api_keys/${p}/secret`,{method:"PUT",headers:De()});return await ke(a)}async function $l(){const p=await fetch("/auth/v1/blacklist",{method:"GET",headers:lt});return await ke(p)}async function _l(p){const a=await fetch("/auth/v1/blacklist",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function kl(p){const a=await fetch(`/auth/v1/blacklist/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function is(){const p=await fetch("/auth/v1/roles",{method:"GET",headers:lt});return await ke(p)}async function xl(p){const a=await fetch("/auth/v1/roles",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function El(p,a){const t=await fetch(`/auth/v1/roles/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Il(p){const a=await fetch(`/auth/v1/roles/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function ns(){const p=await fetch("/auth/v1/scopes",{method:"GET",headers:lt});return await ke(p)}async function Sl(p){const a=await fetch("/auth/v1/scopes",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Tl(p,a){const t=await fetch(`/auth/v1/scopes/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Cl(p){const a=await fetch(`/auth/v1/scopes/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function Al(p,a,t){const o=await fetch(`/auth/v1/search?ty=${p}&idx=${a}&q=${t}`,{method:"GET",headers:lt});return await ke(o)}var Ll=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function Ht(p,a){let t=U(a,"color",3,"var(--col-text)"),o=U(a,"opacity",3,.9),r=U(a,"width",3,20);var h=Ll();ce(h,"stroke-width",2),q(()=>{ce(h,"width",r()),ce(h,"color",t()),ce(h,"opacity",o())}),l(p,h)}var Nl=T('<div class="body svelte-1xshgki"><!></div>'),Rl=T('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function vt(p,a){le(a,!0);const t=Oa(),o=()=>Ma(y,"$rotate",t);let r=U(a,"idx",11,0),h=U(a,"show",15),m=U(a,"expandedCallback",3,()=>{}),u=S(!1),E=S(void 0),I=S(void 0),v=r()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const y=er(0,{stiffness:.1,damping:.4});function f(){!h()&&m()&&m()(),h(!h())}function A(){const R=e(E).offsetTop+e(I).scrollHeight+100;window.innerHeight+window.scrollY-R<0&&window.scroll({top:R,behavior:"smooth"})}Te(()=>{h()?y.set(90):y.set(0)}),Te(()=>{h()&&e(I)&&setTimeout(()=>{A()},100)});var k=Rl(),g=d(k),w=d(g);w.__click=f;var $=d(w),_=d($),x=Be(()=>e(u)?"var(--col-act2a)":"var(--col-act2)");Ht(_,{get color(){return e(x)}}),c($),c(w);var b=i(w,2),C=d(b);xt(C,()=>a.header??kt),c(b),c(g);var L=i(g,2);{var j=R=>{var N=Nl(),B=d(N);xt(B,()=>a.body??kt),c(N),fa(N,D=>s(I,D),()=>e(I)),ue(7,N,()=>be,()=>({duration:200})),l(R,N)};O(L,R=>{h()&&R(j)})}c(k),fa(k,R=>s(E,R),()=>e(E)),q(()=>{oe(k,"border-left",h()?v:"none"),ce($,"style",`rotate: ${o()??""}deg`)}),Oe("mouseenter",w,()=>s(u,!0)),Oe("mouseleave",w,()=>s(u,!1)),Oe("keypress",w,f),l(p,k),ie()}ot(["click"]);const Dl=Tt([]),ba=Tt([]),jl=Tt([]),$a=Tt([]),Ol=Tt([]),os=Tt([]);var Ml=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function Pl(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=Ml();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var zl=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function Ul(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=zl();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var Wl=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function ql(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=Wl();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var Gl=T("<option> </option>"),Bl=T('<select class="opts font-label svelte-9iykj"></select>'),Kl=T('<div class="container svelte-9iykj"><!> <div class="inputBar svelte-9iykj"><input class="input svelte-9iykj" type="text" placeholder="Search" autocomplete="off"> <div class="magnify svelte-9iykj"><!></div></div> <div class="backWrap svelte-9iykj"><div role="button" tabindex="0" class="back svelte-9iykj"><!></div></div></div>');function vs(p,a){le(a,!0);let t=U(a,"items",27,()=>n([])),o=U(a,"resItems",15),r=U(a,"options",19,()=>[]),h=U(a,"useServerSideIdx",11,""),m=U(a,"isSearchFiltered",15,!1),u=U(a,"search",15,""),E=S(""),I;Le(()=>{r().length>0&&(s(E,n(r()[0].label)),v())});function v(){for(let R of r())if(R.label===e(E)){I=R.callback;break}I||console.error("Could not find a valid callback function in search options for label "+e(E))}function y(){u("")}function f(){if(u().length<2){o(t()),m(!1);return}o([...t().filter(R=>r().length>0?I(R,u()):R.toLowerCase().includes(u())||R===u())]),m(!0)}async function A(){if(u().length<Ms){o(t()),m(!1);return}m(!0);const R=e(E).replaceAll("-","").replaceAll(" ","").toLowerCase();let N=await Al(h(),R,u());N.ok?o(await N.json()):console.error(N)}Te(()=>{e(E)&&v()}),Te(()=>{u()?h()?A():f():(o(t()),m(!1))});var k=Kl(),g=d(k);{var w=R=>{Ze(R,{text:"Search by",yOffset:-30,children:(N,B)=>{var D=Bl();qe(D,21,r,ut,(F,M)=>{var P=Gl(),W={},Q=d(P,!0);c(P),q(()=>{W!==(W=e(M).label)&&(P.value=(P.__value=e(M).label)==null?"":e(M).label),Y(Q,e(M).label)}),l(F,P)}),c(D),ga(D,()=>e(E),F=>s(E,F)),l(N,D)},$$slots:{default:!0}})};O(g,R=>{r().length>1&&R(w)})}var $=i(g,2),_=d($);nt(_),q(()=>ce(_,"name",zt()));var x=i(_,2),b=d(x);Ul(b,{width:20}),c(x),c($);var C=i($,2),L=d(C);L.__click=y;var j=d(L);ql(j,{}),c(L),c(C),c(k),dt(_,u),Oe("keypress",L,y),l(p,k),ie()}ot(["click"]);var Fl=(p,a)=>s(a,!e(a)),Vl=T('<div class="search svelte-spg3op"><!></div>'),Jl=(p,a,t)=>a(e(t)),Yl=T('<div role="button" tabindex="0" class="item svelte-spg3op"> </div>'),Xl=T('<div class="itemsContainer svelte-spg3op"><!> <div class="items noselect font-label svelte-spg3op"></div></div>'),Hl=T('<div class="wrapper svelte-spg3op"><div role="button" tabindex="0" class="icon svelte-spg3op"><!></div> <!></div>');function Zl(p,a){le(a,!0);let t=U(a,"items",31,()=>n([])),o=U(a,"onSelect",3,g=>{}),r=U(a,"mindWidth",3,130),h=U(a,"maxHeight",19,()=>t().length>4?175:120),m=U(a,"searchThreshold",11,5),u=S(n([])),E=S(!1);Te(()=>{t().length<=m()&&s(u,n(t()))});function I(g){s(E,!1),s(u,n(t())),o()(g)}var v=Hl(),y=d(v);y.__click=[Fl,E];var f=d(y);Pl(f,{}),c(y);var A=i(y,2);{var k=g=>{var w=Xl(),$=d(w);{var _=b=>{var C=Vl(),L=d(C);vs(L,{get items(){return t()},set items(j){t(j)},get resItems(){return e(u)},set resItems(j){s(u,n(j))}}),c(C),q(()=>oe(C,"max-width",`${r()}px`)),l(b,C)};O($,b=>{t().length>m()&&b(_)})}var x=i($,2);qe(x,21,()=>e(u),ut,(b,C)=>{var L=Yl();L.__click=[Jl,I,C];var j=d(L,!0);c(L),q(()=>Y(j,e(C))),Oe("keypress",L,()=>I(e(C))),l(b,L)}),c(x),c(w),q(()=>{ce(w,"style",`min-width: ${r()??""}px; max-height: ${h()??""}px`),ce(x,"style",`width: ${r()??""}; max-height: ${(t().length>m()?h()-29:h())??""}px`)}),ue(7,w,()=>be,()=>({duration:200})),l(g,w)};O(A,g=>{e(E)&&g(k)})}c(v),Oe("keypress",y,()=>s(E,!e(E))),l(p,v),ie()}ot(["click"]);var Ql=(p,a,t)=>a()(t.label),ei=T('<div class="label font-label svelte-jphwq"> <div role="button" tabindex="0" class="icon svelte-jphwq"><!></div></div>');function ti(p,a){le(a,!0);let t=U(a,"onDelete",3,()=>{});var o=ei(),r=d(o),h=i(r);h.__click=[Ql,t,a];var m=d(h);ea(m,{color:"--var(--col-bg)",width:14}),c(h),c(o),q(()=>Y(r,`${a.label??""} `)),Oe("keypress",h,()=>t()(a.label)),l(p,o),ie()}ot(["click"]);var ai=T('<div class="container svelte-1iraqg1"><!> <!></div>');function Mt(p,a){le(a,!0);let t=U(a,"items",15),o=U(a,"options",19,()=>[]),r=U(a,"searchThreshold",15,4),h=S(n([]));Le(()=>{E()});async function m(k){t()||t([]),t().push(k),t([...t()]),await E()}async function u(k){t([...t().filter(g=>g!==k)]),await E()}async function E(){await Vt(),t()||t([]),s(h,n([...o().filter(k=>!t().includes(k))]))}var I=ai(),v=d(I);{var y=k=>{var g=me(),w=ee(g);qe(w,17,t,ut,($,_,x)=>{ti($,{onDelete:u,get label(){return t()[x]},set label(b){t(t()[x]=b,!0)}})}),l(k,g)};O(v,k=>{var g;((g=t())==null?void 0:g.length)>0&&k(y)})}var f=i(v,2);{var A=k=>{Zl(k,{onSelect:m,get items(){return e(h)},set items(g){s(h,n(g))},get searchThreshold(){return r()},set searchThreshold(g){r(g)}})};O(f,k=>{e(h)&&e(h).length>0&&k(A)})}c(I),l(p,I),ie()}var si=T('<option class="opt svelte-1vaxdkm"> </option>'),ri=T('<select class="svelte-1vaxdkm"></select>');function Et(p,a){let t=U(a,"value",15),o=U(a,"options",19,()=>[]),r=U(a,"width",3,"inherit");var h=ri();qe(h,21,o,ut,(m,u)=>{var E=si(),I={},v=d(E,!0);c(E),q(()=>{I!==(I=e(u))&&(E.value=(E.__value=e(u))==null?"":e(u)),Y(v,e(u))}),l(m,E)}),c(h),q(()=>oe(h,"width",r())),ga(h,t),l(p,h)}var li=T('<div class="success svelte-tl4x7h">Success</div>'),ii=T('<div class="err svelte-tl4x7h"> </div>'),ni=T('<div class="container svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">USER ID</div> <div class="value font-mono svelte-tl4x7h"> </div></div> <div class="row svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">ENABLED</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">E-MAIL VERIFIED</div> <div class="value svelte-tl4x7h"><!></div></div></div> <!> <!> <!> <div class="unit language svelte-tl4x7h"><div class="label svelte-tl4x7h">LANGUAGE</div> <div style="margin-top: .085rem"><!></div></div> <!> <!> <!> <!> <!> <!> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">ROLES</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">GROUPS</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LIMIT LIFETIME</div> <div class="value svelte-tl4x7h"><!></div></div> <!> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">CREATED</div> <div class="value svelte-tl4x7h"> </div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LAST LOGIN</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">PASSWORD EXPIRES</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">MFA ACTIVE</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><!> <!> <!></div></div>');function oi(p,a){le(a,!0);let t=U(a,"user",31,()=>n({}));t().roles===void 0&&t(t().roles=[],!0),t().groups===void 0&&t(t().groups=[],!0);let o=S(""),r=S(!1),h=S(void 0),m=S(n(t().language.toUpperCase())),u=S(!!t().user_expires),E=S(n(Ss(()=>e(u))?pt(t().user_expires,!0):void 0)),I=S(n([]));ba.subscribe(H=>{s(I,n(H))});let v=S(n([]));$a.subscribe(H=>{s(v,n(H))}),Te(()=>{e(r)&&s(h,n(setTimeout(()=>{s(r,!1),a.onSave()},3e3)))});let y=S(n({}));const f=He().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(ca,"Invalid characters"),family_name:he().nullable().trim().matches(Ps,"Invalid characters")});let A=S(n({}));const k=He().shape({birthdate:he().nullable().trim().matches(zs,"Invalid characters"),phone:he().nullable().trim().matches(Us,"Format: +..."),street:he().nullable().trim().matches(Ws,"Invalid characters"),zip:yt().nullable().min(1e3).max(999999),city:he().nullable().trim().matches(Ua,"Invalid characters"),country:he().nullable().trim().matches(Ua,"Invalid characters")});Le(()=>()=>clearTimeout(e(h)));function g(H){H.code==="Enter"&&w()}async function w(){if(!await $())return;s(o,""),console.log(t().user_values);const H={email:t().email,given_name:t().given_name,family_name:t().family_name||null,language:e(m).toLowerCase(),roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified,user_expires:null,user_values:t().user_values};if(H.user_values.phone&&(H.user_values.phone=H.user_values.phone.replaceAll(" ","")),H.user_values.zip&&(H.user_values.zip=Number.parseInt(H.user_values.zip)),e(u)){let Ne=Pt(e(E));if(!Ne){s(o,"Invalid Date Input: User Expires");return}H.user_expires=Ne}let Ee=await ls(t().id,H);if(Ee.ok)s(r,!0);else{let Ne=await Ee.json();s(o,n(Ne.message))}}async function $(){let H=!0;try{await f.validate(t(),{abortEarly:!1}),s(y,n({}))}catch(Ee){s(y,n(Xe(Ee))),H=!1}try{await k.validate(t().user_values,{abortEarly:!1}),s(A,n({}))}catch(Ee){s(A,n(Xe(Ee))),H=!1}return H}var _=ni(),x=d(_),b=i(d(x),2),C=d(b,!0);c(b),c(x);var L=i(x,2);oe(L,"margin-top","-5px");var j=d(L);oe(j,"width","107px");var R=i(d(j),2),N=d(R);Ve(N,{get selected(){return t().enabled},set selected(H){t(t().enabled=H,!0)}}),c(R),c(j);var B=i(j,2);oe(B,"width","135px");var D=i(d(B),2),F=d(D);Ve(F,{get selected(){return t().email_verified},set selected(H){t(t().email_verified=H,!0)}}),c(D),c(B),c(L);var M=i(L,2);ne(M,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return t().email},set value(H){t(t().email=H,!0)},get error(){return e(y).email},set error(H){e(y).email=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("E-MAIL");l(H,Ne)},$$slots:{default:!0}});var P=i(M,2);ne(P,{autocomplete:"off",placeholder:"Given Name",get value(){return t().given_name},set value(H){t(t().given_name=H,!0)},get error(){return e(y).given_name},set error(H){e(y).given_name=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("GIVEN NAME");l(H,Ne)},$$slots:{default:!0}});var W=i(P,2);ne(W,{autocomplete:"off",placeholder:"Family Name",get value(){return t().family_name},set value(H){t(t().family_name=H,!0)},get error(){return e(y).family_name},set error(H){e(y).family_name=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("FAMILY NAME");l(H,Ne)},$$slots:{default:!0}});var Q=i(W,2),z=i(d(Q),2),K=d(z);Et(K,{options:Wa,get value(){return e(m)},set value(H){s(m,n(H))}}),c(z),c(Q);var J=i(Q,2);ne(J,{autocomplete:"off",placeholder:"Street",get value(){return t().user_values.street},set value(H){t(t().user_values.street=H,!0)},get error(){return e(A).street},set error(H){e(A).street=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("STREET");l(H,Ne)},$$slots:{default:!0}});var Z=i(J,2);ne(Z,{type:"number",autocomplete:"off",placeholder:"ZIP",min:1e3,max:999999,get value(){return t().user_values.zip},set value(H){t(t().user_values.zip=H,!0)},get error(){return e(A).zip},set error(H){e(A).zip=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("ZIP");l(H,Ne)},$$slots:{default:!0}});var re=i(Z,2);ne(re,{autocomplete:"off",placeholder:"City",get value(){return t().user_values.city},set value(H){t(t().user_values.city=H,!0)},get error(){return e(A).city},set error(H){e(A).city=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("CITY");l(H,Ne)},$$slots:{default:!0}});var ve=i(re,2);ne(ve,{autocomplete:"off",placeholder:"Country",get value(){return t().user_values.country},set value(H){t(t().user_values.country=H,!0)},get error(){return e(A).country},set error(H){e(A).country=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("COUNTRY");l(H,Ne)},$$slots:{default:!0}});var $e=i(ve,2);ne($e,{autocomplete:"off",placeholder:"Phone",get value(){return t().user_values.phone},set value(H){t(t().user_values.phone=H,!0)},get error(){return e(A).phone},set error(H){e(A).phone=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("PHONE");l(H,Ne)},$$slots:{default:!0}});var _e=i($e,2);ne(_e,{type:"date",autocomplete:"off",placeholder:"Birthdate",get value(){return t().user_values.birthdate},set value(H){t(t().user_values.birthdate=H,!0)},get error(){return e(A).birthdate},set error(H){e(A).birthdate=H},$$events:{keypress:g,input:$},children:(H,Ee)=>{G();var Ne=V("BIRTHDATE");l(H,Ne)},$$slots:{default:!0}});var pe=i(_e,2);oe(pe,"margin-top","-3px");var je=i(d(pe),2);Mt(je,{get options(){return e(I)},searchThreshold:4,get items(){return t().roles},set items(H){t(t().roles=H,!0)}}),c(pe);var ge=i(pe,2),de=i(d(ge),2);Mt(de,{get options(){return e(v)},searchThreshold:4,get items(){return t().groups},set items(H){t(t().groups=H,!0)}}),c(ge);var we=i(ge,2);oe(we,"margin-top","12px");var ye=i(d(we),2),Me=d(ye);Ve(Me,{get selected(){return e(u)},set selected(H){s(u,n(H))}}),c(ye),c(we);var Ce=i(we,2);{var xe=H=>{var Ee=Be(()=>qa(new Date));ne(H,{type:"datetime-local",step:"60",width:"16rem",get min(){return e(Ee)},max:"2099-01-01T00:00",get value(){return e(E)},set value(Ne){s(E,n(Ne))},$$events:{input:$},children:(Ne,At)=>{G();var ae=V("USER EXPIRES");l(Ne,ae)},$$slots:{default:!0}})};O(Ce,H=>{e(u)&&H(xe)})}var Re=i(Ce,2);oe(Re,"margin-top","12px");var X=i(d(Re),2),Ie=d(X,!0);q(()=>Y(Ie,pt(t().created_at))),c(X),c(Re);var fe=i(Re,2),Ue=i(d(fe),2),Je=d(Ue);{var rt=H=>{var Ee=V();q(()=>Y(Ee,pt(t().last_login))),l(H,Ee)},ct=H=>{var Ee=V("Never");l(H,Ee)};O(Je,H=>{t().last_login?H(rt):H(ct,!1)})}c(Ue),c(fe);var We=i(fe,2),Ke=i(d(We),2),it=d(Ke);{var It=H=>{var Ee=V();q(()=>Y(Ee,pt(t().password_expires))),l(H,Ee)},$t=H=>{var Ee=V("Never");l(H,Ee)};O(it,H=>{t().password_expires?H(It):H($t,!1)})}c(Ke),c(We);var Qe=i(We,2),et=i(d(Qe),2),gt=d(et),ht=Be(()=>!!t().webauthn_user_id);ta(gt,{get check(){return e(ht)}}),c(et),c(Qe);var Ct=i(Qe,2),at=d(Ct);Se(at,{level:1,width:"4rem",$$events:{click:w},children:(H,Ee)=>{G();var Ne=V("SAVE");l(H,Ne)},$$slots:{default:!0}});var st=i(at,2);{var se=H=>{var Ee=li();l(H,Ee)};O(st,H=>{e(r)&&H(se)})}var Ae=i(st,2);{var Pe=H=>{var Ee=ii(),Ne=d(Ee,!0);c(Ee),q(()=>Y(Ne,e(o))),l(H,Ee)};O(Ae,H=>{e(o)&&H(Pe)})}c(Ct),c(_),q(()=>Y(C,t().id)),l(p,_),ie()}var vi=(p,a,t)=>a(e(t)),ci=T('<button class="btn font-label svelte-n2aryx"> </button>'),di=T('<div class="bar noselect svelte-n2aryx"></div>');function Dt(p,a){let t=U(a,"labels",19,()=>[]),o=U(a,"selected",15);var r=di();qe(r,21,t,ut,(h,m)=>{var u=ci();u.__click=[vi,o,m];var E=d(u,!0);c(u),q(()=>{ce(u,"data-selected",o()===e(m)),Y(E,e(m))}),Oe("keypress",u,()=>o(e(m))),l(h,u)}),c(r),l(p,r)}ot(["click"]);var ui=T('<div class="desc svelte-8ppjyk"><p><b>The user has not initialized this account yet.</b></p> <p>You may send out a new Reset E-Mail, if the user has not received one.</p></div> <!>',1),hi=T(`<div class="desc svelte-8ppjyk"><p><b>This is a passkey only account type.</b></p> <p>This means, that this user is using the passwordless login flow only and does not have any password.</p> <p>If the user has lost all his keys and you have verified everything, you may reset his account type and
                send out a new reset E-Mail, so the user can get access again.</p> <p>To reset the account, navigate to 'MFA' and delete all registered keys for this user.</p></div>`),pi=T(`<!> <!> <!> <!> <div class="desc svelte-8ppjyk">You can either set and reset a user's password<br> or send out a new reset E-Mail for self-service.</div> <!> <!>`,1),mi=T('<div class="success svelte-8ppjyk">Success</div>'),fi=T('<div class="err svelte-8ppjyk"> </div>'),gi=T('<div class="err svelte-8ppjyk"> </div>'),wi=T('<div class="container svelte-8ppjyk"><!> <!> <!> <!></div>');function yi(p,a){le(a,!0);let t=U(a,"user",27,()=>n({}));const o="inherit";let r=S(!1),h=S(""),m=S(""),u=S(!1),E=S(!1),I=S(void 0),v="330px",y=S(void 0),f=S(!1),A=n({new:"",verify:""});Te(()=>{e(E)&&s(I,n(setTimeout(()=>{s(E,!1),a.onSave()},3e3)))}),Le(async()=>{if(!e(y)){let M=await za(),P=await M.json();M.ok?s(y,n(P)):s(m,n(P.message))}});async function k(){return s(m,""),await g()?e(f)?!0:(s(m,"You must follow the password policy"),!1):!1}async function g(){return s(m,""),A.new.length>256?(s(m,"max 256 characters"),!1):A.new!==A.verify?(s(m,"New passwords do not match"),!1):!0}async function w(){let M={email:t().email};s(h,""),s(r,!0);let P=await Xr(M);if(P.ok)s(u,!0);else{let W=await P.json();s(h,n(W.message))}s(r,!1)}async function $(){let M={email:t().email,given_name:t().given_name,family_name:t().family_name,roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified};if(A.new.length>0){if(!(await g()&&await k()))return;M.password=A.new}s(m,""),s(r,!0);let P=await ls(t().id,M);if(P.ok)s(E,!0);else{let W=await P.json();s(m,n(W.message))}s(r,!1)}function _(){const M=e(y).length_min>24?e(y).length_min:24;let P=qs(M,e(y).include_lower_case,e(y).include_upper_case,e(y).include_digits,e(y).include_special);A.new=P,A.verify=P}var x=wi(),b=d(x);{var C=M=>{var P=ui(),W=i(ee(P),2);Se(W,{width:o,level:2,get isLoading(){return e(r)},set isLoading(Q){s(r,n(Q))},$$events:{click:w},children:(Q,z)=>{G();var K=V("SEND RESET E-MAIL");l(Q,K)},$$slots:{default:!0}}),l(M,P)},L=M=>{var P=me(),W=ee(P);{var Q=K=>{var J=hi();l(K,J)},z=K=>{var J=pi(),Z=ee(J);{var re=de=>{or(de,{get password(){return A.new},get policy(){return e(y)},get accepted(){return e(f)},set accepted(we){s(f,n(we))}})};O(Z,de=>{e(y)&&de(re)})}var ve=i(Z,2),$e=Be(()=>A.new.length>0&&A.new===A.verify);Gt(ve,{type:"password",get width(){return v},autocomplete:"off",get showCopy(){return e($e)},get value(){return A.new},set value(de){A.new=de},$$events:{blur:g},children:(de,we)=>{G();var ye=V("New Password");l(de,ye)},$$slots:{default:!0}});var _e=i(ve,2);Gt(_e,{type:"password",get width(){return v},autocomplete:"off",get value(){return A.verify},set value(de){A.verify=de},$$events:{blur:g},children:(de,we)=>{G();var ye=V("New Password");l(de,ye)},$$slots:{default:!0}});var pe=i(_e,2);Se(pe,{width:o,level:3,$$events:{click:_},children:(de,we)=>{G();var ye=V("GENERATE RANDOM");l(de,ye)},$$slots:{default:!0}});var je=i(pe,4);Se(je,{width:o,level:1,get isLoading(){return e(r)},set isLoading(de){s(r,n(de))},$$events:{click:w},children:(de,we)=>{G();var ye=V("SEND RESET E-MAIL");l(de,ye)},$$slots:{default:!0}});var ge=i(je,2);Se(ge,{width:o,get isLoading(){return e(r)},set isLoading(de){s(r,n(de))},$$events:{click:$},children:(de,we)=>{G();var ye=V("SAVE PASSWORD");l(de,ye)},$$slots:{default:!0}}),l(K,J)};O(W,K=>{t().account_type==="passkey"?K(Q):K(z,!1)},!0)}l(M,P)};O(b,M=>{t().account_type==="new"?M(C):M(L,!1)})}var j=i(b,2);{var R=M=>{var P=mi();l(M,P)};O(j,M=>{(e(E)||e(u))&&M(R)})}var N=i(j,2);{var B=M=>{var P=fi(),W=d(P,!0);c(P),q(()=>Y(W,e(m))),l(M,P)};O(N,M=>{e(m)&&M(B)})}var D=i(N,2);{var F=M=>{var P=gi(),W=d(P,!0);c(P),q(()=>Y(W,e(h))),l(M,P)};O(D,M=>{e(h)&&M(F)})}c(x),l(p,x),ie()}var bi=T('<div class="err svelte-1jljqe9"> </div>'),$i=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this user?</div> <!> <!></div>');function _i(p,a){le(a,!0);let t=U(a,"user",27,()=>n({})),o=S(!1),r=S("");async function h(){s(r,""),s(o,!0);let v=await cl(t().id);if(v.ok)a.onSave();else{let y=await v.json();s(r,n(y.message))}s(o,!1)}var m=$i(),u=i(d(m),2);Se(u,{level:1,width:"5rem",get isLoading(){return e(o)},set isLoading(v){s(o,n(v))},$$events:{click:h},children:(v,y)=>{G();var f=V("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var I=v=>{var y=bi(),f=d(y,!0);c(y),q(()=>Y(f,e(r))),l(v,y)};O(E,v=>{e(r)&&v(I)})}c(m),l(p,m),ie()}var ki=T('<div class="err svelte-1ofwsjt"> </div>'),xi=T('<div class="success svelte-1ofwsjt">Success</div>'),Ei=T('<div class="container svelte-1ofwsjt"><div class="label svelte-1ofwsjt">Invalidate all existing sessions and refresh tokens for this user?</div> <!> <!></div>');function Ii(p,a){le(a,!0);let t=U(a,"user",27,()=>n({})),o=S(!1),r=S(""),h=S(!1);async function m(){s(r,""),s(o,!0);let f=await nl(t().id);if(f.ok)s(h,!0);else{let A=await f.json();s(r,n(A.message))}s(o,!1)}var u=Ei(),E=i(d(u),2);Se(E,{level:1,get isLoading(){return e(o)},set isLoading(f){s(o,n(f))},$$events:{click:m},children:(f,A)=>{G();var k=V("LOGOUT");l(f,k)},$$slots:{default:!0}});var I=i(E,2);{var v=f=>{var A=ki(),k=d(A,!0);c(A),q(()=>Y(k,e(r))),l(f,A)},y=f=>{var A=me(),k=ee(A);{var g=w=>{var $=xi();l(w,$)};O(k,w=>{e(h)&&w(g)},!0)}l(f,A)};O(I,f=>{e(r)?f(v):f(y,!1)})}c(u),l(p,u),ie()}var Si=T('<div class="success svelte-iv4fzr">Success</div>'),Ti=T('<div class="err svelte-iv4fzr"> </div>'),Ci=T('<div class="container svelte-iv4fzr"><div class="desc svelte-iv4fzr">Set custom user attributes.<br> All Key / Value pairs will be handled as String / String.</div> <!> <!> <!> <!></div>');function Ai(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(!1),h=S(!1);Le(()=>{E()});async function m(){let $=await ya();if(!$.ok)s(t,"Error fetching attr: "+$.body.message);else return await $.json()}async function u(){let $=await pl(a.user.id);if(!$.ok)s(t,"Error fetching user attr: "+$.body.message);else return await $.json()}async function E(){let $=await m(),_=$.values;if($){let x=await u();if(x){let b=new Map;for(let C of x.values)b.set(C.key,C.value||"");for(let C of _){let L=b.get(C.name);L?C.value=L:C.value=""}s(o,n([..._]))}}}async function I(){s(t,""),s(h,!0);let $=[];for(let C of e(o)){let L={key:C.name,value:C.value};$.push(L)}let _={values:$},x=await ml(a.user.id,_),b=await x.json();x.ok?s(r,!0):s(t,n(b.message)),a.onSave(),s(h,!1)}var v=Ci(),y=i(d(v),2);qe(y,17,()=>e(o),ut,($,_,x)=>{var b=Be(()=>e(_).desc||"JSON Value");ne($,{style:"width: 350px",autocomplete:"off",get placeholder(){return e(b)},get value(){return e(_).value},set value(C){e(_).value=C},children:(C,L)=>{G();var j=V();q(()=>Y(j,e(_).name)),l(C,j)},$$slots:{default:!0}})});var f=i(y,2);Se(f,{get isLoading(){return e(h)},level:1,width:"4rem",$$events:{click:I},children:($,_)=>{G();var x=V("SAVE");l($,x)},$$slots:{default:!0}});var A=i(f,2);{var k=$=>{var _=Si();l($,_)};O(A,$=>{e(r)&&$(k)})}var g=i(A,2);{var w=$=>{var _=Ti(),x=d(_,!0);c(_),q(()=>Y(x,e(t))),l($,_)};O(g,$=>{e(t)&&$(w)})}c(v),l(p,v),ie()}var Li=T('<div class="desc svelte-1a9qw6n">This user does not have any active MFA keys.</div>'),Ni=T('<div class="keyContainer svelte-1a9qw6n"><div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Passkey Name:</div> <b> </b></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Key Registered:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Last Usage:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n"></div> <div class="deleteBtn svelte-1a9qw6n"><!></div></div></div>'),Ri=T('<div class="desc svelte-1a9qw6n">You can delete the users MFA / Security Keys.<br> Be careful though, since this <b>cannot be reverted</b> without user interaction.<br> This is useful, if a user lost his keys and he is not able to log in any more.</div> <div class="keysContainer svelte-1a9qw6n"></div>',1),Di=T('<div class="err svelte-1a9qw6n"> </div>'),ji=T('<div class="container svelte-1a9qw6n"><!> <!></div>');function Oi(p,a){le(a,!0);let t=U(a,"user",27,()=>n({})),o=S(""),r=S(n([]));Le(async()=>{await h()});async function h(){let A=await Ls(t().id),k=await A.json();A.ok?s(r,n(k)):console.error("error fetching passkeys: "+k.message)}async function m(A){let k=e(r).length===1,g=await Ns(t().id,A);if(g.status===200)return await h(),k&&a.onSave(),!0;{let w=await g.json();return s(o,n(w.message)),!1}}var u=ji(),E=d(u);{var I=A=>{var k=Li();l(A,k)},v=A=>{var k=Ri(),g=i(ee(k),2);qe(g,21,()=>e(r),w=>w.name,(w,$)=>{var _=Ni(),x=d(_),b=i(d(x),2),C=d(b,!0);c(b),c(x);var L=i(x,2),j=i(d(L),2),R=d(j,!0);q(()=>Y(R,pt(e($).registered))),c(j),c(L);var N=i(L,2),B=i(d(N),2),D=d(B,!0);q(()=>Y(D,pt(e($).last_used))),c(B),c(N);var F=i(N,2),M=i(d(F),2),P=d(M);Se(P,{level:4,$$events:{click:()=>m(e($).name)},children:(W,Q)=>{G();var z=V("DELETE");l(W,z)},$$slots:{default:!0}}),c(M),c(F),c(_),q(()=>Y(C,e($).name)),l(w,_)}),c(g),l(A,k)};O(E,A=>{e(r).length<1?A(I):A(v,!1)})}var y=i(E,2);{var f=A=>{var k=Di(),g=d(k,!0);c(k),q(()=>Y(g,e(o))),l(A,k)};O(y,A=>{e(o)&&A(f)})}c(u),l(p,u),ie()}var Mi=T('<div class="container svelte-nw2ucx"><!></div>');function Pi(p,a){le(a,!0);var t=Mi(),o=d(t);tr(o,{get userId(){return a.user.id}}),c(t),l(p,t),ie()}var zi=T('<div class="data font-mono svelte-115hohv"> </div>'),Ui=T('<div class="data svelte-115hohv"> </div>'),Wi=T('<div class="header svelte-115hohv"><!> <!></div>'),qi=T("<div><!></div>"),Gi=T("<div><!></div>"),Bi=T("<div><!></div>"),Ki=T("<div><!></div>"),Fi=T("<div><!></div>"),Vi=T("<div><!></div>"),Ji=T("<div><!></div>"),Yi=T("<!> <!>",1),Xi=T("<div><!></div>");function cs(p,a){le(a,!0);let t=U(a,"userEmail",3,""),o=U(a,"userId",3,""),r=U(a,"onSave",15),h=S(void 0),m=S(!0),u=S(void 0);const E=["Info","Attributes","Password","MFA","Devices","Logout","Delete"];let I=S(n(E[0]));const v=200,y=v/2;async function f(){const k=await Rs(o());if(k.ok)s(h,n(await k.json()));else{let g=await k.json();console.error(g)}s(m,!1)}function A(){s(u,!1),r()()}Te(()=>{e(u)&&f()}),vt(p,{get show(){return e(u)},set show(k){s(u,n(k))},header:k=>{var g=Wi(),w=d(g);Ze(w,{text:"User ID",children:(_,x)=>{var b=zi(),C=d(b,!0);c(b),q(()=>Y(C,o())),l(_,b)},$$slots:{default:!0}});var $=i(w,2);Ze($,{text:"E-Mail",children:(_,x)=>{var b=Ui(),C=d(b,!0);c(b),q(()=>Y(C,t())),l(_,b)},$$slots:{default:!0}}),c(g),l(k,g)},body:k=>{var g=Xi(),w=d(g);{var $=x=>{ha(x,{})},_=x=>{var b=Yi(),C=ee(b);Dt(C,{labels:E,get selected(){return e(I)},set selected(N){s(I,n(N))}});var L=i(C,2);{var j=N=>{var B=qi(),D=d(B);oi(D,{get user(){return e(h)},set user(F){s(h,n(F))},get onSave(){return r()},set onSave(F){r(F)}}),c(B),ue(5,B,()=>be,()=>({delay:y,duration:v})),ue(6,B,()=>be,()=>({duration:v})),l(N,B)},R=N=>{var B=me(),D=ee(B);{var F=P=>{var W=Gi(),Q=d(W);Ai(Q,{get user(){return e(h)},set user(z){s(h,n(z))},get onSave(){return r()},set onSave(z){r(z)}}),c(W),ue(5,W,()=>be,()=>({delay:y,duration:v})),ue(6,W,()=>be,()=>({duration:v})),l(P,W)},M=P=>{var W=me(),Q=ee(W);{var z=J=>{var Z=Bi(),re=d(Z);yi(re,{get user(){return e(h)},set user(ve){s(h,n(ve))},get onSave(){return r()},set onSave(ve){r(ve)}}),c(Z),ue(5,Z,()=>be,()=>({delay:y,duration:v})),ue(6,Z,()=>be,()=>({duration:v})),l(J,Z)},K=J=>{var Z=me(),re=ee(Z);{var ve=_e=>{var pe=Ki(),je=d(pe);Oi(je,{get user(){return e(h)},set user(ge){s(h,n(ge))},get onSave(){return r()},set onSave(ge){r(ge)}}),c(pe),ue(5,pe,()=>be,()=>({delay:y,duration:v})),ue(6,pe,()=>be,()=>({duration:v})),l(_e,pe)},$e=_e=>{var pe=me(),je=ee(pe);{var ge=we=>{var ye=Fi(),Me=d(ye);Pi(Me,{get user(){return e(h)},set user(Ce){s(h,n(Ce))}}),c(ye),ue(5,ye,()=>be,()=>({delay:y,duration:v})),ue(6,ye,()=>be,()=>({duration:v})),l(we,ye)},de=we=>{var ye=me(),Me=ee(ye);{var Ce=Re=>{var X=Vi(),Ie=d(X);Ii(Ie,{get user(){return e(h)},set user(fe){s(h,n(fe))}}),c(X),ue(5,X,()=>be,()=>({delay:y,duration:v})),ue(6,X,()=>be,()=>({duration:v})),l(Re,X)},xe=Re=>{var X=me(),Ie=ee(X);{var fe=Ue=>{var Je=Ji(),rt=d(Je);_i(rt,{onSave:A,get user(){return e(h)},set user(ct){s(h,n(ct))}}),c(Je),ue(5,Je,()=>be,()=>({delay:y,duration:v})),ue(6,Je,()=>be,()=>({duration:v})),l(Ue,Je)};O(Ie,Ue=>{e(I)==="Delete"&&Ue(fe)},!0)}l(Re,X)};O(Me,Re=>{e(I)==="Logout"?Re(Ce):Re(xe,!1)},!0)}l(we,ye)};O(je,we=>{e(I)==="Devices"?we(ge):we(de,!1)},!0)}l(_e,pe)};O(re,_e=>{e(I)==="MFA"?_e(ve):_e($e,!1)},!0)}l(J,Z)};O(Q,J=>{e(I)==="Password"?J(z):J(K,!1)},!0)}l(P,W)};O(D,P=>{e(I)==="Attributes"?P(F):P(M,!1)},!0)}l(N,B)};O(L,N=>{e(I)==="Info"?N(j):N(R,!1)})}l(x,b)};O(w,x=>{e(m)?x($):x(_,!1)})}c(g),l(k,g)},$$slots:{header:!0,body:!0}}),ie()}var Hi=T('<div class="header font-label svelte-1y7ceqm">ADD NEW USER</div>'),Zi=T('<div class="err svelte-1y7ceqm"> </div>'),Qi=T('<div class="container svelte-1y7ceqm"><!> <!> <!> <div class="language svelte-1y7ceqm"><div class="label svelte-1y7ceqm">LANGUAGE</div> <div style="margin-top: .4rem"><!></div></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">ROLES</div> <!></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">GROUPS</div> <!></div> <div class="unit svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">LIMIT LIFETIME</div> <div class="value"><!></div></div> <!> <div class="btn svelte-1y7ceqm"><!> <!></div></div>');function en(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1),o=S(""),r=S(void 0),h=S("EN"),m=S(!1),u=S(void 0),E=S(n({email:"",family_name:"",given_name:"",roles:[],groups:[]})),I=S(n({}));const v=He().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(ca,"Invalid characters"),family_name:he().trim().required("Family Name is required").matches(ca,"Invalid characters")});let y=S(void 0);ba.subscribe(g=>{s(y,n(g))});let f=S(void 0);$a.subscribe(g=>{s(f,n(g))});async function A(){if(!await k())return;s(o,"");let g=e(E);if(g.language=e(h).toLowerCase(),e(m)){let $=Pt(e(u));if(!$){s(o,"Invalid Date Input: User Expires");return}g.user_expires=$}let w=await vl(e(E));if(w.ok)s(E,n({})),s(r,!1),s(E,n({email:"",family_name:"",given_name:"",roles:[],groups:[]})),a.onSave();else{let $=await w.json();s(o,n($.message))}}async function k(){try{return await v.validate(e(E),{abortEarly:!1}),s(I,n({})),!0}catch(g){return s(I,n(Xe(g))),!1}}vt(p,{get idx(){return t()},set idx(g){t(g)},get show(){return e(r)},set show(g){s(r,n(g))},header:g=>{var w=Hi();l(g,w)},body:g=>{var w=Qi(),$=d(w);ne($,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return e(E).email},set value(Z){e(E).email=Z},get error(){return e(I).email},set error(Z){e(I).email=Z},$$events:{input:k},children:(Z,re)=>{G();var ve=V("E-MAIL");l(Z,ve)},$$slots:{default:!0}});var _=i($,2);ne(_,{autocomplete:"off",placeholder:"Given Name",get value(){return e(E).given_name},set value(Z){e(E).given_name=Z},get error(){return e(I).given_name},set error(Z){e(I).given_name=Z},$$events:{input:k},children:(Z,re)=>{G();var ve=V("GIVEN NAME");l(Z,ve)},$$slots:{default:!0}});var x=i(_,2);ne(x,{autocomplete:"off",placeholder:"Family Name",get value(){return e(E).family_name},set value(Z){e(E).family_name=Z},get error(){return e(I).family_name},set error(Z){e(I).family_name=Z},$$events:{input:k},children:(Z,re)=>{G();var ve=V("FAMILY NAME");l(Z,ve)},$$slots:{default:!0}});var b=i(x,2),C=i(d(b),2),L=d(C);Et(L,{options:Wa,get value(){return e(h)},set value(Z){s(h,n(Z))}}),c(C),c(b);var j=i(b,2),R=i(d(j),2);Mt(R,{get options(){return e(y)},searchThreshold:4,get items(){return e(E).roles},set items(Z){e(E).roles=Z}}),c(j);var N=i(j,2),B=i(d(N),2);Mt(B,{get options(){return e(f)},searchThreshold:4,get items(){return e(E).groups},set items(Z){e(E).groups=Z}}),c(N);var D=i(N,2);oe(D,"margin-top","12px");var F=i(d(D),2),M=d(F);Ve(M,{get selected(){return e(m)},set selected(Z){s(m,n(Z))}}),c(F),c(D);var P=i(D,2);{var W=Z=>{ne(Z,{type:"datetime-local",step:"60",width:"18rem",get min(){return new Date().toISOString().split(".")[0]},max:"2099-01-01T00:00",get value(){return e(u)},set value(re){s(u,n(re))},$$events:{input:k},children:(re,ve)=>{G();var $e=V("USER EXPIRES");l(re,$e)},$$slots:{default:!0}})};O(P,Z=>{e(m)&&Z(W)})}var Q=i(P,2),z=d(Q);Se(z,{level:1,$$events:{click:A},children:(Z,re)=>{G();var ve=V("SAVE");l(Z,ve)},$$slots:{default:!0}});var K=i(z,2);{var J=Z=>{var re=Zi(),ve=d(re,!0);c(re),q(()=>Y(ve,e(o))),l(Z,re)};O(K,Z=>{e(o)&&Z(J)})}c(Q),c(w),l(g,w)},$$slots:{header:!0,body:!0}}),ie()}var tn=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"></path></svg>');function an(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=tn();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var sn=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"></path></svg>');function rn(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=sn();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var ln=T("<option> </option>"),nn=T('<select class="opts font-label svelte-t7wy0q"></select>'),on=T('<div role="button" tabindex="0" class="icon svelte-t7wy0q"><!></div>'),vn=T('<div class="container svelte-t7wy0q"><!> <!></div>');function cn(p,a){le(a,!0);let t=U(a,"items",19,()=>[]),o=U(a,"resItems",15),r=U(a,"options",19,()=>[]),h=U(a,"firstDirReverse",3,!1),m=S(""),u=S(1),E;Le(()=>{r().length>0&&(s(m,n(r()[0].label)),I()),h()&&y(),v()});function I(){for(let $ of r())if($.label===e(m)){E=$.callback;break}E||console.error("Could not find a valid callback function in order options for label "+e(m))}function v(){if(E){let $=[...t()];$.sort((_,x)=>E(_,x)*e(u)),o([...$])}}function y(){s(u,e(u)*-1),v()}Te(()=>{t()&&v()}),Te(()=>{e(m)&&(I(),v())});var f=vn(),A=d(f);{var k=$=>{Ze($,{text:"Order by",yOffset:-30,children:(_,x)=>{var b=nn();qe(b,21,r,ut,(C,L)=>{var j=ln(),R={},N=d(j,!0);c(j),q(()=>{R!==(R=e(L).label)&&(j.value=(j.__value=e(L).label)==null?"":e(L).label),Y(N,e(L).label)}),l(C,j)}),c(b),ga(b,()=>e(m),C=>s(m,C)),l(_,b)},$$slots:{default:!0}})};O(A,$=>{r().length>1&&$(k)})}var g=i(A,2);{var w=$=>{var _=on();_.__click=y;var x=d(_);{var b=L=>{rn(L,{})},C=L=>{an(L,{})};O(x,L=>{e(u)===1?L(b):L(C,!1)})}c(_),Oe("keypress",_,y),l($,_)};O(g,$=>{r().length>0&&$(w)})}c(f),l(p,f),ie()}ot(["click"]);var dn=T('<div class="divider svelte-16rtgja"></div>'),un=T('<div class="container svelte-16rtgja"><div><!></div> <!> <div><!></div></div>');function Lt(p,a){le(a,!0);let t=U(a,"items",31,()=>n([])),o=U(a,"resItems",15),r=U(a,"searchOptions",27,()=>n([])),h=U(a,"orderOptions",27,()=>n([])),m=U(a,"firstDirReverse",3,!1),u=U(a,"useServerSideIdx",15,""),E=U(a,"isSearchFiltered",15,!1),I=U(a,"search",15,""),v=S(n([]));var y=un(),f=d(y),A=d(f);cn(A,{get items(){return e(v)},get options(){return h()},get firstDirReverse(){return m()},get resItems(){return o()},set resItems(_){o(_)}}),c(f);var k=i(f,2);{var g=_=>{var x=dn();l(_,x)};O(k,_=>{h().length>0&&_(g)})}var w=i(k,2),$=d(w);vs($,{get options(){return r()},get items(){return t()},set items(_){t(_)},get resItems(){return e(v)},set resItems(_){s(v,n(_))},get useServerSideIdx(){return u()},set useServerSideIdx(_){u(_)},get isSearchFiltered(){return E()},set isSearchFiltered(_){E(_)},get search(){return I()},set search(_){I(_)}}),c(w),c(y),l(p,y),ie()}var hn=(p,a)=>s(a,e(a)-1),pn=T('<div role="button" tabindex="0" class="icon iconLeft svelte-9iw34a"><!></div>'),mn=(p,a,t)=>s(a,n(e(t))),fn=T('<div role="button" tabindex="0" class="link noselect svelte-9iw34a"> </div>'),gn=(p,a)=>s(a,e(a)+1),wn=T('<div role="button" tabindex="0" class="icon iconRight svelte-9iw34a"><!></div>'),yn=T('<div class="container svelte-9iw34a"><!> <div class="links svelte-9iw34a"></div> <!> <div class="chunkSize noselect svelte-9iw34a">Entries <!></div> <div class="font-label total svelte-9iw34a"> </div></div>');function jt(p,a){le(a,!0);let t=U(a,"items",27,()=>n([])),o=U(a,"resItems",31,()=>n([]));const r=[5,7,10,15,20,30,50,100],h=16;let m=S(n([])),u=S(1),E=5,I=S(15),v=S(!1),y=S(!1),f=S(n([]));Te(()=>{e(I)&&s(u,1)}),Te(()=>{if(e(I)&&t().length>0){let j=[];for(let R=0;R<t().length;R+=e(I)){const N=t().slice(R,R+e(I));j.push(N)}s(m,n(j)),o(e(m)[e(u)-1])}}),Te(()=>{if(e(u)){let j=[],R=Math.floor(E/2);if(e(m).length<=E){for(let N=1;N<=e(m).length;N++)j.push(N);s(v,!1),s(y,!1)}else if(e(u)<=R){for(let N=1;N<=E;N++)j.push(N);s(v,!1),s(y,!0)}else if(e(u)>e(m).length-R-1){for(let N=e(m).length-E;N<=e(m).length-1;N++)j.push(N+1);s(v,!0),s(y,!1)}else{for(let N=e(u)-R;N<e(u)-R+E;N++)j.push(N);s(v,!0),s(y,!0)}s(f,n(j))}});var A=yn(),k=d(A);{var g=j=>{var R=pn();R.__click=[hn,u];var N=d(R);Ht(N,{width:h}),c(R),Oe("keypress",R,()=>s(u,e(u)-1)),l(j,R)};O(k,j=>{e(v)&&j(g)})}var w=i(k,2);qe(w,21,()=>e(f),ut,(j,R)=>{var N=fn();N.__click=[mn,u,R];var B=d(N,!0);c(N),q(()=>{St(N,"selected",e(u)===e(R)),Y(B,e(R))}),Oe("keypress",N,()=>s(u,n(e(R)))),l(j,N)}),c(w);var $=i(w,2);{var _=j=>{var R=wn();R.__click=[gn,u];var N=d(R);Ht(N,{width:h}),c(R),Oe("keypress",R,()=>s(u,e(u)+1)),l(j,R)};O($,j=>{e(y)&&j(_)})}var x=i($,2),b=i(d(x));Et(b,{options:r,width:"50px",get value(){return e(I)},set value(j){s(I,n(j))}}),c(x);var C=i(x,2),L=d(C);c(C),c(A),q(()=>Y(L,`Total: ${t().length??""}`)),l(p,A),ie()}ot(["click"]);var bn=(p,a)=>a()(0,!0),$n=T('<div role="button" tabindex="0" class="icon iconLeft svelte-1jvef4m"><!></div>'),_n=(p,a)=>a()(0,!1),kn=T('<div role="button" tabindex="0" class="icon iconRight svelte-1jvef4m"><!></div>'),xn=T('<div class="font-label total svelte-1jvef4m"> </div>'),En=T('<div class="container svelte-1jvef4m"><!> <div class="links svelte-1jvef4m"><div class="pageNo noselect svelte-1jvef4m"> </div></div> <!> <div class="chunkSize noselect svelte-1jvef4m">Entries <!></div> <!></div>');function ds(p,a){le(a,!0);let t=U(a,"itemsTotal",3,0),o=U(a,"sspPage",11,1),r=U(a,"sspPageSize",11,15),h=U(a,"sspContinuationToken",11,""),m=U(a,"fetchPageCallback",3,(j,R)=>{}),u=U(a,"sspPageSizeChange",3,j=>{});const E=[2,3,5,7,10,15,20,30,50,100],I=16;let v=S(n(r()));Te(()=>{e(v)&&(console.log("page size change in pagination server"),u()(e(v)))});var y=En(),f=d(y);{var A=j=>{var R=$n();R.__click=[bn,m];var N=d(R);Ht(N,{width:I}),c(R),Oe("keypress",R,()=>m()(0,!0)),l(j,R)};O(f,j=>{o()!==1&&j(A)})}var k=i(f,2),g=d(k),w=d(g,!0);c(g),c(k);var $=i(k,2);{var _=j=>{var R=kn();R.__click=[_n,m];var N=d(R);Ht(N,{width:I}),c(R),Oe("keypress",R,()=>m()(0,!1)),l(j,R)};O($,j=>{h()&&j(_)})}var x=i($,2),b=i(d(x));Et(b,{options:E,width:"50px",get value(){return e(v)},set value(j){s(v,n(j))}}),c(x);var C=i(x,2);{var L=j=>{var R=xn(),N=d(R);c(R),q(()=>Y(N,`Total: ${t()??""}`)),l(j,R)};O(C,j=>{t()&&t()>0&&j(L)})}c(y),q(()=>Y(w,o())),l(p,y),ie()}ot(["click"]);var In=T('<div class="svelte-1n3c0ep"><!></div>'),Sn=T('<div class="svelte-1n3c0ep"><!></div>'),Tn=T(' <div class="content"><!> <!> <div id="users" class="svelte-1n3c0ep"><!></div> <!></div>',1);function Cn(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=S(""),u=S(!1),E=S(""),I=S(0),v=S(15),y=S(""),f=S(1),A=S(n([{label:"E-Mail",callback:(z,K)=>z.email.toLowerCase().includes(K.toLowerCase())},{label:"ID",callback:(z,K)=>z.id.toLowerCase().includes(K.toLowerCase())}])),k=S(n([{label:"E-Mail",callback:(z,K)=>z.email.localeCompare(K.email)},{label:"ID",callback:(z,K)=>z.id.localeCompare(K.id)},{label:"Created",callback:(z,K)=>z.created_at<K.created_at},{label:"Last Login",callback:(z,K)=>{let J=z.last_login||9999999999,Z=K.last_login||9999999999;return J<Z}}]));Le(async()=>{g(),_(),x()});async function g(z,K,J,Z){let re;if(z===!0?J&&e(f)===2?re=await rs(Z||e(v),K,void 0,!1):re=await rs(Z||e(v),K,e(y),J):re=await ol(),!re.ok)s(t,"Error fetching users: "+re.body.message);else{re.status===206?(s(v,n(Number.parseInt(re.headers.get("x-page-size"),10))),s(m,"user"),re.headers.get("x-continuation-token"),s(y,n(re.headers.get("x-continuation-token")))):s(m,""),s(I,n(re.headers.get("x-user-count")));let ve=await re.json();s(o,n([...ve])),s(r,n([...ve]))}}async function w(z,K){await g(!0,z,K),K?s(f,e(f)-1):s(f,e(f)+1)}async function $(z){s(y,""),await g(!0,0,!1,z),s(f,1)}async function _(){let z=await is();if(!z.ok)s(t,"Error fetching roles: "+z.body.message);else{let K=await z.json();Dl.set(K),ba.set(K.map(J=>J.name))}}async function x(){let z=await as();if(!z.ok)s(t,"Error fetching groups: "+z.body.message);else{let K=await z.json();jl.set(K),$a.set(K.map(J=>J.name))}}function b(){g(),_(),x(),s(E,"")}G();var C=Tn(),L=ee(C),j=i(L),R=d(j);Lt(R,{get items(){return e(o)},get resItems(){return e(r)},set resItems(z){s(r,n(z))},get searchOptions(){return e(A)},set searchOptions(z){s(A,n(z))},get orderOptions(){return e(k)},set orderOptions(z){s(k,n(z))},get useServerSideIdx(){return e(m)},set useServerSideIdx(z){s(m,n(z))},get isSearchFiltered(){return e(u)},set isSearchFiltered(z){s(u,n(z))},get search(){return e(E)},set search(z){s(E,n(z))}});var N=i(R,2);en(N,{onSave:b});var B=i(N,2),D=d(B);{var F=z=>{var K=me(),J=ee(K);qe(J,17,()=>e(r),Z=>Z.id,(Z,re)=>{var ve=In(),$e=d(ve);cs($e,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:b}),c(ve),l(Z,ve)}),l(z,K)},M=z=>{var K=me(),J=ee(K);qe(J,17,()=>e(h),Z=>Z.id,(Z,re)=>{var ve=Sn(),$e=d(ve);cs($e,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:b}),c(ve),l(Z,ve)}),l(z,K)};O(D,z=>{e(m)&&!e(u)?z(F):z(M,!1)})}c(B);var P=i(B,2);{var W=z=>{ds(z,{get itemsTotal(){return e(I)},fetchPageCallback:w,sspPageSizeChange:$,get sspPage(){return e(f)},set sspPage(K){s(f,n(K))},get sspPageSize(){return e(v)},set sspPageSize(K){s(v,n(K))},get sspContinuationToken(){return e(y)},set sspContinuationToken(K){s(y,n(K))}})},Q=z=>{jt(z,{get items(){return e(r)},set items(K){s(r,n(K))},get resItems(){return e(h)},set resItems(K){s(h,n(K))}})};O(P,z=>{e(m)&&!e(u)?z(W):z(Q,!1)})}c(j),q(()=>Y(L,`${e(t)??""} `)),l(p,C),ie()}var An=T('<div class="content svelte-1mqfi4i"><!></div>');function bt(p,a){le(a,!0);let t=U(a,"eventsCollapsed",11,!0),o=U(a,"eventsWide",11,!1);var r=An(),h=d(r);xt(h,()=>a.children??kt),c(r),q(()=>{St(r,"mr",!t()&&!o()),St(r,"mrCollapsed",t()&&!o()),St(r,"mrWide",!t()&&o())}),l(p,r),ie()}var Ln=T('<div class="success svelte-17in7jd">Success</div>'),Nn=T('<div class="mainErr err svelte-17in7jd"> </div>'),Rn=T('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function Dn(p,a){le(a,!0);let t=U(a,"role",31,()=>n({})),o=S(""),r=S(!1),h=S(void 0);Te(()=>{e(r)&&s(h,n(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=S(n({}));const u=He().shape({name:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(s(o,""),!await I()){s(o,"Invalid input");return}let C={role:t().name.trim()},L=await El(t().id,C);if(L.ok)s(r,!0);else{let j=await L.json();s(o,n(j.message))}}async function I(){try{return await u.validate(t(),{abortEarly:!1}),s(m,n({})),!0}catch(C){return s(m,n(Xe(C))),!1}}var v=Rn(),y=d(v),f=i(d(y),2),A=d(f,!0);c(f),c(y);var k=i(y,2),g=Be(()=>t().name==="rauthy_admin");ne(k,{autocomplete:"off",placeholder:"Role Name",get disabled(){return e(g)},get value(){return t().name},set value(C){t(t().name=C,!0)},get error(){return e(m).name},set error(C){e(m).name=C},$$events:{input:I},children:(C,L)=>{G();var j=V("ROLE NAME");l(C,j)},$$slots:{default:!0}});var w=i(k,2);Se(w,{level:1,width:"4rem",$$events:{click:E},children:(C,L)=>{G();var j=V("SAVE");l(C,j)},$$slots:{default:!0}});var $=i(w,2);{var _=C=>{var L=Ln();l(C,L)};O($,C=>{e(r)&&C(_)})}var x=i($,2);{var b=C=>{var L=Nn(),j=d(L,!0);c(L),q(()=>Y(j,e(o))),l(C,L)};O(x,C=>{e(o)&&C(b)})}c(v),q(()=>Y(A,t().id)),l(p,v),ie()}var jn=T('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy_admin role cannot be deleted.</div>'),On=T('<div class="err svelte-1jljqe9"> </div>'),Mn=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this role?</div> <!> <!>',1),Pn=T('<div class="container svelte-1jljqe9"><!></div>');function zn(p,a){le(a,!0);let t=U(a,"role",19,()=>({})),o=S(!1),r=S("");async function h(){s(r,""),s(o,!0);let v=await Il(t().id);if(v.ok)a.onSave();else{let y=await v.json();s(r,n(y.message))}s(o,!1)}var m=Pn(),u=d(m);{var E=v=>{var y=jn();l(v,y)},I=v=>{var y=Mn(),f=i(ee(y),2);Se(f,{level:1,get isLoading(){return e(o)},set isLoading(g){s(o,n(g))},$$events:{click:h},children:(g,w)=>{G();var $=V("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var w=On(),$=d(w,!0);c(w),q(()=>Y($,e(r))),l(g,w)};O(A,g=>{e(r)&&g(k)})}l(v,y)};O(u,v=>{t().name==="rauthy_admin"?v(E):v(I,!1)})}c(m),l(p,m),ie()}var Un=T('<div class="data font-mono svelte-115hohv"> </div>'),Wn=T('<div class="data svelte-115hohv"> </div>'),qn=T('<div class="header svelte-115hohv"><!> <!></div>'),Gn=T("<div><!></div>"),Bn=T("<div><!></div>"),Kn=T("<div><!> <!></div>");function Fn(p,a){le(a,!0);let t=U(a,"role",31,()=>n({})),o=U(a,"onSave",15),r=S(void 0);const h=["Config","Delete"];let m=S(n(h[0]));const u=200,E=u/2;function I(){s(r,!1),o()()}vt(p,{get show(){return e(r)},set show(v){s(r,n(v))},header:v=>{var y=qn(),f=d(y);Ze(f,{text:"Role ID",children:(k,g)=>{var w=Un(),$=d(w,!0);c(w),q(()=>Y($,t().id)),l(k,w)},$$slots:{default:!0}});var A=i(f,2);Ze(A,{text:"Role Name",children:(k,g)=>{var w=Wn(),$=d(w,!0);c(w),q(()=>Y($,t().name)),l(k,w)},$$slots:{default:!0}}),c(y),l(v,y)},body:v=>{var y=Kn(),f=d(y);Dt(f,{labels:h,get selected(){return e(m)},set selected(w){s(m,n(w))}});var A=i(f,2);{var k=w=>{var $=Gn(),_=d($);Dn(_,{get role(){return t()},set role(x){t(x)},get onSave(){return o()},set onSave(x){o(x)}}),c($),ue(5,$,()=>be,()=>({delay:E,duration:u})),ue(6,$,()=>be,()=>({duration:u})),l(w,$)},g=w=>{var $=me(),_=ee($);{var x=b=>{var C=Bn(),L=d(C);zn(L,{get role(){return t()},onSave:I}),c(C),ue(5,C,()=>be,()=>({delay:E,duration:u})),ue(6,C,()=>be,()=>({duration:u})),l(b,C)};O(_,b=>{e(m)==="Delete"&&b(x)},!0)}l(w,$)};O(A,w=>{e(m)==="Config"?w(k):w(g,!1)})}c(y),l(v,y)},$$slots:{header:!0,body:!0}}),ie()}var Vn=T('<div class="header font-label svelte-r30xs6">ADD NEW ROLE</div>'),Jn=T('<div class="success svelte-r30xs6">Success</div>'),Yn=T('<div class="err svelte-r30xs6"> </div>'),Xn=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function Hn(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1),o=S(void 0),r=S(n({role:""})),h=S(""),m=S(!1),u=S(void 0),E=S(n({}));const I=He().shape({role:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(m)&&s(u,n(setTimeout(()=>{s(m,!1),s(r,n({role:""})),s(o,!1),a.onSave()},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await y()){s(h,"Invalid input");return}e(r).role=e(r).role.trim();let f=await xl(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,n(A.message))}}async function y(){try{return await I.validate(e(r),{abortEarly:!1}),s(E,n({})),!0}catch(f){return s(E,n(Xe(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(o)},set show(f){s(o,n(f))},header:f=>{var A=Vn();l(f,A)},body:f=>{var A=Xn(),k=d(A);ne(k,{autocomplete:"off",placeholder:"Role Name",get value(){return e(r).role},set value(b){e(r).role=b},get error(){return e(E).role},set error(b){e(E).role=b},$$events:{input:y},children:(b,C)=>{G();var L=V("ROLE NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{G();var L=V("SAVE");l(b,L)},$$slots:{default:!0}});var w=i(g,2);{var $=b=>{var C=Jn();l(b,C)};O(w,b=>{e(m)&&b($)})}var _=i(w,2);{var x=b=>{var C=Yn(),L=d(C,!0);c(C),q(()=>Y(L,e(h))),l(b,C)};O(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),ie()}var Zn=T('<div class="svelte-db30dl"><!></div>'),Qn=T(' <div class="content"><!> <!> <div id="roles" class="svelte-db30dl"></div> <!> <div style="height: 20px"></div></div>',1);function eo(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=S(""),u=[{label:"Name",callback:(_,x)=>_.name.toLowerCase().includes(x.toLowerCase())},{label:"ID",callback:(_,x)=>_.id.toLowerCase().includes(x.toLowerCase())}],E=[{label:"Name",callback:(_,x)=>_.name.localeCompare(x.name)},{label:"ID",callback:(_,x)=>_.id.localeCompare(x.id)}];Le(async()=>{I()});async function I(){let _=await is(),x=await _.json();_.ok?s(o,n([...x])):s(t,n(x.message))}function v(){I(),s(m,"")}G();var y=Qn(),f=ee(y),A=i(f),k=d(A);Lt(k,{get items(){return e(o)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(_){s(r,n(_))},get search(){return e(m)},set search(_){s(m,n(_))}});var g=i(k,2);Hn(g,{onSave:v});var w=i(g,2);qe(w,23,()=>e(h),_=>_.id,(_,x,b)=>{var C=Zn(),L=d(C);Fn(L,{onSave:v,get role(){return e(o)[e(b)]},set role(j){e(o)[e(b)]=j}}),c(C),l(_,C)}),c(w);var $=i(w,2);jt($,{get items(){return e(r)},set items(_){s(r,n(_))},get resItems(){return e(h)},set resItems(_){s(h,n(_))}}),G(2),c(A),q(()=>Y(f,`${e(t)??""} `)),l(p,y),ie()}var to=T('<div class="header font-label svelte-r30xs6">ADD NEW GROUP</div>'),ao=T('<div class="success svelte-r30xs6">Success</div>'),so=T('<div class="err svelte-r30xs6"> </div>'),ro=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function lo(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1),o=S(void 0),r=S(n({group:""})),h=S(""),m=S(!1),u=S(void 0),E=S(n({}));const I=He().shape({group:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(m)&&s(u,n(setTimeout(()=>{a.onSave(),s(m,!1),s(r,n({group:""})),s(o,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await y()){s(h,"Invalid input");return}e(r).group=e(r).group.trim();let f=await Br(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,n(A.message))}}async function y(){try{return await I.validate(e(r),{abortEarly:!1}),s(E,n({})),!0}catch(f){return s(E,n(Xe(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(o)},set show(f){s(o,n(f))},header:f=>{var A=to();l(f,A)},body:f=>{var A=ro(),k=d(A);ne(k,{autocomplete:"off",placeholder:"Group Name",get value(){return e(r).group},set value(b){e(r).group=b},get error(){return e(E).group},set error(b){e(E).group=b},$$events:{input:y},children:(b,C)=>{G();var L=V("GROUP NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{G();var L=V("SAVE");l(b,L)},$$slots:{default:!0}});var w=i(g,2);{var $=b=>{var C=ao();l(b,C)};O(w,b=>{e(m)&&b($)})}var _=i(w,2);{var x=b=>{var C=so(),L=d(C,!0);c(C),q(()=>Y(L,e(h))),l(b,C)};O(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),ie()}var io=T('<div class="success svelte-17in7jd">Success</div>'),no=T('<div class="mainErr err svelte-17in7jd"> </div>'),oo=T('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function vo(p,a){le(a,!0);let t=U(a,"group",31,()=>n({})),o=S(""),r=S(!1),h=S(void 0);Te(()=>{e(r)&&s(h,n(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=S(n({}));const u=He().shape({name:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(s(o,""),!await I()){s(o,"Invalid input");return}let b={group:t().name.trim()},C=await Kr(t().id,b);if(C.ok)s(r,!0);else{let L=await C.json();s(o,n(L.message))}}async function I(){try{return await u.validate(t(),{abortEarly:!1}),s(m,n({})),!0}catch(b){return s(m,n(Xe(b))),!1}}var v=oo(),y=d(v),f=i(d(y),2),A=d(f,!0);c(f),c(y);var k=i(y,2);ne(k,{autocomplete:"off",placeholder:"Group Name",get value(){return t().name},set value(b){t(t().name=b,!0)},get error(){return e(m).name},set error(b){e(m).name=b},$$events:{input:I},children:(b,C)=>{G();var L=V("GROUP NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:E},children:(b,C)=>{G();var L=V("SAVE");l(b,L)},$$slots:{default:!0}});var w=i(g,2);{var $=b=>{var C=io();l(b,C)};O(w,b=>{e(r)&&b($)})}var _=i(w,2);{var x=b=>{var C=no(),L=d(C,!0);c(C),q(()=>Y(L,e(o))),l(b,C)};O(_,b=>{e(o)&&b(x)})}c(v),q(()=>Y(A,t().id)),l(p,v),ie()}var co=T('<div class="err svelte-1jljqe9"> </div>'),uo=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this group?</div> <!> <!></div>');function ho(p,a){le(a,!0);let t=U(a,"group",19,()=>({})),o=S(!1),r=S("");async function h(){s(r,""),s(o,!0);let v=await Fr(t().id);if(v.ok)a.onSave();else{let y=await v.json();s(r,n(y.message))}s(o,!1)}var m=uo(),u=i(d(m),2);Se(u,{level:1,get isLoading(){return e(o)},set isLoading(v){s(o,n(v))},$$events:{click:h},children:(v,y)=>{G();var f=V("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var I=v=>{var y=co(),f=d(y,!0);c(y),q(()=>Y(f,e(r))),l(v,y)};O(E,v=>{e(r)&&v(I)})}c(m),l(p,m),ie()}var po=T('<div class="data font-mono svelte-115hohv"> </div>'),mo=T('<div class="data svelte-115hohv"> </div>'),fo=T('<div class="header svelte-115hohv"><!> <!></div>'),go=T("<div><!></div>"),wo=T("<div><!></div>"),yo=T("<div><!> <!></div>");function bo(p,a){le(a,!0);let t=U(a,"group",31,()=>n({})),o=S(void 0);const r=["Config","Delete"];let h=S(n(r[0]));const m=200,u=m/2;function E(){s(o,!1),a.onSave()}vt(p,{get show(){return e(o)},set show(I){s(o,n(I))},header:I=>{var v=fo(),y=d(v);Ze(y,{text:"Group ID",children:(A,k)=>{var g=po(),w=d(g,!0);c(g),q(()=>Y(w,t().id)),l(A,g)},$$slots:{default:!0}});var f=i(y,2);Ze(f,{text:"Group Name",children:(A,k)=>{var g=mo(),w=d(g,!0);c(g),q(()=>Y(w,t().name)),l(A,g)},$$slots:{default:!0}}),c(v),l(I,v)},body:I=>{var v=yo(),y=d(v);Dt(y,{labels:r,get selected(){return e(h)},set selected(g){s(h,n(g))}});var f=i(y,2);{var A=g=>{var w=go(),$=d(w);vo($,{get onSave(){return a.onSave},get group(){return t()},set group(_){t(_)}}),c(w),ue(5,w,()=>be,()=>({delay:u,duration:m})),ue(6,w,()=>be,()=>({duration:m})),l(g,w)},k=g=>{var w=me(),$=ee(w);{var _=x=>{var b=wo(),C=d(b);ho(C,{get group(){return t()},onSave:E}),c(b),ue(5,b,()=>be,()=>({delay:u,duration:m})),ue(6,b,()=>be,()=>({duration:m})),l(x,b)};O($,x=>{e(h)==="Delete"&&x(_)},!0)}l(g,w)};O(f,g=>{e(h)==="Config"?g(A):g(k,!1)})}c(v),l(I,v)},$$slots:{header:!0,body:!0}}),ie()}var $o=T('<div class="svelte-10dkaqk"><!></div>'),_o=T(' <div class="content"><!> <!> <div id="groups" class="svelte-10dkaqk"></div> <!> <div style="height: 20px"></div></div>',1);function ko(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=[{label:"Name",callback:($,_)=>$.name.toLowerCase().includes(_.toLowerCase())},{label:"ID",callback:($,_)=>$.id.toLowerCase().includes(_.toLowerCase())}],u=[{label:"Name",callback:($,_)=>$.name.localeCompare(_.name)},{label:"ID",callback:($,_)=>$.id.localeCompare(_.id)}];Le(async()=>{E()});async function E(){let $=await as(),_=await $.json();$.ok?s(o,n([..._])):s(t,n(_.message))}function I(){E()}G();var v=_o(),y=ee(v),f=i(y),A=d(f);Lt(A,{get items(){return e(o)},searchOptions:m,orderOptions:u,get resItems(){return e(r)},set resItems($){s(r,n($))}});var k=i(A,2);lo(k,{onSave:I});var g=i(k,2);qe(g,23,()=>e(h),$=>$.id,($,_,x)=>{let b=x;var C=$o(),L=d(C);bo(L,{onSave:I,get group(){return e(h)[e(b)]},set group(j){e(h)[e(b)]=j}}),c(C),l($,C)}),c(g);var w=i(g,2);jt(w,{get items(){return e(r)},set items($){s(r,n($))},get resItems(){return e(h)},set resItems($){s(h,n($))}}),G(2),c(f),q(()=>Y(y,`${e(t)??""} `)),l(p,v),ie()}var xo=T('<div class="header font-label svelte-r30xs6">ADD NEW SCOPE</div>'),Eo=T('<div class="success svelte-r30xs6">Success</div>'),Io=T('<div class="err svelte-r30xs6"> </div>'),So=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function To(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1),o=S(void 0),r=S(n({scope:""})),h=S(""),m=S(!1),u=S(void 0),E=S(n({}));const I=He().shape({scope:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(m)&&s(u,n(setTimeout(()=>{a.onSave(),s(m,!1),s(r,n({scope:""})),s(o,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await y()){s(h,"Invalid input");return}e(r).scope=e(r).scope.trim();let f=await Sl(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,n(A.message))}}async function y(){try{return await I.validate(e(r),{abortEarly:!1}),s(E,n({})),!0}catch(f){return s(E,n(Xe(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(o)},set show(f){s(o,n(f))},header:f=>{var A=xo();l(f,A)},body:f=>{var A=So(),k=d(A);ne(k,{autocomplete:"off",placeholder:"Scope Name",get value(){return e(r).scope},set value(b){e(r).scope=b},get error(){return e(E).scope},set error(b){e(E).scope=b},$$events:{input:y},children:(b,C)=>{G();var L=V("SCOPE NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{G();var L=V("SAVE");l(b,L)},$$slots:{default:!0}});var w=i(g,2);{var $=b=>{var C=Eo();l(b,C)};O(w,b=>{e(m)&&b($)})}var _=i(w,2);{var x=b=>{var C=Io(),L=d(C,!0);c(C),q(()=>Y(L,e(h))),l(b,C)};O(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),ie()}var Co=T('<div class="desc svelte-guvobw"><p>Custom mappings cannot be done for OpenID default scopes and their names cannot be changed.</p></div>'),Ao=T('<div class="desc svelte-guvobw"><p>You can map custom scopes to attributes.<br> All additional attributes, that were configured, can have a custom value for each user.<br> When they are mapped to a scope, they can be included in the Access and / or ID Tokens.</p></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ACCESS TOKEN MAPPINGS</div> <!></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ID TOKEN MAPPINGS</div> <!></div>',1),Lo=T('<div class="success svelte-guvobw">Success</div>'),No=T('<div class="mainErr err svelte-guvobw"> </div>'),Ro=T("<!> <!> <!>",1),Do=T('<div class="container svelte-guvobw"><div class="unit svelte-guvobw"><div class="label font-label svelte-guvobw">ID</div> <div class="value font-mono svelte-guvobw"> </div></div> <!> <div class="separator"></div> <!> <!></div>');function jo(p,a){le(a,!0);let t=U(a,"attrs",27,()=>n([])),o=U(a,"scope",31,()=>n({})),r=S(""),h=S(!1),m=S(void 0),u=S(!1),E=S(n([]));Te(()=>{e(h)&&s(m,n(setTimeout(()=>{s(h,!1),a.onSave()},2e3)))}),Te(()=>{t()&&s(E,n(t().map(j=>j.name)))}),Le(()=>(s(u,n(Ga(o().name))),()=>clearTimeout(e(m))));let I=S(n({}));const v=He().shape({name:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function y(){if(s(r,""),!await f()){s(r,"Invalid input");return}let j={scope:o().name.trim()};o().attr_include_access.length>0&&(j.attr_include_access=o().attr_include_access),o().attr_include_id.length>0&&(j.attr_include_id=o().attr_include_id);let R=await Tl(o().id,j);if(R.ok)s(h,!0);else{let N=await R.json();s(r,n(N.message))}}async function f(){try{return await v.validate(o(),{abortEarly:!1}),s(I,n({})),!0}catch(j){return s(I,n(Xe(j))),!1}}var A=Do(),k=d(A),g=i(d(k),2),w=d(g,!0);c(g),c(k);var $=i(k,2);ne($,{autocomplete:"off",placeholder:"Scope Name",get disabled(){return e(u)},get value(){return o().name},set value(j){o(o().name=j,!0)},get error(){return e(I).name},set error(j){e(I).name=j},$$events:{input:f},children:(j,R)=>{G();var N=V("SCOPE NAME");l(j,N)},$$slots:{default:!0}});var _=i($,4);{var x=j=>{var R=Co();l(j,R)},b=j=>{var R=Ao(),N=i(ee(R),2);oe(N,"margin-top","-3px");var B=i(d(N),2);Mt(B,{get options(){return e(E)},searchThreshold:4,get items(){return o().attr_include_access},set items(M){o(o().attr_include_access=M,!0)}}),c(N);var D=i(N,2);oe(D,"margin-top","-3px");var F=i(d(D),2);Mt(F,{get options(){return e(E)},searchThreshold:4,get items(){return o().attr_include_id},set items(M){o(o().attr_include_id=M,!0)}}),c(D),l(j,R)};O(_,j=>{e(u)?j(x):j(b,!1)})}var C=i(_,2);{var L=j=>{var R=Ro(),N=ee(R);Se(N,{level:1,width:"4rem",$$events:{click:y},children:(P,W)=>{G();var Q=V("SAVE");l(P,Q)},$$slots:{default:!0}});var B=i(N,2);{var D=P=>{var W=Lo();l(P,W)};O(B,P=>{e(h)&&P(D)})}var F=i(B,2);{var M=P=>{var W=No(),Q=d(W,!0);c(W),q(()=>Y(Q,e(r))),l(P,W)};O(F,P=>{e(r)&&P(M)})}l(j,R)};O(C,j=>{e(u)||j(L)})}c(A),q(()=>Y(w,o().id)),l(p,A),ie()}var Oo=T('<div class="label svelte-1jljqe9">OpenID default scopes cannot be deleted</div>'),Mo=T('<div class="err svelte-1jljqe9"> </div>'),Po=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this scope?</div> <!> <!>',1),zo=T('<div class="container svelte-1jljqe9"><!></div>');function Uo(p,a){le(a,!0);let t=U(a,"scope",19,()=>({})),o=S(!1),r=S("");async function h(){s(r,""),s(o,!0);let v=await Cl(t().id);if(v.ok)a.onSave();else{let y=await v.json();s(r,n(y.message))}s(o,!1)}var m=zo(),u=d(m);{var E=v=>{var y=Oo();l(v,y)},I=v=>{var y=Po(),f=i(ee(y),2);Se(f,{level:1,get isLoading(){return e(o)},set isLoading(g){s(o,n(g))},$$events:{click:h},children:(g,w)=>{G();var $=V("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var w=Mo(),$=d(w,!0);c(w),q(()=>Y($,e(r))),l(g,w)};O(A,g=>{e(r)&&g(k)})}l(v,y)};O(u,v=>{Ga(t().name)?v(E):v(I,!1)})}c(m),l(p,m),ie()}var Wo=T('<div class="data font-mono svelte-115hohv"> </div>'),qo=T('<div class="data svelte-115hohv"> </div>'),Go=T('<div class="header svelte-115hohv"><!> <!></div>'),Bo=T("<div><!></div>"),Ko=T("<div><!></div>"),Fo=T("<div><!> <!></div>");function Vo(p,a){le(a,!0);let t=U(a,"attrs",15),o=U(a,"scope",31,()=>n({})),r=U(a,"onSave",15),h=S(void 0);const m=["Config","Delete"];let u=S(n(m[0]));const E=200,I=E/2;function v(){s(h,!1),r()()}vt(p,{get show(){return e(h)},set show(y){s(h,n(y))},header:y=>{var f=Go(),A=d(f);Ze(A,{text:"Scope ID",children:(g,w)=>{var $=Wo(),_=d($,!0);c($),q(()=>Y(_,o().id)),l(g,$)},$$slots:{default:!0}});var k=i(A,2);Ze(k,{text:"Scope Name",children:(g,w)=>{var $=qo(),_=d($,!0);c($),q(()=>Y(_,o().name)),l(g,$)},$$slots:{default:!0}}),c(f),l(y,f)},body:y=>{var f=Fo(),A=d(f);Dt(A,{labels:m,get selected(){return e(u)},set selected($){s(u,n($))}});var k=i(A,2);{var g=$=>{var _=Bo(),x=d(_);jo(x,{get attrs(){return t()},set attrs(b){t(b)},get scope(){return o()},set scope(b){o(b)},get onSave(){return r()},set onSave(b){r(b)}}),c(_),ue(5,_,()=>be,()=>({delay:I,duration:E})),ue(6,_,()=>be,()=>({duration:E})),l($,_)},w=$=>{var _=me(),x=ee(_);{var b=C=>{var L=Ko(),j=d(L);Uo(j,{get scope(){return o()},onSave:v}),c(L),ue(5,L,()=>be,()=>({delay:I,duration:E})),ue(6,L,()=>be,()=>({duration:E})),l(C,L)};O(x,C=>{e(u)==="Delete"&&C(b)},!0)}l($,_)};O(k,$=>{e(u)==="Config"?$(g):$(w,!1)})}c(f),l(y,f)},$$slots:{header:!0,body:!0}}),ie()}var Jo=T('<div class="svelte-15sc49d"><!></div>'),Yo=T(' <div class="content"><!> <!> <div id="scopes" class="svelte-15sc49d"></div> <!> <div style="height: 20px"></div></div>',1);function Xo(p,a){le(a,!0);let t=S(n([])),o=S(""),r=S(n([])),h=S(n([])),m=S(n([])),u=S(""),E=[{label:"Name",callback:(b,C)=>b.name.toLowerCase().includes(C.toLowerCase())},{label:"ID",callback:(b,C)=>b.id.toLowerCase().includes(C.toLowerCase())}],I=[{label:"Name",callback:(b,C)=>b.name.localeCompare(C.name)},{label:"ID",callback:(b,C)=>b.id.localeCompare(C.id)}];Le(()=>{y(),v(),s(u,"")});async function v(){let b=await ya();if(!b.ok)s(o,"Error fetching attributes: "+b.body.message);else{let C=await b.json();s(t,n([...C.values]))}}async function y(){let b=await ns(),C=await b.json();b.ok?s(r,n([...C])):s(o,n(C.message))}function f(){y()}G();var A=Yo(),k=ee(A),g=i(k),w=d(g);Lt(w,{get items(){return e(r)},searchOptions:E,orderOptions:I,get resItems(){return e(h)},set resItems(b){s(h,n(b))},get search(){return e(u)},set search(b){s(u,n(b))}});var $=i(w,2);To($,{onSave:f});var _=i($,2);qe(_,23,()=>e(m),b=>b.id,(b,C,L)=>{var j=Jo(),R=d(j);Vo(R,{onSave:f,get attrs(){return e(t)},set attrs(N){s(t,n(N))},get scope(){return e(m)[e(L)]},set scope(N){e(m)[e(L)]=N}}),c(j),l(b,j)}),c(_);var x=i(_,2);jt(x,{get items(){return e(h)},set items(b){s(h,n(b))},get resItems(){return e(m)},set resItems(b){s(m,n(b))}}),G(2),c(g),q(()=>Y(k,`${e(o)??""} `)),l(p,A),ie()}var Ho=T('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),Zo=T('<div class="list svelte-f2hz2l"></div>');function us(p,a){let t=U(a,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var o=Zo();qe(o,21,t,ut,(r,h,m)=>{var u=Ho(),E=d(u),I=d(E,!0);c(E);var v=i(E,2);Ve(v,{get selected(){return e(h).value},set selected(y){e(h).value=y}}),c(u),q(()=>Y(I,e(h).label)),l(r,u)}),c(o),l(p,o)}var Qo=T("<div><!></div>");function ev(p,a){le(a,!0);let t=U(a,"validation",19,()=>({})),o=U(a,"value",15),r=U(a,"autocomplete",11,"on"),h=U(a,"validate",15),m=Jt(a,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);h(y);let u=S("");const E=oa();async function I(){await Vt(),E("input",!0),y()}async function v(){E("blur",!0),y()}function y(){var k;return s(u,""),o()&&((k=t())!=null&&k.regex)&&!o().match(t().regex)?(s(u,n(t().errMsg||"Invalid input")),!1):!0}var f=Qo(),A=d(f);return ne(A,Pa({get width(){return a.width},get name(){return a.name},get autocomplete(){return r()}},()=>m,{get value(){return o()},set value(k){o(k)},get error(){return e(u)},set error(k){s(u,n(k))},$$events:{input:I,blur:v},children:(k,g)=>{var w=me(),$=ee(w);xt($,()=>a.children??kt),l(k,w)},$$slots:{default:!0}})),c(f),ue(7,f,()=>mt,()=>({duration:200})),l(p,f),ie({validateValue:y})}var tv=T('<div class="err svelte-nzivgu"> </div>'),av=T('<div class="container svelte-nzivgu"><!> <!></div>');function Bt(p,a){le(a,!0);let t=U(a,"validation",27,()=>n({required:!1,regex:void 0,errMsg:""})),o=U(a,"values",15),r=U(a,"validate",15),h=U(a,"width",3,"260px"),m=U(a,"optional",3,!1),u=U(a,"autocomplete",15,"on"),E=Jt(a,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);r(k);let I=S(""),v=S(n([]));const y=oa();Le(()=>{o()||o([]);for(let x of o())e(v).push({name:zt(),value:x});e(v).push({name:zt(),value:""})});async function f(){await Vt(),e(v)[e(v).length-1].value?e(v).push({name:zt(),value:""}):e(v).length>1&&!e(v)[e(v).length-2].value&&s(v,n([...e(v).slice(0,e(v).length-1)])),y("input",!0),k(),o(A())}function A(){k();let x=[];for(let b=0;b<e(v).length-1;b++)x.push(e(v)[b].value);return x}function k(){if(t().required&&e(v).length===1&&!e(v)[0].value)return m()?!0:(s(I,"Required"),!1);let x=!0;for(let b of e(v))b.value&&!b.validate()&&(x=!1);return x}var g=av(),w=d(g);qe(w,17,()=>e(v),ut,(x,b,C)=>{ev(x,Pa({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(b).name}},()=>E,{get value(){return e(b).value},set value(L){e(b).value=L},get validate(){return e(b).validate},set validate(L){e(b).validate=L},get autocomplete(){return u()},set autocomplete(L){u(L)},$$events:{input:f,blur:f},children:(L,j)=>{var R=me(),N=ee(R);xt(N,()=>a.children??kt),l(L,R)},$$slots:{default:!0}}))});var $=i(w,2);{var _=x=>{var b=tv(),C=d(b,!0);c(b),q(()=>Y(C,e(I))),l(x,b)};O($,x=>{e(I)&&x(_)})}return c(g),q(()=>oe(g,"width",h())),l(p,g),ie({getValues:A,validateValues:k})}var sv=T('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),rv=T(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),lv=T('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),iv=T('<div class="success svelte-1pba61y">Success</div>'),nv=T('<div class="mainErr err svelte-1pba61y"> </div>'),ov=T(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function vv(p,a){le(a,!0);let t=U(a,"client",31,()=>n({}));const o="350px";let r=S(""),h=S(!1),m=S(void 0),u=n(Gs.map(se=>{var Ae,Pe;return se.label==="device_code"?se.value=(Ae=t().flows_enabled)==null?void 0:Ae.includes("urn:ietf:params:oauth:grant-type:device_code"):se.value=(Pe=t().flows_enabled)==null?void 0:Pe.includes(se.label),se})),E=S(void 0);os.subscribe(se=>{s(E,n(se))});let I=n(Bs.map(se=>{var Ae;return se.value=(Ae=t().challenges)==null?void 0:Ae.includes(se.label),se})),v=S(void 0),y=S(void 0),f=S(void 0),A=S(void 0);Le(()=>()=>clearTimeout(e(m)));let k=S(n({}));const g=He().shape({name:he().trim().matches(Qt,"Can only contain characters, numbers and '-'"),client_uri:he().trim().nullable().matches(tt,"Invalid URI"),access_token_lifetime:yt().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function w(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function $(se){se.code==="Enter"&&_()}async function _(){s(r,"");const se=await x();if(!e(y)()){s(r,"Invalid Allowed Origin");return}if(!e(f)()){s(r,"Invalid Redirect URIs");return}if(!e(A)()){s(r,"Invalid Post Logout URIs");return}if(!e(v)()){s(r,"Invalid Contacts");return}if(!se){s(r,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=u.filter(H=>H.value).map(H=>H.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":H.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){s(r,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){s(r,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){s(r,"At least one flow must be enabled");return}let Ae=t();t(t().challenges=I.filter(H=>H.value).map(H=>H.label),!0),t().challenges.length===0&&(Ae.challenges=null),Ae.name||(Ae.name=void 0),Ae.allowed_origins.length>0&&!Ae.allowed_origins[0]&&(Ae.allowed_origins=[]);let Pe=await Nr(Ae);if(Pe.ok)s(h,!0);else{let H=await Pe.json();s(r,n(H.message))}}async function x(){try{return await g.validate(t(),{abortEarly:!1}),s(k,n({})),!0}catch(se){return s(k,n(Xe(se))),!1}}Te(()=>{t().id&&w()}),Te(()=>{e(h)&&s(m,n(setTimeout(()=>{s(h,!1),a.onSave()},3e3)))});var b=ov(),C=d(b),L=i(d(C),2),j=d(L,!0);c(L),c(C);var R=i(C,4);ne(R,{autocomplete:"off",placeholder:"Client Name",width:o,get value(){return t().name},set value(se){t(t().name=se,!0)},get error(){return e(k).name},set error(se){e(k).name=se},$$events:{keypress:$,input:x},children:(se,Ae)=>{G();var Pe=V("CLIENT NAME");l(se,Pe)},$$slots:{default:!0}});var N=i(R,4);ne(N,{autocomplete:"off",placeholder:"Client URI",width:o,get value(){return t().client_uri},set value(se){t(t().client_uri=se,!0)},get error(){return e(k).client_uri},set error(se){e(k).client_uri=se},$$events:{keypress:$,input:x},children:(se,Ae)=>{G();var Pe=V("CLIENT URI");l(se,Pe)},$$slots:{default:!0}});var B=i(N,2);Bt(B,{style:`width: ${o}`,validation:{required:!1,regex:Ks,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(se){t(t().contacts=se,!0)},get validate(){return e(v)},set validate(se){s(v,n(se))},children:(se,Ae)=>{G();var Pe=V("CONTACT");l(se,Pe)},$$slots:{default:!0}});var D=i(B,4);oe(D,"margin-top","-5px");var F=d(D);oe(F,"width","138px");var M=i(d(F),2),P=d(M);Ve(P,{get selected(){return t().enabled},set selected(se){t(t().enabled=se,!0)}}),c(M),c(F);var W=i(F,2);oe(W,"width","110px");var Q=i(d(W),2),z=d(Q);Ve(z,{get selected(){return t().confidential},set selected(se){t(t().confidential=se,!0)}}),c(Q),c(W),c(D);var K=i(D,2),J=i(d(K),2),Z=d(J);us(Z,{get options(){return u}}),c(J),c(K);var re=i(K,2),ve=i(d(re),2),$e=d(ve);Ve($e,{get selected(){return t().force_mfa},set selected(se){t(t().force_mfa=se,!0)}}),c(ve),c(re);var _e=i(re,2);{var pe=se=>{var Ae=sv();oe(Ae,"margin","-10px 0 -15px 5px");var Pe=d(Ae),H=d(Pe);oe(H,"color","var(--col-err)"),G(7),c(Pe),c(Ae),l(se,Ae)},je=se=>{var Ae=me(),Pe=ee(Ae);{var H=Ee=>{var Ne=rv();oe(Ne,"margin","-10px 0 -15px 5px");var At=d(Ne),ae=d(At);oe(ae,"color","var(--col-err)"),G(5),c(At),c(Ne),ue(3,Ne,()=>be),l(Ee,Ne)};O(Pe,Ee=>{t().force_mfa&&Ee(H)},!0)}l(se,Ae)};O(_e,se=>{t().id==="rauthy"?se(pe):se(je,!1)})}var ge=i(_e,6);oe(ge,"margin-top","-10px");var de=i(d(ge),2);Mt(de,{get options(){return e(E)},searchThreshold:4,get items(){return t().scopes},set items(se){t(t().scopes=se,!0)}}),c(ge);var we=i(ge,2);oe(we,"margin-top","-3px");var ye=i(d(we),2);Mt(ye,{get options(){return e(E)},searchThreshold:4,get items(){return t().default_scopes},set items(se){t(t().default_scopes=se,!0)}}),c(we);var Me=i(we,4);Bt(Me,{style:`width: ${o}`,validation:{required:!0,regex:Fs,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(se){t(t().allowed_origins=se,!0)},get validate(){return e(y)},set validate(se){s(y,n(se))},children:(se,Ae)=>{G();var Pe=V("ALLOWED ORIGIN");l(se,Pe)},$$slots:{default:!0}});var Ce=i(Me,4);Bt(Ce,{style:`width: ${o}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(se){t(t().redirect_uris=se,!0)},get validate(){return e(f)},set validate(se){s(f,n(se))},children:(se,Ae)=>{G();var Pe=V("REDIRECT URI");l(se,Pe)},$$slots:{default:!0}});var xe=i(Ce,4);Bt(xe,{style:`width: ${o}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(se){t(t().post_logout_redirect_uris=se,!0)},get validate(){return e(A)},set validate(se){s(A,n(se))},children:(se,Ae)=>{G();var Pe=V("POST LOGOUT REDIRECT URI");l(se,Pe)},$$slots:{default:!0}});var Re=i(xe,6);ne(Re,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:o,get value(){return t().access_token_lifetime},set value(se){t(t().access_token_lifetime=se,!0)},get error(){return e(k).access_token_lifetime},set error(se){e(k).access_token_lifetime=se},$$events:{input:x},children:(se,Ae)=>{G();var Pe=V("ACCESS TOKEN LIFETIME");l(se,Pe)},$$slots:{default:!0}});var X=i(Re,2),Ie=d(X);oe(Ie,"width","220px");var fe=i(d(Ie),2),Ue=d(fe);Et(Ue,{options:Ba,get value(){return t().access_token_alg},set value(se){t(t().access_token_alg=se,!0)}}),c(fe),c(Ie);var Je=i(Ie,2),rt=d(Je);oe(rt,"text-align","right");var ct=i(rt,2),We=d(ct);Et(We,{options:Ba,get value(){return t().id_token_alg},set value(se){t(t().id_token_alg=se,!0)}}),c(ct),c(Je),c(X);var Ke=i(X,6),it=i(d(Ke),2),It=d(it);us(It,{get options(){return I}}),c(it),c(Ke);var $t=i(Ke,2),Qe=d($t);{var et=se=>{var Ae=lv();G(4),l(se,Ae)};O(Qe,se=>{t().id==="rauthy"&&se(et)})}c($t);var gt=i($t,2);Se(gt,{level:1,width:"4rem",$$events:{click:_},children:(se,Ae)=>{G();var Pe=V("SAVE");l(se,Pe)},$$slots:{default:!0}});var ht=i(gt,2);{var Ct=se=>{var Ae=iv();l(se,Ae)};O(ht,se=>{e(h)&&se(Ct)})}var at=i(ht,2);{var st=se=>{var Ae=nv(),Pe=d(Ae,!0);c(Ae),q(()=>Y(Pe,e(r))),l(se,Ae)};O(at,se=>{e(r)&&se(st)})}c(b),q(()=>Y(j,t().id)),l(p,b),ie()}var cv=T('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function dv(p,a){le(a,!0);let t=S(""),o=S("");Le(()=>{r()});async function r(){let A=await zr(a.client.id),k=await A.json();A.ok?s(o,n(k.secret)):s(t,n(k.message))}async function h(){let A=await Ur(a.client.id),k=await A.json();A.ok?await r():s(t,n(k.message))}var m=cv(),u=d(m),E=d(u,!0);c(u);var I=i(u,2),v=d(I);{var y=A=>{Gt(A,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(o)},set value(k){s(o,n(k))},children:(k,g)=>{G();var w=V("CLIENT SECRET");l(k,w)},$$slots:{default:!0}})};O(v,A=>{e(o)&&A(y)})}c(I);var f=i(I,2);Se(f,{level:1,$$events:{click:h},children:(A,k)=>{G();var g=V("GENERATE NEW");l(A,g)},$$slots:{default:!0}}),c(m),q(()=>Y(E,e(t))),l(p,m),ie()}var uv=T('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),hv=T('<div class="err svelte-1jljqe9"> </div>'),pv=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),mv=T('<div class="container svelte-1jljqe9"><!></div>');function fv(p,a){le(a,!0);let t=U(a,"client",19,()=>({})),o=S(!1),r=S("");async function h(){s(r,""),s(o,!0);let v=await Rr(t().id);if(v.ok)a.onSave();else{let y=await v.json();s(r,n(y.message))}s(o,!1)}var m=mv(),u=d(m);{var E=v=>{var y=uv();l(v,y)},I=v=>{var y=pv(),f=i(ee(y),2);Se(f,{level:1,get isLoading(){return e(o)},set isLoading(g){s(o,n(g))},$$events:{click:h},children:(g,w)=>{G();var $=V("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var w=hv(),$=d(w,!0);c(w),q(()=>Y($,e(r))),l(g,w)};O(A,g=>{e(r)&&g(k)})}l(v,y)};O(u,v=>{t().id==="rauthy"?v(E):v(I,!1)})}c(m),l(p,m),ie()}var gv=(p,a)=>s(a,!0),wv=T('<div class="load svelte-icxpvn"><!></div>'),yv=T('<div class="txt svelte-icxpvn">LOAD</div>'),bv=T('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function _a(p,a){le(a,!0);let t=S(!1),o=S(!1),r=S(void 0),h=S(void 0),m=S(void 0),u=S(void 0),E=S(void 0),I=S("white");Ra(()=>{clearTimeout(e(E))});function v(){switch(a.level){case 1:s(r,n(a.colors.act1)),s(h,n(a.colors.act1a)),s(m,"white"),s(u,`1px solid ${a.colors.gmid}`);break;case 2:s(r,n(a.colors.act2)),s(h,n(a.colors.act2a)),s(m,n(a.colors.ghigh)),s(u,`1px solid ${a.colors.gmid}`);break;default:s(r,n(a.colors.ghigh)),s(h,"white"),s(m,n(a.colors.act2a)),s(u,`1px solid ${a.colors.act2a}`),s(I,n(a.colors.acnt))}}Te(()=>{e(o)&&s(E,n(setTimeout(()=>{s(o,!1)},2e3)))}),Te(()=>{a.colors&&v()});var y=bv(),f=d(y);f.__click=[gv,o],oe(f,"width","100px");var A=d(f);{var k=w=>{var $=wv(),_=d($);ha(_,{background:!1,get color(){return e(I)}}),c($),l(w,$)},g=w=>{var $=yv();l(w,$)};O(A,w=>{e(o)?w(k):w(g,!1)})}c(f),c(y),q(()=>{oe(f,"border",e(u)),oe(f,"box-shadow",`1px 1px 2px ${a.colors.gmid??""}`),oe(f,"cursor",e(o)?"default":"pointer"),oe(f,"color",e(m)),oe(f,"background",e(t)?e(h):e(r))}),Oe("focus",f,()=>s(t,!0)),Oe("blur",f,()=>s(t,!1)),Oe("keypress",f,()=>s(o,!0)),l(p,y),ie()}ot(["click"]);var $v=T('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),_v=T('<div class="err font-label svelte-115vejc"> </div>'),kv=T('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function hs(p,a){le(a,!0);let t=U(a,"colors",19,()=>({})),o=U(a,"error",3,""),r=U(a,"name",3,""),h=U(a,"password",3,!1),m=U(a,"value",3,""),u=U(a,"width",3,"250px"),E=Jt(a,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),I=S(n(h()?"new-password":"text")),v=S(!1),y=S(!1);function f(){e(I)==="password"?s(I,"text"):s(I,"password")}var A=kv(),k=d(A),g=d(k),w=d(g),$=d(w);xt($,()=>a.children??kt),c(w),c(g),c(k);var _=i(k,2);nt(_);var x=()=>s(v,!0),b=()=>s(v,!1),C=()=>s(y,!0),L=()=>s(y,!1);let j;var R=i(_,2);{var N=F=>{var M=$v(),P=d(M);P.__click=f;var W=d(P);{var Q=K=>{Qa(K,{width:22,get color(){return t().err}})},z=K=>{es(K,{width:22,get color(){return t().ok}})};O(W,K=>{e(I)==="password"?K(Q):K(z,!1)})}c(P),c(M),Oe("keypress",P,f),l(F,M)};O(R,F=>{h()&&F(N)})}var B=i(R,2);{var D=F=>{var M=_v(),P=d(M,!0);c(M),q(()=>{oe(M,"width",u()),oe(M,"color",t().err),Y(P,o())}),ue(7,M,()=>be,()=>({duration:250})),l(F,M)};O(B,F=>{o()&&F(D)})}c(A),q(()=>{oe(A,"width",`calc(${u()??""} + 12px)`),oe(g,"background",t().bg),ce(w,"for",r()),j=pa(_,j,{type:e(I),onmouseenter:x,onmouseleave:b,onfocus:C,onblur:L,autocomplete:"off",name:r(),value:m(),...E},"svelte-115vejc"),oe(_,"width",u()),oe(_,"background",(e(v)||e(y),t().bg)),oe(_,"border",e(y)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),oe(_,"color",t().text),oe(_,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),l(p,A),ie()}ot(["click"]);var xv=T('<img alt="No Logo Available">');function ps(p,a){le(a,!0);var t=xv();q(()=>ce(t,"src",`/auth/v1/clients/${a.clientId}/logo?${zt(6)}`)),l(p,t),ie()}var Ev=T('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function Iv(p,a){le(a,!0);let t="This is an E-Mail error",o="This is a password error";var r=Ev(),h=i(ee(r),2),m=d(h),u=d(m),E=d(u);{var I=w=>{ps(w,{get clientId(){return a.clientId}})};O(E,w=>{a.isLoading||w(I)})}c(u),c(m);var v=i(m,4);hs(v,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return a.colors},children:(w,$)=>{G();var _=V("E-MAIL");l(w,_)},$$slots:{default:!0}});var y=i(v,2);hs(y,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return o},get colors(){return a.colors},children:(w,$)=>{G();var _=V("E-MAIL");l(w,_)},$$slots:{default:!0}});var f=i(y,2),A=d(f);_a(A,{get colors(){return a.colors},level:1});var k=i(A,2);_a(k,{get colors(){return a.colors},level:2});var g=i(k,2);_a(g,{get colors(){return a.colors},level:3}),c(f),c(h),q(()=>{oe(h,"color",a.colors.text),oe(h,"border",`1px solid ${a.colors.gmid??""}`),oe(h,"background",a.colors.bg)}),l(p,r),ie()}var Sv=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function Tv(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=Sv();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var Cv=(p,a)=>e(a).click(),Av=(p,a)=>e(a).click(),Lv=(p,a)=>a(p),Nv=T('<div class="container svelte-jso5mh"><div role="button" tabindex="0" class="btn svelte-jso5mh"><!></div> <div role="button" tabindex="0" class="text noselect font-label svelte-jso5mh"> </div> <input class="imageInput svelte-jso5mh" type="file" accept=".jpg, .jpeg, .png, .svg"></div>');function ms(p,a){let t=U(a,"text",3,"UPLOAD LOGO"),o=U(a,"image",15),r=S(void 0);async function h(f){o(f.target.files[0])}var m=Nv(),u=d(m);u.__click=[Cv,r];var E=d(u);Tv(E,{width:22}),c(u);var I=i(u,2);I.__click=[Av,r];var v=d(I,!0);c(I);var y=i(I,2);y.__change=[Lv,h],fa(y,f=>s(r,f),()=>e(r)),c(m),q(()=>Y(v,t())),Oe("keypress",u,()=>e(r).click()),Oe("keypress",I,()=>e(r).click()),l(p,m)}ot(["click","change"]);var Rv=T('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),Dv=T('<div class="preview svelte-11vvvzr"><!></div>'),jv=T('<div class="success svelte-11vvvzr">Success</div>'),Ov=T('<div class="err svelte-11vvvzr"> </div>'),Mv=T(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function Pv(p,a){le(a,!0);let t=U(a,"client",19,()=>({})),o=S(void 0),r=S(void 0),h=S(!1),m=S(""),u=S(!1),E=S(void 0),I=S(n({})),v=S(n({}));const y=He().shape({act1:he().trim().matches(wt,"only valid CSS color"),act1a:he().trim().matches(wt,"only valid CSS color"),act2:he().trim().matches(wt,"only valid CSS color"),act2a:he().trim().matches(wt,"only valid CSS color"),acnt:he().trim().matches(wt,"only valid CSS color"),acnta:he().trim().matches(wt,"only valid CSS color"),ok:he().trim().matches(wt,"only valid CSS color"),err:he().trim().matches(wt,"only valid CSS color"),glow:he().trim().matches(wt,"only valid CSS color"),gmid:he().trim().matches(wt,"only valid CSS color"),ghigh:he().trim().matches(wt,"only valid CSS color"),text:he().trim().matches(wt,"only valid CSS color"),bg:he().trim().matches(wt,"only valid CSS color")});Le(async()=>{await f()}),Ra(()=>{e(E)&&clearTimeout(e(E))});async function f(){let P=await Dr(t().id);if(P.ok){let W=await P.json();s(o,n(W)),s(v,n(W))}else{let W=await P.json();s(m,n(W.message))}}async function A(){if(s(m,""),s(h,!0),!await w())return;let P=await jr(t().id,e(v));if(P.ok)s(u,!0);else{let W=await P.json();s(m,n(W.message))}s(h,!1)}async function k(){s(m,""),s(h,!0);let P=await Or(t().id);if(P.ok)await Pr(t().id),await f(),s(u,!0);else{let W=await P.json();s(m,n(W.message))}s(h,!1)}async function g(P){s(h,!0),await Vt();let W=await Mr(t().id,P);if(!W.ok){let Q=await W.json();console.error(Q.message)}s(h,!1)}async function w(){try{await y.validate(e(v),{abortEarly:!1}),s(I,n({}))}catch(P){return s(I,n(Xe(P))),!1}return s(o,n(e(v))),!0}Te(()=>{e(u)&&s(E,n(setTimeout(()=>{s(u,!1)},3e3)))}),Te(()=>{e(r)&&g(e(r))});var $=Mv(),_=i(d($),2),x=d(_);{var b=P=>{var W=Rv(),Q=ee(W),z=d(Q),K=d(z);ne(K,{autocomplete:"off",placeholder:"act1",get value(){return e(v).act1},set value(te){e(v).act1=te},get error(){return e(I).act1},set error(te){e(I).act1=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("act1");l(te,Fe)},$$slots:{default:!0}});var J=i(K,2),Z=d(J);nt(Z);var re=i(Z,2);c(J),c(z);var ve=i(z,2),$e=d(ve);ne($e,{autocomplete:"off",placeholder:"act1a",get value(){return e(v).act1a},set value(te){e(v).act1a=te},get error(){return e(I).act1a},set error(te){e(I).act1a=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("act1a");l(te,Fe)},$$slots:{default:!0}});var _e=i($e,2),pe=d(_e);nt(pe);var je=i(pe,2);c(_e),c(ve);var ge=i(ve,2),de=d(ge);ne(de,{autocomplete:"off",placeholder:"act2",get value(){return e(v).act2},set value(te){e(v).act2=te},get error(){return e(I).act2},set error(te){e(I).act2=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("act2");l(te,Fe)},$$slots:{default:!0}});var we=i(de,2),ye=d(we);nt(ye);var Me=i(ye,2);c(we),c(ge);var Ce=i(ge,2),xe=d(Ce);ne(xe,{autocomplete:"off",placeholder:"act2a",get value(){return e(v).act2a},set value(te){e(v).act2a=te},get error(){return e(I).act2a},set error(te){e(I).act2a=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("act2a");l(te,Fe)},$$slots:{default:!0}});var Re=i(xe,2),X=d(Re);nt(X);var Ie=i(X,2);c(Re),c(Ce);var fe=i(Ce,2),Ue=d(fe);ne(Ue,{autocomplete:"off",placeholder:"acnt",get value(){return e(v).acnt},set value(te){e(v).acnt=te},get error(){return e(I).acnt},set error(te){e(I).acnt=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("acnt");l(te,Fe)},$$slots:{default:!0}});var Je=i(Ue,2),rt=d(Je);nt(rt);var ct=i(rt,2);c(Je),c(fe);var We=i(fe,2),Ke=d(We);ne(Ke,{autocomplete:"off",placeholder:"acnta",get value(){return e(v).acnta},set value(te){e(v).acnta=te},get error(){return e(I).acnta},set error(te){e(I).acnta=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("acnta");l(te,Fe)},$$slots:{default:!0}});var it=i(Ke,2),It=d(it);nt(It);var $t=i(It,2);c(it),c(We);var Qe=i(We,2),et=d(Qe);ne(et,{autocomplete:"off",placeholder:"ok",get value(){return e(v).ok},set value(te){e(v).ok=te},get error(){return e(I).ok},set error(te){e(I).ok=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("ok");l(te,Fe)},$$slots:{default:!0}});var gt=i(et,2),ht=d(gt);nt(ht);var Ct=i(ht,2);c(gt),c(Qe);var at=i(Qe,2),st=d(at);ne(st,{autocomplete:"off",placeholder:"err",get value(){return e(v).err},set value(te){e(v).err=te},get error(){return e(I).err},set error(te){e(I).err=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("err");l(te,Fe)},$$slots:{default:!0}});var se=i(st,2),Ae=d(se);nt(Ae);var Pe=i(Ae,2);c(se),c(at),c(Q);var H=i(Q,2),Ee=d(H),Ne=d(Ee);ne(Ne,{autocomplete:"off",placeholder:"glow",get value(){return e(v).glow},set value(te){e(v).glow=te},get error(){return e(I).glow},set error(te){e(I).glow=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("glow");l(te,Fe)},$$slots:{default:!0}});var At=i(Ne,2),ae=d(At);nt(ae);var Ge=i(ae,2);c(At),c(Ee);var ze=i(Ee,2),Ut=d(ze);ne(Ut,{autocomplete:"off",placeholder:"gmid",get value(){return e(v).gmid},set value(te){e(v).gmid=te},get error(){return e(I).gmid},set error(te){e(I).gmid=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("gmid");l(te,Fe)},$$slots:{default:!0}});var Zt=i(Ut,2),Kt=d(Zt);nt(Kt);var Ot=i(Kt,2);c(Zt),c(ze);var Ft=i(ze,2),xa=d(Ft);ne(xa,{autocomplete:"off",placeholder:"ghigh",get value(){return e(v).ghigh},set value(te){e(v).ghigh=te},get error(){return e(I).ghigh},set error(te){e(I).ghigh=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("ghigh");l(te,Fe)},$$slots:{default:!0}});var Ea=i(xa,2),sa=d(Ea);nt(sa);var _s=i(sa,2);c(Ea),c(Ft);var ra=i(Ft,2),Ia=d(ra);ne(Ia,{autocomplete:"off",placeholder:"text",get value(){return e(v).text},set value(te){e(v).text=te},get error(){return e(I).text},set error(te){e(I).text=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("text");l(te,Fe)},$$slots:{default:!0}});var Sa=i(Ia,2),la=d(Sa);nt(la);var ks=i(la,2);c(Sa),c(ra);var ia=i(ra,2),Ta=d(ia);ne(Ta,{autocomplete:"off",placeholder:"bg",get value(){return e(v).bg},set value(te){e(v).bg=te},get error(){return e(I).bg},set error(te){e(I).bg=te},$$events:{input:w},children:(te,_t)=>{G();var Fe=V("bg");l(te,Fe)},$$slots:{default:!0}});var Ca=i(Ta,2),na=d(Ca);nt(na);var xs=i(na,2);c(Ca),c(ia);var Aa=i(ia,2),La=d(Aa);ms(La,{get image(){return e(r)},set image(te){s(r,n(te))}});var Es=i(La,2);{var Is=te=>{ps(te,{get clientId(){return t().id}})};O(Es,te=>{e(h)||te(Is)})}c(Aa),c(H),q(()=>{oe(re,"background",e(v).act1),oe(je,"background",e(v).act1a),oe(Me,"background",e(v).act2),oe(Ie,"background",e(v).act2a),oe(ct,"background",e(v).acnt),oe($t,"background",e(v).acnta),oe(Ct,"background",e(v).ok),oe(Pe,"background",e(v).err),oe(Ge,"background",e(v).glow),oe(Ot,"background",e(v).gmid),oe(_s,"background",e(v).ghigh),oe(ks,"background",e(v).text),oe(xs,"background",e(v).bg)}),dt(Z,()=>e(v).act1,te=>e(v).act1=te),dt(pe,()=>e(v).act1a,te=>e(v).act1a=te),dt(ye,()=>e(v).act2,te=>e(v).act2=te),dt(X,()=>e(v).act2a,te=>e(v).act2a=te),dt(rt,()=>e(v).acnt,te=>e(v).acnt=te),dt(It,()=>e(v).acnta,te=>e(v).acnta=te),dt(ht,()=>e(v).ok,te=>e(v).ok=te),dt(Ae,()=>e(v).err,te=>e(v).err=te),dt(ae,()=>e(v).glow,te=>e(v).glow=te),dt(Kt,()=>e(v).gmid,te=>e(v).gmid=te),dt(sa,()=>e(v).ghigh,te=>e(v).ghigh=te),dt(la,()=>e(v).text,te=>e(v).text=te),dt(na,()=>e(v).bg,te=>e(v).bg=te),l(P,W)};O(x,P=>{e(v)&&P(b)})}var C=i(x,2);{var L=P=>{var W=Dv(),Q=d(W);Iv(Q,{get clientId(){return t().id},get isLoading(){return e(h)},get colors(){return e(o)},set colors(z){s(o,n(z))}}),c(W),l(P,W)};O(C,P=>{e(o)&&P(L)})}c(_);var j=i(_,2),R=d(j);Se(R,{level:1,get isLoading(){return e(h)},set isLoading(P){s(h,n(P))},$$events:{click:A},children:(P,W)=>{G();var Q=V("SAVE");l(P,Q)},$$slots:{default:!0}});var N=i(R,2);Se(N,{level:3,get isLoading(){return e(h)},set isLoading(P){s(h,n(P))},$$events:{click:k},children:(P,W)=>{G();var Q=V("RESET");l(P,Q)},$$slots:{default:!0}});var B=i(N,2);{var D=P=>{var W=jv();l(P,W)};O(B,P=>{e(u)&&P(D)})}var F=i(B,2);{var M=P=>{var W=Ov(),Q=d(W,!0);c(W),q(()=>Y(Q,e(m))),l(P,W)};O(F,P=>{e(m)&&P(M)})}c(j),c($),l(p,$),ie()}var zv=T('<div class="data font-mono svelte-115hohv"> </div>'),Uv=T('<div class="data svelte-115hohv"> </div>'),Wv=T('<div class="header svelte-115hohv"><!> <!></div>'),qv=T("<div><!></div>"),Gv=T("<div><!></div>"),Bv=T("<div><!></div>"),Kv=T("<div><!></div>"),Fv=T("<div><!> <!></div>");function Vv(p,a){le(a,!0);let t=U(a,"client",31,()=>n({})),o=U(a,"onSave",15),r=S(void 0);const h=["Config","Secret","Branding","Delete"];let m=S(n(h[0]));const u=200,E=u/2;function I(){s(r,!1),o()()}vt(p,{get show(){return e(r)},set show(v){s(r,n(v))},header:v=>{var y=Wv(),f=d(y);Ze(f,{text:"Client ID",children:(g,w)=>{var $=zv(),_=d($,!0);c($),q(()=>Y(_,t().id)),l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{Ze(g,{text:"Client Name",children:(w,$)=>{var _=Uv(),x=d(_,!0);c(_),q(()=>Y(x,t().name)),l(w,_)},$$slots:{default:!0}})};O(A,g=>{t().name&&g(k)})}c(y),l(v,y)},body:v=>{var y=Fv(),f=d(y);Dt(f,{labels:h,get selected(){return e(m)},set selected(w){s(m,n(w))}});var A=i(f,2);{var k=w=>{var $=qv(),_=d($);vv(_,{get client(){return t()},set client(x){t(x)},get onSave(){return o()},set onSave(x){o(x)}}),c($),ue(5,$,()=>be,()=>({delay:E,duration:u})),ue(6,$,()=>be,()=>({duration:u})),l(w,$)},g=w=>{var $=me(),_=ee($);{var x=C=>{var L=Gv(),j=d(L);dv(j,{get client(){return t()}}),c(L),ue(5,L,()=>be,()=>({delay:E,duration:u})),ue(6,L,()=>be,()=>({duration:u})),l(C,L)},b=C=>{var L=me(),j=ee(L);{var R=B=>{var D=Bv(),F=d(D);Pv(F,{get client(){return t()}}),c(D),ue(5,D,()=>be,()=>({delay:E,duration:u})),ue(6,D,()=>be,()=>({duration:u})),l(B,D)},N=B=>{var D=me(),F=ee(D);{var M=P=>{var W=Kv(),Q=d(W);fv(Q,{get client(){return t()},onSave:I}),c(W),ue(5,W,()=>be,()=>({delay:E,duration:u})),ue(6,W,()=>be,()=>({duration:u})),l(P,W)};O(F,P=>{e(m)==="Delete"&&P(M)},!0)}l(B,D)};O(j,B=>{e(m)==="Branding"?B(R):B(N,!1)},!0)}l(C,L)};O(_,C=>{e(m)==="Secret"?C(x):C(b,!1)},!0)}l(w,$)};O(A,w=>{e(m)==="Config"?w(k):w(g,!1)})}c(y),l(v,y)},$$slots:{header:!0,body:!0}}),ie()}var Jv=T('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),Yv=T('<div class="success svelte-gbj18i">Success</div>'),Xv=T('<div class="mainErr err svelte-gbj18i"> </div>'),Hv=T('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function Zv(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1),o=S(void 0),r=n({id:"",name:"",confidential:!0,redirect_uris:[]}),h=S(""),m=S(!1),u=S(void 0),E=S(n({}));const I=He().shape({id:he().required("Client ID is required").trim().matches(Vs,"Can only contain characters, numbers and '-'"),name:he().trim().nullable().matches(Qt,"Can only contain characters, numbers and '-'")});let v=S(void 0),y=S(void 0);const f="330px";Te(()=>{e(m)&&s(u,n(setTimeout(()=>{a.onSave(),s(m,!1),s(o,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function A(){if(s(h,""),!await k()||!e(v)()||!e(y)()){s(h,"Invalid input");return}let g=r;g.name||(g.name=void 0);let w=await Lr(g);if(w.ok)s(m,!0);else{let $=await w.json();s(h,n($.message))}}async function k(){try{return await I.validate(r,{abortEarly:!1}),s(E,n({})),!0}catch(g){return s(E,n(Xe(g))),!1}}vt(p,{get idx(){return t()},set idx(g){t(g)},get show(){return e(o)},set show(g){s(o,n(g))},header:g=>{var w=Jv();l(g,w)},body:g=>{var w=Hv(),$=d(w);ne($,{autocomplete:"off",placeholder:"Client ID",width:f,get value(){return r.id},set value(M){r.id=M},get error(){return e(E).id},set error(M){e(E).id=M},$$events:{input:k},children:(M,P)=>{G();var W=V("CLIENT ID");l(M,W)},$$slots:{default:!0}});var _=i($,2);ne(_,{autocomplete:"off",placeholder:"Client Name",width:f,get value(){return r.name},set value(M){r.name=M},get error(){return e(E).name},set error(M){e(E).name=M},$$events:{input:k},children:(M,P)=>{G();var W=V("NAME");l(M,W)},$$slots:{default:!0}});var x=i(_,2);Bt(x,{style:`width: ${f}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return r.redirect_uris},set values(M){r.redirect_uris=M},get validate(){return e(v)},set validate(M){s(v,n(M))},children:(M,P)=>{G();var W=V("REDIRECT URI");l(M,W)},$$slots:{default:!0}});var b=i(x,2);Bt(b,{style:`width: ${f}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return r.post_logout_redirect_uris},set values(M){r.post_logout_redirect_uris=M},get validate(){return e(y)},set validate(M){s(y,n(M))},children:(M,P)=>{G();var W=V("POST LOGOUT REDIRECT URI");l(M,W)},$$slots:{default:!0}});var C=i(b,2),L=i(d(C),2),j=d(L);Ve(j,{get selected(){return r.confidential},set selected(M){r.confidential=M}}),c(L),c(C);var R=i(C,2);Se(R,{level:1,width:"4rem",$$events:{click:A},children:(M,P)=>{G();var W=V("SAVE");l(M,W)},$$slots:{default:!0}});var N=i(R,2);{var B=M=>{var P=Yv();l(M,P)};O(N,M=>{e(m)&&M(B)})}var D=i(N,2);{var F=M=>{var P=Xv(),W=d(P,!0);c(P),q(()=>Y(W,e(h))),l(M,P)};O(D,M=>{e(h)&&M(F)})}c(w),l(g,w)},$$slots:{header:!0,body:!0}}),ie()}var Qv=T('<div class="svelte-nj6lei"><!></div>'),ec=T(' <div class="content"><!> <!> <div id="clients" class="svelte-nj6lei"></div> <!> <div style="height: 20px"></div></div>',1);function tc(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=S(""),u=[{label:"ID",callback:(x,b)=>x.id.toLowerCase().includes(b.toLowerCase())}],E=[{label:"ID",callback:(x,b)=>x.id.localeCompare(b.id)}];Le(()=>{I(),v()});async function I(){let x=await Ar();if(!x.ok)s(t,"Error fetching clients: "+x.body.message);else{let b=await x.json();s(o,n([...b]))}}async function v(){let x=await ns();if(!x.ok)s(t,"Error fetching scopes: "+x.body.message);else{let b=await x.json();Ol.set(b),os.set(b.map(C=>C.name))}}function y(){I(),v(),s(m,"")}G();var f=ec(),A=ee(f),k=i(A),g=d(k);Lt(g,{get items(){return e(o)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(x){s(r,n(x))},get search(){return e(m)},set search(x){s(m,n(x))}});var w=i(g,2);Zv(w,{onSave:y});var $=i(w,2);qe($,23,()=>e(h),x=>x.id,(x,b,C)=>{var L=Qv(),j=d(L);Vv(j,{onSave:y,get client(){return e(h)[e(C)]},set client(R){e(h)[e(C)]=R}}),c(L),l(x,L)}),c($);var _=i($,2);jt(_,{get items(){return e(r)},set items(x){s(r,n(x))},get resItems(){return e(h)},set resItems(x){s(h,n(x))}}),G(2),c(k),q(()=>Y(A,`${e(t)??""} `)),l(p,f),ie()}var ac=T('<div class="uid svelte-psgb3d"> </div>'),sc=T('<div class="ip svelte-psgb3d"> </div>'),rc=T('<div class="date svelte-psgb3d"> </div>'),lc=T('<div class="header svelte-psgb3d"><!> <div class="header svelte-psgb3d"><!> <!></div></div>'),ic=T('<div class="details svelte-psgb3d"><div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Session ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">User ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Expires:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Last Seen:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">State:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">IP:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">MFA:</div> <!></div></div>'),nc=T('<div class="container svelte-psgb3d"><!></div>');function fs(p,a){le(a,!0);let t=U(a,"session",27,()=>n({})),o=U(a,"now",11,0);var r=nc(),h=d(r);vt(h,{header:m=>{var u=lc(),E=d(u);Ze(E,{text:"User ID",children:(f,A)=>{var k=ac(),g=d(k,!0);c(k),q(()=>Y(g,t().user_id)),l(f,k)},$$slots:{default:!0}});var I=i(E,2),v=d(I);Ze(v,{text:"Peer IP",children:(f,A)=>{var k=sc(),g=d(k,!0);c(k),q(()=>Y(g,t().remote_ip)),l(f,k)},$$slots:{default:!0}});var y=i(v,2);Ze(y,{text:"Last Seen",children:(f,A)=>{var k=rc(),g=d(k,!0);q(()=>Y(g,pt(t().last_seen))),c(k),l(f,k)},$$slots:{default:!0}}),c(I),c(u),l(m,u)},body:m=>{var u=ic(),E=d(u),I=i(d(E));c(E);var v=i(E,2),y=i(d(v));c(v);var f=i(v,2),A=i(d(f));q(()=>Y(A,` ${pt(t().exp)??""}`)),c(f);var k=i(f,2),g=i(d(k));q(()=>Y(g,` ${pt(t().last_seen)??""}`)),c(k);var w=i(k,2),$=i(d(w));c(w);var _=i(w,2),x=i(d(_));c(_);var b=i(_,2),C=i(d(b),2);ta(C,{get check(){return t().is_mfa}}),c(b),c(u),q(()=>{Y(I,` ${t().id??""}`),Y(y,` ${t().user_id??""}`),Y($,` ${t().state??""}`),Y(x,` ${t().remote_ip??""}`)}),l(m,u)},$$slots:{header:!0,body:!0}}),c(r),q(()=>St(r,"expired",t().exp<o())),l(p,r),ie()}var oc=T('<div class="svelte-1rjd8yh"><!></div>'),vc=T('<div class="svelte-1rjd8yh"><!></div>'),cc=T('<div class="content"><div class="row svelte-1rjd8yh"><!> <div class="button svelte-1rjd8yh"><!></div></div> <div id="sessions" class="svelte-1rjd8yh"><!></div> <!></div>');function dc(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=S(Date.now()/1e3),u=S(""),E=S(!1),I=S(15),v=S(""),y=S(1),f=[{label:"User ID",callback:(W,Q)=>{var z;return(z=W.user_id)==null?void 0:z.toLowerCase().includes(Q.toLowerCase())}},{label:"Session ID",callback:(W,Q)=>W.id.toLowerCase().includes(Q.toLowerCase())},{label:"IP",callback:(W,Q)=>{var z;return(z=W.remote_ip)==null?void 0:z.toLowerCase().includes(Q.toLowerCase())}}],A=[{label:"Expires",callback:(W,Q)=>W.exp-Q.exp},{label:"Last Seen",callback:(W,Q)=>W.last_seen-Q.last_seen},{label:"Session ID",callback:(W,Q)=>W.id.localeCompare(Q.id)},{label:"User ID",callback:(W,Q)=>{var z;return(z=W.user_id)==null?void 0:z.localeCompare(Q.user_id)}},{label:"State",callback:(W,Q)=>W.state.localeCompare(Q.state)},{label:"IP",callback:(W,Q)=>{var z;return(z=W.remote_ip)==null?void 0:z.localeCompare(Q.remote_ip)}}];Le(()=>{k()});async function k(W,Q,z,K){let J;if(W===!0?z&&e(y)===2?J=await ss(K||e(I),Q,void 0,!1):J=await ss(K||e(I),Q,e(v),z):J=await ll(),!J.ok)s(t,"Error fetching sessions: "+J.body.message);else{J.status===206?(s(I,n(Number.parseInt(J.headers.get("x-page-size"),10))),s(v,n(J.headers.get("x-continuation-token"))),s(u,"session")):s(u,"");let Z=await J.json();s(o,n([...Z])),s(r,n([...Z])),s(m,Date.now()/1e3)}}async function g(W,Q){await k(!0,W,Q),Q?s(y,e(y)-1):s(y,e(y)+1)}async function w(W){s(v,""),await k(!0,0,!1,W),s(y,1)}async function $(){let W=await il();if(W.ok)Ka();else{let Q=await W.json();s(t,n(Q.message))}s(m,n(new Date))}var _=cc(),x=d(_),b=d(x);Lt(b,{get items(){return e(o)},searchOptions:f,orderOptions:A,firstDirReverse:!0,get resItems(){return e(r)},set resItems(W){s(r,n(W))},get useServerSideIdx(){return e(u)},set useServerSideIdx(W){s(u,n(W))},get isSearchFiltered(){return e(E)},set isSearchFiltered(W){s(E,n(W))}});var C=i(b,2);oe(C,"margin-top","-10px");var L=d(C);Se(L,{level:3,$$events:{click:$},children:(W,Q)=>{G();var z=V("Invalidate All Sessions");l(W,z)},$$slots:{default:!0}}),c(C),c(x);var j=i(x),R=i(j),N=d(R);{var B=W=>{var Q=me(),z=ee(Q);qe(z,19,()=>e(o),K=>K.id,(K,J,Z)=>{var re=oc(),ve=d(re);fs(ve,{get session(){return e(o)[e(Z)]},set session($e){e(o)[e(Z)]=$e},get now(){return e(m)},set now($e){s(m,n($e))}}),c(re),l(K,re)}),l(W,Q)},D=W=>{var Q=me(),z=ee(Q);qe(z,19,()=>e(h),K=>K.id,(K,J,Z)=>{var re=vc(),ve=d(re);fs(ve,{get session(){return e(h)[e(Z)]},set session($e){e(h)[e(Z)]=$e},get now(){return e(m)},set now($e){s(m,n($e))}}),c(re),l(K,re)}),l(W,Q)};O(N,W=>{e(u)&&!e(E)?W(B):W(D,!1)})}c(R);var F=i(R,2);{var M=W=>{ds(W,{fetchPageCallback:g,sspPageSizeChange:w,get sspPage(){return e(y)},set sspPage(Q){s(y,n(Q))},get sspPageSize(){return e(I)},set sspPageSize(Q){s(I,n(Q))},get sspContinuationToken(){return e(v)},set sspContinuationToken(Q){s(v,n(Q))}})},P=W=>{jt(W,{get items(){return e(r)},set items(Q){s(r,n(Q))},get resItems(){return e(h)},set resItems(Q){s(h,n(Q))}})};O(F,W=>{e(u)&&!e(E)?W(M):W(P,!1)})}c(_),q(()=>Y(j,` ${e(t)??""} `)),l(p,_),ie()}var uc=T('<div class="header font-label svelte-1mi5990">ADD NEW USER ATTRIBUTE</div>'),hc=T('<div class="mainErr err svelte-1mi5990"> </div>'),pc=T('<div class="container svelte-1mi5990"><div class="desc svelte-1mi5990">You can add a new custom user attribute.<br> These attributes can be set for every user and mapped to an existing scope.<br> They are simple Key / JsonValue pairs.</div> <!> <!> <!> <!> <!></div>');function mc(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1),o=S(""),r=S(void 0),h=n({name:"",desc:""}),m=S(n({}));const u=He().shape({name:he().trim().required("Name is required").matches(Fa,"Invalid characters: [a-z0-9-_/]{2,32}"),desc:he().trim().matches(Va,"Invalid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});async function E(){if(!await I())return;s(o,"");let v=await dl(h);if(v.ok)s(r,!1),a.onSave();else{let y=await v.json();s(o,n(y.message))}}async function I(){try{return await u.validate(h,{abortEarly:!1}),s(m,n({})),!0}catch(v){return s(m,n(Xe(v))),!1}}vt(p,{get idx(){return t()},set idx(v){t(v)},get show(){return e(r)},set show(v){s(r,n(v))},header:v=>{var y=uc();l(v,y)},body:v=>{var y=pc(),f=i(d(y),2);ne(f,{autocomplete:"off",placeholder:"Name",get value(){return h.name},set value(_){h.name=_},get error(){return e(m).name},set error(_){e(m).name=_},$$events:{input:I},children:(_,x)=>{G();var b=V("NAME");l(_,b)},$$slots:{default:!0}});var A=i(f,2);ne(A,{autocomplete:"off",placeholder:"Description",get value(){return h.desc},set value(_){h.desc=_},get error(){return e(m).desc},set error(_){e(m).desc=_},$$events:{input:I},children:(_,x)=>{G();var b=V("DESCRIPTION");l(_,b)},$$slots:{default:!0}});var k=i(A,2);Se(k,{level:1,$$events:{click:E},children:(_,x)=>{G();var b=V("SAVE");l(_,b)},$$slots:{default:!0}});var g=i(k,2);O(g,_=>{});var w=i(g,2);{var $=_=>{var x=hc(),b=d(x,!0);c(x),q(()=>Y(b,e(o))),l(_,x)};O(w,_=>{e(o)&&_($)})}c(y),l(v,y)},$$slots:{header:!0,body:!0}}),ie()}var fc=T('<div class="success svelte-2o3w7i">Success</div>'),gc=T('<div class="mainErr err svelte-2o3w7i"> </div>'),wc=T('<div class="container svelte-2o3w7i"><!> <!> <!> <!> <!></div>');function yc(p,a){le(a,!0);let t=U(a,"attr",19,()=>({})),o=S(""),r=S(!1),h=S(void 0);Te(()=>{e(r)&&s(h,n(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=S(n({})),u=n({});const E=He().shape({name:he().trim().required("Name is required").matches(Fa,"Valid characters: [a-z0-9-_/]{2,32}"),desc:he().nullable().trim().matches(Va,"Valid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});Le(()=>{u.name=t().name,u.desc=t().desc});async function I(){if(s(o,""),!await v()){s(o,"Invalid input");return}let x={name:u.name,desc:u.desc},b=await ul(t().name,x);if(b.ok)s(r,!0);else{let C=await b.json();s(o,n(C.message))}}async function v(){try{return await E.validate(u,{abortEarly:!1}),s(m,n({})),!0}catch(x){return s(m,n(Xe(x))),!1}}var y=wc(),f=d(y);ne(f,{autocomplete:"off",placeholder:"Name",get value(){return u.name},set value(x){u.name=x},get error(){return e(m).name},set error(x){e(m).name=x},$$events:{input:v},children:(x,b)=>{G();var C=V("NAME");l(x,C)},$$slots:{default:!0}});var A=i(f,2);ne(A,{autocomplete:"off",placeholder:"Description",get value(){return u.desc},set value(x){u.desc=x},get error(){return e(m).desc},set error(x){e(m).desc=x},$$events:{input:v},children:(x,b)=>{G();var C=V("DESCRIPTION");l(x,C)},$$slots:{default:!0}});var k=i(A,2);Se(k,{level:1,width:"4rem",$$events:{click:I},children:(x,b)=>{G();var C=V("SAVE");l(x,C)},$$slots:{default:!0}});var g=i(k,2);{var w=x=>{var b=fc();l(x,b)};O(g,x=>{e(r)&&x(w)})}var $=i(g,2);{var _=x=>{var b=gc(),C=d(b,!0);c(b),q(()=>Y(C,e(o))),l(x,b)};O($,x=>{e(o)&&x(_)})}c(y),l(p,y),ie()}var bc=T('<div class="err svelte-1jljqe9"> </div>'),$c=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this custom attribute?</div> <!> <!></div>');function _c(p,a){le(a,!0);let t=U(a,"attr",19,()=>({})),o=S(!1),r=S("");async function h(){s(r,""),s(o,!0);let v=await hl(t().name);if(v.ok)a.onSave();else{let y=await v.json();s(r,n(y.message))}s(o,!1)}var m=$c(),u=i(d(m),2);Se(u,{level:1,get isLoading(){return e(o)},set isLoading(v){s(o,n(v))},$$events:{click:h},children:(v,y)=>{G();var f=V("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var I=v=>{var y=bc(),f=d(y,!0);c(y),q(()=>Y(f,e(r))),l(v,y)};O(E,v=>{e(r)&&v(I)})}c(m),l(p,m),ie()}var kc=T('<div class="data svelte-115hohv"> </div>'),xc=T('<div class="header svelte-115hohv"><!></div>'),Ec=T("<div><!></div>"),Ic=T("<div><!></div>"),Sc=T("<div><!> <!></div>");function Tc(p,a){le(a,!0);let t=U(a,"attr",27,()=>n({})),o=U(a,"onSave",15),r=S(void 0);const h=["Config","Delete"];let m=S(n(h[0]));const u=200,E=u/2;function I(){s(r,!1),o()()}vt(p,{get show(){return e(r)},set show(v){s(r,n(v))},header:v=>{var y=xc(),f=d(y);Ze(f,{text:"Custom Attribute Name",children:(A,k)=>{var g=kc(),w=d(g,!0);c(g),q(()=>Y(w,t().name)),l(A,g)},$$slots:{default:!0}}),c(y),l(v,y)},body:v=>{var y=Sc(),f=d(y);Dt(f,{labels:h,get selected(){return e(m)},set selected(w){s(m,n(w))}});var A=i(f,2);{var k=w=>{var $=Ec(),_=d($);yc(_,{get attr(){return t()},get onSave(){return o()},set onSave(x){o(x)}}),c($),ue(5,$,()=>be,()=>({delay:E,duration:u})),ue(6,$,()=>be,()=>({duration:u})),l(w,$)},g=w=>{var $=me(),_=ee($);{var x=b=>{var C=Ic(),L=d(C);_c(L,{get attr(){return t()},onSave:I}),c(C),ue(5,C,()=>be,()=>({delay:E,duration:u})),ue(6,C,()=>be,()=>({duration:u})),l(b,C)};O(_,b=>{e(m)==="Delete"&&b(x)},!0)}l(w,$)};O(A,w=>{e(m)==="Config"?w(k):w(g,!1)})}c(y),l(v,y)},$$slots:{header:!0,body:!0}}),ie()}var Cc=T('<div class="svelte-mjg702"><!></div>'),Ac=T(' <div class="content"><!> <!> <div id="attrs" class="svelte-mjg702"></div> <!> <div style="height: 20px"></div></div>',1);function Lc(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=S(""),u=[{label:"NAME",callback:(_,x)=>_.name.toLowerCase().includes(x.toLowerCase())}],E=[{label:"NAME",callback:(_,x)=>_.name.localeCompare(x.name)}];Le(()=>{I()});async function I(){let _=await ya();if(!_.ok)s(t,"Error fetching user attr: "+_.body.message);else{let x=await _.json();s(o,n([...x.values]))}}function v(){e(o).length<2&&(s(o,n([])),s(r,n([])),s(h,n([]))),I(),s(m,"")}G();var y=Ac(),f=ee(y),A=i(f),k=d(A);Lt(k,{get items(){return e(o)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(_){s(r,n(_))},get search(){return e(m)},set search(_){s(m,n(_))}});var g=i(k,2);mc(g,{onSave:v});var w=i(g,2);qe(w,23,()=>e(h),_=>_.name,(_,x,b)=>{var C=Cc(),L=d(C);Tc(L,{onSave:v,get attr(){return e(h)[e(b)]},set attr(j){e(h)[e(b)]=j}}),c(C),l(_,C)}),c(w);var $=i(w,2);jt($,{get items(){return e(r)},set items(_){s(r,n(_))},get resItems(){return e(h)},set resItems(_){s(h,n(_))}}),G(2),c(A),q(()=>Y(f,`${e(t)??""} `)),l(p,y),ie()}var Nc=T('<div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div></div>'),Rc=T('<div class="container svelte-151ox8b"><div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b">Time Taken (ms)</div> <div class="column svelte-151ox8b">t_cost</div> <div class="column svelte-151ox8b">m_cost</div> <div class="column svelte-151ox8b">p_cost</div></div> <!> <div style="height: 20px"></div></div>');function Dc(p,a){let t=U(a,"res",19,()=>[]);var o=Rc(),r=i(d(o),2);qe(r,17,t,ut,(h,m)=>{var u=Nc(),E=d(u),I=d(E,!0);c(E);var v=i(E,2),y=d(v,!0);c(v);var f=i(v,2),A=d(f,!0);c(f);var k=i(f,2),g=d(k,!0);c(k),c(u),q(()=>{Y(I,e(m).time_taken),Y(y,e(m).t_cost),Y(A,e(m).m_cost),Y(g,e(m).p_cost)}),l(h,u)}),G(2),c(o),l(p,o)}var jc=T('<div class="result svelte-1digv30"><!></div>'),Oc=T('<div class="wrapper svelte-1digv30"><div class="container svelte-1digv30"><!> <!> <!> <!></div> <!></div>');function Mc(p,a){le(a,!0);const t="170px";let o=S(!1),r=S(!1),h=S(void 0),m=S(void 0),u=n({targetTime:1e3,mCost:32768,pCost:2}),E=S(n({}));const I=He().shape({targetTime:yt().required("Target Time is required").min(500,"Cannot be lower than 500").max(99999,"Cannot be higher than 99999"),mCost:yt().min(32768,"Cannot be lower than 32768").max(1048576,"Cannot be higher than 1048576"),pCost:yt().min(2,"Cannot be lower than 2").max(1024,"Cannot be higher than 1024")});Te(()=>{e(r)&&e(h)&&s(m,n(window.innerHeight))});function v(b){b.code==="Enter"&&y()}async function y(){try{await I.validate(u,{abortEarly:!1}),s(E,n({}))}catch(j){s(E,n(Xe(j)));return}s(o,!0),s(r,!1);const b={target_time:Number.parseInt(u.targetTime),m_cost:Number.parseInt(u.mCost),p_cost:Number.parseInt(u.pCost)},C=await Jr(b),L=await C.json();C.ok?(s(h,n(L.results)),s(r,!0)):L.message,s(o,!1)}var f=Oc(),A=d(f),k=d(A);ne(k,{type:"number",autocomplete:"off",placeholder:"Target Time (ms)",width:t,get value(){return u.targetTime},set value(b){u.targetTime=b},get error(){return e(E).targetTime},set error(b){e(E).targetTime=b},$$events:{keypress:v},children:(b,C)=>{G();var L=V("TARGET TIME (ms)");l(b,L)},$$slots:{default:!0}});var g=i(k,2);ne(g,{type:"number",autocomplete:"off",placeholder:"m_cost (kB)",width:t,get value(){return u.mCost},set value(b){u.mCost=b},get error(){return e(E).mCost},set error(b){e(E).mCost=b},$$events:{keypress:v},children:(b,C)=>{G();var L=V("M_COST (kB)");l(b,L)},$$slots:{default:!0}});var w=i(g,2);ne(w,{type:"number",autocomplete:"off",placeholder:"p_cost",width:t,get value(){return u.pCost},set value(b){u.pCost=b},get error(){return e(E).pCost},set error(b){e(E).pCost=b},$$events:{keypress:v},children:(b,C)=>{G();var L=V("P_COST");l(b,L)},$$slots:{default:!0}});var $=i(w,2);Se($,{get isLoading(){return e(o)},level:1,$$events:{click:y},children:(b,C)=>{G();var L=V("CALCULATE");l(b,L)},$$slots:{default:!0}}),c(A);var _=i(A,2);{var x=b=>{var C=jc(),L=d(C);Dc(L,{get res(){return e(h)}}),c(C),l(b,C)};O(_,b=>{e(r)&&b(x)})}c(f),ar("y",()=>e(m),b=>s(m,n(b))),l(p,f),ie()}var Pc=T(`<div class="container svelte-6927oe"><h3>Argon2ID - Password Hashing</h3> <p>This utility helps you find the best argon2id settings for your platform.<br> Argon2id is currently the safest available password hashing algorithm. To use it to its fullest potential, it
        has
        to be tuned for each deployment.</p> <p><b>Important:These values need to be tuned on the final architecture!</b><br> They change depending on the capabilities of the system. The more powerful the system, the more safe these
        values
        can be.</p> <p>If you want a detailed introduction to argon2id, many sources exist online. This guide will just give very short
        overview about the values.<br> Three of them need to be configured:</p> <ul><li><b>m cost</b> <p>The <code class="svelte-6927oe">m_cost</code> defines the amount of <b>memory (in kB)</b>, which is used for the hashing.<br> The higher the value, the better, of course. But you need to keep in mind the servers resources.<br> When you hash 4 passwords at the same time, for instance, the backend needs <code class="svelte-6927oe">4 x m_cost</code> during the
                hashing. These resources must be available.</p> <p>Tuning <code class="svelte-6927oe">m_cost</code> is pretty easy. If you can give rauthy 1GB of memory for hashing operations,
                give it
                1GB. If you can sacrifice 4GB, give it 4GB.</p> <p><b>Important: You should never go below an <code class="svelte-6927oe">m_cost</code> of <code class="svelte-6927oe">32768</code></b>.</p></li> <li><b>p cost</b> <p>The <code class="svelte-6927oe">p_cost</code> defines the amount of <b>parallelism</b> for hashing.<br> This value most often tops out at ~8, which is the default for Rauthy.<br> <code class="svelte-6927oe">p_cost</code> does not affect the time needed for the calculation, if the resources are available.</p> <p>The general rule is:<br> Set the <code class="svelte-6927oe">p_cost</code> to twice the size of cores your have available.<br> For instance, if you have 4 cores available, set the <code class="svelte-6927oe">p_cost</code> to <code class="svelte-6927oe">8</code>.<br></p></li> <li><b>t cost</b> <p>The <code class="svelte-6927oe">t_cost</code> defines the amount of <b>time</b> for hashing.<br> This value is actually the only one, that needs tuning, since <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> are
                basically given by the environment.</p> <p>Tuning is easy: Set <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> accordingly and then increase <code class="svelte-6927oe">t_cost</code> as long as you have not reached your hashing-time-goal.</p></li></ul> <br> <h3>A word about Login Time</h3> <p>Generally, users want everything as fast as possible. When doing a safe login though, a time between 500 - 1000
        ms
        should not be a problem.<br> The login time must not be too short, since it would lower the strength of the hash, of course.</p> <p>To provide as much safety by default as possible, this utility does not allow you to go below 500 ms for the
        login
        time.</p> <br> <h3>Current values</h3> <p>The current values from the backend are the following:</p> <div><div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>m_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>p_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>t_cost</b>:</div> </div> <br> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>Login Time</b>:</div> </div> <p><i>Note:</i> The Login Time from the backend does only provide a good guideline after at least 5 successful
            logins, after
            rauthy has been started.<br> The base value is always 2000 ms after a fresh restart and will adjust over time with each successful login.</p> <b>Threads (p_cost) rauthy has access to</b> <br></div> <br> <h3>Parameter Calculation Utility</h3> <p>You can use this tool to approximate good values for your deployment.<br> Keep in mind, that this should be executed with rauthy in its final place with all final resources
        available.<br><br> You should execute this utility during load to not over tune.<br><br> <code class="svelte-6927oe">m_cost</code> is optional and the safe minimal value of <code class="svelte-6927oe">32768</code> would be chosen, if empty.<br> <code class="svelte-6927oe">p_cost</code> is optional and rauthy will utilize all threads it can see, if empty.<br></p> <!> <div style="height: 20px"></div></div>`);function zc(p,a){le(a,!0);let t=S(void 0),o=S(void 0),r=S(void 0);Le(()=>{h()});async function h(){let x=await Vr(),b=await x.json();x.ok?(s(t,n(b.argon2_params)),s(o,n(b.login_time)),s(r,n(b.num_cpus))):b.message}var m=Pc(),u=i(d(m),8);oe(u,"margin-left","-10px");var E=i(u,16),I=d(E),v=i(d(I));c(I);var y=i(I,2),f=i(d(y));c(y);var A=i(y,2),k=i(d(A));c(A);var g=i(A,4),w=i(d(g));c(g);var $=i(g,5);G(),c(E);var _=i(E,8);Mc(_,{}),G(2),c(m),q(()=>{var x,b,C;Y(v,` ${((x=e(t))==null?void 0:x.m_cost)??""}`),Y(f,` ${((b=e(t))==null?void 0:b.p_cost)??""}`),Y(k,` ${((C=e(t))==null?void 0:C.t_cost)??""}`),Y(w,` ${e(o)??""} ms`),Y($,`: ${e(r)??""}`)}),l(p,m),ie()}var Uc=T('<li class="font-mono"> </li>'),Wc=T('<div class="err svelte-3rk97c"> </div>'),qc=T('<div class="success svelte-3rk97c">Success</div>'),Gc=T(`<div class="wrapper svelte-3rk97c"><div class="desc svelte-3rk97c"><h3>Secrets Encryption Keys</h3> <p>These Keys are used for an additional encryption at rest, independently from any data store technology used
            under
            the hood. They are configured statically, but can be rotated and migrated on this page manually to maybe get
            rid
            of an old key, which is currently still in use in some places.</p> <p>The active key is statically set in the Rauthy config file / environment variables. It cannot be changed
            here
            dynamically.<br> <b>All new JWK encryption's will always use the currently active key.</b></p> <div class="valRow svelte-3rk97c"><div class="label svelte-3rk97c">Active Key:</div> <div class="value font-mono"> </div></div> <div class="keysBlock svelte-3rk97c"><div>Available Keys:</div> <ul></ul></div> <div class="migrateBlock svelte-3rk97c"><p>If you migrate all existing secrets, it might take a few seconds to finish, if you have a big
                dataset.<br> Manually migrate all existing encryption in the backend to key:</p> <!></div></div> <div class="btn svelte-3rk97c"><!></div> <!> <!></div>`);function Bc(p,a){le(a,!0);let t=S(""),o=S(!0),r=S(""),h=S(""),m=S(n([])),u=S(!1);Le(async()=>{E()});async function E(){let N=await Wr(),B=await N.json();N.ok?(s(r,n(B.active)),s(h,n(B.active)),s(m,n(B.keys))):s(t,n(B.message)),s(o,!1)}async function I(){s(o,!0),s(u,!1);let N={key_id:e(h)},B=await qr(N);if(B.ok)s(u,!0);else{let D=await B.json();s(t,n(D.message))}s(o,!1)}var v=Gc(),y=d(v),f=i(d(y),6),A=i(d(f),2),k=d(A,!0);c(A),c(f);var g=i(f,2),w=i(d(g),2);oe(w,"margin-left","-10px"),qe(w,21,()=>e(m),ut,(N,B)=>{var D=Uc(),F=d(D,!0);c(D),q(()=>Y(F,e(B))),l(N,D)}),c(w),c(g);var $=i(g,2),_=i(d($),2);Et(_,{get options(){return e(m)},width:"186px",get value(){return e(h)},set value(N){s(h,n(N))}}),c($),c(y);var x=i(y,2),b=d(x);Se(b,{get isLoading(){return e(o)},set isLoading(N){s(o,n(N))},$$events:{click:I},children:(N,B)=>{G();var D=V("MIGRATE");l(N,D)},$$slots:{default:!0}}),c(x);var C=i(x,2);{var L=N=>{var B=Wc(),D=d(B,!0);c(B),q(()=>Y(D,e(t))),l(N,B)};O(C,N=>{e(t)&&N(L)})}var j=i(C,2);{var R=N=>{var B=qc();l(N,B)};O(j,N=>{e(u)&&N(R)})}c(v),q(()=>Y(k,e(r))),l(p,v),ie()}var Kc=T('<div class="success svelte-10h0sak">Success</div>'),Fc=T('<div class="err svelte-10h0sak"> </div>'),Vc=T('<div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="desc svelte-10h0sak"><p>Validity for a new password.<br> Not Recently Used denied the last n used passwords.<br> Setting no value at all with disable the given option.</p></div> <div class="row svelte-10h0sak"><!> <!></div> <!> <!> <!>',1),Jc=T('<div class="wrapper svelte-10h0sak"><div class="desc svelte-10h0sak"><h3>Password Policy</h3> <p>Configure the password policy.<br> The policy is being applied to all passwords being set from this moment on.</p></div> <!></div>');function Yc(p,a){le(a,!0);const t="160px";let o=S(!1),r=S(""),h=S(!1),m=S(void 0),u=S(void 0),E=S(n({}));const I=He().shape({length_min:yt().required("Min Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),length_max:yt().required("Max Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),not_recently_used:yt().nullable().min(0,"Cannot be lower than 0").max(10,"Cannot be higher than 10"),valid_days:yt().nullable().min(0,"Cannot be lower than 0").max(3650,"Cannot be higher than 3650"),include_digits:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_lower_case:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_upper_case:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_special:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32")});Te(()=>{e(h)&&s(m,n(setTimeout(()=>{s(h,!1)},3e3)))}),Le(async()=>{if(!e(u)){let w=await za(),$=await w.json();w.ok?(s(u,n($)),e(u).length_min=$.length_min||0,e(u).length_max=$.length_max||0,e(u).include_digits=$.include_digits||0,e(u).include_lower_case=$.include_lower_case||0,e(u).include_upper_case=$.include_upper_case||0,e(u).include_special=$.include_special||0,e(u).length_max=$.length_max||0,e(u).valid_days=$.valid_days||0,e(u).not_recently_used=$.not_recently_used||0):s(r,n($.message))}});function v(w){w.code==="Enter"&&y()}async function y(){if(!await f())return;s(r,""),s(o,!0);let w=e(u);w.not_recently_used===0&&(w.not_recently_used=null),w.valid_days===0&&(w.valid_days=null),w.include_digits===0&&(w.include_digits=null),w.include_lower_case===0&&(w.include_lower_case=null),w.include_upper_case===0&&(w.include_upper_case=null),w.include_special===0&&(w.include_special=null);let $=await Yr(w);if($.ok)s(h,!0);else{let _=await $.json();s(r,n(_.message))}s(o,!1)}async function f(){try{return s(E,n({})),await I.validate(e(u),{abortEarly:!1}),e(u).length_min=Number.parseInt(e(u).length_min),e(u).length_max=Number.parseInt(e(u).length_max),e(u).include_digits=Number.parseInt(e(u).include_digits),e(u).include_lower_case=Number.parseInt(e(u).include_lower_case),e(u).include_upper_case=Number.parseInt(e(u).include_upper_case),e(u).include_special=Number.parseInt(e(u).include_special),e(u).length_max=Number.parseInt(e(u).length_max),e(u).valid_days=Number.parseInt(e(u).valid_days),e(u).not_recently_used=Number.parseInt(e(u).not_recently_used),e(u).length_max<e(u).length_min?(e(E).length_max="Max Length cannot be lower than Min Length",!1):e(u).include_digits+e(u).include_lower_case+e(u).include_upper_case+e(u).include_special>e(u).length_max?(e(E).length_max="The sum of all includes does not fit into Max Length",!1):!0}catch(w){return s(E,n(Xe(w))),!1}}var A=Jc(),k=i(d(A),2);{var g=w=>{var $=Vc(),_=ee($),x=d(_);ne(x,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_min},set value(J){e(u).length_min=J},get error(){return e(E).length_min},set error(J){e(E).length_min=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("MIN LENGTH");l(J,re)},$$slots:{default:!0}});var b=i(x,2);ne(b,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_max},set value(J){e(u).length_max=J},get error(){return e(E).length_max},set error(J){e(E).length_max=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("MAX LENGTH");l(J,re)},$$slots:{default:!0}}),c(_);var C=i(_,2),L=d(C);ne(L,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_lower_case},set value(J){e(u).include_lower_case=J},get error(){return e(E).include_lower_case},set error(J){e(E).include_lower_case=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("INCLUDE LOWERCASE");l(J,re)},$$slots:{default:!0}});var j=i(L,2);ne(j,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_upper_case},set value(J){e(u).include_upper_case=J},get error(){return e(E).include_upper_case},set error(J){e(E).include_upper_case=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("INCLUDE UPPERCASE");l(J,re)},$$slots:{default:!0}}),c(C);var R=i(C,2),N=d(R);ne(N,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_digits},set value(J){e(u).include_digits=J},get error(){return e(E).include_digits},set error(J){e(E).include_digits=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("INCLUDE DIGITS");l(J,re)},$$slots:{default:!0}});var B=i(N,2);ne(B,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_special},set value(J){e(u).include_special=J},get error(){return e(E).include_special},set error(J){e(E).include_special=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("INCLUDE SPECIAL");l(J,re)},$$slots:{default:!0}}),c(R);var D=i(R,4),F=d(D);ne(F,{type:"number",autocomplete:"off",width:t,get value(){return e(u).not_recently_used},set value(J){e(u).not_recently_used=J},get error(){return e(E).not_recently_used},set error(J){e(E).not_recently_used=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("NOT RECENTLY USED");l(J,re)},$$slots:{default:!0}});var M=i(F,2);ne(M,{type:"number",autocomplete:"off",width:t,get value(){return e(u).valid_days},set value(J){e(u).valid_days=J},get error(){return e(E).valid_days},set error(J){e(E).valid_days=J},$$events:{keypress:v,input:f},children:(J,Z)=>{G();var re=V("VALID FOR DAYS");l(J,re)},$$slots:{default:!0}}),c(D);var P=i(D,2);Se(P,{level:1,width:"4rem",get isLoading(){return e(o)},set isLoading(J){s(o,n(J))},$$events:{click:y},children:(J,Z)=>{G();var re=V("SAVE");l(J,re)},$$slots:{default:!0}});var W=i(P,2);{var Q=J=>{var Z=Kc();l(J,Z)};O(W,J=>{e(h)&&J(Q)})}var z=i(W,2);{var K=J=>{var Z=Fc(),re=d(Z,!0);c(Z),q(()=>Y(re,e(r))),l(J,Z)};O(z,J=>{e(r)&&J(K)})}l(w,$)};O(k,w=>{e(u)&&w(g)})}c(A),l(p,A),ie()}var Xc=T('<div class="details svelte-2yt27i"><div class="detailsInner svelte-2yt27i"><textarea class="font-mono text svelte-2yt27i"></textarea></div></div>'),Hc=T('<div role="none" class="cert svelte-2yt27i"><div class="data font-mono svelte-2yt27i"> </div> <div class="data right svelte-2yt27i"> </div> <!></div>');function Zc(p,a){le(a,!0);let t=S(!1);function o(){if(a.jwk.kty==="OKP")return a.jwk.crv;if(a.jwk.kty==="RSA"){let y;const f=a.jwk.n.length;return f>600?y=4096:f>400?y=3072:y=2048,`RSA ${y}`}return"unknown type"}var r=Hc(),h=d(r),m=d(h,!0);c(h);var u=i(h,2),E=d(u,!0);q(()=>Y(E,o())),c(u);var I=i(u,2);{var v=y=>{var f=Xc(),A=d(f),k=d(A);ma(k),ce(k,"rows",10),ce(k,"cols",40),q(()=>Qs(k,JSON.stringify(a.jwk,null,2))),c(A),c(f),q(()=>ce(k,"name",a.jwk.kid)),ue(7,f,()=>mt),l(y,f)};O(I,y=>{e(t)&&y(v)})}c(r),q(()=>Y(m,a.jwk.kid)),Oe("mouseenter",r,()=>s(t,!0)),Oe("mouseleave",r,()=>s(t,!1)),l(p,r),ie()}var Qc=T('<div class="success svelte-a4xw46">Success</div>'),ed=T('<div class="err svelte-a4xw46"> </div>'),td=T(`<div class="wrapper svelte-a4xw46"><div class="desc svelte-a4xw46"><h3>Json Web Keys</h3> <p>These are the Json Web Keys (JWKs) used for token singing.</p> <p>You can rotate them and generate a full new set. Depending on your deployment, this could take a few
            seconds.<br> New tokens will always be signed with the new / latest ones. The old keys will be cleaned up automatically,
            when
            there cannot be a token anymore that used the old key to not
            break any current token validation.</p></div> <!> <!> <!> <!></div>`);function ad(p,a){le(a,!0);let t=S(n([])),o=S(!1),r=S(""),h=S(!1),m=S(void 0);Te(()=>{e(h)&&s(m,n(setTimeout(()=>{s(h,!1)},3e3)))}),Le(()=>{e(t).length===0&&u()});async function u(){let w=await Cr(),$=await w.json();w.ok?s(t,n([...$.keys])):s(r,n($.message))}async function E(){s(r,""),s(o,!0);let w=await rl();if(w.ok)u(),s(h,!0);else{let $=await w.json();s(r,n($.message))}s(o,!1)}var I=td(),v=i(d(I),2);qe(v,19,()=>e(t),w=>w.kid,(w,$,_)=>{Zc(w,{get jwk(){return e(t)[e(_)]},set jwk(x){e(t)[e(_)]=x}})});var y=i(v,2);Se(y,{level:1,get isLoading(){return e(o)},set isLoading(w){s(o,n(w))},$$events:{click:E},children:(w,$)=>{G();var _=V("ROTATE KEYS");l(w,_)},$$slots:{default:!0}});var f=i(y,2);{var A=w=>{var $=Qc();l(w,$)};O(f,w=>{e(h)&&w(A)})}var k=i(f,2);{var g=w=>{var $=ed(),_=d($,!0);c($),q(()=>Y(_,e(r))),l(w,$)};O(k,w=>{e(r)&&w(g)})}c(I),l(p,I),ie()}var sd=T('<div class="content"><div class="container svelte-5h65jg"><!> <!></div></div>');function rd(p){const a=["Password Policy","JWKS","Argon2 Parameter","Encryption Keys"];let t=S(n(a[0]));var o=sd(),r=d(o),h=d(r);Dt(h,{labels:a,get selected(){return e(t)},set selected(I){s(t,n(I))}});var m=i(h,2);{var u=I=>{Yc(I,{})},E=I=>{var v=me(),y=ee(v);{var f=k=>{ad(k,{})},A=k=>{var g=me(),w=ee(g);{var $=x=>{zc(x,{})},_=x=>{var b=me(),C=ee(b);{var L=j=>{Bc(j,{})};O(C,j=>{e(t)==="Encryption Keys"&&j(L)},!0)}l(x,b)};O(w,x=>{e(t)==="Argon2 Parameter"?x($):x(_,!1)},!0)}l(k,g)};O(y,k=>{e(t)==="JWKS"?k(f):k(A,!1)},!0)}l(I,v)};O(m,I=>{e(t)==="Password Policy"?I(u):I(E,!1)})}c(r),c(o),l(p,o)}var ld=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"></path></svg>');function id(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=ld();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var nd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>');function od(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=nd();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var vd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"></path></svg>');function cd(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=vd();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var dd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"></path></svg>');function ud(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=dd();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var hd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>');function pd(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=hd();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var md=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path></svg>');function gs(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=md();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var fd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"></path></svg>');function gd(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=fd();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var wd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z"></path></svg>');function yd(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=wd();ce(r,"stroke-width",1.5),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var bd=Ye(`<svg width="100%" height="100%" viewBox="0 0 512 138" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,0,-11)"><g transform="matrix(1,0,0,1,0,-176)"><g transform="matrix(0.920325,0,0,1.84151,45.9279,26.459)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:rgb(4,7,11);"></rect></g><g transform="matrix(1.93472,0,0,1.82732,8.35618,28.7533)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(4,7,11);stroke:rgb(4,7,11);stroke-width:1.06px;"></rect></g><g transform="matrix(1.82732,0,0,1.82732,-160.822,70.1806)"><g transform="matrix(72,0,0,72,227.174,123.417)"></g><text x="128.982px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">r<tspan x="152.994px 188.537px " y="123.417px 123.417px ">au</tspan></text></g><g transform="matrix(1,0,0,1.01617,-1.42109e-14,-5.24492)"><path d="M440.936,322.643L439.204,324.266L255.482,324.266L255.482,305.721L440.936,305.721L440.936,322.643Z" style="fill:url(#_Linear1);"></path></g><g transform="matrix(0.920191,0,0,1.84121,46.2464,-91.3383)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:url(#_Linear2);"></rect></g><g transform="matrix(1.97598,0,0,1.84619,190.187,26.062)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(43,65,107);"></rect></g><path d="M439.204,187.734L440.557,189.007L440.557,206.279L256,206.279L256,187.734L439.204,187.734Z" style="fill:rgb(43,65,107);"></path><g transform="matrix(1.82732,0,0,1.82732,-154.661,70.1806)"><g transform="matrix(72,0,0,72,323.045,123.417)"></g><text x="226.646px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">th<tspan x="288.943px " y="123.417px ">y</tspan></text></g><g transform="matrix(2,0,0,2,0,0)"><path d="M219.602,93.867L256,128L219.602,162.133L219.602,93.867Z" style="fill:rgb(43,65,107);"></path></g><g transform="matrix(2,0,0,1.95739,0,3.99997)"><path d="M36.398,93.867L0,93.867L35.908,128.524L0,163.619L36.398,163.619" style="fill:rgb(4,7,11);"></path></g></g></g><defs><linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(185.454,0,0,18.5443,255.482,314.994)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient><linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(200.517,0,0,10.1483,27.7414,156.645)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient></defs></svg>`);function $d(p){var a=bd();l(p,a)}var _d=T(`<div class="content"><div class="container svelte-x4sug2"><h2>Documentation</h2> <p class="svelte-x4sug2">For general documentation about Rauthy itself, you should take a look at the <a href="https://sebadob.github.io/rauthy/" target="_blank" class="svelte-x4sug2">Rauthy Book</a></p> <p class="svelte-x4sug2">If you want to integrate an external application and use Rauthy's REST API, take a look at the <a href="/docs/v1/swagger-ui/" target="_blank" class="svelte-x4sug2">Swagger UI</a><br> <b>Note:</b> Depending on the backend configuration, the Swagger UI may not be exposed publicly at this point.
            It is however by default available via the internal <code>/metrics</code> HTTP server to not expose any information.</p> <p class="svelte-x4sug2">The source code can be found in <a href="https://github.com/sebadob/rauthy" target="_blank" class="svelte-x4sug2">Github</a></p></div></div>`);function kd(p){var a=_d();l(p,a)}var xd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"></path></svg>');function Ed(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=xd();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var Id=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),Sd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),Td=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),Cd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"><!></div>',1),Ad=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),Ld=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"></div> <div class="col-text"> </div>',1),Nd=T('<div class="col-typ svelte-1aid5cl"> </div>'),Rd=T('<div class="row svelte-1aid5cl"><div class="col-ts svelte-1aid5cl"> </div> <!></div>'),Dd=T(" <br>",1),jd=T("<br> <!> ",1),Od=T(" <br> ",1),Md=T("<br> <br> <!>",1),Pd=T("<br> <br> ",1),zd=T("<br> ",1),Ud=T(" <br> <!>",1),Wd=T('<div role="contentinfo"><!></div>');function ws(p,a){le(a,!0);let t=U(a,"collapsed",3,!0),o=S("event"),r=S(!1),h=Be(()=>!t()&&!a.wide),m=Be(()=>t()&&!a.wide&&!e(r)),u=Be(()=>!t()&&a.wide),E=Be(()=>e(m)?".5rem":".33rem");Le(()=>{new Date().getTime()-1e3*30<a.event.timestamp&&(setTimeout(()=>{s(o,"eventNew")},100),setTimeout(()=>{s(o,"event")},2500))});function I(){switch(a.event.level){case"test":return"T";case"info":return"I";case"notice":return"N";case"warning":return"W";case"critical":return"C";default:return"U"}}function v(){return pt(a.event.timestamp/1e3)}var y=Wd();const f=Be(()=>`${e(E)} solid ${qt(a.event.level)}`);var A=d(y);{var k=w=>{var $=Rd(),_=d($),x=d(_,!0);q(()=>Y(x,v())),c(_);var b=i(_,2);{var C=j=>{var R=Id(),N=ee(R),B=d(N,!0);c(N);var D=i(N,2),F=d(D,!0);c(D);var M=i(D,2),P=d(M,!0);c(M),q(()=>{Y(B,a.event.typ),Y(F,a.event.ip),Y(P,a.event.text)}),l(j,R)},L=j=>{var R=me(),N=ee(R);{var B=F=>{var M=Sd(),P=ee(M),W=d(P,!0);c(P);var Q=i(P,2),z=d(Q,!0);c(Q),q(()=>{Y(W,`${a.event.typ}: ${a.event.data}`),Y(z,a.event.ip)}),l(F,M)},D=F=>{var M=me(),P=ee(M);{var W=z=>{var K=Td(),J=ee(K),Z=d(J,!0);c(J);var re=i(J,2),ve=d(re,!0);c(re),q(()=>{Y(Z,a.event.typ),Y(ve,a.event.ip||"")}),l(z,K)},Q=z=>{var K=me(),J=ee(K);{var Z=ve=>{var $e=Cd(),_e=ee($e),pe=d(_e,!0);c(_e);var je=i(_e,2),ge=d(je,!0);c(je);var de=i(je,2),we=d(de);Ha(we,()=>a.event.text.replace("@","<wbr/>@")),c(de),q(()=>{Y(pe,a.event.typ),Y(ge,a.event.ip||"")}),l(ve,$e)},re=ve=>{var $e=me(),_e=ee($e);{var pe=ge=>{var de=Ad(),we=ee(de),ye=d(we,!0);c(we);var Me=i(we,2),Ce=d(Me,!0);c(Me);var xe=i(Me,2),Re=d(xe,!0);q(()=>Y(Re,`Expires: ${pt(a.event.data)}`)),c(xe),q(()=>{Y(ye,a.event.typ),Y(Ce,a.event.ip)}),l(ge,de)},je=ge=>{var de=me(),we=ee(de);{var ye=Ce=>{var xe=Ld(),Re=ee(xe),X=d(Re,!0);c(Re);var Ie=i(Re,4),fe=d(Ie,!0);c(Ie),q(()=>{Y(X,a.event.typ),Y(fe,a.event.text)}),l(Ce,xe)},Me=Ce=>{var xe=Nd(),Re=d(xe,!0);c(xe),q(()=>Y(Re,a.event.typ)),l(Ce,xe)};O(we,Ce=>{a.event.typ==="RauthyStarted"||a.event.typ==="RauthyHealthy"||a.event.typ==="RauthyUnhealthy"?Ce(ye):Ce(Me,!1)},!0)}l(ge,de)};O(_e,ge=>{a.event.typ==="IpBlacklisted"?ge(pe):ge(je,!1)},!0)}l(ve,$e)};O(J,ve=>{a.event.typ==="NewRauthyAdmin"||a.event.typ==="NewUserRegistered"||a.event.typ==="UserPasswordReset"||a.event.typ==="UserEmailChange"?ve(Z):ve(re,!1)},!0)}l(z,K)};O(P,z=>{a.event.typ==="SecretsMigrated"?z(W):z(Q,!1)},!0)}l(F,M)};O(N,F=>{a.event.typ==="InvalidLogins"?F(B):F(D,!1)},!0)}l(j,R)};O(b,j=>{a.event.typ==="Test"?j(C):j(L,!1)})}c($),l(w,$)},g=w=>{var $=me(),_=ee($);{var x=C=>{var L=Ud(),j=ee(L,!0);q(()=>Y(j,v()));var R=i(j,2),N=i(R);{var B=F=>{var M=jd(),P=i(ee(M),2);{var W=z=>{var K=Dd(),J=ee(K);G(),q(()=>Y(J,`${a.event.text??""} `)),l(z,K)};O(P,z=>{a.event.text&&z(W)})}var Q=i(P);q(()=>Y(Q,` ${a.event.ip??""}`)),l(F,M)},D=F=>{var M=me(),P=ee(M);{var W=z=>{var K=Od(),J=ee(K,!0),Z=i(J,2);q(()=>{Y(J,`: ${a.event.data}`),Y(Z,` ${a.event.ip??""}`)}),l(z,K)},Q=z=>{var K=me(),J=ee(K);{var Z=ve=>{var $e=V();q(()=>Y($e,a.event.ip)),l(ve,$e)},re=ve=>{var $e=me(),_e=ee($e);{var pe=ge=>{var de=Md(),we=i(ee(de)),ye=i(we,3);Ha(ye,()=>a.event.text.replace("@","<wbr/>@")),q(()=>Y(we,` ${(a.event.ip||"")??""} `)),l(ge,de)},je=ge=>{var de=me(),we=ee(de);{var ye=Ce=>{var xe=Pd(),Re=i(ee(xe)),X=i(Re,2);q(()=>Y(X,` ${pt(a.event.data)??""}`)),q(()=>Y(Re,` ${a.event.ip??""} `)),l(Ce,xe)},Me=Ce=>{var xe=me(),Re=ee(xe);{var X=Ie=>{var fe=zd(),Ue=i(ee(fe));q(()=>Y(Ue,` ${a.event.text??""}`)),l(Ie,fe)};O(Re,Ie=>{(a.event.typ==="RauthyStarted"||a.event.typ==="RauthyHealthy"||a.event.typ==="RauthyUnhealthy")&&Ie(X)},!0)}l(Ce,xe)};O(we,Ce=>{a.event.typ==="IpBlacklisted"?Ce(ye):Ce(Me,!1)},!0)}l(ge,de)};O(_e,ge=>{a.event.typ==="NewRauthyAdmin"||a.event.typ==="NewUserRegistered"||a.event.typ==="UserPasswordReset"||a.event.typ==="UserEmailChange"?ge(pe):ge(je,!1)},!0)}l(ve,$e)};O(J,ve=>{a.event.typ==="SecretsMigrated"?ve(Z):ve(re,!1)},!0)}l(z,K)};O(P,z=>{a.event.typ==="InvalidLogins"?z(W):z(Q,!1)},!0)}l(F,M)};O(N,F=>{a.event.typ==="Test"?F(B):F(D,!1)})}q(()=>Y(R,` ${a.event.typ??""} `)),l(C,L)},b=C=>{var L=V();q(()=>Y(L,I())),l(C,L)};O(_,C=>{e(h)?C(x):C(b,!1)},!0)}l(w,$)};O(A,w=>{e(u)?w(k):w(g,!1)})}c(y),q(()=>{Nt(y,Rt(e(o)),"svelte-1aid5cl"),St(y,"showCollapsed",e(m)),oe(y,"border-left",e(f))}),Oe("mouseenter",y,()=>s(r,!0)),Oe("mouseleave",y,()=>s(r,!1)),l(p,y),ie()}var qd=T("<div><div><b>Legend</b></div> <div><div>TEST</div> <div>INFO</div> <div>NOTICE</div> <div>WARNING</div> <div>CRITICAL</div></div></div>");function Gd(p,a){le(a,!0);var t=qd(),o=d(t),r=i(o,2),h=d(r);const m=Be(()=>`.33rem solid ${qt("test")}`);var u=i(h,2);const E=Be(()=>`.33rem solid ${qt("info")}`);var I=i(u,2);const v=Be(()=>`.33rem solid ${qt("notice")}`);var y=i(I,2);const f=Be(()=>`.33rem solid ${qt("warning")}`);var A=i(y,2);const k=Be(()=>`.33rem solid ${qt("critical")}`);c(r),c(t),q(()=>{Nt(o,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(o,"border-left",".33rem solid var(--col-bg)"),Nt(r,Rt(a.wide?"legendWide":"legend"),"svelte-1imwz5t"),Nt(h,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(h,"border-left",e(m)),Nt(u,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(u,"border-left",e(E)),Nt(I,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(I,"border-left",e(v)),Nt(y,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(y,"border-left",e(f)),Nt(A,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(A,"border-left",e(k))}),l(p,t),ie()}var Bd=T('<div class="headerWideInner svelte-t1qwu8"><b>Events</b> <!></div>'),Kd=T("<b>Events</b>"),Fd=T("<!> <!>",1),Vd=T('<div class="opts svelte-t1qwu8"><!></div>'),Jd=T('<div role="contentinfo" id="events" class="svelte-t1qwu8"><div class="upper"><div class="header svelte-t1qwu8"><!></div> <!> <div></div></div> <!></div>');function Yd(p,a){le(a,!0);let t=U(a,"collapsed",3,!0),o=U(a,"wide",15),r=50,h=S(void 0),m=S(n([])),u=S(n([])),E=S(void 0),I=S(!1);Le(async()=>{s(E,n(await v()))});async function v(){return localStorage.getItem("eventLevel")||"Info"}async function y(D){localStorage.setItem("eventLevel",D)}async function f(){await Ds()}function A(){var D;console.log("opening SSE stream"),s(h,n(new EventSource(`/auth/v1/events/stream?latest=${r}&level=${((D=e(E))==null?void 0:D.toLowerCase())||"info"}`))),e(h).onopen=()=>{console.log("SSE Events Stream opened"),s(m,n([]))},e(h).onerror=()=>{console.error("SSE Events Stream closed")},e(h).onmessage=F=>{if(F.data){let M=JSON.parse(F.data);s(m,n([M,...e(m).slice(-499)]))}}}let k=Be(()=>!t()&&!o()||e(I)),g=Be(()=>t()&&!o()&&!e(I)),w=Be(()=>!t()&&o());Te(()=>{if(e(m))switch(e(E)){case"Info":s(u,n(e(m)));break;case"Notice":s(u,n(e(m).filter(D=>D.typ==="Test"||D.level==="notice"||D.level==="warning"||D.level==="critical")));break;case"Warning":s(u,n(e(m).filter(D=>D.typ==="Test"||D.level==="warning"||D.level==="critical")));break;case"Critical":s(u,n(e(m).filter(D=>D.typ==="Test"||D.level==="critical")));break}}),Te(()=>{e(E)&&(y(e(E)),e(h)&&e(h).readyState!==2&&e(h).close(),A())});var $=Jd(),_=d($),x=d(_),b=d(x);{var C=D=>{var F=Fd(),M=ee(F);{var P=z=>{var K=Bd(),J=i(d(K),2);Et(J,{options:da,get value(){return e(E)},set value(Z){s(E,n(Z))}}),c(K),l(z,K)},W=z=>{var K=Kd();l(z,K)};O(M,z=>{e(w)?z(P):z(W,!1)})}var Q=i(M,2);Se(Q,{level:3,$$events:{click:f},children:(z,K)=>{G();var J=V("TEST");l(z,J)},$$slots:{default:!0}}),l(D,F)};O(b,D=>{e(g)||D(C)})}c(x);var L=i(x,2);{var j=D=>{var F=Vd(),M=d(F);Et(M,{options:da,get value(){return e(E)},set value(P){s(E,n(P))}}),c(F),l(D,F)};O(L,D=>{e(w)||D(j)})}var R=i(L,2);qe(R,23,()=>e(u),D=>D.id,(D,F,M)=>{var P=Be(()=>t()&&!e(I));ws(D,{get collapsed(){return e(P)},get event(){return e(u)[e(M)]},set event(W){e(u)[e(M)]=W},get wide(){return o()},set wide(W){o(W)}})}),c(R),c(_);var N=i(_,2);{var B=D=>{Gd(D,{get wide(){return o()},set wide(F){o(F)}})};O(N,D=>{(!t()||e(I))&&D(B)})}c($),q(()=>{St($,"widthDefault",e(k)),St($,"widthCollapsed",e(g)),St($,"widthWide",e(w)),Nt(R,Rt(e(w)?"dataWide":e(g)?"dataCollapsed":"data"),"svelte-t1qwu8")}),Oe("mouseenter",$,()=>s(I,!0)),Oe("mouseleave",$,()=>s(I,!1)),l(p,$),ie()}var Xd=T('<div class="addNewInputs svelte-1fhw572"><!> <!> <div class="saveBtn svelte-1fhw572"><!></div> <div class="err svelte-1fhw572"> </div></div>'),Hd=T('<div class="svelte-1fhw572">No blacklisted IPs</div>'),Zd=(p,a,t)=>a(e(t).ip),Qd=T('<div role="button" tabindex="0" class="delete svelte-1fhw572"><!></div>'),eu=T('<div class="blacklisted svelte-1fhw572"><div class="ip svelte-1fhw572"> </div> <div class="exp svelte-1fhw572"> </div> <!></div>'),tu=T(' <div class="content"><div class="top svelte-1fhw572"><!> <div class="addNew svelte-1fhw572"><!></div></div> <!> <div id="blacklist" class="svelte-1fhw572"><!></div> <!> <div style="height: 20px"></div></div>',1);function au(p,a){le(a,!0);let t=S(""),o=S(""),r=S(n([])),h=S(n([])),m=S(n([])),u=S(!1),E=n({ip:"",exp:""}),I=S(n({}));const v=He().shape({ip:he().required("IP is required").matches(Js,"Invalid IPv4")}),y=new Date().toISOString().split(".")[0],f=[{label:"IP",callback:(z,K)=>z.ip.includes(K)}];let A=[{label:"IP",callback:(z,K)=>z.ip.localeCompare(K.ip)}];Te(()=>{e(u)&&(s(o,""),E.exp=new Date().toISOString().split(".")[0])}),Le(()=>{k()});async function k(){let z=await $l(),K=await z.json();z.ok?s(r,n(K.ips)):s(t,n(K.message))}async function g(){if(s(o,""),!await $())return;let z=Pt(E.exp);if(!z){s(o,"Invalid Date Input: User Expires");return}let K={ip:E.ip,exp:z},J=await _l(K);if(J.ok)s(u,!1),E.ip="",await k();else{let Z=await J.json();s(o,n(Z.message))}}async function w(z){(await kl(z)).ok&&await k()}async function $(){try{return await v.validate(E,{abortEarly:!1}),s(I,n({})),!0}catch(z){return s(I,n(Xe(z))),!1}}G();var _=tu(),x=ee(_),b=i(x),C=d(b),L=d(C);Lt(L,{get items(){return e(r)},searchOptions:f,orderOptions:A,get resItems(){return e(h)},set resItems(z){s(h,n(z))}});var j=i(L,2),R=d(j);Se(R,{level:3,$$events:{click:()=>s(u,!e(u))},children:(z,K)=>{G();var J=V("BLACKLIST IP");l(z,J)},$$slots:{default:!0}}),c(j),c(C);var N=i(C,2);{var B=z=>{var K=Xd(),J=d(K);ne(J,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return E.ip},set value(pe){E.ip=pe},get error(){return e(I).ip},set error(pe){e(I).ip=pe},children:(pe,je)=>{G();var ge=V("IP");l(pe,ge)},$$slots:{default:!0}});var Z=i(J,2);ne(Z,{type:"datetime-local",step:"60",width:"18rem",min:y,max:"2099-01-01T00:00",get value(){return E.exp},set value(pe){E.exp=pe},children:(pe,je)=>{G();var ge=V("EXPIRES");l(pe,ge)},$$slots:{default:!0}});var re=i(Z,2),ve=d(re);Se(ve,{level:1,$$events:{click:g},children:(pe,je)=>{G();var ge=V("SAVE");l(pe,ge)},$$slots:{default:!0}}),c(re);var $e=i(re,2),_e=d($e,!0);c($e),c(K),q(()=>Y(_e,e(o))),ue(3,K,()=>be),l(z,K)};O(N,z=>{e(u)&&z(B)})}var D=i(N,2),F=d(D);{var M=z=>{var K=Hd();l(z,K)},P=z=>{var K=me(),J=ee(K);qe(J,17,()=>e(m),Z=>Z.ip,(Z,re)=>{var ve=eu(),$e=d(ve),_e=d($e,!0);c($e);var pe=i($e,2),je=d(pe,!0);q(()=>Y(je,pt(e(re).exp))),c(pe);var ge=i(pe,2);Ze(ge,{text:"Delete IP",children:(de,we)=>{var ye=Qd();ye.__click=[Zd,w,re];var Me=d(ye);ea(Me,{color:"var(--col-err)"}),c(ye),Oe("keypress",ye,()=>w(e(re).ip)),l(de,ye)},$$slots:{default:!0}}),c(ve),q(()=>Y(_e,e(re).ip)),l(Z,ve)}),l(z,K)};O(F,z=>{e(r).length===0?z(M):z(P,!1)})}c(D);var W=i(D,2);{var Q=z=>{jt(z,{get items(){return e(h)},set items(K){s(h,n(K))},get resItems(){return e(m)},set resItems(K){s(m,n(K))}})};O(W,z=>{e(r).length>0&&z(Q)})}G(2),c(b),q(()=>Y(x,`${e(t)??""} `)),l(p,_),ie()}ot(["click"]);var su=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"></path></svg>');function ru(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=su();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var lu=T('<div role="button" tabindex="0" class="cell pointer svelte-lgl56a"> </div>'),iu=T('<div class="cell svelte-lgl56a"><input class="pointer svelte-lgl56a" type="checkbox"></div>'),nu=T('<div class="mr svelte-lgl56a"><div role="button" tabindex="0" class="label pointer svelte-lgl56a"> </div> <!></div>'),ou=T('<div class="matrix svelte-lgl56a"><b>Access Rights</b> <div class="mr svelte-lgl56a"><div class="label svelte-lgl56a"></div> <!></div> <!></div>');function ys(p,a){le(a,!0);let t=U(a,"accessMatrix",15);U(a,"finalize",15)(I);const o=["Blacklist","Clients","Events","Generic","Groups","Roles","Secrets","Sessions","Scopes","UserAttributes","Users"],r=["create","read","update","delete"];let h=new Array(o.length).fill(!1),m=new Array(r.length).fill(!1);Le(()=>{var $;u(),($=a.apiKey)!=null&&$.access&&E()});function u(){let $=new Array(o.length);for(let _=0;_<o.length;_++){$[_]={group:o[_]};for(let x of r)$[_][x]=!1}t($)}function E(){for(let $ of a.apiKey.access){let _=o.findIndex(x=>x===$.group);for(let x of $.access_rights){let b=r.findIndex(C=>C===x);t(t()[_][r[b]]=!0,!0)}}}function I(){let $=[];for(let _=0;_<o.length;_++){let x=[];for(let b of r)t()[_][b]&&x.push(b);x.length>0&&$.push({group:o[_],access_rights:x})}return $}function v($){h[$]=!h[$];const _=h[$];let x=t()[$];for(let b=0;b<r.length;b++)for(let C of Object.keys(x))C!=="group"&&(x[C]=_);t(t()[$]=x,!0)}function y($){m[$]=!m[$];const _=m[$];for(let x=0;x<o.length;x++)t(t()[x][r[$]]=_,!0)}var f=ou(),A=i(d(f),2),k=i(d(A),2);qe(k,17,()=>r,ut,($,_,x)=>{var b=lu(),C=Be(()=>y.bind(this,x));b.__click=function(...R){var N;(N=e(C))==null||N.apply(this,R)};var L=Be(()=>y.bind(this,x)),j=d(b,!0);c(b),q(()=>Y(j,r[x])),Oe("keypress",b,function(...R){var N;(N=e(L))==null||N.apply(this,R)}),l($,b)}),c(A);var g=i(A,2);{var w=$=>{var _=me(),x=ee(_);qe(x,17,()=>o,ut,(b,C,L)=>{var j=nu(),R=d(j),N=Be(()=>v.bind(this,L));R.__click=function(...M){var P;(P=e(N))==null||P.apply(this,M)};var B=Be(()=>v.bind(this,L)),D=d(R,!0);c(R);var F=i(R,2);qe(F,17,()=>r,ut,(M,P)=>{var W=iu(),Q=d(W);nt(Q),c(W),lr(Q,()=>t()[L][e(P)],z=>t(t()[L][e(P)]=z,!0)),l(M,W)}),c(j),q(()=>Y(D,o[L])),Oe("keypress",R,function(...M){var P;(P=e(B))==null||P.apply(this,M)}),l(b,j)}),l($,_)};O(g,$=>{t()&&$(w)})}return c(f),l(p,f),ie({finalizeMatrix:I})}ot(["click"]);var vu=T("<div><!></div>"),cu=T('<div class="container svelte-ubtepy"><!> <div class="switch svelte-ubtepy">Key Expires: <!></div> <!> <!> <div class="saveBtn svelte-ubtepy"><!></div> <div class="err svelte-ubtepy"> </div></div>');function du(p,a){le(a,!0);const t=new Date().toISOString().split(".")[0];let o=U(a,"apiKeys",19,()=>[]),r=U(a,"onSave",3,()=>{}),h=S(""),m=S(!1),u=S(void 0),E=S(void 0),I=n({name:"",exp:""}),v=S(n({}));const y=He().shape({name:he().required("Name is required").min(2).max(24).matches(Ys,"Format: [a-zA-Z0-9_/-]{2,24}")});Te(()=>{e(m)&&(I.exp=new Date().toISOString().split(".")[0])});async function f(){if(s(h,""),!await A())return;let N={name:I.name,access:e(u)()};if(N.access.length===0){s(h,"Grant the new API Key at least one permission");return}if(e(m)){let D=Pt(I.exp);if(!D){s(h,"Invalid Date Input: User Expires");return}N.exp=D}let B=await gl(N);if(B.ok)r()();else{let D=await B.json();s(h,n(D.message))}}async function A(){try{await y.validate(I,{abortEarly:!1}),s(v,n({}))}catch(N){return s(v,n(Xe(N))),!1}for(let N of o())if(N.name===I.name)return e(v).name="Name already exists",!1;return!0}var k=cu(),g=d(k);ne(g,{width:"18rem",autocomplete:"off",placeholder:"Name",get value(){return I.name},set value(N){I.name=N},get error(){return e(v).name},set error(N){e(v).name=N},children:(N,B)=>{G();var D=V("NAME");l(N,D)},$$slots:{default:!0}});var w=i(g,2),$=i(d(w));Ve($,{get selected(){return e(m)},set selected(N){s(m,n(N))}}),c(w);var _=i(w,2);{var x=N=>{var B=vu(),D=d(B);ne(D,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return I.exp},set value(F){I.exp=F},children:(F,M)=>{G();var P=V("EXPIRES");l(F,P)},$$slots:{default:!0}}),c(B),ue(3,B,()=>be),l(N,B)};O(_,N=>{e(m)&&N(x)})}var b=i(_,2);ys(b,{get accessMatrix(){return e(E)},set accessMatrix(N){s(E,n(N))},get finalize(){return e(u)},set finalize(N){s(u,n(N))}});var C=i(b,2),L=d(C);Se(L,{level:1,$$events:{click:f},children:(N,B)=>{G();var D=V("SAVE");l(N,D)},$$slots:{default:!0}}),c(C);var j=i(C,2),R=d(j,!0);c(j),c(k),q(()=>Y(R,e(h))),l(p,k),ie()}var uu=T("<div><!></div>"),hu=T('<div class="success svelte-1a3jnb3">Success</div>'),pu=T('<div class="mainErr err svelte-1a3jnb3"> </div>'),mu=T('<div class="container svelte-1a3jnb3"><div class="unit svelte-1a3jnb3"><div class="label svelte-1a3jnb3">Name</div> <div class="value svelte-1a3jnb3"> </div></div> <div class="switch svelte-1a3jnb3">Key Expires: <!></div> <!> <!> <!> <!> <!></div>');function fu(p,a){le(a,!0);const t=new Date().toISOString().split(".")[0];let o=U(a,"apiKey",27,()=>n({})),r=S(""),h=S(!1),m=S(void 0),u=S(!!o().expires),E=S(void 0),I=S(void 0);Te(()=>{e(h)&&s(m,n(setTimeout(()=>{s(h,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(m)));let v=n({exp:""});Te(()=>{e(u)&&(v.exp=new Date().toISOString().split(".")[0])});async function y(){s(r,"");let B={name:o().name,access:e(I)()};if(B.access.length===0){s(r,"Grant the API Key at least one permission");return}if(e(u)){let F=Pt(v.exp);if(!F){s(r,"Invalid Date Input: User Expires");return}B.exp=F}let D=await wl(B);if(D.ok)a.onSave(),s(h,!0);else{let F=await D.json();s(r,n(F.message))}}var f=mu(),A=d(f),k=i(d(A),2),g=d(k,!0);c(k),c(A);var w=i(A,2),$=i(d(w));Ve($,{get selected(){return e(u)},set selected(B){s(u,n(B))}}),c(w);var _=i(w,2);{var x=B=>{var D=uu(),F=d(D);ne(F,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return v.exp},set value(M){v.exp=M},children:(M,P)=>{G();var W=V("EXPIRES");l(M,W)},$$slots:{default:!0}}),c(D),ue(3,D,()=>be),l(B,D)};O(_,B=>{e(u)&&B(x)})}var b=i(_,2);ys(b,{get apiKey(){return o()},get accessMatrix(){return e(E)},set accessMatrix(B){s(E,n(B))},get finalize(){return e(I)},set finalize(B){s(I,n(B))}});var C=i(b,2);Se(C,{level:1,width:"4rem",$$events:{click:y},children:(B,D)=>{G();var F=V("SAVE");l(B,F)},$$slots:{default:!0}});var L=i(C,2);{var j=B=>{var D=hu();l(B,D)};O(L,B=>{e(h)&&B(j)})}var R=i(L,2);{var N=B=>{var D=pu(),F=d(D,!0);c(D),q(()=>Y(F,e(r))),l(B,D)};O(R,B=>{e(r)&&B(N)})}c(f),q(()=>Y(g,o().name)),l(p,f),ie()}var gu=T('<div class="err svelte-1jljqe9"> </div>'),wu=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this ApiKey?</div> <!> <!></div>');function yu(p,a){le(a,!0);let t=U(a,"apiKey",19,()=>({})),o=S("");async function r(){s(o,"");let I=await yl(t().name);if(I.ok)a.onSave();else{let v=await I.json();s(o,n(v.message))}}var h=wu(),m=i(d(h),2);Se(m,{level:1,$$events:{click:r},children:(I,v)=>{G();var y=V("DELETE");l(I,y)},$$slots:{default:!0}});var u=i(m,2);{var E=I=>{var v=gu(),y=d(v,!0);c(v),q(()=>Y(y,e(o))),l(I,v)};O(u,I=>{e(o)&&I(E)})}c(h),l(p,h),ie()}var bu=T('<div><div class="iconsOuter svelte-s24qr4"><div class="iconsInner svelte-s24qr4"><div role="button" tabindex="0" class="show svelte-s24qr4"><!></div> <div role="button" tabindex="0"><!></div></div></div> <textarea></textarea></div>');function bs(p,a){le(a,!0);let t=U(a,"value",3,""),o=U(a,"rows",3,10),r=U(a,"cols",3,60),h=U(a,"name",3,"default"),m=U(a,"show",15,!1),u=U(a,"width",3,"40rem"),E=Jt(a,["$$slots","$$events","$$legacy","value","rows","cols","name","show","width"]),I=S(""),v=S("");Te(()=>{m()?s(v,t()):s(v,n(e(I)))}),Le(()=>{for(let R=0;R<t().length;R++)s(I,e(I)+"*");s(v,n(e(I)))});function y(){navigator.clipboard.writeText(t())}function f(){m(!m())}var A=bu(),k=d(A),g=d(k),w=d(g);w.__click=f;var $=d(w);{var _=R=>{es(R,{width:22})},x=R=>{Qa(R,{width:22})};O($,R=>{m()?R(_):R(x,!1)})}c(w);var b=i(w,2);b.__click=y;var C=d(b);nr(C,{}),c(b),c(g),c(k);var L=i(k,2);ma(L);let j;c(A),q(()=>{oe(A,"width",`${u()}`),j=pa(L,j,{disabled:!0,name:h(),rows:o(),cols:r(),...E},"svelte-s24qr4"),oe(L,"width",`${u()}`),oe(L,"padding-right","2.75rem")}),Oe("keypress",w,f),Oe("keypress",b,y),dt(L,()=>e(v),R=>s(v,R)),l(p,A),ie()}ot(["click"]);var $u=T(`<div class="secret font-mono svelte-1vixcxf"><!></div> <p class="svelte-1vixcxf">An API Key must be provided in the HTTP <span class="headerCodeSmall svelte-1vixcxf"><code>Authorization</code></span> header in the following format:</p> <p class="svelte-1vixcxf"><span class="headerCode svelte-1vixcxf"><b><code>API-Key YourSecretApiKeyHere</code></b></span></p> <p class="svelte-1vixcxf">You can use the following <code>curl</code> request to test your new Key:</p> <!> <p class="svelte-1vixcxf">If you don't have <code>jq</code> installed and the above fails:</p> <!>`,1),_u=T(`<div class="container svelte-1vixcxf"><p class="svelte-1vixcxf">You Can generate a new secret for this API Key here.</p> <p class="svelte-1vixcxf">You will only see this secret once after the generation.
        When a new one has been generated, the old secret will be overridden permanently.
        This operation cannot be reverted!</p> <!> <!> <div class="err svelte-1vixcxf"> </div></div>`);function ku(p,a){le(a,!0);let t=S(""),o=S(""),r=S(""),h=S("");async function m(){let k=await bl(a.apiKey.name);if(k.ok)s(o,n(await k.text())),s(r,`curl -s -H 'Authorization: API-Key ${e(o)}' ${window.location.origin}/auth/v1/api_keys/${a.apiKey.name}/test`),s(h,`${e(r)} | jq`);else{let g=await k.json();s(t,n(g.message))}}var u=_u(),E=i(d(u),4),I=Be(()=>e(o)?3:1);Se(E,{get level(){return e(I)},width:"130px",$$events:{click:m},children:(k,g)=>{G();var w=V("GENERATE NEW");l(k,w)},$$slots:{default:!0}});var v=i(E,2);{var y=k=>{var g=$u(),w=ee(g),$=d(w);Gt($,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(o)},set value(b){s(o,n(b))},children:(b,C)=>{G();var L=V("API KEY");l(b,L)},$$slots:{default:!0}}),c(w);var _=i(w,8);bs(_,{name:"id",rows:3,get value(){return e(h)}});var x=i(_,4);bs(x,{name:"id",rows:3,get value(){return e(r)}}),ue(3,w,()=>be),l(k,g)};O(v,k=>{e(o)&&k(y)})}var f=i(v,2),A=d(f,!0);c(f),c(u),q(()=>Y(A,e(t))),l(p,u),ie()}var xu=T('<div class="data svelte-115hohv"> </div>'),Eu=T('<div class="header svelte-115hohv"><div class="data svelte-115hohv"> </div> <!></div>'),Iu=T("<div><!></div>"),Su=T("<div><!></div>"),Tu=T("<div><!></div>"),Cu=T("<div><!> <!></div>");function Au(p,a){le(a,!0);let t=U(a,"apiKey",31,()=>n({})),o=U(a,"onSave",11,()=>{}),r=S(void 0);const h=["Config","Secret","Delete"];let m=S(n(h[0]));const u=200,E=u/2;function I(){s(r,!1),o()()}vt(p,{get show(){return e(r)},set show(v){s(r,n(v))},header:v=>{var y=Eu(),f=d(y),A=d(f,!0);c(f);var k=i(f,2);{var g=w=>{Ze(w,{text:"Expiry",children:($,_)=>{var x=xu(),b=d(x,!0);q(()=>Y(b,pt(t().expires))),c(x),l($,x)},$$slots:{default:!0}})};O(k,w=>{t().expires&&w(g)})}c(y),q(()=>Y(A,t().name)),l(v,y)},body:v=>{var y=Cu(),f=d(y);Dt(f,{labels:h,get selected(){return e(m)},set selected(w){s(m,n(w))}});var A=i(f,2);{var k=w=>{var $=Iu(),_=d($);fu(_,{get onSave(){return o()},get apiKey(){return t()},set apiKey(x){t(x)}}),c($),ue(1,$,()=>be,()=>({delay:E,duration:u})),ue(2,$,()=>be,()=>({duration:u})),l(w,$)},g=w=>{var $=me(),_=ee($);{var x=C=>{var L=Su(),j=d(L);ku(j,{get apiKey(){return t()}}),c(L),ue(1,L,()=>be,()=>({delay:E,duration:u})),ue(2,L,()=>be,()=>({duration:u})),l(C,L)},b=C=>{var L=me(),j=ee(L);{var R=N=>{var B=Tu(),D=d(B);yu(D,{get apiKey(){return t()},onSave:I}),c(B),ue(1,B,()=>be,()=>({delay:E,duration:u})),ue(2,B,()=>be,()=>({duration:u})),l(N,B)};O(j,N=>{e(m)==="Delete"&&N(R)},!0)}l(C,L)};O(_,C=>{e(m)==="Secret"?C(x):C(b,!1)},!0)}l(w,$)};O(A,w=>{e(m)==="Config"?w(k):w(g,!1)})}c(y),l(v,y)},$$slots:{header:!0,body:!0}}),ie()}var Lu=T("<div><!></div>"),Nu=T('<div class="svelte-1fzx60h">No Api Keys</div>'),Ru=T(' <div class="content"><div class="top svelte-1fzx60h"><!> <div class="addNew svelte-1fzx60h"><!></div></div> <!> <div id="keys" class="svelte-1fzx60h"><!></div> <!> <div style="height: 20px"></div></div>',1);function Du(p,a){le(a,!0);let t=S(""),o=S(n([])),r=S(n([])),h=S(n([])),m=S(!1);const u=[{label:"Name",callback:(N,B)=>N.name.includes(B)}];let E=[{label:"Name",callback:(N,B)=>N.name.localeCompare(B.name)}];Le(()=>{I()});async function I(){let N=await fl(),B=await N.json();N.ok?(s(o,n(B.keys)),s(m,!1)):s(t,n(B.message))}G();var v=Ru(),y=ee(v),f=i(y),A=d(f),k=d(A);Lt(k,{get items(){return e(o)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(N){s(r,n(N))}});var g=i(k,2),w=d(g);Se(w,{level:3,$$events:{click:()=>s(m,!e(m))},children:(N,B)=>{G();var D=V("NEW KEY");l(N,D)},$$slots:{default:!0}}),c(g),c(A);var $=i(A,2);{var _=N=>{var B=Lu(),D=d(B);du(D,{onSave:I,get apiKeys(){return e(o)}}),c(B),ue(3,B,()=>be),l(N,B)};O($,N=>{e(m)&&N(_)})}var x=i($,2),b=d(x);{var C=N=>{var B=Nu();l(N,B)},L=N=>{var B=me(),D=ee(B);qe(D,19,()=>e(h),F=>F.name,(F,M,P)=>{Au(F,{onSave:I,get apiKey(){return e(h)[e(P)]},set apiKey(W){e(h)[e(P)]=W}})}),l(N,B)};O(b,N=>{e(o).length===0?N(C):N(L,!1)})}c(x);var j=i(x,2);{var R=N=>{jt(N,{get items(){return e(r)},set items(B){s(r,n(B))},get resItems(){return e(h)},set resItems(B){s(h,n(B))}})};O(j,N=>{e(o).length>0&&N(R)})}G(2),c(f),q(()=>Y(y,`${e(t)??""} `)),l(p,v),ie()}var ju=T('<div class="row svelte-hjwmgw">No events found</div>'),Ou=T('<div class="content"><div class="row svelte-hjwmgw"><!></div> <div class="row filter svelte-hjwmgw"><!> <!></div> <div class="row filterOpts svelte-hjwmgw"><div><!></div> Filter <!> <!></div> <!></div>');function Mu(p,a){le(a,!0);let t=S(n([])),o=S(n([])),r=S(n(qa(new Date(new Date().getTime()-3600*1e3)))),h=S(void 0),m=S("Info"),u=S(!1),E=S(n(Ja[0])),I=[{label:"IP",callback:(D,F)=>{var M;return(M=D.ip)==null?void 0:M.includes(F)}},{label:"Content",callback:(D,F)=>{var M,P;return(P=(M=D.text)==null?void 0:M.toLowerCase())==null?void 0:P.includes(F.toLowerCase())}}],v=[{label:"Timestamp",callback:(D,F)=>D.timestamp-F.timestamp},{label:"Level",callback:(D,F)=>D.level.localeCompare(F.level)},{label:"Type",callback:(D,F)=>D.typ.localeCompare(F.typ)}];Ts(()=>{y()});async function y(){let D={from:Pt(e(r)),level:e(m).toLowerCase()};e(h)&&(D.until=Pt(e(h))),e(u)&&(D.typ=e(E));let F=await Gr(D),M=await F.json();F.ok?s(t,n(M)):M.message}var f=Ou(),A=d(f),k=d(A);Lt(k,{get items(){return e(t)},searchOptions:I,orderOptions:v,firstDirReverse:!0,get resItems(){return e(o)},set resItems(D){s(o,n(D))}}),c(A);var g=i(A,2),w=d(g);ne(w,{type:"datetime-local",step:"60",width:"17.5rem",max:"2099-01-01T00:00",get value(){return e(r)},set value(D){s(r,n(D))},children:(D,F)=>{G();var M=V("FROM");l(D,M)},$$slots:{default:!0}});var $=i(w,2);ne($,{type:"datetime-local",step:"60",width:"17rem",max:"2099-01-01T00:00",get value(){return e(h)},set value(D){s(h,n(D))},children:(D,F)=>{G();var M=V("UNTIL");l(D,M)},$$slots:{default:!0}}),c(g);var _=i(g,2),x=d(_);oe(x,"margin","0 5.5rem 0 .25rem");var b=d(x);Et(b,{options:da,get value(){return e(m)},set value(D){s(m,n(D))}}),c(x);var C=i(x,2);Ve(C,{get selected(){return e(u)},set selected(D){s(u,n(D))}});var L=i(C,2);{var j=D=>{Et(D,{options:Ja,get value(){return e(E)},set value(F){s(E,n(F))}})};O(L,D=>{e(u)&&D(j)})}c(_);var R=i(_,2);{var N=D=>{var F=ju();l(D,F)},B=D=>{var F=me(),M=ee(F);qe(M,19,()=>e(o),P=>P.id,(P,W,Q)=>{ws(P,{collapsed:!1,wide:!0,get event(){return e(o)[e(Q)]},set event(z){e(o)[e(Q)]=z}})}),l(D,F)};O(R,D=>{e(o).length===0?D(N):D(B,!1)})}c(f),l(p,f),ie()}var Pu=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"></path></svg>');function zu(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=Pu();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var Uu=Ye(`<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0
            0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>`);function Wu(p,a){let t=U(a,"opacity",3,.9),o=U(a,"width",3,24);var r=Uu();ce(r,"stroke-width",2),q(()=>{ce(r,"width",o()),ce(r,"opacity",t())}),l(p,r)}var qu=T(`<div class="desc svelte-i817w5"><h4 class="svelte-i817w5">ID token claim mappings</h4> <p class="svelte-i817w5">Values from the ID token after a successful upstream login can be mapped automatically.</p> <p class="svelte-i817w5">The <code class="svelte-i817w5">path</code> needs to be given in a regex like syntax. It can resolve to
        single JSON values or resolve to a value in a JSON object or array.</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.</code> marks the start of the JSON object</p> <p class="svelte-i817w5"><code class="svelte-i817w5">*</code> can be used as a wildcard in your path</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles</code> would target <code class="svelte-i817w5">&#123;"roles": "value"&#125;</code></p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles.*</code> can target a value inside an object or array like<br> <code class="svelte-i817w5">&#123;"roles": ["value", "notMyValue"]&#125;</code></p></div>`);function $s(p){var a=qu();l(p,a)}var Gu=T('<div class="err font-label svelte-w61ts0"> </div>'),Bu=T('<div class="container svelte-w61ts0"><div class="label svelte-w61ts0"><div class="labelInner font-label noselect svelte-w61ts0"><label><!></label></div></div> <textarea></textarea> <!></div>');function ka(p,a){le(a,!0);let t=U(a,"rows",3,10),o=U(a,"cols",3,10),r=U(a,"name",19,zt),h=U(a,"disabled",3,!1),m=U(a,"error",3,""),u=U(a,"value",15),E=U(a,"width",3,"32rem"),I=U(a,"fixed",3,!0),v=Jt(a,["$$slots","$$events","$$legacy","rows","cols","name","disabled","error","value","width","fixed","children"]);const y=oa();async function f(R){await Vt(),u(R.target.value),y("input",u())}function A(){y("focus",!0)}function k(){y("blur",!0)}var g=Bu(),w=d(g),$=d(w),_=d($),x=d(_);xt(x,()=>a.children??kt),c(_),c($),c(w);var b=i(w,2);ma(b);let C;var L=i(b,2);{var j=R=>{var N=Gu(),B=d(N,!0);c(N),q(()=>{oe(N,"width",E()),Y(B,m())}),ue(7,N,()=>be,()=>({duration:250})),l(R,N)};O(L,R=>{m()&&R(j)})}c(g),q(()=>{oe(g,"width",`calc(${E()??""} + 12px)`),oe($,"background",h()?"var(--col-gmid)":"var(--col-bg)"),ce(_,"for",r()),C=pa(b,C,{name:r(),disabled:h(),value:u(),rows:t(),cols:o(),...v,oninput:f,onfocus:A,onblur:k},"svelte-w61ts0"),oe(b,"resize",I()?"none":""),oe(b,"width",E())}),l(p,g),ie()}var Ku=T('<div class="header font-label svelte-1m46su9">ADD NEW AUTHENTICATION PROVIDER</div>'),Fu=T('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),Vu=T('<div class="header svelte-1m46su9">Custom Root CA PEM</div> <div class="ml mb svelte-1m46su9"><!></div> <!>',1),Ju=T("<!> <!>",1),Yu=T("<!> <!>",1),Xu=T('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),Hu=T(`<!> <!> <!> <!> <!> <div class="header svelte-1m46su9">Use PKCE</div> <div class="ml svelte-1m46su9"><!></div> <div class="desc svelte-1m46su9">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-1m46su9">Client name for the Rauthy login form</div> <!> <div class="desc svelte-1m46su9">Client ID given by the auth provider</div> <!> <div class="desc svelte-1m46su9">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
                        In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-1m46su9"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-1m46su9"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">If your provider issues a claim indicating that the user has used at least 2FA during
                        login, you can specify the mfa claim path.</p></div> <!> <!> <!> <!>`,1),Zu=T('<div class="success svelte-1m46su9">Success</div>'),Qu=T('<div class="err svelte-1m46su9"> </div>'),eh=T('<div class="container svelte-1m46su9"><div class="header svelte-1m46su9">Type</div> <div class="ml mb svelte-1m46su9"><!></div> <!> <!> <!> <!></div>');function th(p,a){le(a,!0);let t=U(a,"idx",31,()=>-1);const o="25rem";let r=S(!1),h=S(!1),m=S(""),u=S(!1),E=S(!1),I=S(void 0),v=S(!1),y=S(n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),f=S(n({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),A=["OIDC","Auto","Custom","Github","Google"],k=S(n(A[0])),g=S(n({}));const w=He().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),authorization_endpoint:he().url().required("Required"),token_endpoint:he().url().required("Required"),userinfo_endpoint:he().url().required("Required"),name:he().trim().matches(Qt,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128").required("Required"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Ya,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128").required("Required"),root_pem:he().trim().nullable().matches(ua,"Invalid PEM certificate"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")}),$=He().shape({issuer:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),metadata_url:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),root_pem:he().trim().nullable().matches(ua,"Valid PEM certificate")});Le(()=>()=>{s(r,!1),clearTimeout(e(I))});async function _(){if(!await C())return;if(!e(f).use_pkce&&!e(f).client_secret){s(m,"Must at least be a confidential client or use PKCE");return}s(m,""),s(h,!0),e(f).root_pem&&(e(f).danger_allow_insecure=!1,e(f).root_pem=e(f).root_pem.trim()),e(j)?e(f).typ="custom":e(f).typ=e(k).toLowerCase(),e(f).scope=e(f).scope.trim();let D=await Zr(e(f));if(D.ok)s(E,!0);else{let F=await D.json();F.message.includes("InvalidCertificate")?s(m,"Insecure connection not allowed"):s(m,n(F.message))}s(h,!1)}async function x(){if(!await L()){s(m,"Invalid input");return}s(m,""),s(h,!0);let D=await sl(e(y));if(D.ok){const F=await D.json();e(f).issuer=F.issuer,e(f).authorization_endpoint=F.authorization_endpoint,e(f).danger_allow_insecure=F.danger_allow_insecure,e(f).token_endpoint=F.token_endpoint,e(f).userinfo_endpoint=F.userinfo_endpoint,e(f).token_auth_method_basic=F.token_auth_method_basic,e(f).use_pkce=F.use_pkce,e(f).client_secret_basic=F.client_secret_basic,e(f).client_secret_post=!F.client_secret_basic&&F.client_secret_post,e(f).scope=F.scope,e(f).root_pem=F.root_pem,s(u,!0)}else{let F=await D.json();F.message.includes("InvalidCertificate")?s(m,"Insecure connection not allowed"):s(m,n(F.message))}s(h,!1)}function b(){s(y,n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),s(f,n({enabled:!0,issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),s(u,!1),s(v,!1)}async function C(){s(g,n({}));try{return await w.validate(e(f),{abortEarly:!1}),e(f).client_secret&&!(e(f).client_secret_basic||e(f).client_secret_post)?(s(m,"You have given a client secret, but no client auth method is active"),!1):(s(m,"Invalid input"),!0)}catch(D){return s(g,n(Xe(D))),D="Invalid input",!1}}async function L(){s(g,n({}));try{return await $.validate(e(y),{abortEarly:!1}),!e(y).issuer&&!e(y).metadata_url?(e(g).issuer="Required",e(g).metadata_url=e(g).issuer,!1):!0}catch(D){return s(g,n(Xe(D))),!1}}let j=Be(()=>e(k)===A[1]),R=Be(()=>e(k)===A[2]),N=Be(()=>e(k)===A[0]),B=Be(()=>!e(j)&&!e(R)&&!e(N));Te(()=>{if(e(k))switch(s(u,!1),s(g,n({})),s(y,n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),e(k)){case"Github":s(f,n({enabled:!0,issuer:"github.com",danger_allow_insecure:!1,authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",token_auth_method_basic:!1,userinfo_endpoint:"https://api.github.com/user",use_pkce:!1,name:"Github",client_id:"",client_secret:"",scope:"user:email",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:"$.two_factor_authentication",mfa_claim_value:"true"}));break;case"Google":s(y,n({issuer:"accounts.google.com",metadata_url:null,danger_allow_insecure:!1,root_pem:null})),x();break;default:s(f,n({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null}))}}),Te(()=>{e(E)&&s(I,n(setTimeout(()=>{a.onSave(),s(E,!1),s(r,!1),b()},1500)))}),vt(p,{get idx(){return t()},set idx(D){t(D)},get show(){return e(r)},set show(D){s(r,n(D))},header:D=>{var F=Ku();l(D,F)},body:D=>{var F=eh(),M=i(d(F),2),P=d(M);Et(P,{options:A,get value(){return e(k)},set value(_e){s(k,n(_e))}}),c(M);var W=i(M,2);{var Q=_e=>{var pe=Vu(),je=i(ee(pe),2),ge=d(je);Ve(ge,{get selected(){return e(v)},set selected(Me){s(v,n(Me))}}),c(je);var de=i(je,2);{var we=Me=>{ka(Me,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(g).root_pem},get value(){return e(y).root_pem},set value(Ce){e(y).root_pem=Ce},children:(Ce,xe)=>{G();var Re=V("Root Certificate in PEM format");l(Ce,Re)},$$slots:{default:!0}})},ye=Me=>{var Ce=Fu(),xe=i(ee(Ce),2),Re=d(xe);Ve(Re,{get selected(){return e(y).danger_allow_insecure},set selected(X){e(y).danger_allow_insecure=X}}),c(xe),l(Me,Ce)};O(de,Me=>{e(v)?Me(we):Me(ye,!1)})}l(_e,pe)};O(W,_e=>{e(u)||_e(Q)})}var z=i(W,2);{var K=_e=>{var pe=Ju(),je=ee(pe);ne(je,{type:"url",name:"issuer",placeholder:"Issuer URL",width:o,get value(){return e(y).issuer},set value(de){e(y).issuer=de},get error(){return e(g).issuer},set error(de){e(g).issuer=de},$$events:{input:L,enter:x},children:(de,we)=>{G();var ye=V("ISSUER URL");l(de,ye)},$$slots:{default:!0}});var ge=i(je,2);Se(ge,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(de){s(h,n(de))},$$events:{click:x},children:(de,we)=>{G();var ye=V("LOOKUP");l(de,ye)},$$slots:{default:!0}}),l(_e,pe)},J=_e=>{var pe=me(),je=ee(pe);{var ge=we=>{var ye=Yu(),Me=ee(ye);ne(Me,{type:"url",name:"metadata",placeholder:".../.well-known/openid-configuration",width:o,get value(){return e(y).metadata_url},set value(xe){e(y).metadata_url=xe},get error(){return e(g).metadata_url},set error(xe){e(g).metadata_url=xe},$$events:{input:L,enter:x},children:(xe,Re)=>{G();var X=V("METADATA URL");l(xe,X)},$$slots:{default:!0}});var Ce=i(Me,2);Se(Ce,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(xe){s(h,n(xe))},$$events:{click:x},children:(xe,Re)=>{G();var X=V("LOOKUP");l(xe,X)},$$slots:{default:!0}}),l(we,ye)},de=we=>{var ye=me(),Me=ee(ye);{var Ce=xe=>{var Re=Hu(),X=ee(Re);{var Ie=ae=>{ka(ae,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(g).root_pem},get disabled(){return e(u)},get value(){return e(f).root_pem},set value(Ge){e(f).root_pem=Ge},children:(Ge,ze)=>{G();var Ut=V("Root Certificate in PEM format");l(Ge,Ut)},$$slots:{default:!0}})},fe=ae=>{var Ge=Xu(),ze=i(ee(Ge),2),Ut=d(ze);{var Zt=Ot=>{ta(Ot,{get check(){return e(f).danger_allow_insecure}})},Kt=Ot=>{Ve(Ot,{get selected(){return e(f).danger_allow_insecure},set selected(Ft){e(f).danger_allow_insecure=Ft}})};O(Ut,Ot=>{e(u)?Ot(Zt):Ot(Kt,!1)})}c(ze),l(ae,Ge)};O(X,ae=>{e(v)?ae(Ie):ae(fe,!1)})}var Ue=i(X,2);ne(Ue,{type:"url",name:"issuer",placeholder:"Issuer URL",width:o,get disabled(){return e(u)},get value(){return e(f).issuer},set value(ae){e(f).issuer=ae},get error(){return e(g).issuer},set error(ae){e(g).issuer=ae},$$events:{input:L},children:(ae,Ge)=>{G();var ze=V("ISSUER URL");l(ae,ze)},$$slots:{default:!0}});var Je=i(Ue,2);ne(Je,{type:"url",name:"auth_endpoint",placeholder:"Authorization Endpoint",width:o,get disabled(){return e(u)},get value(){return e(f).authorization_endpoint},set value(ae){e(f).authorization_endpoint=ae},get error(){return e(g).authorization_endpoint},set error(ae){e(g).authorization_endpoint=ae},$$events:{input:L},children:(ae,Ge)=>{G();var ze=V("AUTHORIZATION ENDPOINT");l(ae,ze)},$$slots:{default:!0}});var rt=i(Je,2);ne(rt,{type:"url",name:"token_endpoint",placeholder:"Token Endpoint",width:o,get disabled(){return e(u)},get value(){return e(f).token_endpoint},set value(ae){e(f).token_endpoint=ae},get error(){return e(g).token_endpoint},set error(ae){e(g).token_endpoint=ae},$$events:{input:L},children:(ae,Ge)=>{G();var ze=V("TOKEN ENDPOINT");l(ae,ze)},$$slots:{default:!0}});var ct=i(rt,2);ne(ct,{type:"url",name:"userinfo_endpoint",placeholder:"Userinfo Endpoint",width:o,get disabled(){return e(u)},get value(){return e(f).userinfo_endpoint},set value(ae){e(f).userinfo_endpoint=ae},get error(){return e(g).userinfo_endpoint},set error(ae){e(g).userinfo_endpoint=ae},$$events:{input:L},children:(ae,Ge)=>{G();var ze=V("USERINFO ENDPOINT");l(ae,ze)},$$slots:{default:!0}});var We=i(ct,4),Ke=d(We);{var it=ae=>{ta(ae,{get check(){return e(f).use_pkce}})},It=ae=>{Ve(ae,{get selected(){return e(f).use_pkce},set selected(Ge){e(f).use_pkce=Ge}})};O(Ke,ae=>{e(u)?ae(it):ae(It,!1)})}c(We);var $t=i(We,4);ne($t,{name:"scope",placeholder:"openid profile email",width:o,get value(){return e(f).scope},set value(ae){e(f).scope=ae},get error(){return e(g).scope},set error(ae){e(g).scope=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("SCOPE");l(ae,ze)},$$slots:{default:!0}});var Qe=i($t,4);ne(Qe,{name:"client_name",placeholder:"Client Name",width:o,get value(){return e(f).name},set value(ae){e(f).name=ae},get error(){return e(g).name},set error(ae){e(g).name=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("CLIENT NAME");l(ae,ze)},$$slots:{default:!0}});var et=i(Qe,4);ne(et,{name:"client_id",autocomplete:"off",placeholder:"Client ID",width:o,get value(){return e(f).client_id},set value(ae){e(f).client_id=ae},get error(){return e(g).client_id},set error(ae){e(g).client_id=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("CLIENT ID");l(ae,ze)},$$slots:{default:!0}});var gt=i(et,4);Gt(gt,{name:"client_secret",get error(){return e(g).client_secret},autocomplete:"off",placeholder:"Client Secret",width:o,get value(){return e(f).client_secret},set value(ae){e(f).client_secret=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("CLIENT SECRET");l(ae,ze)},$$slots:{default:!0}});var ht=i(gt,4),Ct=i(d(ht),2);Ve(Ct,{get selected(){return e(f).client_secret_basic},set selected(ae){e(f).client_secret_basic=ae}}),c(ht);var at=i(ht,2),st=i(d(at),2);Ve(st,{get selected(){return e(f).client_secret_post},set selected(ae){e(f).client_secret_post=ae}}),c(at);var se=i(at,2);$s(se);var Ae=i(se,4);ne(Ae,{name:"admin_claim_path",placeholder:"$.roles.*",width:o,get value(){return e(f).admin_claim_path},set value(ae){e(f).admin_claim_path=ae},get error(){return e(g).admin_claim_path},set error(ae){e(g).admin_claim_path=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("ADMIN CLAIM PATH");l(ae,ze)},$$slots:{default:!0}});var Pe=i(Ae,2);ne(Pe,{name:"admin_claim_value",placeholder:"rauthy_admin",width:o,get value(){return e(f).admin_claim_value},set value(ae){e(f).admin_claim_value=ae},get error(){return e(g).admin_claim_value},set error(ae){e(g).admin_claim_value=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("ADMIN CLAIM VALUE");l(ae,ze)},$$slots:{default:!0}});var H=i(Pe,4);ne(H,{name:"mfa_claim_path",placeholder:"$.amr.*",width:o,get value(){return e(f).mfa_claim_path},set value(ae){e(f).mfa_claim_path=ae},get error(){return e(g).mfa_claim_path},set error(ae){e(g).mfa_claim_path=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("MFA CLAIM PATH");l(ae,ze)},$$slots:{default:!0}});var Ee=i(H,2);ne(Ee,{name:"mfa_claim_value",placeholder:"mfa",width:o,get value(){return e(f).mfa_claim_value},set value(ae){e(f).mfa_claim_value=ae},get error(){return e(g).mfa_claim_value},set error(ae){e(g).mfa_claim_value=ae},$$events:{input:C},children:(ae,Ge)=>{G();var ze=V("MFA CLAIM VALUE");l(ae,ze)},$$slots:{default:!0}});var Ne=i(Ee,2);Se(Ne,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(ae){s(h,n(ae))},$$events:{click:_},children:(ae,Ge)=>{G();var ze=V("SAVE");l(ae,ze)},$$slots:{default:!0}});var At=i(Ne,2);Se(At,{level:4,width:"6rem",get isLoading(){return e(h)},set isLoading(ae){s(h,n(ae))},$$events:{click:b},children:(ae,Ge)=>{G();var ze=V("RESET");l(ae,ze)},$$slots:{default:!0}}),l(xe,Re)};O(Me,xe=>{(e(B)||e(R)||e(u))&&xe(Ce)},!0)}l(we,ye)};O(je,we=>{e(j)&&!e(u)?we(ge):we(de,!1)},!0)}l(_e,pe)};O(z,_e=>{e(N)&&!e(u)?_e(K):_e(J,!1)})}var Z=i(z,2);{var re=_e=>{var pe=Zu();l(_e,pe)};O(Z,_e=>{e(E)&&_e(re)})}var ve=i(Z,2);{var $e=_e=>{var pe=Qu(),je=d(pe,!0);c(pe),q(()=>Y(je,e(m))),l(_e,pe)};O(ve,_e=>{e(m)&&_e($e)})}c(F),l(D,F)},$$slots:{header:!0,body:!0}}),ie()}var ah=T('<img alt="No Logo Available">');function sh(p,a){le(a,!0);var t=ah();q(()=>ce(t,"src",`/auth/v1/providers/${a.providerId}/img?${zt(6)}`)),ce(t,"width",20),ce(t,"height",20),l(p,t),ie()}var rh=T('<div class="header svelte-19hes5">Allow insecure TLS certificates</div> <div class="ml mb svelte-19hes5"><!></div>',1),lh=T('<div class="success svelte-19hes5">Success</div>'),ih=T('<div class="mainErr err svelte-19hes5"> </div>'),nh=T("<!> <!> <!>",1),oh=T(`<div class="container svelte-19hes5"><div class="unit svelte-19hes5"><div class="label font-label svelte-19hes5">ID</div> <div class="value font-mono svelte-19hes5"> </div></div> <div class="separator"></div> <div class="header svelte-19hes5">Enabled</div> <div class="ml mb svelte-19hes5"><!></div> <div class="header svelte-19hes5">Custom Root CA PEM</div> <div class="ml mb svelte-19hes5"><!></div> <!> <!> <!> <!> <!> <div class="header svelte-19hes5">Use PKCE</div> <div class="ml mb svelte-19hes5"><!></div> <div class="desc svelte-19hes5">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-19hes5">Client name for the Rauthy login form</div> <!> <div class="desc svelte-19hes5">Client ID given by the auth provider</div> <!> <div class="desc svelte-19hes5">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
            In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-19hes5"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-19hes5"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">If your provider issues a claim indicating that the user has used at least 2FA during
            login, you can specify the mfa claim path.</p></div> <!> <!> <div class="logo svelte-19hes5"><!> <!></div> <!></div>`);function vh(p,a){le(a,!0);let t=U(a,"provider",31,()=>n({}));const o="25rem";let r=S(!1),h=S(""),m=S(!1),u=S(void 0),E=S(n(t().root_pem)),I=S(void 0);Le(()=>()=>clearTimeout(e(u)));let v=S(n({}));const y=He().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),authorization_endpoint:he().url(),token_endpoint:he().url(),userinfo_endpoint:he().url(),name:he().trim().matches(Qt,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Ya,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")});async function f(){if(e(E)||t(t().root_pem=void 0,!0),!await k())return;if(!t().use_pkce&&!t().client_secret){s(h,"Must at least be a confidential client or use PKCE");return}s(h,""),s(r,!0),t().root_pem?(t(t().danger_allow_insecure=!1,!0),t(t().root_pem=t().root_pem.trim(),!0)):t(t().root_pem=void 0,!0);let X=await Qr(t().id,t());if(X.ok)s(m,!0);else{let Ie=await X.json();s(h,n(Ie.message))}s(r,!1)}async function A(X){s(r,!0);let Ie=await al(t().id,X);if(!Ie.ok){let fe=await Ie.json();console.error(fe.message)}s(r,!1)}async function k(){s(v,n({}));try{return await y.validate(t(),{abortEarly:!1}),t().client_secret&&!(t().client_secret_basic||t().client_secret_post)?(s(h,"You have given a client secret, but no client auth method is active"),!1):(t().root_pem&&t().root_pem.length>0?ua.test(t().root_pem.trim())||(e(v).root_pem="Invalid PEM certificate"):s(h,"Invalid input"),!0)}catch(X){return s(v,n(Xe(X))),!1}}Te(()=>{e(m)&&s(u,n(setTimeout(()=>{s(m,!1),a.onSave()},2e3)))}),Te(()=>{t().scope&&t(t().scope=t().scope.replaceAll("+"," "),!0)}),Te(()=>{e(I)&&A(e(I))});var g=oh(),w=d(g),$=i(d(w),2),_=d($,!0);c($),c(w);var x=i(w,6),b=d(x);Ve(b,{get selected(){return t().enabled},set selected(X){t(t().enabled=X,!0)}}),c(x);var C=i(x,4),L=d(C);Ve(L,{get selected(){return e(E)},set selected(X){s(E,n(X))}}),c(C);var j=i(C,2);{var R=X=>{ka(X,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----`,get error(){return e(v).root_pem},get value(){return t().root_pem},set value(Ie){t(t().root_pem=Ie,!0)},children:(Ie,fe)=>{G();var Ue=V("Root Certificate in PEM format");l(Ie,Ue)},$$slots:{default:!0}})},N=X=>{var Ie=rh(),fe=i(ee(Ie),2),Ue=d(fe);Ve(Ue,{get selected(){return t().danger_allow_insecure},set selected(Je){t(t().danger_allow_insecure=Je,!0)}}),c(fe),l(X,Ie)};O(j,X=>{e(E)?X(R):X(N,!1)})}var B=i(j,2);ne(B,{autocomplete:"off",placeholder:"Issuer URL",width:o,get value(){return t().issuer},set value(X){t(t().issuer=X,!0)},get error(){return e(v).issuer},set error(X){e(v).issuer=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("ISSUER URL");l(X,fe)},$$slots:{default:!0}});var D=i(B,2);ne(D,{autocomplete:"off",placeholder:"Authorization Endpoint",width:o,get value(){return t().authorization_endpoint},set value(X){t(t().authorization_endpoint=X,!0)},get error(){return e(v).authorization_endpoint},set error(X){e(v).authorization_endpoint=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("AUTHORIZATION ENDPOINT");l(X,fe)},$$slots:{default:!0}});var F=i(D,2);ne(F,{autocomplete:"off",placeholder:"Token Endpoint",width:o,get value(){return t().token_endpoint},set value(X){t(t().token_endpoint=X,!0)},get error(){return e(v).token_endpoint},set error(X){e(v).token_endpoint=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("TOKEN ENDPOINT");l(X,fe)},$$slots:{default:!0}});var M=i(F,2);ne(M,{autocomplete:"off",placeholder:"Userinfo Endpoint",width:o,get value(){return t().userinfo_endpoint},set value(X){t(t().userinfo_endpoint=X,!0)},get error(){return e(v).userinfo_endpoint},set error(X){e(v).userinfo_endpoint=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("USERINFO ENDPOINT");l(X,fe)},$$slots:{default:!0}});var P=i(M,4),W=d(P);Ve(W,{get selected(){return t().use_pkce},set selected(X){t(t().use_pkce=X,!0)}}),c(P);var Q=i(P,4);ne(Q,{autocomplete:"off",placeholder:"openid profile email",width:o,get value(){return t().scope},set value(X){t(t().scope=X,!0)},get error(){return e(v).scope},set error(X){e(v).scope=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("SCOPE");l(X,fe)},$$slots:{default:!0}});var z=i(Q,4);ne(z,{autocomplete:"off",placeholder:"Client Name",width:o,get value(){return t().name},set value(X){t(t().name=X,!0)},get error(){return e(v).name},set error(X){e(v).name=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("CLIENT NAME");l(X,fe)},$$slots:{default:!0}});var K=i(z,4);ne(K,{autocomplete:"off",placeholder:"Client ID",width:o,get value(){return t().client_id},set value(X){t(t().client_id=X,!0)},get error(){return e(v).client_id},set error(X){e(v).client_id=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("CLIENT ID");l(X,fe)},$$slots:{default:!0}});var J=i(K,4);Gt(J,{get error(){return e(v).client_secret},autocomplete:"off",placeholder:"Client Secret",width:o,get value(){return t().client_secret},set value(X){t(t().client_secret=X,!0)},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("CLIENT SECRET");l(X,fe)},$$slots:{default:!0}});var Z=i(J,4),re=i(d(Z),2);Ve(re,{get selected(){return t().client_secret_basic},set selected(X){t(t().client_secret_basic=X,!0)}}),c(Z);var ve=i(Z,2),$e=i(d(ve),2);Ve($e,{get selected(){return t().client_secret_post},set selected(X){t(t().client_secret_post=X,!0)}}),c(ve);var _e=i(ve,2);$s(_e);var pe=i(_e,4);ne(pe,{autocomplete:"off",placeholder:"$.roles.*",width:o,get value(){return t().admin_claim_path},set value(X){t(t().admin_claim_path=X,!0)},get error(){return e(v).admin_claim_path},set error(X){e(v).admin_claim_path=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("ADMIN CLAIM PATH");l(X,fe)},$$slots:{default:!0}});var je=i(pe,2);ne(je,{autocomplete:"off",placeholder:"rauthy_admin",width:o,get value(){return t().admin_claim_value},set value(X){t(t().admin_claim_value=X,!0)},get error(){return e(v).admin_claim_value},set error(X){e(v).admin_claim_value=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("ADMIN CLAIM VALUE");l(X,fe)},$$slots:{default:!0}});var ge=i(je,4);ne(ge,{autocomplete:"off",placeholder:"$.amr.*",width:o,get value(){return t().mfa_claim_path},set value(X){t(t().mfa_claim_path=X,!0)},get error(){return e(v).mfa_claim_path},set error(X){e(v).mfa_claim_path=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("MFA CLAIM PATH");l(X,fe)},$$slots:{default:!0}});var de=i(ge,2);ne(de,{autocomplete:"off",placeholder:"mfa",width:o,get value(){return t().mfa_claim_value},set value(X){t(t().mfa_claim_value=X,!0)},get error(){return e(v).mfa_claim_value},set error(X){e(v).mfa_claim_value=X},$$events:{input:k},children:(X,Ie)=>{G();var fe=V("MFA CLAIM VALUE");l(X,fe)},$$slots:{default:!0}});var we=i(de,2),ye=d(we);ms(ye,{get image(){return e(I)},set image(X){s(I,n(X))}});var Me=i(ye,2);{var Ce=X=>{sh(X,{get providerId(){return t().id}})};O(Me,X=>{e(r)||X(Ce)})}c(we);var xe=i(we,2);{var Re=X=>{var Ie=nh(),fe=ee(Ie);Se(fe,{level:1,width:"4rem",get isLoading(){return e(r)},set isLoading(We){s(r,n(We))},$$events:{click:f},children:(We,Ke)=>{G();var it=V("SAVE");l(We,it)},$$slots:{default:!0}});var Ue=i(fe,2);{var Je=We=>{var Ke=lh();l(We,Ke)};O(Ue,We=>{e(m)&&We(Je)})}var rt=i(Ue,2);{var ct=We=>{var Ke=ih(),it=d(Ke,!0);c(Ke),q(()=>Y(it,e(h))),l(We,Ke)};O(rt,We=>{e(h)&&We(ct)})}l(X,Ie)};O(xe,X=>{X(Re)})}c(g),q(()=>Y(_,t().id)),l(p,g),ie()}var ch=T("<p> </p>"),dh=T(`<div class="label svelte-1tncxap"><p>This provider is in use by active users.</p> <p>You can force delete it, but users without a local password or passkey
                will not be able to log in anymore.</p> <details><summary>Linked Users</summary> <!></details></div> <div class="label svelte-1tncxap"><p>Are you sure you want to delete this provider?</p> <div class="forceDelete svelte-1tncxap">FORCE DELETE <!></div></div> <!>`,1),uh=T('<div class="label svelte-1tncxap">Are you sure, you want to delete this provider?</div> <!>',1),hh=T('<div class="err svelte-1tncxap"> </div>'),ph=T('<div class="container svelte-1tncxap"><!> <!></div>');function mh(p,a){le(a,!0);let t=U(a,"provider",19,()=>({})),o=S(!0),r=S(""),h=S(!1),m=S(n([]));Le(async()=>{let k=await tl(t().id),g=await k.json();k.status===406?s(m,n(g)):s(r,n(g.message)),s(o,!1)});async function u(){s(r,""),s(o,!0);let k=await el(t().id);if(k.ok)a.onSave();else{let g=await k.json();s(r,n(g.message))}s(o,!1)}var E=ph(),I=d(E);{var v=k=>{var g=dh(),w=ee(g),$=i(d(w),4),_=i(d($),2);qe(_,17,()=>e(m),R=>R.id,(R,N)=>{var B=ch(),D=d(B);c(B),q(()=>Y(D,`${e(N).id??""} ${e(N).email??""}`)),l(R,B)}),c($),c(w);var x=i(w,2),b=i(d(x),2),C=i(d(b));Ve(C,{get selected(){return e(h)},set selected(R){s(h,n(R))}}),c(b),c(x);var L=i(x,2);{var j=R=>{Se(R,{level:1,get isLoading(){return e(o)},set isLoading(N){s(o,n(N))},$$events:{click:u},children:(N,B)=>{G();var D=V("DELETE");l(N,D)},$$slots:{default:!0}})};O(L,R=>{e(h)&&R(j)})}l(k,g)},y=k=>{var g=uh(),w=i(ee(g),2);Se(w,{level:1,get isLoading(){return e(o)},set isLoading($){s(o,n($))},$$events:{click:u},children:($,_)=>{G();var x=V("DELETE");l($,x)},$$slots:{default:!0}}),l(k,g)};O(I,k=>{e(m).length>0?k(v):k(y,!1)})}var f=i(I,2);{var A=k=>{var g=hh(),w=d(g,!0);c(g),q(()=>Y(w,e(r))),l(k,g)};O(f,k=>{e(r)&&k(A)})}c(E),l(p,E),ie()}var fh=T('<div class="data font-mono svelte-115hohv"> </div>'),gh=T('<div class="data svelte-115hohv"> </div>'),wh=T('<div class="header svelte-115hohv"><!> <!></div>'),yh=T("<div><!></div>"),bh=T("<div><!></div>"),$h=T("<div><!> <!></div>");function _h(p,a){le(a,!0);let t=U(a,"provider",31,()=>n({})),o=U(a,"onSave",15),r=S(void 0);const h=["Config","Delete"];let m=S(n(h[0]));const u=200,E=u/2;vt(p,{get show(){return e(r)},set show(I){s(r,n(I))},header:I=>{var v=wh(),y=d(v);Ze(y,{text:"Provider ID",children:(A,k)=>{var g=fh(),w=d(g,!0);c(g),q(()=>Y(w,t().id)),l(A,g)},$$slots:{default:!0}});var f=i(y,2);Ze(f,{text:"Provider Name",children:(A,k)=>{var g=gh(),w=d(g,!0);c(g),q(()=>Y(w,t().name)),l(A,g)},$$slots:{default:!0}}),c(v),l(I,v)},body:I=>{var v=$h(),y=d(v);Dt(y,{labels:h,get selected(){return e(m)},set selected(g){s(m,n(g))}});var f=i(y,2);{var A=g=>{var w=yh(),$=d(w);vh($,{get provider(){return t()},set provider(_){t(_)},get onSave(){return o()},set onSave(_){o(_)}}),c(w),ue(1,w,()=>be,()=>({delay:E,duration:u})),ue(2,w,()=>be,()=>({duration:u})),l(g,w)},k=g=>{var w=me(),$=ee(w);{var _=x=>{var b=bh(),C=d(b);mh(C,{get provider(){return t()},set provider(L){t(L)},get onSave(){return o()},set onSave(L){o(L)}}),c(b),ue(1,b,()=>be,()=>({delay:E,duration:u})),ue(2,b,()=>be,()=>({duration:u})),l(x,b)};O($,x=>{e(m)==="Delete"&&x(_)},!0)}l(g,w)};O(f,g=>{e(m)==="Config"?g(A):g(k,!1)})}c(v),l(I,v)},$$slots:{header:!0,body:!0}}),ie()}var kh=T('<div class="svelte-4dnryh"><!></div>'),xh=T(' <div class="content"><!> <div id="federation" class="svelte-4dnryh"></div> <div style="height: 20px"></div></div>',1);function Eh(p,a){le(a,!0);let t=S(""),o=S(n([]));Le(()=>{r()});async function r(){let y=await Hr(),f=await y.json();y.ok?s(o,n([...f])):s(t,n(f.message))}function h(){r()}G();var m=xh(),u=ee(m),E=i(u),I=d(E);th(I,{onSave:h});var v=i(I,2);qe(v,23,()=>e(o),y=>y.id,(y,f,A)=>{var k=kh(),g=d(k);_h(g,{onSave:h,get provider(){return e(o)[e(A)]},set provider(w){e(o)[e(A)]=w}}),c(k),l(y,k)}),c(v),G(2),c(E),q(()=>Y(u,`${e(t)??""} `)),l(p,m),ie()}var Ih=T("<div><div><!></div></div>"),Sh=T("<div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>"),Th=T('<main class="svelte-1a52j8o"><!> <div class="inner svelte-1a52j8o"><!> <!></div></main>');function Ch(p,a){le(a,!0);let t=U(a,"selected",15,"Users"),o=S("Rauthy Admin"),r=S(!0),h=S(!0),m=S(!1),u=S(void 0);Te(()=>{e(u)&&(s(r,e(u)>1050),s(h,e(u)<1050),s(m,e(u)>1450))}),Te(()=>{if(t())switch(t()){case"Users":{window.history.pushState("Users","","/auth/v1/admin/users"),s(o,"Users");break}case"Attributes":{window.history.pushState("Attributes","","/auth/v1/admin/attributes"),s(o,"Attributes");break}case"Clients":{window.history.pushState("Clients","","/auth/v1/admin/clients"),s(o,"Clients");break}case"Roles":{window.history.pushState("Roles","","/auth/v1/admin/roles"),s(o,"Roles");break}case"Groups":{window.history.pushState("Groups","","/auth/v1/admin/groups"),s(o,"Groups");break}case"Scopes":{window.history.pushState("Scopes","","/auth/v1/admin/scopes"),s(o,"Scopes");break}case"Sessions":{window.history.pushState("Sessions","","/auth/v1/admin/sessions"),s(o,"Sessions");break}case"Events":{window.history.pushState("Sessions","","/auth/v1/admin/events"),s(o,"Events");break}case"Blacklist":{window.history.pushState("Blacklist","","/auth/v1/admin/blacklist"),s(o,"Blacklist");break}case"ApiKeys":{window.history.pushState("ApiKeys","","/auth/v1/admin/api_keys"),s(o,"ApiKeys");break}case"Providers":{window.history.pushState("Providers","","/auth/v1/admin/providers"),s(o,"Providers");break}case"Config":{window.history.pushState("Config","","/auth/v1/admin/config"),s(o,"Config");break}case"Docs":{window.history.pushState("Docs","","/auth/v1/admin/docs"),s(o,"Docs");break}case"Logout":Xs();break}}),Le(()=>(window.addEventListener("popstate",I),E(window.innerWidth),()=>window.removeEventListener("popstate",I)));function E(_){s(r,_>1050),s(h,_<1050),s(m,_>1450)}function I(_){t(_.state)}var v=Th();ja(_=>{q(()=>Da.title=e(o))});var y=d(v);Ir(y,{widthExpanded:150,widthCollapsed:70,get selected(){return t()},set selected(_){t(_)},get isExpanded(){return e(r)},set isExpanded(_){s(r,n(_))},logo:_=>{var x=Ih(),b=d(x),C=d(b);$d(C),c(b),c(x),q(()=>{oe(b,"width",e(r)?"120px":"55px"),oe(b,"margin-top",e(r)?"32px":"40px"),oe(b,"margin-bottom",e(r)?"13px":"22px")}),l(_,x)},entries:_=>{var x=Sh(),b=d(x);ft(b,{label:"Users",children:(K,J)=>{od(K,{})},$$slots:{default:!0}});var C=i(b,2);ft(C,{label:"Attributes",children:(K,J)=>{pd(K,{})},$$slots:{default:!0}});var L=i(C,2);ft(L,{label:"Clients",children:(K,J)=>{cd(K,{})},$$slots:{default:!0}});var j=i(L,2);ft(j,{label:"Roles",children:(K,J)=>{gs(K,{})},$$slots:{default:!0}});var R=i(j,2);ft(R,{label:"Groups",children:(K,J)=>{ud(K,{})},$$slots:{default:!0}});var N=i(R,2);ft(N,{label:"Scopes",children:(K,J)=>{yd(K,{})},$$slots:{default:!0}});var B=i(N,2);ft(B,{label:"Sessions",children:(K,J)=>{gs(K,{})},$$slots:{default:!0}});var D=i(B,2);ft(D,{label:"Events",children:(K,J)=>{zu(K,{})},$$slots:{default:!0}});var F=i(D,2);ft(F,{label:"Blacklist",children:(K,J)=>{ea(K,{width:24,color:"currentColor"})},$$slots:{default:!0}});var M=i(F,2);ft(M,{label:"ApiKeys",children:(K,J)=>{ru(K,{})},$$slots:{default:!0}});var P=i(M,2);ft(P,{label:"Providers",children:(K,J)=>{Wu(K,{})},$$slots:{default:!0}});var W=i(P,2);ft(W,{label:"Config",children:(K,J)=>{id(K,{})},$$slots:{default:!0}});var Q=i(W,2);ft(Q,{label:"Docs",children:(K,J)=>{Ed(K,{})},$$slots:{default:!0}});var z=i(Q,2);ft(z,{label:"Logout",children:(K,J)=>{gd(K,{})},$$slots:{default:!0}}),c(x),l(_,x)},$$slots:{logo:!0,entries:!0}});var f=i(y,2),A=d(f);{var k=_=>{bt(_,{get eventsWide(){return e(m)},set eventsWide(x){s(m,n(x))},get eventsCollapsed(){return e(h)},set eventsCollapsed(x){s(h,n(x))},children:(x,b)=>{Cn(x,{})},$$slots:{default:!0}})},g=_=>{var x=me(),b=ee(x);{var C=j=>{bt(j,{get eventsWide(){return e(m)},set eventsWide(R){s(m,n(R))},get eventsCollapsed(){return e(h)},set eventsCollapsed(R){s(h,n(R))},children:(R,N)=>{Lc(R,{})},$$slots:{default:!0}})},L=j=>{var R=me(),N=ee(R);{var B=F=>{bt(F,{get eventsWide(){return e(m)},set eventsWide(M){s(m,n(M))},get eventsCollapsed(){return e(h)},set eventsCollapsed(M){s(h,n(M))},children:(M,P)=>{tc(M,{})},$$slots:{default:!0}})},D=F=>{var M=me(),P=ee(M);{var W=z=>{bt(z,{get eventsWide(){return e(m)},set eventsWide(K){s(m,n(K))},get eventsCollapsed(){return e(h)},set eventsCollapsed(K){s(h,n(K))},children:(K,J)=>{eo(K,{})},$$slots:{default:!0}})},Q=z=>{var K=me(),J=ee(K);{var Z=ve=>{bt(ve,{get eventsWide(){return e(m)},set eventsWide($e){s(m,n($e))},get eventsCollapsed(){return e(h)},set eventsCollapsed($e){s(h,n($e))},children:($e,_e)=>{ko($e,{})},$$slots:{default:!0}})},re=ve=>{var $e=me(),_e=ee($e);{var pe=ge=>{bt(ge,{get eventsWide(){return e(m)},set eventsWide(de){s(m,n(de))},get eventsCollapsed(){return e(h)},set eventsCollapsed(de){s(h,n(de))},children:(de,we)=>{Xo(de,{})},$$slots:{default:!0}})},je=ge=>{var de=me(),we=ee(de);{var ye=Ce=>{bt(Ce,{get eventsWide(){return e(m)},set eventsWide(xe){s(m,n(xe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(xe){s(h,n(xe))},children:(xe,Re)=>{dc(xe,{})},$$slots:{default:!0}})},Me=Ce=>{var xe=me(),Re=ee(xe);{var X=fe=>{bt(fe,{get eventsWide(){return e(m)},set eventsWide(Ue){s(m,n(Ue))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ue){s(h,n(Ue))},children:(Ue,Je)=>{Mu(Ue,{})},$$slots:{default:!0}})},Ie=fe=>{var Ue=me(),Je=ee(Ue);{var rt=We=>{bt(We,{get eventsWide(){return e(m)},set eventsWide(Ke){s(m,n(Ke))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ke){s(h,n(Ke))},children:(Ke,it)=>{au(Ke,{})},$$slots:{default:!0}})},ct=We=>{var Ke=me(),it=ee(Ke);{var It=Qe=>{bt(Qe,{get eventsWide(){return e(m)},set eventsWide(et){s(m,n(et))},get eventsCollapsed(){return e(h)},set eventsCollapsed(et){s(h,n(et))},children:(et,gt)=>{Du(et,{})},$$slots:{default:!0}})},$t=Qe=>{var et=me(),gt=ee(et);{var ht=at=>{bt(at,{get eventsWide(){return e(m)},set eventsWide(st){s(m,n(st))},get eventsCollapsed(){return e(h)},set eventsCollapsed(st){s(h,n(st))},children:(st,se)=>{Eh(st,{})},$$slots:{default:!0}})},Ct=at=>{var st=me(),se=ee(st);{var Ae=H=>{bt(H,{get eventsWide(){return e(m)},set eventsWide(Ee){s(m,n(Ee))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ee){s(h,n(Ee))},children:(Ee,Ne)=>{rd(Ee)},$$slots:{default:!0}})},Pe=H=>{var Ee=me(),Ne=ee(Ee);{var At=ae=>{bt(ae,{get eventsWide(){return e(m)},set eventsWide(Ge){s(m,n(Ge))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ge){s(h,n(Ge))},children:(Ge,ze)=>{kd(Ge)},$$slots:{default:!0}})};O(Ne,ae=>{t()==="Docs"&&ae(At)},!0)}l(H,Ee)};O(se,H=>{t()==="Config"?H(Ae):H(Pe,!1)},!0)}l(at,st)};O(gt,at=>{t()==="Providers"?at(ht):at(Ct,!1)},!0)}l(Qe,et)};O(it,Qe=>{t()==="ApiKeys"?Qe(It):Qe($t,!1)},!0)}l(We,Ke)};O(Je,We=>{t()==="Blacklist"?We(rt):We(ct,!1)},!0)}l(fe,Ue)};O(Re,fe=>{t()==="Events"?fe(X):fe(Ie,!1)},!0)}l(Ce,xe)};O(we,Ce=>{t()==="Sessions"?Ce(ye):Ce(Me,!1)},!0)}l(ge,de)};O(_e,ge=>{t()==="Scopes"?ge(pe):ge(je,!1)},!0)}l(ve,$e)};O(J,ve=>{t()==="Groups"?ve(Z):ve(re,!1)},!0)}l(z,K)};O(P,z=>{t()==="Roles"?z(W):z(Q,!1)},!0)}l(F,M)};O(N,F=>{t()==="Clients"?F(B):F(D,!1)},!0)}l(j,R)};O(b,j=>{t()==="Attributes"?j(C):j(L,!1)},!0)}l(_,x)};O(A,_=>{t()==="Users"?_(k):_(g,!1)})}var w=i(A,2);{var $=_=>{Yd(_,{get collapsed(){return e(h)},get wide(){return e(m)}})};O(w,_=>{e(u)!==void 0&&_($)})}c(f),c(v),sr("innerWidth",_=>s(u,n(_))),l(p,v),ie()}var Ah=T('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">A rauthy admin account must have <b>MFA enabled.</b><br> Please navigate to your <b>account</b> and activate MFA.<br> Afterwards, you need to do a logout and log back in.</div> <!></div>'),Lh=T('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">You are not assigned to the <b>rauthy_admin</b> role.<br> You do not have access to the admin panel.</div> <!></div>');function Nh(p,a){le(a,!0);let t=U(a,"selected",15,"Users"),o=S(void 0),r=S(!1),h=S(!1);Le(async()=>{let v=await js();if(v.ok){let y=await v.json(),f=await Os();f.ok?(s(o,n(y)),s(r,!0)):f.status===406?(s(h,!0),s(o,n({}))):s(o,n({}))}else Ka()});var m=me();ja(v=>{Da.title="Admin"});var u=ee(m);{var E=v=>{ha(v,{})},I=v=>{var y=me(),f=ee(y);{var A=g=>{var w=Ah(),$=i(d(w),2);Se($,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(_,x)=>{G();var b=V("ACCOUNT");l(_,b)},$$slots:{default:!0}}),c(w),l(g,w)},k=g=>{var w=me(),$=ee(w);{var _=b=>{var C=Lh(),L=i(d(C),2);Se(L,{$$events:{click:()=>window.location.href="/auth/v1/"},children:(j,R)=>{G();var N=V("GO BACK");l(j,N)},$$slots:{default:!0}}),c(C),l(b,C)},x=b=>{Ch(b,{get selected(){return t()},set selected(C){t(C)}})};O($,b=>{e(r)?b(x,!1):b(_)},!0)}l(g,w)};O(f,g=>{e(h)?g(A):g(k,!1)},!0)}l(v,y)};O(u,v=>{!e(o)&&!e(h)?v(E):v(I,!1)})}l(p,m),ie()}export{Nh as A};
