import"./disclose-version.BDr9Qe-U.js";import{p as h,a0 as c,A as k,a6 as f,t as x,a as y,y as e,z as A,ab as s,c as S,r as T}from"./index-client.Di99sPv0.js";import{a as z,t as B}from"./template.BEKX6jgL.js";import{t as C}from"./class.BCapn1bP.js";import{p as d}from"./proxy.BQ2dmY0t.js";import{p as I}from"./props.ClgLgKUv.js";import{u as M}from"./i18n.svelte.Bc6aINkd.js";import{t as O,L as P,u as _}from"./helpers.D3KrX4pz.js";import{O as E}from"./Options.DtWx0xTK.js";import{b as G}from"./fetch.DxJS_Pk_.js";import{p as N}from"./index.DebvWAJn.js";var U=B('<div class="svelte-10y6iii"><!></div>');function X(v,t){h(t,!0);let i=I(t,"openTop",3,!0);const m=";Path=/;SameSite=Lax;Max-Age=157680000";let n=M(),l=c(()=>n.lang),a=k(d(l)),p=s(()=>{var o;return(o=N.route.id)!=null&&o.includes("/admin")?P:_}),g=s(()=>i()?`-${e(p).length*2+2}rem`:void 0),b=s(()=>i()?".2rem":void 0);f(()=>{let o=O("locale"),u=c(()=>e(a));o&&o!==u&&(document.cookie="locale="+u+m)}),f(()=>{e(a)!==l&&L()});async function L(){if(document.cookie="locale="+e(a).toLowerCase()+m,t.updateBackend){let o=await G("/auth/v1/update_language");if(o.error){console.error(o.error);return}}window.location.reload()}var r=U(),w=S(r);E(w,{get ariaLabel(){return n.common.selectI18n},get options(){return e(p)},borderless:!0,get offsetTop(){return e(g)},get offsetLeft(){return e(b)},get value(){return e(a)},set value(o){A(a,d(o))}}),T(r),x(()=>C(r,"absolute",t.absolute)),z(v,r),y()}export{X as L};
