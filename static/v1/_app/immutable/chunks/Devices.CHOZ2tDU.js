import{C as ke,E as re,F as se,O as Me,Q as oe,a6 as Te,ay as je,aw as Ce,J as De,a7 as Le,a8 as Oe,a1 as Ee,a0 as Ie,ac as Be,t as k,p as N,o as ie,b as X,aV as Se,c as p,A as Xe,s as O,g as T,r as h,a as Y,d as P,f as J,q as qe,a9 as H,y as Ae}from"./index-client.B6iEebqi.js";import{j as Ne,w as ne,d as le,e as R,s as E}from"./render.Bsso_k3p.js";import"./disclose-version.BDr9Qe-U.js";import{i as B}from"./if.1XSPtMho.js";import{d as ce,e as Ye,a as u,n as ve,t as C,b as q,c as V}from"./template.BMDtqFuO.js";import{s as z}from"./snippet.CTHg_e8y.js";import{s as y,i as de,l as He,t as ue,f as Pe,b as me,d as ze,e as Fe,g as Je}from"./index.CmB1UnQy.js";import{p as A}from"./proxy.CjI65D-A.js";import{p as L,s as fe,a as Ke,b as pe}from"./props.C6aLk1Bq.js";import{r as Qe}from"./legacy-client.BZkWSPYd.js";import{w as Re}from"./index.DNRH1Gyi.js";import{f as he,B as W,g as Ve,h as We,e as Ge}from"./ThemeSwitch.CRSTiBZD.js";import{u as G}from"./i18n.svelte.CSnrsaW1.js";import{K as Ue,r as Ze,t as be,y as U}from"./helpers.Cbcu7vP_.js";import{I as et}from"./Input.Bd9f6bUF.js";import{b as tt}from"./patterns.BdncpE46.js";function we(s,e,t,n,o){var a=s,l="",i;ke(()=>{if(l===(l=e()??"")){re&&se();return}i!==void 0&&(Oe(i),i=void 0),l!==""&&(i=Me(()=>{if(re){oe.data;for(var r=se(),c=r;r!==null&&(r.nodeType!==8||r.data!=="");)c=r,r=Te(r);if(r===null)throw je(),Ce;ce(oe,c),a=De(r);return}var v=l+"",m=Ye(v);ce(Le(m),m.lastChild),a.before(m)}))})}function at(s,e,t=e){var n=s==="x",o=()=>ne(()=>{a=!0,clearTimeout(l),l=setTimeout(i,100),t(window[n?"scrollX":"scrollY"])});addEventListener("scroll",o,{passive:!0});var a=!1,l,i=()=>{a=!1},r=!0;Ee(()=>{var c=e();r?r=!1:!a&&c!=null&&(a=!0,clearTimeout(l),scrollTo(window.scrollX,c),l=setTimeout(i,100))}),Ie(o),Be(()=>{removeEventListener("scroll",o)})}function rt(s,e){Ne(window,["resize"],()=>ne(()=>e(window[s])))}var st=ve('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function ge(s,e){let t=L(e,"opacity",3,.9),n=L(e,"width",3,"1.5rem"),o=L(e,"color",3,"hsl(var(--error))");var a=st();y(a,"stroke-width",2),k(()=>{y(a,"width",n()),y(a,"color",o()),y(a,"opacity",t())}),u(s,a)}function Z(s){return Object.prototype.toString.call(s)==="[object Date]"}function ee(s,e,t,n){if(typeof t=="number"||Z(t)){const o=n-t,a=(t-e)/(s.dt||1/60),l=s.opts.stiffness*o,i=s.opts.damping*a,r=(l-i)*s.inv_mass,c=(a+r)*s.dt;return Math.abs(c)<s.opts.precision&&Math.abs(o)<s.opts.precision?n:(s.settled=!1,Z(t)?new Date(t.getTime()+c):t+c)}else{if(Array.isArray(t))return t.map((o,a)=>ee(s,e[a],t[a],n[a]));if(typeof t=="object"){const o={};for(const a in t)o[a]=ee(s,e[a],t[a],n[a]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function te(s,e={}){const t=Re(s),{stiffness:n=.15,damping:o=.8,precision:a=.01}=e;let l,i,r,c=s,v=s,m=1,g=0,w=!1;function $(x,M={}){v=x;const j=r={};return s==null||M.hard||b.stiffness>=1&&b.damping>=1?(w=!0,l=de.now(),c=x,t.set(s=v),Promise.resolve()):(M.soft&&(g=1/((M.soft===!0?.5:+M.soft)*60),m=0),i||(l=de.now(),w=!1,i=He(d=>{if(w)return w=!1,i=null,!1;m=Math.min(m+g,1);const _={inv_mass:m,opts:b,settled:!0,dt:(d-l)*60/1e3},f=ee(_,c,s,v);return l=d,c=s,t.set(s=f),_.settled&&(i=null),!_.settled})),new Promise(d=>{i.promise.then(()=>{j===r&&d()})}))}const b={set:$,update:(x,M)=>$(x(v,s),M),subscribe:t.subscribe,stiffness:n,damping:o,precision:a};return b}var ot=C('<div class="tooltip svelte-op12yu"><!></div>'),it=C('<div role="none"><!> <!></div>');function nt(s,e){N(e,!0);const t=fe(),n=()=>pe(T(c),"$coords",t);let o=L(e,"xOffset",3,10),a=L(e,"yOffset",3,10),l=L(e,"text",3,""),i=L(e,"html",3,""),r=P(!1),c=P(void 0),v;ie(()=>{Ke(X(c,A(te({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",t)}),Se(()=>{clearTimeout(v)});function m(){clearTimeout(v),X(r,!0)}function g(){v=setTimeout(()=>{X(r,!1)},100)}function w(j){T(c).set({x:j.clientX+o(),y:j.clientY+a()})}var $=it();$.__mouseover=m,$.__mouseout=g,$.__mousemove=w;var b=p($);z(b,()=>e.children??Xe);var x=O(b,2);{var M=j=>{var d=ot(),_=p(d);{var f=D=>{var I=q();k(()=>E(I,l())),u(D,I)},S=D=>{var I=V(),$e=J(I);{var xe=Q=>{var ae=V(),_e=J(ae);we(_e,i),u(Q,ae)};B($e,Q=>{i()&&Q(xe)},!0)}u(D,I)};B(_,D=>{l()?D(f):D(S,!1)})}h(d),k(()=>y(d,"style",`top: ${`${n().y}px`??""}; left: ${`${n().x}px`??""}`)),ue(7,d,()=>Pe,()=>({delay:400,duration:200})),u(j,d)};B(x,j=>{T(r)&&j(M)})}h($),R("focus",$,m),R("blur",$,g),u(s,$),Y()}le(["mouseover","mouseout","mousemove"]);let K=P(void 0);function ye(s){return!T(K)&&Ue()&&he("/auth/v1/oidc/sessioninfo").then(e=>{e.status===401&&Ze(s),X(K,A(e.body))}),{get(){return T(K)},set(e){X(K,A(e))}}}var lt=C('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function ct(s,e){N(e,!0);const t=fe(),n=()=>pe(l,"$margin",t);let o=L(e,"selected",15,!1);const a=11;let l=te(0,{stiffness:.15,damping:.5});Qe(()=>{l.set(o()?a:0)});function i(){o(!o())}var r=lt();r.__click=i;var c=p(r);h(r),k(()=>{y(r,"aria-checked",o()),me(r,"selectedOuter",o()),y(c,"style",`margin-left: ${`${n()}px`??""}`),me(c,"selected",o())}),R("keypress",r,i),u(s,r),Y()}le(["click"]);var vt=ve('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function dt(s,e){let t=L(e,"opacity",3,.9),n=L(e,"width",3,"1.5rem"),o=L(e,"color",3,"currentColor");var a=vt();y(a,"stroke-width",2),k(()=>{y(a,"width",n()),y(a,"color",o()),y(a,"opacity",t())}),u(s,a)}var ut=C('<div class="chevron svelte-li3f92"><!></div>'),mt=C("<div><!></div>"),ft=C('<div class="container svelte-li3f92"><div class="header svelte-li3f92"><!> <div class="summary svelte-li3f92"><!></div></div> <div class="details svelte-li3f92"><!></div></div>');function pt(s,e){N(e,!0);let t=G();const n=be(),o=be();let a=L(e,"expand",15,!1);function l(b){b.preventDefault(),a(!a())}var i=ft(),r=p(i),c=p(r);W(c,{get ariaLabel(){return t.common.expandContent},ariaControls:o,invisible:!0,onclick:b=>l(b),children:(b,x)=>{var M=ut(),j=p(M);dt(j,{}),h(M),u(b,M)},$$slots:{default:!0}});var v=O(c,2);y(v,"id",n);var m=p(v);z(m,()=>e.summary),h(v),h(r);var g=O(r,2);y(g,"id",o),y(g,"aria-labelledby",n);var w=p(g);{var $=b=>{var x=mt(),M=p(x);z(M,()=>e.details),h(x),ue(3,x,()=>ze,()=>({duration:150})),u(b,x)};B(w,b=>{a()&&b($)})}h(g),h(i),k(()=>{y(i,"aria-expanded",a()),y(v,"aria-label",t.common.summary),y(g,"aria-label",t.common.details),y(g,"aria-hidden",!a())}),u(s,i),Y()}var ht=C('<div class="label font-label svelte-1n9u417"> </div>'),bt=C('<div class="button svelte-1n9u417"><!></div>'),wt=C('<div class="container svelte-1n9u417"><!> <div class="flex gap-05"><div><!></div> <!></div></div>');function F(s,e){N(e,!0);var t=wt(),n=p(t);{var o=v=>{var m=ht(),g=p(m,!0);h(m),k(()=>E(g,e.label)),u(v,m)};B(n,v=>{e.label&&v(o)})}var a=O(n,2),l=p(a),i=p(l);z(i,()=>e.children),h(l);var r=O(l,2);{var c=v=>{var m=bt(),g=p(m);z(g,()=>e.button),h(m),u(v,m)};B(r,v=>{e.button&&v(c)})}h(a),h(t),k(()=>{y(l,"title",e.title||e.label||""),Fe(l,Je(e.mono?"font-mono":""),"svelte-1n9u417")}),u(s,t),Y()}var gt=C('<div class="device-header svelte-9n911e"><div class="device-head font-mono svelte-9n911e"> </div></div>'),yt=C('<div class="saveButton svelte-9n911e"><!></div>'),$t=C("<div><!></div>"),xt=C("<div> </div>"),_t=C('<div class="device svelte-9n911e"><!> <div class="row svelte-9n911e"><!> <!></div> <!> <!> <!> <!></div>');function kt(s,e){N(e,!0);let t=L(e,"device",15),n=G(),o=P(A(qe(()=>t().name)));async function a(){let i={device_id:t().id,name:T(o)},r=await Ve(`/auth/v1/users/${e.userId}/devices`,i);r.error?console.error(r.error):t(t().name=T(o),!0)}async function l(){let i={device_id:t().id},r=await We(`/auth/v1/users/${e.userId}/devices`,i);r.error?console.error(r.error):t(t().refresh_exp=void 0,!0)}pt(s,{summary:i=>{var r=gt(),c=p(r),v=p(c,!0);h(c),h(r),k(()=>E(v,t().name)),u(i,r)},details:i=>{var r=_t(),c=p(r);F(c,{get label(){return n.account.deviceId},mono:!0,children:(d,_)=>{H();var f=q();k(()=>E(f,t().id)),u(d,f)},$$slots:{default:!0}});var v=O(c,2),m=p(v);et(m,{autocomplete:"off",width:"17rem",get label(){return n.account.deviceName},get placeholder(){return n.account.deviceName},onEnter:a,pattern:tt,required:!0,get value(){return T(o)},set value(d){X(o,A(d))},children:(d,_)=>{H();var f=q();k(()=>E(f,n.account.deviceName)),u(d,f)},$$slots:{default:!0}});var g=O(m,2);{var w=d=>{var _=yt(),f=p(_);W(f,{onclick:a,children:(S,D)=>{H();var I=q();k(()=>E(I,n.common.save)),u(S,I)},$$slots:{default:!0}}),h(_),u(d,_)};B(g,d=>{T(o)!==t().name&&d(w)})}h(v);var $=O(v,2);F($,{get label(){return n.account.regDate},children:(d,_)=>{H();var f=q();k(()=>E(f,U(t().created))),u(d,f)},$$slots:{default:!0}});var b=O($,2);F(b,{get label(){return n.account.accessExp},children:(d,_)=>{H();var f=q();k(()=>E(f,U(t().access_exp))),u(d,f)},$$slots:{default:!0}});var x=O(b,2);{var M=d=>{F(d,{get label(){return n.account.accessRenew},button:_=>{W(_,{get ariaLabel(){return n.common.delete},invisible:!0,onclick:l,children:(f,S)=>{var D=$t(),I=p(D);ge(I,{}),h(D),k(()=>y(D,"title",n.common.delete)),u(f,D)},$$slots:{default:!0}})},children:(_,f)=>{var S=xt(),D=p(S,!0);k(()=>E(D,U(t().refresh_exp))),h(S),u(_,S)},$$slots:{button:!0,default:!0}})};B(x,d=>{t().refresh_exp&&d(M)})}var j=O(x,2);F(j,{get label(){return n.account.regIp},children:(d,_)=>{H();var f=q();k(()=>E(f,t().peer_ip)),u(d,f)},$$slots:{default:!0}}),h(r),u(i,r)},$$slots:{summary:!0,details:!0}}),Y()}var Mt=C('<div class="head svelte-w0g6eh"> </div> <div class="devices svelte-w0g6eh"><!></div>',1);function Tt(s,e){N(e,!0);let t=G(),n=ye(e.viewMode),o=Ae(()=>{var w;return(w=n.get())==null?void 0:w.user_id}),a=P(A([]));ie(()=>{l()});async function l(){let w=await he(`/auth/v1/users/${T(o)}/devices`);w.body?X(a,A(w.body)):console.error("error fetching devices: "+w.error)}var i=Mt(),r=J(i),c=p(r,!0);h(r);var v=O(r,2),m=p(v);{var g=w=>{var $=V(),b=J($);Ge(b,19,()=>T(a),x=>x.id,(x,M,j)=>{kt(x,{get userId(){return T(o)},get device(){return T(a)[T(j)]},set device(d){T(a)[T(j)]=d}})}),u(w,$)};B(m,w=>{T(o)&&w(g)})}h(v),k(()=>E(c,(t==null?void 0:t.account.devicesDesc)||"Devices linked to this account")),u(s,i),Y()}export{Tt as D,ge as I,ct as S,nt as T,at as a,rt as b,we as h,Z as i,te as s,ye as u};
