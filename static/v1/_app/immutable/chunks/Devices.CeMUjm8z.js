import{w as ke,x as re,y as ae,F as Ce,I as oe,a0 as Te,az as je,ax as De,A as Ie,a1 as Le,a2 as Me,W as Oe,V as Ee,ad as Be,a5 as k,p as V,o as ie,j as A,aV as Se,a7 as p,n as Ae,a4 as M,g as T,a9 as h,a as X,a6 as P,a3 as q,d as ze,a8 as H,h as Ne}from"./index-client.C1uYfxHd.js";import{j as Ve,w as ne,d as le,e as G,s as O}from"./render.DlGhCWX2.js";import"./disclose-version.BDr9Qe-U.js";import{i as B}from"./if.DL6pUnI4.js";import{d as ve,e as Xe,a as u,n as ce,t as D,b as z,c as J}from"./template.BehheIQn.js";import{s as W}from"./snippet.D-0bt_Xy.js";import{b as y,h as de,l as He,a as ue,f as Pe,t as me,c as We,d as Ye,e as qe}from"./index.BcsnDkjo.js";import{p as N}from"./proxy.bZKuG6wn.js";import{p as L,s as fe,a as Fe,b as pe}from"./props.OoymhrXq.js";import{r as Re}from"./legacy-client.CLGpwDPz.js";import{w as Ge}from"./index.BrQhhgF-.js";import{f as he,B as K,g as Je,h as Ke,e as Qe}from"./ThemeSwitch.B8t8VQsu.js";import{u as Q}from"./i18n.svelte.C5UT6hSp.js";import{O as Ue,r as Ze,l as we,E as U}from"./helpers.EoWe9H8J.js";import{I as et}from"./Input.Dq3XA-_Z.js";import{a as tt}from"./patterns.DmsbdEr_.js";function be(a,e,t,n,o){var s=a,l="",i;ke(()=>{if(l===(l=e()??"")){re&&ae();return}i!==void 0&&(Me(i),i=void 0),l!==""&&(i=Ce(()=>{if(re){oe.data;for(var r=ae(),v=r;r!==null&&(r.nodeType!==8||r.data!=="");)v=r,r=Te(r);if(r===null)throw je(),De;ve(oe,v),s=Ie(r);return}var c=l+"",m=Xe(c);ve(Le(m),m.lastChild),s.before(m)}))})}function st(a,e,t=e){var n=a==="x",o=()=>ne(()=>{s=!0,clearTimeout(l),l=setTimeout(i,100),t(window[n?"scrollX":"scrollY"])});addEventListener("scroll",o,{passive:!0});var s=!1,l,i=()=>{s=!1},r=!0;Oe(()=>{var v=e();r?r=!1:!s&&v!=null&&(s=!0,clearTimeout(l),scrollTo(window.scrollX,v),l=setTimeout(i,100))}),Ee(o),Be(()=>{removeEventListener("scroll",o)})}function rt(a,e){Ve(window,["resize"],()=>ne(()=>e(window[a])))}var at=ce('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function ge(a,e){let t=L(e,"opacity",3,.9),n=L(e,"width",3,"1.5rem"),o=L(e,"color",3,"hsl(var(--error))");var s=at();y(s,"stroke-width",2),k(()=>{y(s,"width",n()),y(s,"color",o()),y(s,"opacity",t())}),u(a,s)}function Z(a){return Object.prototype.toString.call(a)==="[object Date]"}function ee(a,e,t,n){if(typeof t=="number"||Z(t)){const o=n-t,s=(t-e)/(a.dt||1/60),l=a.opts.stiffness*o,i=a.opts.damping*s,r=(l-i)*a.inv_mass,v=(s+r)*a.dt;return Math.abs(v)<a.opts.precision&&Math.abs(o)<a.opts.precision?n:(a.settled=!1,Z(t)?new Date(t.getTime()+v):t+v)}else{if(Array.isArray(t))return t.map((o,s)=>ee(a,e[s],t[s],n[s]));if(typeof t=="object"){const o={};for(const s in t)o[s]=ee(a,e[s],t[s],n[s]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function te(a,e={}){const t=Ge(a),{stiffness:n=.15,damping:o=.8,precision:s=.01}=e;let l,i,r,v=a,c=a,m=1,g=0,b=!1;function $(x,C={}){c=x;const j=r={};return a==null||C.hard||w.stiffness>=1&&w.damping>=1?(b=!0,l=de.now(),v=x,t.set(a=c),Promise.resolve()):(C.soft&&(g=1/((C.soft===!0?.5:+C.soft)*60),m=0),i||(l=de.now(),b=!1,i=He(d=>{if(b)return b=!1,i=null,!1;m=Math.min(m+g,1);const _={inv_mass:m,opts:w,settled:!0,dt:(d-l)*60/1e3},f=ee(_,v,a,c);return l=d,v=a,t.set(a=f),_.settled&&(i=null),!_.settled})),new Promise(d=>{i.promise.then(()=>{j===r&&d()})}))}const w={set:$,update:(x,C)=>$(x(c,a),C),subscribe:t.subscribe,stiffness:n,damping:o,precision:s};return w}var ot=D('<div class="tooltip svelte-op12yu"><!></div>'),it=D('<div role="none"><!> <!></div>');function nt(a,e){V(e,!0);const t=fe(),n=()=>pe(T(v),"$coords",t);let o=L(e,"xOffset",3,10),s=L(e,"yOffset",3,10),l=L(e,"text",3,""),i=L(e,"html",3,""),r=P(!1),v=P(void 0),c;ie(()=>{Fe(A(v,N(te({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",t)}),Se(()=>{clearTimeout(c)});function m(){clearTimeout(c),A(r,!0)}function g(){c=setTimeout(()=>{A(r,!1)},100)}function b(j){T(v).set({x:j.clientX+o(),y:j.clientY+s()})}var $=it();$.__mouseover=m,$.__mouseout=g,$.__mousemove=b;var w=p($);W(w,()=>e.children??Ae);var x=M(w,2);{var C=j=>{var d=ot(),_=p(d);{var f=I=>{var E=z();k(()=>O(E,l())),u(I,E)},S=I=>{var E=J(),$e=q(E);{var xe=R=>{var se=J(),_e=q(se);be(_e,i),u(R,se)};B($e,R=>{i()&&R(xe)},!0)}u(I,E)};B(_,I=>{l()?I(f):I(S,!1)})}h(d),k(()=>y(d,"style",`top: ${`${n().y}px`??""}; left: ${`${n().x}px`??""}`)),ue(7,d,()=>Pe,()=>({delay:400,duration:200})),u(j,d)};B(x,j=>{T(r)&&j(C)})}h($),G("focus",$,m),G("blur",$,g),u(a,$),X()}le(["mouseover","mouseout","mousemove"]);let F=P(void 0);function ye(a){return!T(F)&&Ue()&&he("/auth/v1/oidc/sessioninfo").then(e=>{e.status===401&&Ze(a),A(F,N(e.body))}),{get(){return T(F)},set(e){A(F,N(e))}}}var lt=D('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function vt(a,e){V(e,!0);const t=fe(),n=()=>pe(l,"$margin",t);let o=L(e,"selected",15,!1);const s=11;let l=te(0,{stiffness:.15,damping:.5});Re(()=>{l.set(o()?s:0)});function i(){o(!o())}var r=lt();r.__click=i;var v=p(r);h(r),k(()=>{y(r,"aria-checked",o()),me(r,"selectedOuter",o()),y(v,"style",`margin-left: ${`${n()}px`??""}`),me(v,"selected",o())}),G("keypress",r,i),u(a,r),X()}le(["click"]);var ct=ce('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function dt(a,e){let t=L(e,"opacity",3,.9),n=L(e,"width",3,"1.5rem"),o=L(e,"color",3,"currentColor");var s=ct();y(s,"stroke-width",2),k(()=>{y(s,"width",n()),y(s,"color",o()),y(s,"opacity",t())}),u(a,s)}var ut=D('<div class="chevron svelte-li3f92"><!></div>'),mt=D("<div><!></div>"),ft=D('<div class="container svelte-li3f92"><div class="header svelte-li3f92"><!> <div class="summary svelte-li3f92"><!></div></div> <div class="details svelte-li3f92"><!></div></div>');function pt(a,e){V(e,!0);let t=Q();const n=we(),o=we();let s=L(e,"expand",15,!1);function l(w){w.preventDefault(),s(!s())}var i=ft(),r=p(i),v=p(r);K(v,{get ariaLabel(){return t.common.expandContent},ariaControls:o,invisible:!0,onclick:w=>l(w),children:(w,x)=>{var C=ut(),j=p(C);dt(j,{}),h(C),u(w,C)},$$slots:{default:!0}});var c=M(v,2);y(c,"id",n);var m=p(c);W(m,()=>e.summary),h(c),h(r);var g=M(r,2);y(g,"id",o),y(g,"aria-labelledby",n);var b=p(g);{var $=w=>{var x=mt(),C=p(x);W(C,()=>e.details),h(x),ue(3,x,()=>We,()=>({duration:150})),u(w,x)};B(b,w=>{s()&&w($)})}h(g),h(i),k(()=>{y(i,"aria-expanded",s()),y(c,"aria-label",t.common.summary),y(g,"aria-label",t.common.details),y(g,"aria-hidden",!s())}),u(a,i),X()}var ht=D('<div class="label font-label svelte-1n9u417"> </div>'),wt=D('<div class="button svelte-1n9u417"><!></div>'),bt=D('<div class="container svelte-1n9u417"><!> <div class="flex gap-05"><div><!></div> <!></div></div>');function Y(a,e){V(e,!0);var t=bt(),n=p(t);{var o=c=>{var m=ht(),g=p(m,!0);h(m),k(()=>O(g,e.label)),u(c,m)};B(n,c=>{e.label&&c(o)})}var s=M(n,2),l=p(s),i=p(l);W(i,()=>e.children),h(l);var r=M(l,2);{var v=c=>{var m=wt(),g=p(m);W(g,()=>e.button),h(m),u(c,m)};B(r,c=>{e.button&&c(v)})}h(s),h(t),k(()=>{y(l,"title",e.title||e.label||""),Ye(l,qe(e.mono?"font-mono":""),"svelte-1n9u417")}),u(a,t),X()}var gt=D('<div class="device-header svelte-9n911e"><div class="device-head font-mono svelte-9n911e"> </div></div>'),yt=D('<div class="saveButton svelte-9n911e"><!></div>'),$t=D("<div><!></div>"),xt=D("<div> </div>"),_t=D('<div class="device svelte-9n911e"><!> <div class="row svelte-9n911e"><!> <!></div> <!> <!> <!> <!></div>');function kt(a,e){V(e,!0);let t=L(e,"device",15),n=Q(),o=P(N(ze(()=>t().name)));async function s(){let i={device_id:t().id,name:T(o)},r=await Je(`/auth/v1/users/${e.userId}/devices`,i);r.error?console.error(r.error):t(t().name=T(o),!0)}async function l(){let i={device_id:t().id},r=await Ke(`/auth/v1/users/${e.userId}/devices`,i);r.error?console.error(r.error):t(t().refresh_exp=void 0,!0)}pt(a,{summary:i=>{var r=gt(),v=p(r),c=p(v,!0);h(v),h(r),k(()=>O(c,t().name)),u(i,r)},details:i=>{var r=_t(),v=p(r);Y(v,{get label(){return n.account.deviceId},mono:!0,children:(d,_)=>{H();var f=z();k(()=>O(f,t().id)),u(d,f)},$$slots:{default:!0}});var c=M(v,2),m=p(c);et(m,{autocomplete:"off",width:"17rem",get label(){return n.account.deviceName},get placeholder(){return n.account.deviceName},onEnter:s,pattern:tt,required:!0,get value(){return T(o)},set value(d){A(o,N(d))},children:(d,_)=>{H();var f=z();k(()=>O(f,n.account.deviceName)),u(d,f)},$$slots:{default:!0}});var g=M(m,2);{var b=d=>{var _=yt(),f=p(_);K(f,{onclick:s,children:(S,I)=>{H();var E=z();k(()=>O(E,n.common.save)),u(S,E)},$$slots:{default:!0}}),h(_),u(d,_)};B(g,d=>{T(o)!==t().name&&d(b)})}h(c);var $=M(c,2);Y($,{get label(){return n.account.regDate},children:(d,_)=>{H();var f=z();k(()=>O(f,U(t().created))),u(d,f)},$$slots:{default:!0}});var w=M($,2);Y(w,{get label(){return n.account.accessExp},children:(d,_)=>{H();var f=z();k(()=>O(f,U(t().access_exp))),u(d,f)},$$slots:{default:!0}});var x=M(w,2);{var C=d=>{Y(d,{get label(){return n.account.accessRenew},button:_=>{K(_,{get ariaLabel(){return n.common.delete},invisible:!0,onclick:l,children:(f,S)=>{var I=$t(),E=p(I);ge(E,{}),h(I),k(()=>y(I,"title",n.common.delete)),u(f,I)},$$slots:{default:!0}})},children:(_,f)=>{var S=xt(),I=p(S,!0);k(()=>O(I,U(t().refresh_exp))),h(S),u(_,S)},$$slots:{button:!0,default:!0}})};B(x,d=>{t().refresh_exp&&d(C)})}var j=M(x,2);Y(j,{get label(){return n.account.regIp},children:(d,_)=>{H();var f=z();k(()=>O(f,t().peer_ip)),u(d,f)},$$slots:{default:!0}}),h(r),u(i,r)},$$slots:{summary:!0,details:!0}}),X()}var Ct=D('<div class="head svelte-w0g6eh"> </div> <div class="devices svelte-w0g6eh"><!></div>',1);function Tt(a,e){V(e,!0);let t=Q(),n=ye(e.viewMode),o=Ne(()=>{var b;return(b=n.get())==null?void 0:b.user_id}),s=P(N([]));ie(()=>{l()});async function l(){let b=await he(`/auth/v1/users/${T(o)}/devices`);b.body?A(s,N(b.body)):console.error("error fetching devices: "+b.error)}var i=Ct(),r=q(i),v=p(r,!0);h(r);var c=M(r,2),m=p(c);{var g=b=>{var $=J(),w=q($);Qe(w,19,()=>T(s),x=>x.id,(x,C,j)=>{kt(x,{get userId(){return T(o)},get device(){return T(s)[T(j)]},set device(d){T(s)[T(j)]=d}})}),u(b,$)};B(m,b=>{T(o)&&b(g)})}h(c),k(()=>O(v,(t==null?void 0:t.account.devicesDesc)||"Devices linked to this account")),u(a,i),X()}export{Tt as D,ge as I,vt as S,nt as T,st as a,rt as b,be as h,Z as i,te as s,ye as u};
