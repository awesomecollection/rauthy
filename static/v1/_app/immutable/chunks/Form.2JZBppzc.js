import"./disclose-version.BDr9Qe-U.js";import{p as R,t as g,a as w,c as T,r as F}from"./index-client.B6iEebqi.js";import{e as B}from"./render.Bsso_k3p.js";import{a as C,t as N}from"./template.BMDtqFuO.js";import{s as O}from"./snippet.CTHg_e8y.js";import{s as M}from"./index.CmB1UnQy.js";import{p as y}from"./props.C6aLk1Bq.js";import{f as Y}from"./pow.Btz0dp6P.js";import{c as G,d as J}from"./ThemeSwitch.CRSTiBZD.js";const K={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function d(t,n,o){let a=t.calendar.toJulianDay(t),i=P(n),e=Math.ceil(a+1-i)%7;return e<0&&(e+=7),e}function U(t,n){return t.calendar.toJulianDay(t)-n.calendar.toJulianDay(n)}function b(t,n){return E(t)-E(n)}function E(t){return t.hour*36e5+t.minute*6e4+t.second*1e3+t.millisecond}let D=null;function Z(){return D==null&&(D=new Intl.DateTimeFormat().resolvedOptions().timeZone),D}function $(t){return t.subtract({days:t.day-1})}function v(t,n,o){let a=d(t,n);return t.subtract({days:a})}const L=new Map;function I(t){if(Intl.Locale){let o=L.get(t);return o||(o=new Intl.Locale(t).maximize().region,o&&L.set(t,o)),o}let n=t.split("-")[1];return n==="u"?void 0:n}function P(t){let n=I(t);return n&&K[n]||0}const H={AF:[4,5],AE:[5,6],BH:[5,6],DZ:[5,6],EG:[5,6],IL:[5,6],IQ:[5,6],IR:[5,5],JO:[5,6],KW:[5,6],LY:[5,6],OM:[5,6],QA:[5,6],SA:[5,6],SD:[5,6],SY:[5,6],YE:[5,6]};function Q(t,n){let o=t.calendar.toJulianDay(t),a=Math.ceil(o+1)%7;a<0&&(a+=7);let i=I(n),[e,r]=H[i]||[6,0];return a===e||a===r}function V(t){let n=Date.parse(t);if(!isNaN(n))return n/1e3}function k(t){return`${t.year}-${t.month>9?t.month:"0"+t.month}-${t.day>9?t.day:"0"+t.day}`}function W(t,n){const o=t.month;t=$(t),t=v(t,n);let a=[];const i=u=>{u.push({day:t.day,month:t.month,year:t.year,isWeekend:Q(t,n)}),t=t.add({days:1})},e=()=>{let u={days:[]};for(let s=0;s<7;s++)i(u.days);a.push(u)};for(e();t.month===o;)e();let r=a[a.length-1],f=d(t,n);for(;f>0;)i(r.days),f=d(t,n);return a[a.length-1]=r,a}function x(t){const n=t||new Date;let o=n.getDate();o<10&&(o="0"+o);let a=n.getMonth()+1;return a<10&&(a="0"+a),`${n.getUTCFullYear()}-${a}-${o}`}var X=N("<form><!></form>");function q(t,n){R(n,!0);let o=y(n,"method",3,"POST"),a=y(n,"isError",15),i=y(n,"convertDateToTs",19,()=>[]);async function e(u){var S;u.preventDefault();const s=u.currentTarget;if(s.reportValidity())a(!1);else{a(!0);return}const m=new FormData(s);for(let c of i()){let h=((S=m.get(c))==null?void 0:S.toString())||"",A=V(h)||"";m.set(c,(A==null?void 0:A.toString())||"")}if(n.withPowAs){let c=await Y();m.set(n.withPowAs,c||"")}let l,p=new URLSearchParams;if(m.forEach((c,h)=>{p.append(h,c.toString())}),n.onSubmit){n.onSubmit(s,p);return}l=await G(s,p),l&&(l.ok?n.onResponse&&(n.onResponse(l),n.resetOnSubmit&&l.ok&&s.reset()):await J(l))}var r=X(),f=T(r);O(f,()=>n.children),F(r),g(()=>{M(r,"action",n.action),M(r,"method",o())}),B("submit",r,e),C(t,r),w()}export{Z as $,q as F,U as a,b,d as c,k as d,x as f,W as g};
