import"./disclose-version.BDr9Qe-U.js";import{a6 as B,p as le,o as Ne,a7 as c,a5 as l,n as It,a9 as v,a as ne,a4 as ee,j as a,g as e,a3 as C,aa as Vt,d as ys,a8 as q,h as Ke,aw as na,aZ as Ia,b as bs,$ as Ta}from"./index-client.Cqn5bTAA.js";import{h as Aa}from"./svelte-head.DTZb8QfM.js";import{a as r,n as Xe,t as I,c as me,b as V}from"./template.A7ni-K4i.js";import{i as O}from"./if.CfO-_epY.js";import{p as n}from"./proxy.Ce5Ub1RB.js";import{p as W,s as $s,a as _s,c as La,r as Jt}from"./props.YICxVAwD.js";import{aq as oa,ar as ks,O as ut,u as va,v as xs,ab as Es,ac as Ss,ad as Cs,ae as Na,L as Ra,as as zt,n as Ye,at as Da,ak as ja,A as Is,ag as Ts,aj as As,ao as Ls,au as qt,av as Oa,aw as Ns,ax as Rs,a6 as Xt,l as tt,ay as Ds,az as js,aA as Ma,aB as ft,aC as Os,a1 as za,aD as Ua,aE as Pa,aF as Wt,aG as da,aH as Ms,aI as zs,aJ as Us,aK as qa,aL as Wa,aM as ca,an as Ps,a0 as qs,aN as Ws}from"./dataFetching.BTF7Y2Cd.js";import{B as Ce,L as ua}from"./Button.Ch35LVs2.js";import{s as ue,b as oe,c as ce,h as ht,t as Et,o as Gs,k as nt,g as Ut,d as _e,m as ha,f as Ks,i as Nt,j as Rt}from"./helpers.CZ9R9OcM.js";import{b as dt,a as Ze,S as Ve,D as Bs,E as ot,T as Dt,I as Zt,d as Fs,h as Ga,e as Vs,c as Js}from"./Devices.Cz4gxWug.js";import{r as Ae}from"./legacy-client.B3KsQmEJ.js";import{d as pt,e as Ue,s as Y,r as pa}from"./render.BxZ_8nPF.js";import{s as Tt}from"./snippet.YItZinX2.js";import{w as At}from"./index.BwtYkuQa.js";import{a as Qt,C as ea}from"./CheckIcon.iy0kaw_K.js";import{t as Ys,c as Hs}from"./tweened.D7sgWmKu.js";import{A as Xs}from"./AppVersion.Bmp6BG1B.js";import{T as Ka,e as Ge,i as wt,b as Ba,O as kt}from"./ThemeSwitch.Nnphyg3I.js";import{c as He,a as he,b as yt,I as ie}from"./Input.DikYy5qt.js";import{P as Gt,I as Fa,a as Va,b as Zs}from"./PasswordInput.PI3FNiBa.js";import{P as Qs}from"./PasswordPolicy.DXpUlmha.js";import{b as er}from"./this.ETDJznD-.js";import"./legacy.CWXZuyhS.js";const tr=At(),ar=At(),Yt=At(""),ta=At(!0);var sr=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg>');function rr(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=sr();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var ir=I('<div role="button" tabindex="0" class="close svelte-1hvg16q"><!></div> <div class="logo"><!></div>',1),lr=I('<div role="button" tabindex="0" class="burger svelte-1hvg16q"><!></div> <div></div> <div class="logo"><!></div>',1),nr=I("<!> <!>",1),or=I('<div class="theme-collapsed svelte-1hvg16q"><!></div>'),vr=I('<nav class="nav svelte-1hvg16q"><div><!> <div class="menu svelte-1hvg16q"><div class="links svelte-1hvg16q"><!></div></div></div> <div class="version svelte-1hvg16q"><!></div></nav>');function dr(_,s){le(s,!0);const t=$s(),d=()=>_s(S,"$width",t);let i=W(s,"selected",15,""),m=W(s,"widthExpanded",3,185),g=W(s,"widthCollapsed",3,60),u=W(s,"isExpanded",15,!0);const S=Ys(u()?m():g(),{duration:200,easing:Hs});ta.subscribe(L=>u(L)),Yt.subscribe(L=>{L&&i(L)}),Ae(()=>{u()?(ta.set(!0),S.set(m())):(ta.set(!1),setTimeout(()=>{S.set(g())},200))}),Ae(()=>{i()&&Yt.set(i())}),Ne(()=>{tr.set(m()),ar.set(g()),Yt.set(i())});function E(){u(!u())}var o=vr(),$=c(o),p=c($);{var A=L=>{var D=ir(),j=ee(D);j.__click=E;var N=c(j);Qt(N,{}),v(j);var G=l(j,2),R=c(G);Tt(R,()=>s.logo??It),v(G),B(()=>oe(j,"left",`calc(${d()??""}px - 22px)`)),Ue("keypress",j,E),ce(1,j,()=>ht,()=>({delay:500,duration:200})),ce(2,j,()=>ht,()=>({duration:100})),ce(1,G,()=>ht,()=>({delay:250,duration:100})),ce(2,G,()=>ht,()=>({duration:20})),r(L,D)},k=L=>{var D=lr(),j=ee(D);j.__click=E,oe(j,"left","3px");var N=c(j);rr(N,{width:24}),v(j);var G=l(j,2);oe(G,"height","10px");var R=l(G,2),F=c(R);Tt(F,()=>s.logo??It),v(R),Ue("keypress",j,E),ce(1,j,()=>ht,()=>({delay:500,duration:200})),ce(2,j,()=>ht,()=>({duration:100})),ce(1,R,()=>ht,()=>({delay:250,duration:100})),ce(2,R,()=>ht,()=>({duration:20})),r(L,D)};O(p,L=>{u()?L(A):L(k,!1)})}var h=l(p,2),w=c(h),y=c(w);Tt(y,()=>s.entries??It),v(w),v(h),v($);var b=l($,2),x=c(b);{var f=L=>{var D=nr(),j=ee(D);Ka(j,{});var N=l(j,2);Xs(N,{}),r(L,D)},T=L=>{var D=or(),j=c(D);Ka(j,{}),v(D),r(L,D)};O(x,L=>{u()?L(f):L(T,!1)})}v(b),v(o),B(()=>{oe(o,"min-width",`${d()??""}px`),oe(o,"width",`${d()??""}px`),oe(o,"padding",u()?"20px 10px":"10px 3px")}),ce(1,b,()=>ht,()=>({delay:500,duration:200})),ce(2,b,()=>ht,()=>({duration:100})),r(_,o),ne()}pt(["click"]);var cr=I('<div role="menuitem" tabindex="0" class="entry noselect font-label svelte-r55922"><!> <span class="label svelte-r55922"> </span></div>'),ur=I('<div role="menuitem" tabindex="0" class="entryCollapsed noselect font-label svelte-r55922"><!> <span class="labelCollapsed svelte-r55922"> </span></div>');function mt(_,s){le(s,!0);let t=W(s,"label",3,""),d=W(s,"slotCollapsed",3,!0),i=C(!0),m=C("hsl(var(--text))"),g=C("");Yt.subscribe(k=>a(g,n(k))),ta.subscribe(k=>a(i,n(k)));let u=C(!1);function S(){e(u)?a(m,"hsl(var(--error))"):e(g)===t()?a(m,"hsl(var(--action))"):a(m,"hsl(var(--text))")}function E(){Yt.set(t())}Ae(()=>{e(g)&&S()}),Ae(()=>{e(u)?a(m,"hsl(var(--error))"):S()});var o=me(),$=ee(o);{var p=k=>{var h=cr();h.__click=E;var w=c(h);Tt(w,()=>s.children??It);var y=l(w,2),b=c(y,!0);v(y),v(h),B(()=>{Et(h,"selected",e(g)===t()),Y(b,t())}),Ue("keypress",h,E),Ue("mouseenter",h,()=>a(u,!0)),Ue("mouseleave",h,()=>a(u,!1)),ce(7,h,()=>ht,()=>({duration:100})),r(k,h)},A=k=>{var h=ur();h.__click=E;var w=c(h);{var y=f=>{var T=me(),L=ee(T);Tt(L,()=>s.children??It),r(f,T)};O(w,f=>{d()&&f(y)})}var b=l(w,2),x=c(b,!0);v(b),v(h),B(()=>{Et(h,"selectedCollapsed",e(g)===t()),Y(x,t())}),Ue("keypress",h,E),Ue("mouseenter",h,()=>a(u,!0)),Ue("mouseleave",h,()=>a(u,!1)),ce(5,h,()=>ht,()=>({delay:200,duration:100})),r(k,h)};O($,k=>{e(i)?k(p):k(A,!1)})}r(_,o),ne()}pt(["click"]);const it={"Content-Type":"application/json",Accept:"application/json"};function De(){return{"csrf-token":oa(),"Content-Type":"application/json",Accept:"application/json"}}async function ke(_){return _.status===403&&(await _.json()).error==="MfaRequired"&&(console.error("MFA is required for a rauthy admin account"),await Gs(3e3),window.location.reload()),(_.status===401||_.status===403)&&window.location.reload(),_}async function hr(){return await fetch("/auth/v1/oidc/certs",{method:"GET",headers:it})}async function pr(){const _=await fetch("/auth/v1/clients",{method:"GET",headers:it});return await ke(_)}async function mr(_){const s=await fetch("/auth/v1/clients",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function gr(_){const s=await fetch(`/auth/v1/clients/${_.id}`,{method:"PUT",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function fr(_){const s=await fetch(`/auth/v1/clients/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function wr(_){const s=await fetch(`/auth/v1/clients/${_}/colors`,{method:"GET",headers:it});return await ke(s)}async function yr(_,s){const t=await fetch(`/auth/v1/clients/${_}/colors`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function br(_){const s=await fetch(`/auth/v1/clients/${_}/colors`,{method:"DELETE",headers:De()});return await ke(s)}async function $r(_,s){const t=new FormData;t.append("logo",s);const d=await fetch(`/auth/v1/clients/${_}/logo`,{method:"PUT",headers:{"csrf-token":oa()},body:t});return await ke(d)}async function _r(_){const s=await fetch(`/auth/v1/clients/${_}/logo`,{method:"DELETE",headers:De()});return await ke(s)}async function kr(_){const s=await fetch(`/auth/v1/clients/${_}/secret`,{method:"POST",headers:De()});return await ke(s)}async function xr(_){const s=await fetch(`/auth/v1/clients/${_}/secret`,{method:"PUT",headers:De()});return await ke(s)}async function Er(){const _=await fetch("/auth/v1/encryption/keys",{method:"GET",headers:it});return await ke(_)}async function Sr(_){const s=await fetch("/auth/v1/encryption/migrate",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Cr(_){const s=await fetch("/auth/v1/events",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Ja(){const _=await fetch("/auth/v1/groups",{method:"GET",headers:it});return await ke(_)}async function Ir(_){const s=await fetch("/auth/v1/groups",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Tr(_,s){const t=await fetch(`/auth/v1/groups/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Ar(_){const s=await fetch(`/auth/v1/groups/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Lr(){const _=await fetch("/auth/v1/login_time",{method:"GET",headers:it});return await ke(_)}async function Nr(_){const s=await fetch("/auth/v1/password_hash_times",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Rr(_){const s=await fetch("/auth/v1/password_policy",{method:"PUT",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Dr(_){const s=await fetch("/auth/v1/users/request_reset",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function jr(){return await fetch("/auth/v1/providers",{method:"POST",headers:De()})}async function Or(_){return await fetch("/auth/v1/providers/create",{method:"POST",headers:De(),body:JSON.stringify(_)})}async function Mr(_,s){return await fetch(`/auth/v1/providers/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)})}async function zr(_){return await fetch(`/auth/v1/providers/${_}`,{method:"DELETE",headers:De()})}async function Ur(_){return await fetch(`/auth/v1/providers/${_}/delete_safe`,{method:"GET",headers:De()})}async function Pr(_,s){const t=new FormData;t.append("logo",s);const d=await fetch(`/auth/v1/providers/${_}/img`,{method:"PUT",headers:{"csrf-token":oa()},body:t});return await ke(d)}async function qr(_){return await fetch("/auth/v1/providers/lookup",{method:"POST",headers:De(),body:JSON.stringify(_)})}async function Wr(){const _=await fetch("/auth/v1/oidc/rotate_jwk",{method:"POST",headers:De()});return await ke(_)}async function Gr(){const _=await fetch("/auth/v1/sessions",{method:"GET",headers:it});return await ke(_)}async function Ya(_,s,t,d){let i=`/auth/v1/sessions?page_size=${_}`;s&&(i=`${i}&offset=${s}`),d&&(i=`${i}&backwards=${d}`),t&&(i=`${i}&continuation_token=${t}`);const m=await fetch(i,{method:"GET",headers:it});return await ke(m)}async function Kr(){const _=await fetch("/auth/v1/sessions",{method:"DELETE",headers:De()});return await ke(_)}async function Br(_){const s=await fetch(`/auth/v1/sessions/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Fr(){const _=await fetch("/auth/v1/users",{method:"GET",headers:it});return await ke(_)}async function Ha(_,s,t,d){let i=`/auth/v1/users?page_size=${_}`;s&&(i=`${i}&offset=${s}`),d&&(i=`${i}&backwards=${d}`),t&&(i=`${i}&continuation_token=${t}`);const m=await fetch(i,{method:"GET",headers:it});return await ke(m)}async function Vr(_){const s=await fetch("/auth/v1/users",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Xa(_,s){const t=await fetch(`/auth/v1/users/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Jr(_){const s=await fetch(`/auth/v1/users/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function ma(){const _=await fetch("/auth/v1/users/attr",{method:"GET",headers:it});return await ke(_)}async function Yr(_){const s=await fetch("/auth/v1/users/attr",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Hr(_,s){const t=await fetch(`/auth/v1/users/attr/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Xr(_){const s=await fetch(`/auth/v1/users/attr/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Zr(_){const s=await fetch(`/auth/v1/users/${_}/attr`,{method:"GET",headers:it});return await ke(s)}async function Qr(_,s){const t=await fetch(`/auth/v1/users/${_}/attr`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function ei(){const _=await fetch("/auth/v1/api_keys",{method:"GET",headers:it});return await ke(_)}async function ti(_){const s=await fetch("/auth/v1/api_keys",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ai(_){const s=await fetch(`/auth/v1/api_keys/${_.name}`,{method:"PUT",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function si(_){const s=await fetch(`/auth/v1/api_keys/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function ri(_){const s=await fetch(`/auth/v1/api_keys/${_}/secret`,{method:"PUT",headers:De()});return await ke(s)}async function ii(){const _=await fetch("/auth/v1/blacklist",{method:"GET",headers:it});return await ke(_)}async function li(_){const s=await fetch("/auth/v1/blacklist",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ni(_){const s=await fetch(`/auth/v1/blacklist/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Za(){const _=await fetch("/auth/v1/roles",{method:"GET",headers:it});return await ke(_)}async function oi(_){const s=await fetch("/auth/v1/roles",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function vi(_,s){const t=await fetch(`/auth/v1/roles/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function di(_){const s=await fetch(`/auth/v1/roles/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Qa(){const _=await fetch("/auth/v1/scopes",{method:"GET",headers:it});return await ke(_)}async function ci(_){const s=await fetch("/auth/v1/scopes",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ui(_,s){const t=await fetch(`/auth/v1/scopes/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function hi(_){const s=await fetch(`/auth/v1/scopes/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function pi(_,s,t){const d=await fetch(`/auth/v1/search?ty=${_}&idx=${s}&q=${t}`,{method:"GET",headers:it});return await ke(d)}const mi=At([]),ga=At([]),gi=At([]),fa=At([]),fi=At([]),es=At([]);var wi=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function yi(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=wi();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var bi=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function $i(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=bi();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var _i=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function ki(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=_i();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var xi=I("<option> </option>"),Ei=I('<select class="opts font-label svelte-9iykj"></select>'),Si=I('<div class="container svelte-9iykj"><!> <div class="inputBar svelte-9iykj"><input class="input svelte-9iykj" type="text" placeholder="Search" autocomplete="off"> <div class="magnify svelte-9iykj"><!></div></div> <div class="backWrap svelte-9iykj"><div role="button" tabindex="0" class="back svelte-9iykj"><!></div></div></div>');function ts(_,s){le(s,!0);let t=W(s,"items",27,()=>n([])),d=W(s,"resItems",15),i=W(s,"options",19,()=>[]),m=W(s,"useServerSideIdx",11,""),g=W(s,"isSearchFiltered",15,!1),u=W(s,"search",15,""),S=C(""),E;Ne(()=>{i().length>0&&(a(S,n(i()[0].label)),o())});function o(){for(let j of i())if(j.label===e(S)){E=j.callback;break}E||console.error("Could not find a valid callback function in search options for label "+e(S))}function $(){u("")}function p(){if(u().length<2){d(t()),g(!1);return}d([...t().filter(j=>i().length>0?E(j,u()):j.toLowerCase().includes(u())||j===u())]),g(!0)}async function A(){if(u().length<ks){d(t()),g(!1);return}g(!0);const j=e(S).replaceAll("-","").replaceAll(" ","").toLowerCase();let N=await pi(m(),j,u());N.ok?d(await N.json()):console.error(N)}Ae(()=>{e(S)&&o()}),Ae(()=>{u()?m()?A():p():(d(t()),g(!1))});var k=Si(),h=c(k);{var w=j=>{Ze(j,{text:"Search by",yOffset:-30,children:(N,G)=>{var R=Ei();Ge(R,21,i,wt,(F,M)=>{var z=xi(),P={},Q=c(z,!0);v(z),B(()=>{P!==(P=e(M).label)&&(z.value=(z.__value=e(M).label)==null?"":e(M).label),Y(Q,e(M).label)}),r(F,z)}),v(R),Ba(R,()=>e(S),F=>a(S,F)),r(N,R)},$$slots:{default:!0}})};O(h,j=>{i().length>1&&j(w)})}var y=l(h,2),b=c(y);nt(b),B(()=>ue(b,"name",Ut()));var x=l(b,2),f=c(x);$i(f,{width:20}),v(x),v(y);var T=l(y,2),L=c(T);L.__click=$;var D=c(L);ki(D,{}),v(L),v(T),v(k),dt(b,u),Ue("keypress",L,$),r(_,k),ne()}pt(["click"]);var Ci=(_,s)=>a(s,!e(s)),Ii=I('<div class="search svelte-spg3op"><!></div>'),Ti=(_,s,t)=>s(e(t)),Ai=I('<div role="button" tabindex="0" class="item svelte-spg3op"> </div>'),Li=I('<div class="itemsContainer svelte-spg3op"><!> <div class="items noselect font-label svelte-spg3op"></div></div>'),Ni=I('<div class="wrapper svelte-spg3op"><div role="button" tabindex="0" class="icon svelte-spg3op"><!></div> <!></div>');function Ri(_,s){le(s,!0);let t=W(s,"items",31,()=>n([])),d=W(s,"onSelect",3,h=>{}),i=W(s,"mindWidth",3,130),m=W(s,"maxHeight",19,()=>t().length>4?175:120),g=W(s,"searchThreshold",11,5),u=C(n([])),S=C(!1);Ae(()=>{t().length<=g()&&a(u,n(t()))});function E(h){a(S,!1),a(u,n(t())),d()(h)}var o=Ni(),$=c(o);$.__click=[Ci,S];var p=c($);yi(p,{}),v($);var A=l($,2);{var k=h=>{var w=Li(),y=c(w);{var b=f=>{var T=Ii(),L=c(T);ts(L,{get items(){return t()},set items(D){t(D)},get resItems(){return e(u)},set resItems(D){a(u,n(D))}}),v(T),B(()=>oe(T,"max-width",`${i()}px`)),r(f,T)};O(y,f=>{t().length>g()&&f(b)})}var x=l(y,2);Ge(x,21,()=>e(u),wt,(f,T)=>{var L=Ai();L.__click=[Ti,E,T];var D=c(L,!0);v(L),B(()=>Y(D,e(T))),Ue("keypress",L,()=>E(e(T))),r(f,L)}),v(x),v(w),B(()=>{ue(w,"style",`min-width: ${i()??""}px; max-height: ${m()??""}px`),ue(x,"style",`width: ${i()??""}; max-height: ${(t().length>g()?m()-29:m())??""}px`)}),ce(7,w,()=>_e,()=>({duration:200})),r(h,w)};O(A,h=>{e(S)&&h(k)})}v(o),Ue("keypress",$,()=>a(S,!e(S))),r(_,o),ne()}pt(["click"]);var Di=(_,s,t)=>s()(t.label),ji=I('<div class="label font-label svelte-jphwq"> <div role="button" tabindex="0" class="icon svelte-jphwq"><!></div></div>');function Oi(_,s){le(s,!0);let t=W(s,"onDelete",3,()=>{});var d=ji(),i=c(d),m=l(i);m.__click=[Di,t,s];var g=c(m);Qt(g,{color:"--var(--col-bg)",width:14}),v(m),v(d),B(()=>Y(i,`${s.label??""} `)),Ue("keypress",m,()=>t()(s.label)),r(_,d),ne()}pt(["click"]);var Mi=I('<div class="container svelte-1iraqg1"><!> <!></div>');function Mt(_,s){le(s,!0);let t=W(s,"items",15),d=W(s,"options",19,()=>[]),i=W(s,"searchThreshold",15,4),m=C(n([]));Ne(()=>{S()});async function g(k){t()||t([]),t().push(k),t([...t()]),await S()}async function u(k){t([...t().filter(h=>h!==k)]),await S()}async function S(){await Vt(),t()||t([]),a(m,n([...d().filter(k=>!t().includes(k))]))}var E=Mi(),o=c(E);{var $=k=>{var h=me(),w=ee(h);Ge(w,17,t,wt,(y,b,x)=>{Oi(y,{onDelete:u,get label(){return t()[x]},set label(f){t(t()[x]=f,!0)}})}),r(k,h)};O(o,k=>{var h;((h=t())==null?void 0:h.length)>0&&k($)})}var p=l(o,2);{var A=k=>{Ri(k,{onSelect:g,get items(){return e(m)},set items(h){a(m,n(h))},get searchThreshold(){return i()},set searchThreshold(h){i(h)}})};O(p,k=>{e(m)&&e(m).length>0&&k(A)})}v(E),r(_,E),ne()}var zi=I('<div class="success svelte-tl4x7h">Success</div>'),Ui=I('<div class="err svelte-tl4x7h"> </div>'),Pi=I('<div class="container svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">USER ID</div> <div class="value font-mono svelte-tl4x7h"> </div></div> <div class="row svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">ENABLED</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">E-MAIL VERIFIED</div> <div class="value svelte-tl4x7h"><!></div></div></div> <!> <!> <!> <div class="unit language svelte-tl4x7h"><div class="label svelte-tl4x7h">LANGUAGE</div> <div style="margin-top: .085rem"><!></div></div> <!> <!> <!> <!> <!> <!> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">ROLES</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">GROUPS</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LIMIT LIFETIME</div> <div class="value svelte-tl4x7h"><!></div></div> <!> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">CREATED</div> <div class="value svelte-tl4x7h"> </div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LAST LOGIN</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">PASSWORD EXPIRES</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">MFA ACTIVE</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><!> <!> <!></div></div>');function qi(_,s){le(s,!0);let t=W(s,"user",31,()=>n({}));t().roles===void 0&&t(t().roles=[],!0),t().groups===void 0&&t(t().groups=[],!0);let d=C(""),i=C(!1),m=C(void 0),g=C(n(t().language.toUpperCase())),u=C(!!t().user_expires),S=C(n(ys(()=>e(u))?ut(t().user_expires,!0):void 0)),E=C(n([]));ga.subscribe(X=>{a(E,n(X))});let o=C(n([]));fa.subscribe(X=>{a(o,n(X))}),Ae(()=>{e(i)&&a(m,n(setTimeout(()=>{a(i,!1),s.onSave()},3e3)))});let $=C(n({}));const p=He().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(va,"Invalid characters"),family_name:he().nullable().trim().matches(xs,"Invalid characters")});let A=C(n({}));const k=He().shape({birthdate:he().nullable().trim().matches(Es,"Invalid characters"),phone:he().nullable().trim().matches(Ss,"Format: +..."),street:he().nullable().trim().matches(Cs,"Invalid characters"),zip:yt().nullable().min(1e3).max(999999),city:he().nullable().trim().matches(Na,"Invalid characters"),country:he().nullable().trim().matches(Na,"Invalid characters")});Ne(()=>()=>clearTimeout(e(m)));function h(X){X.code==="Enter"&&w()}async function w(){if(!await y())return;a(d,""),console.log(t().user_values);const X={email:t().email,given_name:t().given_name,family_name:t().family_name||null,language:e(g).toLowerCase(),roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified,user_expires:null,user_values:t().user_values};if(X.user_values.phone&&(X.user_values.phone=X.user_values.phone.replaceAll(" ","")),X.user_values.zip&&(X.user_values.zip=Number.parseInt(X.user_values.zip)),e(u)){let Le=zt(e(S));if(!Le){a(d,"Invalid Date Input: User Expires");return}X.user_expires=Le}let Ee=await Xa(t().id,X);if(Ee.ok)a(i,!0);else{let Le=await Ee.json();a(d,n(Le.message))}}async function y(){let X=!0;try{await p.validate(t(),{abortEarly:!1}),a($,n({}))}catch(Ee){a($,n(Ye(Ee))),X=!1}try{await k.validate(t().user_values,{abortEarly:!1}),a(A,n({}))}catch(Ee){a(A,n(Ye(Ee))),X=!1}return X}var b=Pi(),x=c(b),f=l(c(x),2),T=c(f,!0);v(f),v(x);var L=l(x,2);oe(L,"margin-top","-5px");var D=c(L);oe(D,"width","107px");var j=l(c(D),2),N=c(j);Ve(N,{get selected(){return t().enabled},set selected(X){t(t().enabled=X,!0)}}),v(j),v(D);var G=l(D,2);oe(G,"width","135px");var R=l(c(G),2),F=c(R);Ve(F,{get selected(){return t().email_verified},set selected(X){t(t().email_verified=X,!0)}}),v(R),v(G),v(L);var M=l(L,2);ie(M,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return t().email},set value(X){t(t().email=X,!0)},get error(){return e($).email},set error(X){e($).email=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("E-MAIL");r(X,Le)},$$slots:{default:!0}});var z=l(M,2);ie(z,{autocomplete:"off",placeholder:"Given Name",get value(){return t().given_name},set value(X){t(t().given_name=X,!0)},get error(){return e($).given_name},set error(X){e($).given_name=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("GIVEN NAME");r(X,Le)},$$slots:{default:!0}});var P=l(z,2);ie(P,{autocomplete:"off",placeholder:"Family Name",get value(){return t().family_name},set value(X){t(t().family_name=X,!0)},get error(){return e($).family_name},set error(X){e($).family_name=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("FAMILY NAME");r(X,Le)},$$slots:{default:!0}});var Q=l(P,2),U=l(c(Q),2),K=c(U);kt(K,{options:Ra,get value(){return e(g)},set value(X){a(g,n(X))}}),v(U),v(Q);var J=l(Q,2);ie(J,{autocomplete:"off",placeholder:"Street",get value(){return t().user_values.street},set value(X){t(t().user_values.street=X,!0)},get error(){return e(A).street},set error(X){e(A).street=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("STREET");r(X,Le)},$$slots:{default:!0}});var Z=l(J,2);ie(Z,{type:"number",autocomplete:"off",placeholder:"ZIP",min:1e3,max:999999,get value(){return t().user_values.zip},set value(X){t(t().user_values.zip=X,!0)},get error(){return e(A).zip},set error(X){e(A).zip=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("ZIP");r(X,Le)},$$slots:{default:!0}});var re=l(Z,2);ie(re,{autocomplete:"off",placeholder:"City",get value(){return t().user_values.city},set value(X){t(t().user_values.city=X,!0)},get error(){return e(A).city},set error(X){e(A).city=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("CITY");r(X,Le)},$$slots:{default:!0}});var ve=l(re,2);ie(ve,{autocomplete:"off",placeholder:"Country",get value(){return t().user_values.country},set value(X){t(t().user_values.country=X,!0)},get error(){return e(A).country},set error(X){e(A).country=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("COUNTRY");r(X,Le)},$$slots:{default:!0}});var be=l(ve,2);ie(be,{autocomplete:"off",placeholder:"Phone",get value(){return t().user_values.phone},set value(X){t(t().user_values.phone=X,!0)},get error(){return e(A).phone},set error(X){e(A).phone=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("PHONE");r(X,Le)},$$slots:{default:!0}});var $e=l(be,2);ie($e,{type:"date",autocomplete:"off",placeholder:"Birthdate",get value(){return t().user_values.birthdate},set value(X){t(t().user_values.birthdate=X,!0)},get error(){return e(A).birthdate},set error(X){e(A).birthdate=X},$$events:{keypress:h,input:y},children:(X,Ee)=>{q();var Le=V("BIRTHDATE");r(X,Le)},$$slots:{default:!0}});var pe=l($e,2);oe(pe,"margin-top","-3px");var je=l(c(pe),2);Mt(je,{get options(){return e(E)},searchThreshold:4,get items(){return t().roles},set items(X){t(t().roles=X,!0)}}),v(pe);var fe=l(pe,2),de=l(c(fe),2);Mt(de,{get options(){return e(o)},searchThreshold:4,get items(){return t().groups},set items(X){t(t().groups=X,!0)}}),v(fe);var we=l(fe,2);oe(we,"margin-top","12px");var ye=l(c(we),2),Oe=c(ye);Ve(Oe,{get selected(){return e(u)},set selected(X){a(u,n(X))}}),v(ye),v(we);var Ie=l(we,2);{var xe=X=>{var Ee=Ke(()=>Da(new Date));ie(X,{type:"datetime-local",step:"60",width:"16rem",get min(){return e(Ee)},max:"2099-01-01T00:00",get value(){return e(S)},set value(Le){a(S,n(Le))},$$events:{input:y},children:(Le,Ct)=>{q();var ae=V("USER EXPIRES");r(Le,ae)},$$slots:{default:!0}})};O(Ie,X=>{e(u)&&X(xe)})}var Re=l(Ie,2);oe(Re,"margin-top","12px");var H=l(c(Re),2),Se=c(H,!0);B(()=>Y(Se,ut(t().created_at))),v(H),v(Re);var ge=l(Re,2),Pe=l(c(ge),2),Je=c(Pe);{var rt=X=>{var Ee=V();B(()=>Y(Ee,ut(t().last_login))),r(X,Ee)},vt=X=>{var Ee=V("Never");r(X,Ee)};O(Je,X=>{t().last_login?X(rt):X(vt,!1)})}v(Pe),v(ge);var qe=l(ge,2),Be=l(c(qe),2),lt=c(Be);{var xt=X=>{var Ee=V();B(()=>Y(Ee,ut(t().password_expires))),r(X,Ee)},$t=X=>{var Ee=V("Never");r(X,Ee)};O(lt,X=>{t().password_expires?X(xt):X($t,!1)})}v(Be),v(qe);var Qe=l(qe,2),et=l(c(Qe),2),gt=c(et),ct=Ke(()=>!!t().webauthn_user_id);ea(gt,{get check(){return e(ct)}}),v(et),v(Qe);var St=l(Qe,2),at=c(St);Ce(at,{level:1,width:"4rem",$$events:{click:w},children:(X,Ee)=>{q();var Le=V("SAVE");r(X,Le)},$$slots:{default:!0}});var st=l(at,2);{var se=X=>{var Ee=zi();r(X,Ee)};O(st,X=>{e(i)&&X(se)})}var Te=l(st,2);{var Me=X=>{var Ee=Ui(),Le=c(Ee,!0);v(Ee),B(()=>Y(Le,e(d))),r(X,Ee)};O(Te,X=>{e(d)&&X(Me)})}v(St),v(b),B(()=>Y(T,t().id)),r(_,b),ne()}var Wi=I('<div class="desc svelte-8ppjyk"><p><b>The user has not initialized this account yet.</b></p> <p>You may send out a new Reset E-Mail, if the user has not received one.</p></div> <!>',1),Gi=I(`<div class="desc svelte-8ppjyk"><p><b>This is a passkey only account type.</b></p> <p>This means, that this user is using the passwordless login flow only and does not have any password.</p> <p>If the user has lost all his keys and you have verified everything, you may reset his account type and
                send out a new reset E-Mail, so the user can get access again.</p> <p>To reset the account, navigate to 'MFA' and delete all registered keys for this user.</p></div>`),Ki=I(`<!> <!> <!> <!> <div class="desc svelte-8ppjyk">You can either set and reset a user's password<br> or send out a new reset E-Mail for self-service.</div> <!> <!>`,1),Bi=I('<div class="success svelte-8ppjyk">Success</div>'),Fi=I('<div class="err svelte-8ppjyk"> </div>'),Vi=I('<div class="err svelte-8ppjyk"> </div>'),Ji=I('<div class="container svelte-8ppjyk"><!> <!> <!> <!></div>');function Yi(_,s){le(s,!0);let t=W(s,"user",27,()=>n({}));const d="inherit";let i=C(!1),m=C(""),g=C(""),u=C(!1),S=C(!1),E=C(void 0),o="330px",$=C(void 0),p=C(!1),A=n({new:"",verify:""});Ae(()=>{e(S)&&a(E,n(setTimeout(()=>{a(S,!1),s.onSave()},3e3)))}),Ne(async()=>{if(!e($)){let M=await ja(),z=await M.json();M.ok?a($,n(z)):a(g,n(z.message))}});async function k(){return a(g,""),await h()?e(p)?!0:(a(g,"You must follow the password policy"),!1):!1}async function h(){return a(g,""),A.new.length>256?(a(g,"max 256 characters"),!1):A.new!==A.verify?(a(g,"New passwords do not match"),!1):!0}async function w(){let M={email:t().email};a(m,""),a(i,!0);let z=await Dr(M);if(z.ok)a(u,!0);else{let P=await z.json();a(m,n(P.message))}a(i,!1)}async function y(){let M={email:t().email,given_name:t().given_name,family_name:t().family_name,roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified};if(A.new.length>0){if(!(await h()&&await k()))return;M.password=A.new}a(g,""),a(i,!0);let z=await Xa(t().id,M);if(z.ok)a(S,!0);else{let P=await z.json();a(g,n(P.message))}a(i,!1)}function b(){const M=e($).length_min>24?e($).length_min:24;let z=Is(M,e($).include_lower_case,e($).include_upper_case,e($).include_digits,e($).include_special);A.new=z,A.verify=z}var x=Ji(),f=c(x);{var T=M=>{var z=Wi(),P=l(ee(z),2);Ce(P,{width:d,level:2,get isLoading(){return e(i)},set isLoading(Q){a(i,n(Q))},$$events:{click:w},children:(Q,U)=>{q();var K=V("SEND RESET E-MAIL");r(Q,K)},$$slots:{default:!0}}),r(M,z)},L=M=>{var z=me(),P=ee(z);{var Q=K=>{var J=Gi();r(K,J)},U=K=>{var J=Ki(),Z=ee(J);{var re=de=>{Qs(de,{get password(){return A.new},get policy(){return e($)},get accepted(){return e(p)},set accepted(we){a(p,n(we))}})};O(Z,de=>{e($)&&de(re)})}var ve=l(Z,2),be=Ke(()=>A.new.length>0&&A.new===A.verify);Gt(ve,{type:"password",get width(){return o},autocomplete:"off",get showCopy(){return e(be)},get value(){return A.new},set value(de){A.new=de},$$events:{blur:h},children:(de,we)=>{q();var ye=V("New Password");r(de,ye)},$$slots:{default:!0}});var $e=l(ve,2);Gt($e,{type:"password",get width(){return o},autocomplete:"off",get value(){return A.verify},set value(de){A.verify=de},$$events:{blur:h},children:(de,we)=>{q();var ye=V("New Password");r(de,ye)},$$slots:{default:!0}});var pe=l($e,2);Ce(pe,{width:d,level:3,$$events:{click:b},children:(de,we)=>{q();var ye=V("GENERATE RANDOM");r(de,ye)},$$slots:{default:!0}});var je=l(pe,4);Ce(je,{width:d,level:1,get isLoading(){return e(i)},set isLoading(de){a(i,n(de))},$$events:{click:w},children:(de,we)=>{q();var ye=V("SEND RESET E-MAIL");r(de,ye)},$$slots:{default:!0}});var fe=l(je,2);Ce(fe,{width:d,get isLoading(){return e(i)},set isLoading(de){a(i,n(de))},$$events:{click:y},children:(de,we)=>{q();var ye=V("SAVE PASSWORD");r(de,ye)},$$slots:{default:!0}}),r(K,J)};O(P,K=>{t().account_type==="passkey"?K(Q):K(U,!1)},!0)}r(M,z)};O(f,M=>{t().account_type==="new"?M(T):M(L,!1)})}var D=l(f,2);{var j=M=>{var z=Bi();r(M,z)};O(D,M=>{(e(S)||e(u))&&M(j)})}var N=l(D,2);{var G=M=>{var z=Fi(),P=c(z,!0);v(z),B(()=>Y(P,e(g))),r(M,z)};O(N,M=>{e(g)&&M(G)})}var R=l(N,2);{var F=M=>{var z=Vi(),P=c(z,!0);v(z),B(()=>Y(P,e(m))),r(M,z)};O(R,M=>{e(m)&&M(F)})}v(x),r(_,x),ne()}var Hi=I('<div class="err svelte-1jljqe9"> </div>'),Xi=I('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this user?</div> <!> <!></div>');function Zi(_,s){le(s,!0);let t=W(s,"user",27,()=>n({})),d=C(!1),i=C("");async function m(){a(i,""),a(d,!0);let o=await Jr(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var g=Xi(),u=l(c(g),2);Ce(u,{level:1,width:"5rem",get isLoading(){return e(d)},set isLoading(o){a(d,n(o))},$$events:{click:m},children:(o,$)=>{q();var p=V("DELETE");r(o,p)},$$slots:{default:!0}});var S=l(u,2);{var E=o=>{var $=Hi(),p=c($,!0);v($),B(()=>Y(p,e(i))),r(o,$)};O(S,o=>{e(i)&&o(E)})}v(g),r(_,g),ne()}var Qi=I('<div class="err svelte-1ofwsjt"> </div>'),el=I('<div class="success svelte-1ofwsjt">Success</div>'),tl=I('<div class="container svelte-1ofwsjt"><div class="label svelte-1ofwsjt">Invalidate all existing sessions and refresh tokens for this user?</div> <!> <!></div>');function al(_,s){le(s,!0);let t=W(s,"user",27,()=>n({})),d=C(!1),i=C(""),m=C(!1);async function g(){a(i,""),a(d,!0);let p=await Br(t().id);if(p.ok)a(m,!0);else{let A=await p.json();a(i,n(A.message))}a(d,!1)}var u=tl(),S=l(c(u),2);Ce(S,{level:1,get isLoading(){return e(d)},set isLoading(p){a(d,n(p))},$$events:{click:g},children:(p,A)=>{q();var k=V("LOGOUT");r(p,k)},$$slots:{default:!0}});var E=l(S,2);{var o=p=>{var A=Qi(),k=c(A,!0);v(A),B(()=>Y(k,e(i))),r(p,A)},$=p=>{var A=me(),k=ee(A);{var h=w=>{var y=el();r(w,y)};O(k,w=>{e(m)&&w(h)},!0)}r(p,A)};O(E,p=>{e(i)?p(o):p($,!1)})}v(u),r(_,u),ne()}var sl=I('<div class="success svelte-iv4fzr">Success</div>'),rl=I('<div class="err svelte-iv4fzr"> </div>'),il=I('<div class="container svelte-iv4fzr"><div class="desc svelte-iv4fzr">Set custom user attributes.<br> All Key / Value pairs will be handled as String / String.</div> <!> <!> <!> <!></div>');function ll(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(!1),m=C(!1);Ne(()=>{S()});async function g(){let y=await ma();if(!y.ok)a(t,"Error fetching attr: "+y.body.message);else return await y.json()}async function u(){let y=await Zr(s.user.id);if(!y.ok)a(t,"Error fetching user attr: "+y.body.message);else return await y.json()}async function S(){let y=await g(),b=y.values;if(y){let x=await u();if(x){let f=new Map;for(let T of x.values)f.set(T.key,T.value||"");for(let T of b){let L=f.get(T.name);L?T.value=L:T.value=""}a(d,n([...b]))}}}async function E(){a(t,""),a(m,!0);let y=[];for(let T of e(d)){let L={key:T.name,value:T.value};y.push(L)}let b={values:y},x=await Qr(s.user.id,b),f=await x.json();x.ok?a(i,!0):a(t,n(f.message)),s.onSave(),a(m,!1)}var o=il(),$=l(c(o),2);Ge($,17,()=>e(d),wt,(y,b,x)=>{var f=Ke(()=>e(b).desc||"JSON Value");ie(y,{style:"width: 350px",autocomplete:"off",get placeholder(){return e(f)},get value(){return e(b).value},set value(T){e(b).value=T},children:(T,L)=>{q();var D=V();B(()=>Y(D,e(b).name)),r(T,D)},$$slots:{default:!0}})});var p=l($,2);Ce(p,{get isLoading(){return e(m)},level:1,width:"4rem",$$events:{click:E},children:(y,b)=>{q();var x=V("SAVE");r(y,x)},$$slots:{default:!0}});var A=l(p,2);{var k=y=>{var b=sl();r(y,b)};O(A,y=>{e(i)&&y(k)})}var h=l(A,2);{var w=y=>{var b=rl(),x=c(b,!0);v(b),B(()=>Y(x,e(t))),r(y,b)};O(h,y=>{e(t)&&y(w)})}v(o),r(_,o),ne()}var nl=I('<div class="desc svelte-1a9qw6n">This user does not have any active MFA keys.</div>'),ol=I('<div class="keyContainer svelte-1a9qw6n"><div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Passkey Name:</div> <b> </b></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Key Registered:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Last Usage:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n"></div> <div class="deleteBtn svelte-1a9qw6n"><!></div></div></div>'),vl=I('<div class="desc svelte-1a9qw6n">You can delete the users MFA / Security Keys.<br> Be careful though, since this <b>cannot be reverted</b> without user interaction.<br> This is useful, if a user lost his keys and he is not able to log in any more.</div> <div class="keysContainer svelte-1a9qw6n"></div>',1),dl=I('<div class="err svelte-1a9qw6n"> </div>'),cl=I('<div class="container svelte-1a9qw6n"><!> <!></div>');function ul(_,s){le(s,!0);let t=W(s,"user",27,()=>n({})),d=C(""),i=C(n([]));Ne(async()=>{await m()});async function m(){let A=await Ts(t().id),k=await A.json();A.ok?a(i,n(k)):console.error("error fetching passkeys: "+k.message)}async function g(A){let k=e(i).length===1,h=await As(t().id,A);if(h.status===200)return await m(),k&&s.onSave(),!0;{let w=await h.json();return a(d,n(w.message)),!1}}var u=cl(),S=c(u);{var E=A=>{var k=nl();r(A,k)},o=A=>{var k=vl(),h=l(ee(k),2);Ge(h,21,()=>e(i),w=>w.name,(w,y)=>{var b=ol(),x=c(b),f=l(c(x),2),T=c(f,!0);v(f),v(x);var L=l(x,2),D=l(c(L),2),j=c(D,!0);B(()=>Y(j,ut(e(y).registered))),v(D),v(L);var N=l(L,2),G=l(c(N),2),R=c(G,!0);B(()=>Y(R,ut(e(y).last_used))),v(G),v(N);var F=l(N,2),M=l(c(F),2),z=c(M);Ce(z,{level:4,$$events:{click:()=>g(e(y).name)},children:(P,Q)=>{q();var U=V("DELETE");r(P,U)},$$slots:{default:!0}}),v(M),v(F),v(b),B(()=>Y(T,e(y).name)),r(w,b)}),v(h),r(A,k)};O(S,A=>{e(i).length<1?A(E):A(o,!1)})}var $=l(S,2);{var p=A=>{var k=dl(),h=c(k,!0);v(k),B(()=>Y(h,e(d))),r(A,k)};O($,A=>{e(d)&&A(p)})}v(u),r(_,u),ne()}var hl=I('<div class="container svelte-nw2ucx"><!></div>');function pl(_,s){le(s,!0);var t=hl(),d=c(t);Bs(d,{get userId(){return s.user.id}}),v(t),r(_,t),ne()}var ml=I('<div class="data font-mono svelte-115hohv"> </div>'),gl=I('<div class="data svelte-115hohv"> </div>'),fl=I('<div class="header svelte-115hohv"><!> <!></div>'),wl=I("<div><!></div>"),yl=I("<div><!></div>"),bl=I("<div><!></div>"),$l=I("<div><!></div>"),_l=I("<div><!></div>"),kl=I("<div><!></div>"),xl=I("<div><!></div>"),El=I("<!> <!>",1),Sl=I("<div><!></div>");function as(_,s){le(s,!0);let t=W(s,"userEmail",3,""),d=W(s,"userId",3,""),i=W(s,"onSave",15),m=C(void 0),g=C(!0),u=C(void 0);const S=["Info","Attributes","Password","MFA","Devices","Logout","Delete"];let E=C(n(S[0]));const o=200,$=o/2;async function p(){const k=await Ls(d());if(k.ok)a(m,n(await k.json()));else{let h=await k.json();console.error(h)}a(g,!1)}function A(){a(u,!1),i()()}Ae(()=>{e(u)&&p()}),ot(_,{get show(){return e(u)},set show(k){a(u,n(k))},header:k=>{var h=fl(),w=c(h);Ze(w,{text:"User ID",children:(b,x)=>{var f=ml(),T=c(f,!0);v(f),B(()=>Y(T,d())),r(b,f)},$$slots:{default:!0}});var y=l(w,2);Ze(y,{text:"E-Mail",children:(b,x)=>{var f=gl(),T=c(f,!0);v(f),B(()=>Y(T,t())),r(b,f)},$$slots:{default:!0}}),v(h),r(k,h)},body:k=>{var h=Sl(),w=c(h);{var y=x=>{ua(x,{})},b=x=>{var f=El(),T=ee(f);Dt(T,{labels:S,get selected(){return e(E)},set selected(N){a(E,n(N))}});var L=l(T,2);{var D=N=>{var G=wl(),R=c(G);qi(R,{get user(){return e(m)},set user(F){a(m,n(F))},get onSave(){return i()},set onSave(F){i(F)}}),v(G),ce(5,G,()=>_e,()=>({delay:$,duration:o})),ce(6,G,()=>_e,()=>({duration:o})),r(N,G)},j=N=>{var G=me(),R=ee(G);{var F=z=>{var P=yl(),Q=c(P);ll(Q,{get user(){return e(m)},set user(U){a(m,n(U))},get onSave(){return i()},set onSave(U){i(U)}}),v(P),ce(5,P,()=>_e,()=>({delay:$,duration:o})),ce(6,P,()=>_e,()=>({duration:o})),r(z,P)},M=z=>{var P=me(),Q=ee(P);{var U=J=>{var Z=bl(),re=c(Z);Yi(re,{get user(){return e(m)},set user(ve){a(m,n(ve))},get onSave(){return i()},set onSave(ve){i(ve)}}),v(Z),ce(5,Z,()=>_e,()=>({delay:$,duration:o})),ce(6,Z,()=>_e,()=>({duration:o})),r(J,Z)},K=J=>{var Z=me(),re=ee(Z);{var ve=$e=>{var pe=$l(),je=c(pe);ul(je,{get user(){return e(m)},set user(fe){a(m,n(fe))},get onSave(){return i()},set onSave(fe){i(fe)}}),v(pe),ce(5,pe,()=>_e,()=>({delay:$,duration:o})),ce(6,pe,()=>_e,()=>({duration:o})),r($e,pe)},be=$e=>{var pe=me(),je=ee(pe);{var fe=we=>{var ye=_l(),Oe=c(ye);pl(Oe,{get user(){return e(m)},set user(Ie){a(m,n(Ie))}}),v(ye),ce(5,ye,()=>_e,()=>({delay:$,duration:o})),ce(6,ye,()=>_e,()=>({duration:o})),r(we,ye)},de=we=>{var ye=me(),Oe=ee(ye);{var Ie=Re=>{var H=kl(),Se=c(H);al(Se,{get user(){return e(m)},set user(ge){a(m,n(ge))}}),v(H),ce(5,H,()=>_e,()=>({delay:$,duration:o})),ce(6,H,()=>_e,()=>({duration:o})),r(Re,H)},xe=Re=>{var H=me(),Se=ee(H);{var ge=Pe=>{var Je=xl(),rt=c(Je);Zi(rt,{onSave:A,get user(){return e(m)},set user(vt){a(m,n(vt))}}),v(Je),ce(5,Je,()=>_e,()=>({delay:$,duration:o})),ce(6,Je,()=>_e,()=>({duration:o})),r(Pe,Je)};O(Se,Pe=>{e(E)==="Delete"&&Pe(ge)},!0)}r(Re,H)};O(Oe,Re=>{e(E)==="Logout"?Re(Ie):Re(xe,!1)},!0)}r(we,ye)};O(je,we=>{e(E)==="Devices"?we(fe):we(de,!1)},!0)}r($e,pe)};O(re,$e=>{e(E)==="MFA"?$e(ve):$e(be,!1)},!0)}r(J,Z)};O(Q,J=>{e(E)==="Password"?J(U):J(K,!1)},!0)}r(z,P)};O(R,z=>{e(E)==="Attributes"?z(F):z(M,!1)},!0)}r(N,G)};O(L,N=>{e(E)==="Info"?N(D):N(j,!1)})}r(x,f)};O(w,x=>{e(g)?x(y):x(b,!1)})}v(h),r(k,h)},$$slots:{header:!0,body:!0}}),ne()}var Cl=I('<div class="header font-label svelte-1y7ceqm">ADD NEW USER</div>'),Il=I('<div class="err svelte-1y7ceqm"> </div>'),Tl=I('<div class="container svelte-1y7ceqm"><!> <!> <!> <div class="language svelte-1y7ceqm"><div class="label svelte-1y7ceqm">LANGUAGE</div> <div style="margin-top: .4rem"><!></div></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">ROLES</div> <!></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">GROUPS</div> <!></div> <div class="unit svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">LIMIT LIFETIME</div> <div class="value"><!></div></div> <!> <div class="btn svelte-1y7ceqm"><!> <!></div></div>');function Al(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1),d=C(""),i=C(void 0),m=C("EN"),g=C(!1),u=C(void 0),S=C(n({email:"",family_name:"",given_name:"",roles:[],groups:[]})),E=C(n({}));const o=He().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(va,"Invalid characters"),family_name:he().trim().required("Family Name is required").matches(va,"Invalid characters")});let $=C(void 0);ga.subscribe(h=>{a($,n(h))});let p=C(void 0);fa.subscribe(h=>{a(p,n(h))});async function A(){if(!await k())return;a(d,"");let h=e(S);if(h.language=e(m).toLowerCase(),e(g)){let y=zt(e(u));if(!y){a(d,"Invalid Date Input: User Expires");return}h.user_expires=y}let w=await Vr(e(S));if(w.ok)a(S,n({})),a(i,!1),a(S,n({email:"",family_name:"",given_name:"",roles:[],groups:[]})),s.onSave();else{let y=await w.json();a(d,n(y.message))}}async function k(){try{return await o.validate(e(S),{abortEarly:!1}),a(E,n({})),!0}catch(h){return a(E,n(Ye(h))),!1}}ot(_,{get idx(){return t()},set idx(h){t(h)},get show(){return e(i)},set show(h){a(i,n(h))},header:h=>{var w=Cl();r(h,w)},body:h=>{var w=Tl(),y=c(w);ie(y,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return e(S).email},set value(Z){e(S).email=Z},get error(){return e(E).email},set error(Z){e(E).email=Z},$$events:{input:k},children:(Z,re)=>{q();var ve=V("E-MAIL");r(Z,ve)},$$slots:{default:!0}});var b=l(y,2);ie(b,{autocomplete:"off",placeholder:"Given Name",get value(){return e(S).given_name},set value(Z){e(S).given_name=Z},get error(){return e(E).given_name},set error(Z){e(E).given_name=Z},$$events:{input:k},children:(Z,re)=>{q();var ve=V("GIVEN NAME");r(Z,ve)},$$slots:{default:!0}});var x=l(b,2);ie(x,{autocomplete:"off",placeholder:"Family Name",get value(){return e(S).family_name},set value(Z){e(S).family_name=Z},get error(){return e(E).family_name},set error(Z){e(E).family_name=Z},$$events:{input:k},children:(Z,re)=>{q();var ve=V("FAMILY NAME");r(Z,ve)},$$slots:{default:!0}});var f=l(x,2),T=l(c(f),2),L=c(T);kt(L,{options:Ra,get value(){return e(m)},set value(Z){a(m,n(Z))}}),v(T),v(f);var D=l(f,2),j=l(c(D),2);Mt(j,{get options(){return e($)},searchThreshold:4,get items(){return e(S).roles},set items(Z){e(S).roles=Z}}),v(D);var N=l(D,2),G=l(c(N),2);Mt(G,{get options(){return e(p)},searchThreshold:4,get items(){return e(S).groups},set items(Z){e(S).groups=Z}}),v(N);var R=l(N,2);oe(R,"margin-top","12px");var F=l(c(R),2),M=c(F);Ve(M,{get selected(){return e(g)},set selected(Z){a(g,n(Z))}}),v(F),v(R);var z=l(R,2);{var P=Z=>{ie(Z,{type:"datetime-local",step:"60",width:"18rem",get min(){return new Date().toISOString().split(".")[0]},max:"2099-01-01T00:00",get value(){return e(u)},set value(re){a(u,n(re))},$$events:{input:k},children:(re,ve)=>{q();var be=V("USER EXPIRES");r(re,be)},$$slots:{default:!0}})};O(z,Z=>{e(g)&&Z(P)})}var Q=l(z,2),U=c(Q);Ce(U,{level:1,$$events:{click:A},children:(Z,re)=>{q();var ve=V("SAVE");r(Z,ve)},$$slots:{default:!0}});var K=l(U,2);{var J=Z=>{var re=Il(),ve=c(re,!0);v(re),B(()=>Y(ve,e(d))),r(Z,re)};O(K,Z=>{e(d)&&Z(J)})}v(Q),v(w),r(h,w)},$$slots:{header:!0,body:!0}}),ne()}var Ll=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"></path></svg>');function Nl(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Ll();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Rl=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"></path></svg>');function Dl(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Rl();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var jl=I("<option> </option>"),Ol=I('<select class="opts font-label svelte-t7wy0q"></select>'),Ml=I('<div role="button" tabindex="0" class="icon svelte-t7wy0q"><!></div>'),zl=I('<div class="container svelte-t7wy0q"><!> <!></div>');function Ul(_,s){le(s,!0);let t=W(s,"items",19,()=>[]),d=W(s,"resItems",15),i=W(s,"options",19,()=>[]),m=W(s,"firstDirReverse",3,!1),g=C(""),u=C(1),S;Ne(()=>{i().length>0&&(a(g,n(i()[0].label)),E()),m()&&$(),o()});function E(){for(let y of i())if(y.label===e(g)){S=y.callback;break}S||console.error("Could not find a valid callback function in order options for label "+e(g))}function o(){if(S){let y=[...t()];y.sort((b,x)=>S(b,x)*e(u)),d([...y])}}function $(){a(u,e(u)*-1),o()}Ae(()=>{t()&&o()}),Ae(()=>{e(g)&&(E(),o())});var p=zl(),A=c(p);{var k=y=>{Ze(y,{text:"Order by",yOffset:-30,children:(b,x)=>{var f=Ol();Ge(f,21,i,wt,(T,L)=>{var D=jl(),j={},N=c(D,!0);v(D),B(()=>{j!==(j=e(L).label)&&(D.value=(D.__value=e(L).label)==null?"":e(L).label),Y(N,e(L).label)}),r(T,D)}),v(f),Ba(f,()=>e(g),T=>a(g,T)),r(b,f)},$$slots:{default:!0}})};O(A,y=>{i().length>1&&y(k)})}var h=l(A,2);{var w=y=>{var b=Ml();b.__click=$;var x=c(b);{var f=L=>{Dl(L,{})},T=L=>{Nl(L,{})};O(x,L=>{e(u)===1?L(f):L(T,!1)})}v(b),Ue("keypress",b,$),r(y,b)};O(h,y=>{i().length>0&&y(w)})}v(p),r(_,p),ne()}pt(["click"]);var Pl=I('<div class="divider svelte-16rtgja"></div>'),ql=I('<div class="container svelte-16rtgja"><div><!></div> <!> <div><!></div></div>');function Lt(_,s){le(s,!0);let t=W(s,"items",31,()=>n([])),d=W(s,"resItems",15),i=W(s,"searchOptions",27,()=>n([])),m=W(s,"orderOptions",27,()=>n([])),g=W(s,"firstDirReverse",3,!1),u=W(s,"useServerSideIdx",15,""),S=W(s,"isSearchFiltered",15,!1),E=W(s,"search",15,""),o=C(n([]));var $=ql(),p=c($),A=c(p);Ul(A,{get items(){return e(o)},get options(){return m()},get firstDirReverse(){return g()},get resItems(){return d()},set resItems(b){d(b)}}),v(p);var k=l(p,2);{var h=b=>{var x=Pl();r(b,x)};O(k,b=>{m().length>0&&b(h)})}var w=l(k,2),y=c(w);ts(y,{get options(){return i()},get items(){return t()},set items(b){t(b)},get resItems(){return e(o)},set resItems(b){a(o,n(b))},get useServerSideIdx(){return u()},set useServerSideIdx(b){u(b)},get isSearchFiltered(){return S()},set isSearchFiltered(b){S(b)},get search(){return E()},set search(b){E(b)}}),v(w),v($),r(_,$),ne()}var Wl=(_,s)=>a(s,e(s)-1),Gl=I('<div role="button" tabindex="0" class="icon iconLeft svelte-9iw34a"><!></div>'),Kl=(_,s,t)=>a(s,n(e(t))),Bl=I('<div role="button" tabindex="0" class="link noselect svelte-9iw34a"> </div>'),Fl=(_,s)=>a(s,e(s)+1),Vl=I('<div role="button" tabindex="0" class="icon iconRight svelte-9iw34a"><!></div>'),Jl=I('<div class="container svelte-9iw34a"><!> <div class="links svelte-9iw34a"></div> <!> <div class="chunkSize noselect svelte-9iw34a">Entries <!></div> <div class="font-label total svelte-9iw34a"> </div></div>');function jt(_,s){le(s,!0);let t=W(s,"items",27,()=>n([])),d=W(s,"resItems",31,()=>n([]));const i=[5,7,10,15,20,30,50,100],m=16;let g=C(n([])),u=C(1),S=5,E=C(15),o=C(!1),$=C(!1),p=C(n([]));Ae(()=>{e(E)&&a(u,1)}),Ae(()=>{if(e(E)&&t().length>0){let D=[];for(let j=0;j<t().length;j+=e(E)){const N=t().slice(j,j+e(E));D.push(N)}a(g,n(D)),d(e(g)[e(u)-1])}}),Ae(()=>{if(e(u)){let D=[],j=Math.floor(S/2);if(e(g).length<=S){for(let N=1;N<=e(g).length;N++)D.push(N);a(o,!1),a($,!1)}else if(e(u)<=j){for(let N=1;N<=S;N++)D.push(N);a(o,!1),a($,!0)}else if(e(u)>e(g).length-j-1){for(let N=e(g).length-S;N<=e(g).length-1;N++)D.push(N+1);a(o,!0),a($,!1)}else{for(let N=e(u)-j;N<e(u)-j+S;N++)D.push(N);a(o,!0),a($,!0)}a(p,n(D))}});var A=Jl(),k=c(A);{var h=D=>{var j=Gl();j.__click=[Wl,u];var N=c(j);Zt(N,{width:m}),v(j),Ue("keypress",j,()=>a(u,e(u)-1)),r(D,j)};O(k,D=>{e(o)&&D(h)})}var w=l(k,2);Ge(w,21,()=>e(p),wt,(D,j)=>{var N=Bl();N.__click=[Kl,u,j];var G=c(N,!0);v(N),B(()=>{Et(N,"selected",e(u)===e(j)),Y(G,e(j))}),Ue("keypress",N,()=>a(u,n(e(j)))),r(D,N)}),v(w);var y=l(w,2);{var b=D=>{var j=Vl();j.__click=[Fl,u];var N=c(j);Zt(N,{width:m}),v(j),Ue("keypress",j,()=>a(u,e(u)+1)),r(D,j)};O(y,D=>{e($)&&D(b)})}var x=l(y,2),f=l(c(x));kt(f,{options:i,width:"50px",get value(){return e(E)},set value(D){a(E,n(D))}}),v(x);var T=l(x,2),L=c(T);v(T),v(A),B(()=>Y(L,`Total: ${t().length??""}`)),r(_,A),ne()}pt(["click"]);var Yl=(_,s)=>s()(0,!0),Hl=I('<div role="button" tabindex="0" class="icon iconLeft svelte-1jvef4m"><!></div>'),Xl=(_,s)=>s()(0,!1),Zl=I('<div role="button" tabindex="0" class="icon iconRight svelte-1jvef4m"><!></div>'),Ql=I('<div class="font-label total svelte-1jvef4m"> </div>'),en=I('<div class="container svelte-1jvef4m"><!> <div class="links svelte-1jvef4m"><div class="pageNo noselect svelte-1jvef4m"> </div></div> <!> <div class="chunkSize noselect svelte-1jvef4m">Entries <!></div> <!></div>');function ss(_,s){le(s,!0);let t=W(s,"itemsTotal",3,0),d=W(s,"sspPage",11,1),i=W(s,"sspPageSize",11,15),m=W(s,"sspContinuationToken",11,""),g=W(s,"fetchPageCallback",3,(D,j)=>{}),u=W(s,"sspPageSizeChange",3,D=>{});const S=[2,3,5,7,10,15,20,30,50,100],E=16;let o=C(n(i()));Ae(()=>{e(o)&&(console.log("page size change in pagination server"),u()(e(o)))});var $=en(),p=c($);{var A=D=>{var j=Hl();j.__click=[Yl,g];var N=c(j);Zt(N,{width:E}),v(j),Ue("keypress",j,()=>g()(0,!0)),r(D,j)};O(p,D=>{d()!==1&&D(A)})}var k=l(p,2),h=c(k),w=c(h,!0);v(h),v(k);var y=l(k,2);{var b=D=>{var j=Zl();j.__click=[Xl,g];var N=c(j);Zt(N,{width:E}),v(j),Ue("keypress",j,()=>g()(0,!1)),r(D,j)};O(y,D=>{m()&&D(b)})}var x=l(y,2),f=l(c(x));kt(f,{options:S,width:"50px",get value(){return e(o)},set value(D){a(o,n(D))}}),v(x);var T=l(x,2);{var L=D=>{var j=Ql(),N=c(j);v(j),B(()=>Y(N,`Total: ${t()??""}`)),r(D,j)};O(T,D=>{t()&&t()>0&&D(L)})}v($),B(()=>Y(w,d())),r(_,$),ne()}pt(["click"]);var tn=I('<div class="svelte-1n3c0ep"><!></div>'),an=I('<div class="svelte-1n3c0ep"><!></div>'),sn=I(' <div class="content"><!> <!> <div id="users" class="svelte-1n3c0ep"><!></div> <!></div>',1);function rn(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=C(""),u=C(!1),S=C(""),E=C(0),o=C(15),$=C(""),p=C(1),A=C(n([{label:"E-Mail",callback:(U,K)=>U.email.toLowerCase().includes(K.toLowerCase())},{label:"ID",callback:(U,K)=>U.id.toLowerCase().includes(K.toLowerCase())}])),k=C(n([{label:"E-Mail",callback:(U,K)=>U.email.localeCompare(K.email)},{label:"ID",callback:(U,K)=>U.id.localeCompare(K.id)},{label:"Created",callback:(U,K)=>U.created_at<K.created_at},{label:"Last Login",callback:(U,K)=>{let J=U.last_login||9999999999,Z=K.last_login||9999999999;return J<Z}}]));Ne(async()=>{h(),b(),x()});async function h(U,K,J,Z){let re;if(U===!0?J&&e(p)===2?re=await Ha(Z||e(o),K,void 0,!1):re=await Ha(Z||e(o),K,e($),J):re=await Fr(),!re.ok)a(t,"Error fetching users: "+re.body.message);else{re.status===206?(a(o,n(Number.parseInt(re.headers.get("x-page-size"),10))),a(g,"user"),re.headers.get("x-continuation-token"),a($,n(re.headers.get("x-continuation-token")))):a(g,""),a(E,n(re.headers.get("x-user-count")));let ve=await re.json();a(d,n([...ve])),a(i,n([...ve]))}}async function w(U,K){await h(!0,U,K),K?a(p,e(p)-1):a(p,e(p)+1)}async function y(U){a($,""),await h(!0,0,!1,U),a(p,1)}async function b(){let U=await Za();if(!U.ok)a(t,"Error fetching roles: "+U.body.message);else{let K=await U.json();mi.set(K),ga.set(K.map(J=>J.name))}}async function x(){let U=await Ja();if(!U.ok)a(t,"Error fetching groups: "+U.body.message);else{let K=await U.json();gi.set(K),fa.set(K.map(J=>J.name))}}function f(){h(),b(),x(),a(S,"")}q();var T=sn(),L=ee(T),D=l(L),j=c(D);Lt(j,{get items(){return e(d)},get resItems(){return e(i)},set resItems(U){a(i,n(U))},get searchOptions(){return e(A)},set searchOptions(U){a(A,n(U))},get orderOptions(){return e(k)},set orderOptions(U){a(k,n(U))},get useServerSideIdx(){return e(g)},set useServerSideIdx(U){a(g,n(U))},get isSearchFiltered(){return e(u)},set isSearchFiltered(U){a(u,n(U))},get search(){return e(S)},set search(U){a(S,n(U))}});var N=l(j,2);Al(N,{onSave:f});var G=l(N,2),R=c(G);{var F=U=>{var K=me(),J=ee(K);Ge(J,17,()=>e(i),Z=>Z.id,(Z,re)=>{var ve=tn(),be=c(ve);as(be,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:f}),v(ve),r(Z,ve)}),r(U,K)},M=U=>{var K=me(),J=ee(K);Ge(J,17,()=>e(m),Z=>Z.id,(Z,re)=>{var ve=an(),be=c(ve);as(be,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:f}),v(ve),r(Z,ve)}),r(U,K)};O(R,U=>{e(g)&&!e(u)?U(F):U(M,!1)})}v(G);var z=l(G,2);{var P=U=>{ss(U,{get itemsTotal(){return e(E)},fetchPageCallback:w,sspPageSizeChange:y,get sspPage(){return e(p)},set sspPage(K){a(p,n(K))},get sspPageSize(){return e(o)},set sspPageSize(K){a(o,n(K))},get sspContinuationToken(){return e($)},set sspContinuationToken(K){a($,n(K))}})},Q=U=>{jt(U,{get items(){return e(i)},set items(K){a(i,n(K))},get resItems(){return e(m)},set resItems(K){a(m,n(K))}})};O(z,U=>{e(g)&&!e(u)?U(P):U(Q,!1)})}v(D),B(()=>Y(L,`${e(t)??""} `)),r(_,T),ne()}var ln=I('<div class="content svelte-1mqfi4i"><!></div>');function bt(_,s){le(s,!0);let t=W(s,"eventsCollapsed",11,!0),d=W(s,"eventsWide",11,!1);var i=ln(),m=c(i);Tt(m,()=>s.children??It),v(i),B(()=>{Et(i,"mr",!t()&&!d()),Et(i,"mrCollapsed",t()&&!d()),Et(i,"mrWide",!t()&&d())}),r(_,i),ne()}var nn=I('<div class="success svelte-17in7jd">Success</div>'),on=I('<div class="mainErr err svelte-17in7jd"> </div>'),vn=I('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function dn(_,s){le(s,!0);let t=W(s,"role",31,()=>n({})),d=C(""),i=C(!1),m=C(void 0);Ae(()=>{e(i)&&a(m,n(setTimeout(()=>{a(i,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(m)));let g=C(n({}));const u=He().shape({name:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function S(){if(a(d,""),!await E()){a(d,"Invalid input");return}let T={role:t().name.trim()},L=await vi(t().id,T);if(L.ok)a(i,!0);else{let D=await L.json();a(d,n(D.message))}}async function E(){try{return await u.validate(t(),{abortEarly:!1}),a(g,n({})),!0}catch(T){return a(g,n(Ye(T))),!1}}var o=vn(),$=c(o),p=l(c($),2),A=c(p,!0);v(p),v($);var k=l($,2),h=Ke(()=>t().name==="rauthy_admin");ie(k,{autocomplete:"off",placeholder:"Role Name",get disabled(){return e(h)},get value(){return t().name},set value(T){t(t().name=T,!0)},get error(){return e(g).name},set error(T){e(g).name=T},$$events:{input:E},children:(T,L)=>{q();var D=V("ROLE NAME");r(T,D)},$$slots:{default:!0}});var w=l(k,2);Ce(w,{level:1,width:"4rem",$$events:{click:S},children:(T,L)=>{q();var D=V("SAVE");r(T,D)},$$slots:{default:!0}});var y=l(w,2);{var b=T=>{var L=nn();r(T,L)};O(y,T=>{e(i)&&T(b)})}var x=l(y,2);{var f=T=>{var L=on(),D=c(L,!0);v(L),B(()=>Y(D,e(d))),r(T,L)};O(x,T=>{e(d)&&T(f)})}v(o),B(()=>Y(A,t().id)),r(_,o),ne()}var cn=I('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy_admin role cannot be deleted.</div>'),un=I('<div class="err svelte-1jljqe9"> </div>'),hn=I('<div class="label svelte-1jljqe9">Are you sure, you want to delete this role?</div> <!> <!>',1),pn=I('<div class="container svelte-1jljqe9"><!></div>');function mn(_,s){le(s,!0);let t=W(s,"role",19,()=>({})),d=C(!1),i=C("");async function m(){a(i,""),a(d,!0);let o=await di(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var g=pn(),u=c(g);{var S=o=>{var $=cn();r(o,$)},E=o=>{var $=hn(),p=l(ee($),2);Ce(p,{level:1,get isLoading(){return e(d)},set isLoading(h){a(d,n(h))},$$events:{click:m},children:(h,w)=>{q();var y=V("DELETE");r(h,y)},$$slots:{default:!0}});var A=l(p,2);{var k=h=>{var w=un(),y=c(w,!0);v(w),B(()=>Y(y,e(i))),r(h,w)};O(A,h=>{e(i)&&h(k)})}r(o,$)};O(u,o=>{t().name==="rauthy_admin"?o(S):o(E,!1)})}v(g),r(_,g),ne()}var gn=I('<div class="data font-mono svelte-115hohv"> </div>'),fn=I('<div class="data svelte-115hohv"> </div>'),wn=I('<div class="header svelte-115hohv"><!> <!></div>'),yn=I("<div><!></div>"),bn=I("<div><!></div>"),$n=I("<div><!> <!></div>");function _n(_,s){le(s,!0);let t=W(s,"role",31,()=>n({})),d=W(s,"onSave",15),i=C(void 0);const m=["Config","Delete"];let g=C(n(m[0]));const u=200,S=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=wn(),p=c($);Ze(p,{text:"Role ID",children:(k,h)=>{var w=gn(),y=c(w,!0);v(w),B(()=>Y(y,t().id)),r(k,w)},$$slots:{default:!0}});var A=l(p,2);Ze(A,{text:"Role Name",children:(k,h)=>{var w=fn(),y=c(w,!0);v(w),B(()=>Y(y,t().name)),r(k,w)},$$slots:{default:!0}}),v($),r(o,$)},body:o=>{var $=$n(),p=c($);Dt(p,{labels:m,get selected(){return e(g)},set selected(w){a(g,n(w))}});var A=l(p,2);{var k=w=>{var y=yn(),b=c(y);dn(b,{get role(){return t()},set role(x){t(x)},get onSave(){return d()},set onSave(x){d(x)}}),v(y),ce(5,y,()=>_e,()=>({delay:S,duration:u})),ce(6,y,()=>_e,()=>({duration:u})),r(w,y)},h=w=>{var y=me(),b=ee(y);{var x=f=>{var T=bn(),L=c(T);mn(L,{get role(){return t()},onSave:E}),v(T),ce(5,T,()=>_e,()=>({delay:S,duration:u})),ce(6,T,()=>_e,()=>({duration:u})),r(f,T)};O(b,f=>{e(g)==="Delete"&&f(x)},!0)}r(w,y)};O(A,w=>{e(g)==="Config"?w(k):w(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var kn=I('<div class="header font-label svelte-r30xs6">ADD NEW ROLE</div>'),xn=I('<div class="success svelte-r30xs6">Success</div>'),En=I('<div class="err svelte-r30xs6"> </div>'),Sn=I('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function Cn(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1),d=C(void 0),i=C(n({role:""})),m=C(""),g=C(!1),u=C(void 0),S=C(n({}));const E=He().shape({role:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Ae(()=>{e(g)&&a(u,n(setTimeout(()=>{a(g,!1),a(i,n({role:""})),a(d,!1),s.onSave()},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function o(){if(a(m,""),!await $()){a(m,"Invalid input");return}e(i).role=e(i).role.trim();let p=await oi(e(i));if(p.ok)a(g,!0);else{let A=await p.json();a(m,n(A.message))}}async function $(){try{return await E.validate(e(i),{abortEarly:!1}),a(S,n({})),!0}catch(p){return a(S,n(Ye(p))),!1}}ot(_,{get idx(){return t()},set idx(p){t(p)},get show(){return e(d)},set show(p){a(d,n(p))},header:p=>{var A=kn();r(p,A)},body:p=>{var A=Sn(),k=c(A);ie(k,{autocomplete:"off",placeholder:"Role Name",get value(){return e(i).role},set value(f){e(i).role=f},get error(){return e(S).role},set error(f){e(S).role=f},$$events:{input:$},children:(f,T)=>{q();var L=V("ROLE NAME");r(f,L)},$$slots:{default:!0}});var h=l(k,2);Ce(h,{level:1,width:"4rem",$$events:{click:o},children:(f,T)=>{q();var L=V("SAVE");r(f,L)},$$slots:{default:!0}});var w=l(h,2);{var y=f=>{var T=xn();r(f,T)};O(w,f=>{e(g)&&f(y)})}var b=l(w,2);{var x=f=>{var T=En(),L=c(T,!0);v(T),B(()=>Y(L,e(m))),r(f,T)};O(b,f=>{e(m)&&f(x)})}v(A),r(p,A)},$$slots:{header:!0,body:!0}}),ne()}var In=I('<div class="svelte-db30dl"><!></div>'),Tn=I(' <div class="content"><!> <!> <div id="roles" class="svelte-db30dl"></div> <!> <div style="height: 20px"></div></div>',1);function An(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=C(""),u=[{label:"Name",callback:(b,x)=>b.name.toLowerCase().includes(x.toLowerCase())},{label:"ID",callback:(b,x)=>b.id.toLowerCase().includes(x.toLowerCase())}],S=[{label:"Name",callback:(b,x)=>b.name.localeCompare(x.name)},{label:"ID",callback:(b,x)=>b.id.localeCompare(x.id)}];Ne(async()=>{E()});async function E(){let b=await Za(),x=await b.json();b.ok?a(d,n([...x])):a(t,n(x.message))}function o(){E(),a(g,"")}q();var $=Tn(),p=ee($),A=l(p),k=c(A);Lt(k,{get items(){return e(d)},searchOptions:u,orderOptions:S,get resItems(){return e(i)},set resItems(b){a(i,n(b))},get search(){return e(g)},set search(b){a(g,n(b))}});var h=l(k,2);Cn(h,{onSave:o});var w=l(h,2);Ge(w,23,()=>e(m),b=>b.id,(b,x,f)=>{var T=In(),L=c(T);_n(L,{onSave:o,get role(){return e(d)[e(f)]},set role(D){e(d)[e(f)]=D}}),v(T),r(b,T)}),v(w);var y=l(w,2);jt(y,{get items(){return e(i)},set items(b){a(i,n(b))},get resItems(){return e(m)},set resItems(b){a(m,n(b))}}),q(2),v(A),B(()=>Y(p,`${e(t)??""} `)),r(_,$),ne()}var Ln=I('<div class="header font-label svelte-r30xs6">ADD NEW GROUP</div>'),Nn=I('<div class="success svelte-r30xs6">Success</div>'),Rn=I('<div class="err svelte-r30xs6"> </div>'),Dn=I('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function jn(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1),d=C(void 0),i=C(n({group:""})),m=C(""),g=C(!1),u=C(void 0),S=C(n({}));const E=He().shape({group:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Ae(()=>{e(g)&&a(u,n(setTimeout(()=>{s.onSave(),a(g,!1),a(i,n({group:""})),a(d,!1)},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function o(){if(a(m,""),!await $()){a(m,"Invalid input");return}e(i).group=e(i).group.trim();let p=await Ir(e(i));if(p.ok)a(g,!0);else{let A=await p.json();a(m,n(A.message))}}async function $(){try{return await E.validate(e(i),{abortEarly:!1}),a(S,n({})),!0}catch(p){return a(S,n(Ye(p))),!1}}ot(_,{get idx(){return t()},set idx(p){t(p)},get show(){return e(d)},set show(p){a(d,n(p))},header:p=>{var A=Ln();r(p,A)},body:p=>{var A=Dn(),k=c(A);ie(k,{autocomplete:"off",placeholder:"Group Name",get value(){return e(i).group},set value(f){e(i).group=f},get error(){return e(S).group},set error(f){e(S).group=f},$$events:{input:$},children:(f,T)=>{q();var L=V("GROUP NAME");r(f,L)},$$slots:{default:!0}});var h=l(k,2);Ce(h,{level:1,width:"4rem",$$events:{click:o},children:(f,T)=>{q();var L=V("SAVE");r(f,L)},$$slots:{default:!0}});var w=l(h,2);{var y=f=>{var T=Nn();r(f,T)};O(w,f=>{e(g)&&f(y)})}var b=l(w,2);{var x=f=>{var T=Rn(),L=c(T,!0);v(T),B(()=>Y(L,e(m))),r(f,T)};O(b,f=>{e(m)&&f(x)})}v(A),r(p,A)},$$slots:{header:!0,body:!0}}),ne()}var On=I('<div class="success svelte-17in7jd">Success</div>'),Mn=I('<div class="mainErr err svelte-17in7jd"> </div>'),zn=I('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function Un(_,s){le(s,!0);let t=W(s,"group",31,()=>n({})),d=C(""),i=C(!1),m=C(void 0);Ae(()=>{e(i)&&a(m,n(setTimeout(()=>{a(i,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(m)));let g=C(n({}));const u=He().shape({name:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function S(){if(a(d,""),!await E()){a(d,"Invalid input");return}let f={group:t().name.trim()},T=await Tr(t().id,f);if(T.ok)a(i,!0);else{let L=await T.json();a(d,n(L.message))}}async function E(){try{return await u.validate(t(),{abortEarly:!1}),a(g,n({})),!0}catch(f){return a(g,n(Ye(f))),!1}}var o=zn(),$=c(o),p=l(c($),2),A=c(p,!0);v(p),v($);var k=l($,2);ie(k,{autocomplete:"off",placeholder:"Group Name",get value(){return t().name},set value(f){t(t().name=f,!0)},get error(){return e(g).name},set error(f){e(g).name=f},$$events:{input:E},children:(f,T)=>{q();var L=V("GROUP NAME");r(f,L)},$$slots:{default:!0}});var h=l(k,2);Ce(h,{level:1,width:"4rem",$$events:{click:S},children:(f,T)=>{q();var L=V("SAVE");r(f,L)},$$slots:{default:!0}});var w=l(h,2);{var y=f=>{var T=On();r(f,T)};O(w,f=>{e(i)&&f(y)})}var b=l(w,2);{var x=f=>{var T=Mn(),L=c(T,!0);v(T),B(()=>Y(L,e(d))),r(f,T)};O(b,f=>{e(d)&&f(x)})}v(o),B(()=>Y(A,t().id)),r(_,o),ne()}var Pn=I('<div class="err svelte-1jljqe9"> </div>'),qn=I('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this group?</div> <!> <!></div>');function Wn(_,s){le(s,!0);let t=W(s,"group",19,()=>({})),d=C(!1),i=C("");async function m(){a(i,""),a(d,!0);let o=await Ar(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var g=qn(),u=l(c(g),2);Ce(u,{level:1,get isLoading(){return e(d)},set isLoading(o){a(d,n(o))},$$events:{click:m},children:(o,$)=>{q();var p=V("DELETE");r(o,p)},$$slots:{default:!0}});var S=l(u,2);{var E=o=>{var $=Pn(),p=c($,!0);v($),B(()=>Y(p,e(i))),r(o,$)};O(S,o=>{e(i)&&o(E)})}v(g),r(_,g),ne()}var Gn=I('<div class="data font-mono svelte-115hohv"> </div>'),Kn=I('<div class="data svelte-115hohv"> </div>'),Bn=I('<div class="header svelte-115hohv"><!> <!></div>'),Fn=I("<div><!></div>"),Vn=I("<div><!></div>"),Jn=I("<div><!> <!></div>");function Yn(_,s){le(s,!0);let t=W(s,"group",31,()=>n({})),d=C(void 0);const i=["Config","Delete"];let m=C(n(i[0]));const g=200,u=g/2;function S(){a(d,!1),s.onSave()}ot(_,{get show(){return e(d)},set show(E){a(d,n(E))},header:E=>{var o=Bn(),$=c(o);Ze($,{text:"Group ID",children:(A,k)=>{var h=Gn(),w=c(h,!0);v(h),B(()=>Y(w,t().id)),r(A,h)},$$slots:{default:!0}});var p=l($,2);Ze(p,{text:"Group Name",children:(A,k)=>{var h=Kn(),w=c(h,!0);v(h),B(()=>Y(w,t().name)),r(A,h)},$$slots:{default:!0}}),v(o),r(E,o)},body:E=>{var o=Jn(),$=c(o);Dt($,{labels:i,get selected(){return e(m)},set selected(h){a(m,n(h))}});var p=l($,2);{var A=h=>{var w=Fn(),y=c(w);Un(y,{get onSave(){return s.onSave},get group(){return t()},set group(b){t(b)}}),v(w),ce(5,w,()=>_e,()=>({delay:u,duration:g})),ce(6,w,()=>_e,()=>({duration:g})),r(h,w)},k=h=>{var w=me(),y=ee(w);{var b=x=>{var f=Vn(),T=c(f);Wn(T,{get group(){return t()},onSave:S}),v(f),ce(5,f,()=>_e,()=>({delay:u,duration:g})),ce(6,f,()=>_e,()=>({duration:g})),r(x,f)};O(y,x=>{e(m)==="Delete"&&x(b)},!0)}r(h,w)};O(p,h=>{e(m)==="Config"?h(A):h(k,!1)})}v(o),r(E,o)},$$slots:{header:!0,body:!0}}),ne()}var Hn=I('<div class="svelte-10dkaqk"><!></div>'),Xn=I(' <div class="content"><!> <!> <div id="groups" class="svelte-10dkaqk"></div> <!> <div style="height: 20px"></div></div>',1);function Zn(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=[{label:"Name",callback:(y,b)=>y.name.toLowerCase().includes(b.toLowerCase())},{label:"ID",callback:(y,b)=>y.id.toLowerCase().includes(b.toLowerCase())}],u=[{label:"Name",callback:(y,b)=>y.name.localeCompare(b.name)},{label:"ID",callback:(y,b)=>y.id.localeCompare(b.id)}];Ne(async()=>{S()});async function S(){let y=await Ja(),b=await y.json();y.ok?a(d,n([...b])):a(t,n(b.message))}function E(){S()}q();var o=Xn(),$=ee(o),p=l($),A=c(p);Lt(A,{get items(){return e(d)},searchOptions:g,orderOptions:u,get resItems(){return e(i)},set resItems(y){a(i,n(y))}});var k=l(A,2);jn(k,{onSave:E});var h=l(k,2);Ge(h,23,()=>e(m),y=>y.id,(y,b,x)=>{let f=x;var T=Hn(),L=c(T);Yn(L,{onSave:E,get group(){return e(m)[e(f)]},set group(D){e(m)[e(f)]=D}}),v(T),r(y,T)}),v(h);var w=l(h,2);jt(w,{get items(){return e(i)},set items(y){a(i,n(y))},get resItems(){return e(m)},set resItems(y){a(m,n(y))}}),q(2),v(p),B(()=>Y($,`${e(t)??""} `)),r(_,o),ne()}var Qn=I('<div class="header font-label svelte-r30xs6">ADD NEW SCOPE</div>'),eo=I('<div class="success svelte-r30xs6">Success</div>'),to=I('<div class="err svelte-r30xs6"> </div>'),ao=I('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function so(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1),d=C(void 0),i=C(n({scope:""})),m=C(""),g=C(!1),u=C(void 0),S=C(n({}));const E=He().shape({scope:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Ae(()=>{e(g)&&a(u,n(setTimeout(()=>{s.onSave(),a(g,!1),a(i,n({scope:""})),a(d,!1)},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function o(){if(a(m,""),!await $()){a(m,"Invalid input");return}e(i).scope=e(i).scope.trim();let p=await ci(e(i));if(p.ok)a(g,!0);else{let A=await p.json();a(m,n(A.message))}}async function $(){try{return await E.validate(e(i),{abortEarly:!1}),a(S,n({})),!0}catch(p){return a(S,n(Ye(p))),!1}}ot(_,{get idx(){return t()},set idx(p){t(p)},get show(){return e(d)},set show(p){a(d,n(p))},header:p=>{var A=Qn();r(p,A)},body:p=>{var A=ao(),k=c(A);ie(k,{autocomplete:"off",placeholder:"Scope Name",get value(){return e(i).scope},set value(f){e(i).scope=f},get error(){return e(S).scope},set error(f){e(S).scope=f},$$events:{input:$},children:(f,T)=>{q();var L=V("SCOPE NAME");r(f,L)},$$slots:{default:!0}});var h=l(k,2);Ce(h,{level:1,width:"4rem",$$events:{click:o},children:(f,T)=>{q();var L=V("SAVE");r(f,L)},$$slots:{default:!0}});var w=l(h,2);{var y=f=>{var T=eo();r(f,T)};O(w,f=>{e(g)&&f(y)})}var b=l(w,2);{var x=f=>{var T=to(),L=c(T,!0);v(T),B(()=>Y(L,e(m))),r(f,T)};O(b,f=>{e(m)&&f(x)})}v(A),r(p,A)},$$slots:{header:!0,body:!0}}),ne()}var ro=I('<div class="desc svelte-guvobw"><p>Custom mappings cannot be done for OpenID default scopes and their names cannot be changed.</p></div>'),io=I('<div class="desc svelte-guvobw"><p>You can map custom scopes to attributes.<br> All additional attributes, that were configured, can have a custom value for each user.<br> When they are mapped to a scope, they can be included in the Access and / or ID Tokens.</p></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ACCESS TOKEN MAPPINGS</div> <!></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ID TOKEN MAPPINGS</div> <!></div>',1),lo=I('<div class="success svelte-guvobw">Success</div>'),no=I('<div class="mainErr err svelte-guvobw"> </div>'),oo=I("<!> <!> <!>",1),vo=I('<div class="container svelte-guvobw"><div class="unit svelte-guvobw"><div class="label font-label svelte-guvobw">ID</div> <div class="value font-mono svelte-guvobw"> </div></div> <!> <div class="separator"></div> <!> <!></div>');function co(_,s){le(s,!0);let t=W(s,"attrs",27,()=>n([])),d=W(s,"scope",31,()=>n({})),i=C(""),m=C(!1),g=C(void 0),u=C(!1),S=C(n([]));Ae(()=>{e(m)&&a(g,n(setTimeout(()=>{a(m,!1),s.onSave()},2e3)))}),Ae(()=>{t()&&a(S,n(t().map(D=>D.name)))}),Ne(()=>(a(u,n(Oa(d().name))),()=>clearTimeout(e(g))));let E=C(n({}));const o=He().shape({name:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function $(){if(a(i,""),!await p()){a(i,"Invalid input");return}let D={scope:d().name.trim()};d().attr_include_access.length>0&&(D.attr_include_access=d().attr_include_access),d().attr_include_id.length>0&&(D.attr_include_id=d().attr_include_id);let j=await ui(d().id,D);if(j.ok)a(m,!0);else{let N=await j.json();a(i,n(N.message))}}async function p(){try{return await o.validate(d(),{abortEarly:!1}),a(E,n({})),!0}catch(D){return a(E,n(Ye(D))),!1}}var A=vo(),k=c(A),h=l(c(k),2),w=c(h,!0);v(h),v(k);var y=l(k,2);ie(y,{autocomplete:"off",placeholder:"Scope Name",get disabled(){return e(u)},get value(){return d().name},set value(D){d(d().name=D,!0)},get error(){return e(E).name},set error(D){e(E).name=D},$$events:{input:p},children:(D,j)=>{q();var N=V("SCOPE NAME");r(D,N)},$$slots:{default:!0}});var b=l(y,4);{var x=D=>{var j=ro();r(D,j)},f=D=>{var j=io(),N=l(ee(j),2);oe(N,"margin-top","-3px");var G=l(c(N),2);Mt(G,{get options(){return e(S)},searchThreshold:4,get items(){return d().attr_include_access},set items(M){d(d().attr_include_access=M,!0)}}),v(N);var R=l(N,2);oe(R,"margin-top","-3px");var F=l(c(R),2);Mt(F,{get options(){return e(S)},searchThreshold:4,get items(){return d().attr_include_id},set items(M){d(d().attr_include_id=M,!0)}}),v(R),r(D,j)};O(b,D=>{e(u)?D(x):D(f,!1)})}var T=l(b,2);{var L=D=>{var j=oo(),N=ee(j);Ce(N,{level:1,width:"4rem",$$events:{click:$},children:(z,P)=>{q();var Q=V("SAVE");r(z,Q)},$$slots:{default:!0}});var G=l(N,2);{var R=z=>{var P=lo();r(z,P)};O(G,z=>{e(m)&&z(R)})}var F=l(G,2);{var M=z=>{var P=no(),Q=c(P,!0);v(P),B(()=>Y(Q,e(i))),r(z,P)};O(F,z=>{e(i)&&z(M)})}r(D,j)};O(T,D=>{e(u)||D(L)})}v(A),B(()=>Y(w,d().id)),r(_,A),ne()}var uo=I('<div class="label svelte-1jljqe9">OpenID default scopes cannot be deleted</div>'),ho=I('<div class="err svelte-1jljqe9"> </div>'),po=I('<div class="label svelte-1jljqe9">Are you sure, you want to delete this scope?</div> <!> <!>',1),mo=I('<div class="container svelte-1jljqe9"><!></div>');function go(_,s){le(s,!0);let t=W(s,"scope",19,()=>({})),d=C(!1),i=C("");async function m(){a(i,""),a(d,!0);let o=await hi(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var g=mo(),u=c(g);{var S=o=>{var $=uo();r(o,$)},E=o=>{var $=po(),p=l(ee($),2);Ce(p,{level:1,get isLoading(){return e(d)},set isLoading(h){a(d,n(h))},$$events:{click:m},children:(h,w)=>{q();var y=V("DELETE");r(h,y)},$$slots:{default:!0}});var A=l(p,2);{var k=h=>{var w=ho(),y=c(w,!0);v(w),B(()=>Y(y,e(i))),r(h,w)};O(A,h=>{e(i)&&h(k)})}r(o,$)};O(u,o=>{Oa(t().name)?o(S):o(E,!1)})}v(g),r(_,g),ne()}var fo=I('<div class="data font-mono svelte-115hohv"> </div>'),wo=I('<div class="data svelte-115hohv"> </div>'),yo=I('<div class="header svelte-115hohv"><!> <!></div>'),bo=I("<div><!></div>"),$o=I("<div><!></div>"),_o=I("<div><!> <!></div>");function ko(_,s){le(s,!0);let t=W(s,"attrs",15),d=W(s,"scope",31,()=>n({})),i=W(s,"onSave",15),m=C(void 0);const g=["Config","Delete"];let u=C(n(g[0]));const S=200,E=S/2;function o(){a(m,!1),i()()}ot(_,{get show(){return e(m)},set show($){a(m,n($))},header:$=>{var p=yo(),A=c(p);Ze(A,{text:"Scope ID",children:(h,w)=>{var y=fo(),b=c(y,!0);v(y),B(()=>Y(b,d().id)),r(h,y)},$$slots:{default:!0}});var k=l(A,2);Ze(k,{text:"Scope Name",children:(h,w)=>{var y=wo(),b=c(y,!0);v(y),B(()=>Y(b,d().name)),r(h,y)},$$slots:{default:!0}}),v(p),r($,p)},body:$=>{var p=_o(),A=c(p);Dt(A,{labels:g,get selected(){return e(u)},set selected(y){a(u,n(y))}});var k=l(A,2);{var h=y=>{var b=bo(),x=c(b);co(x,{get attrs(){return t()},set attrs(f){t(f)},get scope(){return d()},set scope(f){d(f)},get onSave(){return i()},set onSave(f){i(f)}}),v(b),ce(5,b,()=>_e,()=>({delay:E,duration:S})),ce(6,b,()=>_e,()=>({duration:S})),r(y,b)},w=y=>{var b=me(),x=ee(b);{var f=T=>{var L=$o(),D=c(L);go(D,{get scope(){return d()},onSave:o}),v(L),ce(5,L,()=>_e,()=>({delay:E,duration:S})),ce(6,L,()=>_e,()=>({duration:S})),r(T,L)};O(x,T=>{e(u)==="Delete"&&T(f)},!0)}r(y,b)};O(k,y=>{e(u)==="Config"?y(h):y(w,!1)})}v(p),r($,p)},$$slots:{header:!0,body:!0}}),ne()}var xo=I('<div class="svelte-15sc49d"><!></div>'),Eo=I(' <div class="content"><!> <!> <div id="scopes" class="svelte-15sc49d"></div> <!> <div style="height: 20px"></div></div>',1);function So(_,s){le(s,!0);let t=C(n([])),d=C(""),i=C(n([])),m=C(n([])),g=C(n([])),u=C(""),S=[{label:"Name",callback:(f,T)=>f.name.toLowerCase().includes(T.toLowerCase())},{label:"ID",callback:(f,T)=>f.id.toLowerCase().includes(T.toLowerCase())}],E=[{label:"Name",callback:(f,T)=>f.name.localeCompare(T.name)},{label:"ID",callback:(f,T)=>f.id.localeCompare(T.id)}];Ne(()=>{$(),o(),a(u,"")});async function o(){let f=await ma();if(!f.ok)a(d,"Error fetching attributes: "+f.body.message);else{let T=await f.json();a(t,n([...T.values]))}}async function $(){let f=await Qa(),T=await f.json();f.ok?a(i,n([...T])):a(d,n(T.message))}function p(){$()}q();var A=Eo(),k=ee(A),h=l(k),w=c(h);Lt(w,{get items(){return e(i)},searchOptions:S,orderOptions:E,get resItems(){return e(m)},set resItems(f){a(m,n(f))},get search(){return e(u)},set search(f){a(u,n(f))}});var y=l(w,2);so(y,{onSave:p});var b=l(y,2);Ge(b,23,()=>e(g),f=>f.id,(f,T,L)=>{var D=xo(),j=c(D);ko(j,{onSave:p,get attrs(){return e(t)},set attrs(N){a(t,n(N))},get scope(){return e(g)[e(L)]},set scope(N){e(g)[e(L)]=N}}),v(D),r(f,D)}),v(b);var x=l(b,2);jt(x,{get items(){return e(m)},set items(f){a(m,n(f))},get resItems(){return e(g)},set resItems(f){a(g,n(f))}}),q(2),v(h),B(()=>Y(k,`${e(d)??""} `)),r(_,A),ne()}var Co=I('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),Io=I('<div class="list svelte-f2hz2l"></div>');function rs(_,s){let t=W(s,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var d=Io();Ge(d,21,t,wt,(i,m,g)=>{var u=Co(),S=c(u),E=c(S,!0);v(S);var o=l(S,2);Ve(o,{get selected(){return e(m).value},set selected($){e(m).value=$}}),v(u),B(()=>Y(E,e(m).label)),r(i,u)}),v(d),r(_,d)}var To=I("<div><!></div>");function Ao(_,s){le(s,!0);let t=W(s,"validation",19,()=>({})),d=W(s,"value",15),i=W(s,"autocomplete",11,"on"),m=W(s,"validate",15),g=Jt(s,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);m($);let u=C("");const S=na();async function E(){await Vt(),S("input",!0),$()}async function o(){S("blur",!0),$()}function $(){var k;return a(u,""),d()&&((k=t())!=null&&k.regex)&&!d().match(t().regex)?(a(u,n(t().errMsg||"Invalid input")),!1):!0}var p=To(),A=c(p);return ie(A,La({get width(){return s.width},get name(){return s.name},get autocomplete(){return i()}},()=>g,{get value(){return d()},set value(k){d(k)},get error(){return e(u)},set error(k){a(u,n(k))},$$events:{input:E,blur:o},children:(k,h)=>{var w=me(),y=ee(w);Tt(y,()=>s.children??It),r(k,w)},$$slots:{default:!0}})),v(p),ce(7,p,()=>ht,()=>({duration:200})),r(_,p),ne({validateValue:$})}var Lo=I('<div class="err svelte-nzivgu"> </div>'),No=I('<div class="container svelte-nzivgu"><!> <!></div>');function Kt(_,s){le(s,!0);let t=W(s,"validation",27,()=>n({required:!1,regex:void 0,errMsg:""})),d=W(s,"values",15),i=W(s,"validate",15),m=W(s,"width",3,"260px"),g=W(s,"optional",3,!1),u=W(s,"autocomplete",15,"on"),S=Jt(s,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);i(k);let E=C(""),o=C(n([]));const $=na();Ne(()=>{d()||d([]);for(let x of d())e(o).push({name:Ut(),value:x});e(o).push({name:Ut(),value:""})});async function p(){await Vt(),e(o)[e(o).length-1].value?e(o).push({name:Ut(),value:""}):e(o).length>1&&!e(o)[e(o).length-2].value&&a(o,n([...e(o).slice(0,e(o).length-1)])),$("input",!0),k(),d(A())}function A(){k();let x=[];for(let f=0;f<e(o).length-1;f++)x.push(e(o)[f].value);return x}function k(){if(t().required&&e(o).length===1&&!e(o)[0].value)return g()?!0:(a(E,"Required"),!1);let x=!0;for(let f of e(o))f.value&&!f.validate()&&(x=!1);return x}var h=No(),w=c(h);Ge(w,17,()=>e(o),wt,(x,f,T)=>{Ao(x,La({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(f).name}},()=>S,{get value(){return e(f).value},set value(L){e(f).value=L},get validate(){return e(f).validate},set validate(L){e(f).validate=L},get autocomplete(){return u()},set autocomplete(L){u(L)},$$events:{input:p,blur:p},children:(L,D)=>{var j=me(),N=ee(j);Tt(N,()=>s.children??It),r(L,j)},$$slots:{default:!0}}))});var y=l(w,2);{var b=x=>{var f=Lo(),T=c(f,!0);v(f),B(()=>Y(T,e(E))),r(x,f)};O(y,x=>{e(E)&&x(b)})}return v(h),B(()=>oe(h,"width",m())),r(_,h),ne({getValues:A,validateValues:k})}var Ro=I('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),Do=I(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),jo=I('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),Oo=I('<div class="success svelte-1pba61y">Success</div>'),Mo=I('<div class="mainErr err svelte-1pba61y"> </div>'),zo=I(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function Uo(_,s){le(s,!0);let t=W(s,"client",31,()=>n({}));const d="350px";let i=C(""),m=C(!1),g=C(void 0),u=n(Ns.map(se=>{var Te,Me;return se.label==="device_code"?se.value=(Te=t().flows_enabled)==null?void 0:Te.includes("urn:ietf:params:oauth:grant-type:device_code"):se.value=(Me=t().flows_enabled)==null?void 0:Me.includes(se.label),se})),S=C(void 0);es.subscribe(se=>{a(S,n(se))});let E=n(Rs.map(se=>{var Te;return se.value=(Te=t().challenges)==null?void 0:Te.includes(se.label),se})),o=C(void 0),$=C(void 0),p=C(void 0),A=C(void 0);Ne(()=>()=>clearTimeout(e(g)));let k=C(n({}));const h=He().shape({name:he().trim().matches(Xt,"Can only contain characters, numbers and '-'"),client_uri:he().trim().nullable().matches(tt,"Invalid URI"),access_token_lifetime:yt().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function w(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function y(se){se.code==="Enter"&&b()}async function b(){a(i,"");const se=await x();if(!e($)()){a(i,"Invalid Allowed Origin");return}if(!e(p)()){a(i,"Invalid Redirect URIs");return}if(!e(A)()){a(i,"Invalid Post Logout URIs");return}if(!e(o)()){a(i,"Invalid Contacts");return}if(!se){a(i,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=u.filter(X=>X.value).map(X=>X.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":X.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){a(i,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){a(i,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){a(i,"At least one flow must be enabled");return}let Te=t();t(t().challenges=E.filter(X=>X.value).map(X=>X.label),!0),t().challenges.length===0&&(Te.challenges=null),Te.name||(Te.name=void 0),Te.allowed_origins.length>0&&!Te.allowed_origins[0]&&(Te.allowed_origins=[]);let Me=await gr(Te);if(Me.ok)a(m,!0);else{let X=await Me.json();a(i,n(X.message))}}async function x(){try{return await h.validate(t(),{abortEarly:!1}),a(k,n({})),!0}catch(se){return a(k,n(Ye(se))),!1}}Ae(()=>{t().id&&w()}),Ae(()=>{e(m)&&a(g,n(setTimeout(()=>{a(m,!1),s.onSave()},3e3)))});var f=zo(),T=c(f),L=l(c(T),2),D=c(L,!0);v(L),v(T);var j=l(T,4);ie(j,{autocomplete:"off",placeholder:"Client Name",width:d,get value(){return t().name},set value(se){t(t().name=se,!0)},get error(){return e(k).name},set error(se){e(k).name=se},$$events:{keypress:y,input:x},children:(se,Te)=>{q();var Me=V("CLIENT NAME");r(se,Me)},$$slots:{default:!0}});var N=l(j,4);ie(N,{autocomplete:"off",placeholder:"Client URI",width:d,get value(){return t().client_uri},set value(se){t(t().client_uri=se,!0)},get error(){return e(k).client_uri},set error(se){e(k).client_uri=se},$$events:{keypress:y,input:x},children:(se,Te)=>{q();var Me=V("CLIENT URI");r(se,Me)},$$slots:{default:!0}});var G=l(N,2);Kt(G,{style:`width: ${d}`,validation:{required:!1,regex:Ds,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(se){t(t().contacts=se,!0)},get validate(){return e(o)},set validate(se){a(o,n(se))},children:(se,Te)=>{q();var Me=V("CONTACT");r(se,Me)},$$slots:{default:!0}});var R=l(G,4);oe(R,"margin-top","-5px");var F=c(R);oe(F,"width","138px");var M=l(c(F),2),z=c(M);Ve(z,{get selected(){return t().enabled},set selected(se){t(t().enabled=se,!0)}}),v(M),v(F);var P=l(F,2);oe(P,"width","110px");var Q=l(c(P),2),U=c(Q);Ve(U,{get selected(){return t().confidential},set selected(se){t(t().confidential=se,!0)}}),v(Q),v(P),v(R);var K=l(R,2),J=l(c(K),2),Z=c(J);rs(Z,{get options(){return u}}),v(J),v(K);var re=l(K,2),ve=l(c(re),2),be=c(ve);Ve(be,{get selected(){return t().force_mfa},set selected(se){t(t().force_mfa=se,!0)}}),v(ve),v(re);var $e=l(re,2);{var pe=se=>{var Te=Ro();oe(Te,"margin","-10px 0 -15px 5px");var Me=c(Te),X=c(Me);oe(X,"color","var(--col-err)"),q(7),v(Me),v(Te),r(se,Te)},je=se=>{var Te=me(),Me=ee(Te);{var X=Ee=>{var Le=Do();oe(Le,"margin","-10px 0 -15px 5px");var Ct=c(Le),ae=c(Ct);oe(ae,"color","var(--col-err)"),q(5),v(Ct),v(Le),ce(3,Le,()=>_e),r(Ee,Le)};O(Me,Ee=>{t().force_mfa&&Ee(X)},!0)}r(se,Te)};O($e,se=>{t().id==="rauthy"?se(pe):se(je,!1)})}var fe=l($e,6);oe(fe,"margin-top","-10px");var de=l(c(fe),2);Mt(de,{get options(){return e(S)},searchThreshold:4,get items(){return t().scopes},set items(se){t(t().scopes=se,!0)}}),v(fe);var we=l(fe,2);oe(we,"margin-top","-3px");var ye=l(c(we),2);Mt(ye,{get options(){return e(S)},searchThreshold:4,get items(){return t().default_scopes},set items(se){t(t().default_scopes=se,!0)}}),v(we);var Oe=l(we,4);Kt(Oe,{style:`width: ${d}`,validation:{required:!0,regex:js,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(se){t(t().allowed_origins=se,!0)},get validate(){return e($)},set validate(se){a($,n(se))},children:(se,Te)=>{q();var Me=V("ALLOWED ORIGIN");r(se,Me)},$$slots:{default:!0}});var Ie=l(Oe,4);Kt(Ie,{style:`width: ${d}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(se){t(t().redirect_uris=se,!0)},get validate(){return e(p)},set validate(se){a(p,n(se))},children:(se,Te)=>{q();var Me=V("REDIRECT URI");r(se,Me)},$$slots:{default:!0}});var xe=l(Ie,4);Kt(xe,{style:`width: ${d}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(se){t(t().post_logout_redirect_uris=se,!0)},get validate(){return e(A)},set validate(se){a(A,n(se))},children:(se,Te)=>{q();var Me=V("POST LOGOUT REDIRECT URI");r(se,Me)},$$slots:{default:!0}});var Re=l(xe,6);ie(Re,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:d,get value(){return t().access_token_lifetime},set value(se){t(t().access_token_lifetime=se,!0)},get error(){return e(k).access_token_lifetime},set error(se){e(k).access_token_lifetime=se},$$events:{input:x},children:(se,Te)=>{q();var Me=V("ACCESS TOKEN LIFETIME");r(se,Me)},$$slots:{default:!0}});var H=l(Re,2),Se=c(H);oe(Se,"width","220px");var ge=l(c(Se),2),Pe=c(ge);kt(Pe,{options:Ma,get value(){return t().access_token_alg},set value(se){t(t().access_token_alg=se,!0)}}),v(ge),v(Se);var Je=l(Se,2),rt=c(Je);oe(rt,"text-align","right");var vt=l(rt,2),qe=c(vt);kt(qe,{options:Ma,get value(){return t().id_token_alg},set value(se){t(t().id_token_alg=se,!0)}}),v(vt),v(Je),v(H);var Be=l(H,6),lt=l(c(Be),2),xt=c(lt);rs(xt,{get options(){return E}}),v(lt),v(Be);var $t=l(Be,2),Qe=c($t);{var et=se=>{var Te=jo();q(4),r(se,Te)};O(Qe,se=>{t().id==="rauthy"&&se(et)})}v($t);var gt=l($t,2);Ce(gt,{level:1,width:"4rem",$$events:{click:b},children:(se,Te)=>{q();var Me=V("SAVE");r(se,Me)},$$slots:{default:!0}});var ct=l(gt,2);{var St=se=>{var Te=Oo();r(se,Te)};O(ct,se=>{e(m)&&se(St)})}var at=l(ct,2);{var st=se=>{var Te=Mo(),Me=c(Te,!0);v(Te),B(()=>Y(Me,e(i))),r(se,Te)};O(at,se=>{e(i)&&se(st)})}v(f),B(()=>Y(D,t().id)),r(_,f),ne()}var Po=I('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function qo(_,s){le(s,!0);let t=C(""),d=C("");Ne(()=>{i()});async function i(){let A=await kr(s.client.id),k=await A.json();A.ok?a(d,n(k.secret)):a(t,n(k.message))}async function m(){let A=await xr(s.client.id),k=await A.json();A.ok?await i():a(t,n(k.message))}var g=Po(),u=c(g),S=c(u,!0);v(u);var E=l(u,2),o=c(E);{var $=A=>{Gt(A,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(d)},set value(k){a(d,n(k))},children:(k,h)=>{q();var w=V("CLIENT SECRET");r(k,w)},$$slots:{default:!0}})};O(o,A=>{e(d)&&A($)})}v(E);var p=l(E,2);Ce(p,{level:1,$$events:{click:m},children:(A,k)=>{q();var h=V("GENERATE NEW");r(A,h)},$$slots:{default:!0}}),v(g),B(()=>Y(S,e(t))),r(_,g),ne()}var Wo=I('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),Go=I('<div class="err svelte-1jljqe9"> </div>'),Ko=I('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),Bo=I('<div class="container svelte-1jljqe9"><!></div>');function Fo(_,s){le(s,!0);let t=W(s,"client",19,()=>({})),d=C(!1),i=C("");async function m(){a(i,""),a(d,!0);let o=await fr(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var g=Bo(),u=c(g);{var S=o=>{var $=Wo();r(o,$)},E=o=>{var $=Ko(),p=l(ee($),2);Ce(p,{level:1,get isLoading(){return e(d)},set isLoading(h){a(d,n(h))},$$events:{click:m},children:(h,w)=>{q();var y=V("DELETE");r(h,y)},$$slots:{default:!0}});var A=l(p,2);{var k=h=>{var w=Go(),y=c(w,!0);v(w),B(()=>Y(y,e(i))),r(h,w)};O(A,h=>{e(i)&&h(k)})}r(o,$)};O(u,o=>{t().id==="rauthy"?o(S):o(E,!1)})}v(g),r(_,g),ne()}var Vo=(_,s)=>a(s,!0),Jo=I('<div class="load svelte-icxpvn"><!></div>'),Yo=I('<div class="txt svelte-icxpvn">LOAD</div>'),Ho=I('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function wa(_,s){le(s,!0);let t=C(!1),d=C(!1),i=C(void 0),m=C(void 0),g=C(void 0),u=C(void 0),S=C(void 0),E=C("white");Ia(()=>{clearTimeout(e(S))});function o(){switch(s.level){case 1:a(i,n(s.colors.act1)),a(m,n(s.colors.act1a)),a(g,"white"),a(u,`1px solid ${s.colors.gmid}`);break;case 2:a(i,n(s.colors.act2)),a(m,n(s.colors.act2a)),a(g,n(s.colors.ghigh)),a(u,`1px solid ${s.colors.gmid}`);break;default:a(i,n(s.colors.ghigh)),a(m,"white"),a(g,n(s.colors.act2a)),a(u,`1px solid ${s.colors.act2a}`),a(E,n(s.colors.acnt))}}Ae(()=>{e(d)&&a(S,n(setTimeout(()=>{a(d,!1)},2e3)))}),Ae(()=>{s.colors&&o()});var $=Ho(),p=c($);p.__click=[Vo,d],oe(p,"width","100px");var A=c(p);{var k=w=>{var y=Jo(),b=c(y);ua(b,{background:!1,get color(){return e(E)}}),v(y),r(w,y)},h=w=>{var y=Yo();r(w,y)};O(A,w=>{e(d)?w(k):w(h,!1)})}v(p),v($),B(()=>{oe(p,"border",e(u)),oe(p,"box-shadow",`1px 1px 2px ${s.colors.gmid??""}`),oe(p,"cursor",e(d)?"default":"pointer"),oe(p,"color",e(g)),oe(p,"background",e(t)?e(m):e(i))}),Ue("focus",p,()=>a(t,!0)),Ue("blur",p,()=>a(t,!1)),Ue("keypress",p,()=>a(d,!0)),r(_,$),ne()}pt(["click"]);var Xo=I('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),Zo=I('<div class="err font-label svelte-115vejc"> </div>'),Qo=I('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function is(_,s){le(s,!0);let t=W(s,"colors",19,()=>({})),d=W(s,"error",3,""),i=W(s,"name",3,""),m=W(s,"password",3,!1),g=W(s,"value",3,""),u=W(s,"width",3,"250px"),S=Jt(s,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),E=C(n(m()?"new-password":"text")),o=C(!1),$=C(!1);function p(){e(E)==="password"?a(E,"text"):a(E,"password")}var A=Qo(),k=c(A),h=c(k),w=c(h),y=c(w);Tt(y,()=>s.children??It),v(w),v(h),v(k);var b=l(k,2);nt(b);var x=()=>a(o,!0),f=()=>a(o,!1),T=()=>a($,!0),L=()=>a($,!1);let D;var j=l(b,2);{var N=F=>{var M=Xo(),z=c(M);z.__click=p;var P=c(z);{var Q=K=>{Fa(K,{width:22,get color(){return t().err}})},U=K=>{Va(K,{width:22,get color(){return t().ok}})};O(P,K=>{e(E)==="password"?K(Q):K(U,!1)})}v(z),v(M),Ue("keypress",z,p),r(F,M)};O(j,F=>{m()&&F(N)})}var G=l(j,2);{var R=F=>{var M=Zo(),z=c(M,!0);v(M),B(()=>{oe(M,"width",u()),oe(M,"color",t().err),Y(z,d())}),ce(7,M,()=>_e,()=>({duration:250})),r(F,M)};O(G,F=>{d()&&F(R)})}v(A),B(()=>{oe(A,"width",`calc(${u()??""} + 12px)`),oe(h,"background",t().bg),ue(w,"for",i()),D=ha(b,D,{type:e(E),onmouseenter:x,onmouseleave:f,onfocus:T,onblur:L,autocomplete:"off",name:i(),value:g(),...S},"svelte-115vejc"),oe(b,"width",u()),oe(b,"background",(e(o)||e($),t().bg)),oe(b,"border",e($)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),oe(b,"color",t().text),oe(b,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),r(_,A),ne()}pt(["click"]);var ev=I('<img alt="No Logo Available">');function ls(_,s){le(s,!0);var t=ev();B(()=>ue(t,"src",`/auth/v1/clients/${s.clientId}/logo?${Ut(6)}`)),r(_,t),ne()}var tv=I('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function av(_,s){le(s,!0);let t="This is an E-Mail error",d="This is a password error";var i=tv(),m=l(ee(i),2),g=c(m),u=c(g),S=c(u);{var E=w=>{ls(w,{get clientId(){return s.clientId}})};O(S,w=>{s.isLoading||w(E)})}v(u),v(g);var o=l(g,4);is(o,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return s.colors},children:(w,y)=>{q();var b=V("E-MAIL");r(w,b)},$$slots:{default:!0}});var $=l(o,2);is($,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return d},get colors(){return s.colors},children:(w,y)=>{q();var b=V("E-MAIL");r(w,b)},$$slots:{default:!0}});var p=l($,2),A=c(p);wa(A,{get colors(){return s.colors},level:1});var k=l(A,2);wa(k,{get colors(){return s.colors},level:2});var h=l(k,2);wa(h,{get colors(){return s.colors},level:3}),v(p),v(m),B(()=>{oe(m,"color",s.colors.text),oe(m,"border",`1px solid ${s.colors.gmid??""}`),oe(m,"background",s.colors.bg)}),r(_,i),ne()}var sv=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function rv(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=sv();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var iv=(_,s)=>e(s).click(),lv=(_,s)=>e(s).click(),nv=(_,s)=>s(_),ov=I('<div class="container svelte-jso5mh"><div role="button" tabindex="0" class="btn svelte-jso5mh"><!></div> <div role="button" tabindex="0" class="text noselect font-label svelte-jso5mh"> </div> <input class="imageInput svelte-jso5mh" type="file" accept=".jpg, .jpeg, .png, .svg"></div>');function ns(_,s){let t=W(s,"text",3,"UPLOAD LOGO"),d=W(s,"image",15),i=C(void 0);async function m(p){d(p.target.files[0])}var g=ov(),u=c(g);u.__click=[iv,i];var S=c(u);rv(S,{width:22}),v(u);var E=l(u,2);E.__click=[lv,i];var o=c(E,!0);v(E);var $=l(E,2);$.__change=[nv,m],er($,p=>a(i,p),()=>e(i)),v(g),B(()=>Y(o,t())),Ue("keypress",u,()=>e(i).click()),Ue("keypress",E,()=>e(i).click()),r(_,g)}pt(["click","change"]);var vv=I('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),dv=I('<div class="preview svelte-11vvvzr"><!></div>'),cv=I('<div class="success svelte-11vvvzr">Success</div>'),uv=I('<div class="err svelte-11vvvzr"> </div>'),hv=I(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function pv(_,s){le(s,!0);let t=W(s,"client",19,()=>({})),d=C(void 0),i=C(void 0),m=C(!1),g=C(""),u=C(!1),S=C(void 0),E=C(n({})),o=C(n({}));const $=He().shape({act1:he().trim().matches(ft,"only valid CSS color"),act1a:he().trim().matches(ft,"only valid CSS color"),act2:he().trim().matches(ft,"only valid CSS color"),act2a:he().trim().matches(ft,"only valid CSS color"),acnt:he().trim().matches(ft,"only valid CSS color"),acnta:he().trim().matches(ft,"only valid CSS color"),ok:he().trim().matches(ft,"only valid CSS color"),err:he().trim().matches(ft,"only valid CSS color"),glow:he().trim().matches(ft,"only valid CSS color"),gmid:he().trim().matches(ft,"only valid CSS color"),ghigh:he().trim().matches(ft,"only valid CSS color"),text:he().trim().matches(ft,"only valid CSS color"),bg:he().trim().matches(ft,"only valid CSS color")});Ne(async()=>{await p()}),Ia(()=>{e(S)&&clearTimeout(e(S))});async function p(){let z=await wr(t().id);if(z.ok){let P=await z.json();a(d,n(P)),a(o,n(P))}else{let P=await z.json();a(g,n(P.message))}}async function A(){if(a(g,""),a(m,!0),!await w())return;let z=await yr(t().id,e(o));if(z.ok)a(u,!0);else{let P=await z.json();a(g,n(P.message))}a(m,!1)}async function k(){a(g,""),a(m,!0);let z=await br(t().id);if(z.ok)await _r(t().id),await p(),a(u,!0);else{let P=await z.json();a(g,n(P.message))}a(m,!1)}async function h(z){a(m,!0),await Vt();let P=await $r(t().id,z);if(!P.ok){let Q=await P.json();console.error(Q.message)}a(m,!1)}async function w(){try{await $.validate(e(o),{abortEarly:!1}),a(E,n({}))}catch(z){return a(E,n(Ye(z))),!1}return a(d,n(e(o))),!0}Ae(()=>{e(u)&&a(S,n(setTimeout(()=>{a(u,!1)},3e3)))}),Ae(()=>{e(i)&&h(e(i))});var y=hv(),b=l(c(y),2),x=c(b);{var f=z=>{var P=vv(),Q=ee(P),U=c(Q),K=c(U);ie(K,{autocomplete:"off",placeholder:"act1",get value(){return e(o).act1},set value(te){e(o).act1=te},get error(){return e(E).act1},set error(te){e(E).act1=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("act1");r(te,Fe)},$$slots:{default:!0}});var J=l(K,2),Z=c(J);nt(Z);var re=l(Z,2);v(J),v(U);var ve=l(U,2),be=c(ve);ie(be,{autocomplete:"off",placeholder:"act1a",get value(){return e(o).act1a},set value(te){e(o).act1a=te},get error(){return e(E).act1a},set error(te){e(E).act1a=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("act1a");r(te,Fe)},$$slots:{default:!0}});var $e=l(be,2),pe=c($e);nt(pe);var je=l(pe,2);v($e),v(ve);var fe=l(ve,2),de=c(fe);ie(de,{autocomplete:"off",placeholder:"act2",get value(){return e(o).act2},set value(te){e(o).act2=te},get error(){return e(E).act2},set error(te){e(E).act2=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("act2");r(te,Fe)},$$slots:{default:!0}});var we=l(de,2),ye=c(we);nt(ye);var Oe=l(ye,2);v(we),v(fe);var Ie=l(fe,2),xe=c(Ie);ie(xe,{autocomplete:"off",placeholder:"act2a",get value(){return e(o).act2a},set value(te){e(o).act2a=te},get error(){return e(E).act2a},set error(te){e(E).act2a=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("act2a");r(te,Fe)},$$slots:{default:!0}});var Re=l(xe,2),H=c(Re);nt(H);var Se=l(H,2);v(Re),v(Ie);var ge=l(Ie,2),Pe=c(ge);ie(Pe,{autocomplete:"off",placeholder:"acnt",get value(){return e(o).acnt},set value(te){e(o).acnt=te},get error(){return e(E).acnt},set error(te){e(E).acnt=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("acnt");r(te,Fe)},$$slots:{default:!0}});var Je=l(Pe,2),rt=c(Je);nt(rt);var vt=l(rt,2);v(Je),v(ge);var qe=l(ge,2),Be=c(qe);ie(Be,{autocomplete:"off",placeholder:"acnta",get value(){return e(o).acnta},set value(te){e(o).acnta=te},get error(){return e(E).acnta},set error(te){e(E).acnta=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("acnta");r(te,Fe)},$$slots:{default:!0}});var lt=l(Be,2),xt=c(lt);nt(xt);var $t=l(xt,2);v(lt),v(qe);var Qe=l(qe,2),et=c(Qe);ie(et,{autocomplete:"off",placeholder:"ok",get value(){return e(o).ok},set value(te){e(o).ok=te},get error(){return e(E).ok},set error(te){e(E).ok=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("ok");r(te,Fe)},$$slots:{default:!0}});var gt=l(et,2),ct=c(gt);nt(ct);var St=l(ct,2);v(gt),v(Qe);var at=l(Qe,2),st=c(at);ie(st,{autocomplete:"off",placeholder:"err",get value(){return e(o).err},set value(te){e(o).err=te},get error(){return e(E).err},set error(te){e(E).err=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("err");r(te,Fe)},$$slots:{default:!0}});var se=l(st,2),Te=c(se);nt(Te);var Me=l(Te,2);v(se),v(at),v(Q);var X=l(Q,2),Ee=c(X),Le=c(Ee);ie(Le,{autocomplete:"off",placeholder:"glow",get value(){return e(o).glow},set value(te){e(o).glow=te},get error(){return e(E).glow},set error(te){e(E).glow=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("glow");r(te,Fe)},$$slots:{default:!0}});var Ct=l(Le,2),ae=c(Ct);nt(ae);var We=l(ae,2);v(Ct),v(Ee);var ze=l(Ee,2),Pt=c(ze);ie(Pt,{autocomplete:"off",placeholder:"gmid",get value(){return e(o).gmid},set value(te){e(o).gmid=te},get error(){return e(E).gmid},set error(te){e(E).gmid=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("gmid");r(te,Fe)},$$slots:{default:!0}});var Ht=l(Pt,2),Bt=c(Ht);nt(Bt);var Ot=l(Bt,2);v(Ht),v(ze);var Ft=l(ze,2),ba=c(Ft);ie(ba,{autocomplete:"off",placeholder:"ghigh",get value(){return e(o).ghigh},set value(te){e(o).ghigh=te},get error(){return e(E).ghigh},set error(te){e(E).ghigh=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("ghigh");r(te,Fe)},$$slots:{default:!0}});var $a=l(ba,2),aa=c($a);nt(aa);var ps=l(aa,2);v($a),v(Ft);var sa=l(Ft,2),_a=c(sa);ie(_a,{autocomplete:"off",placeholder:"text",get value(){return e(o).text},set value(te){e(o).text=te},get error(){return e(E).text},set error(te){e(E).text=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("text");r(te,Fe)},$$slots:{default:!0}});var ka=l(_a,2),ra=c(ka);nt(ra);var ms=l(ra,2);v(ka),v(sa);var ia=l(sa,2),xa=c(ia);ie(xa,{autocomplete:"off",placeholder:"bg",get value(){return e(o).bg},set value(te){e(o).bg=te},get error(){return e(E).bg},set error(te){e(E).bg=te},$$events:{input:w},children:(te,_t)=>{q();var Fe=V("bg");r(te,Fe)},$$slots:{default:!0}});var Ea=l(xa,2),la=c(Ea);nt(la);var gs=l(la,2);v(Ea),v(ia);var Sa=l(ia,2),Ca=c(Sa);ns(Ca,{get image(){return e(i)},set image(te){a(i,n(te))}});var fs=l(Ca,2);{var ws=te=>{ls(te,{get clientId(){return t().id}})};O(fs,te=>{e(m)||te(ws)})}v(Sa),v(X),B(()=>{oe(re,"background",e(o).act1),oe(je,"background",e(o).act1a),oe(Oe,"background",e(o).act2),oe(Se,"background",e(o).act2a),oe(vt,"background",e(o).acnt),oe($t,"background",e(o).acnta),oe(St,"background",e(o).ok),oe(Me,"background",e(o).err),oe(We,"background",e(o).glow),oe(Ot,"background",e(o).gmid),oe(ps,"background",e(o).ghigh),oe(ms,"background",e(o).text),oe(gs,"background",e(o).bg)}),dt(Z,()=>e(o).act1,te=>e(o).act1=te),dt(pe,()=>e(o).act1a,te=>e(o).act1a=te),dt(ye,()=>e(o).act2,te=>e(o).act2=te),dt(H,()=>e(o).act2a,te=>e(o).act2a=te),dt(rt,()=>e(o).acnt,te=>e(o).acnt=te),dt(xt,()=>e(o).acnta,te=>e(o).acnta=te),dt(ct,()=>e(o).ok,te=>e(o).ok=te),dt(Te,()=>e(o).err,te=>e(o).err=te),dt(ae,()=>e(o).glow,te=>e(o).glow=te),dt(Bt,()=>e(o).gmid,te=>e(o).gmid=te),dt(aa,()=>e(o).ghigh,te=>e(o).ghigh=te),dt(ra,()=>e(o).text,te=>e(o).text=te),dt(la,()=>e(o).bg,te=>e(o).bg=te),r(z,P)};O(x,z=>{e(o)&&z(f)})}var T=l(x,2);{var L=z=>{var P=dv(),Q=c(P);av(Q,{get clientId(){return t().id},get isLoading(){return e(m)},get colors(){return e(d)},set colors(U){a(d,n(U))}}),v(P),r(z,P)};O(T,z=>{e(d)&&z(L)})}v(b);var D=l(b,2),j=c(D);Ce(j,{level:1,get isLoading(){return e(m)},set isLoading(z){a(m,n(z))},$$events:{click:A},children:(z,P)=>{q();var Q=V("SAVE");r(z,Q)},$$slots:{default:!0}});var N=l(j,2);Ce(N,{level:3,get isLoading(){return e(m)},set isLoading(z){a(m,n(z))},$$events:{click:k},children:(z,P)=>{q();var Q=V("RESET");r(z,Q)},$$slots:{default:!0}});var G=l(N,2);{var R=z=>{var P=cv();r(z,P)};O(G,z=>{e(u)&&z(R)})}var F=l(G,2);{var M=z=>{var P=uv(),Q=c(P,!0);v(P),B(()=>Y(Q,e(g))),r(z,P)};O(F,z=>{e(g)&&z(M)})}v(D),v(y),r(_,y),ne()}var mv=I('<div class="data font-mono svelte-115hohv"> </div>'),gv=I('<div class="data svelte-115hohv"> </div>'),fv=I('<div class="header svelte-115hohv"><!> <!></div>'),wv=I("<div><!></div>"),yv=I("<div><!></div>"),bv=I("<div><!></div>"),$v=I("<div><!></div>"),_v=I("<div><!> <!></div>");function kv(_,s){le(s,!0);let t=W(s,"client",31,()=>n({})),d=W(s,"onSave",15),i=C(void 0);const m=["Config","Secret","Branding","Delete"];let g=C(n(m[0]));const u=200,S=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=fv(),p=c($);Ze(p,{text:"Client ID",children:(h,w)=>{var y=mv(),b=c(y,!0);v(y),B(()=>Y(b,t().id)),r(h,y)},$$slots:{default:!0}});var A=l(p,2);{var k=h=>{Ze(h,{text:"Client Name",children:(w,y)=>{var b=gv(),x=c(b,!0);v(b),B(()=>Y(x,t().name)),r(w,b)},$$slots:{default:!0}})};O(A,h=>{t().name&&h(k)})}v($),r(o,$)},body:o=>{var $=_v(),p=c($);Dt(p,{labels:m,get selected(){return e(g)},set selected(w){a(g,n(w))}});var A=l(p,2);{var k=w=>{var y=wv(),b=c(y);Uo(b,{get client(){return t()},set client(x){t(x)},get onSave(){return d()},set onSave(x){d(x)}}),v(y),ce(5,y,()=>_e,()=>({delay:S,duration:u})),ce(6,y,()=>_e,()=>({duration:u})),r(w,y)},h=w=>{var y=me(),b=ee(y);{var x=T=>{var L=yv(),D=c(L);qo(D,{get client(){return t()}}),v(L),ce(5,L,()=>_e,()=>({delay:S,duration:u})),ce(6,L,()=>_e,()=>({duration:u})),r(T,L)},f=T=>{var L=me(),D=ee(L);{var j=G=>{var R=bv(),F=c(R);pv(F,{get client(){return t()}}),v(R),ce(5,R,()=>_e,()=>({delay:S,duration:u})),ce(6,R,()=>_e,()=>({duration:u})),r(G,R)},N=G=>{var R=me(),F=ee(R);{var M=z=>{var P=$v(),Q=c(P);Fo(Q,{get client(){return t()},onSave:E}),v(P),ce(5,P,()=>_e,()=>({delay:S,duration:u})),ce(6,P,()=>_e,()=>({duration:u})),r(z,P)};O(F,z=>{e(g)==="Delete"&&z(M)},!0)}r(G,R)};O(D,G=>{e(g)==="Branding"?G(j):G(N,!1)},!0)}r(T,L)};O(b,T=>{e(g)==="Secret"?T(x):T(f,!1)},!0)}r(w,y)};O(A,w=>{e(g)==="Config"?w(k):w(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var xv=I('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),Ev=I('<div class="success svelte-gbj18i">Success</div>'),Sv=I('<div class="mainErr err svelte-gbj18i"> </div>'),Cv=I('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function Iv(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1),d=C(void 0),i=n({id:"",name:"",confidential:!0,redirect_uris:[]}),m=C(""),g=C(!1),u=C(void 0),S=C(n({}));const E=He().shape({id:he().required("Client ID is required").trim().matches(Os,"Can only contain characters, numbers and '-'"),name:he().trim().nullable().matches(Xt,"Can only contain characters, numbers and '-'")});let o=C(void 0),$=C(void 0);const p="330px";Ae(()=>{e(g)&&a(u,n(setTimeout(()=>{s.onSave(),a(g,!1),a(d,!1)},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function A(){if(a(m,""),!await k()||!e(o)()||!e($)()){a(m,"Invalid input");return}let h=i;h.name||(h.name=void 0);let w=await mr(h);if(w.ok)a(g,!0);else{let y=await w.json();a(m,n(y.message))}}async function k(){try{return await E.validate(i,{abortEarly:!1}),a(S,n({})),!0}catch(h){return a(S,n(Ye(h))),!1}}ot(_,{get idx(){return t()},set idx(h){t(h)},get show(){return e(d)},set show(h){a(d,n(h))},header:h=>{var w=xv();r(h,w)},body:h=>{var w=Cv(),y=c(w);ie(y,{autocomplete:"off",placeholder:"Client ID",width:p,get value(){return i.id},set value(M){i.id=M},get error(){return e(S).id},set error(M){e(S).id=M},$$events:{input:k},children:(M,z)=>{q();var P=V("CLIENT ID");r(M,P)},$$slots:{default:!0}});var b=l(y,2);ie(b,{autocomplete:"off",placeholder:"Client Name",width:p,get value(){return i.name},set value(M){i.name=M},get error(){return e(S).name},set error(M){e(S).name=M},$$events:{input:k},children:(M,z)=>{q();var P=V("NAME");r(M,P)},$$slots:{default:!0}});var x=l(b,2);Kt(x,{style:`width: ${p}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return i.redirect_uris},set values(M){i.redirect_uris=M},get validate(){return e(o)},set validate(M){a(o,n(M))},children:(M,z)=>{q();var P=V("REDIRECT URI");r(M,P)},$$slots:{default:!0}});var f=l(x,2);Kt(f,{style:`width: ${p}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return i.post_logout_redirect_uris},set values(M){i.post_logout_redirect_uris=M},get validate(){return e($)},set validate(M){a($,n(M))},children:(M,z)=>{q();var P=V("POST LOGOUT REDIRECT URI");r(M,P)},$$slots:{default:!0}});var T=l(f,2),L=l(c(T),2),D=c(L);Ve(D,{get selected(){return i.confidential},set selected(M){i.confidential=M}}),v(L),v(T);var j=l(T,2);Ce(j,{level:1,width:"4rem",$$events:{click:A},children:(M,z)=>{q();var P=V("SAVE");r(M,P)},$$slots:{default:!0}});var N=l(j,2);{var G=M=>{var z=Ev();r(M,z)};O(N,M=>{e(g)&&M(G)})}var R=l(N,2);{var F=M=>{var z=Sv(),P=c(z,!0);v(z),B(()=>Y(P,e(m))),r(M,z)};O(R,M=>{e(m)&&M(F)})}v(w),r(h,w)},$$slots:{header:!0,body:!0}}),ne()}var Tv=I('<div class="svelte-nj6lei"><!></div>'),Av=I(' <div class="content"><!> <!> <div id="clients" class="svelte-nj6lei"></div> <!> <div style="height: 20px"></div></div>',1);function Lv(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=C(""),u=[{label:"ID",callback:(x,f)=>x.id.toLowerCase().includes(f.toLowerCase())}],S=[{label:"ID",callback:(x,f)=>x.id.localeCompare(f.id)}];Ne(()=>{E(),o()});async function E(){let x=await pr();if(!x.ok)a(t,"Error fetching clients: "+x.body.message);else{let f=await x.json();a(d,n([...f]))}}async function o(){let x=await Qa();if(!x.ok)a(t,"Error fetching scopes: "+x.body.message);else{let f=await x.json();fi.set(f),es.set(f.map(T=>T.name))}}function $(){E(),o(),a(g,"")}q();var p=Av(),A=ee(p),k=l(A),h=c(k);Lt(h,{get items(){return e(d)},searchOptions:u,orderOptions:S,get resItems(){return e(i)},set resItems(x){a(i,n(x))},get search(){return e(g)},set search(x){a(g,n(x))}});var w=l(h,2);Iv(w,{onSave:$});var y=l(w,2);Ge(y,23,()=>e(m),x=>x.id,(x,f,T)=>{var L=Tv(),D=c(L);kv(D,{onSave:$,get client(){return e(m)[e(T)]},set client(j){e(m)[e(T)]=j}}),v(L),r(x,L)}),v(y);var b=l(y,2);jt(b,{get items(){return e(i)},set items(x){a(i,n(x))},get resItems(){return e(m)},set resItems(x){a(m,n(x))}}),q(2),v(k),B(()=>Y(A,`${e(t)??""} `)),r(_,p),ne()}var Nv=I('<div class="uid svelte-psgb3d"> </div>'),Rv=I('<div class="ip svelte-psgb3d"> </div>'),Dv=I('<div class="date svelte-psgb3d"> </div>'),jv=I('<div class="header svelte-psgb3d"><!> <div class="header svelte-psgb3d"><!> <!></div></div>'),Ov=I('<div class="details svelte-psgb3d"><div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Session ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">User ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Expires:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Last Seen:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">State:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">IP:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">MFA:</div> <!></div></div>'),Mv=I('<div class="container svelte-psgb3d"><!></div>');function os(_,s){le(s,!0);let t=W(s,"session",27,()=>n({})),d=W(s,"now",11,0);var i=Mv(),m=c(i);ot(m,{header:g=>{var u=jv(),S=c(u);Ze(S,{text:"User ID",children:(p,A)=>{var k=Nv(),h=c(k,!0);v(k),B(()=>Y(h,t().user_id)),r(p,k)},$$slots:{default:!0}});var E=l(S,2),o=c(E);Ze(o,{text:"Peer IP",children:(p,A)=>{var k=Rv(),h=c(k,!0);v(k),B(()=>Y(h,t().remote_ip)),r(p,k)},$$slots:{default:!0}});var $=l(o,2);Ze($,{text:"Last Seen",children:(p,A)=>{var k=Dv(),h=c(k,!0);B(()=>Y(h,ut(t().last_seen))),v(k),r(p,k)},$$slots:{default:!0}}),v(E),v(u),r(g,u)},body:g=>{var u=Ov(),S=c(u),E=l(c(S));v(S);var o=l(S,2),$=l(c(o));v(o);var p=l(o,2),A=l(c(p));B(()=>Y(A,` ${ut(t().exp)??""}`)),v(p);var k=l(p,2),h=l(c(k));B(()=>Y(h,` ${ut(t().last_seen)??""}`)),v(k);var w=l(k,2),y=l(c(w));v(w);var b=l(w,2),x=l(c(b));v(b);var f=l(b,2),T=l(c(f),2);ea(T,{get check(){return t().is_mfa}}),v(f),v(u),B(()=>{Y(E,` ${t().id??""}`),Y($,` ${t().user_id??""}`),Y(y,` ${t().state??""}`),Y(x,` ${t().remote_ip??""}`)}),r(g,u)},$$slots:{header:!0,body:!0}}),v(i),B(()=>Et(i,"expired",t().exp<d())),r(_,i),ne()}var zv=I('<div class="svelte-1rjd8yh"><!></div>'),Uv=I('<div class="svelte-1rjd8yh"><!></div>'),Pv=I('<div class="content"><div class="row svelte-1rjd8yh"><!> <div class="button svelte-1rjd8yh"><!></div></div> <div id="sessions" class="svelte-1rjd8yh"><!></div> <!></div>');function qv(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=C(Date.now()/1e3),u=C(""),S=C(!1),E=C(15),o=C(""),$=C(1),p=[{label:"User ID",callback:(P,Q)=>{var U;return(U=P.user_id)==null?void 0:U.toLowerCase().includes(Q.toLowerCase())}},{label:"Session ID",callback:(P,Q)=>P.id.toLowerCase().includes(Q.toLowerCase())},{label:"IP",callback:(P,Q)=>{var U;return(U=P.remote_ip)==null?void 0:U.toLowerCase().includes(Q.toLowerCase())}}],A=[{label:"Expires",callback:(P,Q)=>P.exp-Q.exp},{label:"Last Seen",callback:(P,Q)=>P.last_seen-Q.last_seen},{label:"Session ID",callback:(P,Q)=>P.id.localeCompare(Q.id)},{label:"User ID",callback:(P,Q)=>{var U;return(U=P.user_id)==null?void 0:U.localeCompare(Q.user_id)}},{label:"State",callback:(P,Q)=>P.state.localeCompare(Q.state)},{label:"IP",callback:(P,Q)=>{var U;return(U=P.remote_ip)==null?void 0:U.localeCompare(Q.remote_ip)}}];Ne(()=>{k()});async function k(P,Q,U,K){let J;if(P===!0?U&&e($)===2?J=await Ya(K||e(E),Q,void 0,!1):J=await Ya(K||e(E),Q,e(o),U):J=await Gr(),!J.ok)a(t,"Error fetching sessions: "+J.body.message);else{J.status===206?(a(E,n(Number.parseInt(J.headers.get("x-page-size"),10))),a(o,n(J.headers.get("x-continuation-token"))),a(u,"session")):a(u,"");let Z=await J.json();a(d,n([...Z])),a(i,n([...Z])),a(g,Date.now()/1e3)}}async function h(P,Q){await k(!0,P,Q),Q?a($,e($)-1):a($,e($)+1)}async function w(P){a(o,""),await k(!0,0,!1,P),a($,1)}async function y(){let P=await Kr();if(P.ok)za();else{let Q=await P.json();a(t,n(Q.message))}a(g,n(new Date))}var b=Pv(),x=c(b),f=c(x);Lt(f,{get items(){return e(d)},searchOptions:p,orderOptions:A,firstDirReverse:!0,get resItems(){return e(i)},set resItems(P){a(i,n(P))},get useServerSideIdx(){return e(u)},set useServerSideIdx(P){a(u,n(P))},get isSearchFiltered(){return e(S)},set isSearchFiltered(P){a(S,n(P))}});var T=l(f,2);oe(T,"margin-top","-10px");var L=c(T);Ce(L,{level:3,$$events:{click:y},children:(P,Q)=>{q();var U=V("Invalidate All Sessions");r(P,U)},$$slots:{default:!0}}),v(T),v(x);var D=l(x),j=l(D),N=c(j);{var G=P=>{var Q=me(),U=ee(Q);Ge(U,19,()=>e(d),K=>K.id,(K,J,Z)=>{var re=zv(),ve=c(re);os(ve,{get session(){return e(d)[e(Z)]},set session(be){e(d)[e(Z)]=be},get now(){return e(g)},set now(be){a(g,n(be))}}),v(re),r(K,re)}),r(P,Q)},R=P=>{var Q=me(),U=ee(Q);Ge(U,19,()=>e(m),K=>K.id,(K,J,Z)=>{var re=Uv(),ve=c(re);os(ve,{get session(){return e(m)[e(Z)]},set session(be){e(m)[e(Z)]=be},get now(){return e(g)},set now(be){a(g,n(be))}}),v(re),r(K,re)}),r(P,Q)};O(N,P=>{e(u)&&!e(S)?P(G):P(R,!1)})}v(j);var F=l(j,2);{var M=P=>{ss(P,{fetchPageCallback:h,sspPageSizeChange:w,get sspPage(){return e($)},set sspPage(Q){a($,n(Q))},get sspPageSize(){return e(E)},set sspPageSize(Q){a(E,n(Q))},get sspContinuationToken(){return e(o)},set sspContinuationToken(Q){a(o,n(Q))}})},z=P=>{jt(P,{get items(){return e(i)},set items(Q){a(i,n(Q))},get resItems(){return e(m)},set resItems(Q){a(m,n(Q))}})};O(F,P=>{e(u)&&!e(S)?P(M):P(z,!1)})}v(b),B(()=>Y(D,` ${e(t)??""} `)),r(_,b),ne()}var Wv=I('<div class="header font-label svelte-1mi5990">ADD NEW USER ATTRIBUTE</div>'),Gv=I('<div class="mainErr err svelte-1mi5990"> </div>'),Kv=I('<div class="container svelte-1mi5990"><div class="desc svelte-1mi5990">You can add a new custom user attribute.<br> These attributes can be set for every user and mapped to an existing scope.<br> They are simple Key / JsonValue pairs.</div> <!> <!> <!> <!> <!></div>');function Bv(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1),d=C(""),i=C(void 0),m=n({name:"",desc:""}),g=C(n({}));const u=He().shape({name:he().trim().required("Name is required").matches(Ua,"Invalid characters: [a-z0-9-_/]{2,32}"),desc:he().trim().matches(Pa,"Invalid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});async function S(){if(!await E())return;a(d,"");let o=await Yr(m);if(o.ok)a(i,!1),s.onSave();else{let $=await o.json();a(d,n($.message))}}async function E(){try{return await u.validate(m,{abortEarly:!1}),a(g,n({})),!0}catch(o){return a(g,n(Ye(o))),!1}}ot(_,{get idx(){return t()},set idx(o){t(o)},get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=Wv();r(o,$)},body:o=>{var $=Kv(),p=l(c($),2);ie(p,{autocomplete:"off",placeholder:"Name",get value(){return m.name},set value(b){m.name=b},get error(){return e(g).name},set error(b){e(g).name=b},$$events:{input:E},children:(b,x)=>{q();var f=V("NAME");r(b,f)},$$slots:{default:!0}});var A=l(p,2);ie(A,{autocomplete:"off",placeholder:"Description",get value(){return m.desc},set value(b){m.desc=b},get error(){return e(g).desc},set error(b){e(g).desc=b},$$events:{input:E},children:(b,x)=>{q();var f=V("DESCRIPTION");r(b,f)},$$slots:{default:!0}});var k=l(A,2);Ce(k,{level:1,$$events:{click:S},children:(b,x)=>{q();var f=V("SAVE");r(b,f)},$$slots:{default:!0}});var h=l(k,2);O(h,b=>{});var w=l(h,2);{var y=b=>{var x=Gv(),f=c(x,!0);v(x),B(()=>Y(f,e(d))),r(b,x)};O(w,b=>{e(d)&&b(y)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var Fv=I('<div class="success svelte-2o3w7i">Success</div>'),Vv=I('<div class="mainErr err svelte-2o3w7i"> </div>'),Jv=I('<div class="container svelte-2o3w7i"><!> <!> <!> <!> <!></div>');function Yv(_,s){le(s,!0);let t=W(s,"attr",19,()=>({})),d=C(""),i=C(!1),m=C(void 0);Ae(()=>{e(i)&&a(m,n(setTimeout(()=>{a(i,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(m)));let g=C(n({})),u=n({});const S=He().shape({name:he().trim().required("Name is required").matches(Ua,"Valid characters: [a-z0-9-_/]{2,32}"),desc:he().nullable().trim().matches(Pa,"Valid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});Ne(()=>{u.name=t().name,u.desc=t().desc});async function E(){if(a(d,""),!await o()){a(d,"Invalid input");return}let x={name:u.name,desc:u.desc},f=await Hr(t().name,x);if(f.ok)a(i,!0);else{let T=await f.json();a(d,n(T.message))}}async function o(){try{return await S.validate(u,{abortEarly:!1}),a(g,n({})),!0}catch(x){return a(g,n(Ye(x))),!1}}var $=Jv(),p=c($);ie(p,{autocomplete:"off",placeholder:"Name",get value(){return u.name},set value(x){u.name=x},get error(){return e(g).name},set error(x){e(g).name=x},$$events:{input:o},children:(x,f)=>{q();var T=V("NAME");r(x,T)},$$slots:{default:!0}});var A=l(p,2);ie(A,{autocomplete:"off",placeholder:"Description",get value(){return u.desc},set value(x){u.desc=x},get error(){return e(g).desc},set error(x){e(g).desc=x},$$events:{input:o},children:(x,f)=>{q();var T=V("DESCRIPTION");r(x,T)},$$slots:{default:!0}});var k=l(A,2);Ce(k,{level:1,width:"4rem",$$events:{click:E},children:(x,f)=>{q();var T=V("SAVE");r(x,T)},$$slots:{default:!0}});var h=l(k,2);{var w=x=>{var f=Fv();r(x,f)};O(h,x=>{e(i)&&x(w)})}var y=l(h,2);{var b=x=>{var f=Vv(),T=c(f,!0);v(f),B(()=>Y(T,e(d))),r(x,f)};O(y,x=>{e(d)&&x(b)})}v($),r(_,$),ne()}var Hv=I('<div class="err svelte-1jljqe9"> </div>'),Xv=I('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this custom attribute?</div> <!> <!></div>');function Zv(_,s){le(s,!0);let t=W(s,"attr",19,()=>({})),d=C(!1),i=C("");async function m(){a(i,""),a(d,!0);let o=await Xr(t().name);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var g=Xv(),u=l(c(g),2);Ce(u,{level:1,get isLoading(){return e(d)},set isLoading(o){a(d,n(o))},$$events:{click:m},children:(o,$)=>{q();var p=V("DELETE");r(o,p)},$$slots:{default:!0}});var S=l(u,2);{var E=o=>{var $=Hv(),p=c($,!0);v($),B(()=>Y(p,e(i))),r(o,$)};O(S,o=>{e(i)&&o(E)})}v(g),r(_,g),ne()}var Qv=I('<div class="data svelte-115hohv"> </div>'),ed=I('<div class="header svelte-115hohv"><!></div>'),td=I("<div><!></div>"),ad=I("<div><!></div>"),sd=I("<div><!> <!></div>");function rd(_,s){le(s,!0);let t=W(s,"attr",27,()=>n({})),d=W(s,"onSave",15),i=C(void 0);const m=["Config","Delete"];let g=C(n(m[0]));const u=200,S=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=ed(),p=c($);Ze(p,{text:"Custom Attribute Name",children:(A,k)=>{var h=Qv(),w=c(h,!0);v(h),B(()=>Y(w,t().name)),r(A,h)},$$slots:{default:!0}}),v($),r(o,$)},body:o=>{var $=sd(),p=c($);Dt(p,{labels:m,get selected(){return e(g)},set selected(w){a(g,n(w))}});var A=l(p,2);{var k=w=>{var y=td(),b=c(y);Yv(b,{get attr(){return t()},get onSave(){return d()},set onSave(x){d(x)}}),v(y),ce(5,y,()=>_e,()=>({delay:S,duration:u})),ce(6,y,()=>_e,()=>({duration:u})),r(w,y)},h=w=>{var y=me(),b=ee(y);{var x=f=>{var T=ad(),L=c(T);Zv(L,{get attr(){return t()},onSave:E}),v(T),ce(5,T,()=>_e,()=>({delay:S,duration:u})),ce(6,T,()=>_e,()=>({duration:u})),r(f,T)};O(b,f=>{e(g)==="Delete"&&f(x)},!0)}r(w,y)};O(A,w=>{e(g)==="Config"?w(k):w(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var id=I('<div class="svelte-mjg702"><!></div>'),ld=I(' <div class="content"><!> <!> <div id="attrs" class="svelte-mjg702"></div> <!> <div style="height: 20px"></div></div>',1);function nd(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=C(""),u=[{label:"NAME",callback:(b,x)=>b.name.toLowerCase().includes(x.toLowerCase())}],S=[{label:"NAME",callback:(b,x)=>b.name.localeCompare(x.name)}];Ne(()=>{E()});async function E(){let b=await ma();if(!b.ok)a(t,"Error fetching user attr: "+b.body.message);else{let x=await b.json();a(d,n([...x.values]))}}function o(){e(d).length<2&&(a(d,n([])),a(i,n([])),a(m,n([]))),E(),a(g,"")}q();var $=ld(),p=ee($),A=l(p),k=c(A);Lt(k,{get items(){return e(d)},searchOptions:u,orderOptions:S,get resItems(){return e(i)},set resItems(b){a(i,n(b))},get search(){return e(g)},set search(b){a(g,n(b))}});var h=l(k,2);Bv(h,{onSave:o});var w=l(h,2);Ge(w,23,()=>e(m),b=>b.name,(b,x,f)=>{var T=id(),L=c(T);rd(L,{onSave:o,get attr(){return e(m)[e(f)]},set attr(D){e(m)[e(f)]=D}}),v(T),r(b,T)}),v(w);var y=l(w,2);jt(y,{get items(){return e(i)},set items(b){a(i,n(b))},get resItems(){return e(m)},set resItems(b){a(m,n(b))}}),q(2),v(A),B(()=>Y(p,`${e(t)??""} `)),r(_,$),ne()}var od=I('<div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div></div>'),vd=I('<div class="container svelte-151ox8b"><div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b">Time Taken (ms)</div> <div class="column svelte-151ox8b">t_cost</div> <div class="column svelte-151ox8b">m_cost</div> <div class="column svelte-151ox8b">p_cost</div></div> <!> <div style="height: 20px"></div></div>');function dd(_,s){let t=W(s,"res",19,()=>[]);var d=vd(),i=l(c(d),2);Ge(i,17,t,wt,(m,g)=>{var u=od(),S=c(u),E=c(S,!0);v(S);var o=l(S,2),$=c(o,!0);v(o);var p=l(o,2),A=c(p,!0);v(p);var k=l(p,2),h=c(k,!0);v(k),v(u),B(()=>{Y(E,e(g).time_taken),Y($,e(g).t_cost),Y(A,e(g).m_cost),Y(h,e(g).p_cost)}),r(m,u)}),q(2),v(d),r(_,d)}var cd=I('<div class="result svelte-1digv30"><!></div>'),ud=I('<div class="wrapper svelte-1digv30"><div class="container svelte-1digv30"><!> <!> <!> <!></div> <!></div>');function hd(_,s){le(s,!0);const t="170px";let d=C(!1),i=C(!1),m=C(void 0),g=C(void 0),u=n({targetTime:1e3,mCost:32768,pCost:2}),S=C(n({}));const E=He().shape({targetTime:yt().required("Target Time is required").min(500,"Cannot be lower than 500").max(99999,"Cannot be higher than 99999"),mCost:yt().min(32768,"Cannot be lower than 32768").max(1048576,"Cannot be higher than 1048576"),pCost:yt().min(2,"Cannot be lower than 2").max(1024,"Cannot be higher than 1024")});Ae(()=>{e(i)&&e(m)&&a(g,n(window.innerHeight))});function o(f){f.code==="Enter"&&$()}async function $(){try{await E.validate(u,{abortEarly:!1}),a(S,n({}))}catch(D){a(S,n(Ye(D)));return}a(d,!0),a(i,!1);const f={target_time:Number.parseInt(u.targetTime),m_cost:Number.parseInt(u.mCost),p_cost:Number.parseInt(u.pCost)},T=await Nr(f),L=await T.json();T.ok?(a(m,n(L.results)),a(i,!0)):L.message,a(d,!1)}var p=ud(),A=c(p),k=c(A);ie(k,{type:"number",autocomplete:"off",placeholder:"Target Time (ms)",width:t,get value(){return u.targetTime},set value(f){u.targetTime=f},get error(){return e(S).targetTime},set error(f){e(S).targetTime=f},$$events:{keypress:o},children:(f,T)=>{q();var L=V("TARGET TIME (ms)");r(f,L)},$$slots:{default:!0}});var h=l(k,2);ie(h,{type:"number",autocomplete:"off",placeholder:"m_cost (kB)",width:t,get value(){return u.mCost},set value(f){u.mCost=f},get error(){return e(S).mCost},set error(f){e(S).mCost=f},$$events:{keypress:o},children:(f,T)=>{q();var L=V("M_COST (kB)");r(f,L)},$$slots:{default:!0}});var w=l(h,2);ie(w,{type:"number",autocomplete:"off",placeholder:"p_cost",width:t,get value(){return u.pCost},set value(f){u.pCost=f},get error(){return e(S).pCost},set error(f){e(S).pCost=f},$$events:{keypress:o},children:(f,T)=>{q();var L=V("P_COST");r(f,L)},$$slots:{default:!0}});var y=l(w,2);Ce(y,{get isLoading(){return e(d)},level:1,$$events:{click:$},children:(f,T)=>{q();var L=V("CALCULATE");r(f,L)},$$slots:{default:!0}}),v(A);var b=l(A,2);{var x=f=>{var T=cd(),L=c(T);dd(L,{get res(){return e(m)}}),v(T),r(f,T)};O(b,f=>{e(i)&&f(x)})}v(p),Fs("y",()=>e(g),f=>a(g,n(f))),r(_,p),ne()}var pd=I(`<div class="container svelte-6927oe"><h3>Argon2ID - Password Hashing</h3> <p>This utility helps you find the best argon2id settings for your platform.<br> Argon2id is currently the safest available password hashing algorithm. To use it to its fullest potential, it
        has
        to be tuned for each deployment.</p> <p><b>Important:These values need to be tuned on the final architecture!</b><br> They change depending on the capabilities of the system. The more powerful the system, the more safe these
        values
        can be.</p> <p>If you want a detailed introduction to argon2id, many sources exist online. This guide will just give very short
        overview about the values.<br> Three of them need to be configured:</p> <ul><li><b>m cost</b> <p>The <code class="svelte-6927oe">m_cost</code> defines the amount of <b>memory (in kB)</b>, which is used for the hashing.<br> The higher the value, the better, of course. But you need to keep in mind the servers resources.<br> When you hash 4 passwords at the same time, for instance, the backend needs <code class="svelte-6927oe">4 x m_cost</code> during the
                hashing. These resources must be available.</p> <p>Tuning <code class="svelte-6927oe">m_cost</code> is pretty easy. If you can give rauthy 1GB of memory for hashing operations,
                give it
                1GB. If you can sacrifice 4GB, give it 4GB.</p> <p><b>Important: You should never go below an <code class="svelte-6927oe">m_cost</code> of <code class="svelte-6927oe">32768</code></b>.</p></li> <li><b>p cost</b> <p>The <code class="svelte-6927oe">p_cost</code> defines the amount of <b>parallelism</b> for hashing.<br> This value most often tops out at ~8, which is the default for Rauthy.<br> <code class="svelte-6927oe">p_cost</code> does not affect the time needed for the calculation, if the resources are available.</p> <p>The general rule is:<br> Set the <code class="svelte-6927oe">p_cost</code> to twice the size of cores your have available.<br> For instance, if you have 4 cores available, set the <code class="svelte-6927oe">p_cost</code> to <code class="svelte-6927oe">8</code>.<br></p></li> <li><b>t cost</b> <p>The <code class="svelte-6927oe">t_cost</code> defines the amount of <b>time</b> for hashing.<br> This value is actually the only one, that needs tuning, since <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> are
                basically given by the environment.</p> <p>Tuning is easy: Set <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> accordingly and then increase <code class="svelte-6927oe">t_cost</code> as long as you have not reached your hashing-time-goal.</p></li></ul> <br> <h3>A word about Login Time</h3> <p>Generally, users want everything as fast as possible. When doing a safe login though, a time between 500 - 1000
        ms
        should not be a problem.<br> The login time must not be too short, since it would lower the strength of the hash, of course.</p> <p>To provide as much safety by default as possible, this utility does not allow you to go below 500 ms for the
        login
        time.</p> <br> <h3>Current values</h3> <p>The current values from the backend are the following:</p> <div><div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>m_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>p_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>t_cost</b>:</div> </div> <br> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>Login Time</b>:</div> </div> <p><i>Note:</i> The Login Time from the backend does only provide a good guideline after at least 5 successful
            logins, after
            rauthy has been started.<br> The base value is always 2000 ms after a fresh restart and will adjust over time with each successful login.</p> <b>Threads (p_cost) rauthy has access to</b> <br></div> <br> <h3>Parameter Calculation Utility</h3> <p>You can use this tool to approximate good values for your deployment.<br> Keep in mind, that this should be executed with rauthy in its final place with all final resources
        available.<br><br> You should execute this utility during load to not over tune.<br><br> <code class="svelte-6927oe">m_cost</code> is optional and the safe minimal value of <code class="svelte-6927oe">32768</code> would be chosen, if empty.<br> <code class="svelte-6927oe">p_cost</code> is optional and rauthy will utilize all threads it can see, if empty.<br></p> <!> <div style="height: 20px"></div></div>`);function md(_,s){le(s,!0);let t=C(void 0),d=C(void 0),i=C(void 0);Ne(()=>{m()});async function m(){let x=await Lr(),f=await x.json();x.ok?(a(t,n(f.argon2_params)),a(d,n(f.login_time)),a(i,n(f.num_cpus))):f.message}var g=pd(),u=l(c(g),8);oe(u,"margin-left","-10px");var S=l(u,16),E=c(S),o=l(c(E));v(E);var $=l(E,2),p=l(c($));v($);var A=l($,2),k=l(c(A));v(A);var h=l(A,4),w=l(c(h));v(h);var y=l(h,5);q(),v(S);var b=l(S,8);hd(b,{}),q(2),v(g),B(()=>{var x,f,T;Y(o,` ${((x=e(t))==null?void 0:x.m_cost)??""}`),Y(p,` ${((f=e(t))==null?void 0:f.p_cost)??""}`),Y(k,` ${((T=e(t))==null?void 0:T.t_cost)??""}`),Y(w,` ${e(d)??""} ms`),Y(y,`: ${e(i)??""}`)}),r(_,g),ne()}var gd=I('<li class="font-mono"> </li>'),fd=I('<div class="err svelte-3rk97c"> </div>'),wd=I('<div class="success svelte-3rk97c">Success</div>'),yd=I(`<div class="wrapper svelte-3rk97c"><div class="desc svelte-3rk97c"><h3>Secrets Encryption Keys</h3> <p>These Keys are used for an additional encryption at rest, independently from any data store technology used
            under
            the hood. They are configured statically, but can be rotated and migrated on this page manually to maybe get
            rid
            of an old key, which is currently still in use in some places.</p> <p>The active key is statically set in the Rauthy config file / environment variables. It cannot be changed
            here
            dynamically.<br> <b>All new JWK encryption's will always use the currently active key.</b></p> <div class="valRow svelte-3rk97c"><div class="label svelte-3rk97c">Active Key:</div> <div class="value font-mono"> </div></div> <div class="keysBlock svelte-3rk97c"><div>Available Keys:</div> <ul></ul></div> <div class="migrateBlock svelte-3rk97c"><p>If you migrate all existing secrets, it might take a few seconds to finish, if you have a big
                dataset.<br> Manually migrate all existing encryption in the backend to key:</p> <!></div></div> <div class="btn svelte-3rk97c"><!></div> <!> <!></div>`);function bd(_,s){le(s,!0);let t=C(""),d=C(!0),i=C(""),m=C(""),g=C(n([])),u=C(!1);Ne(async()=>{S()});async function S(){let N=await Er(),G=await N.json();N.ok?(a(i,n(G.active)),a(m,n(G.active)),a(g,n(G.keys))):a(t,n(G.message)),a(d,!1)}async function E(){a(d,!0),a(u,!1);let N={key_id:e(m)},G=await Sr(N);if(G.ok)a(u,!0);else{let R=await G.json();a(t,n(R.message))}a(d,!1)}var o=yd(),$=c(o),p=l(c($),6),A=l(c(p),2),k=c(A,!0);v(A),v(p);var h=l(p,2),w=l(c(h),2);oe(w,"margin-left","-10px"),Ge(w,21,()=>e(g),wt,(N,G)=>{var R=gd(),F=c(R,!0);v(R),B(()=>Y(F,e(G))),r(N,R)}),v(w),v(h);var y=l(h,2),b=l(c(y),2);kt(b,{get options(){return e(g)},width:"186px",get value(){return e(m)},set value(N){a(m,n(N))}}),v(y),v($);var x=l($,2),f=c(x);Ce(f,{get isLoading(){return e(d)},set isLoading(N){a(d,n(N))},$$events:{click:E},children:(N,G)=>{q();var R=V("MIGRATE");r(N,R)},$$slots:{default:!0}}),v(x);var T=l(x,2);{var L=N=>{var G=fd(),R=c(G,!0);v(G),B(()=>Y(R,e(t))),r(N,G)};O(T,N=>{e(t)&&N(L)})}var D=l(T,2);{var j=N=>{var G=wd();r(N,G)};O(D,N=>{e(u)&&N(j)})}v(o),B(()=>Y(k,e(i))),r(_,o),ne()}var $d=I('<div class="success svelte-10h0sak">Success</div>'),_d=I('<div class="err svelte-10h0sak"> </div>'),kd=I('<div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="desc svelte-10h0sak"><p>Validity for a new password.<br> Not Recently Used denied the last n used passwords.<br> Setting no value at all with disable the given option.</p></div> <div class="row svelte-10h0sak"><!> <!></div> <!> <!> <!>',1),xd=I('<div class="wrapper svelte-10h0sak"><div class="desc svelte-10h0sak"><h3>Password Policy</h3> <p>Configure the password policy.<br> The policy is being applied to all passwords being set from this moment on.</p></div> <!></div>');function Ed(_,s){le(s,!0);const t="160px";let d=C(!1),i=C(""),m=C(!1),g=C(void 0),u=C(void 0),S=C(n({}));const E=He().shape({length_min:yt().required("Min Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),length_max:yt().required("Max Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),not_recently_used:yt().nullable().min(0,"Cannot be lower than 0").max(10,"Cannot be higher than 10"),valid_days:yt().nullable().min(0,"Cannot be lower than 0").max(3650,"Cannot be higher than 3650"),include_digits:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_lower_case:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_upper_case:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_special:yt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32")});Ae(()=>{e(m)&&a(g,n(setTimeout(()=>{a(m,!1)},3e3)))}),Ne(async()=>{if(!e(u)){let w=await ja(),y=await w.json();w.ok?(a(u,n(y)),e(u).length_min=y.length_min||0,e(u).length_max=y.length_max||0,e(u).include_digits=y.include_digits||0,e(u).include_lower_case=y.include_lower_case||0,e(u).include_upper_case=y.include_upper_case||0,e(u).include_special=y.include_special||0,e(u).length_max=y.length_max||0,e(u).valid_days=y.valid_days||0,e(u).not_recently_used=y.not_recently_used||0):a(i,n(y.message))}});function o(w){w.code==="Enter"&&$()}async function $(){if(!await p())return;a(i,""),a(d,!0);let w=e(u);w.not_recently_used===0&&(w.not_recently_used=null),w.valid_days===0&&(w.valid_days=null),w.include_digits===0&&(w.include_digits=null),w.include_lower_case===0&&(w.include_lower_case=null),w.include_upper_case===0&&(w.include_upper_case=null),w.include_special===0&&(w.include_special=null);let y=await Rr(w);if(y.ok)a(m,!0);else{let b=await y.json();a(i,n(b.message))}a(d,!1)}async function p(){try{return a(S,n({})),await E.validate(e(u),{abortEarly:!1}),e(u).length_min=Number.parseInt(e(u).length_min),e(u).length_max=Number.parseInt(e(u).length_max),e(u).include_digits=Number.parseInt(e(u).include_digits),e(u).include_lower_case=Number.parseInt(e(u).include_lower_case),e(u).include_upper_case=Number.parseInt(e(u).include_upper_case),e(u).include_special=Number.parseInt(e(u).include_special),e(u).length_max=Number.parseInt(e(u).length_max),e(u).valid_days=Number.parseInt(e(u).valid_days),e(u).not_recently_used=Number.parseInt(e(u).not_recently_used),e(u).length_max<e(u).length_min?(e(S).length_max="Max Length cannot be lower than Min Length",!1):e(u).include_digits+e(u).include_lower_case+e(u).include_upper_case+e(u).include_special>e(u).length_max?(e(S).length_max="The sum of all includes does not fit into Max Length",!1):!0}catch(w){return a(S,n(Ye(w))),!1}}var A=xd(),k=l(c(A),2);{var h=w=>{var y=kd(),b=ee(y),x=c(b);ie(x,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_min},set value(J){e(u).length_min=J},get error(){return e(S).length_min},set error(J){e(S).length_min=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("MIN LENGTH");r(J,re)},$$slots:{default:!0}});var f=l(x,2);ie(f,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_max},set value(J){e(u).length_max=J},get error(){return e(S).length_max},set error(J){e(S).length_max=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("MAX LENGTH");r(J,re)},$$slots:{default:!0}}),v(b);var T=l(b,2),L=c(T);ie(L,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_lower_case},set value(J){e(u).include_lower_case=J},get error(){return e(S).include_lower_case},set error(J){e(S).include_lower_case=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("INCLUDE LOWERCASE");r(J,re)},$$slots:{default:!0}});var D=l(L,2);ie(D,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_upper_case},set value(J){e(u).include_upper_case=J},get error(){return e(S).include_upper_case},set error(J){e(S).include_upper_case=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("INCLUDE UPPERCASE");r(J,re)},$$slots:{default:!0}}),v(T);var j=l(T,2),N=c(j);ie(N,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_digits},set value(J){e(u).include_digits=J},get error(){return e(S).include_digits},set error(J){e(S).include_digits=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("INCLUDE DIGITS");r(J,re)},$$slots:{default:!0}});var G=l(N,2);ie(G,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_special},set value(J){e(u).include_special=J},get error(){return e(S).include_special},set error(J){e(S).include_special=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("INCLUDE SPECIAL");r(J,re)},$$slots:{default:!0}}),v(j);var R=l(j,4),F=c(R);ie(F,{type:"number",autocomplete:"off",width:t,get value(){return e(u).not_recently_used},set value(J){e(u).not_recently_used=J},get error(){return e(S).not_recently_used},set error(J){e(S).not_recently_used=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("NOT RECENTLY USED");r(J,re)},$$slots:{default:!0}});var M=l(F,2);ie(M,{type:"number",autocomplete:"off",width:t,get value(){return e(u).valid_days},set value(J){e(u).valid_days=J},get error(){return e(S).valid_days},set error(J){e(S).valid_days=J},$$events:{keypress:o,input:p},children:(J,Z)=>{q();var re=V("VALID FOR DAYS");r(J,re)},$$slots:{default:!0}}),v(R);var z=l(R,2);Ce(z,{level:1,width:"4rem",get isLoading(){return e(d)},set isLoading(J){a(d,n(J))},$$events:{click:$},children:(J,Z)=>{q();var re=V("SAVE");r(J,re)},$$slots:{default:!0}});var P=l(z,2);{var Q=J=>{var Z=$d();r(J,Z)};O(P,J=>{e(m)&&J(Q)})}var U=l(P,2);{var K=J=>{var Z=_d(),re=c(Z,!0);v(Z),B(()=>Y(re,e(i))),r(J,Z)};O(U,J=>{e(i)&&J(K)})}r(w,y)};O(k,w=>{e(u)&&w(h)})}v(A),r(_,A),ne()}var Sd=I('<div class="details svelte-2yt27i"><div class="detailsInner svelte-2yt27i"><textarea class="font-mono text svelte-2yt27i"></textarea></div></div>'),Cd=I('<div role="none" class="cert svelte-2yt27i"><div class="data font-mono svelte-2yt27i"> </div> <div class="data right svelte-2yt27i"> </div> <!></div>');function Id(_,s){le(s,!0);let t=C(!1);function d(){if(s.jwk.kty==="OKP")return s.jwk.crv;if(s.jwk.kty==="RSA"){let $;const p=s.jwk.n.length;return p>600?$=4096:p>400?$=3072:$=2048,`RSA ${$}`}return"unknown type"}var i=Cd(),m=c(i),g=c(m,!0);v(m);var u=l(m,2),S=c(u,!0);B(()=>Y(S,d())),v(u);var E=l(u,2);{var o=$=>{var p=Sd(),A=c(p),k=c(A);pa(k),ue(k,"rows",10),ue(k,"cols",40),B(()=>Ks(k,JSON.stringify(s.jwk,null,2))),v(A),v(p),B(()=>ue(k,"name",s.jwk.kid)),ce(7,p,()=>ht),r($,p)};O(E,$=>{e(t)&&$(o)})}v(i),B(()=>Y(g,s.jwk.kid)),Ue("mouseenter",i,()=>a(t,!0)),Ue("mouseleave",i,()=>a(t,!1)),r(_,i),ne()}var Td=I('<div class="success svelte-a4xw46">Success</div>'),Ad=I('<div class="err svelte-a4xw46"> </div>'),Ld=I(`<div class="wrapper svelte-a4xw46"><div class="desc svelte-a4xw46"><h3>Json Web Keys</h3> <p>These are the Json Web Keys (JWKs) used for token singing.</p> <p>You can rotate them and generate a full new set. Depending on your deployment, this could take a few
            seconds.<br> New tokens will always be signed with the new / latest ones. The old keys will be cleaned up automatically,
            when
            there cannot be a token anymore that used the old key to not
            break any current token validation.</p></div> <!> <!> <!> <!></div>`);function Nd(_,s){le(s,!0);let t=C(n([])),d=C(!1),i=C(""),m=C(!1),g=C(void 0);Ae(()=>{e(m)&&a(g,n(setTimeout(()=>{a(m,!1)},3e3)))}),Ne(()=>{e(t).length===0&&u()});async function u(){let w=await hr(),y=await w.json();w.ok?a(t,n([...y.keys])):a(i,n(y.message))}async function S(){a(i,""),a(d,!0);let w=await Wr();if(w.ok)u(),a(m,!0);else{let y=await w.json();a(i,n(y.message))}a(d,!1)}var E=Ld(),o=l(c(E),2);Ge(o,19,()=>e(t),w=>w.kid,(w,y,b)=>{Id(w,{get jwk(){return e(t)[e(b)]},set jwk(x){e(t)[e(b)]=x}})});var $=l(o,2);Ce($,{level:1,get isLoading(){return e(d)},set isLoading(w){a(d,n(w))},$$events:{click:S},children:(w,y)=>{q();var b=V("ROTATE KEYS");r(w,b)},$$slots:{default:!0}});var p=l($,2);{var A=w=>{var y=Td();r(w,y)};O(p,w=>{e(m)&&w(A)})}var k=l(p,2);{var h=w=>{var y=Ad(),b=c(y,!0);v(y),B(()=>Y(b,e(i))),r(w,y)};O(k,w=>{e(i)&&w(h)})}v(E),r(_,E),ne()}var Rd=I('<div class="content"><div class="container svelte-5h65jg"><!> <!></div></div>');function Dd(_){const s=["Password Policy","JWKS","Argon2 Parameter","Encryption Keys"];let t=C(n(s[0]));var d=Rd(),i=c(d),m=c(i);Dt(m,{labels:s,get selected(){return e(t)},set selected(E){a(t,n(E))}});var g=l(m,2);{var u=E=>{Ed(E,{})},S=E=>{var o=me(),$=ee(o);{var p=k=>{Nd(k,{})},A=k=>{var h=me(),w=ee(h);{var y=x=>{md(x,{})},b=x=>{var f=me(),T=ee(f);{var L=D=>{bd(D,{})};O(T,D=>{e(t)==="Encryption Keys"&&D(L)},!0)}r(x,f)};O(w,x=>{e(t)==="Argon2 Parameter"?x(y):x(b,!1)},!0)}r(k,h)};O($,k=>{e(t)==="JWKS"?k(p):k(A,!1)},!0)}r(E,o)};O(g,E=>{e(t)==="Password Policy"?E(u):E(S,!1)})}v(i),v(d),r(_,d)}var jd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"></path></svg>');function Od(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=jd();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Md=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>');function zd(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Md();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Ud=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"></path></svg>');function Pd(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Ud();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var qd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"></path></svg>');function Wd(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=qd();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Gd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>');function Kd(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Gd();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Bd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path></svg>');function vs(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Bd();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Fd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"></path></svg>');function Vd(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Fd();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Jd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z"></path></svg>');function Yd(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Jd();ue(i,"stroke-width",1.5),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Hd=Xe(`<svg width="100%" height="100%" viewBox="0 0 512 138" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,0,-11)"><g transform="matrix(1,0,0,1,0,-176)"><g transform="matrix(0.920325,0,0,1.84151,45.9279,26.459)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:rgb(4,7,11);"></rect></g><g transform="matrix(1.93472,0,0,1.82732,8.35618,28.7533)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(4,7,11);stroke:rgb(4,7,11);stroke-width:1.06px;"></rect></g><g transform="matrix(1.82732,0,0,1.82732,-160.822,70.1806)"><g transform="matrix(72,0,0,72,227.174,123.417)"></g><text x="128.982px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">r<tspan x="152.994px 188.537px " y="123.417px 123.417px ">au</tspan></text></g><g transform="matrix(1,0,0,1.01617,-1.42109e-14,-5.24492)"><path d="M440.936,322.643L439.204,324.266L255.482,324.266L255.482,305.721L440.936,305.721L440.936,322.643Z" style="fill:url(#_Linear1);"></path></g><g transform="matrix(0.920191,0,0,1.84121,46.2464,-91.3383)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:url(#_Linear2);"></rect></g><g transform="matrix(1.97598,0,0,1.84619,190.187,26.062)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(43,65,107);"></rect></g><path d="M439.204,187.734L440.557,189.007L440.557,206.279L256,206.279L256,187.734L439.204,187.734Z" style="fill:rgb(43,65,107);"></path><g transform="matrix(1.82732,0,0,1.82732,-154.661,70.1806)"><g transform="matrix(72,0,0,72,323.045,123.417)"></g><text x="226.646px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">th<tspan x="288.943px " y="123.417px ">y</tspan></text></g><g transform="matrix(2,0,0,2,0,0)"><path d="M219.602,93.867L256,128L219.602,162.133L219.602,93.867Z" style="fill:rgb(43,65,107);"></path></g><g transform="matrix(2,0,0,1.95739,0,3.99997)"><path d="M36.398,93.867L0,93.867L35.908,128.524L0,163.619L36.398,163.619" style="fill:rgb(4,7,11);"></path></g></g></g><defs><linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(185.454,0,0,18.5443,255.482,314.994)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient><linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(200.517,0,0,10.1483,27.7414,156.645)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient></defs></svg>`);function Xd(_){var s=Hd();r(_,s)}var Zd=I(`<div class="content"><div class="container svelte-x4sug2"><h2>Documentation</h2> <p class="svelte-x4sug2">For general documentation about Rauthy itself, you should take a look at the <a href="https://sebadob.github.io/rauthy/" target="_blank" class="svelte-x4sug2">Rauthy Book</a></p> <p class="svelte-x4sug2">If you want to integrate an external application and use Rauthy's REST API, take a look at the <a href="/docs/v1/swagger-ui/" target="_blank" class="svelte-x4sug2">Swagger UI</a><br> <b>Note:</b> Depending on the backend configuration, the Swagger UI may not be exposed publicly at this point.
            It is however by default available via the internal <code>/metrics</code> HTTP server to not expose any information.</p> <p class="svelte-x4sug2">The source code can be found in <a href="https://github.com/sebadob/rauthy" target="_blank" class="svelte-x4sug2">Github</a></p></div></div>`);function Qd(_){var s=Zd();r(_,s)}var ec=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"></path></svg>');function tc(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=ec();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var ac=I('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),sc=I('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),rc=I('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),ic=I('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"><!></div>',1),lc=I('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),nc=I('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"></div> <div class="col-text"> </div>',1),oc=I('<div class="col-typ svelte-1aid5cl"> </div>'),vc=I('<div class="row svelte-1aid5cl"><div class="col-ts svelte-1aid5cl"> </div> <!></div>'),dc=I(" <br>",1),cc=I("<br> <!> ",1),uc=I(" <br> ",1),hc=I("<br> <br> <!>",1),pc=I("<br> <br> ",1),mc=I("<br> ",1),gc=I(" <br> <!>",1),fc=I('<div role="contentinfo"><!></div>');function ds(_,s){le(s,!0);let t=W(s,"collapsed",3,!0),d=C("event"),i=C(!1),m=Ke(()=>!t()&&!s.wide),g=Ke(()=>t()&&!s.wide&&!e(i)),u=Ke(()=>!t()&&s.wide),S=Ke(()=>e(g)?".5rem":".33rem");Ne(()=>{new Date().getTime()-1e3*30<s.event.timestamp&&(setTimeout(()=>{a(d,"eventNew")},100),setTimeout(()=>{a(d,"event")},2500))});function E(){switch(s.event.level){case"test":return"T";case"info":return"I";case"notice":return"N";case"warning":return"W";case"critical":return"C";default:return"U"}}function o(){return ut(s.event.timestamp/1e3)}var $=fc();const p=Ke(()=>`${e(S)} solid ${Wt(s.event.level)}`);var A=c($);{var k=w=>{var y=vc(),b=c(y),x=c(b,!0);B(()=>Y(x,o())),v(b);var f=l(b,2);{var T=D=>{var j=ac(),N=ee(j),G=c(N,!0);v(N);var R=l(N,2),F=c(R,!0);v(R);var M=l(R,2),z=c(M,!0);v(M),B(()=>{Y(G,s.event.typ),Y(F,s.event.ip),Y(z,s.event.text)}),r(D,j)},L=D=>{var j=me(),N=ee(j);{var G=F=>{var M=sc(),z=ee(M),P=c(z,!0);v(z);var Q=l(z,2),U=c(Q,!0);v(Q),B(()=>{Y(P,`${s.event.typ}: ${s.event.data}`),Y(U,s.event.ip)}),r(F,M)},R=F=>{var M=me(),z=ee(M);{var P=U=>{var K=rc(),J=ee(K),Z=c(J,!0);v(J);var re=l(J,2),ve=c(re,!0);v(re),B(()=>{Y(Z,s.event.typ),Y(ve,s.event.ip||"")}),r(U,K)},Q=U=>{var K=me(),J=ee(K);{var Z=ve=>{var be=ic(),$e=ee(be),pe=c($e,!0);v($e);var je=l($e,2),fe=c(je,!0);v(je);var de=l(je,2),we=c(de);Ga(we,()=>s.event.text.replace("@","<wbr/>@")),v(de),B(()=>{Y(pe,s.event.typ),Y(fe,s.event.ip||"")}),r(ve,be)},re=ve=>{var be=me(),$e=ee(be);{var pe=fe=>{var de=lc(),we=ee(de),ye=c(we,!0);v(we);var Oe=l(we,2),Ie=c(Oe,!0);v(Oe);var xe=l(Oe,2),Re=c(xe,!0);B(()=>Y(Re,`Expires: ${ut(s.event.data)}`)),v(xe),B(()=>{Y(ye,s.event.typ),Y(Ie,s.event.ip)}),r(fe,de)},je=fe=>{var de=me(),we=ee(de);{var ye=Ie=>{var xe=nc(),Re=ee(xe),H=c(Re,!0);v(Re);var Se=l(Re,4),ge=c(Se,!0);v(Se),B(()=>{Y(H,s.event.typ),Y(ge,s.event.text)}),r(Ie,xe)},Oe=Ie=>{var xe=oc(),Re=c(xe,!0);v(xe),B(()=>Y(Re,s.event.typ)),r(Ie,xe)};O(we,Ie=>{s.event.typ==="RauthyStarted"||s.event.typ==="RauthyHealthy"||s.event.typ==="RauthyUnhealthy"?Ie(ye):Ie(Oe,!1)},!0)}r(fe,de)};O($e,fe=>{s.event.typ==="IpBlacklisted"?fe(pe):fe(je,!1)},!0)}r(ve,be)};O(J,ve=>{s.event.typ==="NewRauthyAdmin"||s.event.typ==="NewUserRegistered"||s.event.typ==="UserPasswordReset"||s.event.typ==="UserEmailChange"?ve(Z):ve(re,!1)},!0)}r(U,K)};O(z,U=>{s.event.typ==="SecretsMigrated"?U(P):U(Q,!1)},!0)}r(F,M)};O(N,F=>{s.event.typ==="InvalidLogins"?F(G):F(R,!1)},!0)}r(D,j)};O(f,D=>{s.event.typ==="Test"?D(T):D(L,!1)})}v(y),r(w,y)},h=w=>{var y=me(),b=ee(y);{var x=T=>{var L=gc(),D=ee(L,!0);B(()=>Y(D,o()));var j=l(D,2),N=l(j);{var G=F=>{var M=cc(),z=l(ee(M),2);{var P=U=>{var K=dc(),J=ee(K);q(),B(()=>Y(J,`${s.event.text??""} `)),r(U,K)};O(z,U=>{s.event.text&&U(P)})}var Q=l(z);B(()=>Y(Q,` ${s.event.ip??""}`)),r(F,M)},R=F=>{var M=me(),z=ee(M);{var P=U=>{var K=uc(),J=ee(K,!0),Z=l(J,2);B(()=>{Y(J,`: ${s.event.data}`),Y(Z,` ${s.event.ip??""}`)}),r(U,K)},Q=U=>{var K=me(),J=ee(K);{var Z=ve=>{var be=V();B(()=>Y(be,s.event.ip)),r(ve,be)},re=ve=>{var be=me(),$e=ee(be);{var pe=fe=>{var de=hc(),we=l(ee(de)),ye=l(we,3);Ga(ye,()=>s.event.text.replace("@","<wbr/>@")),B(()=>Y(we,` ${(s.event.ip||"")??""} `)),r(fe,de)},je=fe=>{var de=me(),we=ee(de);{var ye=Ie=>{var xe=pc(),Re=l(ee(xe)),H=l(Re,2);B(()=>Y(H,` ${ut(s.event.data)??""}`)),B(()=>Y(Re,` ${s.event.ip??""} `)),r(Ie,xe)},Oe=Ie=>{var xe=me(),Re=ee(xe);{var H=Se=>{var ge=mc(),Pe=l(ee(ge));B(()=>Y(Pe,` ${s.event.text??""}`)),r(Se,ge)};O(Re,Se=>{(s.event.typ==="RauthyStarted"||s.event.typ==="RauthyHealthy"||s.event.typ==="RauthyUnhealthy")&&Se(H)},!0)}r(Ie,xe)};O(we,Ie=>{s.event.typ==="IpBlacklisted"?Ie(ye):Ie(Oe,!1)},!0)}r(fe,de)};O($e,fe=>{s.event.typ==="NewRauthyAdmin"||s.event.typ==="NewUserRegistered"||s.event.typ==="UserPasswordReset"||s.event.typ==="UserEmailChange"?fe(pe):fe(je,!1)},!0)}r(ve,be)};O(J,ve=>{s.event.typ==="SecretsMigrated"?ve(Z):ve(re,!1)},!0)}r(U,K)};O(z,U=>{s.event.typ==="InvalidLogins"?U(P):U(Q,!1)},!0)}r(F,M)};O(N,F=>{s.event.typ==="Test"?F(G):F(R,!1)})}B(()=>Y(j,` ${s.event.typ??""} `)),r(T,L)},f=T=>{var L=V();B(()=>Y(L,E())),r(T,L)};O(b,T=>{e(m)?T(x):T(f,!1)},!0)}r(w,y)};O(A,w=>{e(u)?w(k):w(h,!1)})}v($),B(()=>{Nt($,Rt(e(d)),"svelte-1aid5cl"),Et($,"showCollapsed",e(g)),oe($,"border-left",e(p))}),Ue("mouseenter",$,()=>a(i,!0)),Ue("mouseleave",$,()=>a(i,!1)),r(_,$),ne()}var wc=I("<div><div><b>Legend</b></div> <div><div>TEST</div> <div>INFO</div> <div>NOTICE</div> <div>WARNING</div> <div>CRITICAL</div></div></div>");function yc(_,s){le(s,!0);var t=wc(),d=c(t),i=l(d,2),m=c(i);const g=Ke(()=>`.33rem solid ${Wt("test")}`);var u=l(m,2);const S=Ke(()=>`.33rem solid ${Wt("info")}`);var E=l(u,2);const o=Ke(()=>`.33rem solid ${Wt("notice")}`);var $=l(E,2);const p=Ke(()=>`.33rem solid ${Wt("warning")}`);var A=l($,2);const k=Ke(()=>`.33rem solid ${Wt("critical")}`);v(i),v(t),B(()=>{Nt(d,Rt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(d,"border-left",".33rem solid var(--col-bg)"),Nt(i,Rt(s.wide?"legendWide":"legend"),"svelte-1imwz5t"),Nt(m,Rt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(m,"border-left",e(g)),Nt(u,Rt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(u,"border-left",e(S)),Nt(E,Rt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(E,"border-left",e(o)),Nt($,Rt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe($,"border-left",e(p)),Nt(A,Rt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(A,"border-left",e(k))}),r(_,t),ne()}var bc=I('<div class="headerWideInner svelte-t1qwu8"><b>Events</b> <!></div>'),$c=I("<b>Events</b>"),_c=I("<!> <!>",1),kc=I('<div class="opts svelte-t1qwu8"><!></div>'),xc=I('<div role="contentinfo" id="events" class="svelte-t1qwu8"><div class="upper"><div class="header svelte-t1qwu8"><!></div> <!> <div></div></div> <!></div>');function Ec(_,s){le(s,!0);let t=W(s,"collapsed",3,!0),d=W(s,"wide",15),i=50,m=C(void 0),g=C(n([])),u=C(n([])),S=C(void 0),E=C(!1);Ne(async()=>{a(S,n(await o()))});async function o(){return localStorage.getItem("eventLevel")||"Info"}async function $(R){localStorage.setItem("eventLevel",R)}async function p(){await Ms()}function A(){var R;console.log("opening SSE stream"),a(m,n(new EventSource(`/auth/v1/events/stream?latest=${i}&level=${((R=e(S))==null?void 0:R.toLowerCase())||"info"}`))),e(m).onopen=()=>{console.log("SSE Events Stream opened"),a(g,n([]))},e(m).onerror=()=>{console.error("SSE Events Stream closed")},e(m).onmessage=F=>{if(F.data){let M=JSON.parse(F.data);a(g,n([M,...e(g).slice(-499)]))}}}let k=Ke(()=>!t()&&!d()||e(E)),h=Ke(()=>t()&&!d()&&!e(E)),w=Ke(()=>!t()&&d());Ae(()=>{if(e(g))switch(e(S)){case"Info":a(u,n(e(g)));break;case"Notice":a(u,n(e(g).filter(R=>R.typ==="Test"||R.level==="notice"||R.level==="warning"||R.level==="critical")));break;case"Warning":a(u,n(e(g).filter(R=>R.typ==="Test"||R.level==="warning"||R.level==="critical")));break;case"Critical":a(u,n(e(g).filter(R=>R.typ==="Test"||R.level==="critical")));break}}),Ae(()=>{e(S)&&($(e(S)),e(m)&&e(m).readyState!==2&&e(m).close(),A())});var y=xc(),b=c(y),x=c(b),f=c(x);{var T=R=>{var F=_c(),M=ee(F);{var z=U=>{var K=bc(),J=l(c(K),2);kt(J,{options:da,get value(){return e(S)},set value(Z){a(S,n(Z))}}),v(K),r(U,K)},P=U=>{var K=$c();r(U,K)};O(M,U=>{e(w)?U(z):U(P,!1)})}var Q=l(M,2);Ce(Q,{level:3,$$events:{click:p},children:(U,K)=>{q();var J=V("TEST");r(U,J)},$$slots:{default:!0}}),r(R,F)};O(f,R=>{e(h)||R(T)})}v(x);var L=l(x,2);{var D=R=>{var F=kc(),M=c(F);kt(M,{options:da,get value(){return e(S)},set value(z){a(S,n(z))}}),v(F),r(R,F)};O(L,R=>{e(w)||R(D)})}var j=l(L,2);Ge(j,23,()=>e(u),R=>R.id,(R,F,M)=>{var z=Ke(()=>t()&&!e(E));ds(R,{get collapsed(){return e(z)},get event(){return e(u)[e(M)]},set event(P){e(u)[e(M)]=P},get wide(){return d()},set wide(P){d(P)}})}),v(j),v(b);var N=l(b,2);{var G=R=>{yc(R,{get wide(){return d()},set wide(F){d(F)}})};O(N,R=>{(!t()||e(E))&&R(G)})}v(y),B(()=>{Et(y,"widthDefault",e(k)),Et(y,"widthCollapsed",e(h)),Et(y,"widthWide",e(w)),Nt(j,Rt(e(w)?"dataWide":e(h)?"dataCollapsed":"data"),"svelte-t1qwu8")}),Ue("mouseenter",y,()=>a(E,!0)),Ue("mouseleave",y,()=>a(E,!1)),r(_,y),ne()}var Sc=I('<div class="addNewInputs svelte-1fhw572"><!> <!> <div class="saveBtn svelte-1fhw572"><!></div> <div class="err svelte-1fhw572"> </div></div>'),Cc=I('<div class="svelte-1fhw572">No blacklisted IPs</div>'),Ic=(_,s,t)=>s(e(t).ip),Tc=I('<div role="button" tabindex="0" class="delete svelte-1fhw572"><!></div>'),Ac=I('<div class="blacklisted svelte-1fhw572"><div class="ip svelte-1fhw572"> </div> <div class="exp svelte-1fhw572"> </div> <!></div>'),Lc=I(' <div class="content"><div class="top svelte-1fhw572"><!> <div class="addNew svelte-1fhw572"><!></div></div> <!> <div id="blacklist" class="svelte-1fhw572"><!></div> <!> <div style="height: 20px"></div></div>',1);function Nc(_,s){le(s,!0);let t=C(""),d=C(""),i=C(n([])),m=C(n([])),g=C(n([])),u=C(!1),S=n({ip:"",exp:""}),E=C(n({}));const o=He().shape({ip:he().required("IP is required").matches(zs,"Invalid IPv4")}),$=new Date().toISOString().split(".")[0],p=[{label:"IP",callback:(U,K)=>U.ip.includes(K)}];let A=[{label:"IP",callback:(U,K)=>U.ip.localeCompare(K.ip)}];Ae(()=>{e(u)&&(a(d,""),S.exp=new Date().toISOString().split(".")[0])}),Ne(()=>{k()});async function k(){let U=await ii(),K=await U.json();U.ok?a(i,n(K.ips)):a(t,n(K.message))}async function h(){if(a(d,""),!await y())return;let U=zt(S.exp);if(!U){a(d,"Invalid Date Input: User Expires");return}let K={ip:S.ip,exp:U},J=await li(K);if(J.ok)a(u,!1),S.ip="",await k();else{let Z=await J.json();a(d,n(Z.message))}}async function w(U){(await ni(U)).ok&&await k()}async function y(){try{return await o.validate(S,{abortEarly:!1}),a(E,n({})),!0}catch(U){return a(E,n(Ye(U))),!1}}q();var b=Lc(),x=ee(b),f=l(x),T=c(f),L=c(T);Lt(L,{get items(){return e(i)},searchOptions:p,orderOptions:A,get resItems(){return e(m)},set resItems(U){a(m,n(U))}});var D=l(L,2),j=c(D);Ce(j,{level:3,$$events:{click:()=>a(u,!e(u))},children:(U,K)=>{q();var J=V("BLACKLIST IP");r(U,J)},$$slots:{default:!0}}),v(D),v(T);var N=l(T,2);{var G=U=>{var K=Sc(),J=c(K);ie(J,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return S.ip},set value(pe){S.ip=pe},get error(){return e(E).ip},set error(pe){e(E).ip=pe},children:(pe,je)=>{q();var fe=V("IP");r(pe,fe)},$$slots:{default:!0}});var Z=l(J,2);ie(Z,{type:"datetime-local",step:"60",width:"18rem",min:$,max:"2099-01-01T00:00",get value(){return S.exp},set value(pe){S.exp=pe},children:(pe,je)=>{q();var fe=V("EXPIRES");r(pe,fe)},$$slots:{default:!0}});var re=l(Z,2),ve=c(re);Ce(ve,{level:1,$$events:{click:h},children:(pe,je)=>{q();var fe=V("SAVE");r(pe,fe)},$$slots:{default:!0}}),v(re);var be=l(re,2),$e=c(be,!0);v(be),v(K),B(()=>Y($e,e(d))),ce(3,K,()=>_e),r(U,K)};O(N,U=>{e(u)&&U(G)})}var R=l(N,2),F=c(R);{var M=U=>{var K=Cc();r(U,K)},z=U=>{var K=me(),J=ee(K);Ge(J,17,()=>e(g),Z=>Z.ip,(Z,re)=>{var ve=Ac(),be=c(ve),$e=c(be,!0);v(be);var pe=l(be,2),je=c(pe,!0);B(()=>Y(je,ut(e(re).exp))),v(pe);var fe=l(pe,2);Ze(fe,{text:"Delete IP",children:(de,we)=>{var ye=Tc();ye.__click=[Ic,w,re];var Oe=c(ye);Qt(Oe,{color:"var(--col-err)"}),v(ye),Ue("keypress",ye,()=>w(e(re).ip)),r(de,ye)},$$slots:{default:!0}}),v(ve),B(()=>Y($e,e(re).ip)),r(Z,ve)}),r(U,K)};O(F,U=>{e(i).length===0?U(M):U(z,!1)})}v(R);var P=l(R,2);{var Q=U=>{jt(U,{get items(){return e(m)},set items(K){a(m,n(K))},get resItems(){return e(g)},set resItems(K){a(g,n(K))}})};O(P,U=>{e(i).length>0&&U(Q)})}q(2),v(f),B(()=>Y(x,`${e(t)??""} `)),r(_,b),ne()}pt(["click"]);var Rc=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"></path></svg>');function Dc(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=Rc();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var jc=I('<div role="button" tabindex="0" class="cell pointer svelte-lgl56a"> </div>'),Oc=I('<div class="cell svelte-lgl56a"><input class="pointer svelte-lgl56a" type="checkbox"></div>'),Mc=I('<div class="mr svelte-lgl56a"><div role="button" tabindex="0" class="label pointer svelte-lgl56a"> </div> <!></div>'),zc=I('<div class="matrix svelte-lgl56a"><b>Access Rights</b> <div class="mr svelte-lgl56a"><div class="label svelte-lgl56a"></div> <!></div> <!></div>');function cs(_,s){le(s,!0);let t=W(s,"accessMatrix",15);W(s,"finalize",15)(E);const d=["Blacklist","Clients","Events","Generic","Groups","Roles","Secrets","Sessions","Scopes","UserAttributes","Users"],i=["create","read","update","delete"];let m=new Array(d.length).fill(!1),g=new Array(i.length).fill(!1);Ne(()=>{var y;u(),(y=s.apiKey)!=null&&y.access&&S()});function u(){let y=new Array(d.length);for(let b=0;b<d.length;b++){y[b]={group:d[b]};for(let x of i)y[b][x]=!1}t(y)}function S(){for(let y of s.apiKey.access){let b=d.findIndex(x=>x===y.group);for(let x of y.access_rights){let f=i.findIndex(T=>T===x);t(t()[b][i[f]]=!0,!0)}}}function E(){let y=[];for(let b=0;b<d.length;b++){let x=[];for(let f of i)t()[b][f]&&x.push(f);x.length>0&&y.push({group:d[b],access_rights:x})}return y}function o(y){m[y]=!m[y];const b=m[y];let x=t()[y];for(let f=0;f<i.length;f++)for(let T of Object.keys(x))T!=="group"&&(x[T]=b);t(t()[y]=x,!0)}function $(y){g[y]=!g[y];const b=g[y];for(let x=0;x<d.length;x++)t(t()[x][i[y]]=b,!0)}var p=zc(),A=l(c(p),2),k=l(c(A),2);Ge(k,17,()=>i,wt,(y,b,x)=>{var f=jc(),T=Ke(()=>$.bind(this,x));f.__click=function(...j){var N;(N=e(T))==null||N.apply(this,j)};var L=Ke(()=>$.bind(this,x)),D=c(f,!0);v(f),B(()=>Y(D,i[x])),Ue("keypress",f,function(...j){var N;(N=e(L))==null||N.apply(this,j)}),r(y,f)}),v(A);var h=l(A,2);{var w=y=>{var b=me(),x=ee(b);Ge(x,17,()=>d,wt,(f,T,L)=>{var D=Mc(),j=c(D),N=Ke(()=>o.bind(this,L));j.__click=function(...M){var z;(z=e(N))==null||z.apply(this,M)};var G=Ke(()=>o.bind(this,L)),R=c(j,!0);v(j);var F=l(j,2);Ge(F,17,()=>i,wt,(M,z)=>{var P=Oc(),Q=c(P);nt(Q),v(P),Vs(Q,()=>t()[L][e(z)],U=>t(t()[L][e(z)]=U,!0)),r(M,P)}),v(D),B(()=>Y(R,d[L])),Ue("keypress",j,function(...M){var z;(z=e(G))==null||z.apply(this,M)}),r(f,D)}),r(y,b)};O(h,y=>{t()&&y(w)})}return v(p),r(_,p),ne({finalizeMatrix:E})}pt(["click"]);var Uc=I("<div><!></div>"),Pc=I('<div class="container svelte-ubtepy"><!> <div class="switch svelte-ubtepy">Key Expires: <!></div> <!> <!> <div class="saveBtn svelte-ubtepy"><!></div> <div class="err svelte-ubtepy"> </div></div>');function qc(_,s){le(s,!0);const t=new Date().toISOString().split(".")[0];let d=W(s,"apiKeys",19,()=>[]),i=W(s,"onSave",3,()=>{}),m=C(""),g=C(!1),u=C(void 0),S=C(void 0),E=n({name:"",exp:""}),o=C(n({}));const $=He().shape({name:he().required("Name is required").min(2).max(24).matches(Us,"Format: [a-zA-Z0-9_/-]{2,24}")});Ae(()=>{e(g)&&(E.exp=new Date().toISOString().split(".")[0])});async function p(){if(a(m,""),!await A())return;let N={name:E.name,access:e(u)()};if(N.access.length===0){a(m,"Grant the new API Key at least one permission");return}if(e(g)){let R=zt(E.exp);if(!R){a(m,"Invalid Date Input: User Expires");return}N.exp=R}let G=await ti(N);if(G.ok)i()();else{let R=await G.json();a(m,n(R.message))}}async function A(){try{await $.validate(E,{abortEarly:!1}),a(o,n({}))}catch(N){return a(o,n(Ye(N))),!1}for(let N of d())if(N.name===E.name)return e(o).name="Name already exists",!1;return!0}var k=Pc(),h=c(k);ie(h,{width:"18rem",autocomplete:"off",placeholder:"Name",get value(){return E.name},set value(N){E.name=N},get error(){return e(o).name},set error(N){e(o).name=N},children:(N,G)=>{q();var R=V("NAME");r(N,R)},$$slots:{default:!0}});var w=l(h,2),y=l(c(w));Ve(y,{get selected(){return e(g)},set selected(N){a(g,n(N))}}),v(w);var b=l(w,2);{var x=N=>{var G=Uc(),R=c(G);ie(R,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return E.exp},set value(F){E.exp=F},children:(F,M)=>{q();var z=V("EXPIRES");r(F,z)},$$slots:{default:!0}}),v(G),ce(3,G,()=>_e),r(N,G)};O(b,N=>{e(g)&&N(x)})}var f=l(b,2);cs(f,{get accessMatrix(){return e(S)},set accessMatrix(N){a(S,n(N))},get finalize(){return e(u)},set finalize(N){a(u,n(N))}});var T=l(f,2),L=c(T);Ce(L,{level:1,$$events:{click:p},children:(N,G)=>{q();var R=V("SAVE");r(N,R)},$$slots:{default:!0}}),v(T);var D=l(T,2),j=c(D,!0);v(D),v(k),B(()=>Y(j,e(m))),r(_,k),ne()}var Wc=I("<div><!></div>"),Gc=I('<div class="success svelte-1a3jnb3">Success</div>'),Kc=I('<div class="mainErr err svelte-1a3jnb3"> </div>'),Bc=I('<div class="container svelte-1a3jnb3"><div class="unit svelte-1a3jnb3"><div class="label svelte-1a3jnb3">Name</div> <div class="value svelte-1a3jnb3"> </div></div> <div class="switch svelte-1a3jnb3">Key Expires: <!></div> <!> <!> <!> <!> <!></div>');function Fc(_,s){le(s,!0);const t=new Date().toISOString().split(".")[0];let d=W(s,"apiKey",27,()=>n({})),i=C(""),m=C(!1),g=C(void 0),u=C(!!d().expires),S=C(void 0),E=C(void 0);Ae(()=>{e(m)&&a(g,n(setTimeout(()=>{a(m,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(g)));let o=n({exp:""});Ae(()=>{e(u)&&(o.exp=new Date().toISOString().split(".")[0])});async function $(){a(i,"");let G={name:d().name,access:e(E)()};if(G.access.length===0){a(i,"Grant the API Key at least one permission");return}if(e(u)){let F=zt(o.exp);if(!F){a(i,"Invalid Date Input: User Expires");return}G.exp=F}let R=await ai(G);if(R.ok)s.onSave(),a(m,!0);else{let F=await R.json();a(i,n(F.message))}}var p=Bc(),A=c(p),k=l(c(A),2),h=c(k,!0);v(k),v(A);var w=l(A,2),y=l(c(w));Ve(y,{get selected(){return e(u)},set selected(G){a(u,n(G))}}),v(w);var b=l(w,2);{var x=G=>{var R=Wc(),F=c(R);ie(F,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return o.exp},set value(M){o.exp=M},children:(M,z)=>{q();var P=V("EXPIRES");r(M,P)},$$slots:{default:!0}}),v(R),ce(3,R,()=>_e),r(G,R)};O(b,G=>{e(u)&&G(x)})}var f=l(b,2);cs(f,{get apiKey(){return d()},get accessMatrix(){return e(S)},set accessMatrix(G){a(S,n(G))},get finalize(){return e(E)},set finalize(G){a(E,n(G))}});var T=l(f,2);Ce(T,{level:1,width:"4rem",$$events:{click:$},children:(G,R)=>{q();var F=V("SAVE");r(G,F)},$$slots:{default:!0}});var L=l(T,2);{var D=G=>{var R=Gc();r(G,R)};O(L,G=>{e(m)&&G(D)})}var j=l(L,2);{var N=G=>{var R=Kc(),F=c(R,!0);v(R),B(()=>Y(F,e(i))),r(G,R)};O(j,G=>{e(i)&&G(N)})}v(p),B(()=>Y(h,d().name)),r(_,p),ne()}var Vc=I('<div class="err svelte-1jljqe9"> </div>'),Jc=I('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this ApiKey?</div> <!> <!></div>');function Yc(_,s){le(s,!0);let t=W(s,"apiKey",19,()=>({})),d=C("");async function i(){a(d,"");let E=await si(t().name);if(E.ok)s.onSave();else{let o=await E.json();a(d,n(o.message))}}var m=Jc(),g=l(c(m),2);Ce(g,{level:1,$$events:{click:i},children:(E,o)=>{q();var $=V("DELETE");r(E,$)},$$slots:{default:!0}});var u=l(g,2);{var S=E=>{var o=Vc(),$=c(o,!0);v(o),B(()=>Y($,e(d))),r(E,o)};O(u,E=>{e(d)&&E(S)})}v(m),r(_,m),ne()}var Hc=I('<div><div class="iconsOuter svelte-s24qr4"><div class="iconsInner svelte-s24qr4"><div role="button" tabindex="0" class="show svelte-s24qr4"><!></div> <div role="button" tabindex="0"><!></div></div></div> <textarea></textarea></div>');function us(_,s){le(s,!0);let t=W(s,"value",3,""),d=W(s,"rows",3,10),i=W(s,"cols",3,60),m=W(s,"name",3,"default"),g=W(s,"show",15,!1),u=W(s,"width",3,"40rem"),S=Jt(s,["$$slots","$$events","$$legacy","value","rows","cols","name","show","width"]),E=C(""),o=C("");Ae(()=>{g()?a(o,t()):a(o,n(e(E)))}),Ne(()=>{for(let j=0;j<t().length;j++)a(E,e(E)+"*");a(o,n(e(E)))});function $(){navigator.clipboard.writeText(t())}function p(){g(!g())}var A=Hc(),k=c(A),h=c(k),w=c(h);w.__click=p;var y=c(w);{var b=j=>{Va(j,{width:22})},x=j=>{Fa(j,{width:22})};O(y,j=>{g()?j(b):j(x,!1)})}v(w);var f=l(w,2);f.__click=$;var T=c(f);Zs(T,{}),v(f),v(h),v(k);var L=l(k,2);pa(L);let D;v(A),B(()=>{oe(A,"width",`${u()}`),D=ha(L,D,{disabled:!0,name:m(),rows:d(),cols:i(),...S},"svelte-s24qr4"),oe(L,"width",`${u()}`),oe(L,"padding-right","2.75rem")}),Ue("keypress",w,p),Ue("keypress",f,$),dt(L,()=>e(o),j=>a(o,j)),r(_,A),ne()}pt(["click"]);var Xc=I(`<div class="secret font-mono svelte-1vixcxf"><!></div> <p class="svelte-1vixcxf">An API Key must be provided in the HTTP <span class="headerCodeSmall svelte-1vixcxf"><code>Authorization</code></span> header in the following format:</p> <p class="svelte-1vixcxf"><span class="headerCode svelte-1vixcxf"><b><code>API-Key YourSecretApiKeyHere</code></b></span></p> <p class="svelte-1vixcxf">You can use the following <code>curl</code> request to test your new Key:</p> <!> <p class="svelte-1vixcxf">If you don't have <code>jq</code> installed and the above fails:</p> <!>`,1),Zc=I(`<div class="container svelte-1vixcxf"><p class="svelte-1vixcxf">You Can generate a new secret for this API Key here.</p> <p class="svelte-1vixcxf">You will only see this secret once after the generation.
        When a new one has been generated, the old secret will be overridden permanently.
        This operation cannot be reverted!</p> <!> <!> <div class="err svelte-1vixcxf"> </div></div>`);function Qc(_,s){le(s,!0);let t=C(""),d=C(""),i=C(""),m=C("");async function g(){let k=await ri(s.apiKey.name);if(k.ok)a(d,n(await k.text())),a(i,`curl -s -H 'Authorization: API-Key ${e(d)}' ${window.location.origin}/auth/v1/api_keys/${s.apiKey.name}/test`),a(m,`${e(i)} | jq`);else{let h=await k.json();a(t,n(h.message))}}var u=Zc(),S=l(c(u),4),E=Ke(()=>e(d)?3:1);Ce(S,{get level(){return e(E)},width:"130px",$$events:{click:g},children:(k,h)=>{q();var w=V("GENERATE NEW");r(k,w)},$$slots:{default:!0}});var o=l(S,2);{var $=k=>{var h=Xc(),w=ee(h),y=c(w);Gt(y,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(d)},set value(f){a(d,n(f))},children:(f,T)=>{q();var L=V("API KEY");r(f,L)},$$slots:{default:!0}}),v(w);var b=l(w,8);us(b,{name:"id",rows:3,get value(){return e(m)}});var x=l(b,4);us(x,{name:"id",rows:3,get value(){return e(i)}}),ce(3,w,()=>_e),r(k,h)};O(o,k=>{e(d)&&k($)})}var p=l(o,2),A=c(p,!0);v(p),v(u),B(()=>Y(A,e(t))),r(_,u),ne()}var eu=I('<div class="data svelte-115hohv"> </div>'),tu=I('<div class="header svelte-115hohv"><div class="data svelte-115hohv"> </div> <!></div>'),au=I("<div><!></div>"),su=I("<div><!></div>"),ru=I("<div><!></div>"),iu=I("<div><!> <!></div>");function lu(_,s){le(s,!0);let t=W(s,"apiKey",31,()=>n({})),d=W(s,"onSave",11,()=>{}),i=C(void 0);const m=["Config","Secret","Delete"];let g=C(n(m[0]));const u=200,S=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=tu(),p=c($),A=c(p,!0);v(p);var k=l(p,2);{var h=w=>{Ze(w,{text:"Expiry",children:(y,b)=>{var x=eu(),f=c(x,!0);B(()=>Y(f,ut(t().expires))),v(x),r(y,x)},$$slots:{default:!0}})};O(k,w=>{t().expires&&w(h)})}v($),B(()=>Y(A,t().name)),r(o,$)},body:o=>{var $=iu(),p=c($);Dt(p,{labels:m,get selected(){return e(g)},set selected(w){a(g,n(w))}});var A=l(p,2);{var k=w=>{var y=au(),b=c(y);Fc(b,{get onSave(){return d()},get apiKey(){return t()},set apiKey(x){t(x)}}),v(y),ce(1,y,()=>_e,()=>({delay:S,duration:u})),ce(2,y,()=>_e,()=>({duration:u})),r(w,y)},h=w=>{var y=me(),b=ee(y);{var x=T=>{var L=su(),D=c(L);Qc(D,{get apiKey(){return t()}}),v(L),ce(1,L,()=>_e,()=>({delay:S,duration:u})),ce(2,L,()=>_e,()=>({duration:u})),r(T,L)},f=T=>{var L=me(),D=ee(L);{var j=N=>{var G=ru(),R=c(G);Yc(R,{get apiKey(){return t()},onSave:E}),v(G),ce(1,G,()=>_e,()=>({delay:S,duration:u})),ce(2,G,()=>_e,()=>({duration:u})),r(N,G)};O(D,N=>{e(g)==="Delete"&&N(j)},!0)}r(T,L)};O(b,T=>{e(g)==="Secret"?T(x):T(f,!1)},!0)}r(w,y)};O(A,w=>{e(g)==="Config"?w(k):w(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var nu=I("<div><!></div>"),ou=I('<div class="svelte-1fzx60h">No Api Keys</div>'),vu=I(' <div class="content"><div class="top svelte-1fzx60h"><!> <div class="addNew svelte-1fzx60h"><!></div></div> <!> <div id="keys" class="svelte-1fzx60h"><!></div> <!> <div style="height: 20px"></div></div>',1);function du(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),m=C(n([])),g=C(!1);const u=[{label:"Name",callback:(N,G)=>N.name.includes(G)}];let S=[{label:"Name",callback:(N,G)=>N.name.localeCompare(G.name)}];Ne(()=>{E()});async function E(){let N=await ei(),G=await N.json();N.ok?(a(d,n(G.keys)),a(g,!1)):a(t,n(G.message))}q();var o=vu(),$=ee(o),p=l($),A=c(p),k=c(A);Lt(k,{get items(){return e(d)},searchOptions:u,orderOptions:S,get resItems(){return e(i)},set resItems(N){a(i,n(N))}});var h=l(k,2),w=c(h);Ce(w,{level:3,$$events:{click:()=>a(g,!e(g))},children:(N,G)=>{q();var R=V("NEW KEY");r(N,R)},$$slots:{default:!0}}),v(h),v(A);var y=l(A,2);{var b=N=>{var G=nu(),R=c(G);qc(R,{onSave:E,get apiKeys(){return e(d)}}),v(G),ce(3,G,()=>_e),r(N,G)};O(y,N=>{e(g)&&N(b)})}var x=l(y,2),f=c(x);{var T=N=>{var G=ou();r(N,G)},L=N=>{var G=me(),R=ee(G);Ge(R,19,()=>e(m),F=>F.name,(F,M,z)=>{lu(F,{onSave:E,get apiKey(){return e(m)[e(z)]},set apiKey(P){e(m)[e(z)]=P}})}),r(N,G)};O(f,N=>{e(d).length===0?N(T):N(L,!1)})}v(x);var D=l(x,2);{var j=N=>{jt(N,{get items(){return e(i)},set items(G){a(i,n(G))},get resItems(){return e(m)},set resItems(G){a(m,n(G))}})};O(D,N=>{e(d).length>0&&N(j)})}q(2),v(p),B(()=>Y($,`${e(t)??""} `)),r(_,o),ne()}var cu=I('<div class="row svelte-hjwmgw">No events found</div>'),uu=I('<div class="content"><div class="row svelte-hjwmgw"><!></div> <div class="row filter svelte-hjwmgw"><!> <!></div> <div class="row filterOpts svelte-hjwmgw"><div><!></div> Filter <!> <!></div> <!></div>');function hu(_,s){le(s,!0);let t=C(n([])),d=C(n([])),i=C(n(Da(new Date(new Date().getTime()-3600*1e3)))),m=C(void 0),g=C("Info"),u=C(!1),S=C(n(qa[0])),E=[{label:"IP",callback:(R,F)=>{var M;return(M=R.ip)==null?void 0:M.includes(F)}},{label:"Content",callback:(R,F)=>{var M,z;return(z=(M=R.text)==null?void 0:M.toLowerCase())==null?void 0:z.includes(F.toLowerCase())}}],o=[{label:"Timestamp",callback:(R,F)=>R.timestamp-F.timestamp},{label:"Level",callback:(R,F)=>R.level.localeCompare(F.level)},{label:"Type",callback:(R,F)=>R.typ.localeCompare(F.typ)}];bs(()=>{$()});async function $(){let R={from:zt(e(i)),level:e(g).toLowerCase()};e(m)&&(R.until=zt(e(m))),e(u)&&(R.typ=e(S));let F=await Cr(R),M=await F.json();F.ok?a(t,n(M)):M.message}var p=uu(),A=c(p),k=c(A);Lt(k,{get items(){return e(t)},searchOptions:E,orderOptions:o,firstDirReverse:!0,get resItems(){return e(d)},set resItems(R){a(d,n(R))}}),v(A);var h=l(A,2),w=c(h);ie(w,{type:"datetime-local",step:"60",width:"17.5rem",max:"2099-01-01T00:00",get value(){return e(i)},set value(R){a(i,n(R))},children:(R,F)=>{q();var M=V("FROM");r(R,M)},$$slots:{default:!0}});var y=l(w,2);ie(y,{type:"datetime-local",step:"60",width:"17rem",max:"2099-01-01T00:00",get value(){return e(m)},set value(R){a(m,n(R))},children:(R,F)=>{q();var M=V("UNTIL");r(R,M)},$$slots:{default:!0}}),v(h);var b=l(h,2),x=c(b);oe(x,"margin","0 5.5rem 0 .25rem");var f=c(x);kt(f,{options:da,get value(){return e(g)},set value(R){a(g,n(R))}}),v(x);var T=l(x,2);Ve(T,{get selected(){return e(u)},set selected(R){a(u,n(R))}});var L=l(T,2);{var D=R=>{kt(R,{options:qa,get value(){return e(S)},set value(F){a(S,n(F))}})};O(L,R=>{e(u)&&R(D)})}v(b);var j=l(b,2);{var N=R=>{var F=cu();r(R,F)},G=R=>{var F=me(),M=ee(F);Ge(M,19,()=>e(d),z=>z.id,(z,P,Q)=>{ds(z,{collapsed:!1,wide:!0,get event(){return e(d)[e(Q)]},set event(U){e(d)[e(Q)]=U}})}),r(R,F)};O(j,R=>{e(d).length===0?R(N):R(G,!1)})}v(p),r(_,p),ne()}var pu=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"></path></svg>');function mu(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=pu();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var gu=Xe(`<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0
            0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>`);function fu(_,s){let t=W(s,"opacity",3,.9),d=W(s,"width",3,24);var i=gu();ue(i,"stroke-width",2),B(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var wu=I(`<div class="desc svelte-i817w5"><h4 class="svelte-i817w5">ID token claim mappings</h4> <p class="svelte-i817w5">Values from the ID token after a successful upstream login can be mapped automatically.</p> <p class="svelte-i817w5">The <code class="svelte-i817w5">path</code> needs to be given in a regex like syntax. It can resolve to
        single JSON values or resolve to a value in a JSON object or array.</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.</code> marks the start of the JSON object</p> <p class="svelte-i817w5"><code class="svelte-i817w5">*</code> can be used as a wildcard in your path</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles</code> would target <code class="svelte-i817w5">&#123;"roles": "value"&#125;</code></p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles.*</code> can target a value inside an object or array like<br> <code class="svelte-i817w5">&#123;"roles": ["value", "notMyValue"]&#125;</code></p></div>`);function hs(_){var s=wu();r(_,s)}var yu=I('<div class="err font-label svelte-w61ts0"> </div>'),bu=I('<div class="container svelte-w61ts0"><div class="label svelte-w61ts0"><div class="labelInner font-label noselect svelte-w61ts0"><label><!></label></div></div> <textarea></textarea> <!></div>');function ya(_,s){le(s,!0);let t=W(s,"rows",3,10),d=W(s,"cols",3,10),i=W(s,"name",19,Ut),m=W(s,"disabled",3,!1),g=W(s,"error",3,""),u=W(s,"value",15),S=W(s,"width",3,"32rem"),E=W(s,"fixed",3,!0),o=Jt(s,["$$slots","$$events","$$legacy","rows","cols","name","disabled","error","value","width","fixed","children"]);const $=na();async function p(j){await Vt(),u(j.target.value),$("input",u())}function A(){$("focus",!0)}function k(){$("blur",!0)}var h=bu(),w=c(h),y=c(w),b=c(y),x=c(b);Tt(x,()=>s.children??It),v(b),v(y),v(w);var f=l(w,2);pa(f);let T;var L=l(f,2);{var D=j=>{var N=yu(),G=c(N,!0);v(N),B(()=>{oe(N,"width",S()),Y(G,g())}),ce(7,N,()=>_e,()=>({duration:250})),r(j,N)};O(L,j=>{g()&&j(D)})}v(h),B(()=>{oe(h,"width",`calc(${S()??""} + 12px)`),oe(y,"background",m()?"var(--col-gmid)":"var(--col-bg)"),ue(b,"for",i()),T=ha(f,T,{name:i(),disabled:m(),value:u(),rows:t(),cols:d(),...o,oninput:p,onfocus:A,onblur:k},"svelte-w61ts0"),oe(f,"resize",E()?"none":""),oe(f,"width",S())}),r(_,h),ne()}var $u=I('<div class="header font-label svelte-1m46su9">ADD NEW AUTHENTICATION PROVIDER</div>'),_u=I('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),ku=I('<div class="header svelte-1m46su9">Custom Root CA PEM</div> <div class="ml mb svelte-1m46su9"><!></div> <!>',1),xu=I("<!> <!>",1),Eu=I("<!> <!>",1),Su=I('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),Cu=I(`<!> <!> <!> <!> <!> <div class="header svelte-1m46su9">Use PKCE</div> <div class="ml svelte-1m46su9"><!></div> <div class="desc svelte-1m46su9">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-1m46su9">Client name for the Rauthy login form</div> <!> <div class="desc svelte-1m46su9">Client ID given by the auth provider</div> <!> <div class="desc svelte-1m46su9">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
                        In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-1m46su9"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-1m46su9"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">If your provider issues a claim indicating that the user has used at least 2FA during
                        login, you can specify the mfa claim path.</p></div> <!> <!> <!> <!>`,1),Iu=I('<div class="success svelte-1m46su9">Success</div>'),Tu=I('<div class="err svelte-1m46su9"> </div>'),Au=I('<div class="container svelte-1m46su9"><div class="header svelte-1m46su9">Type</div> <div class="ml mb svelte-1m46su9"><!></div> <!> <!> <!> <!></div>');function Lu(_,s){le(s,!0);let t=W(s,"idx",31,()=>-1);const d="25rem";let i=C(!1),m=C(!1),g=C(""),u=C(!1),S=C(!1),E=C(void 0),o=C(!1),$=C(n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),p=C(n({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),A=["OIDC","Auto","Custom","Github","Google"],k=C(n(A[0])),h=C(n({}));const w=He().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),authorization_endpoint:he().url().required("Required"),token_endpoint:he().url().required("Required"),userinfo_endpoint:he().url().required("Required"),name:he().trim().matches(Xt,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128").required("Required"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Wa,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128").required("Required"),root_pem:he().trim().nullable().matches(ca,"Invalid PEM certificate"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")}),y=He().shape({issuer:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),metadata_url:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),root_pem:he().trim().nullable().matches(ca,"Valid PEM certificate")});Ne(()=>()=>{a(i,!1),clearTimeout(e(E))});async function b(){if(!await T())return;if(!e(p).use_pkce&&!e(p).client_secret){a(g,"Must at least be a confidential client or use PKCE");return}a(g,""),a(m,!0),e(p).root_pem&&(e(p).danger_allow_insecure=!1,e(p).root_pem=e(p).root_pem.trim()),e(D)?e(p).typ="custom":e(p).typ=e(k).toLowerCase(),e(p).scope=e(p).scope.trim();let R=await Or(e(p));if(R.ok)a(S,!0);else{let F=await R.json();F.message.includes("InvalidCertificate")?a(g,"Insecure connection not allowed"):a(g,n(F.message))}a(m,!1)}async function x(){if(!await L()){a(g,"Invalid input");return}a(g,""),a(m,!0);let R=await qr(e($));if(R.ok){const F=await R.json();e(p).issuer=F.issuer,e(p).authorization_endpoint=F.authorization_endpoint,e(p).danger_allow_insecure=F.danger_allow_insecure,e(p).token_endpoint=F.token_endpoint,e(p).userinfo_endpoint=F.userinfo_endpoint,e(p).token_auth_method_basic=F.token_auth_method_basic,e(p).use_pkce=F.use_pkce,e(p).client_secret_basic=F.client_secret_basic,e(p).client_secret_post=!F.client_secret_basic&&F.client_secret_post,e(p).scope=F.scope,e(p).root_pem=F.root_pem,a(u,!0)}else{let F=await R.json();F.message.includes("InvalidCertificate")?a(g,"Insecure connection not allowed"):a(g,n(F.message))}a(m,!1)}function f(){a($,n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),a(p,n({enabled:!0,issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),a(u,!1),a(o,!1)}async function T(){a(h,n({}));try{return await w.validate(e(p),{abortEarly:!1}),e(p).client_secret&&!(e(p).client_secret_basic||e(p).client_secret_post)?(a(g,"You have given a client secret, but no client auth method is active"),!1):(a(g,"Invalid input"),!0)}catch(R){return a(h,n(Ye(R))),R="Invalid input",!1}}async function L(){a(h,n({}));try{return await y.validate(e($),{abortEarly:!1}),!e($).issuer&&!e($).metadata_url?(e(h).issuer="Required",e(h).metadata_url=e(h).issuer,!1):!0}catch(R){return a(h,n(Ye(R))),!1}}let D=Ke(()=>e(k)===A[1]),j=Ke(()=>e(k)===A[2]),N=Ke(()=>e(k)===A[0]),G=Ke(()=>!e(D)&&!e(j)&&!e(N));Ae(()=>{if(e(k))switch(a(u,!1),a(h,n({})),a($,n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),e(k)){case"Github":a(p,n({enabled:!0,issuer:"github.com",danger_allow_insecure:!1,authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",token_auth_method_basic:!1,userinfo_endpoint:"https://api.github.com/user",use_pkce:!1,name:"Github",client_id:"",client_secret:"",scope:"user:email",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:"$.two_factor_authentication",mfa_claim_value:"true"}));break;case"Google":a($,n({issuer:"accounts.google.com",metadata_url:null,danger_allow_insecure:!1,root_pem:null})),x();break;default:a(p,n({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null}))}}),Ae(()=>{e(S)&&a(E,n(setTimeout(()=>{s.onSave(),a(S,!1),a(i,!1),f()},1500)))}),ot(_,{get idx(){return t()},set idx(R){t(R)},get show(){return e(i)},set show(R){a(i,n(R))},header:R=>{var F=$u();r(R,F)},body:R=>{var F=Au(),M=l(c(F),2),z=c(M);kt(z,{options:A,get value(){return e(k)},set value($e){a(k,n($e))}}),v(M);var P=l(M,2);{var Q=$e=>{var pe=ku(),je=l(ee(pe),2),fe=c(je);Ve(fe,{get selected(){return e(o)},set selected(Oe){a(o,n(Oe))}}),v(je);var de=l(je,2);{var we=Oe=>{ya(Oe,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(h).root_pem},get value(){return e($).root_pem},set value(Ie){e($).root_pem=Ie},children:(Ie,xe)=>{q();var Re=V("Root Certificate in PEM format");r(Ie,Re)},$$slots:{default:!0}})},ye=Oe=>{var Ie=_u(),xe=l(ee(Ie),2),Re=c(xe);Ve(Re,{get selected(){return e($).danger_allow_insecure},set selected(H){e($).danger_allow_insecure=H}}),v(xe),r(Oe,Ie)};O(de,Oe=>{e(o)?Oe(we):Oe(ye,!1)})}r($e,pe)};O(P,$e=>{e(u)||$e(Q)})}var U=l(P,2);{var K=$e=>{var pe=xu(),je=ee(pe);ie(je,{type:"url",name:"issuer",placeholder:"Issuer URL",width:d,get value(){return e($).issuer},set value(de){e($).issuer=de},get error(){return e(h).issuer},set error(de){e(h).issuer=de},$$events:{input:L,enter:x},children:(de,we)=>{q();var ye=V("ISSUER URL");r(de,ye)},$$slots:{default:!0}});var fe=l(je,2);Ce(fe,{level:1,width:"6rem",get isLoading(){return e(m)},set isLoading(de){a(m,n(de))},$$events:{click:x},children:(de,we)=>{q();var ye=V("LOOKUP");r(de,ye)},$$slots:{default:!0}}),r($e,pe)},J=$e=>{var pe=me(),je=ee(pe);{var fe=we=>{var ye=Eu(),Oe=ee(ye);ie(Oe,{type:"url",name:"metadata",placeholder:".../.well-known/openid-configuration",width:d,get value(){return e($).metadata_url},set value(xe){e($).metadata_url=xe},get error(){return e(h).metadata_url},set error(xe){e(h).metadata_url=xe},$$events:{input:L,enter:x},children:(xe,Re)=>{q();var H=V("METADATA URL");r(xe,H)},$$slots:{default:!0}});var Ie=l(Oe,2);Ce(Ie,{level:1,width:"6rem",get isLoading(){return e(m)},set isLoading(xe){a(m,n(xe))},$$events:{click:x},children:(xe,Re)=>{q();var H=V("LOOKUP");r(xe,H)},$$slots:{default:!0}}),r(we,ye)},de=we=>{var ye=me(),Oe=ee(ye);{var Ie=xe=>{var Re=Cu(),H=ee(Re);{var Se=ae=>{ya(ae,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(h).root_pem},get disabled(){return e(u)},get value(){return e(p).root_pem},set value(We){e(p).root_pem=We},children:(We,ze)=>{q();var Pt=V("Root Certificate in PEM format");r(We,Pt)},$$slots:{default:!0}})},ge=ae=>{var We=Su(),ze=l(ee(We),2),Pt=c(ze);{var Ht=Ot=>{ea(Ot,{get check(){return e(p).danger_allow_insecure}})},Bt=Ot=>{Ve(Ot,{get selected(){return e(p).danger_allow_insecure},set selected(Ft){e(p).danger_allow_insecure=Ft}})};O(Pt,Ot=>{e(u)?Ot(Ht):Ot(Bt,!1)})}v(ze),r(ae,We)};O(H,ae=>{e(o)?ae(Se):ae(ge,!1)})}var Pe=l(H,2);ie(Pe,{type:"url",name:"issuer",placeholder:"Issuer URL",width:d,get disabled(){return e(u)},get value(){return e(p).issuer},set value(ae){e(p).issuer=ae},get error(){return e(h).issuer},set error(ae){e(h).issuer=ae},$$events:{input:L},children:(ae,We)=>{q();var ze=V("ISSUER URL");r(ae,ze)},$$slots:{default:!0}});var Je=l(Pe,2);ie(Je,{type:"url",name:"auth_endpoint",placeholder:"Authorization Endpoint",width:d,get disabled(){return e(u)},get value(){return e(p).authorization_endpoint},set value(ae){e(p).authorization_endpoint=ae},get error(){return e(h).authorization_endpoint},set error(ae){e(h).authorization_endpoint=ae},$$events:{input:L},children:(ae,We)=>{q();var ze=V("AUTHORIZATION ENDPOINT");r(ae,ze)},$$slots:{default:!0}});var rt=l(Je,2);ie(rt,{type:"url",name:"token_endpoint",placeholder:"Token Endpoint",width:d,get disabled(){return e(u)},get value(){return e(p).token_endpoint},set value(ae){e(p).token_endpoint=ae},get error(){return e(h).token_endpoint},set error(ae){e(h).token_endpoint=ae},$$events:{input:L},children:(ae,We)=>{q();var ze=V("TOKEN ENDPOINT");r(ae,ze)},$$slots:{default:!0}});var vt=l(rt,2);ie(vt,{type:"url",name:"userinfo_endpoint",placeholder:"Userinfo Endpoint",width:d,get disabled(){return e(u)},get value(){return e(p).userinfo_endpoint},set value(ae){e(p).userinfo_endpoint=ae},get error(){return e(h).userinfo_endpoint},set error(ae){e(h).userinfo_endpoint=ae},$$events:{input:L},children:(ae,We)=>{q();var ze=V("USERINFO ENDPOINT");r(ae,ze)},$$slots:{default:!0}});var qe=l(vt,4),Be=c(qe);{var lt=ae=>{ea(ae,{get check(){return e(p).use_pkce}})},xt=ae=>{Ve(ae,{get selected(){return e(p).use_pkce},set selected(We){e(p).use_pkce=We}})};O(Be,ae=>{e(u)?ae(lt):ae(xt,!1)})}v(qe);var $t=l(qe,4);ie($t,{name:"scope",placeholder:"openid profile email",width:d,get value(){return e(p).scope},set value(ae){e(p).scope=ae},get error(){return e(h).scope},set error(ae){e(h).scope=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("SCOPE");r(ae,ze)},$$slots:{default:!0}});var Qe=l($t,4);ie(Qe,{name:"client_name",placeholder:"Client Name",width:d,get value(){return e(p).name},set value(ae){e(p).name=ae},get error(){return e(h).name},set error(ae){e(h).name=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("CLIENT NAME");r(ae,ze)},$$slots:{default:!0}});var et=l(Qe,4);ie(et,{name:"client_id",autocomplete:"off",placeholder:"Client ID",width:d,get value(){return e(p).client_id},set value(ae){e(p).client_id=ae},get error(){return e(h).client_id},set error(ae){e(h).client_id=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("CLIENT ID");r(ae,ze)},$$slots:{default:!0}});var gt=l(et,4);Gt(gt,{name:"client_secret",get error(){return e(h).client_secret},autocomplete:"off",placeholder:"Client Secret",width:d,get value(){return e(p).client_secret},set value(ae){e(p).client_secret=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("CLIENT SECRET");r(ae,ze)},$$slots:{default:!0}});var ct=l(gt,4),St=l(c(ct),2);Ve(St,{get selected(){return e(p).client_secret_basic},set selected(ae){e(p).client_secret_basic=ae}}),v(ct);var at=l(ct,2),st=l(c(at),2);Ve(st,{get selected(){return e(p).client_secret_post},set selected(ae){e(p).client_secret_post=ae}}),v(at);var se=l(at,2);hs(se);var Te=l(se,4);ie(Te,{name:"admin_claim_path",placeholder:"$.roles.*",width:d,get value(){return e(p).admin_claim_path},set value(ae){e(p).admin_claim_path=ae},get error(){return e(h).admin_claim_path},set error(ae){e(h).admin_claim_path=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("ADMIN CLAIM PATH");r(ae,ze)},$$slots:{default:!0}});var Me=l(Te,2);ie(Me,{name:"admin_claim_value",placeholder:"rauthy_admin",width:d,get value(){return e(p).admin_claim_value},set value(ae){e(p).admin_claim_value=ae},get error(){return e(h).admin_claim_value},set error(ae){e(h).admin_claim_value=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("ADMIN CLAIM VALUE");r(ae,ze)},$$slots:{default:!0}});var X=l(Me,4);ie(X,{name:"mfa_claim_path",placeholder:"$.amr.*",width:d,get value(){return e(p).mfa_claim_path},set value(ae){e(p).mfa_claim_path=ae},get error(){return e(h).mfa_claim_path},set error(ae){e(h).mfa_claim_path=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("MFA CLAIM PATH");r(ae,ze)},$$slots:{default:!0}});var Ee=l(X,2);ie(Ee,{name:"mfa_claim_value",placeholder:"mfa",width:d,get value(){return e(p).mfa_claim_value},set value(ae){e(p).mfa_claim_value=ae},get error(){return e(h).mfa_claim_value},set error(ae){e(h).mfa_claim_value=ae},$$events:{input:T},children:(ae,We)=>{q();var ze=V("MFA CLAIM VALUE");r(ae,ze)},$$slots:{default:!0}});var Le=l(Ee,2);Ce(Le,{level:1,width:"6rem",get isLoading(){return e(m)},set isLoading(ae){a(m,n(ae))},$$events:{click:b},children:(ae,We)=>{q();var ze=V("SAVE");r(ae,ze)},$$slots:{default:!0}});var Ct=l(Le,2);Ce(Ct,{level:4,width:"6rem",get isLoading(){return e(m)},set isLoading(ae){a(m,n(ae))},$$events:{click:f},children:(ae,We)=>{q();var ze=V("RESET");r(ae,ze)},$$slots:{default:!0}}),r(xe,Re)};O(Oe,xe=>{(e(G)||e(j)||e(u))&&xe(Ie)},!0)}r(we,ye)};O(je,we=>{e(D)&&!e(u)?we(fe):we(de,!1)},!0)}r($e,pe)};O(U,$e=>{e(N)&&!e(u)?$e(K):$e(J,!1)})}var Z=l(U,2);{var re=$e=>{var pe=Iu();r($e,pe)};O(Z,$e=>{e(S)&&$e(re)})}var ve=l(Z,2);{var be=$e=>{var pe=Tu(),je=c(pe,!0);v(pe),B(()=>Y(je,e(g))),r($e,pe)};O(ve,$e=>{e(g)&&$e(be)})}v(F),r(R,F)},$$slots:{header:!0,body:!0}}),ne()}var Nu=I('<img alt="No Logo Available">');function Ru(_,s){le(s,!0);var t=Nu();B(()=>ue(t,"src",`/auth/v1/providers/${s.providerId}/img?${Ut(6)}`)),ue(t,"width",20),ue(t,"height",20),r(_,t),ne()}var Du=I('<div class="header svelte-19hes5">Allow insecure TLS certificates</div> <div class="ml mb svelte-19hes5"><!></div>',1),ju=I('<div class="success svelte-19hes5">Success</div>'),Ou=I('<div class="mainErr err svelte-19hes5"> </div>'),Mu=I("<!> <!> <!>",1),zu=I(`<div class="container svelte-19hes5"><div class="unit svelte-19hes5"><div class="label font-label svelte-19hes5">ID</div> <div class="value font-mono svelte-19hes5"> </div></div> <div class="separator"></div> <div class="header svelte-19hes5">Enabled</div> <div class="ml mb svelte-19hes5"><!></div> <div class="header svelte-19hes5">Custom Root CA PEM</div> <div class="ml mb svelte-19hes5"><!></div> <!> <!> <!> <!> <!> <div class="header svelte-19hes5">Use PKCE</div> <div class="ml mb svelte-19hes5"><!></div> <div class="desc svelte-19hes5">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-19hes5">Client name for the Rauthy login form</div> <!> <div class="desc svelte-19hes5">Client ID given by the auth provider</div> <!> <div class="desc svelte-19hes5">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
            In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-19hes5"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-19hes5"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">If your provider issues a claim indicating that the user has used at least 2FA during
            login, you can specify the mfa claim path.</p></div> <!> <!> <div class="logo svelte-19hes5"><!> <!></div> <!></div>`);function Uu(_,s){le(s,!0);let t=W(s,"provider",31,()=>n({}));const d="25rem";let i=C(!1),m=C(""),g=C(!1),u=C(void 0),S=C(n(t().root_pem)),E=C(void 0);Ne(()=>()=>clearTimeout(e(u)));let o=C(n({}));const $=He().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),authorization_endpoint:he().url(),token_endpoint:he().url(),userinfo_endpoint:he().url(),name:he().trim().matches(Xt,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Wa,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")});async function p(){if(e(S)||t(t().root_pem=void 0,!0),!await k())return;if(!t().use_pkce&&!t().client_secret){a(m,"Must at least be a confidential client or use PKCE");return}a(m,""),a(i,!0),t().root_pem?(t(t().danger_allow_insecure=!1,!0),t(t().root_pem=t().root_pem.trim(),!0)):t(t().root_pem=void 0,!0);let H=await Mr(t().id,t());if(H.ok)a(g,!0);else{let Se=await H.json();a(m,n(Se.message))}a(i,!1)}async function A(H){a(i,!0);let Se=await Pr(t().id,H);if(!Se.ok){let ge=await Se.json();console.error(ge.message)}a(i,!1)}async function k(){a(o,n({}));try{return await $.validate(t(),{abortEarly:!1}),t().client_secret&&!(t().client_secret_basic||t().client_secret_post)?(a(m,"You have given a client secret, but no client auth method is active"),!1):(t().root_pem&&t().root_pem.length>0?ca.test(t().root_pem.trim())||(e(o).root_pem="Invalid PEM certificate"):a(m,"Invalid input"),!0)}catch(H){return a(o,n(Ye(H))),!1}}Ae(()=>{e(g)&&a(u,n(setTimeout(()=>{a(g,!1),s.onSave()},2e3)))}),Ae(()=>{t().scope&&t(t().scope=t().scope.replaceAll("+"," "),!0)}),Ae(()=>{e(E)&&A(e(E))});var h=zu(),w=c(h),y=l(c(w),2),b=c(y,!0);v(y),v(w);var x=l(w,6),f=c(x);Ve(f,{get selected(){return t().enabled},set selected(H){t(t().enabled=H,!0)}}),v(x);var T=l(x,4),L=c(T);Ve(L,{get selected(){return e(S)},set selected(H){a(S,n(H))}}),v(T);var D=l(T,2);{var j=H=>{ya(H,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----`,get error(){return e(o).root_pem},get value(){return t().root_pem},set value(Se){t(t().root_pem=Se,!0)},children:(Se,ge)=>{q();var Pe=V("Root Certificate in PEM format");r(Se,Pe)},$$slots:{default:!0}})},N=H=>{var Se=Du(),ge=l(ee(Se),2),Pe=c(ge);Ve(Pe,{get selected(){return t().danger_allow_insecure},set selected(Je){t(t().danger_allow_insecure=Je,!0)}}),v(ge),r(H,Se)};O(D,H=>{e(S)?H(j):H(N,!1)})}var G=l(D,2);ie(G,{autocomplete:"off",placeholder:"Issuer URL",width:d,get value(){return t().issuer},set value(H){t(t().issuer=H,!0)},get error(){return e(o).issuer},set error(H){e(o).issuer=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("ISSUER URL");r(H,ge)},$$slots:{default:!0}});var R=l(G,2);ie(R,{autocomplete:"off",placeholder:"Authorization Endpoint",width:d,get value(){return t().authorization_endpoint},set value(H){t(t().authorization_endpoint=H,!0)},get error(){return e(o).authorization_endpoint},set error(H){e(o).authorization_endpoint=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("AUTHORIZATION ENDPOINT");r(H,ge)},$$slots:{default:!0}});var F=l(R,2);ie(F,{autocomplete:"off",placeholder:"Token Endpoint",width:d,get value(){return t().token_endpoint},set value(H){t(t().token_endpoint=H,!0)},get error(){return e(o).token_endpoint},set error(H){e(o).token_endpoint=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("TOKEN ENDPOINT");r(H,ge)},$$slots:{default:!0}});var M=l(F,2);ie(M,{autocomplete:"off",placeholder:"Userinfo Endpoint",width:d,get value(){return t().userinfo_endpoint},set value(H){t(t().userinfo_endpoint=H,!0)},get error(){return e(o).userinfo_endpoint},set error(H){e(o).userinfo_endpoint=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("USERINFO ENDPOINT");r(H,ge)},$$slots:{default:!0}});var z=l(M,4),P=c(z);Ve(P,{get selected(){return t().use_pkce},set selected(H){t(t().use_pkce=H,!0)}}),v(z);var Q=l(z,4);ie(Q,{autocomplete:"off",placeholder:"openid profile email",width:d,get value(){return t().scope},set value(H){t(t().scope=H,!0)},get error(){return e(o).scope},set error(H){e(o).scope=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("SCOPE");r(H,ge)},$$slots:{default:!0}});var U=l(Q,4);ie(U,{autocomplete:"off",placeholder:"Client Name",width:d,get value(){return t().name},set value(H){t(t().name=H,!0)},get error(){return e(o).name},set error(H){e(o).name=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("CLIENT NAME");r(H,ge)},$$slots:{default:!0}});var K=l(U,4);ie(K,{autocomplete:"off",placeholder:"Client ID",width:d,get value(){return t().client_id},set value(H){t(t().client_id=H,!0)},get error(){return e(o).client_id},set error(H){e(o).client_id=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("CLIENT ID");r(H,ge)},$$slots:{default:!0}});var J=l(K,4);Gt(J,{get error(){return e(o).client_secret},autocomplete:"off",placeholder:"Client Secret",width:d,get value(){return t().client_secret},set value(H){t(t().client_secret=H,!0)},$$events:{input:k},children:(H,Se)=>{q();var ge=V("CLIENT SECRET");r(H,ge)},$$slots:{default:!0}});var Z=l(J,4),re=l(c(Z),2);Ve(re,{get selected(){return t().client_secret_basic},set selected(H){t(t().client_secret_basic=H,!0)}}),v(Z);var ve=l(Z,2),be=l(c(ve),2);Ve(be,{get selected(){return t().client_secret_post},set selected(H){t(t().client_secret_post=H,!0)}}),v(ve);var $e=l(ve,2);hs($e);var pe=l($e,4);ie(pe,{autocomplete:"off",placeholder:"$.roles.*",width:d,get value(){return t().admin_claim_path},set value(H){t(t().admin_claim_path=H,!0)},get error(){return e(o).admin_claim_path},set error(H){e(o).admin_claim_path=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("ADMIN CLAIM PATH");r(H,ge)},$$slots:{default:!0}});var je=l(pe,2);ie(je,{autocomplete:"off",placeholder:"rauthy_admin",width:d,get value(){return t().admin_claim_value},set value(H){t(t().admin_claim_value=H,!0)},get error(){return e(o).admin_claim_value},set error(H){e(o).admin_claim_value=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("ADMIN CLAIM VALUE");r(H,ge)},$$slots:{default:!0}});var fe=l(je,4);ie(fe,{autocomplete:"off",placeholder:"$.amr.*",width:d,get value(){return t().mfa_claim_path},set value(H){t(t().mfa_claim_path=H,!0)},get error(){return e(o).mfa_claim_path},set error(H){e(o).mfa_claim_path=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("MFA CLAIM PATH");r(H,ge)},$$slots:{default:!0}});var de=l(fe,2);ie(de,{autocomplete:"off",placeholder:"mfa",width:d,get value(){return t().mfa_claim_value},set value(H){t(t().mfa_claim_value=H,!0)},get error(){return e(o).mfa_claim_value},set error(H){e(o).mfa_claim_value=H},$$events:{input:k},children:(H,Se)=>{q();var ge=V("MFA CLAIM VALUE");r(H,ge)},$$slots:{default:!0}});var we=l(de,2),ye=c(we);ns(ye,{get image(){return e(E)},set image(H){a(E,n(H))}});var Oe=l(ye,2);{var Ie=H=>{Ru(H,{get providerId(){return t().id}})};O(Oe,H=>{e(i)||H(Ie)})}v(we);var xe=l(we,2);{var Re=H=>{var Se=Mu(),ge=ee(Se);Ce(ge,{level:1,width:"4rem",get isLoading(){return e(i)},set isLoading(qe){a(i,n(qe))},$$events:{click:p},children:(qe,Be)=>{q();var lt=V("SAVE");r(qe,lt)},$$slots:{default:!0}});var Pe=l(ge,2);{var Je=qe=>{var Be=ju();r(qe,Be)};O(Pe,qe=>{e(g)&&qe(Je)})}var rt=l(Pe,2);{var vt=qe=>{var Be=Ou(),lt=c(Be,!0);v(Be),B(()=>Y(lt,e(m))),r(qe,Be)};O(rt,qe=>{e(m)&&qe(vt)})}r(H,Se)};O(xe,H=>{H(Re)})}v(h),B(()=>Y(b,t().id)),r(_,h),ne()}var Pu=I("<p> </p>"),qu=I(`<div class="label svelte-1tncxap"><p>This provider is in use by active users.</p> <p>You can force delete it, but users without a local password or passkey
                will not be able to log in anymore.</p> <details><summary>Linked Users</summary> <!></details></div> <div class="label svelte-1tncxap"><p>Are you sure you want to delete this provider?</p> <div class="forceDelete svelte-1tncxap">FORCE DELETE <!></div></div> <!>`,1),Wu=I('<div class="label svelte-1tncxap">Are you sure, you want to delete this provider?</div> <!>',1),Gu=I('<div class="err svelte-1tncxap"> </div>'),Ku=I('<div class="container svelte-1tncxap"><!> <!></div>');function Bu(_,s){le(s,!0);let t=W(s,"provider",19,()=>({})),d=C(!0),i=C(""),m=C(!1),g=C(n([]));Ne(async()=>{let k=await Ur(t().id),h=await k.json();k.status===406?a(g,n(h)):a(i,n(h.message)),a(d,!1)});async function u(){a(i,""),a(d,!0);let k=await zr(t().id);if(k.ok)s.onSave();else{let h=await k.json();a(i,n(h.message))}a(d,!1)}var S=Ku(),E=c(S);{var o=k=>{var h=qu(),w=ee(h),y=l(c(w),4),b=l(c(y),2);Ge(b,17,()=>e(g),j=>j.id,(j,N)=>{var G=Pu(),R=c(G);v(G),B(()=>Y(R,`${e(N).id??""} ${e(N).email??""}`)),r(j,G)}),v(y),v(w);var x=l(w,2),f=l(c(x),2),T=l(c(f));Ve(T,{get selected(){return e(m)},set selected(j){a(m,n(j))}}),v(f),v(x);var L=l(x,2);{var D=j=>{Ce(j,{level:1,get isLoading(){return e(d)},set isLoading(N){a(d,n(N))},$$events:{click:u},children:(N,G)=>{q();var R=V("DELETE");r(N,R)},$$slots:{default:!0}})};O(L,j=>{e(m)&&j(D)})}r(k,h)},$=k=>{var h=Wu(),w=l(ee(h),2);Ce(w,{level:1,get isLoading(){return e(d)},set isLoading(y){a(d,n(y))},$$events:{click:u},children:(y,b)=>{q();var x=V("DELETE");r(y,x)},$$slots:{default:!0}}),r(k,h)};O(E,k=>{e(g).length>0?k(o):k($,!1)})}var p=l(E,2);{var A=k=>{var h=Gu(),w=c(h,!0);v(h),B(()=>Y(w,e(i))),r(k,h)};O(p,k=>{e(i)&&k(A)})}v(S),r(_,S),ne()}var Fu=I('<div class="data font-mono svelte-115hohv"> </div>'),Vu=I('<div class="data svelte-115hohv"> </div>'),Ju=I('<div class="header svelte-115hohv"><!> <!></div>'),Yu=I("<div><!></div>"),Hu=I("<div><!></div>"),Xu=I("<div><!> <!></div>");function Zu(_,s){le(s,!0);let t=W(s,"provider",31,()=>n({})),d=W(s,"onSave",15),i=C(void 0);const m=["Config","Delete"];let g=C(n(m[0]));const u=200,S=u/2;ot(_,{get show(){return e(i)},set show(E){a(i,n(E))},header:E=>{var o=Ju(),$=c(o);Ze($,{text:"Provider ID",children:(A,k)=>{var h=Fu(),w=c(h,!0);v(h),B(()=>Y(w,t().id)),r(A,h)},$$slots:{default:!0}});var p=l($,2);Ze(p,{text:"Provider Name",children:(A,k)=>{var h=Vu(),w=c(h,!0);v(h),B(()=>Y(w,t().name)),r(A,h)},$$slots:{default:!0}}),v(o),r(E,o)},body:E=>{var o=Xu(),$=c(o);Dt($,{labels:m,get selected(){return e(g)},set selected(h){a(g,n(h))}});var p=l($,2);{var A=h=>{var w=Yu(),y=c(w);Uu(y,{get provider(){return t()},set provider(b){t(b)},get onSave(){return d()},set onSave(b){d(b)}}),v(w),ce(1,w,()=>_e,()=>({delay:S,duration:u})),ce(2,w,()=>_e,()=>({duration:u})),r(h,w)},k=h=>{var w=me(),y=ee(w);{var b=x=>{var f=Hu(),T=c(f);Bu(T,{get provider(){return t()},set provider(L){t(L)},get onSave(){return d()},set onSave(L){d(L)}}),v(f),ce(1,f,()=>_e,()=>({delay:S,duration:u})),ce(2,f,()=>_e,()=>({duration:u})),r(x,f)};O(y,x=>{e(g)==="Delete"&&x(b)},!0)}r(h,w)};O(p,h=>{e(g)==="Config"?h(A):h(k,!1)})}v(o),r(E,o)},$$slots:{header:!0,body:!0}}),ne()}var Qu=I('<div class="svelte-4dnryh"><!></div>'),eh=I(' <div class="content"><!> <div id="federation" class="svelte-4dnryh"></div> <div style="height: 20px"></div></div>',1);function th(_,s){le(s,!0);let t=C(""),d=C(n([]));Ne(()=>{i()});async function i(){let $=await jr(),p=await $.json();$.ok?a(d,n([...p])):a(t,n(p.message))}function m(){i()}q();var g=eh(),u=ee(g),S=l(u),E=c(S);Lu(E,{onSave:m});var o=l(E,2);Ge(o,23,()=>e(d),$=>$.id,($,p,A)=>{var k=Qu(),h=c(k);Zu(h,{onSave:m,get provider(){return e(d)[e(A)]},set provider(w){e(d)[e(A)]=w}}),v(k),r($,k)}),v(o),q(2),v(S),B(()=>Y(u,`${e(t)??""} `)),r(_,g),ne()}var ah=I("<div><div><!></div></div>"),sh=I("<div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>"),rh=I('<main class="svelte-1a52j8o"><!> <div class="inner svelte-1a52j8o"><!> <!></div></main>');function ih(_,s){le(s,!0);let t=W(s,"selected",15,"Users"),d=C("Rauthy Admin"),i=C(!0),m=C(!0),g=C(!1),u=C(void 0);Ae(()=>{e(u)&&(a(i,e(u)>1050),a(m,e(u)<1050),a(g,e(u)>1450))}),Ae(()=>{if(t())switch(t()){case"Users":{window.history.pushState("Users","","/auth/v1/admin/users"),a(d,"Users");break}case"Attributes":{window.history.pushState("Attributes","","/auth/v1/admin/attributes"),a(d,"Attributes");break}case"Clients":{window.history.pushState("Clients","","/auth/v1/admin/clients"),a(d,"Clients");break}case"Roles":{window.history.pushState("Roles","","/auth/v1/admin/roles"),a(d,"Roles");break}case"Groups":{window.history.pushState("Groups","","/auth/v1/admin/groups"),a(d,"Groups");break}case"Scopes":{window.history.pushState("Scopes","","/auth/v1/admin/scopes"),a(d,"Scopes");break}case"Sessions":{window.history.pushState("Sessions","","/auth/v1/admin/sessions"),a(d,"Sessions");break}case"Events":{window.history.pushState("Sessions","","/auth/v1/admin/events"),a(d,"Events");break}case"Blacklist":{window.history.pushState("Blacklist","","/auth/v1/admin/blacklist"),a(d,"Blacklist");break}case"ApiKeys":{window.history.pushState("ApiKeys","","/auth/v1/admin/api_keys"),a(d,"ApiKeys");break}case"Providers":{window.history.pushState("Providers","","/auth/v1/admin/providers"),a(d,"Providers");break}case"Config":{window.history.pushState("Config","","/auth/v1/admin/config"),a(d,"Config");break}case"Docs":{window.history.pushState("Docs","","/auth/v1/admin/docs"),a(d,"Docs");break}case"Logout":Ps();break}}),Ne(()=>(window.addEventListener("popstate",E),S(window.innerWidth),()=>window.removeEventListener("popstate",E)));function S(b){a(i,b>1050),a(m,b<1050),a(g,b>1450)}function E(b){t(b.state)}var o=rh();Aa(b=>{B(()=>Ta.title=e(d))});var $=c(o);dr($,{widthExpanded:150,widthCollapsed:70,get selected(){return t()},set selected(b){t(b)},get isExpanded(){return e(i)},set isExpanded(b){a(i,n(b))},logo:b=>{var x=ah(),f=c(x),T=c(f);Xd(T),v(f),v(x),B(()=>{oe(f,"width",e(i)?"120px":"55px"),oe(f,"margin-top",e(i)?"32px":"40px"),oe(f,"margin-bottom",e(i)?"13px":"22px")}),r(b,x)},entries:b=>{var x=sh(),f=c(x);mt(f,{label:"Users",children:(K,J)=>{zd(K,{})},$$slots:{default:!0}});var T=l(f,2);mt(T,{label:"Attributes",children:(K,J)=>{Kd(K,{})},$$slots:{default:!0}});var L=l(T,2);mt(L,{label:"Clients",children:(K,J)=>{Pd(K,{})},$$slots:{default:!0}});var D=l(L,2);mt(D,{label:"Roles",children:(K,J)=>{vs(K,{})},$$slots:{default:!0}});var j=l(D,2);mt(j,{label:"Groups",children:(K,J)=>{Wd(K,{})},$$slots:{default:!0}});var N=l(j,2);mt(N,{label:"Scopes",children:(K,J)=>{Yd(K,{})},$$slots:{default:!0}});var G=l(N,2);mt(G,{label:"Sessions",children:(K,J)=>{vs(K,{})},$$slots:{default:!0}});var R=l(G,2);mt(R,{label:"Events",children:(K,J)=>{mu(K,{})},$$slots:{default:!0}});var F=l(R,2);mt(F,{label:"Blacklist",children:(K,J)=>{Qt(K,{width:24,color:"currentColor"})},$$slots:{default:!0}});var M=l(F,2);mt(M,{label:"ApiKeys",children:(K,J)=>{Dc(K,{})},$$slots:{default:!0}});var z=l(M,2);mt(z,{label:"Providers",children:(K,J)=>{fu(K,{})},$$slots:{default:!0}});var P=l(z,2);mt(P,{label:"Config",children:(K,J)=>{Od(K,{})},$$slots:{default:!0}});var Q=l(P,2);mt(Q,{label:"Docs",children:(K,J)=>{tc(K,{})},$$slots:{default:!0}});var U=l(Q,2);mt(U,{label:"Logout",children:(K,J)=>{Vd(K,{})},$$slots:{default:!0}}),v(x),r(b,x)},$$slots:{logo:!0,entries:!0}});var p=l($,2),A=c(p);{var k=b=>{bt(b,{get eventsWide(){return e(g)},set eventsWide(x){a(g,n(x))},get eventsCollapsed(){return e(m)},set eventsCollapsed(x){a(m,n(x))},children:(x,f)=>{rn(x,{})},$$slots:{default:!0}})},h=b=>{var x=me(),f=ee(x);{var T=D=>{bt(D,{get eventsWide(){return e(g)},set eventsWide(j){a(g,n(j))},get eventsCollapsed(){return e(m)},set eventsCollapsed(j){a(m,n(j))},children:(j,N)=>{nd(j,{})},$$slots:{default:!0}})},L=D=>{var j=me(),N=ee(j);{var G=F=>{bt(F,{get eventsWide(){return e(g)},set eventsWide(M){a(g,n(M))},get eventsCollapsed(){return e(m)},set eventsCollapsed(M){a(m,n(M))},children:(M,z)=>{Lv(M,{})},$$slots:{default:!0}})},R=F=>{var M=me(),z=ee(M);{var P=U=>{bt(U,{get eventsWide(){return e(g)},set eventsWide(K){a(g,n(K))},get eventsCollapsed(){return e(m)},set eventsCollapsed(K){a(m,n(K))},children:(K,J)=>{An(K,{})},$$slots:{default:!0}})},Q=U=>{var K=me(),J=ee(K);{var Z=ve=>{bt(ve,{get eventsWide(){return e(g)},set eventsWide(be){a(g,n(be))},get eventsCollapsed(){return e(m)},set eventsCollapsed(be){a(m,n(be))},children:(be,$e)=>{Zn(be,{})},$$slots:{default:!0}})},re=ve=>{var be=me(),$e=ee(be);{var pe=fe=>{bt(fe,{get eventsWide(){return e(g)},set eventsWide(de){a(g,n(de))},get eventsCollapsed(){return e(m)},set eventsCollapsed(de){a(m,n(de))},children:(de,we)=>{So(de,{})},$$slots:{default:!0}})},je=fe=>{var de=me(),we=ee(de);{var ye=Ie=>{bt(Ie,{get eventsWide(){return e(g)},set eventsWide(xe){a(g,n(xe))},get eventsCollapsed(){return e(m)},set eventsCollapsed(xe){a(m,n(xe))},children:(xe,Re)=>{qv(xe,{})},$$slots:{default:!0}})},Oe=Ie=>{var xe=me(),Re=ee(xe);{var H=ge=>{bt(ge,{get eventsWide(){return e(g)},set eventsWide(Pe){a(g,n(Pe))},get eventsCollapsed(){return e(m)},set eventsCollapsed(Pe){a(m,n(Pe))},children:(Pe,Je)=>{hu(Pe,{})},$$slots:{default:!0}})},Se=ge=>{var Pe=me(),Je=ee(Pe);{var rt=qe=>{bt(qe,{get eventsWide(){return e(g)},set eventsWide(Be){a(g,n(Be))},get eventsCollapsed(){return e(m)},set eventsCollapsed(Be){a(m,n(Be))},children:(Be,lt)=>{Nc(Be,{})},$$slots:{default:!0}})},vt=qe=>{var Be=me(),lt=ee(Be);{var xt=Qe=>{bt(Qe,{get eventsWide(){return e(g)},set eventsWide(et){a(g,n(et))},get eventsCollapsed(){return e(m)},set eventsCollapsed(et){a(m,n(et))},children:(et,gt)=>{du(et,{})},$$slots:{default:!0}})},$t=Qe=>{var et=me(),gt=ee(et);{var ct=at=>{bt(at,{get eventsWide(){return e(g)},set eventsWide(st){a(g,n(st))},get eventsCollapsed(){return e(m)},set eventsCollapsed(st){a(m,n(st))},children:(st,se)=>{th(st,{})},$$slots:{default:!0}})},St=at=>{var st=me(),se=ee(st);{var Te=X=>{bt(X,{get eventsWide(){return e(g)},set eventsWide(Ee){a(g,n(Ee))},get eventsCollapsed(){return e(m)},set eventsCollapsed(Ee){a(m,n(Ee))},children:(Ee,Le)=>{Dd(Ee)},$$slots:{default:!0}})},Me=X=>{var Ee=me(),Le=ee(Ee);{var Ct=ae=>{bt(ae,{get eventsWide(){return e(g)},set eventsWide(We){a(g,n(We))},get eventsCollapsed(){return e(m)},set eventsCollapsed(We){a(m,n(We))},children:(We,ze)=>{Qd(We)},$$slots:{default:!0}})};O(Le,ae=>{t()==="Docs"&&ae(Ct)},!0)}r(X,Ee)};O(se,X=>{t()==="Config"?X(Te):X(Me,!1)},!0)}r(at,st)};O(gt,at=>{t()==="Providers"?at(ct):at(St,!1)},!0)}r(Qe,et)};O(lt,Qe=>{t()==="ApiKeys"?Qe(xt):Qe($t,!1)},!0)}r(qe,Be)};O(Je,qe=>{t()==="Blacklist"?qe(rt):qe(vt,!1)},!0)}r(ge,Pe)};O(Re,ge=>{t()==="Events"?ge(H):ge(Se,!1)},!0)}r(Ie,xe)};O(we,Ie=>{t()==="Sessions"?Ie(ye):Ie(Oe,!1)},!0)}r(fe,de)};O($e,fe=>{t()==="Scopes"?fe(pe):fe(je,!1)},!0)}r(ve,be)};O(J,ve=>{t()==="Groups"?ve(Z):ve(re,!1)},!0)}r(U,K)};O(z,U=>{t()==="Roles"?U(P):U(Q,!1)},!0)}r(F,M)};O(N,F=>{t()==="Clients"?F(G):F(R,!1)},!0)}r(D,j)};O(f,D=>{t()==="Attributes"?D(T):D(L,!1)},!0)}r(b,x)};O(A,b=>{t()==="Users"?b(k):b(h,!1)})}var w=l(A,2);{var y=b=>{Ec(b,{get collapsed(){return e(m)},get wide(){return e(g)}})};O(w,b=>{e(u)!==void 0&&b(y)})}v(p),v(o),Js("innerWidth",b=>a(u,n(b))),r(_,o),ne()}var lh=I('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">A rauthy admin account must have <b>MFA enabled.</b><br> Please navigate to your <b>account</b> and activate MFA.<br> Afterwards, you need to do a logout and log back in.</div> <!></div>'),nh=I('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">You are not assigned to the <b>rauthy_admin</b> role.<br> You do not have access to the admin panel.</div> <!></div>');function oh(_,s){le(s,!0);let t=W(s,"selected",15,"Users"),d=C(void 0),i=C(!1),m=C(!1);Ne(async()=>{let o=await qs();if(o.ok){let $=await o.json(),p=await Ws();p.ok?(a(d,n($)),a(i,!0)):p.status===406?(a(m,!0),a(d,n({}))):a(d,n({}))}else za()});var g=me();Aa(o=>{Ta.title="Admin"});var u=ee(g);{var S=o=>{ua(o,{})},E=o=>{var $=me(),p=ee($);{var A=h=>{var w=lh(),y=l(c(w),2);Ce(y,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(b,x)=>{q();var f=V("ACCOUNT");r(b,f)},$$slots:{default:!0}}),v(w),r(h,w)},k=h=>{var w=me(),y=ee(w);{var b=f=>{var T=nh(),L=l(c(T),2);Ce(L,{$$events:{click:()=>window.location.href="/auth/v1/"},children:(D,j)=>{q();var N=V("GO BACK");r(D,N)},$$slots:{default:!0}}),v(T),r(f,T)},x=f=>{ih(f,{get selected(){return t()},set selected(T){t(T)}})};O(y,f=>{e(i)?f(x,!1):f(b)},!0)}r(h,w)};O(p,h=>{e(m)?h(A):h(k,!1)},!0)}r(o,$)};O(u,o=>{!e(d)&&!e(m)?o(S):o(E,!1)})}r(_,g),ne()}export{oh as A};
