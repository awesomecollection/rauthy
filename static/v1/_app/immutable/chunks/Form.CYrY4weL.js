import"./disclose-version.BDr9Qe-U.js";import{p as b,t as v,a as P,c as T,r as D}from"./index-client.ijM6xFk7.js";import{e as R}from"./render.BjVgqyVR.js";import{a as k,t as y}from"./template.DOyJZ41v.js";import{s as E}from"./snippet.BqUd1njP.js";import{s as l}from"./class.p-n0nTxi.js";import{p as f}from"./props.YiozBtSG.js";import{f as F}from"./pow.Baa8klPg.js";import{u as x}from"./form.DekAF1-C.js";import{a as A,e as O}from"./fetch.1g3fgaWW.js";var V=y("<form><!></form>");function I(w,o){b(o,!0);let h=f(o,"method",3,"POST"),p=f(o,"isError",15),S=f(o,"convertDateToTs",19,()=>[]);async function d(c){var u;c.preventDefault();const e=c.currentTarget;if(e.reportValidity())p(!1);else{p(!0);return}const s=new FormData(e);for(let a of S()){let m=((u=s.get(a))==null?void 0:u.toString())||"",n=x(m)||"";s.set(a,(n==null?void 0:n.toString())||"")}if(o.withPowAs){let a=await F();s.set(o.withPowAs,a||"")}let t,i=new URLSearchParams;if(s.forEach((a,m)=>{i.append(m,a.toString())}),o.onSubmit){o.onSubmit(e,i);return}t=await A(e,i),t&&(t.ok?o.onResponse&&(o.onResponse(t),o.resetOnSubmit&&t.ok&&e.reset()):await O(t))}var r=V(),g=T(r);E(g,()=>o.children),D(r),v(()=>{l(r,"action",o.action),l(r,"method",h())}),R("submit",r,d),k(w,r),P()}export{I as F};
