import{a as v,n as Z,t as w,e as A,d as ee}from"./disclose-version.BP4T4xdV.js";import{t as m,a as G,c as r,r as s,s as u,p as H,a7 as T,l as W,O as re,j as k,k as X,aa as se,f as Y}from"./index-client.hxMyB_b4.js";import{s as d}from"./render.yNX9q8-B.js";import{i as O}from"./if.BeBa1Kxb.js";import{a as ae,B as J}from"./Button.BR1gOfNn.js";import{k as P}from"./helpers.CchIKxjM.js";import{s as R}from"./class.CF2J4YCf.js";import{p as z}from"./props.DNAkfByl.js";import{T as te}from"./Tooltip.ChiKoAQF.js";import{u as K}from"./i18n.svelte.Ci9wvqOq.js";import{e as oe}from"./each.BUp7aLCc.js";import{p as S}from"./proxy.DaVNR9vk.js";import{d as ie,c as le,f as ve}from"./fetch.Bq59EV_b.js";import{I as de}from"./IconStop.DLLup3H7.js";import{I as ne}from"./pow.BMnvYon0.js";import{E as ce}from"./Expandable.CyA69Mcx.js";import{g as me}from"./patterns.BRCxk8by.js";import{L as q}from"./LabeledValue.CxxfjE_4.js";var ue=Z('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function pe(N,a){let e=z(a,"opacity",3,.9),t=z(a,"width",3,"1.5rem"),p=z(a,"color",3,"currentColor");var n=ue();R(n,"stroke-width",2),m(()=>{R(n,"stroke",p()),R(n,"width",t()),R(n,"opacity",e())}),v(N,n)}var fe=w("<div><!></div>"),he=w('<div class="row svelte-165b9or"><div></div> <div class="deleteBtn svelte-165b9or"><!></div></div>'),be=w('<div class="keyContainer svelte-165b9or"><div class="row svelte-165b9or"><span class="label svelte-165b9or"> </span> <div class="nameUv svelte-165b9or"><b> </b> <!></div></div> <div class="row svelte-165b9or"><span class="label svelte-165b9or"> </span> <span class="font-mono"> </span></div> <div class="row svelte-165b9or"><span class="label svelte-165b9or"> </span> <span class="font-mono"> </span></div> <!></div>');function ge(N,a){G(a,!0);let e=K();var t=be(),p=r(t),n=r(p),D=r(n,!0);s(n);var f=u(n,2),l=r(f),g=r(l,!0);s(l);var $=u(l,2);{var h=b=>{te(b,{get text(){return e.account.userVerifiedTooltip},children:(L,V)=>{var j=fe();ae(j,"margin-bottom","-.25rem");var F=r(j);pe(F,{width:18,color:"var(--col-acnt)"}),s(j),v(L,j)},$$slots:{default:!0}})};O($,b=>{a.passkey.user_verified&&b(h)})}s(f),s(p);var _=u(p,2),B=r(_),x=r(B,!0);s(B);var U=u(B,2),E=r(U,!0);m(()=>d(E,P(a.passkey.registered))),s(U),s(_);var M=u(_,2),C=r(M),o=r(C,!0);s(C);var c=u(C,2),i=r(c,!0);m(()=>d(i,P(a.passkey.last_used))),s(c),s(M);var I=u(M,2);{var y=b=>{var L=he(),V=u(r(L),2),j=r(V);J(j,{level:-3,onclick:()=>a.onDelete(a.passkey.name),children:(F,De)=>{T();var Q=A();m(()=>d(Q,e.common.delete)),v(F,Q)},$$slots:{default:!0}}),s(V),s(L),v(b,L)};O(I,b=>{a.showDelete&&b(y)})}s(t),m(()=>{d(D,e.mfa.passkeyName),d(g,a.passkey.name),d(x,e.mfa.registerd),d(o,e.mfa.lastUsed)}),v(N,t),H()}var $e=w('<div class="device-header svelte-9n911e"><div class="device-head font-mono svelte-9n911e"> </div></div>'),ye=w('<div class="saveButton svelte-9n911e"><!></div>'),we=w("<div><!></div>"),ke=w("<div> </div>"),_e=w('<div class="device svelte-9n911e"><!> <div class="row svelte-9n911e"><!> <!></div> <!> <!> <!> <!></div>');function xe(N,a){G(a,!0);let e=z(a,"device",15),t=K(),p=W(S(re(()=>e().name)));async function n(){let f={device_id:e().id,name:k(p)},l=await ie(`/auth/v1/users/${a.userId}/devices`,f);l.error?console.error(l.error):e(e().name=k(p),!0)}async function D(){let f={device_id:e().id},l=await le(`/auth/v1/users/${a.userId}/devices`,f);l.error?console.error(l.error):e(e().refresh_exp=void 0,!0)}ce(N,{summary:f=>{var l=$e(),g=r(l),$=r(g,!0);s(g),s(l),m(()=>d($,e().name)),v(f,l)},details:f=>{var l=_e(),g=r(l);q(g,{get label(){return t.account.deviceId},mono:!0,children:(o,c)=>{T();var i=A();m(()=>d(i,e().id)),v(o,i)},$$slots:{default:!0}});var $=u(g,2),h=r($);ne(h,{autocomplete:"off",width:"17rem",get label(){return t.account.deviceName},get placeholder(){return t.account.deviceName},onEnter:n,pattern:me,required:!0,get value(){return k(p)},set value(o){X(p,S(o))},children:(o,c)=>{T();var i=A();m(()=>d(i,t.account.deviceName)),v(o,i)},$$slots:{default:!0}});var _=u(h,2);{var B=o=>{var c=ye(),i=r(c);J(i,{onclick:n,children:(I,y)=>{T();var b=A();m(()=>d(b,t.common.save)),v(I,b)},$$slots:{default:!0}}),s(c),v(o,c)};O(_,o=>{k(p)!==e().name&&o(B)})}s($);var x=u($,2);q(x,{get label(){return t.account.regDate},children:(o,c)=>{T();var i=A();m(()=>d(i,P(e().created))),v(o,i)},$$slots:{default:!0}});var U=u(x,2);q(U,{get label(){return t.account.accessExp},children:(o,c)=>{T();var i=A();m(()=>d(i,P(e().access_exp))),v(o,i)},$$slots:{default:!0}});var E=u(U,2);{var M=o=>{q(o,{get label(){return t.account.accessRenew},button:c=>{J(c,{get ariaLabel(){return t.common.delete},invisible:!0,onclick:D,children:(i,I)=>{var y=we(),b=r(y);de(b,{}),s(y),m(()=>R(y,"title",t.common.delete)),v(i,y)},$$slots:{default:!0}})},children:(c,i)=>{var I=ke(),y=r(I,!0);m(()=>d(y,P(e().refresh_exp))),s(I),v(c,I)},$$slots:{button:!0,default:!0}})};O(E,o=>{e().refresh_exp&&o(M)})}var C=u(E,2);q(C,{get label(){return t.account.regIp},children:(o,c)=>{T();var i=A();m(()=>d(i,e().peer_ip)),v(o,i)},$$slots:{default:!0}}),s(l),v(f,l)},$$slots:{summary:!0,details:!0}}),H()}var Ie=w('<div class="head svelte-w0g6eh"> </div> <div class="devices svelte-w0g6eh"><!></div>',1);function Ne(N,a){G(a,!0);let e=K(),t=W(S([]));se(()=>{p()});async function p(){let h=await ve(`/auth/v1/users/${a.userId}/devices`);h.body?X(t,S(h.body)):console.error("error fetching devices: "+h.error)}var n=Ie(),D=Y(n),f=r(D,!0);s(D);var l=u(D,2),g=r(l);{var $=h=>{var _=ee(),B=Y(_);oe(B,19,()=>k(t),x=>x.id,(x,U,E)=>{xe(x,{get userId(){return a.userId},get device(){return k(t)[k(E)]},set device(M){k(t)[k(E)]=M}})}),v(h,_)};O(g,h=>{a.userId&&h($)})}s(l),m(()=>d(f,(e==null?void 0:e.account.devicesDesc)||"Devices linked to this account")),v(N,n),H()}export{Ne as D,ge as U};
