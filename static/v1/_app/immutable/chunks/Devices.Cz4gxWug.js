import{w as ea,x as Q,y as _e,F as aa,I as $e,a0 as ta,aD as sa,aB as oa,A as ia,a1 as ra,a2 as la,aY as na,d as Ie,W as ie,V as va,ai as ca,a7 as m,a9 as u,a6 as y,g as l,p as J,o as Ee,j as R,aZ as da,n as re,a5 as _,a as ee,a3 as G,a4 as le,h as ae,a8 as ua}from"./index-client.Cqn5bTAA.js";import{l as Te,j as ma,w as Ce,d as K,s as I,e as A}from"./render.BxZ_8nPF.js";import"./disclose-version.BDr9Qe-U.js";import{e as Se,i as fa}from"./ThemeSwitch.Nnphyg3I.js";import{d as Ne,e as pa,a as k,t as C,b as Me,c as De,n as ba}from"./template.A7ni-K4i.js";import{s as U,r as Re,l as xa,c as je,h as ha,t as Ae,b as wa,d as ka}from"./helpers.CZ9R9OcM.js";import{p as E,s as ne,b as ga,a as ve}from"./props.YICxVAwD.js";import{r as ce}from"./legacy-client.B3KsQmEJ.js";import{i as L}from"./if.CfO-_epY.js";import{p as V}from"./proxy.Ce5Ub1RB.js";import{a4 as ya,O as Ue,a5 as _a,a6 as $a,a7 as Ia}from"./dataFetching.BTF7Y2Cd.js";import{s as de}from"./snippet.YItZinX2.js";import{b as Oe}from"./this.ETDJznD-.js";import{w as Ea}from"./index.BwtYkuQa.js";import{i as Xe}from"./tweened.D7sgWmKu.js";import{I as Ta}from"./Input.DikYy5qt.js";import{I as Ca,a as Sa}from"./CheckIcon.iy0kaw_K.js";import{u as Na}from"./i18n.svelte.CZcZQkVy.js";function Pe(e,t,o,a,i){var s=e,n="",c;ea(()=>{if(n===(n=t()??"")){Q&&_e();return}c!==void 0&&(la(c),c=void 0),n!==""&&(c=aa(()=>{if(Q){$e.data;for(var v=_e(),f=v;v!==null&&(v.nodeType!==8||v.data!=="");)f=v,v=ta(v);if(v===null)throw sa(),oa;Ne($e,f),s=ia(v);return}var $=n+"",h=pa($);Ne(ra(h),h.lastChild),s.before(h)}))})}function Ma(e,t,o=t){var a=na();Te(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=ue(e)?me(s):s,o(s),a&&s!==(s=t())){var n=e.selectionStart,c=e.selectionEnd;e.value=s??"",c!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(c,e.value.length))}}),(Q&&e.defaultValue!==e.value||Ie(t)==null&&e.value)&&o(ue(e)?me(e.value):e.value),ie(()=>{var i=t();ue(e)&&i===me(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Da(e,t,o=t){Te(e,"change",a=>{var i=a?e.defaultChecked:e.checked;o(i)}),(Q&&e.defaultChecked!==e.checked||Ie(t)==null)&&o(e.checked),ie(()=>{var a=t();e.checked=!!a})}function ue(e){var t=e.type;return t==="number"||t==="range"}function me(e){return e===""?null:+e}function Ra(e,t,o=t){var a=e==="x",i=()=>Ce(()=>{s=!0,clearTimeout(n),n=setTimeout(c,100),o(window[a?"scrollX":"scrollY"])});addEventListener("scroll",i,{passive:!0});var s=!1,n,c=()=>{s=!1},v=!0;ie(()=>{var f=t();v?v=!1:!s&&f!=null&&(s=!0,clearTimeout(n),scrollTo(window.scrollX,f),n=setTimeout(c,100))}),va(i),ca(()=>{removeEventListener("scroll",i)})}function ja(e,t){ma(window,["resize"],()=>Ce(()=>t(window[e])))}var Aa=(e,t,o)=>t(l(o)),Ua=C('<button class="btn font-label svelte-n2aryx"> </button>'),Oa=C('<div class="bar noselect svelte-n2aryx"></div>');function Xa(e,t){let o=E(t,"labels",19,()=>[]),a=E(t,"selected",15);var i=Oa();Se(i,21,o,fa,(s,n)=>{var c=Ua();c.__click=[Aa,a,n];var v=m(c,!0);u(c),y(()=>{U(c,"data-selected",a()===l(n)),I(v,l(n))}),A("keypress",c,()=>a(l(n))),k(s,c)}),u(i),k(e,i)}K(["click"]);function fe(e,t,o,a){if(typeof o=="number"||Xe(o)){const i=a-o,s=(o-t)/(e.dt||1/60),n=e.opts.stiffness*i,c=e.opts.damping*s,v=(n-c)*e.inv_mass,f=(s+v)*e.dt;return Math.abs(f)<e.opts.precision&&Math.abs(i)<e.opts.precision?a:(e.settled=!1,Xe(o)?new Date(o.getTime()+f):o+f)}else{if(Array.isArray(o))return o.map((i,s)=>fe(e,t[s],o[s],a[s]));if(typeof o=="object"){const i={};for(const s in o)i[s]=fe(e,t[s],o[s],a[s]);return i}else throw new Error(`Cannot spring ${typeof o} values`)}}function pe(e,t={}){const o=Ea(e),{stiffness:a=.15,damping:i=.8,precision:s=.01}=t;let n,c,v,f=e,$=e,h=1,M=0,N=!1;function d(b,p={}){$=b;const x=v={};return e==null||p.hard||r.stiffness>=1&&r.damping>=1?(N=!0,n=Re.now(),f=b,o.set(e=$),Promise.resolve()):(p.soft&&(M=1/((p.soft===!0?.5:+p.soft)*60),h=0),c||(n=Re.now(),N=!1,c=xa(w=>{if(N)return N=!1,c=null,!1;h=Math.min(h+M,1);const D={inv_mass:h,opts:r,settled:!0,dt:(w-n)*60/1e3},O=fe(D,f,e,$);return n=w,f=e,o.set(e=O),D.settled&&(c=null),!D.settled})),new Promise(w=>{c.promise.then(()=>{x===v&&w()})}))}const r={set:d,update:(b,p)=>d(b($,e),p),subscribe:o.subscribe,stiffness:a,damping:i,precision:s};return r}var Pa=C('<div class="tooltip svelte-op12yu"><!></div>'),Ha=C('<div role="none"><!> <!></div>');function be(e,t){J(t,!0);const o=ne(),a=()=>ve(l(f),"$coords",o);let i=E(t,"xOffset",3,10),s=E(t,"yOffset",3,10),n=E(t,"text",3,""),c=E(t,"html",3,""),v=G(!1),f=G(void 0),$;Ee(()=>{ga(R(f,V(pe({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",o)}),da(()=>{clearTimeout($)});function h(){clearTimeout($),R(v,!0)}function M(){$=setTimeout(()=>{R(v,!1)},100)}function N(x){l(f).set({x:x.clientX+i(),y:x.clientY+s()})}var d=Ha();d.__mouseover=h,d.__mouseout=M,d.__mousemove=N;var r=m(d);de(r,()=>t.children??re);var b=_(r,2);{var p=x=>{var w=Pa(),D=m(w);{var O=S=>{var g=Me();y(()=>I(g,n())),k(S,g)},B=S=>{var g=De(),j=le(g);{var q=H=>{var W=De(),z=le(W);Pe(z,c),k(H,W)};L(j,H=>{c()&&H(q)},!0)}k(S,g)};L(D,S=>{n()?S(O):S(B,!1)})}u(w),y(()=>U(w,"style",`top: ${`${a().y}px`??""}; left: ${`${a().x}px`??""}`)),je(7,w,()=>ha,()=>({delay:400,duration:200})),k(x,w)};L(b,x=>{l(v)&&x(p)})}u(d),A("focus",d,h),A("blur",d,M),k(e,d),ee()}K(["mouseover","mouseout","mousemove"]);var Va=C('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function Wa(e,t){J(t,!0);const o=ne(),a=()=>ve(n,"$margin",o);let i=E(t,"selected",15,!1);const s=11;let n=pe(0,{stiffness:.15,damping:.5});ce(()=>{n.set(i()?s:0)});function c(){i(!i())}var v=Va();v.__click=c;var f=m(v);u(v),y(()=>{U(v,"aria-checked",i()),Ae(v,"selectedOuter",i()),U(f,"style",`margin-left: ${`${a()}px`??""}`),Ae(f,"selected",i())}),A("keypress",v,c),k(e,v),ee()}K(["click"]);var Ya=ba('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function He(e,t){let o=E(t,"color",3,"var(--col-text)"),a=E(t,"opacity",3,.9),i=E(t,"width",3,20);var s=Ya();U(s,"stroke-width",2),y(()=>{U(s,"width",i()),U(s,"color",o()),U(s,"opacity",a())}),k(e,s)}var Ga=C('<div class="body svelte-1xshgki"><!></div>'),La=C('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function Ve(e,t){J(t,!0);const o=ne(),a=()=>ve(h,"$rotate",o);let i=E(t,"idx",11,0),s=E(t,"show",15),n=E(t,"expandedCallback",3,()=>{}),c=G(!1),v=G(void 0),f=G(void 0),$=i()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const h=pe(0,{stiffness:.1,damping:.4});function M(){!s()&&n()&&n()(),s(!s())}function N(){const g=l(v).offsetTop+l(f).scrollHeight+100;window.innerHeight+window.scrollY-g<0&&window.scroll({top:g,behavior:"smooth"})}ce(()=>{s()?h.set(90):h.set(0)}),ce(()=>{s()&&l(f)&&setTimeout(()=>{N()},100)});var d=La(),r=m(d),b=m(r);b.__click=M;var p=m(b),x=m(p),w=ae(()=>l(c)?"var(--col-act2a)":"var(--col-act2)");He(x,{get color(){return l(w)}}),u(p),u(b);var D=_(b,2),O=m(D);de(O,()=>t.header??re),u(D),u(r);var B=_(r,2);{var S=g=>{var j=Ga(),q=m(j);de(q,()=>t.body??re),u(j),Oe(j,H=>R(f,H),()=>l(f)),je(7,j,()=>ka,()=>({duration:200})),k(g,j)};L(B,g=>{s()&&g(S)})}u(d),Oe(d,g=>R(v,g),()=>l(v)),y(()=>{wa(d,"border-left",s()?$:"none"),U(p,"style",`rotate: ${a()??""}deg`)}),A("mouseenter",b,()=>R(c,!0)),A("mouseleave",b,()=>R(c,!1)),A("keypress",b,M),k(e,d),ee()}K(["click"]);var Ba=C('<div class="device-header svelte-oumbix"><div class="device-head font-mono svelte-oumbix"> </div></div>'),qa=(e,t,o)=>t(l(o).id),za=C('<div role="button" tabindex="0" class="icon-btn-input svelte-oumbix"><!></div>'),Fa=(e,t,o)=>t(l(o).id),Za=C('<div role="button" tabindex="0" class="icon-btn-value svelte-oumbix"><!></div>'),Ka=C('<div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="row svelte-oumbix"><div class="value svelte-oumbix"> </div> <!></div></div>'),Qa=C('<div class="device svelte-oumbix"><div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value font-mono svelte-oumbix"> </div></div> <div class="row svelte-oumbix"><!> <!></div> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div> <!> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div></div>'),Ja=C('<div class="head svelte-oumbix"> </div> <div class="devices svelte-oumbix"></div>',1);function et(e,t){J(t,!0);let o=E(t,"userId",3,""),a=Na(),i=G(V([])),s=V({}),n=V({});Ee(()=>{c()});async function c(){let d=await ya(o()),r=await d.json();if(d.ok){for(let b of r)n[b.id]=b.name;R(i,V(r))}else console.error("error fetching devices: "+r.message)}async function v(d){let r=n[d];if($a.test(r))s[d]="";else{s[d]=(a==null?void 0:a.common.invalidInput)||"Invalid Input";return}let b={device_id:d,name:r},p=await _a(o(),b);if(p.ok){s[d]="";for(let x of l(i))if(x.id===d){x.name=r;break}R(i,V([...l(i)])),n[d]=r}else{let x=await p.json();console.error(x)}}async function f(d){let r={device_id:d},b=await Ia(o(),r);if(b.ok){for(let p of l(i))if(p.id===d){p.refresh_exp=void 0;break}R(i,V([...l(i)]))}else{let p=await b.json();console.error(p)}}var $=Ja(),h=le($),M=m(h,!0);u(h);var N=_(h,2);Se(N,21,()=>l(i),d=>d.id,(d,r)=>{Ve(d,{header:b=>{var p=Ba(),x=m(p),w=m(x,!0);u(x),u(p),y(()=>I(w,l(r).name)),k(b,p)},body:b=>{var p=Qa(),x=m(p),w=m(x),D=m(w,!0);y(()=>I(D,(a==null?void 0:a.account.deviceId.toUpperCase())||"ID")),u(w);var O=_(w,2),B=m(O,!0);u(O),u(x);var S=_(x,2),g=m(S),j=ae(()=>(a==null?void 0:a.account.deviceName.toUpperCase())||"Name");Ta(g,{autocomplete:"off",get placeholder(){return l(j)},get value(){return n[l(r).id]},set value(T){n[l(r).id]=T},get error(){return s[l(r).id]},set error(T){s[l(r).id]=T},$$events:{enter:()=>v(l(r).id)},children:(T,Y)=>{ua();var X=Me();y(()=>I(X,(a==null?void 0:a.account.deviceName.toUpperCase())||"NAME")),k(T,X)},$$slots:{default:!0}});var q=_(g,2);{var H=T=>{var Y=ae(()=>(a==null?void 0:a.common.save)||"Save");be(T,{get text(){return l(Y)},children:(X,ye)=>{var P=za();P.__click=[qa,v,r];var F=m(P);Ca(F,{color:"var(--col-ok)",width:24}),u(P),A("keypress",P,()=>v(l(r).id)),k(X,P)},$$slots:{default:!0}})};L(q,T=>{n[l(r).id]!=l(r).name&&T(H)})}u(S);var W=_(S,2),z=m(W),We=m(z,!0);y(()=>I(We,(a==null?void 0:a.account.regDate.toUpperCase())||"REGISTRATION DATE")),u(z);var xe=_(z,2),Ye=m(xe,!0);u(xe),u(W);var te=_(W,2),se=m(te),Ge=m(se,!0);y(()=>I(Ge,(a==null?void 0:a.account.accessExp.toUpperCase())||"ACCESS EXPIRES")),u(se);var he=_(se,2),Le=m(he,!0);y(()=>I(Le,Ue(l(r).access_exp))),u(he),u(te);var we=_(te,2);{var Be=T=>{var Y=Ka(),X=m(Y),ye=m(X,!0);y(()=>I(ye,(a==null?void 0:a.account.accessRenew.toUpperCase())||"ACCESS RENEW UNTIL")),u(X);var P=_(X,2),F=m(P),Fe=m(F,!0);y(()=>I(Fe,Ue(l(r).refresh_exp))),u(F);var Ze=_(F,2),Ke=ae(()=>(a==null?void 0:a.account.accessRenewDelete)||"Delete the possibility to renew");be(Ze,{get text(){return l(Ke)},children:(Qe,at)=>{var Z=Za();Z.__click=[Fa,f,r];var Je=m(Z);Sa(Je,{color:"var(--col-err)",width:24}),u(Z),A("keypress",Z,()=>f(l(r).id)),k(Qe,Z)},$$slots:{default:!0}}),u(P),u(Y),k(T,Y)};L(we,T=>{l(r).refresh_exp&&T(Be)})}var ke=_(we,2),oe=m(ke),qe=m(oe,!0);y(()=>I(qe,(a==null?void 0:a.account.regIp.toUpperCase())||"REGISTRATION FROM IP")),u(oe);var ge=_(oe,2),ze=m(ge,!0);u(ge),u(ke),u(p),y(()=>{I(B,l(r).id),I(Ye,l(r).created),I(ze,l(r).peer_ip)}),k(b,p)},$$slots:{header:!0,body:!0}})}),u(N),y(()=>I(M,(a==null?void 0:a.account.devicesDesc)||"Devices linked to this account")),k(e,$),ee()}K(["click"]);export{et as D,Ve as E,He as I,Wa as S,Xa as T,be as a,Ma as b,ja as c,Ra as d,Da as e,Pe as h};
