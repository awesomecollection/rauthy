import"./disclose-version.BDr9Qe-U.js";import{p as X,b as z,a5 as j,a as Y,a3 as H,a4 as I,g as t,a7 as $,a9 as x,j as w,a6 as A,h as q,d as oe}from"./index-client.C1uYfxHd.js";import{a as k,t as O,c as G,n as Q}from"./template.BehheIQn.js";import{b as u,r as re,s as W,t as fe}from"./index.BcsnDkjo.js";import{p as R}from"./proxy.bZKuG6wn.js";import{p as d}from"./props.OoymhrXq.js";import{u as he}from"./i18n.svelte.C5UT6hSp.js";import{l as J,M as ae,N as ge}from"./helpers.EoWe9H8J.js";import{e as ne,d as se,s as le}from"./render.DlGhCWX2.js";import{i as N}from"./if.DL6pUnI4.js";import{B as K,b as ie,e as ce,i as ve,a as be}from"./ThemeSwitch.B8t8VQsu.js";import{b as Z}from"./this.B2VKympU.js";import{s as ee}from"./snippet.D-0bt_Xy.js";var me=O('<div><!> <div class="popover svelte-15eoy2j" popover="auto"><div class="inner fade-in svelte-15eoy2j"><!></div></div></div>');function de(f,e){X(e,!0);let o=d(e,"ref",15),c=d(e,"roleButton",3,"button"),s=d(e,"offsetLeft",3,"0px"),a=d(e,"offsetTop",3,"0px"),m=d(e,"close",15);const C=J(),B=J();let i=A(void 0),T=A(!1);z(()=>{m(p)});function M(l){if(l.stopPropagation(),o()&&t(i))if(e.absolute)t(i).style.top=a(),t(i).style.left=s();else{let b=o().getBoundingClientRect();t(i).style.top=`calc(${b.bottom+window.scrollY}px + ${a()})`,t(i).style.left=`calc(${b.left+window.scrollX}px + ${s()})`}else console.warn("button and popover ref missing")}function p(){var l;(l=t(i))==null||l.hidePopover()}function U(l){var r;let b=l.newState;w(T,b==="open"),(r=e.onToggle)==null||r.call(e,b)}var E=me(),y=$(E);K(y,{get role(){return c()},id:C,ariaControls:B,popovertarget:B,onclick:M,get invisible(){return e.btnInvisible},get isDisabled(){return e.btnDisabled},get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get ref(){return o()},set ref(l){o(l)},children:(l,b)=>{var r=G(),h=H(r);ee(h,()=>e.button),k(l,r)},$$slots:{default:!0}});var S=I(y,2);u(S,"id",B),u(S,"aria-labelledby",C);var P=$(S),n=$(P);{var v=l=>{var b=G(),r=H(b);{var h=L=>{var g=G(),D=H(g);ee(D,()=>e.children),k(L,g)};N(r,L=>{t(T)&&L(h)})}k(l,b)},_=l=>{var b=G(),r=H(b);ee(r,()=>e.children),k(l,b)};N(n,l=>{e.lazy?l(v):l(_,!1)})}x(P),x(S),Z(S,l=>w(i,l),()=>t(i)),x(E),j(()=>u(S,"aria-label",e.ariaLabel)),ne("toggle",S,U),k(f,E),Y()}var we=Q('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function ke(f,e){let o=d(e,"opacity",3,.9),c=d(e,"width",3,"1.5rem"),s=d(e,"color",3,"currentColor");var a=we();u(a,"stroke-width",2),j(()=>{u(a,"stroke",s()),u(a,"width",c()),u(a,"opacity",o())}),k(f,a)}var Le=Q('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function ye(f,e){let o=d(e,"opacity",3,.9),c=d(e,"width",3,"1.5rem"),s=d(e,"color",3,"currentColor");var a=Le();u(a,"stroke-width",2),j(()=>{u(a,"stroke",s()),u(a,"width",c()),u(a,"opacity",o())}),k(f,a)}function xe(f,e,o,c){var s,a,m;switch(f.code){case"Enter":e();break;case"Tab":(s=o.onTab)==null||s.call(o,c());break;case"ArrowUp":(a=o.onUp)==null||a.call(o,c());break;case"ArrowDown":(m=o.onDown)==null||m.call(o,c());break}}var Te=O('<div class="options svelte-hargsl"><!></div>'),De=f=>f.stopPropagation(),$e=O("<option></option>"),Ce=O('<datalist class="absolute svelte-hargsl"></datalist>'),Be=O('<span class="backspace svelte-hargsl"><!></span>'),Se=O('<div class="btnSearch svelte-hargsl"><!></div>'),_e=O('<search class="flex container svelte-hargsl"><!> <input type="search" autocomplete="off" placeholder="Search" class="svelte-hargsl"> <!> <div class="relative"><div class="absolute btnDelete svelte-hargsl"><!></div></div> <!></search>');function Me(f,e){X(e,!0);let o=d(e,"id",19,J),c=d(e,"value",15,""),s=d(e,"option",15),a=d(e,"focus",15),m=d(e,"width",3,"100%");const C=J();let B=A(void 0),i=q(()=>e.datalist&&e.datalist.length>0?C:void 0);z(()=>{a(M)});function T(){var r;(r=e.onSearch)==null||r.call(e,c())}function M(){var r;(r=t(B))==null||r.focus()}var p=_e(),U=$(p);{var E=r=>{var h=Te(),L=$(h);te(L,{ariaLabel:"Search Option",get options(){return e.options},borderless:!0,offsetLeft:"-.25rem",get value(){return s()},set value(g){s(g)}}),x(h),k(r,h)};N(U,r=>{e.options&&r(E)})}var y=I(U,2);re(y),y.__click=[De],y.__keydown=[xe,T,e,c],Z(y,r=>w(B,r),()=>t(B));var S=I(y,2);{var P=r=>{var h=Ce();u(h,"id",C),ce(h,21,()=>e.datalist,ve,(L,g)=>{var D=$e(),V={};j(()=>{V!==(V=t(g))&&(D.value=(D.__value=t(g))==null?"":t(g))}),k(L,D)}),x(h),k(r,h)};N(S,r=>{e.datalist&&r(P)})}var n=I(S,2),v=$(n),_=$(v);K(_,{ariaLabel:"Delete Input",invisible:!0,onclick:()=>c(""),children:(r,h)=>{var L=Be(),g=$(L);ke(g,{color:"hsl(var(--bg-high))"}),x(L),k(r,L)},$$slots:{default:!0}}),x(v),x(n);var l=I(n,2);{var b=r=>{var h=Se(),L=$(h);K(L,{ariaLabel:"Search",invisible:!0,onclick:T,children:(g,D)=>{ye(g,{})},$$slots:{default:!0}}),x(h),k(r,h)};N(l,r=>{e.onSearch&&r(b)})}x(p),j(()=>{W(p,"border",e.borderless?void 0:"1px solid hsl(var(--bg-high))"),W(p,"width",m()),u(y,"id",o()),u(y,"list",t(i)),u(y,"aria-label",e.ariaLabel||"Search"),u(y,"pattern",e.pattern)}),ne("focus",y,()=>{var r;return(r=e.onFocus)==null?void 0:r.call(e)}),ie(y,c),k(f,p),Y()}se(["click","keydown"]);var Oe=Q('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>');function Ue(f,e){let o=d(e,"opacity",3,.9),c=d(e,"width",3,"1.5rem"),s=d(e,"color",3,"currentColor");var a=Oe();u(a,"stroke-width",2),j(()=>{u(a,"width",c()),u(a,"color",s()),u(a,"opacity",o())}),k(f,a)}function je(f,e,o,c,s){let a=f.code;a==="ArrowDown"?(f.preventDefault(),e()&&w(o,t(o)+1)):a==="ArrowUp"?(f.preventDefault(),e()&&w(o,t(o)-1)):a==="Enter"&&t(o)>-1?c(t(s)[t(o)]):a==="Enter"&&t(o)===-1&&t(s).length===1&&c(t(s)[0])}var Ae=O('<div class="btn svelte-5ktp6l"><div class="btnText svelte-5ktp6l"> </div> <!></div>'),Ee=O('<div class="optPopover svelte-5ktp6l"> </div>'),Ie=O('<div role="listbox" tabindex="0" class="popover svelte-5ktp6l"><!> <div class="popoverOptions svelte-5ktp6l"></div></div> <input type="hidden" aria-hidden="true">',1);function te(f,e){X(e,!0);let o=d(e,"ref",15),c=d(e,"options",19,()=>[]),s=d(e,"value",15),a=d(e,"borderless",3,!1),m=d(e,"withSearch",3,!1),C=A(void 0),B=A(void 0),i=A(R(m()?-1:0)),T=A(void 0),M=A(""),p=q(()=>{if(!m())return c();if(typeof s()=="string")return c().filter(v=>v.toLowerCase().includes(t(M).toLowerCase()));let n=Number.parseInt(t(M))||s();return c().filter(v=>v===n)}),U=!1;z(()=>{var v;let n=s();U?(v=e.onChange)==null||v.call(e,n):U=!0}),z(()=>{var n,v;if(t(i)===-1&&((n=t(C))==null||n.scrollTo({top:0,behavior:"smooth"})),m()){if(t(i)<0||t(i)>t(p).length-1){w(i,-1),(v=t(T))==null||v();return}}else t(i)<0?w(i,t(p).length-1):t(i)>t(p).length-1&&w(i,0),E()});function E(){if(t(C)){let n=t(C).getElementsByTagName("button")[t(i)];n==null||n.scrollIntoView({behavior:"smooth",block:"center"}),n==null||n.focus()}else console.error("refOptions is undefined")}function y(n){var v;n==="open"&&(m()?(w(i,-1),(v=t(T))==null||v()):(w(i,R(c().findIndex(_=>_===s())||0)),E()))}function S(){return t(p).length>0?!0:(w(i,-1),!1)}function P(n){s(n),w(M,""),setTimeout(()=>{var v;(v=t(B))==null||v()},20)}de(f,{get ariaLabel(){return e.ariaLabel},roleButton:"combobox",btnInvisible:!0,get offsetTop(){return e.offsetTop},get offsetLeft(){return e.offsetLeft},onToggle:y,get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get ref(){return o()},set ref(n){o(n)},get close(){return t(B)},set close(n){w(B,R(n))},button:n=>{var v=Ae(),_=$(v),l=$(_,!0);x(_);var b=I(_,2);Ue(b,{width:".8rem"}),x(v),j(()=>{u(v,"data-border",!a()),le(l,s())}),k(n,v)},children:(n,v)=>{var _=Ie(),l=H(_);l.__keydown=[je,S,i,P,p];var b=$(l);{var r=g=>{Me(g,{onFocus:()=>w(i,-1),get value(){return t(M)},set value(D){w(M,R(D))},get focus(){return t(T)},set focus(D){w(T,R(D))}})};N(b,g=>{m()&&g(r)})}var h=I(b,2);ce(h,21,()=>t(p),ve,(g,D,V)=>{K(g,{invisible:!0,invisibleOutline:!0,onclick:()=>P(t(D)),children:(ue,ze)=>{var F=Ee(),pe=$(F,!0);x(F),j(()=>{u(F,"aria-selected",s()===t(D)),u(F,"data-focus",t(i)===V),le(pe,t(D))}),k(ue,F)},$$slots:{default:!0}})}),x(h),Z(h,g=>w(C,g),()=>t(C)),x(l);var L=I(l,2);re(L),j(()=>{W(l,"max-height",e.maxHeight),u(L,"name",e.name)}),ie(L,s),k(n,_)},$$slots:{button:!0,default:!0}}),Y()}se(["keydown"]);var Pe=O('<div class="svelte-10y6iii"><!></div>');function Re(f,e){X(e,!0);let o=d(e,"openTop",3,!0);const c=";Path=/;SameSite=Lax;Max-Age=157680000";let s=he(),a=oe(()=>s.lang),m=A(R(a)),C=q(()=>o()?`-${ae.length*2+2}rem`:void 0),B=q(()=>o()?".2rem":void 0);z(()=>{let p=ge("locale"),U=oe(()=>t(m));p&&p!==U&&(document.cookie="locale="+U+c)}),z(()=>{t(m)!==a&&i()});async function i(){if(document.cookie="locale="+t(m).toLowerCase()+c,e.updateBackend){let p=await be("/auth/v1/update_language");if(p.error){console.error(p.error);return}}window.location.reload()}var T=Pe(),M=$(T);te(M,{get ariaLabel(){return s.common.selectI18n},options:ae,borderless:!0,get offsetTop(){return t(C)},get offsetLeft(){return t(B)},get value(){return t(m)},set value(p){w(m,R(p))}}),x(T),j(()=>fe(T,"absolute",e.absolute)),k(f,T),Y()}export{Re as L,te as O,de as P};
