import"./disclose-version.BDr9Qe-U.js";import{p as b,t as v,a as P,c as T,r as D}from"./index-client.Di99sPv0.js";import{e as R}from"./render.Cjc4CIr8.js";import{a as k,t as y}from"./template.BEKX6jgL.js";import{s as E}from"./snippet.D2r9qTNj.js";import{s as l}from"./class.BCapn1bP.js";import{p as f}from"./props.ClgLgKUv.js";import{f as F}from"./pow.BIzAC1fj.js";import{u as x}from"./form.DekAF1-C.js";import{a as A,e as O}from"./fetch.DxJS_Pk_.js";var V=y("<form><!></form>");function I(w,o){b(o,!0);let h=f(o,"method",3,"POST"),p=f(o,"isError",15),S=f(o,"convertDateToTs",19,()=>[]);async function d(c){var u;c.preventDefault();const e=c.currentTarget;if(e.reportValidity())p(!1);else{p(!0);return}const s=new FormData(e);for(let a of S()){let m=((u=s.get(a))==null?void 0:u.toString())||"",n=x(m)||"";s.set(a,(n==null?void 0:n.toString())||"")}if(o.withPowAs){let a=await F();s.set(o.withPowAs,a||"")}let t,i=new URLSearchParams;if(s.forEach((a,m)=>{i.append(m,a.toString())}),o.onSubmit){o.onSubmit(e,i);return}t=await A(e,i),t&&(t.ok?o.onResponse&&(o.onResponse(t),o.resetOnSubmit&&t.ok&&e.reset()):await O(t))}var r=V(),g=T(r);E(g,()=>o.children),D(r),v(()=>{l(r,"action",o.action),l(r,"method",h())}),R("submit",r,d),k(w,r),P()}export{I as F};
