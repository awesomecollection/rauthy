import"./disclose-version.BDr9Qe-U.js";import{a0 as Pa,t as U,p as ie,o as Le,b as s,f as ee,g as e,a as ne,d as I,c as d,r as c,s as i,A as mt,y as Ge,aW as ha,ar as Yt,q as Cs,a9 as F,aU as Xt,k as As,$ as qa}from"./index-client.BTDbhFDr.js";import{h as Ua}from"./svelte-head.j24Rpelw.js";import{a as l,n as Ye,c as pe,t as T,b as Y}from"./template.WjkCsOA4.js";import{i as M}from"./if.DAPrgfY3.js";import{i as Ls,p as o}from"./proxy.RLXrsQTM.js";import{p as z,s as ea,a as ta,b as js,r as Ut,c as Wa}from"./props.C0sO4y_5.js";import{f as Rs,h as Ka,i as Ds,w as Ns,j as Ms,k as zs,l as Os,m as Ps}from"./dataFetching.hs0Cnov0.js";import{f as pa,S as qs,z as ft,O as ma,Q as Us,U as Ws,V as Ks,W as Gs,X as Ga,L as Fa,Y as Pt,k as Je,Z as Ba,u as Fs,$ as Wt,a0 as Ha,a1 as Bs,a2 as Hs,a3 as aa,j as tt,a4 as Ys,a5 as Vs,a6 as Ya,a7 as bt,a8 as Js,r as Va,a9 as Ja,aa as Qa,ab as Kt,ac as fa,ad as Qs,ae as Zs,af as Za,ag as Xa,ah as ga,N as Xs}from"./helpers.DwhnXD2f.js";import{s as er,g as zt,c as Qe,a as he,b as $t,I as ve,B as Te,L as wa}from"./Input.DYH-NVxC.js";import{i as tr,l as ar,s as le,c as oe,t as de,f as dt,b as _t,d as we,r as it,e as sa,a as sr,g as jt,h as Rt}from"./index.C-OHSz9E.js";import{i as es,s as ya,h as ba,D as rr,a as lr,b as ir}from"./Devices.CbOw9cF-.js";import{r as Se}from"./legacy-client.CJx5CRrl.js";import{l as nr,s as V,d as at,e as De,k as $a}from"./render.Bnf33Vuq.js";import{s as gt}from"./snippet.DrOrOIgy.js";import{w as Tt}from"./index.0CbzcHSz.js";import{I as ra,C as la}from"./CheckIcon.Bn8r0Uf_.js";import{T as ts,b as ut,e as We,i as ht,j as or}from"./ThemeSwitch.roIqycWj.js";import{b as ia}from"./this.0speaOir.js";import{P as vr}from"./PasswordPolicy.Cl5PT5DD.js";import"./legacy.CiDis14V.js";function as(p,a,t){if(p.multiple)return dr(p,a);for(var n of p.options){var r=Vt(n);if(Ls(r,a)){n.selected=!0;return}}(!t||a!==void 0)&&(p.selectedIndex=-1)}function cr(p,a){Pa(()=>{var t=new MutationObserver(()=>{var n=p.__value;as(p,n)});return t.observe(p,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function _a(p,a,t=a){var n=!0;nr(p,"change",r=>{var h=r?"[selected]":":checked",m;if(p.multiple)m=[].map.call(p.querySelectorAll(h),Vt);else{var u=p.querySelector(h)??p.querySelector("option:not([disabled])");m=u&&Vt(u)}t(m)}),Pa(()=>{var r=a();if(as(p,r,n),n&&r===void 0){var h=p.querySelector(":checked");h!==null&&(r=Vt(h),t(r))}p.__value=r,n=!1}),cr(p)}function dr(p,a){for(var t of p.options)t.selected=~a.indexOf(Vt(t))}function Vt(p){return"__value"in p?p.__value:p.value}function ur(p){return p}function hr(p){const a=p-1;return a*a*a+1}function ka(p,a){if(p===a||p!==p)return()=>p;const t=typeof p;if(t!==typeof a||Array.isArray(p)!==Array.isArray(a))throw new Error("Cannot interpolate values of different type");if(Array.isArray(p)){const n=a.map((r,h)=>ka(p[h],r));return r=>n.map(h=>h(r))}if(t==="object"){if(!p||!a)throw new Error("Object cannot be null");if(es(p)&&es(a)){const h=p.getTime(),m=a.getTime()-h;return u=>new Date(h+u*m)}const n=Object.keys(a),r={};return n.forEach(h=>{r[h]=ka(p[h],a[h])}),h=>{const m={};return n.forEach(u=>{m[u]=r[u](h)}),m}}if(t==="number"){const n=a-p;return r=>p+r*n}throw new Error(`Cannot interpolate ${t} values`)}function pr(p,a={}){const t=Tt(p);let n,r=p;function h(m,u){if(r=m,p==null)return t.set(p=m),Promise.resolve();let E=n,S=!1,{delay:v=0,duration:w=400,easing:f=ur,interpolate:A=ka}={...a,...u};if(w===0)return E&&(E.abort(),E=null),t.set(p=r),Promise.resolve();const k=tr.now()+v;let g;return n=ar(y=>{if(y<k)return!0;S||(g=A(p,m),typeof w=="function"&&(w=w(p,m)),S=!0),E&&(E.abort(),E=null);const $=y-k;return $>w?(t.set(p=m),!1):(t.set(p=g(f($/w))),!0)}),n.promise}return{set:h,update:(m,u)=>h(m(r,p),u),subscribe:t.subscribe}}const mr=Tt(),fr=Tt(),Jt=Tt(""),na=Tt(!0);var gr=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg>');function wr(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=gr();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var yr=T('<div class="ver upd svelte-4tal6i"><a target="_blank" class="svelte-4tal6i"> </a></div>'),br=T('<div class="ver svelte-4tal6i"> </div>');function $r(p,a){ie(a,!0);let t=I(""),n=I(!1),r=I("");Le(()=>{h()});async function h(){let v=await Rs();if(v.ok){let w=await v.json();s(t,o(w.current)),w.last_check,w.latest,s(r,o(w.latest_url)),s(n,o(w.update_available))}}var m=pe(),u=ee(m);{var E=v=>{var w=yr(),f=d(w),A=d(f);c(f),c(w),U(()=>{le(f,"href",e(r)),V(A,`v${e(t)??""} \u26A0\uFE0F`)}),l(v,w)},S=v=>{var w=br(),f=d(w);c(w),U(()=>V(f,`v${e(t)??""}`)),l(v,w)};M(u,v=>{e(n)?v(E):v(S,!1)})}l(p,m),ne()}var _r=T('<div role="button" tabindex="0" class="close svelte-1hvg16q"><!></div> <div class="logo"><!></div>',1),kr=T('<div role="button" tabindex="0" class="burger svelte-1hvg16q"><!></div> <div></div> <div class="logo"><!></div>',1),xr=T("<!> <!>",1),Er=T('<div class="theme-collapsed svelte-1hvg16q"><!></div>'),Sr=T('<nav class="nav svelte-1hvg16q"><div><!> <div class="menu svelte-1hvg16q"><div class="links svelte-1hvg16q"><!></div></div></div> <div class="version svelte-1hvg16q"><!></div></nav>');function Ir(p,a){ie(a,!0);const t=ea(),n=()=>ta(E,"$width",t);let r=z(a,"selected",15,""),h=z(a,"widthExpanded",3,185),m=z(a,"widthCollapsed",3,60),u=z(a,"isExpanded",15,!0);const E=pr(u()?h():m(),{duration:200,easing:hr});na.subscribe(L=>u(L)),Jt.subscribe(L=>{L&&r(L)}),Se(()=>{u()?(na.set(!0),E.set(h())):(na.set(!1),setTimeout(()=>{E.set(m())},200))}),Se(()=>{r()&&Jt.set(r())}),Le(()=>{mr.set(h()),fr.set(m()),Jt.set(r())});function S(){u(!u())}var v=Sr(),w=d(v),f=d(w);{var A=L=>{var D=_r(),R=ee(D);R.__click=S;var j=d(R);ra(j,{}),c(R);var K=i(R,2),N=d(K);gt(N,()=>a.logo??mt),c(K),U(()=>oe(R,"left",`calc(${n()??""}px - 22px)`)),De("keypress",R,S),de(1,R,()=>dt,()=>({delay:500,duration:200})),de(2,R,()=>dt,()=>({duration:100})),de(1,K,()=>dt,()=>({delay:250,duration:100})),de(2,K,()=>dt,()=>({duration:20})),l(L,D)},k=L=>{var D=kr(),R=ee(D);R.__click=S,oe(R,"left","3px");var j=d(R);wr(j,{width:24}),c(R);var K=i(R,2);oe(K,"height","10px");var N=i(K,2),B=d(N);gt(B,()=>a.logo??mt),c(N),De("keypress",R,S),de(1,R,()=>dt,()=>({delay:500,duration:200})),de(2,R,()=>dt,()=>({duration:100})),de(1,N,()=>dt,()=>({delay:250,duration:100})),de(2,N,()=>dt,()=>({duration:20})),l(L,D)};M(f,L=>{u()?L(A):L(k,!1)})}var g=i(f,2),y=d(g),$=d(y);gt($,()=>a.entries??mt),c(y),c(g),c(w);var _=i(w,2),x=d(_);{var b=L=>{var D=xr(),R=ee(D);ts(R,{});var j=i(R,2);$r(j,{}),l(L,D)},C=L=>{var D=Er(),R=d(D);ts(R,{}),c(D),l(L,D)};M(x,L=>{u()?L(b):L(C,!1)})}c(_),c(v),U(()=>{oe(v,"min-width",`${n()??""}px`),oe(v,"width",`${n()??""}px`),oe(v,"padding",u()?"20px 10px":"10px 3px")}),de(1,_,()=>dt,()=>({delay:500,duration:200})),de(2,_,()=>dt,()=>({duration:100})),l(p,v),ne()}at(["click"]);var Tr=T('<div role="menuitem" tabindex="0" class="entry noselect font-label svelte-r55922"><!> <span class="label svelte-r55922"> </span></div>'),Cr=T('<div role="menuitem" tabindex="0" class="entryCollapsed noselect font-label svelte-r55922"><!> <span class="labelCollapsed svelte-r55922"> </span></div>');function wt(p,a){ie(a,!0);let t=z(a,"label",3,""),n=z(a,"slotCollapsed",3,!0),r=I(!0),h=I("hsl(var(--text))"),m=I("");Jt.subscribe(k=>s(m,o(k))),na.subscribe(k=>s(r,o(k)));let u=I(!1);function E(){e(u)?s(h,"hsl(var(--error))"):e(m)===t()?s(h,"hsl(var(--action))"):s(h,"hsl(var(--text))")}function S(){Jt.set(t())}Se(()=>{e(m)&&E()}),Se(()=>{e(u)?s(h,"hsl(var(--error))"):E()});var v=pe(),w=ee(v);{var f=k=>{var g=Tr();g.__click=S;var y=d(g);gt(y,()=>a.children??mt);var $=i(y,2),_=d($,!0);c($),c(g),U(()=>{_t(g,"selected",e(m)===t()),V(_,t())}),De("keypress",g,S),De("mouseenter",g,()=>s(u,!0)),De("mouseleave",g,()=>s(u,!1)),de(7,g,()=>dt,()=>({duration:100})),l(k,g)},A=k=>{var g=Cr();g.__click=S;var y=d(g);{var $=b=>{var C=pe(),L=ee(C);gt(L,()=>a.children??mt),l(b,C)};M(y,b=>{n()&&b($)})}var _=i(y,2),x=d(_,!0);c(_),c(g),U(()=>{_t(g,"selectedCollapsed",e(m)===t()),V(x,t())}),De("keypress",g,S),De("mouseenter",g,()=>s(u,!0)),De("mouseleave",g,()=>s(u,!1)),de(5,g,()=>dt,()=>({delay:200,duration:100})),l(k,g)};M(w,k=>{e(r)?k(f):k(A,!1)})}l(p,v),ne()}at(["click"]);const nt={"Content-Type":"application/json",Accept:"application/json"};function Ne(){return{"csrf-token":pa(),"Content-Type":"application/json",Accept:"application/json"}}async function ke(p){return p.status===403&&(await p.json()).error==="MfaRequired"&&(console.error("MFA is required for a rauthy admin account"),await er(3e3),window.location.reload()),(p.status===401||p.status===403)&&window.location.reload(),p}async function Ar(){return await fetch("/auth/v1/oidc/certs",{method:"GET",headers:nt})}async function Lr(){const p=await fetch("/auth/v1/clients",{method:"GET",headers:nt});return await ke(p)}async function jr(p){const a=await fetch("/auth/v1/clients",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Rr(p){const a=await fetch(`/auth/v1/clients/${p.id}`,{method:"PUT",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Dr(p){const a=await fetch(`/auth/v1/clients/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function Nr(p){const a=await fetch(`/auth/v1/clients/${p}/colors`,{method:"GET",headers:nt});return await ke(a)}async function Mr(p,a){const t=await fetch(`/auth/v1/clients/${p}/colors`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function zr(p){const a=await fetch(`/auth/v1/clients/${p}/colors`,{method:"DELETE",headers:Ne()});return await ke(a)}async function Or(p,a){const t=new FormData;t.append("logo",a);const n=await fetch(`/auth/v1/clients/${p}/logo`,{method:"PUT",headers:{"csrf-token":pa()},body:t});return await ke(n)}async function Pr(p){const a=await fetch(`/auth/v1/clients/${p}/logo`,{method:"DELETE",headers:Ne()});return await ke(a)}async function qr(p){const a=await fetch(`/auth/v1/clients/${p}/secret`,{method:"POST",headers:Ne()});return await ke(a)}async function Ur(p){const a=await fetch(`/auth/v1/clients/${p}/secret`,{method:"PUT",headers:Ne()});return await ke(a)}async function Wr(){const p=await fetch("/auth/v1/encryption/keys",{method:"GET",headers:nt});return await ke(p)}async function Kr(p){const a=await fetch("/auth/v1/encryption/migrate",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Gr(p){const a=await fetch("/auth/v1/events",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function ss(){const p=await fetch("/auth/v1/groups",{method:"GET",headers:nt});return await ke(p)}async function Fr(p){const a=await fetch("/auth/v1/groups",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Br(p,a){const t=await fetch(`/auth/v1/groups/${p}`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function Hr(p){const a=await fetch(`/auth/v1/groups/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function Yr(){const p=await fetch("/auth/v1/login_time",{method:"GET",headers:nt});return await ke(p)}async function Vr(p){const a=await fetch("/auth/v1/password_hash_times",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Jr(p){const a=await fetch("/auth/v1/password_policy",{method:"PUT",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Qr(p){const a=await fetch("/auth/v1/users/request_reset",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Zr(){return await fetch("/auth/v1/providers",{method:"POST",headers:Ne()})}async function Xr(p){return await fetch("/auth/v1/providers/create",{method:"POST",headers:Ne(),body:JSON.stringify(p)})}async function el(p,a){return await fetch(`/auth/v1/providers/${p}`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)})}async function tl(p){return await fetch(`/auth/v1/providers/${p}`,{method:"DELETE",headers:Ne()})}async function al(p){return await fetch(`/auth/v1/providers/${p}/delete_safe`,{method:"GET",headers:Ne()})}async function sl(p,a){const t=new FormData;t.append("logo",a);const n=await fetch(`/auth/v1/providers/${p}/img`,{method:"PUT",headers:{"csrf-token":pa()},body:t});return await ke(n)}async function rl(p){return await fetch("/auth/v1/providers/lookup",{method:"POST",headers:Ne(),body:JSON.stringify(p)})}async function ll(){const p=await fetch("/auth/v1/oidc/rotate_jwk",{method:"POST",headers:Ne()});return await ke(p)}async function il(){const p=await fetch("/auth/v1/sessions",{method:"GET",headers:nt});return await ke(p)}async function rs(p,a,t,n){let r=`/auth/v1/sessions?page_size=${p}`;a&&(r=`${r}&offset=${a}`),n&&(r=`${r}&backwards=${n}`),t&&(r=`${r}&continuation_token=${t}`);const h=await fetch(r,{method:"GET",headers:nt});return await ke(h)}async function nl(){const p=await fetch("/auth/v1/sessions",{method:"DELETE",headers:Ne()});return await ke(p)}async function ol(p){const a=await fetch(`/auth/v1/sessions/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function vl(){const p=await fetch("/auth/v1/users",{method:"GET",headers:nt});return await ke(p)}async function ls(p,a,t,n){let r=`/auth/v1/users?page_size=${p}`;a&&(r=`${r}&offset=${a}`),n&&(r=`${r}&backwards=${n}`),t&&(r=`${r}&continuation_token=${t}`);const h=await fetch(r,{method:"GET",headers:nt});return await ke(h)}async function cl(p){const a=await fetch("/auth/v1/users",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function is(p,a){const t=await fetch(`/auth/v1/users/${p}`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function dl(p){const a=await fetch(`/auth/v1/users/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function xa(){const p=await fetch("/auth/v1/users/attr",{method:"GET",headers:nt});return await ke(p)}async function ul(p){const a=await fetch("/auth/v1/users/attr",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function hl(p,a){const t=await fetch(`/auth/v1/users/attr/${p}`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function pl(p){const a=await fetch(`/auth/v1/users/attr/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function ml(p){const a=await fetch(`/auth/v1/users/${p}/attr`,{method:"GET",headers:nt});return await ke(a)}async function fl(p,a){const t=await fetch(`/auth/v1/users/${p}/attr`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function gl(){const p=await fetch("/auth/v1/api_keys",{method:"GET",headers:nt});return await ke(p)}async function wl(p){const a=await fetch("/auth/v1/api_keys",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function yl(p){const a=await fetch(`/auth/v1/api_keys/${p.name}`,{method:"PUT",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function bl(p){const a=await fetch(`/auth/v1/api_keys/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function $l(p){const a=await fetch(`/auth/v1/api_keys/${p}/secret`,{method:"PUT",headers:Ne()});return await ke(a)}async function _l(){const p=await fetch("/auth/v1/blacklist",{method:"GET",headers:nt});return await ke(p)}async function kl(p){const a=await fetch("/auth/v1/blacklist",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function xl(p){const a=await fetch(`/auth/v1/blacklist/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function ns(){const p=await fetch("/auth/v1/roles",{method:"GET",headers:nt});return await ke(p)}async function El(p){const a=await fetch("/auth/v1/roles",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Sl(p,a){const t=await fetch(`/auth/v1/roles/${p}`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function Il(p){const a=await fetch(`/auth/v1/roles/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function os(){const p=await fetch("/auth/v1/scopes",{method:"GET",headers:nt});return await ke(p)}async function Tl(p){const a=await fetch("/auth/v1/scopes",{method:"POST",headers:Ne(),body:JSON.stringify(p)});return await ke(a)}async function Cl(p,a){const t=await fetch(`/auth/v1/scopes/${p}`,{method:"PUT",headers:Ne(),body:JSON.stringify(a)});return await ke(t)}async function Al(p){const a=await fetch(`/auth/v1/scopes/${p}`,{method:"DELETE",headers:Ne()});return await ke(a)}async function Ll(p,a,t){const n=await fetch(`/auth/v1/search?ty=${p}&idx=${a}&q=${t}`,{method:"GET",headers:nt});return await ke(n)}var jl=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function Qt(p,a){let t=z(a,"color",3,"var(--col-text)"),n=z(a,"opacity",3,.9),r=z(a,"width",3,20);var h=jl();le(h,"stroke-width",2),U(()=>{le(h,"width",r()),le(h,"color",t()),le(h,"opacity",n())}),l(p,h)}var Rl=T('<div class="body svelte-1xshgki"><!></div>'),Dl=T('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function vt(p,a){ie(a,!0);const t=ea(),n=()=>ta(w,"$rotate",t);let r=z(a,"idx",11,0),h=z(a,"show",15),m=z(a,"expandedCallback",3,()=>{}),u=I(!1),E=I(void 0),S=I(void 0),v=r()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const w=ya(0,{stiffness:.1,damping:.4});function f(){!h()&&m()&&m()(),h(!h())}function A(){const R=e(E).offsetTop+e(S).scrollHeight+100;window.innerHeight+window.scrollY-R<0&&window.scroll({top:R,behavior:"smooth"})}Se(()=>{h()?w.set(90):w.set(0)}),Se(()=>{h()&&e(S)&&setTimeout(()=>{A()},100)});var k=Dl(),g=d(k),y=d(g);y.__click=f;var $=d(y),_=d($),x=Ge(()=>e(u)?"var(--col-act2a)":"var(--col-act2)");Qt(_,{get color(){return e(x)}}),c($),c(y);var b=i(y,2),C=d(b);gt(C,()=>a.header??mt),c(b),c(g);var L=i(g,2);{var D=R=>{var j=Rl(),K=d(j);gt(K,()=>a.body??mt),c(j),ia(j,N=>s(S,N),()=>e(S)),de(7,j,()=>we,()=>({duration:200})),l(R,j)};M(L,R=>{h()&&R(D)})}c(k),ia(k,R=>s(E,R),()=>e(E)),U(()=>{oe(k,"border-left",h()?v:"none"),le($,"style",`rotate: ${n()??""}deg`)}),De("mouseenter",y,()=>s(u,!0)),De("mouseleave",y,()=>s(u,!1)),De("keypress",y,f),l(p,k),ne()}at(["click"]);var Nl=T('<div class="tooltip svelte-op12yu"><!></div>'),Ml=T('<div role="none"><!> <!></div>');function Ze(p,a){ie(a,!0);const t=ea(),n=()=>ta(e(S),"$coords",t);let r=z(a,"xOffset",3,10),h=z(a,"yOffset",3,10),m=z(a,"text",3,""),u=z(a,"html",3,""),E=I(!1),S=I(void 0),v;Le(()=>{js(s(S,o(ya({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",t)}),ha(()=>{clearTimeout(v)});function w(){clearTimeout(v),s(E,!0)}function f(){v=setTimeout(()=>{s(E,!1)},100)}function A(_){e(S).set({x:_.clientX+r(),y:_.clientY+h()})}var k=Ml();k.__mouseover=w,k.__mouseout=f,k.__mousemove=A;var g=d(k);gt(g,()=>a.children??mt);var y=i(g,2);{var $=_=>{var x=Nl(),b=d(x);{var C=D=>{var R=Y();U(()=>V(R,m())),l(D,R)},L=D=>{var R=pe(),j=ee(R);{var K=N=>{var B=pe(),O=ee(B);ba(O,u),l(N,B)};M(j,N=>{u()&&N(K)},!0)}l(D,R)};M(b,D=>{m()?D(C):D(L,!1)})}c(x),U(()=>le(x,"style",`top: ${`${n().y}px`??""}; left: ${`${n().x}px`??""}`)),de(7,x,()=>dt,()=>({delay:400,duration:200})),l(_,x)};M(y,_=>{e(E)&&_($)})}c(k),De("focus",k,w),De("blur",k,f),l(p,k),ne()}at(["mouseover","mouseout","mousemove"]);var zl=T('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function He(p,a){ie(a,!0);const t=ea(),n=()=>ta(m,"$margin",t);let r=z(a,"selected",15,!1);const h=11;let m=ya(0,{stiffness:.15,damping:.5});Se(()=>{m.set(r()?h:0)});function u(){r(!r())}var E=zl();E.__click=u;var S=d(E);c(E),U(()=>{le(E,"aria-checked",r()),_t(E,"selectedOuter",r()),le(S,"style",`margin-left: ${`${n()}px`??""}`),_t(S,"selected",r())}),De("keypress",E,u),l(p,E),ne()}at(["click"]);const Ol=Tt([]),Ea=Tt([]),Pl=Tt([]),Sa=Tt([]),ql=Tt([]),vs=Tt([]);var Ul=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function Wl(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Ul();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Kl=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function Gl(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Kl();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Fl=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function Bl(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Fl();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Hl=T("<option> </option>"),Yl=T('<select class="opts font-label svelte-9iykj"></select>'),Vl=T('<div class="container svelte-9iykj"><!> <div class="inputBar svelte-9iykj"><input class="input svelte-9iykj" type="text" placeholder="Search" autocomplete="off"> <div class="magnify svelte-9iykj"><!></div></div> <div class="backWrap svelte-9iykj"><div role="button" tabindex="0" class="back svelte-9iykj"><!></div></div></div>');function cs(p,a){ie(a,!0);let t=z(a,"items",27,()=>o([])),n=z(a,"resItems",15),r=z(a,"options",19,()=>[]),h=z(a,"useServerSideIdx",11,""),m=z(a,"isSearchFiltered",15,!1),u=z(a,"search",15,""),E=I(""),S;Le(()=>{r().length>0&&(s(E,o(r()[0].label)),v())});function v(){for(let R of r())if(R.label===e(E)){S=R.callback;break}S||console.error("Could not find a valid callback function in search options for label "+e(E))}function w(){u("")}function f(){if(u().length<2){n(t()),m(!1);return}n([...t().filter(R=>r().length>0?S(R,u()):R.toLowerCase().includes(u())||R===u())]),m(!0)}async function A(){if(u().length<qs){n(t()),m(!1);return}m(!0);const R=e(E).replaceAll("-","").replaceAll(" ","").toLowerCase();let j=await Ll(h(),R,u());j.ok?n(await j.json()):console.error(j)}Se(()=>{e(E)&&v()}),Se(()=>{u()?h()?A():f():(n(t()),m(!1))});var k=Vl(),g=d(k);{var y=R=>{Ze(R,{text:"Search by",yOffset:-30,children:(j,K)=>{var N=Yl();We(N,21,r,ht,(B,O)=>{var P=Hl(),W={},X=d(P,!0);c(P),U(()=>{W!==(W=e(O).label)&&(P.value=(P.__value=e(O).label)==null?"":e(O).label),V(X,e(O).label)}),l(B,P)}),c(N),_a(N,()=>e(E),B=>s(E,B)),l(j,N)},$$slots:{default:!0}})};M(g,R=>{r().length>1&&R(y)})}var $=i(g,2),_=d($);it(_),U(()=>le(_,"name",zt()));var x=i(_,2),b=d(x);Gl(b,{width:20}),c(x),c($);var C=i($,2),L=d(C);L.__click=w;var D=d(L);Bl(D,{}),c(L),c(C),c(k),ut(_,u),De("keypress",L,w),l(p,k),ne()}at(["click"]);var Jl=(p,a)=>s(a,!e(a)),Ql=T('<div class="search svelte-spg3op"><!></div>'),Zl=(p,a,t)=>a(e(t)),Xl=T('<div role="button" tabindex="0" class="item svelte-spg3op"> </div>'),ei=T('<div class="itemsContainer svelte-spg3op"><!> <div class="items noselect font-label svelte-spg3op"></div></div>'),ti=T('<div class="wrapper svelte-spg3op"><div role="button" tabindex="0" class="icon svelte-spg3op"><!></div> <!></div>');function ai(p,a){ie(a,!0);let t=z(a,"items",31,()=>o([])),n=z(a,"onSelect",3,g=>{}),r=z(a,"mindWidth",3,130),h=z(a,"maxHeight",19,()=>t().length>4?175:120),m=z(a,"searchThreshold",11,5),u=I(o([])),E=I(!1);Se(()=>{t().length<=m()&&s(u,o(t()))});function S(g){s(E,!1),s(u,o(t())),n()(g)}var v=ti(),w=d(v);w.__click=[Jl,E];var f=d(w);Wl(f,{}),c(w);var A=i(w,2);{var k=g=>{var y=ei(),$=d(y);{var _=b=>{var C=Ql(),L=d(C);cs(L,{get items(){return t()},set items(D){t(D)},get resItems(){return e(u)},set resItems(D){s(u,o(D))}}),c(C),U(()=>oe(C,"max-width",`${r()}px`)),l(b,C)};M($,b=>{t().length>m()&&b(_)})}var x=i($,2);We(x,21,()=>e(u),ht,(b,C)=>{var L=Xl();L.__click=[Zl,S,C];var D=d(L,!0);c(L),U(()=>V(D,e(C))),De("keypress",L,()=>S(e(C))),l(b,L)}),c(x),c(y),U(()=>{le(y,"style",`min-width: ${r()??""}px; max-height: ${h()??""}px`),le(x,"style",`width: ${r()??""}; max-height: ${(t().length>m()?h()-29:h())??""}px`)}),de(7,y,()=>we,()=>({duration:200})),l(g,y)};M(A,g=>{e(E)&&g(k)})}c(v),De("keypress",w,()=>s(E,!e(E))),l(p,v),ne()}at(["click"]);var si=(p,a,t)=>a()(t.label),ri=T('<div class="label font-label svelte-jphwq"> <div role="button" tabindex="0" class="icon svelte-jphwq"><!></div></div>');function li(p,a){ie(a,!0);let t=z(a,"onDelete",3,()=>{});var n=ri(),r=d(n),h=i(r);h.__click=[si,t,a];var m=d(h);ra(m,{color:"--var(--col-bg)",width:14}),c(h),c(n),U(()=>V(r,`${a.label??""} `)),De("keypress",h,()=>t()(a.label)),l(p,n),ne()}at(["click"]);var ii=T('<div class="container svelte-1iraqg1"><!> <!></div>');function Ot(p,a){ie(a,!0);let t=z(a,"items",15),n=z(a,"options",19,()=>[]),r=z(a,"searchThreshold",15,4),h=I(o([]));Le(()=>{E()});async function m(k){t()||t([]),t().push(k),t([...t()]),await E()}async function u(k){t([...t().filter(g=>g!==k)]),await E()}async function E(){await Yt(),t()||t([]),s(h,o([...n().filter(k=>!t().includes(k))]))}var S=ii(),v=d(S);{var w=k=>{var g=pe(),y=ee(g);We(y,17,t,ht,($,_,x)=>{li($,{onDelete:u,get label(){return t()[x]},set label(b){t(t()[x]=b,!0)}})}),l(k,g)};M(v,k=>{var g;((g=t())==null?void 0:g.length)>0&&k(w)})}var f=i(v,2);{var A=k=>{ai(k,{onSelect:m,get items(){return e(h)},set items(g){s(h,o(g))},get searchThreshold(){return r()},set searchThreshold(g){r(g)}})};M(f,k=>{e(h)&&e(h).length>0&&k(A)})}c(S),l(p,S),ne()}var ni=T('<option class="opt svelte-1vaxdkm"> </option>'),oi=T('<select class="svelte-1vaxdkm"></select>');function St(p,a){let t=z(a,"value",15),n=z(a,"options",19,()=>[]),r=z(a,"width",3,"inherit");var h=oi();We(h,21,n,ht,(m,u)=>{var E=ni(),S={},v=d(E,!0);c(E),U(()=>{S!==(S=e(u))&&(E.value=(E.__value=e(u))==null?"":e(u)),V(v,e(u))}),l(m,E)}),c(h),U(()=>oe(h,"width",r())),_a(h,t),l(p,h)}var vi=T('<div class="success svelte-tl4x7h">Success</div>'),ci=T('<div class="err svelte-tl4x7h"> </div>'),di=T('<div class="container svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">USER ID</div> <div class="value font-mono svelte-tl4x7h"> </div></div> <div class="row svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">ENABLED</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">E-MAIL VERIFIED</div> <div class="value svelte-tl4x7h"><!></div></div></div> <!> <!> <!> <div class="unit language svelte-tl4x7h"><div class="label svelte-tl4x7h">LANGUAGE</div> <div style="margin-top: .085rem"><!></div></div> <!> <!> <!> <!> <!> <!> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">ROLES</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">GROUPS</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LIMIT LIFETIME</div> <div class="value svelte-tl4x7h"><!></div></div> <!> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">CREATED</div> <div class="value svelte-tl4x7h"> </div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LAST LOGIN</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">PASSWORD EXPIRES</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">MFA ACTIVE</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><!> <!> <!></div></div>');function ui(p,a){ie(a,!0);let t=z(a,"user",31,()=>o({}));t().roles===void 0&&t(t().roles=[],!0),t().groups===void 0&&t(t().groups=[],!0);let n=I(""),r=I(!1),h=I(void 0),m=I(o(t().language.toUpperCase())),u=I(!!t().user_expires),E=I(o(Cs(()=>e(u))?ft(t().user_expires,!0):void 0)),S=I(o([]));Ea.subscribe(Q=>{s(S,o(Q))});let v=I(o([]));Sa.subscribe(Q=>{s(v,o(Q))}),Se(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},3e3)))});let w=I(o({}));const f=Qe().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(ma,"Invalid characters"),family_name:he().nullable().trim().matches(Us,"Invalid characters")});let A=I(o({}));const k=Qe().shape({birthdate:he().nullable().trim().matches(Ws,"Invalid characters"),phone:he().nullable().trim().matches(Ks,"Format: +..."),street:he().nullable().trim().matches(Gs,"Invalid characters"),zip:$t().nullable().min(1e3).max(999999),city:he().nullable().trim().matches(Ga,"Invalid characters"),country:he().nullable().trim().matches(Ga,"Invalid characters")});Le(()=>()=>clearTimeout(e(h)));function g(Q){Q.code==="Enter"&&y()}async function y(){if(!await $())return;s(n,""),console.log(t().user_values);const Q={email:t().email,given_name:t().given_name,family_name:t().family_name||null,language:e(m).toLowerCase(),roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified,user_expires:null,user_values:t().user_values};if(Q.user_values.phone&&(Q.user_values.phone=Q.user_values.phone.replaceAll(" ","")),Q.user_values.zip&&(Q.user_values.zip=Number.parseInt(Q.user_values.zip)),e(u)){let je=Pt(e(E));if(!je){s(n,"Invalid Date Input: User Expires");return}Q.user_expires=je}let Ee=await is(t().id,Q);if(Ee.ok)s(r,!0);else{let je=await Ee.json();s(n,o(je.message))}}async function $(){let Q=!0;try{await f.validate(t(),{abortEarly:!1}),s(w,o({}))}catch(Ee){s(w,o(Je(Ee))),Q=!1}try{await k.validate(t().user_values,{abortEarly:!1}),s(A,o({}))}catch(Ee){s(A,o(Je(Ee))),Q=!1}return Q}var _=di(),x=d(_),b=i(d(x),2),C=d(b,!0);c(b),c(x);var L=i(x,2);oe(L,"margin-top","-5px");var D=d(L);oe(D,"width","107px");var R=i(d(D),2),j=d(R);He(j,{get selected(){return t().enabled},set selected(Q){t(t().enabled=Q,!0)}}),c(R),c(D);var K=i(D,2);oe(K,"width","135px");var N=i(d(K),2),B=d(N);He(B,{get selected(){return t().email_verified},set selected(Q){t(t().email_verified=Q,!0)}}),c(N),c(K),c(L);var O=i(L,2);ve(O,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return t().email},set value(Q){t(t().email=Q,!0)},get error(){return e(w).email},set error(Q){e(w).email=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("E-MAIL");l(Q,je)},$$slots:{default:!0}});var P=i(O,2);ve(P,{autocomplete:"off",placeholder:"Given Name",get value(){return t().given_name},set value(Q){t(t().given_name=Q,!0)},get error(){return e(w).given_name},set error(Q){e(w).given_name=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("GIVEN NAME");l(Q,je)},$$slots:{default:!0}});var W=i(P,2);ve(W,{autocomplete:"off",placeholder:"Family Name",get value(){return t().family_name},set value(Q){t(t().family_name=Q,!0)},get error(){return e(w).family_name},set error(Q){e(w).family_name=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("FAMILY NAME");l(Q,je)},$$slots:{default:!0}});var X=i(W,2),q=i(d(X),2),H=d(q);St(H,{options:Fa,get value(){return e(m)},set value(Q){s(m,o(Q))}}),c(q),c(X);var G=i(X,2);ve(G,{autocomplete:"off",placeholder:"Street",get value(){return t().user_values.street},set value(Q){t(t().user_values.street=Q,!0)},get error(){return e(A).street},set error(Q){e(A).street=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("STREET");l(Q,je)},$$slots:{default:!0}});var Z=i(G,2);ve(Z,{type:"number",autocomplete:"off",placeholder:"ZIP",min:1e3,max:999999,get value(){return t().user_values.zip},set value(Q){t(t().user_values.zip=Q,!0)},get error(){return e(A).zip},set error(Q){e(A).zip=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("ZIP");l(Q,je)},$$slots:{default:!0}});var re=i(Z,2);ve(re,{autocomplete:"off",placeholder:"City",get value(){return t().user_values.city},set value(Q){t(t().user_values.city=Q,!0)},get error(){return e(A).city},set error(Q){e(A).city=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("CITY");l(Q,je)},$$slots:{default:!0}});var ce=i(re,2);ve(ce,{autocomplete:"off",placeholder:"Country",get value(){return t().user_values.country},set value(Q){t(t().user_values.country=Q,!0)},get error(){return e(A).country},set error(Q){e(A).country=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("COUNTRY");l(Q,je)},$$slots:{default:!0}});var $e=i(ce,2);ve($e,{autocomplete:"off",placeholder:"Phone",get value(){return t().user_values.phone},set value(Q){t(t().user_values.phone=Q,!0)},get error(){return e(A).phone},set error(Q){e(A).phone=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("PHONE");l(Q,je)},$$slots:{default:!0}});var _e=i($e,2);ve(_e,{type:"date",autocomplete:"off",placeholder:"Birthdate",get value(){return t().user_values.birthdate},set value(Q){t(t().user_values.birthdate=Q,!0)},get error(){return e(A).birthdate},set error(Q){e(A).birthdate=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("BIRTHDATE");l(Q,je)},$$slots:{default:!0}});var me=i(_e,2);oe(me,"margin-top","-3px");var Me=i(d(me),2);Ot(Me,{get options(){return e(S)},searchThreshold:4,get items(){return t().roles},set items(Q){t(t().roles=Q,!0)}}),c(me);var ge=i(me,2),ue=i(d(ge),2);Ot(ue,{get options(){return e(v)},searchThreshold:4,get items(){return t().groups},set items(Q){t(t().groups=Q,!0)}}),c(ge);var ye=i(ge,2);oe(ye,"margin-top","12px");var be=i(d(ye),2),ze=d(be);He(ze,{get selected(){return e(u)},set selected(Q){s(u,o(Q))}}),c(be),c(ye);var Ce=i(ye,2);{var xe=Q=>{var Ee=Ge(()=>Ba(new Date));ve(Q,{type:"datetime-local",step:"60",width:"16rem",get min(){return e(Ee)},max:"2099-01-01T00:00",get value(){return e(E)},set value(je){s(E,o(je))},$$events:{input:$},children:(je,At)=>{F();var ae=Y("USER EXPIRES");l(je,ae)},$$slots:{default:!0}})};M(Ce,Q=>{e(u)&&Q(xe)})}var Re=i(Ce,2);oe(Re,"margin-top","12px");var J=i(d(Re),2),Ie=d(J,!0);U(()=>V(Ie,ft(t().created_at))),c(J),c(Re);var fe=i(Re,2),qe=i(d(fe),2),Ve=d(qe);{var lt=Q=>{var Ee=Y();U(()=>V(Ee,ft(t().last_login))),l(Q,Ee)},ct=Q=>{var Ee=Y("Never");l(Q,Ee)};M(Ve,Q=>{t().last_login?Q(lt):Q(ct,!1)})}c(qe),c(fe);var Ue=i(fe,2),Fe=i(d(Ue),2),ot=d(Fe);{var It=Q=>{var Ee=Y();U(()=>V(Ee,ft(t().password_expires))),l(Q,Ee)},xt=Q=>{var Ee=Y("Never");l(Q,Ee)};M(ot,Q=>{t().password_expires?Q(It):Q(xt,!1)})}c(Fe),c(Ue);var Xe=i(Ue,2),et=i(d(Xe),2),yt=d(et),pt=Ge(()=>!!t().webauthn_user_id);la(yt,{get check(){return e(pt)}}),c(et),c(Xe);var Ct=i(Xe,2),st=d(Ct);Te(st,{level:1,width:"4rem",$$events:{click:y},children:(Q,Ee)=>{F();var je=Y("SAVE");l(Q,je)},$$slots:{default:!0}});var rt=i(st,2);{var se=Q=>{var Ee=vi();l(Q,Ee)};M(rt,Q=>{e(r)&&Q(se)})}var Ae=i(rt,2);{var Oe=Q=>{var Ee=ci(),je=d(Ee,!0);c(Ee),U(()=>V(je,e(n))),l(Q,Ee)};M(Ae,Q=>{e(n)&&Q(Oe)})}c(Ct),c(_),U(()=>V(C,t().id)),l(p,_),ne()}var hi=(p,a,t)=>a(e(t)),pi=T('<button class="btn font-label svelte-n2aryx"> </button>'),mi=T('<div class="bar noselect svelte-n2aryx"></div>');function Dt(p,a){let t=z(a,"labels",19,()=>[]),n=z(a,"selected",15);var r=mi();We(r,21,t,ht,(h,m)=>{var u=pi();u.__click=[hi,n,m];var E=d(u,!0);c(u),U(()=>{le(u,"data-selected",n()===e(m)),V(E,e(m))}),De("keypress",u,()=>n(e(m))),l(h,u)}),c(r),l(p,r)}at(["click"]);var fi=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z"></path></svg>');function ds(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,20);var r=fi();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var gi=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"></path></svg>');function Ia(p,a){let t=z(a,"color",3,"var(--col-err)"),n=z(a,"opacity",3,.9),r=z(a,"width",3,24);var h=gi();le(h,"stroke-width",2),U(()=>{le(h,"width",r()),le(h,"color",t()),le(h,"opacity",n())}),l(p,h)}var wi=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>');function Ta(p,a){let t=z(a,"color",3,"var(--col-ok)"),n=z(a,"opacity",3,.9),r=z(a,"width",3,24);var h=wi();le(h,"stroke-width",2),U(()=>{le(h,"width",r()),le(h,"color",t()),le(h,"opacity",n())}),l(p,h)}var yi=T('<div role="button" tabindex="0" class="btn clip svelte-yuw12p"><!></div>'),bi=T('<div class="rel svelte-yuw12p"><div class="err font-label svelte-yuw12p"> </div></div>'),$i=T('<div class="container svelte-yuw12p"><div class="label svelte-yuw12p"><div class="labelInner font-label noselect svelte-yuw12p"><label><!></label></div></div> <input> <div class="rel svelte-yuw12p"><!> <div role="button" tabindex="0" class="btn show svelte-yuw12p"><!></div></div> <!></div>');function Gt(p,a){ie(a,!0);let t=z(a,"bindThis",15,void 0),n=z(a,"name",19,zt),r=z(a,"disabled",3,!1),h=z(a,"error",3,""),m=z(a,"showCopy",3,!1),u=z(a,"value",15,""),E=z(a,"width",3,"250px"),S=z(a,"maxWidth",3,"inherit"),v=z(a,"autocomplete",3,"current-password"),w=z(a,"type",15,"password"),f=Ut(a,["$$slots","$$events","$$legacy","bindThis","name","disabled","error","showCopy","value","width","maxWidth","autocomplete","type","children"]);const A=Xt();function k(G){G.code==="Enter"?A("enter",!0):A("keypress",!0)}function g(){A("blur",!0)}function y(){navigator.clipboard.writeText(u())}function $(){w()==="password"?w("text"):w("password")}function _(G){u(G.target.value)}var x=$i(),b=d(x),C=d(b),L=d(C),D=d(L);gt(D,()=>a.children??mt),c(L),c(C),c(b);var R=i(b,2);it(R);let j;ia(R,G=>t(G),()=>t());var K=i(R,2),N=d(K);{var B=G=>{var Z=yi();Z.__click=y;var re=d(Z);ds(re,{}),c(Z),De("keypress",Z,y),l(G,Z)};M(N,G=>{m()&&G(B)})}var O=i(N,2);O.__click=$;var P=d(O);{var W=G=>{Ia(G,{width:22})},X=G=>{Ta(G,{width:22})};M(P,G=>{w()==="password"?G(W):G(X,!1)})}c(O),c(K);var q=i(K,2);{var H=G=>{var Z=bi(),re=d(Z),ce=d(re,!0);c(re),c(Z),U(()=>{oe(re,"width",E()),V(ce,h())}),de(7,re,()=>we,()=>({duration:250})),l(G,Z)};M(q,G=>{h()&&G(H)})}c(x),U(()=>{oe(x,"width",`calc(${E()??""} + 12px)`),oe(x,"max-width",S()),oe(C,"background",r()?"hsla(var(--bg-high) / .25)":"hsl(var(--bg))"),le(L,"for",n()),j=sa(R,j,{type:w(),name:n(),disabled:r(),value:u(),autocomplete:v(),...f,oninput:_,onkeypress:k,onblur:g},"svelte-yuw12p"),oe(R,"width",E()),oe(R,"padding-right",m()?"45px":"25px")}),De("keypress",O,$),l(p,x),ne()}at(["click"]);var _i=T('<div class="desc svelte-8ppjyk"><p><b>The user has not initialized this account yet.</b></p> <p>You may send out a new Reset E-Mail, if the user has not received one.</p></div> <!>',1),ki=T(`<div class="desc svelte-8ppjyk"><p><b>This is a passkey only account type.</b></p> <p>This means, that this user is using the passwordless login flow only and does not have any password.</p> <p>If the user has lost all his keys and you have verified everything, you may reset his account type and
                send out a new reset E-Mail, so the user can get access again.</p> <p>To reset the account, navigate to 'MFA' and delete all registered keys for this user.</p></div>`),xi=T(`<!> <!> <!> <!> <div class="desc svelte-8ppjyk">You can either set and reset a user's password<br> or send out a new reset E-Mail for self-service.</div> <!> <!>`,1),Ei=T('<div class="success svelte-8ppjyk">Success</div>'),Si=T('<div class="err svelte-8ppjyk"> </div>'),Ii=T('<div class="err svelte-8ppjyk"> </div>'),Ti=T('<div class="container svelte-8ppjyk"><!> <!> <!> <!></div>');function Ci(p,a){ie(a,!0);let t=z(a,"user",27,()=>o({}));const n="inherit";let r=I(!1),h=I(""),m=I(""),u=I(!1),E=I(!1),S=I(void 0),v="330px",w=I(void 0),f=I(!1),A=o({new:"",verify:""});Se(()=>{e(E)&&s(S,o(setTimeout(()=>{s(E,!1),a.onSave()},3e3)))}),Le(async()=>{if(!e(w)){let O=await Ka(),P=await O.json();O.ok?s(w,o(P)):s(m,o(P.message))}});async function k(){return s(m,""),await g()?e(f)?!0:(s(m,"You must follow the password policy"),!1):!1}async function g(){return s(m,""),A.new.length>256?(s(m,"max 256 characters"),!1):A.new!==A.verify?(s(m,"New passwords do not match"),!1):!0}async function y(){let O={email:t().email};s(h,""),s(r,!0);let P=await Qr(O);if(P.ok)s(u,!0);else{let W=await P.json();s(h,o(W.message))}s(r,!1)}async function $(){let O={email:t().email,given_name:t().given_name,family_name:t().family_name,roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified};if(A.new.length>0){if(!(await g()&&await k()))return;O.password=A.new}s(m,""),s(r,!0);let P=await is(t().id,O);if(P.ok)s(E,!0);else{let W=await P.json();s(m,o(W.message))}s(r,!1)}function _(){const O=e(w).length_min>24?e(w).length_min:24;let P=Fs(O,e(w).include_lower_case,e(w).include_upper_case,e(w).include_digits,e(w).include_special);A.new=P,A.verify=P}var x=Ti(),b=d(x);{var C=O=>{var P=_i(),W=i(ee(P),2);Te(W,{width:n,level:2,get isLoading(){return e(r)},set isLoading(X){s(r,o(X))},$$events:{click:y},children:(X,q)=>{F();var H=Y("SEND RESET E-MAIL");l(X,H)},$$slots:{default:!0}}),l(O,P)},L=O=>{var P=pe(),W=ee(P);{var X=H=>{var G=ki();l(H,G)},q=H=>{var G=xi(),Z=ee(G);{var re=ue=>{vr(ue,{get password(){return A.new},get policy(){return e(w)},get accepted(){return e(f)},set accepted(ye){s(f,o(ye))}})};M(Z,ue=>{e(w)&&ue(re)})}var ce=i(Z,2),$e=Ge(()=>A.new.length>0&&A.new===A.verify);Gt(ce,{type:"password",get width(){return v},autocomplete:"off",get showCopy(){return e($e)},get value(){return A.new},set value(ue){A.new=ue},$$events:{blur:g},children:(ue,ye)=>{F();var be=Y("New Password");l(ue,be)},$$slots:{default:!0}});var _e=i(ce,2);Gt(_e,{type:"password",get width(){return v},autocomplete:"off",get value(){return A.verify},set value(ue){A.verify=ue},$$events:{blur:g},children:(ue,ye)=>{F();var be=Y("New Password");l(ue,be)},$$slots:{default:!0}});var me=i(_e,2);Te(me,{width:n,level:3,$$events:{click:_},children:(ue,ye)=>{F();var be=Y("GENERATE RANDOM");l(ue,be)},$$slots:{default:!0}});var Me=i(me,4);Te(Me,{width:n,level:1,get isLoading(){return e(r)},set isLoading(ue){s(r,o(ue))},$$events:{click:y},children:(ue,ye)=>{F();var be=Y("SEND RESET E-MAIL");l(ue,be)},$$slots:{default:!0}});var ge=i(Me,2);Te(ge,{width:n,get isLoading(){return e(r)},set isLoading(ue){s(r,o(ue))},$$events:{click:$},children:(ue,ye)=>{F();var be=Y("SAVE PASSWORD");l(ue,be)},$$slots:{default:!0}}),l(H,G)};M(W,H=>{t().account_type==="passkey"?H(X):H(q,!1)},!0)}l(O,P)};M(b,O=>{t().account_type==="new"?O(C):O(L,!1)})}var D=i(b,2);{var R=O=>{var P=Ei();l(O,P)};M(D,O=>{(e(E)||e(u))&&O(R)})}var j=i(D,2);{var K=O=>{var P=Si(),W=d(P,!0);c(P),U(()=>V(W,e(m))),l(O,P)};M(j,O=>{e(m)&&O(K)})}var N=i(j,2);{var B=O=>{var P=Ii(),W=d(P,!0);c(P),U(()=>V(W,e(h))),l(O,P)};M(N,O=>{e(h)&&O(B)})}c(x),l(p,x),ne()}var Ai=T('<div class="err svelte-1jljqe9"> </div>'),Li=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this user?</div> <!> <!></div>');function ji(p,a){ie(a,!0);let t=z(a,"user",27,()=>o({})),n=I(!1),r=I("");async function h(){s(r,""),s(n,!0);let v=await dl(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Li(),u=i(d(m),2);Te(u,{level:1,width:"5rem",get isLoading(){return e(n)},set isLoading(v){s(n,o(v))},$$events:{click:h},children:(v,w)=>{F();var f=Y("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var S=v=>{var w=Ai(),f=d(w,!0);c(w),U(()=>V(f,e(r))),l(v,w)};M(E,v=>{e(r)&&v(S)})}c(m),l(p,m),ne()}var Ri=T('<div class="err svelte-1ofwsjt"> </div>'),Di=T('<div class="success svelte-1ofwsjt">Success</div>'),Ni=T('<div class="container svelte-1ofwsjt"><div class="label svelte-1ofwsjt">Invalidate all existing sessions and refresh tokens for this user?</div> <!> <!></div>');function Mi(p,a){ie(a,!0);let t=z(a,"user",27,()=>o({})),n=I(!1),r=I(""),h=I(!1);async function m(){s(r,""),s(n,!0);let f=await ol(t().id);if(f.ok)s(h,!0);else{let A=await f.json();s(r,o(A.message))}s(n,!1)}var u=Ni(),E=i(d(u),2);Te(E,{level:1,get isLoading(){return e(n)},set isLoading(f){s(n,o(f))},$$events:{click:m},children:(f,A)=>{F();var k=Y("LOGOUT");l(f,k)},$$slots:{default:!0}});var S=i(E,2);{var v=f=>{var A=Ri(),k=d(A,!0);c(A),U(()=>V(k,e(r))),l(f,A)},w=f=>{var A=pe(),k=ee(A);{var g=y=>{var $=Di();l(y,$)};M(k,y=>{e(h)&&y(g)},!0)}l(f,A)};M(S,f=>{e(r)?f(v):f(w,!1)})}c(u),l(p,u),ne()}var zi=T('<div class="success svelte-iv4fzr">Success</div>'),Oi=T('<div class="err svelte-iv4fzr"> </div>'),Pi=T('<div class="container svelte-iv4fzr"><div class="desc svelte-iv4fzr">Set custom user attributes.<br> All Key / Value pairs will be handled as String / String.</div> <!> <!> <!> <!></div>');function qi(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(!1),h=I(!1);Le(()=>{E()});async function m(){let $=await xa();if(!$.ok)s(t,"Error fetching attr: "+$.body.message);else return await $.json()}async function u(){let $=await ml(a.user.id);if(!$.ok)s(t,"Error fetching user attr: "+$.body.message);else return await $.json()}async function E(){let $=await m(),_=$.values;if($){let x=await u();if(x){let b=new Map;for(let C of x.values)b.set(C.key,C.value||"");for(let C of _){let L=b.get(C.name);L?C.value=L:C.value=""}s(n,o([..._]))}}}async function S(){s(t,""),s(h,!0);let $=[];for(let C of e(n)){let L={key:C.name,value:C.value};$.push(L)}let _={values:$},x=await fl(a.user.id,_),b=await x.json();x.ok?s(r,!0):s(t,o(b.message)),a.onSave(),s(h,!1)}var v=Pi(),w=i(d(v),2);We(w,17,()=>e(n),ht,($,_,x)=>{var b=Ge(()=>e(_).desc||"JSON Value");ve($,{style:"width: 350px",autocomplete:"off",get placeholder(){return e(b)},get value(){return e(_).value},set value(C){e(_).value=C},children:(C,L)=>{F();var D=Y();U(()=>V(D,e(_).name)),l(C,D)},$$slots:{default:!0}})});var f=i(w,2);Te(f,{get isLoading(){return e(h)},level:1,width:"4rem",$$events:{click:S},children:($,_)=>{F();var x=Y("SAVE");l($,x)},$$slots:{default:!0}});var A=i(f,2);{var k=$=>{var _=zi();l($,_)};M(A,$=>{e(r)&&$(k)})}var g=i(A,2);{var y=$=>{var _=Oi(),x=d(_,!0);c(_),U(()=>V(x,e(t))),l($,_)};M(g,$=>{e(t)&&$(y)})}c(v),l(p,v),ne()}var Ui=T('<div class="desc svelte-1a9qw6n">This user does not have any active MFA keys.</div>'),Wi=T('<div class="keyContainer svelte-1a9qw6n"><div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Passkey Name:</div> <b> </b></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Key Registered:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Last Usage:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n"></div> <div class="deleteBtn svelte-1a9qw6n"><!></div></div></div>'),Ki=T('<div class="desc svelte-1a9qw6n">You can delete the users MFA / Security Keys.<br> Be careful though, since this <b>cannot be reverted</b> without user interaction.<br> This is useful, if a user lost his keys and he is not able to log in any more.</div> <div class="keysContainer svelte-1a9qw6n"></div>',1),Gi=T('<div class="err svelte-1a9qw6n"> </div>'),Fi=T('<div class="container svelte-1a9qw6n"><!> <!></div>');function Bi(p,a){ie(a,!0);let t=z(a,"user",27,()=>o({})),n=I(""),r=I(o([]));Le(async()=>{await h()});async function h(){let A=await Ds(t().id),k=await A.json();A.ok?s(r,o(k)):console.error("error fetching passkeys: "+k.message)}async function m(A){let k=e(r).length===1,g=await Ns(t().id,A);if(g.status===200)return await h(),k&&a.onSave(),!0;{let y=await g.json();return s(n,o(y.message)),!1}}var u=Fi(),E=d(u);{var S=A=>{var k=Ui();l(A,k)},v=A=>{var k=Ki(),g=i(ee(k),2);We(g,21,()=>e(r),y=>y.name,(y,$)=>{var _=Wi(),x=d(_),b=i(d(x),2),C=d(b,!0);c(b),c(x);var L=i(x,2),D=i(d(L),2),R=d(D,!0);U(()=>V(R,ft(e($).registered))),c(D),c(L);var j=i(L,2),K=i(d(j),2),N=d(K,!0);U(()=>V(N,ft(e($).last_used))),c(K),c(j);var B=i(j,2),O=i(d(B),2),P=d(O);Te(P,{level:4,$$events:{click:()=>m(e($).name)},children:(W,X)=>{F();var q=Y("DELETE");l(W,q)},$$slots:{default:!0}}),c(O),c(B),c(_),U(()=>V(C,e($).name)),l(y,_)}),c(g),l(A,k)};M(E,A=>{e(r).length<1?A(S):A(v,!1)})}var w=i(E,2);{var f=A=>{var k=Gi(),g=d(k,!0);c(k),U(()=>V(g,e(n))),l(A,k)};M(w,A=>{e(n)&&A(f)})}c(u),l(p,u),ne()}var Hi=T('<div class="container svelte-nw2ucx"><!></div>');function Yi(p,a){ie(a,!0);var t=Hi(),n=d(t);rr(n,{get userId(){return a.user.id}}),c(t),l(p,t),ne()}var Vi=T('<div class="data font-mono svelte-115hohv"> </div>'),Ji=T('<div class="data svelte-115hohv"> </div>'),Qi=T('<div class="header svelte-115hohv"><!> <!></div>'),Zi=T("<div><!></div>"),Xi=T("<div><!></div>"),en=T("<div><!></div>"),tn=T("<div><!></div>"),an=T("<div><!></div>"),sn=T("<div><!></div>"),rn=T("<div><!></div>"),ln=T("<!> <!>",1),nn=T("<div><!></div>");function us(p,a){ie(a,!0);let t=z(a,"userEmail",3,""),n=z(a,"userId",3,""),r=z(a,"onSave",15),h=I(void 0),m=I(!0),u=I(void 0);const E=["Info","Attributes","Password","MFA","Devices","Logout","Delete"];let S=I(o(E[0]));const v=200,w=v/2;async function f(){const k=await Ms(n());if(k.ok)s(h,o(await k.json()));else{let g=await k.json();console.error(g)}s(m,!1)}function A(){s(u,!1),r()()}Se(()=>{e(u)&&f()}),vt(p,{get show(){return e(u)},set show(k){s(u,o(k))},header:k=>{var g=Qi(),y=d(g);Ze(y,{text:"User ID",children:(_,x)=>{var b=Vi(),C=d(b,!0);c(b),U(()=>V(C,n())),l(_,b)},$$slots:{default:!0}});var $=i(y,2);Ze($,{text:"E-Mail",children:(_,x)=>{var b=Ji(),C=d(b,!0);c(b),U(()=>V(C,t())),l(_,b)},$$slots:{default:!0}}),c(g),l(k,g)},body:k=>{var g=nn(),y=d(g);{var $=x=>{wa(x,{})},_=x=>{var b=ln(),C=ee(b);Dt(C,{labels:E,get selected(){return e(S)},set selected(j){s(S,o(j))}});var L=i(C,2);{var D=j=>{var K=Zi(),N=d(K);ui(N,{get user(){return e(h)},set user(B){s(h,o(B))},get onSave(){return r()},set onSave(B){r(B)}}),c(K),de(5,K,()=>we,()=>({delay:w,duration:v})),de(6,K,()=>we,()=>({duration:v})),l(j,K)},R=j=>{var K=pe(),N=ee(K);{var B=P=>{var W=Xi(),X=d(W);qi(X,{get user(){return e(h)},set user(q){s(h,o(q))},get onSave(){return r()},set onSave(q){r(q)}}),c(W),de(5,W,()=>we,()=>({delay:w,duration:v})),de(6,W,()=>we,()=>({duration:v})),l(P,W)},O=P=>{var W=pe(),X=ee(W);{var q=G=>{var Z=en(),re=d(Z);Ci(re,{get user(){return e(h)},set user(ce){s(h,o(ce))},get onSave(){return r()},set onSave(ce){r(ce)}}),c(Z),de(5,Z,()=>we,()=>({delay:w,duration:v})),de(6,Z,()=>we,()=>({duration:v})),l(G,Z)},H=G=>{var Z=pe(),re=ee(Z);{var ce=_e=>{var me=tn(),Me=d(me);Bi(Me,{get user(){return e(h)},set user(ge){s(h,o(ge))},get onSave(){return r()},set onSave(ge){r(ge)}}),c(me),de(5,me,()=>we,()=>({delay:w,duration:v})),de(6,me,()=>we,()=>({duration:v})),l(_e,me)},$e=_e=>{var me=pe(),Me=ee(me);{var ge=ye=>{var be=an(),ze=d(be);Yi(ze,{get user(){return e(h)},set user(Ce){s(h,o(Ce))}}),c(be),de(5,be,()=>we,()=>({delay:w,duration:v})),de(6,be,()=>we,()=>({duration:v})),l(ye,be)},ue=ye=>{var be=pe(),ze=ee(be);{var Ce=Re=>{var J=sn(),Ie=d(J);Mi(Ie,{get user(){return e(h)},set user(fe){s(h,o(fe))}}),c(J),de(5,J,()=>we,()=>({delay:w,duration:v})),de(6,J,()=>we,()=>({duration:v})),l(Re,J)},xe=Re=>{var J=pe(),Ie=ee(J);{var fe=qe=>{var Ve=rn(),lt=d(Ve);ji(lt,{onSave:A,get user(){return e(h)},set user(ct){s(h,o(ct))}}),c(Ve),de(5,Ve,()=>we,()=>({delay:w,duration:v})),de(6,Ve,()=>we,()=>({duration:v})),l(qe,Ve)};M(Ie,qe=>{e(S)==="Delete"&&qe(fe)},!0)}l(Re,J)};M(ze,Re=>{e(S)==="Logout"?Re(Ce):Re(xe,!1)},!0)}l(ye,be)};M(Me,ye=>{e(S)==="Devices"?ye(ge):ye(ue,!1)},!0)}l(_e,me)};M(re,_e=>{e(S)==="MFA"?_e(ce):_e($e,!1)},!0)}l(G,Z)};M(X,G=>{e(S)==="Password"?G(q):G(H,!1)},!0)}l(P,W)};M(N,P=>{e(S)==="Attributes"?P(B):P(O,!1)},!0)}l(j,K)};M(L,j=>{e(S)==="Info"?j(D):j(R,!1)})}l(x,b)};M(y,x=>{e(m)?x($):x(_,!1)})}c(g),l(k,g)},$$slots:{header:!0,body:!0}}),ne()}var on=T('<div class="header font-label svelte-1y7ceqm">ADD NEW USER</div>'),vn=T('<div class="err svelte-1y7ceqm"> </div>'),cn=T('<div class="container svelte-1y7ceqm"><!> <!> <!> <div class="language svelte-1y7ceqm"><div class="label svelte-1y7ceqm">LANGUAGE</div> <div style="margin-top: .4rem"><!></div></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">ROLES</div> <!></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">GROUPS</div> <!></div> <div class="unit svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">LIMIT LIFETIME</div> <div class="value"><!></div></div> <!> <div class="btn svelte-1y7ceqm"><!> <!></div></div>');function dn(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1),n=I(""),r=I(void 0),h=I("EN"),m=I(!1),u=I(void 0),E=I(o({email:"",family_name:"",given_name:"",roles:[],groups:[]})),S=I(o({}));const v=Qe().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(ma,"Invalid characters"),family_name:he().trim().required("Family Name is required").matches(ma,"Invalid characters")});let w=I(void 0);Ea.subscribe(g=>{s(w,o(g))});let f=I(void 0);Sa.subscribe(g=>{s(f,o(g))});async function A(){if(!await k())return;s(n,"");let g=e(E);if(g.language=e(h).toLowerCase(),e(m)){let $=Pt(e(u));if(!$){s(n,"Invalid Date Input: User Expires");return}g.user_expires=$}let y=await cl(e(E));if(y.ok)s(E,o({})),s(r,!1),s(E,o({email:"",family_name:"",given_name:"",roles:[],groups:[]})),a.onSave();else{let $=await y.json();s(n,o($.message))}}async function k(){try{return await v.validate(e(E),{abortEarly:!1}),s(S,o({})),!0}catch(g){return s(S,o(Je(g))),!1}}vt(p,{get idx(){return t()},set idx(g){t(g)},get show(){return e(r)},set show(g){s(r,o(g))},header:g=>{var y=on();l(g,y)},body:g=>{var y=cn(),$=d(y);ve($,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return e(E).email},set value(Z){e(E).email=Z},get error(){return e(S).email},set error(Z){e(S).email=Z},$$events:{input:k},children:(Z,re)=>{F();var ce=Y("E-MAIL");l(Z,ce)},$$slots:{default:!0}});var _=i($,2);ve(_,{autocomplete:"off",placeholder:"Given Name",get value(){return e(E).given_name},set value(Z){e(E).given_name=Z},get error(){return e(S).given_name},set error(Z){e(S).given_name=Z},$$events:{input:k},children:(Z,re)=>{F();var ce=Y("GIVEN NAME");l(Z,ce)},$$slots:{default:!0}});var x=i(_,2);ve(x,{autocomplete:"off",placeholder:"Family Name",get value(){return e(E).family_name},set value(Z){e(E).family_name=Z},get error(){return e(S).family_name},set error(Z){e(S).family_name=Z},$$events:{input:k},children:(Z,re)=>{F();var ce=Y("FAMILY NAME");l(Z,ce)},$$slots:{default:!0}});var b=i(x,2),C=i(d(b),2),L=d(C);St(L,{options:Fa,get value(){return e(h)},set value(Z){s(h,o(Z))}}),c(C),c(b);var D=i(b,2),R=i(d(D),2);Ot(R,{get options(){return e(w)},searchThreshold:4,get items(){return e(E).roles},set items(Z){e(E).roles=Z}}),c(D);var j=i(D,2),K=i(d(j),2);Ot(K,{get options(){return e(f)},searchThreshold:4,get items(){return e(E).groups},set items(Z){e(E).groups=Z}}),c(j);var N=i(j,2);oe(N,"margin-top","12px");var B=i(d(N),2),O=d(B);He(O,{get selected(){return e(m)},set selected(Z){s(m,o(Z))}}),c(B),c(N);var P=i(N,2);{var W=Z=>{ve(Z,{type:"datetime-local",step:"60",width:"18rem",get min(){return new Date().toISOString().split(".")[0]},max:"2099-01-01T00:00",get value(){return e(u)},set value(re){s(u,o(re))},$$events:{input:k},children:(re,ce)=>{F();var $e=Y("USER EXPIRES");l(re,$e)},$$slots:{default:!0}})};M(P,Z=>{e(m)&&Z(W)})}var X=i(P,2),q=d(X);Te(q,{level:1,$$events:{click:A},children:(Z,re)=>{F();var ce=Y("SAVE");l(Z,ce)},$$slots:{default:!0}});var H=i(q,2);{var G=Z=>{var re=vn(),ce=d(re,!0);c(re),U(()=>V(ce,e(n))),l(Z,re)};M(H,Z=>{e(n)&&Z(G)})}c(X),c(y),l(g,y)},$$slots:{header:!0,body:!0}}),ne()}var un=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"></path></svg>');function hn(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=un();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var pn=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"></path></svg>');function mn(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=pn();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var fn=T("<option> </option>"),gn=T('<select class="opts font-label svelte-t7wy0q"></select>'),wn=T('<div role="button" tabindex="0" class="icon svelte-t7wy0q"><!></div>'),yn=T('<div class="container svelte-t7wy0q"><!> <!></div>');function bn(p,a){ie(a,!0);let t=z(a,"items",19,()=>[]),n=z(a,"resItems",15),r=z(a,"options",19,()=>[]),h=z(a,"firstDirReverse",3,!1),m=I(""),u=I(1),E;Le(()=>{r().length>0&&(s(m,o(r()[0].label)),S()),h()&&w(),v()});function S(){for(let $ of r())if($.label===e(m)){E=$.callback;break}E||console.error("Could not find a valid callback function in order options for label "+e(m))}function v(){if(E){let $=[...t()];$.sort((_,x)=>E(_,x)*e(u)),n([...$])}}function w(){s(u,e(u)*-1),v()}Se(()=>{t()&&v()}),Se(()=>{e(m)&&(S(),v())});var f=yn(),A=d(f);{var k=$=>{Ze($,{text:"Order by",yOffset:-30,children:(_,x)=>{var b=gn();We(b,21,r,ht,(C,L)=>{var D=fn(),R={},j=d(D,!0);c(D),U(()=>{R!==(R=e(L).label)&&(D.value=(D.__value=e(L).label)==null?"":e(L).label),V(j,e(L).label)}),l(C,D)}),c(b),_a(b,()=>e(m),C=>s(m,C)),l(_,b)},$$slots:{default:!0}})};M(A,$=>{r().length>1&&$(k)})}var g=i(A,2);{var y=$=>{var _=wn();_.__click=w;var x=d(_);{var b=L=>{mn(L,{})},C=L=>{hn(L,{})};M(x,L=>{e(u)===1?L(b):L(C,!1)})}c(_),De("keypress",_,w),l($,_)};M(g,$=>{r().length>0&&$(y)})}c(f),l(p,f),ne()}at(["click"]);var $n=T('<div class="divider svelte-16rtgja"></div>'),_n=T('<div class="container svelte-16rtgja"><div><!></div> <!> <div><!></div></div>');function Lt(p,a){ie(a,!0);let t=z(a,"items",31,()=>o([])),n=z(a,"resItems",15),r=z(a,"searchOptions",27,()=>o([])),h=z(a,"orderOptions",27,()=>o([])),m=z(a,"firstDirReverse",3,!1),u=z(a,"useServerSideIdx",15,""),E=z(a,"isSearchFiltered",15,!1),S=z(a,"search",15,""),v=I(o([]));var w=_n(),f=d(w),A=d(f);bn(A,{get items(){return e(v)},get options(){return h()},get firstDirReverse(){return m()},get resItems(){return n()},set resItems(_){n(_)}}),c(f);var k=i(f,2);{var g=_=>{var x=$n();l(_,x)};M(k,_=>{h().length>0&&_(g)})}var y=i(k,2),$=d(y);cs($,{get options(){return r()},get items(){return t()},set items(_){t(_)},get resItems(){return e(v)},set resItems(_){s(v,o(_))},get useServerSideIdx(){return u()},set useServerSideIdx(_){u(_)},get isSearchFiltered(){return E()},set isSearchFiltered(_){E(_)},get search(){return S()},set search(_){S(_)}}),c(y),c(w),l(p,w),ne()}var kn=(p,a)=>s(a,e(a)-1),xn=T('<div role="button" tabindex="0" class="icon iconLeft svelte-9iw34a"><!></div>'),En=(p,a,t)=>s(a,o(e(t))),Sn=T('<div role="button" tabindex="0" class="link noselect svelte-9iw34a"> </div>'),In=(p,a)=>s(a,e(a)+1),Tn=T('<div role="button" tabindex="0" class="icon iconRight svelte-9iw34a"><!></div>'),Cn=T('<div class="container svelte-9iw34a"><!> <div class="links svelte-9iw34a"></div> <!> <div class="chunkSize noselect svelte-9iw34a">Entries <!></div> <div class="font-label total svelte-9iw34a"> </div></div>');function Nt(p,a){ie(a,!0);let t=z(a,"items",27,()=>o([])),n=z(a,"resItems",31,()=>o([]));const r=[5,7,10,15,20,30,50,100],h=16;let m=I(o([])),u=I(1),E=5,S=I(15),v=I(!1),w=I(!1),f=I(o([]));Se(()=>{e(S)&&s(u,1)}),Se(()=>{if(e(S)&&t().length>0){let D=[];for(let R=0;R<t().length;R+=e(S)){const j=t().slice(R,R+e(S));D.push(j)}s(m,o(D)),n(e(m)[e(u)-1])}}),Se(()=>{if(e(u)){let D=[],R=Math.floor(E/2);if(e(m).length<=E){for(let j=1;j<=e(m).length;j++)D.push(j);s(v,!1),s(w,!1)}else if(e(u)<=R){for(let j=1;j<=E;j++)D.push(j);s(v,!1),s(w,!0)}else if(e(u)>e(m).length-R-1){for(let j=e(m).length-E;j<=e(m).length-1;j++)D.push(j+1);s(v,!0),s(w,!1)}else{for(let j=e(u)-R;j<e(u)-R+E;j++)D.push(j);s(v,!0),s(w,!0)}s(f,o(D))}});var A=Cn(),k=d(A);{var g=D=>{var R=xn();R.__click=[kn,u];var j=d(R);Qt(j,{width:h}),c(R),De("keypress",R,()=>s(u,e(u)-1)),l(D,R)};M(k,D=>{e(v)&&D(g)})}var y=i(k,2);We(y,21,()=>e(f),ht,(D,R)=>{var j=Sn();j.__click=[En,u,R];var K=d(j,!0);c(j),U(()=>{_t(j,"selected",e(u)===e(R)),V(K,e(R))}),De("keypress",j,()=>s(u,o(e(R)))),l(D,j)}),c(y);var $=i(y,2);{var _=D=>{var R=Tn();R.__click=[In,u];var j=d(R);Qt(j,{width:h}),c(R),De("keypress",R,()=>s(u,e(u)+1)),l(D,R)};M($,D=>{e(w)&&D(_)})}var x=i($,2),b=i(d(x));St(b,{options:r,width:"50px",get value(){return e(S)},set value(D){s(S,o(D))}}),c(x);var C=i(x,2),L=d(C);c(C),c(A),U(()=>V(L,`Total: ${t().length??""}`)),l(p,A),ne()}at(["click"]);var An=(p,a)=>a()(0,!0),Ln=T('<div role="button" tabindex="0" class="icon iconLeft svelte-1jvef4m"><!></div>'),jn=(p,a)=>a()(0,!1),Rn=T('<div role="button" tabindex="0" class="icon iconRight svelte-1jvef4m"><!></div>'),Dn=T('<div class="font-label total svelte-1jvef4m"> </div>'),Nn=T('<div class="container svelte-1jvef4m"><!> <div class="links svelte-1jvef4m"><div class="pageNo noselect svelte-1jvef4m"> </div></div> <!> <div class="chunkSize noselect svelte-1jvef4m">Entries <!></div> <!></div>');function hs(p,a){ie(a,!0);let t=z(a,"itemsTotal",3,0),n=z(a,"sspPage",11,1),r=z(a,"sspPageSize",11,15),h=z(a,"sspContinuationToken",11,""),m=z(a,"fetchPageCallback",3,(D,R)=>{}),u=z(a,"sspPageSizeChange",3,D=>{});const E=[2,3,5,7,10,15,20,30,50,100],S=16;let v=I(o(r()));Se(()=>{e(v)&&(console.log("page size change in pagination server"),u()(e(v)))});var w=Nn(),f=d(w);{var A=D=>{var R=Ln();R.__click=[An,m];var j=d(R);Qt(j,{width:S}),c(R),De("keypress",R,()=>m()(0,!0)),l(D,R)};M(f,D=>{n()!==1&&D(A)})}var k=i(f,2),g=d(k),y=d(g,!0);c(g),c(k);var $=i(k,2);{var _=D=>{var R=Rn();R.__click=[jn,m];var j=d(R);Qt(j,{width:S}),c(R),De("keypress",R,()=>m()(0,!1)),l(D,R)};M($,D=>{h()&&D(_)})}var x=i($,2),b=i(d(x));St(b,{options:E,width:"50px",get value(){return e(v)},set value(D){s(v,o(D))}}),c(x);var C=i(x,2);{var L=D=>{var R=Dn(),j=d(R);c(R),U(()=>V(j,`Total: ${t()??""}`)),l(D,R)};M(C,D=>{t()&&t()>0&&D(L)})}c(w),U(()=>V(y,n())),l(p,w),ne()}at(["click"]);var Mn=T('<div class="svelte-1n3c0ep"><!></div>'),zn=T('<div class="svelte-1n3c0ep"><!></div>'),On=T(' <div class="content"><!> <!> <div id="users" class="svelte-1n3c0ep"><!></div> <!></div>',1);function Pn(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=I(""),u=I(!1),E=I(""),S=I(0),v=I(15),w=I(""),f=I(1),A=I(o([{label:"E-Mail",callback:(q,H)=>q.email.toLowerCase().includes(H.toLowerCase())},{label:"ID",callback:(q,H)=>q.id.toLowerCase().includes(H.toLowerCase())}])),k=I(o([{label:"E-Mail",callback:(q,H)=>q.email.localeCompare(H.email)},{label:"ID",callback:(q,H)=>q.id.localeCompare(H.id)},{label:"Created",callback:(q,H)=>q.created_at<H.created_at},{label:"Last Login",callback:(q,H)=>{let G=q.last_login||9999999999,Z=H.last_login||9999999999;return G<Z}}]));Le(async()=>{g(),_(),x()});async function g(q,H,G,Z){let re;if(q===!0?G&&e(f)===2?re=await ls(Z||e(v),H,void 0,!1):re=await ls(Z||e(v),H,e(w),G):re=await vl(),!re.ok)s(t,"Error fetching users: "+re.body.message);else{re.status===206?(s(v,o(Number.parseInt(re.headers.get("x-page-size"),10))),s(m,"user"),re.headers.get("x-continuation-token"),s(w,o(re.headers.get("x-continuation-token")))):s(m,""),s(S,o(re.headers.get("x-user-count")));let ce=await re.json();s(n,o([...ce])),s(r,o([...ce]))}}async function y(q,H){await g(!0,q,H),H?s(f,e(f)-1):s(f,e(f)+1)}async function $(q){s(w,""),await g(!0,0,!1,q),s(f,1)}async function _(){let q=await ns();if(!q.ok)s(t,"Error fetching roles: "+q.body.message);else{let H=await q.json();Ol.set(H),Ea.set(H.map(G=>G.name))}}async function x(){let q=await ss();if(!q.ok)s(t,"Error fetching groups: "+q.body.message);else{let H=await q.json();Pl.set(H),Sa.set(H.map(G=>G.name))}}function b(){g(),_(),x(),s(E,"")}F();var C=On(),L=ee(C),D=i(L),R=d(D);Lt(R,{get items(){return e(n)},get resItems(){return e(r)},set resItems(q){s(r,o(q))},get searchOptions(){return e(A)},set searchOptions(q){s(A,o(q))},get orderOptions(){return e(k)},set orderOptions(q){s(k,o(q))},get useServerSideIdx(){return e(m)},set useServerSideIdx(q){s(m,o(q))},get isSearchFiltered(){return e(u)},set isSearchFiltered(q){s(u,o(q))},get search(){return e(E)},set search(q){s(E,o(q))}});var j=i(R,2);dn(j,{onSave:b});var K=i(j,2),N=d(K);{var B=q=>{var H=pe(),G=ee(H);We(G,17,()=>e(r),Z=>Z.id,(Z,re)=>{var ce=Mn(),$e=d(ce);us($e,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:b}),c(ce),l(Z,ce)}),l(q,H)},O=q=>{var H=pe(),G=ee(H);We(G,17,()=>e(h),Z=>Z.id,(Z,re)=>{var ce=zn(),$e=d(ce);us($e,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:b}),c(ce),l(Z,ce)}),l(q,H)};M(N,q=>{e(m)&&!e(u)?q(B):q(O,!1)})}c(K);var P=i(K,2);{var W=q=>{hs(q,{get itemsTotal(){return e(S)},fetchPageCallback:y,sspPageSizeChange:$,get sspPage(){return e(f)},set sspPage(H){s(f,o(H))},get sspPageSize(){return e(v)},set sspPageSize(H){s(v,o(H))},get sspContinuationToken(){return e(w)},set sspContinuationToken(H){s(w,o(H))}})},X=q=>{Nt(q,{get items(){return e(r)},set items(H){s(r,o(H))},get resItems(){return e(h)},set resItems(H){s(h,o(H))}})};M(P,q=>{e(m)&&!e(u)?q(W):q(X,!1)})}c(D),U(()=>V(L,`${e(t)??""} `)),l(p,C),ne()}var qn=T('<div class="content svelte-1mqfi4i"><!></div>');function kt(p,a){ie(a,!0);let t=z(a,"eventsCollapsed",11,!0),n=z(a,"eventsWide",11,!1);var r=qn(),h=d(r);gt(h,()=>a.children??mt),c(r),U(()=>{_t(r,"mr",!t()&&!n()),_t(r,"mrCollapsed",t()&&!n()),_t(r,"mrWide",!t()&&n())}),l(p,r),ne()}var Un=T('<div class="success svelte-17in7jd">Success</div>'),Wn=T('<div class="mainErr err svelte-17in7jd"> </div>'),Kn=T('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function Gn(p,a){ie(a,!0);let t=z(a,"role",31,()=>o({})),n=I(""),r=I(!1),h=I(void 0);Se(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=I(o({}));const u=Qe().shape({name:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(s(n,""),!await S()){s(n,"Invalid input");return}let C={role:t().name.trim()},L=await Sl(t().id,C);if(L.ok)s(r,!0);else{let D=await L.json();s(n,o(D.message))}}async function S(){try{return await u.validate(t(),{abortEarly:!1}),s(m,o({})),!0}catch(C){return s(m,o(Je(C))),!1}}var v=Kn(),w=d(v),f=i(d(w),2),A=d(f,!0);c(f),c(w);var k=i(w,2),g=Ge(()=>t().name==="rauthy_admin");ve(k,{autocomplete:"off",placeholder:"Role Name",get disabled(){return e(g)},get value(){return t().name},set value(C){t(t().name=C,!0)},get error(){return e(m).name},set error(C){e(m).name=C},$$events:{input:S},children:(C,L)=>{F();var D=Y("ROLE NAME");l(C,D)},$$slots:{default:!0}});var y=i(k,2);Te(y,{level:1,width:"4rem",$$events:{click:E},children:(C,L)=>{F();var D=Y("SAVE");l(C,D)},$$slots:{default:!0}});var $=i(y,2);{var _=C=>{var L=Un();l(C,L)};M($,C=>{e(r)&&C(_)})}var x=i($,2);{var b=C=>{var L=Wn(),D=d(L,!0);c(L),U(()=>V(D,e(n))),l(C,L)};M(x,C=>{e(n)&&C(b)})}c(v),U(()=>V(A,t().id)),l(p,v),ne()}var Fn=T('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy_admin role cannot be deleted.</div>'),Bn=T('<div class="err svelte-1jljqe9"> </div>'),Hn=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this role?</div> <!> <!>',1),Yn=T('<div class="container svelte-1jljqe9"><!></div>');function Vn(p,a){ie(a,!0);let t=z(a,"role",19,()=>({})),n=I(!1),r=I("");async function h(){s(r,""),s(n,!0);let v=await Il(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Yn(),u=d(m);{var E=v=>{var w=Fn();l(v,w)},S=v=>{var w=Hn(),f=i(ee(w),2);Te(f,{level:1,get isLoading(){return e(n)},set isLoading(g){s(n,o(g))},$$events:{click:h},children:(g,y)=>{F();var $=Y("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var y=Bn(),$=d(y,!0);c(y),U(()=>V($,e(r))),l(g,y)};M(A,g=>{e(r)&&g(k)})}l(v,w)};M(u,v=>{t().name==="rauthy_admin"?v(E):v(S,!1)})}c(m),l(p,m),ne()}var Jn=T('<div class="data font-mono svelte-115hohv"> </div>'),Qn=T('<div class="data svelte-115hohv"> </div>'),Zn=T('<div class="header svelte-115hohv"><!> <!></div>'),Xn=T("<div><!></div>"),eo=T("<div><!></div>"),to=T("<div><!> <!></div>");function ao(p,a){ie(a,!0);let t=z(a,"role",31,()=>o({})),n=z(a,"onSave",15),r=I(void 0);const h=["Config","Delete"];let m=I(o(h[0]));const u=200,E=u/2;function S(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Zn(),f=d(w);Ze(f,{text:"Role ID",children:(k,g)=>{var y=Jn(),$=d(y,!0);c(y),U(()=>V($,t().id)),l(k,y)},$$slots:{default:!0}});var A=i(f,2);Ze(A,{text:"Role Name",children:(k,g)=>{var y=Qn(),$=d(y,!0);c(y),U(()=>V($,t().name)),l(k,y)},$$slots:{default:!0}}),c(w),l(v,w)},body:v=>{var w=to(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Xn(),_=d($);Gn(_,{get role(){return t()},set role(x){t(x)},get onSave(){return n()},set onSave(x){n(x)}}),c($),de(5,$,()=>we,()=>({delay:E,duration:u})),de(6,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=pe(),_=ee($);{var x=b=>{var C=eo(),L=d(C);Vn(L,{get role(){return t()},onSave:S}),c(C),de(5,C,()=>we,()=>({delay:E,duration:u})),de(6,C,()=>we,()=>({duration:u})),l(b,C)};M(_,b=>{e(m)==="Delete"&&b(x)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),ne()}var so=T('<div class="header font-label svelte-r30xs6">ADD NEW ROLE</div>'),ro=T('<div class="success svelte-r30xs6">Success</div>'),lo=T('<div class="err svelte-r30xs6"> </div>'),io=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function no(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1),n=I(void 0),r=I(o({role:""})),h=I(""),m=I(!1),u=I(void 0),E=I(o({}));const S=Qe().shape({role:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Se(()=>{e(m)&&s(u,o(setTimeout(()=>{s(m,!1),s(r,o({role:""})),s(n,!1),a.onSave()},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await w()){s(h,"Invalid input");return}e(r).role=e(r).role.trim();let f=await El(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,o(A.message))}}async function w(){try{return await S.validate(e(r),{abortEarly:!1}),s(E,o({})),!0}catch(f){return s(E,o(Je(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(n)},set show(f){s(n,o(f))},header:f=>{var A=so();l(f,A)},body:f=>{var A=io(),k=d(A);ve(k,{autocomplete:"off",placeholder:"Role Name",get value(){return e(r).role},set value(b){e(r).role=b},get error(){return e(E).role},set error(b){e(E).role=b},$$events:{input:w},children:(b,C)=>{F();var L=Y("ROLE NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Te(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=ro();l(b,C)};M(y,b=>{e(m)&&b($)})}var _=i(y,2);{var x=b=>{var C=lo(),L=d(C,!0);c(C),U(()=>V(L,e(h))),l(b,C)};M(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),ne()}var oo=T('<div class="svelte-db30dl"><!></div>'),vo=T(' <div class="content"><!> <!> <div id="roles" class="svelte-db30dl"></div> <!> <div style="height: 20px"></div></div>',1);function co(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=I(""),u=[{label:"Name",callback:(_,x)=>_.name.toLowerCase().includes(x.toLowerCase())},{label:"ID",callback:(_,x)=>_.id.toLowerCase().includes(x.toLowerCase())}],E=[{label:"Name",callback:(_,x)=>_.name.localeCompare(x.name)},{label:"ID",callback:(_,x)=>_.id.localeCompare(x.id)}];Le(async()=>{S()});async function S(){let _=await ns(),x=await _.json();_.ok?s(n,o([...x])):s(t,o(x.message))}function v(){S(),s(m,"")}F();var w=vo(),f=ee(w),A=i(f),k=d(A);Lt(k,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(_){s(r,o(_))},get search(){return e(m)},set search(_){s(m,o(_))}});var g=i(k,2);no(g,{onSave:v});var y=i(g,2);We(y,23,()=>e(h),_=>_.id,(_,x,b)=>{var C=oo(),L=d(C);ao(L,{onSave:v,get role(){return e(n)[e(b)]},set role(D){e(n)[e(b)]=D}}),c(C),l(_,C)}),c(y);var $=i(y,2);Nt($,{get items(){return e(r)},set items(_){s(r,o(_))},get resItems(){return e(h)},set resItems(_){s(h,o(_))}}),F(2),c(A),U(()=>V(f,`${e(t)??""} `)),l(p,w),ne()}var uo=T('<div class="header font-label svelte-r30xs6">ADD NEW GROUP</div>'),ho=T('<div class="success svelte-r30xs6">Success</div>'),po=T('<div class="err svelte-r30xs6"> </div>'),mo=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function fo(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1),n=I(void 0),r=I(o({group:""})),h=I(""),m=I(!1),u=I(void 0),E=I(o({}));const S=Qe().shape({group:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Se(()=>{e(m)&&s(u,o(setTimeout(()=>{a.onSave(),s(m,!1),s(r,o({group:""})),s(n,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await w()){s(h,"Invalid input");return}e(r).group=e(r).group.trim();let f=await Fr(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,o(A.message))}}async function w(){try{return await S.validate(e(r),{abortEarly:!1}),s(E,o({})),!0}catch(f){return s(E,o(Je(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(n)},set show(f){s(n,o(f))},header:f=>{var A=uo();l(f,A)},body:f=>{var A=mo(),k=d(A);ve(k,{autocomplete:"off",placeholder:"Group Name",get value(){return e(r).group},set value(b){e(r).group=b},get error(){return e(E).group},set error(b){e(E).group=b},$$events:{input:w},children:(b,C)=>{F();var L=Y("GROUP NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Te(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=ho();l(b,C)};M(y,b=>{e(m)&&b($)})}var _=i(y,2);{var x=b=>{var C=po(),L=d(C,!0);c(C),U(()=>V(L,e(h))),l(b,C)};M(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),ne()}var go=T('<div class="success svelte-17in7jd">Success</div>'),wo=T('<div class="mainErr err svelte-17in7jd"> </div>'),yo=T('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function bo(p,a){ie(a,!0);let t=z(a,"group",31,()=>o({})),n=I(""),r=I(!1),h=I(void 0);Se(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=I(o({}));const u=Qe().shape({name:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(s(n,""),!await S()){s(n,"Invalid input");return}let b={group:t().name.trim()},C=await Br(t().id,b);if(C.ok)s(r,!0);else{let L=await C.json();s(n,o(L.message))}}async function S(){try{return await u.validate(t(),{abortEarly:!1}),s(m,o({})),!0}catch(b){return s(m,o(Je(b))),!1}}var v=yo(),w=d(v),f=i(d(w),2),A=d(f,!0);c(f),c(w);var k=i(w,2);ve(k,{autocomplete:"off",placeholder:"Group Name",get value(){return t().name},set value(b){t(t().name=b,!0)},get error(){return e(m).name},set error(b){e(m).name=b},$$events:{input:S},children:(b,C)=>{F();var L=Y("GROUP NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Te(g,{level:1,width:"4rem",$$events:{click:E},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=go();l(b,C)};M(y,b=>{e(r)&&b($)})}var _=i(y,2);{var x=b=>{var C=wo(),L=d(C,!0);c(C),U(()=>V(L,e(n))),l(b,C)};M(_,b=>{e(n)&&b(x)})}c(v),U(()=>V(A,t().id)),l(p,v),ne()}var $o=T('<div class="err svelte-1jljqe9"> </div>'),_o=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this group?</div> <!> <!></div>');function ko(p,a){ie(a,!0);let t=z(a,"group",19,()=>({})),n=I(!1),r=I("");async function h(){s(r,""),s(n,!0);let v=await Hr(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=_o(),u=i(d(m),2);Te(u,{level:1,get isLoading(){return e(n)},set isLoading(v){s(n,o(v))},$$events:{click:h},children:(v,w)=>{F();var f=Y("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var S=v=>{var w=$o(),f=d(w,!0);c(w),U(()=>V(f,e(r))),l(v,w)};M(E,v=>{e(r)&&v(S)})}c(m),l(p,m),ne()}var xo=T('<div class="data font-mono svelte-115hohv"> </div>'),Eo=T('<div class="data svelte-115hohv"> </div>'),So=T('<div class="header svelte-115hohv"><!> <!></div>'),Io=T("<div><!></div>"),To=T("<div><!></div>"),Co=T("<div><!> <!></div>");function Ao(p,a){ie(a,!0);let t=z(a,"group",31,()=>o({})),n=I(void 0);const r=["Config","Delete"];let h=I(o(r[0]));const m=200,u=m/2;function E(){s(n,!1),a.onSave()}vt(p,{get show(){return e(n)},set show(S){s(n,o(S))},header:S=>{var v=So(),w=d(v);Ze(w,{text:"Group ID",children:(A,k)=>{var g=xo(),y=d(g,!0);c(g),U(()=>V(y,t().id)),l(A,g)},$$slots:{default:!0}});var f=i(w,2);Ze(f,{text:"Group Name",children:(A,k)=>{var g=Eo(),y=d(g,!0);c(g),U(()=>V(y,t().name)),l(A,g)},$$slots:{default:!0}}),c(v),l(S,v)},body:S=>{var v=Co(),w=d(v);Dt(w,{labels:r,get selected(){return e(h)},set selected(g){s(h,o(g))}});var f=i(w,2);{var A=g=>{var y=Io(),$=d(y);bo($,{get onSave(){return a.onSave},get group(){return t()},set group(_){t(_)}}),c(y),de(5,y,()=>we,()=>({delay:u,duration:m})),de(6,y,()=>we,()=>({duration:m})),l(g,y)},k=g=>{var y=pe(),$=ee(y);{var _=x=>{var b=To(),C=d(b);ko(C,{get group(){return t()},onSave:E}),c(b),de(5,b,()=>we,()=>({delay:u,duration:m})),de(6,b,()=>we,()=>({duration:m})),l(x,b)};M($,x=>{e(h)==="Delete"&&x(_)},!0)}l(g,y)};M(f,g=>{e(h)==="Config"?g(A):g(k,!1)})}c(v),l(S,v)},$$slots:{header:!0,body:!0}}),ne()}var Lo=T('<div class="svelte-10dkaqk"><!></div>'),jo=T(' <div class="content"><!> <!> <div id="groups" class="svelte-10dkaqk"></div> <!> <div style="height: 20px"></div></div>',1);function Ro(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=[{label:"Name",callback:($,_)=>$.name.toLowerCase().includes(_.toLowerCase())},{label:"ID",callback:($,_)=>$.id.toLowerCase().includes(_.toLowerCase())}],u=[{label:"Name",callback:($,_)=>$.name.localeCompare(_.name)},{label:"ID",callback:($,_)=>$.id.localeCompare(_.id)}];Le(async()=>{E()});async function E(){let $=await ss(),_=await $.json();$.ok?s(n,o([..._])):s(t,o(_.message))}function S(){E()}F();var v=jo(),w=ee(v),f=i(w),A=d(f);Lt(A,{get items(){return e(n)},searchOptions:m,orderOptions:u,get resItems(){return e(r)},set resItems($){s(r,o($))}});var k=i(A,2);fo(k,{onSave:S});var g=i(k,2);We(g,23,()=>e(h),$=>$.id,($,_,x)=>{let b=x;var C=Lo(),L=d(C);Ao(L,{onSave:S,get group(){return e(h)[e(b)]},set group(D){e(h)[e(b)]=D}}),c(C),l($,C)}),c(g);var y=i(g,2);Nt(y,{get items(){return e(r)},set items($){s(r,o($))},get resItems(){return e(h)},set resItems($){s(h,o($))}}),F(2),c(f),U(()=>V(w,`${e(t)??""} `)),l(p,v),ne()}var Do=T('<div class="header font-label svelte-r30xs6">ADD NEW SCOPE</div>'),No=T('<div class="success svelte-r30xs6">Success</div>'),Mo=T('<div class="err svelte-r30xs6"> </div>'),zo=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function Oo(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1),n=I(void 0),r=I(o({scope:""})),h=I(""),m=I(!1),u=I(void 0),E=I(o({}));const S=Qe().shape({scope:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Se(()=>{e(m)&&s(u,o(setTimeout(()=>{a.onSave(),s(m,!1),s(r,o({scope:""})),s(n,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await w()){s(h,"Invalid input");return}e(r).scope=e(r).scope.trim();let f=await Tl(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,o(A.message))}}async function w(){try{return await S.validate(e(r),{abortEarly:!1}),s(E,o({})),!0}catch(f){return s(E,o(Je(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(n)},set show(f){s(n,o(f))},header:f=>{var A=Do();l(f,A)},body:f=>{var A=zo(),k=d(A);ve(k,{autocomplete:"off",placeholder:"Scope Name",get value(){return e(r).scope},set value(b){e(r).scope=b},get error(){return e(E).scope},set error(b){e(E).scope=b},$$events:{input:w},children:(b,C)=>{F();var L=Y("SCOPE NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Te(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=No();l(b,C)};M(y,b=>{e(m)&&b($)})}var _=i(y,2);{var x=b=>{var C=Mo(),L=d(C,!0);c(C),U(()=>V(L,e(h))),l(b,C)};M(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),ne()}var Po=T('<div class="desc svelte-guvobw"><p>Custom mappings cannot be done for OpenID default scopes and their names cannot be changed.</p></div>'),qo=T('<div class="desc svelte-guvobw"><p>You can map custom scopes to attributes.<br> All additional attributes, that were configured, can have a custom value for each user.<br> When they are mapped to a scope, they can be included in the Access and / or ID Tokens.</p></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ACCESS TOKEN MAPPINGS</div> <!></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ID TOKEN MAPPINGS</div> <!></div>',1),Uo=T('<div class="success svelte-guvobw">Success</div>'),Wo=T('<div class="mainErr err svelte-guvobw"> </div>'),Ko=T("<!> <!> <!>",1),Go=T('<div class="container svelte-guvobw"><div class="unit svelte-guvobw"><div class="label font-label svelte-guvobw">ID</div> <div class="value font-mono svelte-guvobw"> </div></div> <!> <div class="separator"></div> <!> <!></div>');function Fo(p,a){ie(a,!0);let t=z(a,"attrs",27,()=>o([])),n=z(a,"scope",31,()=>o({})),r=I(""),h=I(!1),m=I(void 0),u=I(!1),E=I(o([]));Se(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1),a.onSave()},2e3)))}),Se(()=>{t()&&s(E,o(t().map(D=>D.name)))}),Le(()=>(s(u,o(Ha(n().name))),()=>clearTimeout(e(m))));let S=I(o({}));const v=Qe().shape({name:he().trim().matches(Wt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function w(){if(s(r,""),!await f()){s(r,"Invalid input");return}let D={scope:n().name.trim()};n().attr_include_access.length>0&&(D.attr_include_access=n().attr_include_access),n().attr_include_id.length>0&&(D.attr_include_id=n().attr_include_id);let R=await Cl(n().id,D);if(R.ok)s(h,!0);else{let j=await R.json();s(r,o(j.message))}}async function f(){try{return await v.validate(n(),{abortEarly:!1}),s(S,o({})),!0}catch(D){return s(S,o(Je(D))),!1}}var A=Go(),k=d(A),g=i(d(k),2),y=d(g,!0);c(g),c(k);var $=i(k,2);ve($,{autocomplete:"off",placeholder:"Scope Name",get disabled(){return e(u)},get value(){return n().name},set value(D){n(n().name=D,!0)},get error(){return e(S).name},set error(D){e(S).name=D},$$events:{input:f},children:(D,R)=>{F();var j=Y("SCOPE NAME");l(D,j)},$$slots:{default:!0}});var _=i($,4);{var x=D=>{var R=Po();l(D,R)},b=D=>{var R=qo(),j=i(ee(R),2);oe(j,"margin-top","-3px");var K=i(d(j),2);Ot(K,{get options(){return e(E)},searchThreshold:4,get items(){return n().attr_include_access},set items(O){n(n().attr_include_access=O,!0)}}),c(j);var N=i(j,2);oe(N,"margin-top","-3px");var B=i(d(N),2);Ot(B,{get options(){return e(E)},searchThreshold:4,get items(){return n().attr_include_id},set items(O){n(n().attr_include_id=O,!0)}}),c(N),l(D,R)};M(_,D=>{e(u)?D(x):D(b,!1)})}var C=i(_,2);{var L=D=>{var R=Ko(),j=ee(R);Te(j,{level:1,width:"4rem",$$events:{click:w},children:(P,W)=>{F();var X=Y("SAVE");l(P,X)},$$slots:{default:!0}});var K=i(j,2);{var N=P=>{var W=Uo();l(P,W)};M(K,P=>{e(h)&&P(N)})}var B=i(K,2);{var O=P=>{var W=Wo(),X=d(W,!0);c(W),U(()=>V(X,e(r))),l(P,W)};M(B,P=>{e(r)&&P(O)})}l(D,R)};M(C,D=>{e(u)||D(L)})}c(A),U(()=>V(y,n().id)),l(p,A),ne()}var Bo=T('<div class="label svelte-1jljqe9">OpenID default scopes cannot be deleted</div>'),Ho=T('<div class="err svelte-1jljqe9"> </div>'),Yo=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this scope?</div> <!> <!>',1),Vo=T('<div class="container svelte-1jljqe9"><!></div>');function Jo(p,a){ie(a,!0);let t=z(a,"scope",19,()=>({})),n=I(!1),r=I("");async function h(){s(r,""),s(n,!0);let v=await Al(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Vo(),u=d(m);{var E=v=>{var w=Bo();l(v,w)},S=v=>{var w=Yo(),f=i(ee(w),2);Te(f,{level:1,get isLoading(){return e(n)},set isLoading(g){s(n,o(g))},$$events:{click:h},children:(g,y)=>{F();var $=Y("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var y=Ho(),$=d(y,!0);c(y),U(()=>V($,e(r))),l(g,y)};M(A,g=>{e(r)&&g(k)})}l(v,w)};M(u,v=>{Ha(t().name)?v(E):v(S,!1)})}c(m),l(p,m),ne()}var Qo=T('<div class="data font-mono svelte-115hohv"> </div>'),Zo=T('<div class="data svelte-115hohv"> </div>'),Xo=T('<div class="header svelte-115hohv"><!> <!></div>'),ev=T("<div><!></div>"),tv=T("<div><!></div>"),av=T("<div><!> <!></div>");function sv(p,a){ie(a,!0);let t=z(a,"attrs",15),n=z(a,"scope",31,()=>o({})),r=z(a,"onSave",15),h=I(void 0);const m=["Config","Delete"];let u=I(o(m[0]));const E=200,S=E/2;function v(){s(h,!1),r()()}vt(p,{get show(){return e(h)},set show(w){s(h,o(w))},header:w=>{var f=Xo(),A=d(f);Ze(A,{text:"Scope ID",children:(g,y)=>{var $=Qo(),_=d($,!0);c($),U(()=>V(_,n().id)),l(g,$)},$$slots:{default:!0}});var k=i(A,2);Ze(k,{text:"Scope Name",children:(g,y)=>{var $=Zo(),_=d($,!0);c($),U(()=>V(_,n().name)),l(g,$)},$$slots:{default:!0}}),c(f),l(w,f)},body:w=>{var f=av(),A=d(f);Dt(A,{labels:m,get selected(){return e(u)},set selected($){s(u,o($))}});var k=i(A,2);{var g=$=>{var _=ev(),x=d(_);Fo(x,{get attrs(){return t()},set attrs(b){t(b)},get scope(){return n()},set scope(b){n(b)},get onSave(){return r()},set onSave(b){r(b)}}),c(_),de(5,_,()=>we,()=>({delay:S,duration:E})),de(6,_,()=>we,()=>({duration:E})),l($,_)},y=$=>{var _=pe(),x=ee(_);{var b=C=>{var L=tv(),D=d(L);Jo(D,{get scope(){return n()},onSave:v}),c(L),de(5,L,()=>we,()=>({delay:S,duration:E})),de(6,L,()=>we,()=>({duration:E})),l(C,L)};M(x,C=>{e(u)==="Delete"&&C(b)},!0)}l($,_)};M(k,$=>{e(u)==="Config"?$(g):$(y,!1)})}c(f),l(w,f)},$$slots:{header:!0,body:!0}}),ne()}var rv=T('<div class="svelte-15sc49d"><!></div>'),lv=T(' <div class="content"><!> <!> <div id="scopes" class="svelte-15sc49d"></div> <!> <div style="height: 20px"></div></div>',1);function iv(p,a){ie(a,!0);let t=I(o([])),n=I(""),r=I(o([])),h=I(o([])),m=I(o([])),u=I(""),E=[{label:"Name",callback:(b,C)=>b.name.toLowerCase().includes(C.toLowerCase())},{label:"ID",callback:(b,C)=>b.id.toLowerCase().includes(C.toLowerCase())}],S=[{label:"Name",callback:(b,C)=>b.name.localeCompare(C.name)},{label:"ID",callback:(b,C)=>b.id.localeCompare(C.id)}];Le(()=>{w(),v(),s(u,"")});async function v(){let b=await xa();if(!b.ok)s(n,"Error fetching attributes: "+b.body.message);else{let C=await b.json();s(t,o([...C.values]))}}async function w(){let b=await os(),C=await b.json();b.ok?s(r,o([...C])):s(n,o(C.message))}function f(){w()}F();var A=lv(),k=ee(A),g=i(k),y=d(g);Lt(y,{get items(){return e(r)},searchOptions:E,orderOptions:S,get resItems(){return e(h)},set resItems(b){s(h,o(b))},get search(){return e(u)},set search(b){s(u,o(b))}});var $=i(y,2);Oo($,{onSave:f});var _=i($,2);We(_,23,()=>e(m),b=>b.id,(b,C,L)=>{var D=rv(),R=d(D);sv(R,{onSave:f,get attrs(){return e(t)},set attrs(j){s(t,o(j))},get scope(){return e(m)[e(L)]},set scope(j){e(m)[e(L)]=j}}),c(D),l(b,D)}),c(_);var x=i(_,2);Nt(x,{get items(){return e(h)},set items(b){s(h,o(b))},get resItems(){return e(m)},set resItems(b){s(m,o(b))}}),F(2),c(g),U(()=>V(k,`${e(n)??""} `)),l(p,A),ne()}var nv=T('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),ov=T('<div class="list svelte-f2hz2l"></div>');function ps(p,a){let t=z(a,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var n=ov();We(n,21,t,ht,(r,h,m)=>{var u=nv(),E=d(u),S=d(E,!0);c(E);var v=i(E,2);He(v,{get selected(){return e(h).value},set selected(w){e(h).value=w}}),c(u),U(()=>V(S,e(h).label)),l(r,u)}),c(n),l(p,n)}var vv=T("<div><!></div>");function cv(p,a){ie(a,!0);let t=z(a,"validation",19,()=>({})),n=z(a,"value",15),r=z(a,"autocomplete",11,"on"),h=z(a,"validate",15),m=Ut(a,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);h(w);let u=I("");const E=Xt();async function S(){await Yt(),E("input",!0),w()}async function v(){E("blur",!0),w()}function w(){var k;return s(u,""),n()&&((k=t())!=null&&k.regex)&&!n().match(t().regex)?(s(u,o(t().errMsg||"Invalid input")),!1):!0}var f=vv(),A=d(f);return ve(A,Wa({get width(){return a.width},get name(){return a.name},get autocomplete(){return r()}},()=>m,{get value(){return n()},set value(k){n(k)},get error(){return e(u)},set error(k){s(u,o(k))},$$events:{input:S,blur:v},children:(k,g)=>{var y=pe(),$=ee(y);gt($,()=>a.children??mt),l(k,y)},$$slots:{default:!0}})),c(f),de(7,f,()=>dt,()=>({duration:200})),l(p,f),ne({validateValue:w})}var dv=T('<div class="err svelte-nzivgu"> </div>'),uv=T('<div class="container svelte-nzivgu"><!> <!></div>');function Ft(p,a){ie(a,!0);let t=z(a,"validation",27,()=>o({required:!1,regex:void 0,errMsg:""})),n=z(a,"values",15),r=z(a,"validate",15),h=z(a,"width",3,"260px"),m=z(a,"optional",3,!1),u=z(a,"autocomplete",15,"on"),E=Ut(a,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);r(k);let S=I(""),v=I(o([]));const w=Xt();Le(()=>{n()||n([]);for(let x of n())e(v).push({name:zt(),value:x});e(v).push({name:zt(),value:""})});async function f(){await Yt(),e(v)[e(v).length-1].value?e(v).push({name:zt(),value:""}):e(v).length>1&&!e(v)[e(v).length-2].value&&s(v,o([...e(v).slice(0,e(v).length-1)])),w("input",!0),k(),n(A())}function A(){k();let x=[];for(let b=0;b<e(v).length-1;b++)x.push(e(v)[b].value);return x}function k(){if(t().required&&e(v).length===1&&!e(v)[0].value)return m()?!0:(s(S,"Required"),!1);let x=!0;for(let b of e(v))b.value&&!b.validate()&&(x=!1);return x}var g=uv(),y=d(g);We(y,17,()=>e(v),ht,(x,b,C)=>{cv(x,Wa({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(b).name}},()=>E,{get value(){return e(b).value},set value(L){e(b).value=L},get validate(){return e(b).validate},set validate(L){e(b).validate=L},get autocomplete(){return u()},set autocomplete(L){u(L)},$$events:{input:f,blur:f},children:(L,D)=>{var R=pe(),j=ee(R);gt(j,()=>a.children??mt),l(L,R)},$$slots:{default:!0}}))});var $=i(y,2);{var _=x=>{var b=dv(),C=d(b,!0);c(b),U(()=>V(C,e(S))),l(x,b)};M($,x=>{e(S)&&x(_)})}return c(g),U(()=>oe(g,"width",h())),l(p,g),ne({getValues:A,validateValues:k})}var hv=T('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),pv=T(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),mv=T('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),fv=T('<div class="success svelte-1pba61y">Success</div>'),gv=T('<div class="mainErr err svelte-1pba61y"> </div>'),wv=T(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function yv(p,a){ie(a,!0);let t=z(a,"client",31,()=>o({}));const n="350px";let r=I(""),h=I(!1),m=I(void 0),u=o(Bs.map(se=>{var Ae,Oe;return se.label==="device_code"?se.value=(Ae=t().flows_enabled)==null?void 0:Ae.includes("urn:ietf:params:oauth:grant-type:device_code"):se.value=(Oe=t().flows_enabled)==null?void 0:Oe.includes(se.label),se})),E=I(void 0);vs.subscribe(se=>{s(E,o(se))});let S=o(Hs.map(se=>{var Ae;return se.value=(Ae=t().challenges)==null?void 0:Ae.includes(se.label),se})),v=I(void 0),w=I(void 0),f=I(void 0),A=I(void 0);Le(()=>()=>clearTimeout(e(m)));let k=I(o({}));const g=Qe().shape({name:he().trim().matches(aa,"Can only contain characters, numbers and '-'"),client_uri:he().trim().nullable().matches(tt,"Invalid URI"),access_token_lifetime:$t().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function y(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function $(se){se.code==="Enter"&&_()}async function _(){s(r,"");const se=await x();if(!e(w)()){s(r,"Invalid Allowed Origin");return}if(!e(f)()){s(r,"Invalid Redirect URIs");return}if(!e(A)()){s(r,"Invalid Post Logout URIs");return}if(!e(v)()){s(r,"Invalid Contacts");return}if(!se){s(r,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=u.filter(Q=>Q.value).map(Q=>Q.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":Q.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){s(r,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){s(r,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){s(r,"At least one flow must be enabled");return}let Ae=t();t(t().challenges=S.filter(Q=>Q.value).map(Q=>Q.label),!0),t().challenges.length===0&&(Ae.challenges=null),Ae.name||(Ae.name=void 0),Ae.allowed_origins.length>0&&!Ae.allowed_origins[0]&&(Ae.allowed_origins=[]);let Oe=await Rr(Ae);if(Oe.ok)s(h,!0);else{let Q=await Oe.json();s(r,o(Q.message))}}async function x(){try{return await g.validate(t(),{abortEarly:!1}),s(k,o({})),!0}catch(se){return s(k,o(Je(se))),!1}}Se(()=>{t().id&&y()}),Se(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1),a.onSave()},3e3)))});var b=wv(),C=d(b),L=i(d(C),2),D=d(L,!0);c(L),c(C);var R=i(C,4);ve(R,{autocomplete:"off",placeholder:"Client Name",width:n,get value(){return t().name},set value(se){t(t().name=se,!0)},get error(){return e(k).name},set error(se){e(k).name=se},$$events:{keypress:$,input:x},children:(se,Ae)=>{F();var Oe=Y("CLIENT NAME");l(se,Oe)},$$slots:{default:!0}});var j=i(R,4);ve(j,{autocomplete:"off",placeholder:"Client URI",width:n,get value(){return t().client_uri},set value(se){t(t().client_uri=se,!0)},get error(){return e(k).client_uri},set error(se){e(k).client_uri=se},$$events:{keypress:$,input:x},children:(se,Ae)=>{F();var Oe=Y("CLIENT URI");l(se,Oe)},$$slots:{default:!0}});var K=i(j,2);Ft(K,{style:`width: ${n}`,validation:{required:!1,regex:Ys,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(se){t(t().contacts=se,!0)},get validate(){return e(v)},set validate(se){s(v,o(se))},children:(se,Ae)=>{F();var Oe=Y("CONTACT");l(se,Oe)},$$slots:{default:!0}});var N=i(K,4);oe(N,"margin-top","-5px");var B=d(N);oe(B,"width","138px");var O=i(d(B),2),P=d(O);He(P,{get selected(){return t().enabled},set selected(se){t(t().enabled=se,!0)}}),c(O),c(B);var W=i(B,2);oe(W,"width","110px");var X=i(d(W),2),q=d(X);He(q,{get selected(){return t().confidential},set selected(se){t(t().confidential=se,!0)}}),c(X),c(W),c(N);var H=i(N,2),G=i(d(H),2),Z=d(G);ps(Z,{get options(){return u}}),c(G),c(H);var re=i(H,2),ce=i(d(re),2),$e=d(ce);He($e,{get selected(){return t().force_mfa},set selected(se){t(t().force_mfa=se,!0)}}),c(ce),c(re);var _e=i(re,2);{var me=se=>{var Ae=hv();oe(Ae,"margin","-10px 0 -15px 5px");var Oe=d(Ae),Q=d(Oe);oe(Q,"color","var(--col-err)"),F(7),c(Oe),c(Ae),l(se,Ae)},Me=se=>{var Ae=pe(),Oe=ee(Ae);{var Q=Ee=>{var je=pv();oe(je,"margin","-10px 0 -15px 5px");var At=d(je),ae=d(At);oe(ae,"color","var(--col-err)"),F(5),c(At),c(je),de(3,je,()=>we),l(Ee,je)};M(Oe,Ee=>{t().force_mfa&&Ee(Q)},!0)}l(se,Ae)};M(_e,se=>{t().id==="rauthy"?se(me):se(Me,!1)})}var ge=i(_e,6);oe(ge,"margin-top","-10px");var ue=i(d(ge),2);Ot(ue,{get options(){return e(E)},searchThreshold:4,get items(){return t().scopes},set items(se){t(t().scopes=se,!0)}}),c(ge);var ye=i(ge,2);oe(ye,"margin-top","-3px");var be=i(d(ye),2);Ot(be,{get options(){return e(E)},searchThreshold:4,get items(){return t().default_scopes},set items(se){t(t().default_scopes=se,!0)}}),c(ye);var ze=i(ye,4);Ft(ze,{style:`width: ${n}`,validation:{required:!0,regex:Vs,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(se){t(t().allowed_origins=se,!0)},get validate(){return e(w)},set validate(se){s(w,o(se))},children:(se,Ae)=>{F();var Oe=Y("ALLOWED ORIGIN");l(se,Oe)},$$slots:{default:!0}});var Ce=i(ze,4);Ft(Ce,{style:`width: ${n}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(se){t(t().redirect_uris=se,!0)},get validate(){return e(f)},set validate(se){s(f,o(se))},children:(se,Ae)=>{F();var Oe=Y("REDIRECT URI");l(se,Oe)},$$slots:{default:!0}});var xe=i(Ce,4);Ft(xe,{style:`width: ${n}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(se){t(t().post_logout_redirect_uris=se,!0)},get validate(){return e(A)},set validate(se){s(A,o(se))},children:(se,Ae)=>{F();var Oe=Y("POST LOGOUT REDIRECT URI");l(se,Oe)},$$slots:{default:!0}});var Re=i(xe,6);ve(Re,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:n,get value(){return t().access_token_lifetime},set value(se){t(t().access_token_lifetime=se,!0)},get error(){return e(k).access_token_lifetime},set error(se){e(k).access_token_lifetime=se},$$events:{input:x},children:(se,Ae)=>{F();var Oe=Y("ACCESS TOKEN LIFETIME");l(se,Oe)},$$slots:{default:!0}});var J=i(Re,2),Ie=d(J);oe(Ie,"width","220px");var fe=i(d(Ie),2),qe=d(fe);St(qe,{options:Ya,get value(){return t().access_token_alg},set value(se){t(t().access_token_alg=se,!0)}}),c(fe),c(Ie);var Ve=i(Ie,2),lt=d(Ve);oe(lt,"text-align","right");var ct=i(lt,2),Ue=d(ct);St(Ue,{options:Ya,get value(){return t().id_token_alg},set value(se){t(t().id_token_alg=se,!0)}}),c(ct),c(Ve),c(J);var Fe=i(J,6),ot=i(d(Fe),2),It=d(ot);ps(It,{get options(){return S}}),c(ot),c(Fe);var xt=i(Fe,2),Xe=d(xt);{var et=se=>{var Ae=mv();F(4),l(se,Ae)};M(Xe,se=>{t().id==="rauthy"&&se(et)})}c(xt);var yt=i(xt,2);Te(yt,{level:1,width:"4rem",$$events:{click:_},children:(se,Ae)=>{F();var Oe=Y("SAVE");l(se,Oe)},$$slots:{default:!0}});var pt=i(yt,2);{var Ct=se=>{var Ae=fv();l(se,Ae)};M(pt,se=>{e(h)&&se(Ct)})}var st=i(pt,2);{var rt=se=>{var Ae=gv(),Oe=d(Ae,!0);c(Ae),U(()=>V(Oe,e(r))),l(se,Ae)};M(st,se=>{e(r)&&se(rt)})}c(b),U(()=>V(D,t().id)),l(p,b),ne()}var bv=T('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function $v(p,a){ie(a,!0);let t=I(""),n=I("");Le(()=>{r()});async function r(){let A=await qr(a.client.id),k=await A.json();A.ok?s(n,o(k.secret)):s(t,o(k.message))}async function h(){let A=await Ur(a.client.id),k=await A.json();A.ok?await r():s(t,o(k.message))}var m=bv(),u=d(m),E=d(u,!0);c(u);var S=i(u,2),v=d(S);{var w=A=>{Gt(A,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(n)},set value(k){s(n,o(k))},children:(k,g)=>{F();var y=Y("CLIENT SECRET");l(k,y)},$$slots:{default:!0}})};M(v,A=>{e(n)&&A(w)})}c(S);var f=i(S,2);Te(f,{level:1,$$events:{click:h},children:(A,k)=>{F();var g=Y("GENERATE NEW");l(A,g)},$$slots:{default:!0}}),c(m),U(()=>V(E,e(t))),l(p,m),ne()}var _v=T('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),kv=T('<div class="err svelte-1jljqe9"> </div>'),xv=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),Ev=T('<div class="container svelte-1jljqe9"><!></div>');function Sv(p,a){ie(a,!0);let t=z(a,"client",19,()=>({})),n=I(!1),r=I("");async function h(){s(r,""),s(n,!0);let v=await Dr(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Ev(),u=d(m);{var E=v=>{var w=_v();l(v,w)},S=v=>{var w=xv(),f=i(ee(w),2);Te(f,{level:1,get isLoading(){return e(n)},set isLoading(g){s(n,o(g))},$$events:{click:h},children:(g,y)=>{F();var $=Y("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var y=kv(),$=d(y,!0);c(y),U(()=>V($,e(r))),l(g,y)};M(A,g=>{e(r)&&g(k)})}l(v,w)};M(u,v=>{t().id==="rauthy"?v(E):v(S,!1)})}c(m),l(p,m),ne()}var Iv=(p,a)=>s(a,!0),Tv=T('<div class="load svelte-icxpvn"><!></div>'),Cv=T('<div class="txt svelte-icxpvn">LOAD</div>'),Av=T('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function Ca(p,a){ie(a,!0);let t=I(!1),n=I(!1),r=I(void 0),h=I(void 0),m=I(void 0),u=I(void 0),E=I(void 0),S=I("white");ha(()=>{clearTimeout(e(E))});function v(){switch(a.level){case 1:s(r,o(a.colors.act1)),s(h,o(a.colors.act1a)),s(m,"white"),s(u,`1px solid ${a.colors.gmid}`);break;case 2:s(r,o(a.colors.act2)),s(h,o(a.colors.act2a)),s(m,o(a.colors.ghigh)),s(u,`1px solid ${a.colors.gmid}`);break;default:s(r,o(a.colors.ghigh)),s(h,"white"),s(m,o(a.colors.act2a)),s(u,`1px solid ${a.colors.act2a}`),s(S,o(a.colors.acnt))}}Se(()=>{e(n)&&s(E,o(setTimeout(()=>{s(n,!1)},2e3)))}),Se(()=>{a.colors&&v()});var w=Av(),f=d(w);f.__click=[Iv,n],oe(f,"width","100px");var A=d(f);{var k=y=>{var $=Tv(),_=d($);wa(_,{background:!1,get color(){return e(S)}}),c($),l(y,$)},g=y=>{var $=Cv();l(y,$)};M(A,y=>{e(n)?y(k):y(g,!1)})}c(f),c(w),U(()=>{oe(f,"border",e(u)),oe(f,"box-shadow",`1px 1px 2px ${a.colors.gmid??""}`),oe(f,"cursor",e(n)?"default":"pointer"),oe(f,"color",e(m)),oe(f,"background",e(t)?e(h):e(r))}),De("focus",f,()=>s(t,!0)),De("blur",f,()=>s(t,!1)),De("keypress",f,()=>s(n,!0)),l(p,w),ne()}at(["click"]);var Lv=T('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),jv=T('<div class="err font-label svelte-115vejc"> </div>'),Rv=T('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function ms(p,a){ie(a,!0);let t=z(a,"colors",19,()=>({})),n=z(a,"error",3,""),r=z(a,"name",3,""),h=z(a,"password",3,!1),m=z(a,"value",3,""),u=z(a,"width",3,"250px"),E=Ut(a,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),S=I(o(h()?"new-password":"text")),v=I(!1),w=I(!1);function f(){e(S)==="password"?s(S,"text"):s(S,"password")}var A=Rv(),k=d(A),g=d(k),y=d(g),$=d(y);gt($,()=>a.children??mt),c(y),c(g),c(k);var _=i(k,2);it(_);var x=()=>s(v,!0),b=()=>s(v,!1),C=()=>s(w,!0),L=()=>s(w,!1);let D;var R=i(_,2);{var j=B=>{var O=Lv(),P=d(O);P.__click=f;var W=d(P);{var X=H=>{Ia(H,{width:22,get color(){return t().err}})},q=H=>{Ta(H,{width:22,get color(){return t().ok}})};M(W,H=>{e(S)==="password"?H(X):H(q,!1)})}c(P),c(O),De("keypress",P,f),l(B,O)};M(R,B=>{h()&&B(j)})}var K=i(R,2);{var N=B=>{var O=jv(),P=d(O,!0);c(O),U(()=>{oe(O,"width",u()),oe(O,"color",t().err),V(P,n())}),de(7,O,()=>we,()=>({duration:250})),l(B,O)};M(K,B=>{n()&&B(N)})}c(A),U(()=>{oe(A,"width",`calc(${u()??""} + 12px)`),oe(g,"background",t().bg),le(y,"for",r()),D=sa(_,D,{type:e(S),onmouseenter:x,onmouseleave:b,onfocus:C,onblur:L,autocomplete:"off",name:r(),value:m(),...E},"svelte-115vejc"),oe(_,"width",u()),oe(_,"background",(e(v)||e(w),t().bg)),oe(_,"border",e(w)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),oe(_,"color",t().text),oe(_,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),l(p,A),ne()}at(["click"]);var Dv=T('<img alt="No Logo Available">');function fs(p,a){ie(a,!0);var t=Dv();U(()=>le(t,"src",`/auth/v1/clients/${a.clientId}/logo?${zt(6)}`)),l(p,t),ne()}var Nv=T('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function Mv(p,a){ie(a,!0);let t="This is an E-Mail error",n="This is a password error";var r=Nv(),h=i(ee(r),2),m=d(h),u=d(m),E=d(u);{var S=y=>{fs(y,{get clientId(){return a.clientId}})};M(E,y=>{a.isLoading||y(S)})}c(u),c(m);var v=i(m,4);ms(v,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return a.colors},children:(y,$)=>{F();var _=Y("E-MAIL");l(y,_)},$$slots:{default:!0}});var w=i(v,2);ms(w,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return n},get colors(){return a.colors},children:(y,$)=>{F();var _=Y("E-MAIL");l(y,_)},$$slots:{default:!0}});var f=i(w,2),A=d(f);Ca(A,{get colors(){return a.colors},level:1});var k=i(A,2);Ca(k,{get colors(){return a.colors},level:2});var g=i(k,2);Ca(g,{get colors(){return a.colors},level:3}),c(f),c(h),U(()=>{oe(h,"color",a.colors.text),oe(h,"border",`1px solid ${a.colors.gmid??""}`),oe(h,"background",a.colors.bg)}),l(p,r),ne()}var zv=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function Ov(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=zv();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Pv=(p,a)=>e(a).click(),qv=(p,a)=>e(a).click(),Uv=(p,a)=>a(p),Wv=T('<div class="container svelte-jso5mh"><div role="button" tabindex="0" class="btn svelte-jso5mh"><!></div> <div role="button" tabindex="0" class="text noselect font-label svelte-jso5mh"> </div> <input class="imageInput svelte-jso5mh" type="file" accept=".jpg, .jpeg, .png, .svg"></div>');function gs(p,a){let t=z(a,"text",3,"UPLOAD LOGO"),n=z(a,"image",15),r=I(void 0);async function h(f){n(f.target.files[0])}var m=Wv(),u=d(m);u.__click=[Pv,r];var E=d(u);Ov(E,{width:22}),c(u);var S=i(u,2);S.__click=[qv,r];var v=d(S,!0);c(S);var w=i(S,2);w.__change=[Uv,h],ia(w,f=>s(r,f),()=>e(r)),c(m),U(()=>V(v,t())),De("keypress",u,()=>e(r).click()),De("keypress",S,()=>e(r).click()),l(p,m)}at(["click","change"]);var Kv=T('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),Gv=T('<div class="preview svelte-11vvvzr"><!></div>'),Fv=T('<div class="success svelte-11vvvzr">Success</div>'),Bv=T('<div class="err svelte-11vvvzr"> </div>'),Hv=T(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function Yv(p,a){ie(a,!0);let t=z(a,"client",19,()=>({})),n=I(void 0),r=I(void 0),h=I(!1),m=I(""),u=I(!1),E=I(void 0),S=I(o({})),v=I(o({}));const w=Qe().shape({act1:he().trim().matches(bt,"only valid CSS color"),act1a:he().trim().matches(bt,"only valid CSS color"),act2:he().trim().matches(bt,"only valid CSS color"),act2a:he().trim().matches(bt,"only valid CSS color"),acnt:he().trim().matches(bt,"only valid CSS color"),acnta:he().trim().matches(bt,"only valid CSS color"),ok:he().trim().matches(bt,"only valid CSS color"),err:he().trim().matches(bt,"only valid CSS color"),glow:he().trim().matches(bt,"only valid CSS color"),gmid:he().trim().matches(bt,"only valid CSS color"),ghigh:he().trim().matches(bt,"only valid CSS color"),text:he().trim().matches(bt,"only valid CSS color"),bg:he().trim().matches(bt,"only valid CSS color")});Le(async()=>{await f()}),ha(()=>{e(E)&&clearTimeout(e(E))});async function f(){let P=await Nr(t().id);if(P.ok){let W=await P.json();s(n,o(W)),s(v,o(W))}else{let W=await P.json();s(m,o(W.message))}}async function A(){if(s(m,""),s(h,!0),!await y())return;let P=await Mr(t().id,e(v));if(P.ok)s(u,!0);else{let W=await P.json();s(m,o(W.message))}s(h,!1)}async function k(){s(m,""),s(h,!0);let P=await zr(t().id);if(P.ok)await Pr(t().id),await f(),s(u,!0);else{let W=await P.json();s(m,o(W.message))}s(h,!1)}async function g(P){s(h,!0),await Yt();let W=await Or(t().id,P);if(!W.ok){let X=await W.json();console.error(X.message)}s(h,!1)}async function y(){try{await w.validate(e(v),{abortEarly:!1}),s(S,o({}))}catch(P){return s(S,o(Je(P))),!1}return s(n,o(e(v))),!0}Se(()=>{e(u)&&s(E,o(setTimeout(()=>{s(u,!1)},3e3)))}),Se(()=>{e(r)&&g(e(r))});var $=Hv(),_=i(d($),2),x=d(_);{var b=P=>{var W=Kv(),X=ee(W),q=d(X),H=d(q);ve(H,{autocomplete:"off",placeholder:"act1",get value(){return e(v).act1},set value(te){e(v).act1=te},get error(){return e(S).act1},set error(te){e(S).act1=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("act1");l(te,Be)},$$slots:{default:!0}});var G=i(H,2),Z=d(G);it(Z);var re=i(Z,2);c(G),c(q);var ce=i(q,2),$e=d(ce);ve($e,{autocomplete:"off",placeholder:"act1a",get value(){return e(v).act1a},set value(te){e(v).act1a=te},get error(){return e(S).act1a},set error(te){e(S).act1a=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("act1a");l(te,Be)},$$slots:{default:!0}});var _e=i($e,2),me=d(_e);it(me);var Me=i(me,2);c(_e),c(ce);var ge=i(ce,2),ue=d(ge);ve(ue,{autocomplete:"off",placeholder:"act2",get value(){return e(v).act2},set value(te){e(v).act2=te},get error(){return e(S).act2},set error(te){e(S).act2=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("act2");l(te,Be)},$$slots:{default:!0}});var ye=i(ue,2),be=d(ye);it(be);var ze=i(be,2);c(ye),c(ge);var Ce=i(ge,2),xe=d(Ce);ve(xe,{autocomplete:"off",placeholder:"act2a",get value(){return e(v).act2a},set value(te){e(v).act2a=te},get error(){return e(S).act2a},set error(te){e(S).act2a=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("act2a");l(te,Be)},$$slots:{default:!0}});var Re=i(xe,2),J=d(Re);it(J);var Ie=i(J,2);c(Re),c(Ce);var fe=i(Ce,2),qe=d(fe);ve(qe,{autocomplete:"off",placeholder:"acnt",get value(){return e(v).acnt},set value(te){e(v).acnt=te},get error(){return e(S).acnt},set error(te){e(S).acnt=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("acnt");l(te,Be)},$$slots:{default:!0}});var Ve=i(qe,2),lt=d(Ve);it(lt);var ct=i(lt,2);c(Ve),c(fe);var Ue=i(fe,2),Fe=d(Ue);ve(Fe,{autocomplete:"off",placeholder:"acnta",get value(){return e(v).acnta},set value(te){e(v).acnta=te},get error(){return e(S).acnta},set error(te){e(S).acnta=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("acnta");l(te,Be)},$$slots:{default:!0}});var ot=i(Fe,2),It=d(ot);it(It);var xt=i(It,2);c(ot),c(Ue);var Xe=i(Ue,2),et=d(Xe);ve(et,{autocomplete:"off",placeholder:"ok",get value(){return e(v).ok},set value(te){e(v).ok=te},get error(){return e(S).ok},set error(te){e(S).ok=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("ok");l(te,Be)},$$slots:{default:!0}});var yt=i(et,2),pt=d(yt);it(pt);var Ct=i(pt,2);c(yt),c(Xe);var st=i(Xe,2),rt=d(st);ve(rt,{autocomplete:"off",placeholder:"err",get value(){return e(v).err},set value(te){e(v).err=te},get error(){return e(S).err},set error(te){e(S).err=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("err");l(te,Be)},$$slots:{default:!0}});var se=i(rt,2),Ae=d(se);it(Ae);var Oe=i(Ae,2);c(se),c(st),c(X);var Q=i(X,2),Ee=d(Q),je=d(Ee);ve(je,{autocomplete:"off",placeholder:"glow",get value(){return e(v).glow},set value(te){e(v).glow=te},get error(){return e(S).glow},set error(te){e(S).glow=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("glow");l(te,Be)},$$slots:{default:!0}});var At=i(je,2),ae=d(At);it(ae);var Ke=i(ae,2);c(At),c(Ee);var Pe=i(Ee,2),qt=d(Pe);ve(qt,{autocomplete:"off",placeholder:"gmid",get value(){return e(v).gmid},set value(te){e(v).gmid=te},get error(){return e(S).gmid},set error(te){e(S).gmid=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("gmid");l(te,Be)},$$slots:{default:!0}});var Zt=i(qt,2),Bt=d(Zt);it(Bt);var Mt=i(Bt,2);c(Zt),c(Pe);var Ht=i(Pe,2),La=d(Ht);ve(La,{autocomplete:"off",placeholder:"ghigh",get value(){return e(v).ghigh},set value(te){e(v).ghigh=te},get error(){return e(S).ghigh},set error(te){e(S).ghigh=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("ghigh");l(te,Be)},$$slots:{default:!0}});var ja=i(La,2),oa=d(ja);it(oa);var xs=i(oa,2);c(ja),c(Ht);var va=i(Ht,2),Ra=d(va);ve(Ra,{autocomplete:"off",placeholder:"text",get value(){return e(v).text},set value(te){e(v).text=te},get error(){return e(S).text},set error(te){e(S).text=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("text");l(te,Be)},$$slots:{default:!0}});var Da=i(Ra,2),ca=d(Da);it(ca);var Es=i(ca,2);c(Da),c(va);var da=i(va,2),Na=d(da);ve(Na,{autocomplete:"off",placeholder:"bg",get value(){return e(v).bg},set value(te){e(v).bg=te},get error(){return e(S).bg},set error(te){e(S).bg=te},$$events:{input:y},children:(te,Et)=>{F();var Be=Y("bg");l(te,Be)},$$slots:{default:!0}});var Ma=i(Na,2),ua=d(Ma);it(ua);var Ss=i(ua,2);c(Ma),c(da);var za=i(da,2),Oa=d(za);gs(Oa,{get image(){return e(r)},set image(te){s(r,o(te))}});var Is=i(Oa,2);{var Ts=te=>{fs(te,{get clientId(){return t().id}})};M(Is,te=>{e(h)||te(Ts)})}c(za),c(Q),U(()=>{oe(re,"background",e(v).act1),oe(Me,"background",e(v).act1a),oe(ze,"background",e(v).act2),oe(Ie,"background",e(v).act2a),oe(ct,"background",e(v).acnt),oe(xt,"background",e(v).acnta),oe(Ct,"background",e(v).ok),oe(Oe,"background",e(v).err),oe(Ke,"background",e(v).glow),oe(Mt,"background",e(v).gmid),oe(xs,"background",e(v).ghigh),oe(Es,"background",e(v).text),oe(Ss,"background",e(v).bg)}),ut(Z,()=>e(v).act1,te=>e(v).act1=te),ut(me,()=>e(v).act1a,te=>e(v).act1a=te),ut(be,()=>e(v).act2,te=>e(v).act2=te),ut(J,()=>e(v).act2a,te=>e(v).act2a=te),ut(lt,()=>e(v).acnt,te=>e(v).acnt=te),ut(It,()=>e(v).acnta,te=>e(v).acnta=te),ut(pt,()=>e(v).ok,te=>e(v).ok=te),ut(Ae,()=>e(v).err,te=>e(v).err=te),ut(ae,()=>e(v).glow,te=>e(v).glow=te),ut(Bt,()=>e(v).gmid,te=>e(v).gmid=te),ut(oa,()=>e(v).ghigh,te=>e(v).ghigh=te),ut(ca,()=>e(v).text,te=>e(v).text=te),ut(ua,()=>e(v).bg,te=>e(v).bg=te),l(P,W)};M(x,P=>{e(v)&&P(b)})}var C=i(x,2);{var L=P=>{var W=Gv(),X=d(W);Mv(X,{get clientId(){return t().id},get isLoading(){return e(h)},get colors(){return e(n)},set colors(q){s(n,o(q))}}),c(W),l(P,W)};M(C,P=>{e(n)&&P(L)})}c(_);var D=i(_,2),R=d(D);Te(R,{level:1,get isLoading(){return e(h)},set isLoading(P){s(h,o(P))},$$events:{click:A},children:(P,W)=>{F();var X=Y("SAVE");l(P,X)},$$slots:{default:!0}});var j=i(R,2);Te(j,{level:3,get isLoading(){return e(h)},set isLoading(P){s(h,o(P))},$$events:{click:k},children:(P,W)=>{F();var X=Y("RESET");l(P,X)},$$slots:{default:!0}});var K=i(j,2);{var N=P=>{var W=Fv();l(P,W)};M(K,P=>{e(u)&&P(N)})}var B=i(K,2);{var O=P=>{var W=Bv(),X=d(W,!0);c(W),U(()=>V(X,e(m))),l(P,W)};M(B,P=>{e(m)&&P(O)})}c(D),c($),l(p,$),ne()}var Vv=T('<div class="data font-mono svelte-115hohv"> </div>'),Jv=T('<div class="data svelte-115hohv"> </div>'),Qv=T('<div class="header svelte-115hohv"><!> <!></div>'),Zv=T("<div><!></div>"),Xv=T("<div><!></div>"),ec=T("<div><!></div>"),tc=T("<div><!></div>"),ac=T("<div><!> <!></div>");function sc(p,a){ie(a,!0);let t=z(a,"client",31,()=>o({})),n=z(a,"onSave",15),r=I(void 0);const h=["Config","Secret","Branding","Delete"];let m=I(o(h[0]));const u=200,E=u/2;function S(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Qv(),f=d(w);Ze(f,{text:"Client ID",children:(g,y)=>{var $=Vv(),_=d($,!0);c($),U(()=>V(_,t().id)),l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{Ze(g,{text:"Client Name",children:(y,$)=>{var _=Jv(),x=d(_,!0);c(_),U(()=>V(x,t().name)),l(y,_)},$$slots:{default:!0}})};M(A,g=>{t().name&&g(k)})}c(w),l(v,w)},body:v=>{var w=ac(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Zv(),_=d($);yv(_,{get client(){return t()},set client(x){t(x)},get onSave(){return n()},set onSave(x){n(x)}}),c($),de(5,$,()=>we,()=>({delay:E,duration:u})),de(6,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=pe(),_=ee($);{var x=C=>{var L=Xv(),D=d(L);$v(D,{get client(){return t()}}),c(L),de(5,L,()=>we,()=>({delay:E,duration:u})),de(6,L,()=>we,()=>({duration:u})),l(C,L)},b=C=>{var L=pe(),D=ee(L);{var R=K=>{var N=ec(),B=d(N);Yv(B,{get client(){return t()}}),c(N),de(5,N,()=>we,()=>({delay:E,duration:u})),de(6,N,()=>we,()=>({duration:u})),l(K,N)},j=K=>{var N=pe(),B=ee(N);{var O=P=>{var W=tc(),X=d(W);Sv(X,{get client(){return t()},onSave:S}),c(W),de(5,W,()=>we,()=>({delay:E,duration:u})),de(6,W,()=>we,()=>({duration:u})),l(P,W)};M(B,P=>{e(m)==="Delete"&&P(O)},!0)}l(K,N)};M(D,K=>{e(m)==="Branding"?K(R):K(j,!1)},!0)}l(C,L)};M(_,C=>{e(m)==="Secret"?C(x):C(b,!1)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),ne()}var rc=T('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),lc=T('<div class="success svelte-gbj18i">Success</div>'),ic=T('<div class="mainErr err svelte-gbj18i"> </div>'),nc=T('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function oc(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1),n=I(void 0),r=o({id:"",name:"",confidential:!0,redirect_uris:[]}),h=I(""),m=I(!1),u=I(void 0),E=I(o({}));const S=Qe().shape({id:he().required("Client ID is required").trim().matches(Js,"Can only contain characters, numbers and '-'"),name:he().trim().nullable().matches(aa,"Can only contain characters, numbers and '-'")});let v=I(void 0),w=I(void 0);const f="330px";Se(()=>{e(m)&&s(u,o(setTimeout(()=>{a.onSave(),s(m,!1),s(n,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function A(){if(s(h,""),!await k()||!e(v)()||!e(w)()){s(h,"Invalid input");return}let g=r;g.name||(g.name=void 0);let y=await jr(g);if(y.ok)s(m,!0);else{let $=await y.json();s(h,o($.message))}}async function k(){try{return await S.validate(r,{abortEarly:!1}),s(E,o({})),!0}catch(g){return s(E,o(Je(g))),!1}}vt(p,{get idx(){return t()},set idx(g){t(g)},get show(){return e(n)},set show(g){s(n,o(g))},header:g=>{var y=rc();l(g,y)},body:g=>{var y=nc(),$=d(y);ve($,{autocomplete:"off",placeholder:"Client ID",width:f,get value(){return r.id},set value(O){r.id=O},get error(){return e(E).id},set error(O){e(E).id=O},$$events:{input:k},children:(O,P)=>{F();var W=Y("CLIENT ID");l(O,W)},$$slots:{default:!0}});var _=i($,2);ve(_,{autocomplete:"off",placeholder:"Client Name",width:f,get value(){return r.name},set value(O){r.name=O},get error(){return e(E).name},set error(O){e(E).name=O},$$events:{input:k},children:(O,P)=>{F();var W=Y("NAME");l(O,W)},$$slots:{default:!0}});var x=i(_,2);Ft(x,{style:`width: ${f}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return r.redirect_uris},set values(O){r.redirect_uris=O},get validate(){return e(v)},set validate(O){s(v,o(O))},children:(O,P)=>{F();var W=Y("REDIRECT URI");l(O,W)},$$slots:{default:!0}});var b=i(x,2);Ft(b,{style:`width: ${f}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return r.post_logout_redirect_uris},set values(O){r.post_logout_redirect_uris=O},get validate(){return e(w)},set validate(O){s(w,o(O))},children:(O,P)=>{F();var W=Y("POST LOGOUT REDIRECT URI");l(O,W)},$$slots:{default:!0}});var C=i(b,2),L=i(d(C),2),D=d(L);He(D,{get selected(){return r.confidential},set selected(O){r.confidential=O}}),c(L),c(C);var R=i(C,2);Te(R,{level:1,width:"4rem",$$events:{click:A},children:(O,P)=>{F();var W=Y("SAVE");l(O,W)},$$slots:{default:!0}});var j=i(R,2);{var K=O=>{var P=lc();l(O,P)};M(j,O=>{e(m)&&O(K)})}var N=i(j,2);{var B=O=>{var P=ic(),W=d(P,!0);c(P),U(()=>V(W,e(h))),l(O,P)};M(N,O=>{e(h)&&O(B)})}c(y),l(g,y)},$$slots:{header:!0,body:!0}}),ne()}var vc=T('<div class="svelte-nj6lei"><!></div>'),cc=T(' <div class="content"><!> <!> <div id="clients" class="svelte-nj6lei"></div> <!> <div style="height: 20px"></div></div>',1);function dc(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=I(""),u=[{label:"ID",callback:(x,b)=>x.id.toLowerCase().includes(b.toLowerCase())}],E=[{label:"ID",callback:(x,b)=>x.id.localeCompare(b.id)}];Le(()=>{S(),v()});async function S(){let x=await Lr();if(!x.ok)s(t,"Error fetching clients: "+x.body.message);else{let b=await x.json();s(n,o([...b]))}}async function v(){let x=await os();if(!x.ok)s(t,"Error fetching scopes: "+x.body.message);else{let b=await x.json();ql.set(b),vs.set(b.map(C=>C.name))}}function w(){S(),v(),s(m,"")}F();var f=cc(),A=ee(f),k=i(A),g=d(k);Lt(g,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(x){s(r,o(x))},get search(){return e(m)},set search(x){s(m,o(x))}});var y=i(g,2);oc(y,{onSave:w});var $=i(y,2);We($,23,()=>e(h),x=>x.id,(x,b,C)=>{var L=vc(),D=d(L);sc(D,{onSave:w,get client(){return e(h)[e(C)]},set client(R){e(h)[e(C)]=R}}),c(L),l(x,L)}),c($);var _=i($,2);Nt(_,{get items(){return e(r)},set items(x){s(r,o(x))},get resItems(){return e(h)},set resItems(x){s(h,o(x))}}),F(2),c(k),U(()=>V(A,`${e(t)??""} `)),l(p,f),ne()}var uc=T('<div class="uid svelte-psgb3d"> </div>'),hc=T('<div class="ip svelte-psgb3d"> </div>'),pc=T('<div class="date svelte-psgb3d"> </div>'),mc=T('<div class="header svelte-psgb3d"><!> <div class="header svelte-psgb3d"><!> <!></div></div>'),fc=T('<div class="details svelte-psgb3d"><div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Session ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">User ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Expires:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Last Seen:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">State:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">IP:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">MFA:</div> <!></div></div>'),gc=T('<div class="container svelte-psgb3d"><!></div>');function ws(p,a){ie(a,!0);let t=z(a,"session",27,()=>o({})),n=z(a,"now",11,0);var r=gc(),h=d(r);vt(h,{header:m=>{var u=mc(),E=d(u);Ze(E,{text:"User ID",children:(f,A)=>{var k=uc(),g=d(k,!0);c(k),U(()=>V(g,t().user_id)),l(f,k)},$$slots:{default:!0}});var S=i(E,2),v=d(S);Ze(v,{text:"Peer IP",children:(f,A)=>{var k=hc(),g=d(k,!0);c(k),U(()=>V(g,t().remote_ip)),l(f,k)},$$slots:{default:!0}});var w=i(v,2);Ze(w,{text:"Last Seen",children:(f,A)=>{var k=pc(),g=d(k,!0);U(()=>V(g,ft(t().last_seen))),c(k),l(f,k)},$$slots:{default:!0}}),c(S),c(u),l(m,u)},body:m=>{var u=fc(),E=d(u),S=i(d(E));c(E);var v=i(E,2),w=i(d(v));c(v);var f=i(v,2),A=i(d(f));U(()=>V(A,` ${ft(t().exp)??""}`)),c(f);var k=i(f,2),g=i(d(k));U(()=>V(g,` ${ft(t().last_seen)??""}`)),c(k);var y=i(k,2),$=i(d(y));c(y);var _=i(y,2),x=i(d(_));c(_);var b=i(_,2),C=i(d(b),2);la(C,{get check(){return t().is_mfa}}),c(b),c(u),U(()=>{V(S,` ${t().id??""}`),V(w,` ${t().user_id??""}`),V($,` ${t().state??""}`),V(x,` ${t().remote_ip??""}`)}),l(m,u)},$$slots:{header:!0,body:!0}}),c(r),U(()=>_t(r,"expired",t().exp<n())),l(p,r),ne()}var wc=T('<div class="svelte-1rjd8yh"><!></div>'),yc=T('<div class="svelte-1rjd8yh"><!></div>'),bc=T('<div class="content"><div class="row svelte-1rjd8yh"><!> <div class="button svelte-1rjd8yh"><!></div></div> <div id="sessions" class="svelte-1rjd8yh"><!></div> <!></div>');function $c(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=I(Date.now()/1e3),u=I(""),E=I(!1),S=I(15),v=I(""),w=I(1),f=[{label:"User ID",callback:(W,X)=>{var q;return(q=W.user_id)==null?void 0:q.toLowerCase().includes(X.toLowerCase())}},{label:"Session ID",callback:(W,X)=>W.id.toLowerCase().includes(X.toLowerCase())},{label:"IP",callback:(W,X)=>{var q;return(q=W.remote_ip)==null?void 0:q.toLowerCase().includes(X.toLowerCase())}}],A=[{label:"Expires",callback:(W,X)=>W.exp-X.exp},{label:"Last Seen",callback:(W,X)=>W.last_seen-X.last_seen},{label:"Session ID",callback:(W,X)=>W.id.localeCompare(X.id)},{label:"User ID",callback:(W,X)=>{var q;return(q=W.user_id)==null?void 0:q.localeCompare(X.user_id)}},{label:"State",callback:(W,X)=>W.state.localeCompare(X.state)},{label:"IP",callback:(W,X)=>{var q;return(q=W.remote_ip)==null?void 0:q.localeCompare(X.remote_ip)}}];Le(()=>{k()});async function k(W,X,q,H){let G;if(W===!0?q&&e(w)===2?G=await rs(H||e(S),X,void 0,!1):G=await rs(H||e(S),X,e(v),q):G=await il(),!G.ok)s(t,"Error fetching sessions: "+G.body.message);else{G.status===206?(s(S,o(Number.parseInt(G.headers.get("x-page-size"),10))),s(v,o(G.headers.get("x-continuation-token"))),s(u,"session")):s(u,"");let Z=await G.json();s(n,o([...Z])),s(r,o([...Z])),s(m,Date.now()/1e3)}}async function g(W,X){await k(!0,W,X),X?s(w,e(w)-1):s(w,e(w)+1)}async function y(W){s(v,""),await k(!0,0,!1,W),s(w,1)}async function $(){let W=await nl();if(W.ok)Va();else{let X=await W.json();s(t,o(X.message))}s(m,o(new Date))}var _=bc(),x=d(_),b=d(x);Lt(b,{get items(){return e(n)},searchOptions:f,orderOptions:A,firstDirReverse:!0,get resItems(){return e(r)},set resItems(W){s(r,o(W))},get useServerSideIdx(){return e(u)},set useServerSideIdx(W){s(u,o(W))},get isSearchFiltered(){return e(E)},set isSearchFiltered(W){s(E,o(W))}});var C=i(b,2);oe(C,"margin-top","-10px");var L=d(C);Te(L,{level:3,$$events:{click:$},children:(W,X)=>{F();var q=Y("Invalidate All Sessions");l(W,q)},$$slots:{default:!0}}),c(C),c(x);var D=i(x),R=i(D),j=d(R);{var K=W=>{var X=pe(),q=ee(X);We(q,19,()=>e(n),H=>H.id,(H,G,Z)=>{var re=wc(),ce=d(re);ws(ce,{get session(){return e(n)[e(Z)]},set session($e){e(n)[e(Z)]=$e},get now(){return e(m)},set now($e){s(m,o($e))}}),c(re),l(H,re)}),l(W,X)},N=W=>{var X=pe(),q=ee(X);We(q,19,()=>e(h),H=>H.id,(H,G,Z)=>{var re=yc(),ce=d(re);ws(ce,{get session(){return e(h)[e(Z)]},set session($e){e(h)[e(Z)]=$e},get now(){return e(m)},set now($e){s(m,o($e))}}),c(re),l(H,re)}),l(W,X)};M(j,W=>{e(u)&&!e(E)?W(K):W(N,!1)})}c(R);var B=i(R,2);{var O=W=>{hs(W,{fetchPageCallback:g,sspPageSizeChange:y,get sspPage(){return e(w)},set sspPage(X){s(w,o(X))},get sspPageSize(){return e(S)},set sspPageSize(X){s(S,o(X))},get sspContinuationToken(){return e(v)},set sspContinuationToken(X){s(v,o(X))}})},P=W=>{Nt(W,{get items(){return e(r)},set items(X){s(r,o(X))},get resItems(){return e(h)},set resItems(X){s(h,o(X))}})};M(B,W=>{e(u)&&!e(E)?W(O):W(P,!1)})}c(_),U(()=>V(D,` ${e(t)??""} `)),l(p,_),ne()}var _c=T('<div class="header font-label svelte-1mi5990">ADD NEW USER ATTRIBUTE</div>'),kc=T('<div class="mainErr err svelte-1mi5990"> </div>'),xc=T('<div class="container svelte-1mi5990"><div class="desc svelte-1mi5990">You can add a new custom user attribute.<br> These attributes can be set for every user and mapped to an existing scope.<br> They are simple Key / JsonValue pairs.</div> <!> <!> <!> <!> <!></div>');function Ec(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1),n=I(""),r=I(void 0),h=o({name:"",desc:""}),m=I(o({}));const u=Qe().shape({name:he().trim().required("Name is required").matches(Ja,"Invalid characters: [a-z0-9-_/]{2,32}"),desc:he().trim().matches(Qa,"Invalid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});async function E(){if(!await S())return;s(n,"");let v=await ul(h);if(v.ok)s(r,!1),a.onSave();else{let w=await v.json();s(n,o(w.message))}}async function S(){try{return await u.validate(h,{abortEarly:!1}),s(m,o({})),!0}catch(v){return s(m,o(Je(v))),!1}}vt(p,{get idx(){return t()},set idx(v){t(v)},get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=_c();l(v,w)},body:v=>{var w=xc(),f=i(d(w),2);ve(f,{autocomplete:"off",placeholder:"Name",get value(){return h.name},set value(_){h.name=_},get error(){return e(m).name},set error(_){e(m).name=_},$$events:{input:S},children:(_,x)=>{F();var b=Y("NAME");l(_,b)},$$slots:{default:!0}});var A=i(f,2);ve(A,{autocomplete:"off",placeholder:"Description",get value(){return h.desc},set value(_){h.desc=_},get error(){return e(m).desc},set error(_){e(m).desc=_},$$events:{input:S},children:(_,x)=>{F();var b=Y("DESCRIPTION");l(_,b)},$$slots:{default:!0}});var k=i(A,2);Te(k,{level:1,$$events:{click:E},children:(_,x)=>{F();var b=Y("SAVE");l(_,b)},$$slots:{default:!0}});var g=i(k,2);M(g,_=>{});var y=i(g,2);{var $=_=>{var x=kc(),b=d(x,!0);c(x),U(()=>V(b,e(n))),l(_,x)};M(y,_=>{e(n)&&_($)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),ne()}var Sc=T('<div class="success svelte-2o3w7i">Success</div>'),Ic=T('<div class="mainErr err svelte-2o3w7i"> </div>'),Tc=T('<div class="container svelte-2o3w7i"><!> <!> <!> <!> <!></div>');function Cc(p,a){ie(a,!0);let t=z(a,"attr",19,()=>({})),n=I(""),r=I(!1),h=I(void 0);Se(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=I(o({})),u=o({});const E=Qe().shape({name:he().trim().required("Name is required").matches(Ja,"Valid characters: [a-z0-9-_/]{2,32}"),desc:he().nullable().trim().matches(Qa,"Valid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});Le(()=>{u.name=t().name,u.desc=t().desc});async function S(){if(s(n,""),!await v()){s(n,"Invalid input");return}let x={name:u.name,desc:u.desc},b=await hl(t().name,x);if(b.ok)s(r,!0);else{let C=await b.json();s(n,o(C.message))}}async function v(){try{return await E.validate(u,{abortEarly:!1}),s(m,o({})),!0}catch(x){return s(m,o(Je(x))),!1}}var w=Tc(),f=d(w);ve(f,{autocomplete:"off",placeholder:"Name",get value(){return u.name},set value(x){u.name=x},get error(){return e(m).name},set error(x){e(m).name=x},$$events:{input:v},children:(x,b)=>{F();var C=Y("NAME");l(x,C)},$$slots:{default:!0}});var A=i(f,2);ve(A,{autocomplete:"off",placeholder:"Description",get value(){return u.desc},set value(x){u.desc=x},get error(){return e(m).desc},set error(x){e(m).desc=x},$$events:{input:v},children:(x,b)=>{F();var C=Y("DESCRIPTION");l(x,C)},$$slots:{default:!0}});var k=i(A,2);Te(k,{level:1,width:"4rem",$$events:{click:S},children:(x,b)=>{F();var C=Y("SAVE");l(x,C)},$$slots:{default:!0}});var g=i(k,2);{var y=x=>{var b=Sc();l(x,b)};M(g,x=>{e(r)&&x(y)})}var $=i(g,2);{var _=x=>{var b=Ic(),C=d(b,!0);c(b),U(()=>V(C,e(n))),l(x,b)};M($,x=>{e(n)&&x(_)})}c(w),l(p,w),ne()}var Ac=T('<div class="err svelte-1jljqe9"> </div>'),Lc=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this custom attribute?</div> <!> <!></div>');function jc(p,a){ie(a,!0);let t=z(a,"attr",19,()=>({})),n=I(!1),r=I("");async function h(){s(r,""),s(n,!0);let v=await pl(t().name);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Lc(),u=i(d(m),2);Te(u,{level:1,get isLoading(){return e(n)},set isLoading(v){s(n,o(v))},$$events:{click:h},children:(v,w)=>{F();var f=Y("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var S=v=>{var w=Ac(),f=d(w,!0);c(w),U(()=>V(f,e(r))),l(v,w)};M(E,v=>{e(r)&&v(S)})}c(m),l(p,m),ne()}var Rc=T('<div class="data svelte-115hohv"> </div>'),Dc=T('<div class="header svelte-115hohv"><!></div>'),Nc=T("<div><!></div>"),Mc=T("<div><!></div>"),zc=T("<div><!> <!></div>");function Oc(p,a){ie(a,!0);let t=z(a,"attr",27,()=>o({})),n=z(a,"onSave",15),r=I(void 0);const h=["Config","Delete"];let m=I(o(h[0]));const u=200,E=u/2;function S(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Dc(),f=d(w);Ze(f,{text:"Custom Attribute Name",children:(A,k)=>{var g=Rc(),y=d(g,!0);c(g),U(()=>V(y,t().name)),l(A,g)},$$slots:{default:!0}}),c(w),l(v,w)},body:v=>{var w=zc(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Nc(),_=d($);Cc(_,{get attr(){return t()},get onSave(){return n()},set onSave(x){n(x)}}),c($),de(5,$,()=>we,()=>({delay:E,duration:u})),de(6,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=pe(),_=ee($);{var x=b=>{var C=Mc(),L=d(C);jc(L,{get attr(){return t()},onSave:S}),c(C),de(5,C,()=>we,()=>({delay:E,duration:u})),de(6,C,()=>we,()=>({duration:u})),l(b,C)};M(_,b=>{e(m)==="Delete"&&b(x)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),ne()}var Pc=T('<div class="svelte-mjg702"><!></div>'),qc=T(' <div class="content"><!> <!> <div id="attrs" class="svelte-mjg702"></div> <!> <div style="height: 20px"></div></div>',1);function Uc(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=I(""),u=[{label:"NAME",callback:(_,x)=>_.name.toLowerCase().includes(x.toLowerCase())}],E=[{label:"NAME",callback:(_,x)=>_.name.localeCompare(x.name)}];Le(()=>{S()});async function S(){let _=await xa();if(!_.ok)s(t,"Error fetching user attr: "+_.body.message);else{let x=await _.json();s(n,o([...x.values]))}}function v(){e(n).length<2&&(s(n,o([])),s(r,o([])),s(h,o([]))),S(),s(m,"")}F();var w=qc(),f=ee(w),A=i(f),k=d(A);Lt(k,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(_){s(r,o(_))},get search(){return e(m)},set search(_){s(m,o(_))}});var g=i(k,2);Ec(g,{onSave:v});var y=i(g,2);We(y,23,()=>e(h),_=>_.name,(_,x,b)=>{var C=Pc(),L=d(C);Oc(L,{onSave:v,get attr(){return e(h)[e(b)]},set attr(D){e(h)[e(b)]=D}}),c(C),l(_,C)}),c(y);var $=i(y,2);Nt($,{get items(){return e(r)},set items(_){s(r,o(_))},get resItems(){return e(h)},set resItems(_){s(h,o(_))}}),F(2),c(A),U(()=>V(f,`${e(t)??""} `)),l(p,w),ne()}var Wc=T('<div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div></div>'),Kc=T('<div class="container svelte-151ox8b"><div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b">Time Taken (ms)</div> <div class="column svelte-151ox8b">t_cost</div> <div class="column svelte-151ox8b">m_cost</div> <div class="column svelte-151ox8b">p_cost</div></div> <!> <div style="height: 20px"></div></div>');function Gc(p,a){let t=z(a,"res",19,()=>[]);var n=Kc(),r=i(d(n),2);We(r,17,t,ht,(h,m)=>{var u=Wc(),E=d(u),S=d(E,!0);c(E);var v=i(E,2),w=d(v,!0);c(v);var f=i(v,2),A=d(f,!0);c(f);var k=i(f,2),g=d(k,!0);c(k),c(u),U(()=>{V(S,e(m).time_taken),V(w,e(m).t_cost),V(A,e(m).m_cost),V(g,e(m).p_cost)}),l(h,u)}),F(2),c(n),l(p,n)}var Fc=T('<div class="result svelte-1digv30"><!></div>'),Bc=T('<div class="wrapper svelte-1digv30"><div class="container svelte-1digv30"><!> <!> <!> <!></div> <!></div>');function Hc(p,a){ie(a,!0);const t="170px";let n=I(!1),r=I(!1),h=I(void 0),m=I(void 0),u=o({targetTime:1e3,mCost:32768,pCost:2}),E=I(o({}));const S=Qe().shape({targetTime:$t().required("Target Time is required").min(500,"Cannot be lower than 500").max(99999,"Cannot be higher than 99999"),mCost:$t().min(32768,"Cannot be lower than 32768").max(1048576,"Cannot be higher than 1048576"),pCost:$t().min(2,"Cannot be lower than 2").max(1024,"Cannot be higher than 1024")});Se(()=>{e(r)&&e(h)&&s(m,o(window.innerHeight))});function v(b){b.code==="Enter"&&w()}async function w(){try{await S.validate(u,{abortEarly:!1}),s(E,o({}))}catch(D){s(E,o(Je(D)));return}s(n,!0),s(r,!1);const b={target_time:Number.parseInt(u.targetTime),m_cost:Number.parseInt(u.mCost),p_cost:Number.parseInt(u.pCost)},C=await Vr(b),L=await C.json();C.ok?(s(h,o(L.results)),s(r,!0)):L.message,s(n,!1)}var f=Bc(),A=d(f),k=d(A);ve(k,{type:"number",autocomplete:"off",placeholder:"Target Time (ms)",width:t,get value(){return u.targetTime},set value(b){u.targetTime=b},get error(){return e(E).targetTime},set error(b){e(E).targetTime=b},$$events:{keypress:v},children:(b,C)=>{F();var L=Y("TARGET TIME (ms)");l(b,L)},$$slots:{default:!0}});var g=i(k,2);ve(g,{type:"number",autocomplete:"off",placeholder:"m_cost (kB)",width:t,get value(){return u.mCost},set value(b){u.mCost=b},get error(){return e(E).mCost},set error(b){e(E).mCost=b},$$events:{keypress:v},children:(b,C)=>{F();var L=Y("M_COST (kB)");l(b,L)},$$slots:{default:!0}});var y=i(g,2);ve(y,{type:"number",autocomplete:"off",placeholder:"p_cost",width:t,get value(){return u.pCost},set value(b){u.pCost=b},get error(){return e(E).pCost},set error(b){e(E).pCost=b},$$events:{keypress:v},children:(b,C)=>{F();var L=Y("P_COST");l(b,L)},$$slots:{default:!0}});var $=i(y,2);Te($,{get isLoading(){return e(n)},level:1,$$events:{click:w},children:(b,C)=>{F();var L=Y("CALCULATE");l(b,L)},$$slots:{default:!0}}),c(A);var _=i(A,2);{var x=b=>{var C=Fc(),L=d(C);Gc(L,{get res(){return e(h)}}),c(C),l(b,C)};M(_,b=>{e(r)&&b(x)})}c(f),lr("y",()=>e(m),b=>s(m,o(b))),l(p,f),ne()}var Yc=T(`<div class="container svelte-6927oe"><h3>Argon2ID - Password Hashing</h3> <p>This utility helps you find the best argon2id settings for your platform.<br> Argon2id is currently the safest available password hashing algorithm. To use it to its fullest potential, it
        has
        to be tuned for each deployment.</p> <p><b>Important:These values need to be tuned on the final architecture!</b><br> They change depending on the capabilities of the system. The more powerful the system, the more safe these
        values
        can be.</p> <p>If you want a detailed introduction to argon2id, many sources exist online. This guide will just give very short
        overview about the values.<br> Three of them need to be configured:</p> <ul><li><b>m cost</b> <p>The <code class="svelte-6927oe">m_cost</code> defines the amount of <b>memory (in kB)</b>, which is used for the hashing.<br> The higher the value, the better, of course. But you need to keep in mind the servers resources.<br> When you hash 4 passwords at the same time, for instance, the backend needs <code class="svelte-6927oe">4 x m_cost</code> during the
                hashing. These resources must be available.</p> <p>Tuning <code class="svelte-6927oe">m_cost</code> is pretty easy. If you can give rauthy 1GB of memory for hashing operations,
                give it
                1GB. If you can sacrifice 4GB, give it 4GB.</p> <p><b>Important: You should never go below an <code class="svelte-6927oe">m_cost</code> of <code class="svelte-6927oe">32768</code></b>.</p></li> <li><b>p cost</b> <p>The <code class="svelte-6927oe">p_cost</code> defines the amount of <b>parallelism</b> for hashing.<br> This value most often tops out at ~8, which is the default for Rauthy.<br> <code class="svelte-6927oe">p_cost</code> does not affect the time needed for the calculation, if the resources are available.</p> <p>The general rule is:<br> Set the <code class="svelte-6927oe">p_cost</code> to twice the size of cores your have available.<br> For instance, if you have 4 cores available, set the <code class="svelte-6927oe">p_cost</code> to <code class="svelte-6927oe">8</code>.<br></p></li> <li><b>t cost</b> <p>The <code class="svelte-6927oe">t_cost</code> defines the amount of <b>time</b> for hashing.<br> This value is actually the only one, that needs tuning, since <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> are
                basically given by the environment.</p> <p>Tuning is easy: Set <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> accordingly and then increase <code class="svelte-6927oe">t_cost</code> as long as you have not reached your hashing-time-goal.</p></li></ul> <br> <h3>A word about Login Time</h3> <p>Generally, users want everything as fast as possible. When doing a safe login though, a time between 500 - 1000
        ms
        should not be a problem.<br> The login time must not be too short, since it would lower the strength of the hash, of course.</p> <p>To provide as much safety by default as possible, this utility does not allow you to go below 500 ms for the
        login
        time.</p> <br> <h3>Current values</h3> <p>The current values from the backend are the following:</p> <div><div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>m_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>p_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>t_cost</b>:</div> </div> <br> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>Login Time</b>:</div> </div> <p><i>Note:</i> The Login Time from the backend does only provide a good guideline after at least 5 successful
            logins, after
            rauthy has been started.<br> The base value is always 2000 ms after a fresh restart and will adjust over time with each successful login.</p> <b>Threads (p_cost) rauthy has access to</b> <br></div> <br> <h3>Parameter Calculation Utility</h3> <p>You can use this tool to approximate good values for your deployment.<br> Keep in mind, that this should be executed with rauthy in its final place with all final resources
        available.<br><br> You should execute this utility during load to not over tune.<br><br> <code class="svelte-6927oe">m_cost</code> is optional and the safe minimal value of <code class="svelte-6927oe">32768</code> would be chosen, if empty.<br> <code class="svelte-6927oe">p_cost</code> is optional and rauthy will utilize all threads it can see, if empty.<br></p> <!> <div style="height: 20px"></div></div>`);function Vc(p,a){ie(a,!0);let t=I(void 0),n=I(void 0),r=I(void 0);Le(()=>{h()});async function h(){let x=await Yr(),b=await x.json();x.ok?(s(t,o(b.argon2_params)),s(n,o(b.login_time)),s(r,o(b.num_cpus))):b.message}var m=Yc(),u=i(d(m),8);oe(u,"margin-left","-10px");var E=i(u,16),S=d(E),v=i(d(S));c(S);var w=i(S,2),f=i(d(w));c(w);var A=i(w,2),k=i(d(A));c(A);var g=i(A,4),y=i(d(g));c(g);var $=i(g,5);F(),c(E);var _=i(E,8);Hc(_,{}),F(2),c(m),U(()=>{var x,b,C;V(v,` ${((x=e(t))==null?void 0:x.m_cost)??""}`),V(f,` ${((b=e(t))==null?void 0:b.p_cost)??""}`),V(k,` ${((C=e(t))==null?void 0:C.t_cost)??""}`),V(y,` ${e(n)??""} ms`),V($,`: ${e(r)??""}`)}),l(p,m),ne()}var Jc=T('<li class="font-mono"> </li>'),Qc=T('<div class="err svelte-3rk97c"> </div>'),Zc=T('<div class="success svelte-3rk97c">Success</div>'),Xc=T(`<div class="wrapper svelte-3rk97c"><div class="desc svelte-3rk97c"><h3>Secrets Encryption Keys</h3> <p>These Keys are used for an additional encryption at rest, independently from any data store technology used
            under
            the hood. They are configured statically, but can be rotated and migrated on this page manually to maybe get
            rid
            of an old key, which is currently still in use in some places.</p> <p>The active key is statically set in the Rauthy config file / environment variables. It cannot be changed
            here
            dynamically.<br> <b>All new JWK encryption's will always use the currently active key.</b></p> <div class="valRow svelte-3rk97c"><div class="label svelte-3rk97c">Active Key:</div> <div class="value font-mono"> </div></div> <div class="keysBlock svelte-3rk97c"><div>Available Keys:</div> <ul></ul></div> <div class="migrateBlock svelte-3rk97c"><p>If you migrate all existing secrets, it might take a few seconds to finish, if you have a big
                dataset.<br> Manually migrate all existing encryption in the backend to key:</p> <!></div></div> <div class="btn svelte-3rk97c"><!></div> <!> <!></div>`);function ed(p,a){ie(a,!0);let t=I(""),n=I(!0),r=I(""),h=I(""),m=I(o([])),u=I(!1);Le(async()=>{E()});async function E(){let j=await Wr(),K=await j.json();j.ok?(s(r,o(K.active)),s(h,o(K.active)),s(m,o(K.keys))):s(t,o(K.message)),s(n,!1)}async function S(){s(n,!0),s(u,!1);let j={key_id:e(h)},K=await Kr(j);if(K.ok)s(u,!0);else{let N=await K.json();s(t,o(N.message))}s(n,!1)}var v=Xc(),w=d(v),f=i(d(w),6),A=i(d(f),2),k=d(A,!0);c(A),c(f);var g=i(f,2),y=i(d(g),2);oe(y,"margin-left","-10px"),We(y,21,()=>e(m),ht,(j,K)=>{var N=Jc(),B=d(N,!0);c(N),U(()=>V(B,e(K))),l(j,N)}),c(y),c(g);var $=i(g,2),_=i(d($),2);St(_,{get options(){return e(m)},width:"186px",get value(){return e(h)},set value(j){s(h,o(j))}}),c($),c(w);var x=i(w,2),b=d(x);Te(b,{get isLoading(){return e(n)},set isLoading(j){s(n,o(j))},$$events:{click:S},children:(j,K)=>{F();var N=Y("MIGRATE");l(j,N)},$$slots:{default:!0}}),c(x);var C=i(x,2);{var L=j=>{var K=Qc(),N=d(K,!0);c(K),U(()=>V(N,e(t))),l(j,K)};M(C,j=>{e(t)&&j(L)})}var D=i(C,2);{var R=j=>{var K=Zc();l(j,K)};M(D,j=>{e(u)&&j(R)})}c(v),U(()=>V(k,e(r))),l(p,v),ne()}var td=T('<div class="success svelte-10h0sak">Success</div>'),ad=T('<div class="err svelte-10h0sak"> </div>'),sd=T('<div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="desc svelte-10h0sak"><p>Validity for a new password.<br> Not Recently Used denied the last n used passwords.<br> Setting no value at all with disable the given option.</p></div> <div class="row svelte-10h0sak"><!> <!></div> <!> <!> <!>',1),rd=T('<div class="wrapper svelte-10h0sak"><div class="desc svelte-10h0sak"><h3>Password Policy</h3> <p>Configure the password policy.<br> The policy is being applied to all passwords being set from this moment on.</p></div> <!></div>');function ld(p,a){ie(a,!0);const t="160px";let n=I(!1),r=I(""),h=I(!1),m=I(void 0),u=I(void 0),E=I(o({}));const S=Qe().shape({length_min:$t().required("Min Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),length_max:$t().required("Max Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),not_recently_used:$t().nullable().min(0,"Cannot be lower than 0").max(10,"Cannot be higher than 10"),valid_days:$t().nullable().min(0,"Cannot be lower than 0").max(3650,"Cannot be higher than 3650"),include_digits:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_lower_case:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_upper_case:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_special:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32")});Se(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1)},3e3)))}),Le(async()=>{if(!e(u)){let y=await Ka(),$=await y.json();y.ok?(s(u,o($)),e(u).length_min=$.length_min||0,e(u).length_max=$.length_max||0,e(u).include_digits=$.include_digits||0,e(u).include_lower_case=$.include_lower_case||0,e(u).include_upper_case=$.include_upper_case||0,e(u).include_special=$.include_special||0,e(u).length_max=$.length_max||0,e(u).valid_days=$.valid_days||0,e(u).not_recently_used=$.not_recently_used||0):s(r,o($.message))}});function v(y){y.code==="Enter"&&w()}async function w(){if(!await f())return;s(r,""),s(n,!0);let y=e(u);y.not_recently_used===0&&(y.not_recently_used=null),y.valid_days===0&&(y.valid_days=null),y.include_digits===0&&(y.include_digits=null),y.include_lower_case===0&&(y.include_lower_case=null),y.include_upper_case===0&&(y.include_upper_case=null),y.include_special===0&&(y.include_special=null);let $=await Jr(y);if($.ok)s(h,!0);else{let _=await $.json();s(r,o(_.message))}s(n,!1)}async function f(){try{return s(E,o({})),await S.validate(e(u),{abortEarly:!1}),e(u).length_min=Number.parseInt(e(u).length_min),e(u).length_max=Number.parseInt(e(u).length_max),e(u).include_digits=Number.parseInt(e(u).include_digits),e(u).include_lower_case=Number.parseInt(e(u).include_lower_case),e(u).include_upper_case=Number.parseInt(e(u).include_upper_case),e(u).include_special=Number.parseInt(e(u).include_special),e(u).length_max=Number.parseInt(e(u).length_max),e(u).valid_days=Number.parseInt(e(u).valid_days),e(u).not_recently_used=Number.parseInt(e(u).not_recently_used),e(u).length_max<e(u).length_min?(e(E).length_max="Max Length cannot be lower than Min Length",!1):e(u).include_digits+e(u).include_lower_case+e(u).include_upper_case+e(u).include_special>e(u).length_max?(e(E).length_max="The sum of all includes does not fit into Max Length",!1):!0}catch(y){return s(E,o(Je(y))),!1}}var A=rd(),k=i(d(A),2);{var g=y=>{var $=sd(),_=ee($),x=d(_);ve(x,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_min},set value(G){e(u).length_min=G},get error(){return e(E).length_min},set error(G){e(E).length_min=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("MIN LENGTH");l(G,re)},$$slots:{default:!0}});var b=i(x,2);ve(b,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_max},set value(G){e(u).length_max=G},get error(){return e(E).length_max},set error(G){e(E).length_max=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("MAX LENGTH");l(G,re)},$$slots:{default:!0}}),c(_);var C=i(_,2),L=d(C);ve(L,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_lower_case},set value(G){e(u).include_lower_case=G},get error(){return e(E).include_lower_case},set error(G){e(E).include_lower_case=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("INCLUDE LOWERCASE");l(G,re)},$$slots:{default:!0}});var D=i(L,2);ve(D,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_upper_case},set value(G){e(u).include_upper_case=G},get error(){return e(E).include_upper_case},set error(G){e(E).include_upper_case=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("INCLUDE UPPERCASE");l(G,re)},$$slots:{default:!0}}),c(C);var R=i(C,2),j=d(R);ve(j,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_digits},set value(G){e(u).include_digits=G},get error(){return e(E).include_digits},set error(G){e(E).include_digits=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("INCLUDE DIGITS");l(G,re)},$$slots:{default:!0}});var K=i(j,2);ve(K,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_special},set value(G){e(u).include_special=G},get error(){return e(E).include_special},set error(G){e(E).include_special=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("INCLUDE SPECIAL");l(G,re)},$$slots:{default:!0}}),c(R);var N=i(R,4),B=d(N);ve(B,{type:"number",autocomplete:"off",width:t,get value(){return e(u).not_recently_used},set value(G){e(u).not_recently_used=G},get error(){return e(E).not_recently_used},set error(G){e(E).not_recently_used=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("NOT RECENTLY USED");l(G,re)},$$slots:{default:!0}});var O=i(B,2);ve(O,{type:"number",autocomplete:"off",width:t,get value(){return e(u).valid_days},set value(G){e(u).valid_days=G},get error(){return e(E).valid_days},set error(G){e(E).valid_days=G},$$events:{keypress:v,input:f},children:(G,Z)=>{F();var re=Y("VALID FOR DAYS");l(G,re)},$$slots:{default:!0}}),c(N);var P=i(N,2);Te(P,{level:1,width:"4rem",get isLoading(){return e(n)},set isLoading(G){s(n,o(G))},$$events:{click:w},children:(G,Z)=>{F();var re=Y("SAVE");l(G,re)},$$slots:{default:!0}});var W=i(P,2);{var X=G=>{var Z=td();l(G,Z)};M(W,G=>{e(h)&&G(X)})}var q=i(W,2);{var H=G=>{var Z=ad(),re=d(Z,!0);c(Z),U(()=>V(re,e(r))),l(G,Z)};M(q,G=>{e(r)&&G(H)})}l(y,$)};M(k,y=>{e(u)&&y(g)})}c(A),l(p,A),ne()}var id=T('<div class="details svelte-2yt27i"><div class="detailsInner svelte-2yt27i"><textarea class="font-mono text svelte-2yt27i"></textarea></div></div>'),nd=T('<div role="none" class="cert svelte-2yt27i"><div class="data font-mono svelte-2yt27i"> </div> <div class="data right svelte-2yt27i"> </div> <!></div>');function od(p,a){ie(a,!0);let t=I(!1);function n(){if(a.jwk.kty==="OKP")return a.jwk.crv;if(a.jwk.kty==="RSA"){let w;const f=a.jwk.n.length;return f>600?w=4096:f>400?w=3072:w=2048,`RSA ${w}`}return"unknown type"}var r=nd(),h=d(r),m=d(h,!0);c(h);var u=i(h,2),E=d(u,!0);U(()=>V(E,n())),c(u);var S=i(u,2);{var v=w=>{var f=id(),A=d(f),k=d(A);$a(k),le(k,"rows",10),le(k,"cols",40),U(()=>sr(k,JSON.stringify(a.jwk,null,2))),c(A),c(f),U(()=>le(k,"name",a.jwk.kid)),de(7,f,()=>dt),l(w,f)};M(S,w=>{e(t)&&w(v)})}c(r),U(()=>V(m,a.jwk.kid)),De("mouseenter",r,()=>s(t,!0)),De("mouseleave",r,()=>s(t,!1)),l(p,r),ne()}var vd=T('<div class="success svelte-a4xw46">Success</div>'),cd=T('<div class="err svelte-a4xw46"> </div>'),dd=T(`<div class="wrapper svelte-a4xw46"><div class="desc svelte-a4xw46"><h3>Json Web Keys</h3> <p>These are the Json Web Keys (JWKs) used for token singing.</p> <p>You can rotate them and generate a full new set. Depending on your deployment, this could take a few
            seconds.<br> New tokens will always be signed with the new / latest ones. The old keys will be cleaned up automatically,
            when
            there cannot be a token anymore that used the old key to not
            break any current token validation.</p></div> <!> <!> <!> <!></div>`);function ud(p,a){ie(a,!0);let t=I(o([])),n=I(!1),r=I(""),h=I(!1),m=I(void 0);Se(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1)},3e3)))}),Le(()=>{e(t).length===0&&u()});async function u(){let y=await Ar(),$=await y.json();y.ok?s(t,o([...$.keys])):s(r,o($.message))}async function E(){s(r,""),s(n,!0);let y=await ll();if(y.ok)u(),s(h,!0);else{let $=await y.json();s(r,o($.message))}s(n,!1)}var S=dd(),v=i(d(S),2);We(v,19,()=>e(t),y=>y.kid,(y,$,_)=>{od(y,{get jwk(){return e(t)[e(_)]},set jwk(x){e(t)[e(_)]=x}})});var w=i(v,2);Te(w,{level:1,get isLoading(){return e(n)},set isLoading(y){s(n,o(y))},$$events:{click:E},children:(y,$)=>{F();var _=Y("ROTATE KEYS");l(y,_)},$$slots:{default:!0}});var f=i(w,2);{var A=y=>{var $=vd();l(y,$)};M(f,y=>{e(h)&&y(A)})}var k=i(f,2);{var g=y=>{var $=cd(),_=d($,!0);c($),U(()=>V(_,e(r))),l(y,$)};M(k,y=>{e(r)&&y(g)})}c(S),l(p,S),ne()}var hd=T('<div class="content"><div class="container svelte-5h65jg"><!> <!></div></div>');function pd(p){const a=["Password Policy","JWKS","Argon2 Parameter","Encryption Keys"];let t=I(o(a[0]));var n=hd(),r=d(n),h=d(r);Dt(h,{labels:a,get selected(){return e(t)},set selected(S){s(t,o(S))}});var m=i(h,2);{var u=S=>{ld(S,{})},E=S=>{var v=pe(),w=ee(v);{var f=k=>{ud(k,{})},A=k=>{var g=pe(),y=ee(g);{var $=x=>{Vc(x,{})},_=x=>{var b=pe(),C=ee(b);{var L=D=>{ed(D,{})};M(C,D=>{e(t)==="Encryption Keys"&&D(L)},!0)}l(x,b)};M(y,x=>{e(t)==="Argon2 Parameter"?x($):x(_,!1)},!0)}l(k,g)};M(w,k=>{e(t)==="JWKS"?k(f):k(A,!1)},!0)}l(S,v)};M(m,S=>{e(t)==="Password Policy"?S(u):S(E,!1)})}c(r),c(n),l(p,n)}var md=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"></path></svg>');function fd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=md();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var gd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>');function wd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=gd();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var yd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"></path></svg>');function bd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=yd();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var $d=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"></path></svg>');function _d(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=$d();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var kd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>');function xd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=kd();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Ed=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path></svg>');function ys(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Ed();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Sd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"></path></svg>');function Id(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Sd();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Td=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z"></path></svg>');function Cd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Td();le(r,"stroke-width",1.5),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Ad=Ye(`<svg width="100%" height="100%" viewBox="0 0 512 138" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,0,-11)"><g transform="matrix(1,0,0,1,0,-176)"><g transform="matrix(0.920325,0,0,1.84151,45.9279,26.459)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:rgb(4,7,11);"></rect></g><g transform="matrix(1.93472,0,0,1.82732,8.35618,28.7533)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(4,7,11);stroke:rgb(4,7,11);stroke-width:1.06px;"></rect></g><g transform="matrix(1.82732,0,0,1.82732,-160.822,70.1806)"><g transform="matrix(72,0,0,72,227.174,123.417)"></g><text x="128.982px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">r<tspan x="152.994px 188.537px " y="123.417px 123.417px ">au</tspan></text></g><g transform="matrix(1,0,0,1.01617,-1.42109e-14,-5.24492)"><path d="M440.936,322.643L439.204,324.266L255.482,324.266L255.482,305.721L440.936,305.721L440.936,322.643Z" style="fill:url(#_Linear1);"></path></g><g transform="matrix(0.920191,0,0,1.84121,46.2464,-91.3383)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:url(#_Linear2);"></rect></g><g transform="matrix(1.97598,0,0,1.84619,190.187,26.062)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(43,65,107);"></rect></g><path d="M439.204,187.734L440.557,189.007L440.557,206.279L256,206.279L256,187.734L439.204,187.734Z" style="fill:rgb(43,65,107);"></path><g transform="matrix(1.82732,0,0,1.82732,-154.661,70.1806)"><g transform="matrix(72,0,0,72,323.045,123.417)"></g><text x="226.646px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">th<tspan x="288.943px " y="123.417px ">y</tspan></text></g><g transform="matrix(2,0,0,2,0,0)"><path d="M219.602,93.867L256,128L219.602,162.133L219.602,93.867Z" style="fill:rgb(43,65,107);"></path></g><g transform="matrix(2,0,0,1.95739,0,3.99997)"><path d="M36.398,93.867L0,93.867L35.908,128.524L0,163.619L36.398,163.619" style="fill:rgb(4,7,11);"></path></g></g></g><defs><linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(185.454,0,0,18.5443,255.482,314.994)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient><linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(200.517,0,0,10.1483,27.7414,156.645)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient></defs></svg>`);function Ld(p){var a=Ad();l(p,a)}var jd=T(`<div class="content"><div class="container svelte-x4sug2"><h2>Documentation</h2> <p class="svelte-x4sug2">For general documentation about Rauthy itself, you should take a look at the <a href="https://sebadob.github.io/rauthy/" target="_blank" class="svelte-x4sug2">Rauthy Book</a></p> <p class="svelte-x4sug2">If you want to integrate an external application and use Rauthy's REST API, take a look at the <a href="/docs/v1/swagger-ui/" target="_blank" class="svelte-x4sug2">Swagger UI</a><br> <b>Note:</b> Depending on the backend configuration, the Swagger UI may not be exposed publicly at this point.
            It is however by default available via the internal <code>/metrics</code> HTTP server to not expose any information.</p> <p class="svelte-x4sug2">The source code can be found in <a href="https://github.com/sebadob/rauthy" target="_blank" class="svelte-x4sug2">Github</a></p></div></div>`);function Rd(p){var a=jd();l(p,a)}var Dd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"></path></svg>');function Nd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Dd();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Md=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),zd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),Od=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),Pd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"><!></div>',1),qd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),Ud=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"></div> <div class="col-text"> </div>',1),Wd=T('<div class="col-typ svelte-1aid5cl"> </div>'),Kd=T('<div class="row svelte-1aid5cl"><div class="col-ts svelte-1aid5cl"> </div> <!></div>'),Gd=T(" <br>",1),Fd=T("<br> <!> ",1),Bd=T(" <br> ",1),Hd=T("<br> <br> <!>",1),Yd=T("<br> <br> ",1),Vd=T("<br> ",1),Jd=T(" <br> <!>",1),Qd=T('<div role="contentinfo"><!></div>');function bs(p,a){ie(a,!0);let t=z(a,"collapsed",3,!0),n=I("event"),r=I(!1),h=Ge(()=>!t()&&!a.wide),m=Ge(()=>t()&&!a.wide&&!e(r)),u=Ge(()=>!t()&&a.wide),E=Ge(()=>e(m)?".5rem":".33rem");Le(()=>{new Date().getTime()-1e3*30<a.event.timestamp&&(setTimeout(()=>{s(n,"eventNew")},100),setTimeout(()=>{s(n,"event")},2500))});function S(){switch(a.event.level){case"test":return"T";case"info":return"I";case"notice":return"N";case"warning":return"W";case"critical":return"C";default:return"U"}}function v(){return ft(a.event.timestamp/1e3)}var w=Qd();const f=Ge(()=>`${e(E)} solid ${Kt(a.event.level)}`);var A=d(w);{var k=y=>{var $=Kd(),_=d($),x=d(_,!0);U(()=>V(x,v())),c(_);var b=i(_,2);{var C=D=>{var R=Md(),j=ee(R),K=d(j,!0);c(j);var N=i(j,2),B=d(N,!0);c(N);var O=i(N,2),P=d(O,!0);c(O),U(()=>{V(K,a.event.typ),V(B,a.event.ip),V(P,a.event.text)}),l(D,R)},L=D=>{var R=pe(),j=ee(R);{var K=B=>{var O=zd(),P=ee(O),W=d(P,!0);c(P);var X=i(P,2),q=d(X,!0);c(X),U(()=>{V(W,`${a.event.typ}: ${a.event.data}`),V(q,a.event.ip)}),l(B,O)},N=B=>{var O=pe(),P=ee(O);{var W=q=>{var H=Od(),G=ee(H),Z=d(G,!0);c(G);var re=i(G,2),ce=d(re,!0);c(re),U(()=>{V(Z,a.event.typ),V(ce,a.event.ip||"")}),l(q,H)},X=q=>{var H=pe(),G=ee(H);{var Z=ce=>{var $e=Pd(),_e=ee($e),me=d(_e,!0);c(_e);var Me=i(_e,2),ge=d(Me,!0);c(Me);var ue=i(Me,2),ye=d(ue);ba(ye,()=>a.event.text.replace("@","<wbr/>@")),c(ue),U(()=>{V(me,a.event.typ),V(ge,a.event.ip||"")}),l(ce,$e)},re=ce=>{var $e=pe(),_e=ee($e);{var me=ge=>{var ue=qd(),ye=ee(ue),be=d(ye,!0);c(ye);var ze=i(ye,2),Ce=d(ze,!0);c(ze);var xe=i(ze,2),Re=d(xe,!0);U(()=>V(Re,`Expires: ${ft(a.event.data)}`)),c(xe),U(()=>{V(be,a.event.typ),V(Ce,a.event.ip)}),l(ge,ue)},Me=ge=>{var ue=pe(),ye=ee(ue);{var be=Ce=>{var xe=Ud(),Re=ee(xe),J=d(Re,!0);c(Re);var Ie=i(Re,4),fe=d(Ie,!0);c(Ie),U(()=>{V(J,a.event.typ),V(fe,a.event.text)}),l(Ce,xe)},ze=Ce=>{var xe=Wd(),Re=d(xe,!0);c(xe),U(()=>V(Re,a.event.typ)),l(Ce,xe)};M(ye,Ce=>{a.event.typ==="RauthyStarted"||a.event.typ==="RauthyHealthy"||a.event.typ==="RauthyUnhealthy"?Ce(be):Ce(ze,!1)},!0)}l(ge,ue)};M(_e,ge=>{a.event.typ==="IpBlacklisted"?ge(me):ge(Me,!1)},!0)}l(ce,$e)};M(G,ce=>{a.event.typ==="NewRauthyAdmin"||a.event.typ==="NewUserRegistered"||a.event.typ==="UserPasswordReset"||a.event.typ==="UserEmailChange"?ce(Z):ce(re,!1)},!0)}l(q,H)};M(P,q=>{a.event.typ==="SecretsMigrated"?q(W):q(X,!1)},!0)}l(B,O)};M(j,B=>{a.event.typ==="InvalidLogins"?B(K):B(N,!1)},!0)}l(D,R)};M(b,D=>{a.event.typ==="Test"?D(C):D(L,!1)})}c($),l(y,$)},g=y=>{var $=pe(),_=ee($);{var x=C=>{var L=Jd(),D=ee(L,!0);U(()=>V(D,v()));var R=i(D,2),j=i(R);{var K=B=>{var O=Fd(),P=i(ee(O),2);{var W=q=>{var H=Gd(),G=ee(H);F(),U(()=>V(G,`${a.event.text??""} `)),l(q,H)};M(P,q=>{a.event.text&&q(W)})}var X=i(P);U(()=>V(X,` ${a.event.ip??""}`)),l(B,O)},N=B=>{var O=pe(),P=ee(O);{var W=q=>{var H=Bd(),G=ee(H,!0),Z=i(G,2);U(()=>{V(G,`: ${a.event.data}`),V(Z,` ${a.event.ip??""}`)}),l(q,H)},X=q=>{var H=pe(),G=ee(H);{var Z=ce=>{var $e=Y();U(()=>V($e,a.event.ip)),l(ce,$e)},re=ce=>{var $e=pe(),_e=ee($e);{var me=ge=>{var ue=Hd(),ye=i(ee(ue)),be=i(ye,3);ba(be,()=>a.event.text.replace("@","<wbr/>@")),U(()=>V(ye,` ${(a.event.ip||"")??""} `)),l(ge,ue)},Me=ge=>{var ue=pe(),ye=ee(ue);{var be=Ce=>{var xe=Yd(),Re=i(ee(xe)),J=i(Re,2);U(()=>V(J,` ${ft(a.event.data)??""}`)),U(()=>V(Re,` ${a.event.ip??""} `)),l(Ce,xe)},ze=Ce=>{var xe=pe(),Re=ee(xe);{var J=Ie=>{var fe=Vd(),qe=i(ee(fe));U(()=>V(qe,` ${a.event.text??""}`)),l(Ie,fe)};M(Re,Ie=>{(a.event.typ==="RauthyStarted"||a.event.typ==="RauthyHealthy"||a.event.typ==="RauthyUnhealthy")&&Ie(J)},!0)}l(Ce,xe)};M(ye,Ce=>{a.event.typ==="IpBlacklisted"?Ce(be):Ce(ze,!1)},!0)}l(ge,ue)};M(_e,ge=>{a.event.typ==="NewRauthyAdmin"||a.event.typ==="NewUserRegistered"||a.event.typ==="UserPasswordReset"||a.event.typ==="UserEmailChange"?ge(me):ge(Me,!1)},!0)}l(ce,$e)};M(G,ce=>{a.event.typ==="SecretsMigrated"?ce(Z):ce(re,!1)},!0)}l(q,H)};M(P,q=>{a.event.typ==="InvalidLogins"?q(W):q(X,!1)},!0)}l(B,O)};M(j,B=>{a.event.typ==="Test"?B(K):B(N,!1)})}U(()=>V(R,` ${a.event.typ??""} `)),l(C,L)},b=C=>{var L=Y();U(()=>V(L,S())),l(C,L)};M(_,C=>{e(h)?C(x):C(b,!1)},!0)}l(y,$)};M(A,y=>{e(u)?y(k):y(g,!1)})}c(w),U(()=>{jt(w,Rt(e(n)),"svelte-1aid5cl"),_t(w,"showCollapsed",e(m)),oe(w,"border-left",e(f))}),De("mouseenter",w,()=>s(r,!0)),De("mouseleave",w,()=>s(r,!1)),l(p,w),ne()}var Zd=T("<div><div><b>Legend</b></div> <div><div>TEST</div> <div>INFO</div> <div>NOTICE</div> <div>WARNING</div> <div>CRITICAL</div></div></div>");function Xd(p,a){ie(a,!0);var t=Zd(),n=d(t),r=i(n,2),h=d(r);const m=Ge(()=>`.33rem solid ${Kt("test")}`);var u=i(h,2);const E=Ge(()=>`.33rem solid ${Kt("info")}`);var S=i(u,2);const v=Ge(()=>`.33rem solid ${Kt("notice")}`);var w=i(S,2);const f=Ge(()=>`.33rem solid ${Kt("warning")}`);var A=i(w,2);const k=Ge(()=>`.33rem solid ${Kt("critical")}`);c(r),c(t),U(()=>{jt(n,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(n,"border-left",".33rem solid var(--col-bg)"),jt(r,Rt(a.wide?"legendWide":"legend"),"svelte-1imwz5t"),jt(h,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(h,"border-left",e(m)),jt(u,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(u,"border-left",e(E)),jt(S,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(S,"border-left",e(v)),jt(w,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(w,"border-left",e(f)),jt(A,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(A,"border-left",e(k))}),l(p,t),ne()}var eu=T('<div class="headerWideInner svelte-t1qwu8"><b>Events</b> <!></div>'),tu=T("<b>Events</b>"),au=T("<!> <!>",1),su=T('<div class="opts svelte-t1qwu8"><!></div>'),ru=T('<div role="contentinfo" id="events" class="svelte-t1qwu8"><div class="upper"><div class="header svelte-t1qwu8"><!></div> <!> <div></div></div> <!></div>');function lu(p,a){ie(a,!0);let t=z(a,"collapsed",3,!0),n=z(a,"wide",15),r=50,h=I(void 0),m=I(o([])),u=I(o([])),E=I(void 0),S=I(!1);Le(async()=>{s(E,o(await v()))});async function v(){return localStorage.getItem("eventLevel")||"Info"}async function w(N){localStorage.setItem("eventLevel",N)}async function f(){await zs()}function A(){var N;console.log("opening SSE stream"),s(h,o(new EventSource(`/auth/v1/events/stream?latest=${r}&level=${((N=e(E))==null?void 0:N.toLowerCase())||"info"}`))),e(h).onopen=()=>{console.log("SSE Events Stream opened"),s(m,o([]))},e(h).onerror=()=>{console.error("SSE Events Stream closed")},e(h).onmessage=B=>{if(B.data){let O=JSON.parse(B.data);s(m,o([O,...e(m).slice(-499)]))}}}let k=Ge(()=>!t()&&!n()||e(S)),g=Ge(()=>t()&&!n()&&!e(S)),y=Ge(()=>!t()&&n());Se(()=>{if(e(m))switch(e(E)){case"Info":s(u,o(e(m)));break;case"Notice":s(u,o(e(m).filter(N=>N.typ==="Test"||N.level==="notice"||N.level==="warning"||N.level==="critical")));break;case"Warning":s(u,o(e(m).filter(N=>N.typ==="Test"||N.level==="warning"||N.level==="critical")));break;case"Critical":s(u,o(e(m).filter(N=>N.typ==="Test"||N.level==="critical")));break}}),Se(()=>{e(E)&&(w(e(E)),e(h)&&e(h).readyState!==2&&e(h).close(),A())});var $=ru(),_=d($),x=d(_),b=d(x);{var C=N=>{var B=au(),O=ee(B);{var P=q=>{var H=eu(),G=i(d(H),2);St(G,{options:fa,get value(){return e(E)},set value(Z){s(E,o(Z))}}),c(H),l(q,H)},W=q=>{var H=tu();l(q,H)};M(O,q=>{e(y)?q(P):q(W,!1)})}var X=i(O,2);Te(X,{level:3,$$events:{click:f},children:(q,H)=>{F();var G=Y("TEST");l(q,G)},$$slots:{default:!0}}),l(N,B)};M(b,N=>{e(g)||N(C)})}c(x);var L=i(x,2);{var D=N=>{var B=su(),O=d(B);St(O,{options:fa,get value(){return e(E)},set value(P){s(E,o(P))}}),c(B),l(N,B)};M(L,N=>{e(y)||N(D)})}var R=i(L,2);We(R,23,()=>e(u),N=>N.id,(N,B,O)=>{var P=Ge(()=>t()&&!e(S));bs(N,{get collapsed(){return e(P)},get event(){return e(u)[e(O)]},set event(W){e(u)[e(O)]=W},get wide(){return n()},set wide(W){n(W)}})}),c(R),c(_);var j=i(_,2);{var K=N=>{Xd(N,{get wide(){return n()},set wide(B){n(B)}})};M(j,N=>{(!t()||e(S))&&N(K)})}c($),U(()=>{_t($,"widthDefault",e(k)),_t($,"widthCollapsed",e(g)),_t($,"widthWide",e(y)),jt(R,Rt(e(y)?"dataWide":e(g)?"dataCollapsed":"data"),"svelte-t1qwu8")}),De("mouseenter",$,()=>s(S,!0)),De("mouseleave",$,()=>s(S,!1)),l(p,$),ne()}var iu=T('<div class="addNewInputs svelte-1fhw572"><!> <!> <div class="saveBtn svelte-1fhw572"><!></div> <div class="err svelte-1fhw572"> </div></div>'),nu=T('<div class="svelte-1fhw572">No blacklisted IPs</div>'),ou=(p,a,t)=>a(e(t).ip),vu=T('<div role="button" tabindex="0" class="delete svelte-1fhw572"><!></div>'),cu=T('<div class="blacklisted svelte-1fhw572"><div class="ip svelte-1fhw572"> </div> <div class="exp svelte-1fhw572"> </div> <!></div>'),du=T(' <div class="content"><div class="top svelte-1fhw572"><!> <div class="addNew svelte-1fhw572"><!></div></div> <!> <div id="blacklist" class="svelte-1fhw572"><!></div> <!> <div style="height: 20px"></div></div>',1);function uu(p,a){ie(a,!0);let t=I(""),n=I(""),r=I(o([])),h=I(o([])),m=I(o([])),u=I(!1),E=o({ip:"",exp:""}),S=I(o({}));const v=Qe().shape({ip:he().required("IP is required").matches(Qs,"Invalid IPv4")}),w=new Date().toISOString().split(".")[0],f=[{label:"IP",callback:(q,H)=>q.ip.includes(H)}];let A=[{label:"IP",callback:(q,H)=>q.ip.localeCompare(H.ip)}];Se(()=>{e(u)&&(s(n,""),E.exp=new Date().toISOString().split(".")[0])}),Le(()=>{k()});async function k(){let q=await _l(),H=await q.json();q.ok?s(r,o(H.ips)):s(t,o(H.message))}async function g(){if(s(n,""),!await $())return;let q=Pt(E.exp);if(!q){s(n,"Invalid Date Input: User Expires");return}let H={ip:E.ip,exp:q},G=await kl(H);if(G.ok)s(u,!1),E.ip="",await k();else{let Z=await G.json();s(n,o(Z.message))}}async function y(q){(await xl(q)).ok&&await k()}async function $(){try{return await v.validate(E,{abortEarly:!1}),s(S,o({})),!0}catch(q){return s(S,o(Je(q))),!1}}F();var _=du(),x=ee(_),b=i(x),C=d(b),L=d(C);Lt(L,{get items(){return e(r)},searchOptions:f,orderOptions:A,get resItems(){return e(h)},set resItems(q){s(h,o(q))}});var D=i(L,2),R=d(D);Te(R,{level:3,$$events:{click:()=>s(u,!e(u))},children:(q,H)=>{F();var G=Y("BLACKLIST IP");l(q,G)},$$slots:{default:!0}}),c(D),c(C);var j=i(C,2);{var K=q=>{var H=iu(),G=d(H);ve(G,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return E.ip},set value(me){E.ip=me},get error(){return e(S).ip},set error(me){e(S).ip=me},children:(me,Me)=>{F();var ge=Y("IP");l(me,ge)},$$slots:{default:!0}});var Z=i(G,2);ve(Z,{type:"datetime-local",step:"60",width:"18rem",min:w,max:"2099-01-01T00:00",get value(){return E.exp},set value(me){E.exp=me},children:(me,Me)=>{F();var ge=Y("EXPIRES");l(me,ge)},$$slots:{default:!0}});var re=i(Z,2),ce=d(re);Te(ce,{level:1,$$events:{click:g},children:(me,Me)=>{F();var ge=Y("SAVE");l(me,ge)},$$slots:{default:!0}}),c(re);var $e=i(re,2),_e=d($e,!0);c($e),c(H),U(()=>V(_e,e(n))),de(3,H,()=>we),l(q,H)};M(j,q=>{e(u)&&q(K)})}var N=i(j,2),B=d(N);{var O=q=>{var H=nu();l(q,H)},P=q=>{var H=pe(),G=ee(H);We(G,17,()=>e(m),Z=>Z.ip,(Z,re)=>{var ce=cu(),$e=d(ce),_e=d($e,!0);c($e);var me=i($e,2),Me=d(me,!0);U(()=>V(Me,ft(e(re).exp))),c(me);var ge=i(me,2);Ze(ge,{text:"Delete IP",children:(ue,ye)=>{var be=vu();be.__click=[ou,y,re];var ze=d(be);ra(ze,{color:"var(--col-err)"}),c(be),De("keypress",be,()=>y(e(re).ip)),l(ue,be)},$$slots:{default:!0}}),c(ce),U(()=>V(_e,e(re).ip)),l(Z,ce)}),l(q,H)};M(B,q=>{e(r).length===0?q(O):q(P,!1)})}c(N);var W=i(N,2);{var X=q=>{Nt(q,{get items(){return e(h)},set items(H){s(h,o(H))},get resItems(){return e(m)},set resItems(H){s(m,o(H))}})};M(W,q=>{e(r).length>0&&q(X)})}F(2),c(b),U(()=>V(x,`${e(t)??""} `)),l(p,_),ne()}at(["click"]);var hu=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"></path></svg>');function pu(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=hu();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var mu=T('<div role="button" tabindex="0" class="cell pointer svelte-lgl56a"> </div>'),fu=T('<div class="cell svelte-lgl56a"><input class="pointer svelte-lgl56a" type="checkbox"></div>'),gu=T('<div class="mr svelte-lgl56a"><div role="button" tabindex="0" class="label pointer svelte-lgl56a"> </div> <!></div>'),wu=T('<div class="matrix svelte-lgl56a"><b>Access Rights</b> <div class="mr svelte-lgl56a"><div class="label svelte-lgl56a"></div> <!></div> <!></div>');function $s(p,a){ie(a,!0);let t=z(a,"accessMatrix",15);z(a,"finalize",15)(S);const n=["Blacklist","Clients","Events","Generic","Groups","Roles","Secrets","Sessions","Scopes","UserAttributes","Users"],r=["create","read","update","delete"];let h=new Array(n.length).fill(!1),m=new Array(r.length).fill(!1);Le(()=>{var $;u(),($=a.apiKey)!=null&&$.access&&E()});function u(){let $=new Array(n.length);for(let _=0;_<n.length;_++){$[_]={group:n[_]};for(let x of r)$[_][x]=!1}t($)}function E(){for(let $ of a.apiKey.access){let _=n.findIndex(x=>x===$.group);for(let x of $.access_rights){let b=r.findIndex(C=>C===x);t(t()[_][r[b]]=!0,!0)}}}function S(){let $=[];for(let _=0;_<n.length;_++){let x=[];for(let b of r)t()[_][b]&&x.push(b);x.length>0&&$.push({group:n[_],access_rights:x})}return $}function v($){h[$]=!h[$];const _=h[$];let x=t()[$];for(let b=0;b<r.length;b++)for(let C of Object.keys(x))C!=="group"&&(x[C]=_);t(t()[$]=x,!0)}function w($){m[$]=!m[$];const _=m[$];for(let x=0;x<n.length;x++)t(t()[x][r[$]]=_,!0)}var f=wu(),A=i(d(f),2),k=i(d(A),2);We(k,17,()=>r,ht,($,_,x)=>{var b=mu(),C=Ge(()=>w.bind(this,x));b.__click=function(...R){var j;(j=e(C))==null||j.apply(this,R)};var L=Ge(()=>w.bind(this,x)),D=d(b,!0);c(b),U(()=>V(D,r[x])),De("keypress",b,function(...R){var j;(j=e(L))==null||j.apply(this,R)}),l($,b)}),c(A);var g=i(A,2);{var y=$=>{var _=pe(),x=ee(_);We(x,17,()=>n,ht,(b,C,L)=>{var D=gu(),R=d(D),j=Ge(()=>v.bind(this,L));R.__click=function(...O){var P;(P=e(j))==null||P.apply(this,O)};var K=Ge(()=>v.bind(this,L)),N=d(R,!0);c(R);var B=i(R,2);We(B,17,()=>r,ht,(O,P)=>{var W=fu(),X=d(W);it(X),c(W),or(X,()=>t()[L][e(P)],q=>t(t()[L][e(P)]=q,!0)),l(O,W)}),c(D),U(()=>V(N,n[L])),De("keypress",R,function(...O){var P;(P=e(K))==null||P.apply(this,O)}),l(b,D)}),l($,_)};M(g,$=>{t()&&$(y)})}return c(f),l(p,f),ne({finalizeMatrix:S})}at(["click"]);var yu=T("<div><!></div>"),bu=T('<div class="container svelte-ubtepy"><!> <div class="switch svelte-ubtepy">Key Expires: <!></div> <!> <!> <div class="saveBtn svelte-ubtepy"><!></div> <div class="err svelte-ubtepy"> </div></div>');function $u(p,a){ie(a,!0);const t=new Date().toISOString().split(".")[0];let n=z(a,"apiKeys",19,()=>[]),r=z(a,"onSave",3,()=>{}),h=I(""),m=I(!1),u=I(void 0),E=I(void 0),S=o({name:"",exp:""}),v=I(o({}));const w=Qe().shape({name:he().required("Name is required").min(2).max(24).matches(Zs,"Format: [a-zA-Z0-9_/-]{2,24}")});Se(()=>{e(m)&&(S.exp=new Date().toISOString().split(".")[0])});async function f(){if(s(h,""),!await A())return;let j={name:S.name,access:e(u)()};if(j.access.length===0){s(h,"Grant the new API Key at least one permission");return}if(e(m)){let N=Pt(S.exp);if(!N){s(h,"Invalid Date Input: User Expires");return}j.exp=N}let K=await wl(j);if(K.ok)r()();else{let N=await K.json();s(h,o(N.message))}}async function A(){try{await w.validate(S,{abortEarly:!1}),s(v,o({}))}catch(j){return s(v,o(Je(j))),!1}for(let j of n())if(j.name===S.name)return e(v).name="Name already exists",!1;return!0}var k=bu(),g=d(k);ve(g,{width:"18rem",autocomplete:"off",placeholder:"Name",get value(){return S.name},set value(j){S.name=j},get error(){return e(v).name},set error(j){e(v).name=j},children:(j,K)=>{F();var N=Y("NAME");l(j,N)},$$slots:{default:!0}});var y=i(g,2),$=i(d(y));He($,{get selected(){return e(m)},set selected(j){s(m,o(j))}}),c(y);var _=i(y,2);{var x=j=>{var K=yu(),N=d(K);ve(N,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return S.exp},set value(B){S.exp=B},children:(B,O)=>{F();var P=Y("EXPIRES");l(B,P)},$$slots:{default:!0}}),c(K),de(3,K,()=>we),l(j,K)};M(_,j=>{e(m)&&j(x)})}var b=i(_,2);$s(b,{get accessMatrix(){return e(E)},set accessMatrix(j){s(E,o(j))},get finalize(){return e(u)},set finalize(j){s(u,o(j))}});var C=i(b,2),L=d(C);Te(L,{level:1,$$events:{click:f},children:(j,K)=>{F();var N=Y("SAVE");l(j,N)},$$slots:{default:!0}}),c(C);var D=i(C,2),R=d(D,!0);c(D),c(k),U(()=>V(R,e(h))),l(p,k),ne()}var _u=T("<div><!></div>"),ku=T('<div class="success svelte-1a3jnb3">Success</div>'),xu=T('<div class="mainErr err svelte-1a3jnb3"> </div>'),Eu=T('<div class="container svelte-1a3jnb3"><div class="unit svelte-1a3jnb3"><div class="label svelte-1a3jnb3">Name</div> <div class="value svelte-1a3jnb3"> </div></div> <div class="switch svelte-1a3jnb3">Key Expires: <!></div> <!> <!> <!> <!> <!></div>');function Su(p,a){ie(a,!0);const t=new Date().toISOString().split(".")[0];let n=z(a,"apiKey",27,()=>o({})),r=I(""),h=I(!1),m=I(void 0),u=I(!!n().expires),E=I(void 0),S=I(void 0);Se(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(m)));let v=o({exp:""});Se(()=>{e(u)&&(v.exp=new Date().toISOString().split(".")[0])});async function w(){s(r,"");let K={name:n().name,access:e(S)()};if(K.access.length===0){s(r,"Grant the API Key at least one permission");return}if(e(u)){let B=Pt(v.exp);if(!B){s(r,"Invalid Date Input: User Expires");return}K.exp=B}let N=await yl(K);if(N.ok)a.onSave(),s(h,!0);else{let B=await N.json();s(r,o(B.message))}}var f=Eu(),A=d(f),k=i(d(A),2),g=d(k,!0);c(k),c(A);var y=i(A,2),$=i(d(y));He($,{get selected(){return e(u)},set selected(K){s(u,o(K))}}),c(y);var _=i(y,2);{var x=K=>{var N=_u(),B=d(N);ve(B,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return v.exp},set value(O){v.exp=O},children:(O,P)=>{F();var W=Y("EXPIRES");l(O,W)},$$slots:{default:!0}}),c(N),de(3,N,()=>we),l(K,N)};M(_,K=>{e(u)&&K(x)})}var b=i(_,2);$s(b,{get apiKey(){return n()},get accessMatrix(){return e(E)},set accessMatrix(K){s(E,o(K))},get finalize(){return e(S)},set finalize(K){s(S,o(K))}});var C=i(b,2);Te(C,{level:1,width:"4rem",$$events:{click:w},children:(K,N)=>{F();var B=Y("SAVE");l(K,B)},$$slots:{default:!0}});var L=i(C,2);{var D=K=>{var N=ku();l(K,N)};M(L,K=>{e(h)&&K(D)})}var R=i(L,2);{var j=K=>{var N=xu(),B=d(N,!0);c(N),U(()=>V(B,e(r))),l(K,N)};M(R,K=>{e(r)&&K(j)})}c(f),U(()=>V(g,n().name)),l(p,f),ne()}var Iu=T('<div class="err svelte-1jljqe9"> </div>'),Tu=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this ApiKey?</div> <!> <!></div>');function Cu(p,a){ie(a,!0);let t=z(a,"apiKey",19,()=>({})),n=I("");async function r(){s(n,"");let S=await bl(t().name);if(S.ok)a.onSave();else{let v=await S.json();s(n,o(v.message))}}var h=Tu(),m=i(d(h),2);Te(m,{level:1,$$events:{click:r},children:(S,v)=>{F();var w=Y("DELETE");l(S,w)},$$slots:{default:!0}});var u=i(m,2);{var E=S=>{var v=Iu(),w=d(v,!0);c(v),U(()=>V(w,e(n))),l(S,v)};M(u,S=>{e(n)&&S(E)})}c(h),l(p,h),ne()}var Au=T('<div><div class="iconsOuter svelte-s24qr4"><div class="iconsInner svelte-s24qr4"><div role="button" tabindex="0" class="show svelte-s24qr4"><!></div> <div role="button" tabindex="0"><!></div></div></div> <textarea></textarea></div>');function _s(p,a){ie(a,!0);let t=z(a,"value",3,""),n=z(a,"rows",3,10),r=z(a,"cols",3,60),h=z(a,"name",3,"default"),m=z(a,"show",15,!1),u=z(a,"width",3,"40rem"),E=Ut(a,["$$slots","$$events","$$legacy","value","rows","cols","name","show","width"]),S=I(""),v=I("");Se(()=>{m()?s(v,t()):s(v,o(e(S)))}),Le(()=>{for(let R=0;R<t().length;R++)s(S,e(S)+"*");s(v,o(e(S)))});function w(){navigator.clipboard.writeText(t())}function f(){m(!m())}var A=Au(),k=d(A),g=d(k),y=d(g);y.__click=f;var $=d(y);{var _=R=>{Ta(R,{width:22})},x=R=>{Ia(R,{width:22})};M($,R=>{m()?R(_):R(x,!1)})}c(y);var b=i(y,2);b.__click=w;var C=d(b);ds(C,{}),c(b),c(g),c(k);var L=i(k,2);$a(L);let D;c(A),U(()=>{oe(A,"width",`${u()}`),D=sa(L,D,{disabled:!0,name:h(),rows:n(),cols:r(),...E},"svelte-s24qr4"),oe(L,"width",`${u()}`),oe(L,"padding-right","2.75rem")}),De("keypress",y,f),De("keypress",b,w),ut(L,()=>e(v),R=>s(v,R)),l(p,A),ne()}at(["click"]);var Lu=T(`<div class="secret font-mono svelte-1vixcxf"><!></div> <p class="svelte-1vixcxf">An API Key must be provided in the HTTP <span class="headerCodeSmall svelte-1vixcxf"><code>Authorization</code></span> header in the following format:</p> <p class="svelte-1vixcxf"><span class="headerCode svelte-1vixcxf"><b><code>API-Key YourSecretApiKeyHere</code></b></span></p> <p class="svelte-1vixcxf">You can use the following <code>curl</code> request to test your new Key:</p> <!> <p class="svelte-1vixcxf">If you don't have <code>jq</code> installed and the above fails:</p> <!>`,1),ju=T(`<div class="container svelte-1vixcxf"><p class="svelte-1vixcxf">You Can generate a new secret for this API Key here.</p> <p class="svelte-1vixcxf">You will only see this secret once after the generation.
        When a new one has been generated, the old secret will be overridden permanently.
        This operation cannot be reverted!</p> <!> <!> <div class="err svelte-1vixcxf"> </div></div>`);function Ru(p,a){ie(a,!0);let t=I(""),n=I(""),r=I(""),h=I("");async function m(){let k=await $l(a.apiKey.name);if(k.ok)s(n,o(await k.text())),s(r,`curl -s -H 'Authorization: API-Key ${e(n)}' ${window.location.origin}/auth/v1/api_keys/${a.apiKey.name}/test`),s(h,`${e(r)} | jq`);else{let g=await k.json();s(t,o(g.message))}}var u=ju(),E=i(d(u),4),S=Ge(()=>e(n)?3:1);Te(E,{get level(){return e(S)},width:"130px",$$events:{click:m},children:(k,g)=>{F();var y=Y("GENERATE NEW");l(k,y)},$$slots:{default:!0}});var v=i(E,2);{var w=k=>{var g=Lu(),y=ee(g),$=d(y);Gt($,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(n)},set value(b){s(n,o(b))},children:(b,C)=>{F();var L=Y("API KEY");l(b,L)},$$slots:{default:!0}}),c(y);var _=i(y,8);_s(_,{name:"id",rows:3,get value(){return e(h)}});var x=i(_,4);_s(x,{name:"id",rows:3,get value(){return e(r)}}),de(3,y,()=>we),l(k,g)};M(v,k=>{e(n)&&k(w)})}var f=i(v,2),A=d(f,!0);c(f),c(u),U(()=>V(A,e(t))),l(p,u),ne()}var Du=T('<div class="data svelte-115hohv"> </div>'),Nu=T('<div class="header svelte-115hohv"><div class="data svelte-115hohv"> </div> <!></div>'),Mu=T("<div><!></div>"),zu=T("<div><!></div>"),Ou=T("<div><!></div>"),Pu=T("<div><!> <!></div>");function qu(p,a){ie(a,!0);let t=z(a,"apiKey",31,()=>o({})),n=z(a,"onSave",11,()=>{}),r=I(void 0);const h=["Config","Secret","Delete"];let m=I(o(h[0]));const u=200,E=u/2;function S(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Nu(),f=d(w),A=d(f,!0);c(f);var k=i(f,2);{var g=y=>{Ze(y,{text:"Expiry",children:($,_)=>{var x=Du(),b=d(x,!0);U(()=>V(b,ft(t().expires))),c(x),l($,x)},$$slots:{default:!0}})};M(k,y=>{t().expires&&y(g)})}c(w),U(()=>V(A,t().name)),l(v,w)},body:v=>{var w=Pu(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Mu(),_=d($);Su(_,{get onSave(){return n()},get apiKey(){return t()},set apiKey(x){t(x)}}),c($),de(1,$,()=>we,()=>({delay:E,duration:u})),de(2,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=pe(),_=ee($);{var x=C=>{var L=zu(),D=d(L);Ru(D,{get apiKey(){return t()}}),c(L),de(1,L,()=>we,()=>({delay:E,duration:u})),de(2,L,()=>we,()=>({duration:u})),l(C,L)},b=C=>{var L=pe(),D=ee(L);{var R=j=>{var K=Ou(),N=d(K);Cu(N,{get apiKey(){return t()},onSave:S}),c(K),de(1,K,()=>we,()=>({delay:E,duration:u})),de(2,K,()=>we,()=>({duration:u})),l(j,K)};M(D,j=>{e(m)==="Delete"&&j(R)},!0)}l(C,L)};M(_,C=>{e(m)==="Secret"?C(x):C(b,!1)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),ne()}var Uu=T("<div><!></div>"),Wu=T('<div class="svelte-1fzx60h">No Api Keys</div>'),Ku=T(' <div class="content"><div class="top svelte-1fzx60h"><!> <div class="addNew svelte-1fzx60h"><!></div></div> <!> <div id="keys" class="svelte-1fzx60h"><!></div> <!> <div style="height: 20px"></div></div>',1);function Gu(p,a){ie(a,!0);let t=I(""),n=I(o([])),r=I(o([])),h=I(o([])),m=I(!1);const u=[{label:"Name",callback:(j,K)=>j.name.includes(K)}];let E=[{label:"Name",callback:(j,K)=>j.name.localeCompare(K.name)}];Le(()=>{S()});async function S(){let j=await gl(),K=await j.json();j.ok?(s(n,o(K.keys)),s(m,!1)):s(t,o(K.message))}F();var v=Ku(),w=ee(v),f=i(w),A=d(f),k=d(A);Lt(k,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(j){s(r,o(j))}});var g=i(k,2),y=d(g);Te(y,{level:3,$$events:{click:()=>s(m,!e(m))},children:(j,K)=>{F();var N=Y("NEW KEY");l(j,N)},$$slots:{default:!0}}),c(g),c(A);var $=i(A,2);{var _=j=>{var K=Uu(),N=d(K);$u(N,{onSave:S,get apiKeys(){return e(n)}}),c(K),de(3,K,()=>we),l(j,K)};M($,j=>{e(m)&&j(_)})}var x=i($,2),b=d(x);{var C=j=>{var K=Wu();l(j,K)},L=j=>{var K=pe(),N=ee(K);We(N,19,()=>e(h),B=>B.name,(B,O,P)=>{qu(B,{onSave:S,get apiKey(){return e(h)[e(P)]},set apiKey(W){e(h)[e(P)]=W}})}),l(j,K)};M(b,j=>{e(n).length===0?j(C):j(L,!1)})}c(x);var D=i(x,2);{var R=j=>{Nt(j,{get items(){return e(r)},set items(K){s(r,o(K))},get resItems(){return e(h)},set resItems(K){s(h,o(K))}})};M(D,j=>{e(n).length>0&&j(R)})}F(2),c(f),U(()=>V(w,`${e(t)??""} `)),l(p,v),ne()}var Fu=T('<div class="row svelte-hjwmgw">No events found</div>'),Bu=T('<div class="content"><div class="row svelte-hjwmgw"><!></div> <div class="row filter svelte-hjwmgw"><!> <!></div> <div class="row filterOpts svelte-hjwmgw"><div><!></div> Filter <!> <!></div> <!></div>');function Hu(p,a){ie(a,!0);let t=I(o([])),n=I(o([])),r=I(o(Ba(new Date(new Date().getTime()-3600*1e3)))),h=I(void 0),m=I("Info"),u=I(!1),E=I(o(Za[0])),S=[{label:"IP",callback:(N,B)=>{var O;return(O=N.ip)==null?void 0:O.includes(B)}},{label:"Content",callback:(N,B)=>{var O,P;return(P=(O=N.text)==null?void 0:O.toLowerCase())==null?void 0:P.includes(B.toLowerCase())}}],v=[{label:"Timestamp",callback:(N,B)=>N.timestamp-B.timestamp},{label:"Level",callback:(N,B)=>N.level.localeCompare(B.level)},{label:"Type",callback:(N,B)=>N.typ.localeCompare(B.typ)}];As(()=>{w()});async function w(){let N={from:Pt(e(r)),level:e(m).toLowerCase()};e(h)&&(N.until=Pt(e(h))),e(u)&&(N.typ=e(E));let B=await Gr(N),O=await B.json();B.ok?s(t,o(O)):O.message}var f=Bu(),A=d(f),k=d(A);Lt(k,{get items(){return e(t)},searchOptions:S,orderOptions:v,firstDirReverse:!0,get resItems(){return e(n)},set resItems(N){s(n,o(N))}}),c(A);var g=i(A,2),y=d(g);ve(y,{type:"datetime-local",step:"60",width:"17.5rem",max:"2099-01-01T00:00",get value(){return e(r)},set value(N){s(r,o(N))},children:(N,B)=>{F();var O=Y("FROM");l(N,O)},$$slots:{default:!0}});var $=i(y,2);ve($,{type:"datetime-local",step:"60",width:"17rem",max:"2099-01-01T00:00",get value(){return e(h)},set value(N){s(h,o(N))},children:(N,B)=>{F();var O=Y("UNTIL");l(N,O)},$$slots:{default:!0}}),c(g);var _=i(g,2),x=d(_);oe(x,"margin","0 5.5rem 0 .25rem");var b=d(x);St(b,{options:fa,get value(){return e(m)},set value(N){s(m,o(N))}}),c(x);var C=i(x,2);He(C,{get selected(){return e(u)},set selected(N){s(u,o(N))}});var L=i(C,2);{var D=N=>{St(N,{options:Za,get value(){return e(E)},set value(B){s(E,o(B))}})};M(L,N=>{e(u)&&N(D)})}c(_);var R=i(_,2);{var j=N=>{var B=Fu();l(N,B)},K=N=>{var B=pe(),O=ee(B);We(O,19,()=>e(n),P=>P.id,(P,W,X)=>{bs(P,{collapsed:!1,wide:!0,get event(){return e(n)[e(X)]},set event(q){e(n)[e(X)]=q}})}),l(N,B)};M(R,N=>{e(n).length===0?N(j):N(K,!1)})}c(f),l(p,f),ne()}var Yu=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"></path></svg>');function Vu(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Yu();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Ju=Ye(`<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0
            0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>`);function Qu(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Ju();le(r,"stroke-width",2),U(()=>{le(r,"width",n()),le(r,"opacity",t())}),l(p,r)}var Zu=T(`<div class="desc svelte-i817w5"><h4 class="svelte-i817w5">ID token claim mappings</h4> <p class="svelte-i817w5">Values from the ID token after a successful upstream login can be mapped automatically.</p> <p class="svelte-i817w5">The <code class="svelte-i817w5">path</code> needs to be given in a regex like syntax. It can resolve to
        single JSON values or resolve to a value in a JSON object or array.</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.</code> marks the start of the JSON object</p> <p class="svelte-i817w5"><code class="svelte-i817w5">*</code> can be used as a wildcard in your path</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles</code> would target <code class="svelte-i817w5">&#123;"roles": "value"&#125;</code></p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles.*</code> can target a value inside an object or array like<br> <code class="svelte-i817w5">&#123;"roles": ["value", "notMyValue"]&#125;</code></p></div>`);function ks(p){var a=Zu();l(p,a)}var Xu=T('<div class="err font-label svelte-w61ts0"> </div>'),eh=T('<div class="container svelte-w61ts0"><div class="label svelte-w61ts0"><div class="labelInner font-label noselect svelte-w61ts0"><label><!></label></div></div> <textarea></textarea> <!></div>');function Aa(p,a){ie(a,!0);let t=z(a,"rows",3,10),n=z(a,"cols",3,10),r=z(a,"name",19,zt),h=z(a,"disabled",3,!1),m=z(a,"error",3,""),u=z(a,"value",15),E=z(a,"width",3,"32rem"),S=z(a,"fixed",3,!0),v=Ut(a,["$$slots","$$events","$$legacy","rows","cols","name","disabled","error","value","width","fixed","children"]);const w=Xt();async function f(R){await Yt(),u(R.target.value),w("input",u())}function A(){w("focus",!0)}function k(){w("blur",!0)}var g=eh(),y=d(g),$=d(y),_=d($),x=d(_);gt(x,()=>a.children??mt),c(_),c($),c(y);var b=i(y,2);$a(b);let C;var L=i(b,2);{var D=R=>{var j=Xu(),K=d(j,!0);c(j),U(()=>{oe(j,"width",E()),V(K,m())}),de(7,j,()=>we,()=>({duration:250})),l(R,j)};M(L,R=>{m()&&R(D)})}c(g),U(()=>{oe(g,"width",`calc(${E()??""} + 12px)`),oe($,"background",h()?"var(--col-gmid)":"var(--col-bg)"),le(_,"for",r()),C=sa(b,C,{name:r(),disabled:h(),value:u(),rows:t(),cols:n(),...v,oninput:f,onfocus:A,onblur:k},"svelte-w61ts0"),oe(b,"resize",S()?"none":""),oe(b,"width",E())}),l(p,g),ne()}var th=T('<div class="header font-label svelte-1m46su9">ADD NEW AUTHENTICATION PROVIDER</div>'),ah=T('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),sh=T('<div class="header svelte-1m46su9">Custom Root CA PEM</div> <div class="ml mb svelte-1m46su9"><!></div> <!>',1),rh=T("<!> <!>",1),lh=T("<!> <!>",1),ih=T('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),nh=T(`<!> <!> <!> <!> <!> <div class="header svelte-1m46su9">Use PKCE</div> <div class="ml svelte-1m46su9"><!></div> <div class="desc svelte-1m46su9">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-1m46su9">Client name for the Rauthy login form</div> <!> <div class="desc svelte-1m46su9">Client ID given by the auth provider</div> <!> <div class="desc svelte-1m46su9">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
                        In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-1m46su9"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-1m46su9"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">If your provider issues a claim indicating that the user has used at least 2FA during
                        login, you can specify the mfa claim path.</p></div> <!> <!> <!> <!>`,1),oh=T('<div class="success svelte-1m46su9">Success</div>'),vh=T('<div class="err svelte-1m46su9"> </div>'),ch=T('<div class="container svelte-1m46su9"><div class="header svelte-1m46su9">Type</div> <div class="ml mb svelte-1m46su9"><!></div> <!> <!> <!> <!></div>');function dh(p,a){ie(a,!0);let t=z(a,"idx",31,()=>-1);const n="25rem";let r=I(!1),h=I(!1),m=I(""),u=I(!1),E=I(!1),S=I(void 0),v=I(!1),w=I(o({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),f=I(o({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),A=["OIDC","Auto","Custom","Github","Google"],k=I(o(A[0])),g=I(o({}));const y=Qe().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),authorization_endpoint:he().url().required("Required"),token_endpoint:he().url().required("Required"),userinfo_endpoint:he().url().required("Required"),name:he().trim().matches(aa,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128").required("Required"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Xa,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128").required("Required"),root_pem:he().trim().nullable().matches(ga,"Invalid PEM certificate"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")}),$=Qe().shape({issuer:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),metadata_url:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),root_pem:he().trim().nullable().matches(ga,"Valid PEM certificate")});Le(()=>()=>{s(r,!1),clearTimeout(e(S))});async function _(){if(!await C())return;if(!e(f).use_pkce&&!e(f).client_secret){s(m,"Must at least be a confidential client or use PKCE");return}s(m,""),s(h,!0),e(f).root_pem&&(e(f).danger_allow_insecure=!1,e(f).root_pem=e(f).root_pem.trim()),e(D)?e(f).typ="custom":e(f).typ=e(k).toLowerCase(),e(f).scope=e(f).scope.trim();let N=await Xr(e(f));if(N.ok)s(E,!0);else{let B=await N.json();B.message.includes("InvalidCertificate")?s(m,"Insecure connection not allowed"):s(m,o(B.message))}s(h,!1)}async function x(){if(!await L()){s(m,"Invalid input");return}s(m,""),s(h,!0);let N=await rl(e(w));if(N.ok){const B=await N.json();e(f).issuer=B.issuer,e(f).authorization_endpoint=B.authorization_endpoint,e(f).danger_allow_insecure=B.danger_allow_insecure,e(f).token_endpoint=B.token_endpoint,e(f).userinfo_endpoint=B.userinfo_endpoint,e(f).token_auth_method_basic=B.token_auth_method_basic,e(f).use_pkce=B.use_pkce,e(f).client_secret_basic=B.client_secret_basic,e(f).client_secret_post=!B.client_secret_basic&&B.client_secret_post,e(f).scope=B.scope,e(f).root_pem=B.root_pem,s(u,!0)}else{let B=await N.json();B.message.includes("InvalidCertificate")?s(m,"Insecure connection not allowed"):s(m,o(B.message))}s(h,!1)}function b(){s(w,o({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),s(f,o({enabled:!0,issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),s(u,!1),s(v,!1)}async function C(){s(g,o({}));try{return await y.validate(e(f),{abortEarly:!1}),e(f).client_secret&&!(e(f).client_secret_basic||e(f).client_secret_post)?(s(m,"You have given a client secret, but no client auth method is active"),!1):(s(m,"Invalid input"),!0)}catch(N){return s(g,o(Je(N))),N="Invalid input",!1}}async function L(){s(g,o({}));try{return await $.validate(e(w),{abortEarly:!1}),!e(w).issuer&&!e(w).metadata_url?(e(g).issuer="Required",e(g).metadata_url=e(g).issuer,!1):!0}catch(N){return s(g,o(Je(N))),!1}}let D=Ge(()=>e(k)===A[1]),R=Ge(()=>e(k)===A[2]),j=Ge(()=>e(k)===A[0]),K=Ge(()=>!e(D)&&!e(R)&&!e(j));Se(()=>{if(e(k))switch(s(u,!1),s(g,o({})),s(w,o({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),e(k)){case"Github":s(f,o({enabled:!0,issuer:"github.com",danger_allow_insecure:!1,authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",token_auth_method_basic:!1,userinfo_endpoint:"https://api.github.com/user",use_pkce:!1,name:"Github",client_id:"",client_secret:"",scope:"user:email",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:"$.two_factor_authentication",mfa_claim_value:"true"}));break;case"Google":s(w,o({issuer:"accounts.google.com",metadata_url:null,danger_allow_insecure:!1,root_pem:null})),x();break;default:s(f,o({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null}))}}),Se(()=>{e(E)&&s(S,o(setTimeout(()=>{a.onSave(),s(E,!1),s(r,!1),b()},1500)))}),vt(p,{get idx(){return t()},set idx(N){t(N)},get show(){return e(r)},set show(N){s(r,o(N))},header:N=>{var B=th();l(N,B)},body:N=>{var B=ch(),O=i(d(B),2),P=d(O);St(P,{options:A,get value(){return e(k)},set value(_e){s(k,o(_e))}}),c(O);var W=i(O,2);{var X=_e=>{var me=sh(),Me=i(ee(me),2),ge=d(Me);He(ge,{get selected(){return e(v)},set selected(ze){s(v,o(ze))}}),c(Me);var ue=i(Me,2);{var ye=ze=>{Aa(ze,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(g).root_pem},get value(){return e(w).root_pem},set value(Ce){e(w).root_pem=Ce},children:(Ce,xe)=>{F();var Re=Y("Root Certificate in PEM format");l(Ce,Re)},$$slots:{default:!0}})},be=ze=>{var Ce=ah(),xe=i(ee(Ce),2),Re=d(xe);He(Re,{get selected(){return e(w).danger_allow_insecure},set selected(J){e(w).danger_allow_insecure=J}}),c(xe),l(ze,Ce)};M(ue,ze=>{e(v)?ze(ye):ze(be,!1)})}l(_e,me)};M(W,_e=>{e(u)||_e(X)})}var q=i(W,2);{var H=_e=>{var me=rh(),Me=ee(me);ve(Me,{type:"url",name:"issuer",placeholder:"Issuer URL",width:n,get value(){return e(w).issuer},set value(ue){e(w).issuer=ue},get error(){return e(g).issuer},set error(ue){e(g).issuer=ue},$$events:{input:L,enter:x},children:(ue,ye)=>{F();var be=Y("ISSUER URL");l(ue,be)},$$slots:{default:!0}});var ge=i(Me,2);Te(ge,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(ue){s(h,o(ue))},$$events:{click:x},children:(ue,ye)=>{F();var be=Y("LOOKUP");l(ue,be)},$$slots:{default:!0}}),l(_e,me)},G=_e=>{var me=pe(),Me=ee(me);{var ge=ye=>{var be=lh(),ze=ee(be);ve(ze,{type:"url",name:"metadata",placeholder:".../.well-known/openid-configuration",width:n,get value(){return e(w).metadata_url},set value(xe){e(w).metadata_url=xe},get error(){return e(g).metadata_url},set error(xe){e(g).metadata_url=xe},$$events:{input:L,enter:x},children:(xe,Re)=>{F();var J=Y("METADATA URL");l(xe,J)},$$slots:{default:!0}});var Ce=i(ze,2);Te(Ce,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(xe){s(h,o(xe))},$$events:{click:x},children:(xe,Re)=>{F();var J=Y("LOOKUP");l(xe,J)},$$slots:{default:!0}}),l(ye,be)},ue=ye=>{var be=pe(),ze=ee(be);{var Ce=xe=>{var Re=nh(),J=ee(Re);{var Ie=ae=>{Aa(ae,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(g).root_pem},get disabled(){return e(u)},get value(){return e(f).root_pem},set value(Ke){e(f).root_pem=Ke},children:(Ke,Pe)=>{F();var qt=Y("Root Certificate in PEM format");l(Ke,qt)},$$slots:{default:!0}})},fe=ae=>{var Ke=ih(),Pe=i(ee(Ke),2),qt=d(Pe);{var Zt=Mt=>{la(Mt,{get check(){return e(f).danger_allow_insecure}})},Bt=Mt=>{He(Mt,{get selected(){return e(f).danger_allow_insecure},set selected(Ht){e(f).danger_allow_insecure=Ht}})};M(qt,Mt=>{e(u)?Mt(Zt):Mt(Bt,!1)})}c(Pe),l(ae,Ke)};M(J,ae=>{e(v)?ae(Ie):ae(fe,!1)})}var qe=i(J,2);ve(qe,{type:"url",name:"issuer",placeholder:"Issuer URL",width:n,get disabled(){return e(u)},get value(){return e(f).issuer},set value(ae){e(f).issuer=ae},get error(){return e(g).issuer},set error(ae){e(g).issuer=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Pe=Y("ISSUER URL");l(ae,Pe)},$$slots:{default:!0}});var Ve=i(qe,2);ve(Ve,{type:"url",name:"auth_endpoint",placeholder:"Authorization Endpoint",width:n,get disabled(){return e(u)},get value(){return e(f).authorization_endpoint},set value(ae){e(f).authorization_endpoint=ae},get error(){return e(g).authorization_endpoint},set error(ae){e(g).authorization_endpoint=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Pe=Y("AUTHORIZATION ENDPOINT");l(ae,Pe)},$$slots:{default:!0}});var lt=i(Ve,2);ve(lt,{type:"url",name:"token_endpoint",placeholder:"Token Endpoint",width:n,get disabled(){return e(u)},get value(){return e(f).token_endpoint},set value(ae){e(f).token_endpoint=ae},get error(){return e(g).token_endpoint},set error(ae){e(g).token_endpoint=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Pe=Y("TOKEN ENDPOINT");l(ae,Pe)},$$slots:{default:!0}});var ct=i(lt,2);ve(ct,{type:"url",name:"userinfo_endpoint",placeholder:"Userinfo Endpoint",width:n,get disabled(){return e(u)},get value(){return e(f).userinfo_endpoint},set value(ae){e(f).userinfo_endpoint=ae},get error(){return e(g).userinfo_endpoint},set error(ae){e(g).userinfo_endpoint=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Pe=Y("USERINFO ENDPOINT");l(ae,Pe)},$$slots:{default:!0}});var Ue=i(ct,4),Fe=d(Ue);{var ot=ae=>{la(ae,{get check(){return e(f).use_pkce}})},It=ae=>{He(ae,{get selected(){return e(f).use_pkce},set selected(Ke){e(f).use_pkce=Ke}})};M(Fe,ae=>{e(u)?ae(ot):ae(It,!1)})}c(Ue);var xt=i(Ue,4);ve(xt,{name:"scope",placeholder:"openid profile email",width:n,get value(){return e(f).scope},set value(ae){e(f).scope=ae},get error(){return e(g).scope},set error(ae){e(g).scope=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("SCOPE");l(ae,Pe)},$$slots:{default:!0}});var Xe=i(xt,4);ve(Xe,{name:"client_name",placeholder:"Client Name",width:n,get value(){return e(f).name},set value(ae){e(f).name=ae},get error(){return e(g).name},set error(ae){e(g).name=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("CLIENT NAME");l(ae,Pe)},$$slots:{default:!0}});var et=i(Xe,4);ve(et,{name:"client_id",autocomplete:"off",placeholder:"Client ID",width:n,get value(){return e(f).client_id},set value(ae){e(f).client_id=ae},get error(){return e(g).client_id},set error(ae){e(g).client_id=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("CLIENT ID");l(ae,Pe)},$$slots:{default:!0}});var yt=i(et,4);Gt(yt,{name:"client_secret",get error(){return e(g).client_secret},autocomplete:"off",placeholder:"Client Secret",width:n,get value(){return e(f).client_secret},set value(ae){e(f).client_secret=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("CLIENT SECRET");l(ae,Pe)},$$slots:{default:!0}});var pt=i(yt,4),Ct=i(d(pt),2);He(Ct,{get selected(){return e(f).client_secret_basic},set selected(ae){e(f).client_secret_basic=ae}}),c(pt);var st=i(pt,2),rt=i(d(st),2);He(rt,{get selected(){return e(f).client_secret_post},set selected(ae){e(f).client_secret_post=ae}}),c(st);var se=i(st,2);ks(se);var Ae=i(se,4);ve(Ae,{name:"admin_claim_path",placeholder:"$.roles.*",width:n,get value(){return e(f).admin_claim_path},set value(ae){e(f).admin_claim_path=ae},get error(){return e(g).admin_claim_path},set error(ae){e(g).admin_claim_path=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("ADMIN CLAIM PATH");l(ae,Pe)},$$slots:{default:!0}});var Oe=i(Ae,2);ve(Oe,{name:"admin_claim_value",placeholder:"rauthy_admin",width:n,get value(){return e(f).admin_claim_value},set value(ae){e(f).admin_claim_value=ae},get error(){return e(g).admin_claim_value},set error(ae){e(g).admin_claim_value=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("ADMIN CLAIM VALUE");l(ae,Pe)},$$slots:{default:!0}});var Q=i(Oe,4);ve(Q,{name:"mfa_claim_path",placeholder:"$.amr.*",width:n,get value(){return e(f).mfa_claim_path},set value(ae){e(f).mfa_claim_path=ae},get error(){return e(g).mfa_claim_path},set error(ae){e(g).mfa_claim_path=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("MFA CLAIM PATH");l(ae,Pe)},$$slots:{default:!0}});var Ee=i(Q,2);ve(Ee,{name:"mfa_claim_value",placeholder:"mfa",width:n,get value(){return e(f).mfa_claim_value},set value(ae){e(f).mfa_claim_value=ae},get error(){return e(g).mfa_claim_value},set error(ae){e(g).mfa_claim_value=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Pe=Y("MFA CLAIM VALUE");l(ae,Pe)},$$slots:{default:!0}});var je=i(Ee,2);Te(je,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(ae){s(h,o(ae))},$$events:{click:_},children:(ae,Ke)=>{F();var Pe=Y("SAVE");l(ae,Pe)},$$slots:{default:!0}});var At=i(je,2);Te(At,{level:4,width:"6rem",get isLoading(){return e(h)},set isLoading(ae){s(h,o(ae))},$$events:{click:b},children:(ae,Ke)=>{F();var Pe=Y("RESET");l(ae,Pe)},$$slots:{default:!0}}),l(xe,Re)};M(ze,xe=>{(e(K)||e(R)||e(u))&&xe(Ce)},!0)}l(ye,be)};M(Me,ye=>{e(D)&&!e(u)?ye(ge):ye(ue,!1)},!0)}l(_e,me)};M(q,_e=>{e(j)&&!e(u)?_e(H):_e(G,!1)})}var Z=i(q,2);{var re=_e=>{var me=oh();l(_e,me)};M(Z,_e=>{e(E)&&_e(re)})}var ce=i(Z,2);{var $e=_e=>{var me=vh(),Me=d(me,!0);c(me),U(()=>V(Me,e(m))),l(_e,me)};M(ce,_e=>{e(m)&&_e($e)})}c(B),l(N,B)},$$slots:{header:!0,body:!0}}),ne()}var uh=T('<img alt="No Logo Available">');function hh(p,a){ie(a,!0);var t=uh();U(()=>le(t,"src",`/auth/v1/providers/${a.providerId}/img?${zt(6)}`)),le(t,"width",20),le(t,"height",20),l(p,t),ne()}var ph=T('<div class="header svelte-19hes5">Allow insecure TLS certificates</div> <div class="ml mb svelte-19hes5"><!></div>',1),mh=T('<div class="success svelte-19hes5">Success</div>'),fh=T('<div class="mainErr err svelte-19hes5"> </div>'),gh=T("<!> <!> <!>",1),wh=T(`<div class="container svelte-19hes5"><div class="unit svelte-19hes5"><div class="label font-label svelte-19hes5">ID</div> <div class="value font-mono svelte-19hes5"> </div></div> <div class="separator"></div> <div class="header svelte-19hes5">Enabled</div> <div class="ml mb svelte-19hes5"><!></div> <div class="header svelte-19hes5">Custom Root CA PEM</div> <div class="ml mb svelte-19hes5"><!></div> <!> <!> <!> <!> <!> <div class="header svelte-19hes5">Use PKCE</div> <div class="ml mb svelte-19hes5"><!></div> <div class="desc svelte-19hes5">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-19hes5">Client name for the Rauthy login form</div> <!> <div class="desc svelte-19hes5">Client ID given by the auth provider</div> <!> <div class="desc svelte-19hes5">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
            In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-19hes5"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-19hes5"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">If your provider issues a claim indicating that the user has used at least 2FA during
            login, you can specify the mfa claim path.</p></div> <!> <!> <div class="logo svelte-19hes5"><!> <!></div> <!></div>`);function yh(p,a){ie(a,!0);let t=z(a,"provider",31,()=>o({}));const n="25rem";let r=I(!1),h=I(""),m=I(!1),u=I(void 0),E=I(o(t().root_pem)),S=I(void 0);Le(()=>()=>clearTimeout(e(u)));let v=I(o({}));const w=Qe().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),authorization_endpoint:he().url(),token_endpoint:he().url(),userinfo_endpoint:he().url(),name:he().trim().matches(aa,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Xa,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")});async function f(){if(e(E)||t(t().root_pem=void 0,!0),!await k())return;if(!t().use_pkce&&!t().client_secret){s(h,"Must at least be a confidential client or use PKCE");return}s(h,""),s(r,!0),t().root_pem?(t(t().danger_allow_insecure=!1,!0),t(t().root_pem=t().root_pem.trim(),!0)):t(t().root_pem=void 0,!0);let J=await el(t().id,t());if(J.ok)s(m,!0);else{let Ie=await J.json();s(h,o(Ie.message))}s(r,!1)}async function A(J){s(r,!0);let Ie=await sl(t().id,J);if(!Ie.ok){let fe=await Ie.json();console.error(fe.message)}s(r,!1)}async function k(){s(v,o({}));try{return await w.validate(t(),{abortEarly:!1}),t().client_secret&&!(t().client_secret_basic||t().client_secret_post)?(s(h,"You have given a client secret, but no client auth method is active"),!1):(t().root_pem&&t().root_pem.length>0?ga.test(t().root_pem.trim())||(e(v).root_pem="Invalid PEM certificate"):s(h,"Invalid input"),!0)}catch(J){return s(v,o(Je(J))),!1}}Se(()=>{e(m)&&s(u,o(setTimeout(()=>{s(m,!1),a.onSave()},2e3)))}),Se(()=>{t().scope&&t(t().scope=t().scope.replaceAll("+"," "),!0)}),Se(()=>{e(S)&&A(e(S))});var g=wh(),y=d(g),$=i(d(y),2),_=d($,!0);c($),c(y);var x=i(y,6),b=d(x);He(b,{get selected(){return t().enabled},set selected(J){t(t().enabled=J,!0)}}),c(x);var C=i(x,4),L=d(C);He(L,{get selected(){return e(E)},set selected(J){s(E,o(J))}}),c(C);var D=i(C,2);{var R=J=>{Aa(J,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----`,get error(){return e(v).root_pem},get value(){return t().root_pem},set value(Ie){t(t().root_pem=Ie,!0)},children:(Ie,fe)=>{F();var qe=Y("Root Certificate in PEM format");l(Ie,qe)},$$slots:{default:!0}})},j=J=>{var Ie=ph(),fe=i(ee(Ie),2),qe=d(fe);He(qe,{get selected(){return t().danger_allow_insecure},set selected(Ve){t(t().danger_allow_insecure=Ve,!0)}}),c(fe),l(J,Ie)};M(D,J=>{e(E)?J(R):J(j,!1)})}var K=i(D,2);ve(K,{autocomplete:"off",placeholder:"Issuer URL",width:n,get value(){return t().issuer},set value(J){t(t().issuer=J,!0)},get error(){return e(v).issuer},set error(J){e(v).issuer=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("ISSUER URL");l(J,fe)},$$slots:{default:!0}});var N=i(K,2);ve(N,{autocomplete:"off",placeholder:"Authorization Endpoint",width:n,get value(){return t().authorization_endpoint},set value(J){t(t().authorization_endpoint=J,!0)},get error(){return e(v).authorization_endpoint},set error(J){e(v).authorization_endpoint=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("AUTHORIZATION ENDPOINT");l(J,fe)},$$slots:{default:!0}});var B=i(N,2);ve(B,{autocomplete:"off",placeholder:"Token Endpoint",width:n,get value(){return t().token_endpoint},set value(J){t(t().token_endpoint=J,!0)},get error(){return e(v).token_endpoint},set error(J){e(v).token_endpoint=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("TOKEN ENDPOINT");l(J,fe)},$$slots:{default:!0}});var O=i(B,2);ve(O,{autocomplete:"off",placeholder:"Userinfo Endpoint",width:n,get value(){return t().userinfo_endpoint},set value(J){t(t().userinfo_endpoint=J,!0)},get error(){return e(v).userinfo_endpoint},set error(J){e(v).userinfo_endpoint=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("USERINFO ENDPOINT");l(J,fe)},$$slots:{default:!0}});var P=i(O,4),W=d(P);He(W,{get selected(){return t().use_pkce},set selected(J){t(t().use_pkce=J,!0)}}),c(P);var X=i(P,4);ve(X,{autocomplete:"off",placeholder:"openid profile email",width:n,get value(){return t().scope},set value(J){t(t().scope=J,!0)},get error(){return e(v).scope},set error(J){e(v).scope=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("SCOPE");l(J,fe)},$$slots:{default:!0}});var q=i(X,4);ve(q,{autocomplete:"off",placeholder:"Client Name",width:n,get value(){return t().name},set value(J){t(t().name=J,!0)},get error(){return e(v).name},set error(J){e(v).name=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("CLIENT NAME");l(J,fe)},$$slots:{default:!0}});var H=i(q,4);ve(H,{autocomplete:"off",placeholder:"Client ID",width:n,get value(){return t().client_id},set value(J){t(t().client_id=J,!0)},get error(){return e(v).client_id},set error(J){e(v).client_id=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("CLIENT ID");l(J,fe)},$$slots:{default:!0}});var G=i(H,4);Gt(G,{get error(){return e(v).client_secret},autocomplete:"off",placeholder:"Client Secret",width:n,get value(){return t().client_secret},set value(J){t(t().client_secret=J,!0)},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("CLIENT SECRET");l(J,fe)},$$slots:{default:!0}});var Z=i(G,4),re=i(d(Z),2);He(re,{get selected(){return t().client_secret_basic},set selected(J){t(t().client_secret_basic=J,!0)}}),c(Z);var ce=i(Z,2),$e=i(d(ce),2);He($e,{get selected(){return t().client_secret_post},set selected(J){t(t().client_secret_post=J,!0)}}),c(ce);var _e=i(ce,2);ks(_e);var me=i(_e,4);ve(me,{autocomplete:"off",placeholder:"$.roles.*",width:n,get value(){return t().admin_claim_path},set value(J){t(t().admin_claim_path=J,!0)},get error(){return e(v).admin_claim_path},set error(J){e(v).admin_claim_path=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("ADMIN CLAIM PATH");l(J,fe)},$$slots:{default:!0}});var Me=i(me,2);ve(Me,{autocomplete:"off",placeholder:"rauthy_admin",width:n,get value(){return t().admin_claim_value},set value(J){t(t().admin_claim_value=J,!0)},get error(){return e(v).admin_claim_value},set error(J){e(v).admin_claim_value=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("ADMIN CLAIM VALUE");l(J,fe)},$$slots:{default:!0}});var ge=i(Me,4);ve(ge,{autocomplete:"off",placeholder:"$.amr.*",width:n,get value(){return t().mfa_claim_path},set value(J){t(t().mfa_claim_path=J,!0)},get error(){return e(v).mfa_claim_path},set error(J){e(v).mfa_claim_path=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("MFA CLAIM PATH");l(J,fe)},$$slots:{default:!0}});var ue=i(ge,2);ve(ue,{autocomplete:"off",placeholder:"mfa",width:n,get value(){return t().mfa_claim_value},set value(J){t(t().mfa_claim_value=J,!0)},get error(){return e(v).mfa_claim_value},set error(J){e(v).mfa_claim_value=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("MFA CLAIM VALUE");l(J,fe)},$$slots:{default:!0}});var ye=i(ue,2),be=d(ye);gs(be,{get image(){return e(S)},set image(J){s(S,o(J))}});var ze=i(be,2);{var Ce=J=>{hh(J,{get providerId(){return t().id}})};M(ze,J=>{e(r)||J(Ce)})}c(ye);var xe=i(ye,2);{var Re=J=>{var Ie=gh(),fe=ee(Ie);Te(fe,{level:1,width:"4rem",get isLoading(){return e(r)},set isLoading(Ue){s(r,o(Ue))},$$events:{click:f},children:(Ue,Fe)=>{F();var ot=Y("SAVE");l(Ue,ot)},$$slots:{default:!0}});var qe=i(fe,2);{var Ve=Ue=>{var Fe=mh();l(Ue,Fe)};M(qe,Ue=>{e(m)&&Ue(Ve)})}var lt=i(qe,2);{var ct=Ue=>{var Fe=fh(),ot=d(Fe,!0);c(Fe),U(()=>V(ot,e(h))),l(Ue,Fe)};M(lt,Ue=>{e(h)&&Ue(ct)})}l(J,Ie)};M(xe,J=>{J(Re)})}c(g),U(()=>V(_,t().id)),l(p,g),ne()}var bh=T("<p> </p>"),$h=T(`<div class="label svelte-1tncxap"><p>This provider is in use by active users.</p> <p>You can force delete it, but users without a local password or passkey
                will not be able to log in anymore.</p> <details><summary>Linked Users</summary> <!></details></div> <div class="label svelte-1tncxap"><p>Are you sure you want to delete this provider?</p> <div class="forceDelete svelte-1tncxap">FORCE DELETE <!></div></div> <!>`,1),_h=T('<div class="label svelte-1tncxap">Are you sure, you want to delete this provider?</div> <!>',1),kh=T('<div class="err svelte-1tncxap"> </div>'),xh=T('<div class="container svelte-1tncxap"><!> <!></div>');function Eh(p,a){ie(a,!0);let t=z(a,"provider",19,()=>({})),n=I(!0),r=I(""),h=I(!1),m=I(o([]));Le(async()=>{let k=await al(t().id),g=await k.json();k.status===406?s(m,o(g)):s(r,o(g.message)),s(n,!1)});async function u(){s(r,""),s(n,!0);let k=await tl(t().id);if(k.ok)a.onSave();else{let g=await k.json();s(r,o(g.message))}s(n,!1)}var E=xh(),S=d(E);{var v=k=>{var g=$h(),y=ee(g),$=i(d(y),4),_=i(d($),2);We(_,17,()=>e(m),R=>R.id,(R,j)=>{var K=bh(),N=d(K);c(K),U(()=>V(N,`${e(j).id??""} ${e(j).email??""}`)),l(R,K)}),c($),c(y);var x=i(y,2),b=i(d(x),2),C=i(d(b));He(C,{get selected(){return e(h)},set selected(R){s(h,o(R))}}),c(b),c(x);var L=i(x,2);{var D=R=>{Te(R,{level:1,get isLoading(){return e(n)},set isLoading(j){s(n,o(j))},$$events:{click:u},children:(j,K)=>{F();var N=Y("DELETE");l(j,N)},$$slots:{default:!0}})};M(L,R=>{e(h)&&R(D)})}l(k,g)},w=k=>{var g=_h(),y=i(ee(g),2);Te(y,{level:1,get isLoading(){return e(n)},set isLoading($){s(n,o($))},$$events:{click:u},children:($,_)=>{F();var x=Y("DELETE");l($,x)},$$slots:{default:!0}}),l(k,g)};M(S,k=>{e(m).length>0?k(v):k(w,!1)})}var f=i(S,2);{var A=k=>{var g=kh(),y=d(g,!0);c(g),U(()=>V(y,e(r))),l(k,g)};M(f,k=>{e(r)&&k(A)})}c(E),l(p,E),ne()}var Sh=T('<div class="data font-mono svelte-115hohv"> </div>'),Ih=T('<div class="data svelte-115hohv"> </div>'),Th=T('<div class="header svelte-115hohv"><!> <!></div>'),Ch=T("<div><!></div>"),Ah=T("<div><!></div>"),Lh=T("<div><!> <!></div>");function jh(p,a){ie(a,!0);let t=z(a,"provider",31,()=>o({})),n=z(a,"onSave",15),r=I(void 0);const h=["Config","Delete"];let m=I(o(h[0]));const u=200,E=u/2;vt(p,{get show(){return e(r)},set show(S){s(r,o(S))},header:S=>{var v=Th(),w=d(v);Ze(w,{text:"Provider ID",children:(A,k)=>{var g=Sh(),y=d(g,!0);c(g),U(()=>V(y,t().id)),l(A,g)},$$slots:{default:!0}});var f=i(w,2);Ze(f,{text:"Provider Name",children:(A,k)=>{var g=Ih(),y=d(g,!0);c(g),U(()=>V(y,t().name)),l(A,g)},$$slots:{default:!0}}),c(v),l(S,v)},body:S=>{var v=Lh(),w=d(v);Dt(w,{labels:h,get selected(){return e(m)},set selected(g){s(m,o(g))}});var f=i(w,2);{var A=g=>{var y=Ch(),$=d(y);yh($,{get provider(){return t()},set provider(_){t(_)},get onSave(){return n()},set onSave(_){n(_)}}),c(y),de(1,y,()=>we,()=>({delay:E,duration:u})),de(2,y,()=>we,()=>({duration:u})),l(g,y)},k=g=>{var y=pe(),$=ee(y);{var _=x=>{var b=Ah(),C=d(b);Eh(C,{get provider(){return t()},set provider(L){t(L)},get onSave(){return n()},set onSave(L){n(L)}}),c(b),de(1,b,()=>we,()=>({delay:E,duration:u})),de(2,b,()=>we,()=>({duration:u})),l(x,b)};M($,x=>{e(m)==="Delete"&&x(_)},!0)}l(g,y)};M(f,g=>{e(m)==="Config"?g(A):g(k,!1)})}c(v),l(S,v)},$$slots:{header:!0,body:!0}}),ne()}var Rh=T('<div class="svelte-4dnryh"><!></div>'),Dh=T(' <div class="content"><!> <div id="federation" class="svelte-4dnryh"></div> <div style="height: 20px"></div></div>',1);function Nh(p,a){ie(a,!0);let t=I(""),n=I(o([]));Le(()=>{r()});async function r(){let w=await Zr(),f=await w.json();w.ok?s(n,o([...f])):s(t,o(f.message))}function h(){r()}F();var m=Dh(),u=ee(m),E=i(u),S=d(E);dh(S,{onSave:h});var v=i(S,2);We(v,23,()=>e(n),w=>w.id,(w,f,A)=>{var k=Rh(),g=d(k);jh(g,{onSave:h,get provider(){return e(n)[e(A)]},set provider(y){e(n)[e(A)]=y}}),c(k),l(w,k)}),c(v),F(2),c(E),U(()=>V(u,`${e(t)??""} `)),l(p,m),ne()}var Mh=T("<div><div><!></div></div>"),zh=T("<div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>"),Oh=T('<main class="svelte-1a52j8o"><!> <div class="inner svelte-1a52j8o"><!> <!></div></main>');function Ph(p,a){ie(a,!0);let t=z(a,"selected",15,"Users"),n=I("Rauthy Admin"),r=I(!0),h=I(!0),m=I(!1),u=I(void 0);Se(()=>{e(u)&&(s(r,e(u)>1050),s(h,e(u)<1050),s(m,e(u)>1450))}),Se(()=>{if(t())switch(t()){case"Users":{window.history.pushState("Users","","/auth/v1/admin/users"),s(n,"Users");break}case"Attributes":{window.history.pushState("Attributes","","/auth/v1/admin/attributes"),s(n,"Attributes");break}case"Clients":{window.history.pushState("Clients","","/auth/v1/admin/clients"),s(n,"Clients");break}case"Roles":{window.history.pushState("Roles","","/auth/v1/admin/roles"),s(n,"Roles");break}case"Groups":{window.history.pushState("Groups","","/auth/v1/admin/groups"),s(n,"Groups");break}case"Scopes":{window.history.pushState("Scopes","","/auth/v1/admin/scopes"),s(n,"Scopes");break}case"Sessions":{window.history.pushState("Sessions","","/auth/v1/admin/sessions"),s(n,"Sessions");break}case"Events":{window.history.pushState("Sessions","","/auth/v1/admin/events"),s(n,"Events");break}case"Blacklist":{window.history.pushState("Blacklist","","/auth/v1/admin/blacklist"),s(n,"Blacklist");break}case"ApiKeys":{window.history.pushState("ApiKeys","","/auth/v1/admin/api_keys"),s(n,"ApiKeys");break}case"Providers":{window.history.pushState("Providers","","/auth/v1/admin/providers"),s(n,"Providers");break}case"Config":{window.history.pushState("Config","","/auth/v1/admin/config"),s(n,"Config");break}case"Docs":{window.history.pushState("Docs","","/auth/v1/admin/docs"),s(n,"Docs");break}case"Logout":Xs();break}}),Le(()=>(window.addEventListener("popstate",S),E(window.innerWidth),()=>window.removeEventListener("popstate",S)));function E(_){s(r,_>1050),s(h,_<1050),s(m,_>1450)}function S(_){t(_.state)}var v=Oh();Ua(_=>{U(()=>qa.title=e(n))});var w=d(v);Ir(w,{widthExpanded:150,widthCollapsed:70,get selected(){return t()},set selected(_){t(_)},get isExpanded(){return e(r)},set isExpanded(_){s(r,o(_))},logo:_=>{var x=Mh(),b=d(x),C=d(b);Ld(C),c(b),c(x),U(()=>{oe(b,"width",e(r)?"120px":"55px"),oe(b,"margin-top",e(r)?"32px":"40px"),oe(b,"margin-bottom",e(r)?"13px":"22px")}),l(_,x)},entries:_=>{var x=zh(),b=d(x);wt(b,{label:"Users",children:(H,G)=>{wd(H,{})},$$slots:{default:!0}});var C=i(b,2);wt(C,{label:"Attributes",children:(H,G)=>{xd(H,{})},$$slots:{default:!0}});var L=i(C,2);wt(L,{label:"Clients",children:(H,G)=>{bd(H,{})},$$slots:{default:!0}});var D=i(L,2);wt(D,{label:"Roles",children:(H,G)=>{ys(H,{})},$$slots:{default:!0}});var R=i(D,2);wt(R,{label:"Groups",children:(H,G)=>{_d(H,{})},$$slots:{default:!0}});var j=i(R,2);wt(j,{label:"Scopes",children:(H,G)=>{Cd(H,{})},$$slots:{default:!0}});var K=i(j,2);wt(K,{label:"Sessions",children:(H,G)=>{ys(H,{})},$$slots:{default:!0}});var N=i(K,2);wt(N,{label:"Events",children:(H,G)=>{Vu(H,{})},$$slots:{default:!0}});var B=i(N,2);wt(B,{label:"Blacklist",children:(H,G)=>{ra(H,{width:24,color:"currentColor"})},$$slots:{default:!0}});var O=i(B,2);wt(O,{label:"ApiKeys",children:(H,G)=>{pu(H,{})},$$slots:{default:!0}});var P=i(O,2);wt(P,{label:"Providers",children:(H,G)=>{Qu(H,{})},$$slots:{default:!0}});var W=i(P,2);wt(W,{label:"Config",children:(H,G)=>{fd(H,{})},$$slots:{default:!0}});var X=i(W,2);wt(X,{label:"Docs",children:(H,G)=>{Nd(H,{})},$$slots:{default:!0}});var q=i(X,2);wt(q,{label:"Logout",children:(H,G)=>{Id(H,{})},$$slots:{default:!0}}),c(x),l(_,x)},$$slots:{logo:!0,entries:!0}});var f=i(w,2),A=d(f);{var k=_=>{kt(_,{get eventsWide(){return e(m)},set eventsWide(x){s(m,o(x))},get eventsCollapsed(){return e(h)},set eventsCollapsed(x){s(h,o(x))},children:(x,b)=>{Pn(x,{})},$$slots:{default:!0}})},g=_=>{var x=pe(),b=ee(x);{var C=D=>{kt(D,{get eventsWide(){return e(m)},set eventsWide(R){s(m,o(R))},get eventsCollapsed(){return e(h)},set eventsCollapsed(R){s(h,o(R))},children:(R,j)=>{Uc(R,{})},$$slots:{default:!0}})},L=D=>{var R=pe(),j=ee(R);{var K=B=>{kt(B,{get eventsWide(){return e(m)},set eventsWide(O){s(m,o(O))},get eventsCollapsed(){return e(h)},set eventsCollapsed(O){s(h,o(O))},children:(O,P)=>{dc(O,{})},$$slots:{default:!0}})},N=B=>{var O=pe(),P=ee(O);{var W=q=>{kt(q,{get eventsWide(){return e(m)},set eventsWide(H){s(m,o(H))},get eventsCollapsed(){return e(h)},set eventsCollapsed(H){s(h,o(H))},children:(H,G)=>{co(H,{})},$$slots:{default:!0}})},X=q=>{var H=pe(),G=ee(H);{var Z=ce=>{kt(ce,{get eventsWide(){return e(m)},set eventsWide($e){s(m,o($e))},get eventsCollapsed(){return e(h)},set eventsCollapsed($e){s(h,o($e))},children:($e,_e)=>{Ro($e,{})},$$slots:{default:!0}})},re=ce=>{var $e=pe(),_e=ee($e);{var me=ge=>{kt(ge,{get eventsWide(){return e(m)},set eventsWide(ue){s(m,o(ue))},get eventsCollapsed(){return e(h)},set eventsCollapsed(ue){s(h,o(ue))},children:(ue,ye)=>{iv(ue,{})},$$slots:{default:!0}})},Me=ge=>{var ue=pe(),ye=ee(ue);{var be=Ce=>{kt(Ce,{get eventsWide(){return e(m)},set eventsWide(xe){s(m,o(xe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(xe){s(h,o(xe))},children:(xe,Re)=>{$c(xe,{})},$$slots:{default:!0}})},ze=Ce=>{var xe=pe(),Re=ee(xe);{var J=fe=>{kt(fe,{get eventsWide(){return e(m)},set eventsWide(qe){s(m,o(qe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(qe){s(h,o(qe))},children:(qe,Ve)=>{Hu(qe,{})},$$slots:{default:!0}})},Ie=fe=>{var qe=pe(),Ve=ee(qe);{var lt=Ue=>{kt(Ue,{get eventsWide(){return e(m)},set eventsWide(Fe){s(m,o(Fe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Fe){s(h,o(Fe))},children:(Fe,ot)=>{uu(Fe,{})},$$slots:{default:!0}})},ct=Ue=>{var Fe=pe(),ot=ee(Fe);{var It=Xe=>{kt(Xe,{get eventsWide(){return e(m)},set eventsWide(et){s(m,o(et))},get eventsCollapsed(){return e(h)},set eventsCollapsed(et){s(h,o(et))},children:(et,yt)=>{Gu(et,{})},$$slots:{default:!0}})},xt=Xe=>{var et=pe(),yt=ee(et);{var pt=st=>{kt(st,{get eventsWide(){return e(m)},set eventsWide(rt){s(m,o(rt))},get eventsCollapsed(){return e(h)},set eventsCollapsed(rt){s(h,o(rt))},children:(rt,se)=>{Nh(rt,{})},$$slots:{default:!0}})},Ct=st=>{var rt=pe(),se=ee(rt);{var Ae=Q=>{kt(Q,{get eventsWide(){return e(m)},set eventsWide(Ee){s(m,o(Ee))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ee){s(h,o(Ee))},children:(Ee,je)=>{pd(Ee)},$$slots:{default:!0}})},Oe=Q=>{var Ee=pe(),je=ee(Ee);{var At=ae=>{kt(ae,{get eventsWide(){return e(m)},set eventsWide(Ke){s(m,o(Ke))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ke){s(h,o(Ke))},children:(Ke,Pe)=>{Rd(Ke)},$$slots:{default:!0}})};M(je,ae=>{t()==="Docs"&&ae(At)},!0)}l(Q,Ee)};M(se,Q=>{t()==="Config"?Q(Ae):Q(Oe,!1)},!0)}l(st,rt)};M(yt,st=>{t()==="Providers"?st(pt):st(Ct,!1)},!0)}l(Xe,et)};M(ot,Xe=>{t()==="ApiKeys"?Xe(It):Xe(xt,!1)},!0)}l(Ue,Fe)};M(Ve,Ue=>{t()==="Blacklist"?Ue(lt):Ue(ct,!1)},!0)}l(fe,qe)};M(Re,fe=>{t()==="Events"?fe(J):fe(Ie,!1)},!0)}l(Ce,xe)};M(ye,Ce=>{t()==="Sessions"?Ce(be):Ce(ze,!1)},!0)}l(ge,ue)};M(_e,ge=>{t()==="Scopes"?ge(me):ge(Me,!1)},!0)}l(ce,$e)};M(G,ce=>{t()==="Groups"?ce(Z):ce(re,!1)},!0)}l(q,H)};M(P,q=>{t()==="Roles"?q(W):q(X,!1)},!0)}l(B,O)};M(j,B=>{t()==="Clients"?B(K):B(N,!1)},!0)}l(D,R)};M(b,D=>{t()==="Attributes"?D(C):D(L,!1)},!0)}l(_,x)};M(A,_=>{t()==="Users"?_(k):_(g,!1)})}var y=i(A,2);{var $=_=>{lu(_,{get collapsed(){return e(h)},get wide(){return e(m)}})};M(y,_=>{e(u)!==void 0&&_($)})}c(f),c(v),ir("innerWidth",_=>s(u,o(_))),l(p,v),ne()}var qh=T('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">A rauthy admin account must have <b>MFA enabled.</b><br> Please navigate to your <b>account</b> and activate MFA.<br> Afterwards, you need to do a logout and log back in.</div> <!></div>'),Uh=T('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">You are not assigned to the <b>rauthy_admin</b> role.<br> You do not have access to the admin panel.</div> <!></div>');function Wh(p,a){ie(a,!0);let t=z(a,"selected",15,"Users"),n=I(void 0),r=I(!1),h=I(!1);Le(async()=>{let v=await Os();if(v.ok){let w=await v.json(),f=await Ps();f.ok?(s(n,o(w)),s(r,!0)):f.status===406?(s(h,!0),s(n,o({}))):s(n,o({}))}else Va()});var m=pe();Ua(v=>{qa.title="Admin"});var u=ee(m);{var E=v=>{wa(v,{})},S=v=>{var w=pe(),f=ee(w);{var A=g=>{var y=qh(),$=i(d(y),2);Te($,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(_,x)=>{F();var b=Y("ACCOUNT");l(_,b)},$$slots:{default:!0}}),c(y),l(g,y)},k=g=>{var y=pe(),$=ee(y);{var _=b=>{var C=Uh(),L=i(d(C),2);Te(L,{$$events:{click:()=>window.location.href="/auth/v1/"},children:(D,R)=>{F();var j=Y("GO BACK");l(D,j)},$$slots:{default:!0}}),c(C),l(b,C)},x=b=>{Ph(b,{get selected(){return t()},set selected(C){t(C)}})};M($,b=>{e(r)?b(x,!1):b(_)},!0)}l(g,y)};M(f,g=>{e(h)?g(A):g(k,!1)},!0)}l(v,w)};M(u,v=>{!e(n)&&!e(h)?v(E):v(S,!1)})}l(p,m),ne()}export{Wh as A};
