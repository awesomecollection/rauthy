import"./disclose-version.BDr9Qe-U.js";import{p as N,a6 as q,t as I,a as Q,l as e,f as V,s as E,o as R,c as L,r as g,m as h,ab as ot}from"./index-client.Ds4XgiuL.js";import{e as rt,d as at,s as nt}from"./render.Bq2-eTRf.js";import{i as H}from"./if.Du7BDhAX.js";import{e as st,i as it}from"./each.MnMr4iw5.js";import{a as b,t as P,e as G,n as W}from"./template.DXIK6jcH.js";import{s as v,r as lt}from"./class.Ik0ma2JO.js";import{a as Z}from"./index.L0FyJ7Re.js";import{b as ct}from"./input.CyORuAkT.js";import{p as X}from"./proxy.Bsf9UJbk.js";import{b as tt}from"./this.B0BrlS58.js";import{p as d}from"./props.CpDInb2-.js";import{s as et}from"./snippet.CcKvRcoi.js";import{B as J}from"./Button.C_IpvWJY.js";import{g as K}from"./helpers.BTvs6bnN.js";import{u as ft}from"./i18n_admin.svelte.B_OuiPaR.js";import{u as mt}from"./i18n.svelte.CB3BpIrt.js";var ht=P('<div><!> <div class="popover svelte-15eoy2j" popover="auto"><div class="inner fade-in svelte-15eoy2j"><!></div></div></div>');function vt(m,t){N(t,!0);let n=d(t,"ref",15),p=d(t,"roleButton",3,"button"),i=d(t,"offsetLeft",3,"0px"),r=d(t,"offsetTop",3,"0px"),y=d(t,"close",15);const x=K(),S=K();let l=R(void 0),B=R(!1);q(()=>{y(_)});function T(s){if(s.stopPropagation(),n()&&e(l))if(t.absolute)e(l).style.top=r(),e(l).style.left=i();else{let f=n().getBoundingClientRect();e(l).style.top=`calc(${f.bottom+window.scrollY}px + ${r()})`,e(l).style.left=`calc(${f.left+window.scrollX}px + ${i()})`}else console.warn("button and popover ref missing")}function _(){var s;(s=e(l))==null||s.hidePopover()}function M(s){var k;let f=s.newState;h(B,f==="open"),(k=t.onToggle)==null||k.call(t,f)}var O=ht(),j=L(O);J(j,{get role(){return p()},id:x,ariaControls:S,popovertarget:S,onclick:T,get invisible(){return t.btnInvisible},get isDisabled(){return t.btnDisabled},get onLeft(){return t.onLeft},get onRight(){return t.onRight},get onUp(){return t.onUp},get onDown(){return t.onDown},get ref(){return n()},set ref(s){n(s)},children:(s,f)=>{var k=G(),U=V(k);et(U,()=>t.button),b(s,k)},$$slots:{default:!0}});var D=E(j,2);v(D,"id",S),v(D,"aria-labelledby",x);var F=L(D),o=L(F);{var c=s=>{var f=G(),k=V(f);{var U=A=>{var a=G(),u=V(a);et(u,()=>t.children),b(A,a)};H(k,A=>{e(B)&&A(U)})}b(s,f)},w=s=>{var f=G(),k=V(f);et(k,()=>t.children),b(s,f)};H(o,s=>{t.lazy?s(c):s(w,!1)})}g(F),g(D),tt(D,s=>h(l,s),()=>e(l)),g(O),I(()=>v(D,"aria-label",t.ariaLabel)),rt("toggle",D,M),b(m,O),Q()}var bt=W('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function gt(m,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=bt();v(r,"stroke-width",2),I(()=>{v(r,"stroke",i()),v(r,"width",p()),v(r,"opacity",n())}),b(m,r)}var wt=W('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function kt(m,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=wt();v(r,"stroke-width",2),I(()=>{v(r,"stroke",i()),v(r,"width",p()),v(r,"opacity",n())}),b(m,r)}function Lt(m,t,n,p){var i,r,y;switch(m.code){case"Enter":t();break;case"Tab":(i=n.onTab)==null||i.call(n,p());break;case"ArrowUp":(r=n.onUp)==null||r.call(n,p());break;case"ArrowDown":(y=n.onDown)==null||y.call(n,p());break}}var yt=P('<div class="options svelte-1wttsdc"><!></div>'),xt=m=>m.stopPropagation(),Dt=P("<option></option>"),Tt=P('<datalist class="absolute svelte-1wttsdc"></datalist>'),$t=P('<span class="backspace svelte-1wttsdc"><!></span>'),Ct=P('<div class="btnSearch svelte-1wttsdc"><!></div>'),Bt=P('<search class="flex container svelte-1wttsdc"><!> <input type="search" autocomplete="off" class="svelte-1wttsdc"> <!> <div class="relative"><div class="absolute btnDelete svelte-1wttsdc"><!></div></div> <!></search>');function dt(m,t){N(t,!0);let n=mt(),p=ft(),i=d(t,"id",19,K),r=d(t,"value",15,""),y=d(t,"placeholder",19,()=>p.common.search),x=d(t,"option",15),S=d(t,"focus",15),l=d(t,"width",3,"100%");const B=K();let T=R(void 0),_=ot(()=>t.datalist&&t.datalist.length>0?B:void 0);q(()=>{S(O)});function M(){var a;(a=t.onSearch)==null||a.call(t,r(),x())}function O(){var a;(a=e(T))==null||a.focus()}var j=Bt(),D=L(j);{var F=a=>{var u=yt(),$=L(u);pt($,{get ariaLabel(){return p.common.searchOptions},get options(){return t.options},borderless:!0,offsetLeft:"-.25rem",get value(){return x()},set value(C){x(C)}}),g(u),b(a,u)};H(D,a=>{t.options&&a(F)})}var o=E(D,2);lt(o),o.__click=[xt],o.__keydown=[Lt,M,t,r],tt(o,a=>h(T,a),()=>e(T));var c=E(o,2);{var w=a=>{var u=Tt();v(u,"id",B),st(u,21,()=>t.datalist,it,($,C)=>{var Y=Dt(),z={};I(()=>{z!==(z=e(C))&&(Y.value=(Y.__value=e(C))==null?"":e(C))}),b($,Y)}),g(u),b(a,u)};H(c,a=>{t.datalist&&a(w)})}var s=E(c,2),f=L(s),k=L(f);J(k,{get ariaLabel(){return n.common.delete},invisible:!0,onclick:()=>r(""),children:(a,u)=>{var $=$t(),C=L($);kt(C,{color:"hsl(var(--bg-high))"}),g($),b(a,$)},$$slots:{default:!0}}),g(f),g(s);var U=E(s,2);{var A=a=>{var u=Ct(),$=L(u);J($,{get ariaLabel(){return p.common.search},invisible:!0,onclick:M,children:(C,Y)=>{gt(C,{})},$$slots:{default:!0}}),g(u),b(a,u)};H(U,a=>{t.onSearch&&a(A)})}g(j),I(()=>{Z(j,"border",t.borderless?void 0:"1px solid hsl(var(--bg-high))"),Z(j,"width",l()),v(o,"id",i()),v(o,"list",e(_)),v(o,"aria-label",t.ariaLabel||p.common.search),v(o,"pattern",t.pattern),v(o,"placeholder",y())}),rt("focus",o,()=>{var a;return(a=t.onFocus)==null?void 0:a.call(t)}),ct(o,r),b(m,j),Q()}at(["click","keydown"]);var _t=W('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"></path></svg>');function jt(m,t){let n=d(t,"opacity",3,.9),p=d(t,"width",3,"1.5rem"),i=d(t,"color",3,"currentColor");var r=_t();v(r,"stroke-width",2),I(()=>{v(r,"width",p()),v(r,"color",i()),v(r,"opacity",n())}),b(m,r)}function Pt(m,t,n,p,i){let r=m.code;r==="ArrowDown"?(m.preventDefault(),t()&&h(n,e(n)+1)):r==="ArrowUp"?(m.preventDefault(),t()&&h(n,e(n)-1)):r==="Enter"&&e(n)>-1?p(e(i)[e(n)]):r==="Enter"&&e(n)===-1&&e(i).length===1&&p(e(i)[0])}var St=P('<div class="btn svelte-5ktp6l"><div class="btnText svelte-5ktp6l"> </div> <!></div>'),Ut=P('<div class="optPopover svelte-5ktp6l"> </div>'),At=P('<div role="listbox" tabindex="0" class="popover svelte-5ktp6l"><!> <div class="popoverOptions svelte-5ktp6l"></div></div> <input type="hidden" aria-hidden="true">',1);function pt(m,t){N(t,!0);let n=d(t,"ref",15),p=d(t,"options",19,()=>[]),i=d(t,"value",15),r=d(t,"borderless",3,!1),y=d(t,"withSearch",3,!1),x=R(void 0),S=R(void 0),l=R(X(y()?-1:0)),B=R(void 0),T=R(""),_=ot(()=>{if(!y())return p();if(typeof i()=="string")return p().filter(c=>c.toLowerCase().includes(e(T).toLowerCase()));let o=Number.parseInt(e(T))||i();return p().filter(c=>c===o)}),M=!1;q(()=>{var c;let o=i();M?(c=t.onChange)==null||c.call(t,o):M=!0}),q(()=>{var o,c;if(e(l)===-1&&((o=e(x))==null||o.scrollTo({top:0,behavior:"smooth"})),y()){if(e(l)<0||e(l)>e(_).length-1){h(l,-1),(c=e(B))==null||c();return}}else e(l)<0?h(l,e(_).length-1):e(l)>e(_).length-1&&h(l,0),O()});function O(){if(e(x)){let o=e(x).getElementsByTagName("button")[e(l)];o==null||o.scrollIntoView({behavior:"smooth",block:"center"}),o==null||o.focus()}else console.error("refOptions is undefined")}function j(o){var c;o==="open"&&(y()?(h(l,-1),(c=e(B))==null||c()):(h(l,X(p().findIndex(w=>w===i())||0)),O()))}function D(){return e(_).length>0?!0:(h(l,-1),!1)}function F(o){i(o),h(T,""),setTimeout(()=>{var c;(c=e(S))==null||c()},20)}vt(m,{get ariaLabel(){return t.ariaLabel},roleButton:"combobox",btnInvisible:!0,get offsetTop(){return t.offsetTop},get offsetLeft(){return t.offsetLeft},onToggle:j,get onLeft(){return t.onLeft},get onRight(){return t.onRight},get onUp(){return t.onUp},get onDown(){return t.onDown},get ref(){return n()},set ref(o){n(o)},get close(){return e(S)},set close(o){h(S,X(o))},button:o=>{var c=St(),w=L(c),s=L(w,!0);g(w);var f=E(w,2);jt(f,{width:".8rem"}),g(c),I(()=>{v(c,"data-border",!r()),v(w,"title",t.ariaLabel),nt(s,i())}),b(o,c)},children:(o,c)=>{var w=At(),s=V(w);s.__keydown=[Pt,D,l,F,_];var f=L(s);{var k=a=>{dt(a,{onFocus:()=>h(l,-1),get value(){return e(T)},set value(u){h(T,X(u))},get focus(){return e(B)},set focus(u){h(B,X(u))}})};H(f,a=>{y()&&a(k)})}var U=E(f,2);st(U,21,()=>e(_),it,(a,u,$)=>{J(a,{invisible:!0,invisibleOutline:!0,onclick:()=>F(e(u)),children:(C,Y)=>{var z=Ut(),ut=L(z,!0);g(z),I(()=>{v(z,"aria-selected",i()===e(u)),v(z,"data-focus",e(l)===$),nt(ut,e(u))}),b(C,z)},$$slots:{default:!0}})}),g(U),tt(U,a=>h(x,a),()=>e(x)),g(s);var A=E(s,2);lt(A),I(()=>{Z(s,"max-height",t.maxHeight),v(A,"name",t.name)}),ct(A,i),b(o,w)},$$slots:{button:!0,default:!0}}),Q()}at(["keydown"]);export{pt as O,vt as P,dt as S};
