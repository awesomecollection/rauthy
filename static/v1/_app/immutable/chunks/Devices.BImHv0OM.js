import{A as ea,B as q,a6 as _e,N as aa,I as $e,E as ta,aM as sa,aL as oa,G as ia,J as ra,O as la,aY as na,d as Ee,x as ie,w as va,ai as ca,U as m,W as u,T as y,g as l,p as Q,o as Ie,j as D,aZ as da,n as re,R as _,a as ee,P as Y,Q as le,h as ae,V as ua}from"./index-client.CzqVbBUo.js";import{l as Te,j as ma,w as Ce,d as Z,s as E,e as j}from"./render.DOFZNw8l.js";import"./disclose-version.BDr9Qe-U.js";import{e as Se,i as fa}from"./OptionSelect.CIygkAfc.js";import{d as Ne,e as pa,a as k,b as C,t as Ue,c as Ae,n as ba}from"./template.C3U8HW1x.js";import{s as M,r as De,l as xa,t as Re,f as ha,a as wa}from"./Button.65naIT6w.js";import{p as I,s as ne,b as ka,a as ve}from"./props.C_MHtC74.js";import{t as je,s as ga}from"./helpers.BvaXa0cv.js";import{r as ce}from"./legacy-client.DtCljIS0.js";import{p as L,i as z}from"./if.BnegfJmL.js";import{a1 as ya,K as Me,a2 as _a,a3 as $a,a4 as Ea}from"./dataFetching.CF6CPDU9.js";import{s as de}from"./snippet.B82X2vfx.js";import{b as Oe}from"./this.CLOcaDU7.js";import{w as Ia}from"./index.GhyFcvTZ.js";import{i as Xe}from"./tweened.B25itCeH.js";import{I as Ta}from"./Input.BRe7i--g.js";import{I as Ca,a as Sa}from"./CheckIcon.DvwC4MNL.js";import{u as Na}from"./i18n.svelte.C_qSL0ZA.js";function He(e,t,o,a,i){var s=e,n="",c;ea(()=>{if(n===(n=t()??"")){q&&_e();return}c!==void 0&&(la(c),c=void 0),n!==""&&(c=aa(()=>{if(q){$e.data;for(var v=_e(),f=v;v!==null&&(v.nodeType!==8||v.data!=="");)f=v,v=ta(v);if(v===null)throw sa(),oa;Ne($e,f),s=ia(v);return}var $=n+"",h=pa($);Ne(ra(h),h.lastChild),s.before(h)}))})}function Ua(e,t,o=t){var a=na();Te(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=ue(e)?me(s):s,o(s),a&&s!==(s=t())){var n=e.selectionStart,c=e.selectionEnd;e.value=s??"",c!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(c,e.value.length))}}),(q&&e.defaultValue!==e.value||Ee(t)==null&&e.value)&&o(ue(e)?me(e.value):e.value),ie(()=>{var i=t();ue(e)&&i===me(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Aa(e,t,o=t){Te(e,"change",a=>{var i=a?e.defaultChecked:e.checked;o(i)}),(q&&e.defaultChecked!==e.checked||Ee(t)==null)&&o(e.checked),ie(()=>{var a=t();e.checked=!!a})}function ue(e){var t=e.type;return t==="number"||t==="range"}function me(e){return e===""?null:+e}function Da(e,t,o=t){var a=e==="x",i=()=>Ce(()=>{s=!0,clearTimeout(n),n=setTimeout(c,100),o(window[a?"scrollX":"scrollY"])});addEventListener("scroll",i,{passive:!0});var s=!1,n,c=()=>{s=!1},v=!0;ie(()=>{var f=t();v?v=!1:!s&&f!=null&&(s=!0,clearTimeout(n),scrollTo(window.scrollX,f),n=setTimeout(c,100))}),va(i),ca(()=>{removeEventListener("scroll",i)})}function Ra(e,t){ma(window,["resize"],()=>Ce(()=>t(window[e])))}var ja=(e,t,o)=>t(l(o)),Ma=C('<button class="btn font-label svelte-n2aryx"> </button>'),Oa=C('<div class="bar noselect svelte-n2aryx"></div>');function Xa(e,t){let o=I(t,"labels",19,()=>[]),a=I(t,"selected",15);var i=Oa();Se(i,21,o,fa,(s,n)=>{var c=Ma();c.__click=[ja,a,n];var v=m(c,!0);u(c),y(()=>{M(c,"data-selected",a()===l(n)),E(v,l(n))}),j("keypress",c,()=>a(l(n))),k(s,c)}),u(i),k(e,i)}Z(["click"]);function fe(e,t,o,a){if(typeof o=="number"||Xe(o)){const i=a-o,s=(o-t)/(e.dt||1/60),n=e.opts.stiffness*i,c=e.opts.damping*s,v=(n-c)*e.inv_mass,f=(s+v)*e.dt;return Math.abs(f)<e.opts.precision&&Math.abs(i)<e.opts.precision?a:(e.settled=!1,Xe(o)?new Date(o.getTime()+f):o+f)}else{if(Array.isArray(o))return o.map((i,s)=>fe(e,t[s],o[s],a[s]));if(typeof o=="object"){const i={};for(const s in o)i[s]=fe(e,t[s],o[s],a[s]);return i}else throw new Error(`Cannot spring ${typeof o} values`)}}function pe(e,t={}){const o=Ia(e),{stiffness:a=.15,damping:i=.8,precision:s=.01}=t;let n,c,v,f=e,$=e,h=1,U=0,N=!1;function d(b,p={}){$=b;const x=v={};return e==null||p.hard||r.stiffness>=1&&r.damping>=1?(N=!0,n=De.now(),f=b,o.set(e=$),Promise.resolve()):(p.soft&&(U=1/((p.soft===!0?.5:+p.soft)*60),h=0),c||(n=De.now(),N=!1,c=xa(w=>{if(N)return N=!1,c=null,!1;h=Math.min(h+U,1);const A={inv_mass:h,opts:r,settled:!0,dt:(w-n)*60/1e3},O=fe(A,f,e,$);return n=w,f=e,o.set(e=O),A.settled&&(c=null),!A.settled})),new Promise(w=>{c.promise.then(()=>{x===v&&w()})}))}const r={set:d,update:(b,p)=>d(b($,e),p),subscribe:o.subscribe,stiffness:a,damping:i,precision:s};return r}var Ha=C('<div class="tooltip svelte-op12yu"><!></div>'),Pa=C('<div role="none"><!> <!></div>');function be(e,t){Q(t,!0);const o=ne(),a=()=>ve(l(f),"$coords",o);let i=I(t,"xOffset",3,10),s=I(t,"yOffset",3,10),n=I(t,"text",3,""),c=I(t,"html",3,""),v=Y(!1),f=Y(void 0),$;Ie(()=>{ka(D(f,L(pe({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",o)}),da(()=>{clearTimeout($)});function h(){clearTimeout($),D(v,!0)}function U(){$=setTimeout(()=>{D(v,!1)},100)}function N(x){l(f).set({x:x.clientX+i(),y:x.clientY+s()})}var d=Pa();d.__mouseover=h,d.__mouseout=U,d.__mousemove=N;var r=m(d);de(r,()=>t.children??re);var b=_(r,2);{var p=x=>{var w=Ha(),A=m(w);{var O=S=>{var g=Ue();y(()=>E(g,n())),k(S,g)},B=S=>{var g=Ae(),R=le(g);{var G=P=>{var V=Ae(),K=le(V);He(K,c),k(P,V)};z(R,P=>{c()&&P(G)},!0)}k(S,g)};z(A,S=>{n()?S(O):S(B,!1)})}u(w),y(()=>M(w,"style",`top: ${`${a().y}px`??""}; left: ${`${a().x}px`??""}`)),Re(7,w,()=>ha,()=>({delay:400,duration:200})),k(x,w)};z(b,x=>{l(v)&&x(p)})}u(d),j("focus",d,h),j("blur",d,U),k(e,d),ee()}Z(["mouseover","mouseout","mousemove"]);var La=C('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function Va(e,t){Q(t,!0);const o=ne(),a=()=>ve(n,"$margin",o);let i=I(t,"selected",15,!1);const s=11;let n=pe(0,{stiffness:.15,damping:.5});ce(()=>{n.set(i()?s:0)});function c(){i(!i())}var v=La();v.__click=c;var f=m(v);u(v),y(()=>{M(v,"aria-checked",i()),je(v,"selectedOuter",i()),M(f,"style",`margin-left: ${`${a()}px`??""}`),je(f,"selected",i())}),j("keypress",v,c),k(e,v),ee()}Z(["click"]);var Wa=ba('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function Pe(e,t){let o=I(t,"color",3,"var(--col-text)"),a=I(t,"opacity",3,.9),i=I(t,"width",3,20);var s=Wa();M(s,"stroke-width",2),y(()=>{M(s,"width",i()),M(s,"color",o()),M(s,"opacity",a())}),k(e,s)}var Ya=C('<div class="body svelte-1xshgki"><!></div>'),za=C('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function Le(e,t){Q(t,!0);const o=ne(),a=()=>ve(h,"$rotate",o);let i=I(t,"idx",11,0),s=I(t,"show",15),n=I(t,"expandedCallback",3,()=>{}),c=Y(!1),v=Y(void 0),f=Y(void 0),$=i()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const h=pe(0,{stiffness:.1,damping:.4});function U(){!s()&&n()&&n()(),s(!s())}function N(){const g=l(v).offsetTop+l(f).scrollHeight+100;window.innerHeight+window.scrollY-g<0&&window.scroll({top:g,behavior:"smooth"})}ce(()=>{s()?h.set(90):h.set(0)}),ce(()=>{s()&&l(f)&&setTimeout(()=>{N()},100)});var d=za(),r=m(d),b=m(r);b.__click=U;var p=m(b),x=m(p),w=ae(()=>l(c)?"var(--col-act2a)":"var(--col-act2)");Pe(x,{get color(){return l(w)}}),u(p),u(b);var A=_(b,2),O=m(A);de(O,()=>t.header??re),u(A),u(r);var B=_(r,2);{var S=g=>{var R=Ya(),G=m(R);de(G,()=>t.body??re),u(R),Oe(R,P=>D(f,P),()=>l(f)),Re(7,R,()=>wa,()=>({duration:200})),k(g,R)};z(B,g=>{s()&&g(S)})}u(d),Oe(d,g=>D(v,g),()=>l(v)),y(()=>{ga(d,"border-left",s()?$:"none"),M(p,"style",`rotate: ${a()??""}deg`)}),j("mouseenter",b,()=>D(c,!0)),j("mouseleave",b,()=>D(c,!1)),j("keypress",b,U),k(e,d),ee()}Z(["click"]);var Ba=C('<div class="device-header svelte-oumbix"><div class="device-head font-mono svelte-oumbix"> </div></div>'),Ga=(e,t,o)=>t(l(o).id),Ka=C('<div role="button" tabindex="0" class="icon-btn-input svelte-oumbix"><!></div>'),Fa=(e,t,o)=>t(l(o).id),Ja=C('<div role="button" tabindex="0" class="icon-btn-value svelte-oumbix"><!></div>'),Za=C('<div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="row svelte-oumbix"><div class="value svelte-oumbix"> </div> <!></div></div>'),qa=C('<div class="device svelte-oumbix"><div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value font-mono svelte-oumbix"> </div></div> <div class="row svelte-oumbix"><!> <!></div> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div> <!> <div class="unit svelte-oumbix"><div class="label font-label svelte-oumbix"> </div> <div class="value svelte-oumbix"> </div></div></div>'),Qa=C('<div class="head svelte-oumbix"> </div> <div class="devices svelte-oumbix"></div>',1);function et(e,t){Q(t,!0);let o=I(t,"userId",3,""),a=Na(),i=Y(L([])),s=L({}),n=L({});Ie(()=>{c()});async function c(){let d=await ya(o()),r=await d.json();if(d.ok){for(let b of r)n[b.id]=b.name;D(i,L(r))}else console.error("error fetching devices: "+r.message)}async function v(d){let r=n[d];if($a.test(r))s[d]="";else{s[d]=(a==null?void 0:a.common.invalidInput)||"Invalid Input";return}let b={device_id:d,name:r},p=await _a(o(),b);if(p.ok){s[d]="";for(let x of l(i))if(x.id===d){x.name=r;break}D(i,L([...l(i)])),n[d]=r}else{let x=await p.json();console.error(x)}}async function f(d){let r={device_id:d},b=await Ea(o(),r);if(b.ok){for(let p of l(i))if(p.id===d){p.refresh_exp=void 0;break}D(i,L([...l(i)]))}else{let p=await b.json();console.error(p)}}var $=Qa(),h=le($),U=m(h,!0);u(h);var N=_(h,2);Se(N,21,()=>l(i),d=>d.id,(d,r)=>{Le(d,{header:b=>{var p=Ba(),x=m(p),w=m(x,!0);u(x),u(p),y(()=>E(w,l(r).name)),k(b,p)},body:b=>{var p=qa(),x=m(p),w=m(x),A=m(w,!0);y(()=>E(A,(a==null?void 0:a.account.deviceId.toUpperCase())||"ID")),u(w);var O=_(w,2),B=m(O,!0);u(O),u(x);var S=_(x,2),g=m(S),R=ae(()=>(a==null?void 0:a.account.deviceName.toUpperCase())||"Name");Ta(g,{autocomplete:"off",get placeholder(){return l(R)},get value(){return n[l(r).id]},set value(T){n[l(r).id]=T},get error(){return s[l(r).id]},set error(T){s[l(r).id]=T},$$events:{enter:()=>v(l(r).id)},children:(T,W)=>{ua();var X=Ue();y(()=>E(X,(a==null?void 0:a.account.deviceName.toUpperCase())||"NAME")),k(T,X)},$$slots:{default:!0}});var G=_(g,2);{var P=T=>{var W=ae(()=>(a==null?void 0:a.common.save)||"Save");be(T,{get text(){return l(W)},children:(X,ye)=>{var H=Ka();H.__click=[Ga,v,r];var F=m(H);Ca(F,{color:"var(--col-ok)",width:24}),u(H),j("keypress",H,()=>v(l(r).id)),k(X,H)},$$slots:{default:!0}})};z(G,T=>{n[l(r).id]!=l(r).name&&T(P)})}u(S);var V=_(S,2),K=m(V),Ve=m(K,!0);y(()=>E(Ve,(a==null?void 0:a.account.regDate.toUpperCase())||"REGISTRATION DATE")),u(K);var xe=_(K,2),We=m(xe,!0);u(xe),u(V);var te=_(V,2),se=m(te),Ye=m(se,!0);y(()=>E(Ye,(a==null?void 0:a.account.accessExp.toUpperCase())||"ACCESS EXPIRES")),u(se);var he=_(se,2),ze=m(he,!0);y(()=>E(ze,Me(l(r).access_exp))),u(he),u(te);var we=_(te,2);{var Be=T=>{var W=Za(),X=m(W),ye=m(X,!0);y(()=>E(ye,(a==null?void 0:a.account.accessRenew.toUpperCase())||"ACCESS RENEW UNTIL")),u(X);var H=_(X,2),F=m(H),Fe=m(F,!0);y(()=>E(Fe,Me(l(r).refresh_exp))),u(F);var Je=_(F,2),Ze=ae(()=>(a==null?void 0:a.account.accessRenewDelete)||"Delete the possibility to renew");be(Je,{get text(){return l(Ze)},children:(qe,at)=>{var J=Ja();J.__click=[Fa,f,r];var Qe=m(J);Sa(Qe,{color:"var(--col-err)",width:24}),u(J),j("keypress",J,()=>f(l(r).id)),k(qe,J)},$$slots:{default:!0}}),u(H),u(W),k(T,W)};z(we,T=>{l(r).refresh_exp&&T(Be)})}var ke=_(we,2),oe=m(ke),Ge=m(oe,!0);y(()=>E(Ge,(a==null?void 0:a.account.regIp.toUpperCase())||"REGISTRATION FROM IP")),u(oe);var ge=_(oe,2),Ke=m(ge,!0);u(ge),u(ke),u(p),y(()=>{E(B,l(r).id),E(We,l(r).created),E(Ke,l(r).peer_ip)}),k(b,p)},$$slots:{header:!0,body:!0}})}),u(N),y(()=>E(U,(a==null?void 0:a.account.devicesDesc)||"Devices linked to this account")),k(e,$),ee()}Z(["click"]);export{et as D,Le as E,Pe as I,Va as S,Xa as T,be as a,Ua as b,Ra as c,Da as d,Aa as e,He as h};
