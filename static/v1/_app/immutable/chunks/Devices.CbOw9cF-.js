var ge=t=>{throw TypeError(t)};var ve=(t,s,e)=>s.has(t)||ge("Cannot "+e);var n=(t,s,e)=>(ve(t,s,"read from private field"),e?e.call(t):s.get(t)),T=(t,s,e)=>s.has(t)?ge("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),j=(t,s,e,i)=>(ve(t,s,"write to private field"),i?i.call(t,e):s.set(t,e),e),we=(t,s,e)=>(ve(t,s,"access private method"),e);var z,S,V,I,N,X,H,F,ee,A,U,le,Re;import{C as qe,E as ye,F as $e,O as Ae,Q as xe,a6 as Be,ay as Pe,aw as Ne,J as Oe,a7 as ze,a8 as Se,a1 as Me,a0 as Ve,ac as Xe,t as _,g as y,b as L,d as de,V as W,aV as Fe,A as Je,p as te,c as p,r as b,s as C,a as ae,q as Ke,a9 as K,o as Qe,f as ke,y as Ye}from"./index-client.BTDbhFDr.js";import{d as Ee,e as Ge,a as m,n as _e,t as D,b as Q,c as He}from"./template.WjkCsOA4.js";import{j as Ue,w as Te,s as q}from"./render.Bnf33Vuq.js";import{w as We}from"./index.0CbzcHSz.js";import{s as M,i as ce,l as je,t as Ze,d as es,g as ss,h as ts}from"./index.C-OHSz9E.js";import"./disclose-version.BDr9Qe-U.js";import{i as Y}from"./if.DAPrgfY3.js";import{f as De,B as ue,g as as,h as is,e as rs}from"./ThemeSwitch.roIqycWj.js";import{p as G}from"./proxy.RLXrsQTM.js";import{u as he}from"./i18n.svelte.CR36i7o7.js";import{K as ns,r as os,q as Ie,z as fe}from"./helpers.DwhnXD2f.js";import{p as P}from"./props.C0sO4y_5.js";import{I as ls}from"./Input.CUSPvo5Z.js";import{s as ie}from"./snippet.DrOrOIgy.js";import{b as vs}from"./patterns.BdncpE46.js";function ds(t,s,e,i,o){var a=t,v="",l;qe(()=>{if(v===(v=s()??"")){ye&&$e();return}l!==void 0&&(Se(l),l=void 0),v!==""&&(l=Ae(()=>{if(ye){xe.data;for(var r=$e(),c=r;r!==null&&(r.nodeType!==8||r.data!=="");)c=r,r=Be(r);if(r===null)throw Pe(),Ne;Ee(xe,c),a=Oe(r);return}var d=v+"",h=Ge(d);Ee(ze(h),h.lastChild),a.before(h)}))})}function cs(t,s,e=s){var i=t==="x",o=()=>Te(()=>{a=!0,clearTimeout(v),v=setTimeout(l,100),e(window[i?"scrollX":"scrollY"])});addEventListener("scroll",o,{passive:!0});var a=!1,v,l=()=>{a=!1},r=!0;Me(()=>{var c=s();r?r=!1:!a&&c!=null&&(a=!0,clearTimeout(v),scrollTo(window.scrollX,c),v=setTimeout(l,100))}),Ve(o),Xe(()=>{removeEventListener("scroll",o)})}function us(t,s){Ue(window,["resize"],()=>Te(()=>s(window[t])))}var hs=_e('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function Le(t,s){let e=P(s,"opacity",3,.9),i=P(s,"width",3,"1.5rem"),o=P(s,"color",3,"hsl(var(--error))");var a=hs();M(a,"stroke-width",2),_(()=>{M(a,"width",i()),M(a,"color",o()),M(a,"opacity",e())}),m(t,a)}let re=de(void 0);function Ce(t){return!y(re)&&ns()&&De("/auth/v1/oidc/sessioninfo").then(s=>{s.status===401&&os(t),L(re,G(s.body))}),{get(){return y(re)},set(s){L(re,G(s))}}}function me(t){return Object.prototype.toString.call(t)==="[object Date]"}function ne(t,s,e,i){if(typeof e=="number"||me(e)){const o=i-e,a=(e-s)/(t.dt||1/60),v=t.opts.stiffness*o,l=t.opts.damping*a,r=(v-l)*t.inv_mass,c=(a+r)*t.dt;return Math.abs(c)<t.opts.precision&&Math.abs(o)<t.opts.precision?i:(t.settled=!1,me(e)?new Date(e.getTime()+c):e+c)}else{if(Array.isArray(e))return e.map((o,a)=>ne(t,s[a],e[a],i[a]));if(typeof e=="object"){const o={};for(const a in e)o[a]=ne(t,s[a],e[a],i[a]);return o}else throw new Error(`Cannot spring ${typeof e} values`)}}function fs(t,s={}){const e=We(t),{stiffness:i=.15,damping:o=.8,precision:a=.01}=s;let v,l,r,c=t,d=t,h=1,$=0,g=!1;function R(x,E={}){d=x;const B=r={};return t==null||E.hard||w.stiffness>=1&&w.damping>=1?(g=!0,v=ce.now(),c=x,e.set(t=d),Promise.resolve()):(E.soft&&($=1/((E.soft===!0?.5:+E.soft)*60),h=0),l||(v=ce.now(),g=!1,l=je(u=>{if(g)return g=!1,l=null,!1;h=Math.min(h+$,1);const k={inv_mass:h,opts:w,settled:!0,dt:(u-v)*60/1e3},f=ne(k,c,t,d);return v=u,c=t,e.set(t=f),k.settled&&(l=null),!k.settled})),new Promise(u=>{l.promise.then(()=>{B===r&&u()})}))}const w={set:R,update:(x,E)=>R(x(d,t),E),subscribe:e.subscribe,stiffness:i,damping:o,precision:a};return w}const be=class be{constructor(s,e={}){T(this,le);T(this,z,W(.15));T(this,S,W(.8));T(this,V,W(.01));T(this,I,W(void 0));T(this,N,W(void 0));T(this,X);T(this,H,0);T(this,F,1);T(this,ee,0);T(this,A,null);T(this,U,null);n(this,I).v=n(this,N).v=s,typeof e.stiffness=="number"&&(n(this,z).v=oe(e.stiffness,0,1)),typeof e.damping=="number"&&(n(this,S).v=oe(e.damping,0,1)),typeof e.precision=="number"&&(n(this,V).v=e.precision)}static of(s,e){const i=new be(s(),e);return Me(()=>{i.set(s())}),i}set(s,e){var o,a;if((o=n(this,U))==null||o.reject(new Error("Aborted")),(e==null?void 0:e.instant)||n(this,I).v===void 0)return(a=n(this,A))==null||a.abort(),j(this,A,null),L(n(this,I),L(n(this,N),s)),j(this,X,s),Promise.resolve();e!=null&&e.preserveMomentum&&(j(this,F,0),j(this,ee,e.preserveMomentum));var i=j(this,U,Fe());return i.promise.catch(Je),we(this,le,Re).call(this,s).then(()=>{i===n(this,U)&&i.resolve(void 0)}),i.promise}get current(){return y(n(this,I))}get damping(){return y(n(this,S))}set damping(s){L(n(this,S),oe(s,0,1))}get precision(){return y(n(this,V))}set precision(s){L(n(this,V),s)}get stiffness(){return y(n(this,z))}set stiffness(s){L(n(this,z),oe(s,0,1))}get target(){return y(n(this,N))}set target(s){this.set(s)}};z=new WeakMap,S=new WeakMap,V=new WeakMap,I=new WeakMap,N=new WeakMap,X=new WeakMap,H=new WeakMap,F=new WeakMap,ee=new WeakMap,A=new WeakMap,U=new WeakMap,le=new WeakSet,Re=function(s){var i;if(L(n(this,N),s),(i=n(this,I)).v??(i.v=s),n(this,X)??j(this,X,n(this,I).v),!n(this,A)){j(this,H,ce.now());var e=1e3/(n(this,ee)*60);n(this,A)??j(this,A,je(o=>{j(this,F,Math.min(n(this,F)+e,1));const a={inv_mass:n(this,F),opts:{stiffness:n(this,z).v,damping:n(this,S).v,precision:n(this,V).v},settled:!0,dt:(o-n(this,H))*60/1e3};var v=ne(a,n(this,X),n(this,I).v,n(this,N).v);return j(this,X,n(this,I).v),j(this,H,o),L(n(this,I),v),a.settled&&j(this,A,null),!a.settled}))}return n(this,A).promise};let pe=be;function oe(t,s,e){return Math.max(s,Math.min(e,t))}var ms=_e('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function ps(t,s){let e=P(s,"opacity",3,.9),i=P(s,"width",3,"1.5rem"),o=P(s,"color",3,"currentColor");var a=ms();M(a,"stroke-width",2),_(()=>{M(a,"width",i()),M(a,"color",o()),M(a,"opacity",e())}),m(t,a)}var bs=D('<div class="chevron svelte-li3f92"><!></div>'),gs=D("<div><!></div>"),ws=D('<div class="container svelte-li3f92"><div class="header svelte-li3f92"><!> <div class="summary svelte-li3f92"><!></div></div> <div class="details svelte-li3f92"><!></div></div>');function ys(t,s){te(s,!0);let e=he();const i=Ie(),o=Ie();let a=P(s,"expand",15,!1);function v(w){w.preventDefault(),a(!a())}var l=ws(),r=p(l),c=p(r);ue(c,{get ariaLabel(){return e.common.expandContent},ariaControls:o,invisible:!0,onclick:w=>v(w),children:(w,x)=>{var E=bs(),B=p(E);ps(B,{}),b(E),m(w,E)},$$slots:{default:!0}});var d=C(c,2);M(d,"id",i);var h=p(d);ie(h,()=>s.summary),b(d),b(r);var $=C(r,2);M($,"id",o),M($,"aria-labelledby",i);var g=p($);{var R=w=>{var x=gs(),E=p(x);ie(E,()=>s.details),b(x),Ze(3,x,()=>es,()=>({duration:150})),m(w,x)};Y(g,w=>{a()&&w(R)})}b($),b(l),_(()=>{M(l,"aria-expanded",a()),M(d,"aria-label",e.common.summary),M($,"aria-label",e.common.details),M($,"aria-hidden",!a())}),m(t,l),ae()}var $s=D('<div class="label font-label svelte-1n9u417"> </div>'),xs=D('<div class="button svelte-1n9u417"><!></div>'),Ms=D('<div class="container svelte-1n9u417"><!> <div class="flex gap-05"><div><!></div> <!></div></div>');function Z(t,s){te(s,!0);var e=Ms(),i=p(e);{var o=d=>{var h=$s(),$=p(h,!0);b(h),_(()=>q($,s.label)),m(d,h)};Y(i,d=>{s.label&&d(o)})}var a=C(i,2),v=p(a),l=p(v);ie(l,()=>s.children),b(v);var r=C(v,2);{var c=d=>{var h=xs(),$=p(h);ie($,()=>s.button),b(h),m(d,h)};Y(r,d=>{s.button&&d(c)})}b(a),b(e),_(()=>{M(v,"title",s.title||s.label||""),ss(v,ts(s.mono?"font-mono":""),"svelte-1n9u417")}),m(t,e),ae()}var ks=D('<div class="device-header svelte-9n911e"><div class="device-head font-mono svelte-9n911e"> </div></div>'),Es=D('<div class="saveButton svelte-9n911e"><!></div>'),_s=D("<div><!></div>"),Ts=D("<div> </div>"),js=D('<div class="device svelte-9n911e"><!> <div class="row svelte-9n911e"><!> <!></div> <!> <!> <!> <!></div>');function Ds(t,s){te(s,!0);let e=P(s,"device",15),i=he(),o=de(G(Ke(()=>e().name)));async function a(){let l={device_id:e().id,name:y(o)},r=await as(`/auth/v1/users/${s.userId}/devices`,l);r.error?console.error(r.error):e(e().name=y(o),!0)}async function v(){let l={device_id:e().id},r=await is(`/auth/v1/users/${s.userId}/devices`,l);r.error?console.error(r.error):e(e().refresh_exp=void 0,!0)}ys(t,{summary:l=>{var r=ks(),c=p(r),d=p(c,!0);b(c),b(r),_(()=>q(d,e().name)),m(l,r)},details:l=>{var r=js(),c=p(r);Z(c,{get label(){return i.account.deviceId},mono:!0,children:(u,k)=>{K();var f=Q();_(()=>q(f,e().id)),m(u,f)},$$slots:{default:!0}});var d=C(c,2),h=p(d);ls(h,{autocomplete:"off",width:"17rem",get label(){return i.account.deviceName},get placeholder(){return i.account.deviceName},onEnter:a,pattern:vs,required:!0,get value(){return y(o)},set value(u){L(o,G(u))},children:(u,k)=>{K();var f=Q();_(()=>q(f,i.account.deviceName)),m(u,f)},$$slots:{default:!0}});var $=C(h,2);{var g=u=>{var k=Es(),f=p(k);ue(f,{onclick:a,children:(J,O)=>{K();var se=Q();_(()=>q(se,i.common.save)),m(J,se)},$$slots:{default:!0}}),b(k),m(u,k)};Y($,u=>{y(o)!==e().name&&u(g)})}b(d);var R=C(d,2);Z(R,{get label(){return i.account.regDate},children:(u,k)=>{K();var f=Q();_(()=>q(f,fe(e().created))),m(u,f)},$$slots:{default:!0}});var w=C(R,2);Z(w,{get label(){return i.account.accessExp},children:(u,k)=>{K();var f=Q();_(()=>q(f,fe(e().access_exp))),m(u,f)},$$slots:{default:!0}});var x=C(w,2);{var E=u=>{Z(u,{get label(){return i.account.accessRenew},button:k=>{ue(k,{get ariaLabel(){return i.common.delete},invisible:!0,onclick:v,children:(f,J)=>{var O=_s(),se=p(O);Le(se,{}),b(O),_(()=>M(O,"title",i.common.delete)),m(f,O)},$$slots:{default:!0}})},children:(k,f)=>{var J=Ts(),O=p(J,!0);_(()=>q(O,fe(e().refresh_exp))),b(J),m(k,J)},$$slots:{button:!0,default:!0}})};Y(x,u=>{e().refresh_exp&&u(E)})}var B=C(x,2);Z(B,{get label(){return i.account.regIp},children:(u,k)=>{K();var f=Q();_(()=>q(f,e().peer_ip)),m(u,f)},$$slots:{default:!0}}),b(r),m(l,r)},$$slots:{summary:!0,details:!0}}),ae()}var Is=D('<div class="head svelte-w0g6eh"> </div> <div class="devices svelte-w0g6eh"><!></div>',1);function Ls(t,s){te(s,!0);let e=he(),i=Ce(s.viewMode),o=Ye(()=>{var g;return(g=i.get())==null?void 0:g.user_id}),a=de(G([]));Qe(()=>{v()});async function v(){let g=await De(`/auth/v1/users/${y(o)}/devices`);g.body?L(a,G(g.body)):console.error("error fetching devices: "+g.error)}var l=Is(),r=ke(l),c=p(r,!0);b(r);var d=C(r,2),h=p(d);{var $=g=>{var R=He(),w=ke(R);rs(w,19,()=>y(a),x=>x.id,(x,E,B)=>{Ds(x,{get userId(){return y(o)},get device(){return y(a)[y(B)]},set device(u){y(a)[y(B)]=u}})}),m(g,R)};Y(h,g=>{y(o)&&g($)})}b(d),_(()=>q(c,(e==null?void 0:e.account.devicesDesc)||"Devices linked to this account")),m(t,l),ae()}export{Ls as D,Le as I,pe as S,cs as a,us as b,ds as h,me as i,fs as s,Ce as u};
