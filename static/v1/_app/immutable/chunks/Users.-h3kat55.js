import"./disclose-version.BDr9Qe-U.js";import{p as le,t as G,a as ie,c as o,y as e,s as d,K as Ze,ab as Ce,r as n,z as a,A as x,ap as Ee,as as qt,f as ve,aM as Tt,a0 as Dt,ar as Q}from"./index-client.Di99sPv0.js";import{d as Le,e as he,s as ee}from"./render.Cjc4CIr8.js";import{i as z}from"./if.DgeUjMU2.js";import{e as xe,i as qe}from"./each.DxtmCefA.js";import{a as r,t as L,d as X,e as pe,n as Xe}from"./template.BEKX6jgL.js";import{p as l}from"./proxy.BQ2dmY0t.js";import{g as Mt,a as vt,b as Nt,d as Ot,c as Ct,e as Rt,f as Ft,u as Bt,h as Pt,i as zt,j as Wt,k as Gt,l as ot}from"./dataFetchingAdmin.CZH2VIC1.js";import{t as oe,a as Se,s as ce,f as Ut}from"./index.BnJsthXQ.js";import{s as dt,p as R,a as ct,b as Vt}from"./props.ClgLgKUv.js";import{r as fe}from"./legacy-client.CBr1omBZ.js";import{s as Ye}from"./snippet.D2r9qTNj.js";import{s as ue,r as Zt,t as Xt}from"./class.BCapn1bP.js";import{b as ut}from"./this.Ckttlp1y.js";import{I as He,b as mt,O as Ke,P as Yt}from"./PaginationServer.BuRiZ-7H.js";import{s as ht}from"./spring.DahybOdg.js";import{h as Ht}from"./html.CddWxNhc.js";import{c as Je,a as _e,b as Kt,I as me,B as ke}from"./Input.yodxTKQZ.js";import{X as Jt,l as Me,Y as Qe,Z as Qt,$ as ea,a0 as ta,a1 as aa,a2 as pt,u as ft,D as gt,q as et,a3 as sa,B as ra}from"./helpers.D3KrX4pz.js";import{S as Re}from"./Switch.Dr6mVgDt.js";import{w as Fe}from"./index.DbxaHF51.js";import{I as la,C as ia}from"./CheckIcon.CxdBm3CC.js";import{b as na}from"./input.NYWjhvEE.js";import{g as va}from"./helpers.mrWtKrwW.js";import{P as yt}from"./PasswordInput.FVm9hQ20.js";import{P as oa}from"./PasswordPolicy.DyPst8KB.js";import{i as da,j as ca,w as ua,k as ma}from"./dataFetching.B_eQV28B.js";import{L as ha}from"./Loading.kVoduAVY.js";import{D as pa}from"./Devices.Cxlqo-B6.js";import{I as fa,a as ga}from"./IconBarsArrowUp.aZjGzjdM.js";var ya=L('<div class="body svelte-1xshgki"><!></div>'),wa=L('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function wt(F,s){le(s,!0);const t=dt(),_=()=>ct(y,"$rotate",t);let v=R(s,"idx",11,0),w=R(s,"show",15),b=R(s,"expandedCallback",3,()=>{}),m=x(!1),f=x(void 0),I=x(void 0),$=v()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const y=ht(0,{stiffness:.1,damping:.4});function q(){!w()&&b()&&b()(),w(!w())}function p(){const k=e(f).offsetTop+e(I).scrollHeight+100;window.innerHeight+window.scrollY-k<0&&window.scroll({top:k,behavior:"smooth"})}fe(()=>{w()?y.set(90):y.set(0)}),fe(()=>{w()&&e(I)&&setTimeout(()=>{p()},100)});var h=wa(),u=o(h),D=o(u);D.__click=q;var c=o(D),g=o(c),j=Ce(()=>e(m)?"var(--col-act2a)":"var(--col-act2)");He(g,{get color(){return e(j)}}),n(c),n(D);var M=d(D,2),N=o(M);Ye(N,()=>s.header??Ze),n(M),n(u);var O=d(u,2);{var A=k=>{var E=ya(),Y=o(E);Ye(Y,()=>s.body??Ze),n(E),ut(E,J=>a(I,J),()=>e(I)),oe(7,E,()=>ce,()=>({duration:200})),r(k,E)};z(O,k=>{w()&&k(A)})}n(h),ut(h,k=>a(f,k),()=>e(f)),G(()=>{Se(h,"border-left",w()?$:"none"),ue(c,"style",`rotate: ${_()??""}deg`)}),he("mouseenter",D,()=>a(m,!0)),he("mouseleave",D,()=>a(m,!1)),he("keypress",D,q),r(F,h),ie()}Le(["click"]);var ba=L('<div class="tooltip svelte-op12yu"><!></div>'),$a=L('<div role="none"><!> <!></div>');function Be(F,s){le(s,!0);const t=dt(),_=()=>ct(e(I),"$coords",t);let v=R(s,"xOffset",3,10),w=R(s,"yOffset",3,10),b=R(s,"text",3,""),m=R(s,"html",3,""),f=x(!1),I=x(void 0),$;Ee(()=>{Vt(a(I,l(ht({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",t)}),qt(()=>{clearTimeout($)});function y(){clearTimeout($),a(f,!0)}function q(){$=setTimeout(()=>{a(f,!1)},100)}function p(g){e(I).set({x:g.clientX+v(),y:g.clientY+w()})}var h=$a();h.__mouseover=y,h.__mouseout=q,h.__mousemove=p;var u=o(h);Ye(u,()=>s.children??Ze);var D=d(u,2);{var c=g=>{var j=ba(),M=o(j);{var N=A=>{var k=X();G(()=>ee(k,b())),r(A,k)},O=A=>{var k=pe(),E=ve(k);{var Y=J=>{var ae=pe(),P=ve(ae);Ht(P,m),r(J,ae)};z(E,J=>{m()&&J(Y)},!0)}r(A,k)};z(M,A=>{b()?A(N):A(O,!1)})}n(j),G(()=>ue(j,"style",`top: ${`${_().y}px`??""}; left: ${`${_().x}px`??""}`)),oe(7,j,()=>Ut,()=>({delay:400,duration:200})),r(g,j)};z(D,g=>{e(f)&&g(c)})}n(h),he("focus",h,y),he("blur",h,q),r(F,h),ie()}Le(["mouseover","mouseout","mousemove"]);const _a=Fe([]),tt=Fe([]),xa=Fe([]),at=Fe([]);var ka=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function Ea(F,s){let t=R(s,"opacity",3,.9),_=R(s,"width",3,24);var v=ka();ue(v,"stroke-width",2),G(()=>{ue(v,"width",_()),ue(v,"opacity",t())}),r(F,v)}var Sa=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function Ia(F,s){let t=R(s,"opacity",3,.9),_=R(s,"width",3,24);var v=Sa();ue(v,"stroke-width",2),G(()=>{ue(v,"width",_()),ue(v,"opacity",t())}),r(F,v)}var La=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function ja(F,s){let t=R(s,"opacity",3,.9),_=R(s,"width",3,24);var v=La();ue(v,"stroke-width",2),G(()=>{ue(v,"width",_()),ue(v,"opacity",t())}),r(F,v)}var Aa=L("<option> </option>"),qa=L('<select class="opts font-label svelte-9iykj"></select>'),Ta=L('<div class="container svelte-9iykj"><!> <div class="inputBar svelte-9iykj"><input class="input svelte-9iykj" type="text" placeholder="Search" autocomplete="off"> <div class="magnify svelte-9iykj"><!></div></div> <div class="backWrap svelte-9iykj"><div role="button" tabindex="0" class="back svelte-9iykj"><!></div></div></div>');function bt(F,s){le(s,!0);let t=R(s,"items",27,()=>l([])),_=R(s,"resItems",15),v=R(s,"options",19,()=>[]),w=R(s,"useServerSideIdx",11,""),b=R(s,"isSearchFiltered",15,!1),m=R(s,"search",15,""),f=x(""),I;Ee(()=>{v().length>0&&(a(f,l(v()[0].label)),$())});function $(){for(let k of v())if(k.label===e(f)){I=k.callback;break}I||console.error("Could not find a valid callback function in search options for label "+e(f))}function y(){m("")}function q(){if(m().length<2){_(t()),b(!1);return}_([...t().filter(k=>v().length>0?I(k,m()):k.toLowerCase().includes(m())||k===m())]),b(!0)}async function p(){if(m().length<Jt){_(t()),b(!1);return}b(!0);const k=e(f).replaceAll("-","").replaceAll(" ","").toLowerCase();let E=await Mt(w(),k,m());E.ok?_(await E.json()):console.error(E)}fe(()=>{e(f)&&$()}),fe(()=>{m()?w()?p():q():(_(t()),b(!1))});var h=Ta(),u=o(h);{var D=k=>{Be(k,{text:"Search by",yOffset:-30,children:(E,Y)=>{var J=qa();xe(J,21,v,qe,(ae,P)=>{var B=Aa(),Z={},se=o(B,!0);n(B),G(()=>{Z!==(Z=e(P).label)&&(B.value=(B.__value=e(P).label)==null?"":e(P).label),ee(se,e(P).label)}),r(ae,B)}),n(J),mt(J,()=>e(f),ae=>a(f,ae)),r(E,J)},$$slots:{default:!0}})};z(u,k=>{v().length>1&&k(D)})}var c=d(u,2),g=o(c);Zt(g),G(()=>ue(g,"name",va()));var j=d(g,2),M=o(j);Ia(M,{width:20}),n(j),n(c);var N=d(c,2),O=o(N);O.__click=y;var A=o(O);ja(A,{}),n(O),n(N),n(h),na(g,m),he("keypress",O,y),r(F,h),ie()}Le(["click"]);var Da=(F,s)=>a(s,!e(s)),Ma=L('<div class="search svelte-spg3op"><!></div>'),Na=(F,s,t)=>s(e(t)),Oa=L('<div role="button" tabindex="0" class="item svelte-spg3op"> </div>'),Ca=L('<div class="itemsContainer svelte-spg3op"><!> <div class="items noselect font-label svelte-spg3op"></div></div>'),Ra=L('<div class="wrapper svelte-spg3op"><div role="button" tabindex="0" class="icon svelte-spg3op"><!></div> <!></div>');function Fa(F,s){le(s,!0);let t=R(s,"items",31,()=>l([])),_=R(s,"onSelect",3,u=>{}),v=R(s,"mindWidth",3,130),w=R(s,"maxHeight",19,()=>t().length>4?175:120),b=R(s,"searchThreshold",11,5),m=x(l([])),f=x(!1);fe(()=>{t().length<=b()&&a(m,l(t()))});function I(u){a(f,!1),a(m,l(t())),_()(u)}var $=Ra(),y=o($);y.__click=[Da,f];var q=o(y);Ea(q,{}),n(y);var p=d(y,2);{var h=u=>{var D=Ca(),c=o(D);{var g=M=>{var N=Ma(),O=o(N);bt(O,{get items(){return t()},set items(A){t(A)},get resItems(){return e(m)},set resItems(A){a(m,l(A))}}),n(N),G(()=>Se(N,"max-width",`${v()}px`)),r(M,N)};z(c,M=>{t().length>b()&&M(g)})}var j=d(c,2);xe(j,21,()=>e(m),qe,(M,N)=>{var O=Oa();O.__click=[Na,I,N];var A=o(O,!0);n(O),G(()=>ee(A,e(N))),he("keypress",O,()=>I(e(N))),r(M,O)}),n(j),n(D),G(()=>{ue(D,"style",`min-width: ${v()??""}px; max-height: ${w()??""}px`),ue(j,"style",`width: ${v()??""}; max-height: ${(t().length>b()?w()-29:w())??""}px`)}),oe(7,D,()=>ce,()=>({duration:200})),r(u,D)};z(p,u=>{e(f)&&u(h)})}n($),he("keypress",y,()=>a(f,!e(f))),r(F,$),ie()}Le(["click"]);var Ba=(F,s,t)=>s()(t.label),Pa=L('<div class="label font-label svelte-jphwq"> <div role="button" tabindex="0" class="icon svelte-jphwq"><!></div></div>');function za(F,s){le(s,!0);let t=R(s,"onDelete",3,()=>{});var _=Pa(),v=o(_),w=d(v);w.__click=[Ba,t,s];var b=o(w);la(b,{color:"--var(--col-bg)",width:14}),n(w),n(_),G(()=>ee(v,`${s.label??""} `)),he("keypress",w,()=>t()(s.label)),r(F,_),ie()}Le(["click"]);var Wa=L('<div class="container svelte-1iraqg1"><!> <!></div>');function Pe(F,s){le(s,!0);let t=R(s,"items",15),_=R(s,"options",19,()=>[]),v=R(s,"searchThreshold",15,4),w=x(l([]));Ee(()=>{f()});async function b(h){t()||t([]),t().push(h),t([...t()]),await f()}async function m(h){t([...t().filter(u=>u!==h)]),await f()}async function f(){await Tt(),t()||t([]),a(w,l([..._().filter(h=>!t().includes(h))]))}var I=Wa(),$=o(I);{var y=h=>{var u=pe(),D=ve(u);xe(D,17,t,qe,(c,g,j)=>{za(c,{onDelete:m,get label(){return t()[j]},set label(M){t(t()[j]=M,!0)}})}),r(h,u)};z($,h=>{var u;((u=t())==null?void 0:u.length)>0&&h(y)})}var q=d($,2);{var p=h=>{Fa(h,{onSelect:b,get items(){return e(w)},set items(u){a(w,l(u))},get searchThreshold(){return v()},set searchThreshold(u){v(u)}})};z(q,h=>{e(w)&&e(w).length>0&&h(p)})}n(I),r(F,I),ie()}var Ga=L('<div class="success svelte-tl4x7h">Success</div>'),Ua=L('<div class="err svelte-tl4x7h"> </div>'),Va=L('<div class="container svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">USER ID</div> <div class="value font-mono svelte-tl4x7h"> </div></div> <div class="row svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">ENABLED</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">E-MAIL VERIFIED</div> <div class="value svelte-tl4x7h"><!></div></div></div> <!> <!> <!> <div class="unit language svelte-tl4x7h"><div class="label svelte-tl4x7h">LANGUAGE</div> <div style="margin-top: .085rem"><!></div></div> <!> <!> <!> <!> <!> <!> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">ROLES</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">GROUPS</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LIMIT LIFETIME</div> <div class="value svelte-tl4x7h"><!></div></div> <!> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">CREATED</div> <div class="value svelte-tl4x7h"> </div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LAST LOGIN</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">PASSWORD EXPIRES</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">MFA ACTIVE</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><!> <!> <!></div></div>');function Za(F,s){le(s,!0);let t=R(s,"user",31,()=>l({}));t().roles===void 0&&t(t().roles=[],!0),t().groups===void 0&&t(t().groups=[],!0);let _=x(""),v=x(!1),w=x(void 0),b=x(l(t().language.toUpperCase())),m=x(!!t().user_expires),f=x(l(Dt(()=>e(m))?Me(t().user_expires,!0):void 0)),I=x(l([]));tt.subscribe(i=>{a(I,l(i))});let $=x(l([]));at.subscribe(i=>{a($,l(i))}),fe(()=>{e(v)&&a(w,l(setTimeout(()=>{a(v,!1),s.onSave()},3e3)))});let y=x(l({}));const q=Je().shape({email:_e().required("E-Mail is required").email("Bad E-Mail format"),given_name:_e().trim().required("Given Name is required").matches(Qe,"Invalid characters"),family_name:_e().nullable().trim().matches(Qt,"Invalid characters")});let p=x(l({}));const h=Je().shape({birthdate:_e().nullable().trim().matches(ea,"Invalid characters"),phone:_e().nullable().trim().matches(ta,"Format: +..."),street:_e().nullable().trim().matches(aa,"Invalid characters"),zip:Kt().nullable().min(1e3).max(999999),city:_e().nullable().trim().matches(pt,"Invalid characters"),country:_e().nullable().trim().matches(pt,"Invalid characters")});Ee(()=>()=>clearTimeout(e(w)));function u(i){i.code==="Enter"&&D()}async function D(){if(!await c())return;a(_,""),console.log(t().user_values);const i={email:t().email,given_name:t().given_name,family_name:t().family_name||null,language:e(b).toLowerCase(),roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified,user_expires:null,user_values:t().user_values};if(i.user_values.phone&&(i.user_values.phone=i.user_values.phone.replaceAll(" ","")),i.user_values.zip&&(i.user_values.zip=Number.parseInt(i.user_values.zip)),e(m)){let H=gt(e(f));if(!H){a(_,"Invalid Date Input: User Expires");return}i.user_expires=H}let U=await vt(t().id,i);if(U.ok)a(v,!0);else{let H=await U.json();a(_,l(H.message))}}async function c(){let i=!0;try{await q.validate(t(),{abortEarly:!1}),a(y,l({}))}catch(U){a(y,l(et(U))),i=!1}try{await h.validate(t().user_values,{abortEarly:!1}),a(p,l({}))}catch(U){a(p,l(et(U))),i=!1}return i}var g=Va(),j=o(g),M=d(o(j),2),N=o(M,!0);n(M),n(j);var O=d(j,2);Se(O,"margin-top","-5px");var A=o(O);Se(A,"width","107px");var k=d(o(A),2),E=o(k);Re(E,{get selected(){return t().enabled},set selected(i){t(t().enabled=i,!0)}}),n(k),n(A);var Y=d(A,2);Se(Y,"width","135px");var J=d(o(Y),2),ae=o(J);Re(ae,{get selected(){return t().email_verified},set selected(i){t(t().email_verified=i,!0)}}),n(J),n(Y),n(O);var P=d(O,2);me(P,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return t().email},set value(i){t(t().email=i,!0)},get error(){return e(y).email},set error(i){e(y).email=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("E-MAIL");r(i,H)},$$slots:{default:!0}});var B=d(P,2);me(B,{autocomplete:"off",placeholder:"Given Name",get value(){return t().given_name},set value(i){t(t().given_name=i,!0)},get error(){return e(y).given_name},set error(i){e(y).given_name=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("GIVEN NAME");r(i,H)},$$slots:{default:!0}});var Z=d(B,2);me(Z,{autocomplete:"off",placeholder:"Family Name",get value(){return t().family_name},set value(i){t(t().family_name=i,!0)},get error(){return e(y).family_name},set error(i){e(y).family_name=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("FAMILY NAME");r(i,H)},$$slots:{default:!0}});var se=d(Z,2),S=d(o(se),2),C=o(S);Ke(C,{options:ft,get value(){return e(b)},set value(i){a(b,l(i))}}),n(S),n(se);var K=d(se,2);me(K,{autocomplete:"off",placeholder:"Street",get value(){return t().user_values.street},set value(i){t(t().user_values.street=i,!0)},get error(){return e(p).street},set error(i){e(p).street=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("STREET");r(i,H)},$$slots:{default:!0}});var T=d(K,2);me(T,{type:"number",autocomplete:"off",placeholder:"ZIP",min:1e3,max:999999,get value(){return t().user_values.zip},set value(i){t(t().user_values.zip=i,!0)},get error(){return e(p).zip},set error(i){e(p).zip=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("ZIP");r(i,H)},$$slots:{default:!0}});var W=d(T,2);me(W,{autocomplete:"off",placeholder:"City",get value(){return t().user_values.city},set value(i){t(t().user_values.city=i,!0)},get error(){return e(p).city},set error(i){e(p).city=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("CITY");r(i,H)},$$slots:{default:!0}});var V=d(W,2);me(V,{autocomplete:"off",placeholder:"Country",get value(){return t().user_values.country},set value(i){t(t().user_values.country=i,!0)},get error(){return e(p).country},set error(i){e(p).country=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("COUNTRY");r(i,H)},$$slots:{default:!0}});var ge=d(V,2);me(ge,{autocomplete:"off",placeholder:"Phone",get value(){return t().user_values.phone},set value(i){t(t().user_values.phone=i,!0)},get error(){return e(p).phone},set error(i){e(p).phone=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("PHONE");r(i,H)},$$slots:{default:!0}});var ye=d(ge,2);me(ye,{type:"date",autocomplete:"off",placeholder:"Birthdate",get value(){return t().user_values.birthdate},set value(i){t(t().user_values.birthdate=i,!0)},get error(){return e(p).birthdate},set error(i){e(p).birthdate=i},$$events:{keypress:u,input:c},children:(i,U)=>{Q();var H=X("BIRTHDATE");r(i,H)},$$slots:{default:!0}});var de=d(ye,2);Se(de,"margin-top","-3px");var Ie=d(o(de),2);Pe(Ie,{get options(){return e(I)},searchThreshold:4,get items(){return t().roles},set items(i){t(t().roles=i,!0)}}),n(de);var we=d(de,2),te=d(o(we),2);Pe(te,{get options(){return e($)},searchThreshold:4,get items(){return t().groups},set items(i){t(t().groups=i,!0)}}),n(we);var ne=d(we,2);Se(ne,"margin-top","12px");var re=d(o(ne),2),Ne=o(re);Re(Ne,{get selected(){return e(m)},set selected(i){a(m,l(i))}}),n(re),n(ne);var Te=d(ne,2);{var ze=i=>{var U=Ce(()=>sa(new Date));me(i,{type:"datetime-local",step:"60",width:"16rem",get min(){return e(U)},max:"2099-01-01T00:00",get value(){return e(f)},set value(H){a(f,l(H))},$$events:{input:c},children:(H,nr)=>{Q();var At=X("USER EXPIRES");r(H,At)},$$slots:{default:!0}})};z(Te,i=>{e(m)&&i(ze)})}var be=d(Te,2);Se(be,"margin-top","12px");var $e=d(o(be),2),Oe=o($e,!0);G(()=>ee(Oe,Me(t().created_at))),n($e),n(be);var je=d(be,2),De=d(o(je),2),Ae=o(De);{var We=i=>{var U=X();G(()=>ee(U,Me(t().last_login))),r(i,U)},Ge=i=>{var U=X("Never");r(i,U)};z(Ae,i=>{t().last_login?i(We):i(Ge,!1)})}n(De),n(je);var Ue=d(je,2),st=d(o(Ue),2),_t=o(st);{var xt=i=>{var U=X();G(()=>ee(U,Me(t().password_expires))),r(i,U)},kt=i=>{var U=X("Never");r(i,U)};z(_t,i=>{t().password_expires?i(xt):i(kt,!1)})}n(st),n(Ue);var Ve=d(Ue,2),rt=d(o(Ve),2),Et=o(rt),St=Ce(()=>!!t().webauthn_user_id);ia(Et,{get check(){return e(St)}}),n(rt),n(Ve);var lt=d(Ve,2),it=o(lt);ke(it,{level:1,width:"4rem",$$events:{click:D},children:(i,U)=>{Q();var H=X("SAVE");r(i,H)},$$slots:{default:!0}});var nt=d(it,2);{var It=i=>{var U=Ga();r(i,U)};z(nt,i=>{e(v)&&i(It)})}var Lt=d(nt,2);{var jt=i=>{var U=Ua(),H=o(U,!0);n(U),G(()=>ee(H,e(_))),r(i,U)};z(Lt,i=>{e(_)&&i(jt)})}n(lt),n(g),G(()=>ee(N,t().id)),r(F,g),ie()}var Xa=(F,s,t)=>s(e(t)),Ya=L('<button class="btn font-label svelte-n2aryx"> </button>'),Ha=L('<div class="bar noselect svelte-n2aryx"></div>');function Ka(F,s){let t=R(s,"labels",19,()=>[]),_=R(s,"selected",15);var v=Ha();xe(v,21,t,qe,(w,b)=>{var m=Ya();m.__click=[Xa,_,b];var f=o(m,!0);n(m),G(()=>{ue(m,"data-selected",_()===e(b)),ee(f,e(b))}),he("keypress",m,()=>_(e(b))),r(w,m)}),n(v),r(F,v)}Le(["click"]);var Ja=L('<div class="desc svelte-8ppjyk"><p><b>The user has not initialized this account yet.</b></p> <p>You may send out a new Reset E-Mail, if the user has not received one.</p></div> <!>',1),Qa=L(`<div class="desc svelte-8ppjyk"><p><b>This is a passkey only account type.</b></p> <p>This means, that this user is using the passwordless login flow only and does not have any password.</p> <p>If the user has lost all his keys and you have verified everything, you may reset his account type and
                send out a new reset E-Mail, so the user can get access again.</p> <p>To reset the account, navigate to 'MFA' and delete all registered keys for this user.</p></div>`),es=L(`<!> <!> <!> <!> <div class="desc svelte-8ppjyk">You can either set and reset a user's password<br> or send out a new reset E-Mail for self-service.</div> <!> <!>`,1),ts=L('<div class="success svelte-8ppjyk">Success</div>'),as=L('<div class="err svelte-8ppjyk"> </div>'),ss=L('<div class="err svelte-8ppjyk"> </div>'),rs=L('<div class="container svelte-8ppjyk"><!> <!> <!> <!></div>');function ls(F,s){le(s,!0);let t=R(s,"user",27,()=>l({}));const _="inherit";let v=x(!1),w=x(""),b=x(""),m=x(!1),f=x(!1),I=x(void 0),$="330px",y=x(void 0),q=x(!1),p=l({new:"",verify:""});fe(()=>{e(f)&&a(I,l(setTimeout(()=>{a(f,!1),s.onSave()},3e3)))}),Ee(async()=>{if(!e(y)){let P=await da(),B=await P.json();P.ok?a(y,l(B)):a(b,l(B.message))}});async function h(){return a(b,""),await u()?e(q)?!0:(a(b,"You must follow the password policy"),!1):!1}async function u(){return a(b,""),p.new.length>256?(a(b,"max 256 characters"),!1):p.new!==p.verify?(a(b,"New passwords do not match"),!1):!0}async function D(){let P={email:t().email};a(w,""),a(v,!0);let B=await Nt(P);if(B.ok)a(m,!0);else{let Z=await B.json();a(w,l(Z.message))}a(v,!1)}async function c(){let P={email:t().email,given_name:t().given_name,family_name:t().family_name,roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified};if(p.new.length>0){if(!(await u()&&await h()))return;P.password=p.new}a(b,""),a(v,!0);let B=await vt(t().id,P);if(B.ok)a(f,!0);else{let Z=await B.json();a(b,l(Z.message))}a(v,!1)}function g(){const P=e(y).length_min>24?e(y).length_min:24;let B=ra(P,e(y).include_lower_case,e(y).include_upper_case,e(y).include_digits,e(y).include_special);p.new=B,p.verify=B}var j=rs(),M=o(j);{var N=P=>{var B=Ja(),Z=d(ve(B),2);ke(Z,{width:_,level:2,get isLoading(){return e(v)},set isLoading(se){a(v,l(se))},$$events:{click:D},children:(se,S)=>{Q();var C=X("SEND RESET E-MAIL");r(se,C)},$$slots:{default:!0}}),r(P,B)},O=P=>{var B=pe(),Z=ve(B);{var se=C=>{var K=Qa();r(C,K)},S=C=>{var K=es(),T=ve(K);{var W=te=>{oa(te,{get password(){return p.new},get policy(){return e(y)},get accepted(){return e(q)},set accepted(ne){a(q,l(ne))}})};z(T,te=>{e(y)&&te(W)})}var V=d(T,2),ge=Ce(()=>p.new.length>0&&p.new===p.verify);yt(V,{type:"password",get width(){return $},autocomplete:"off",get showCopy(){return e(ge)},get value(){return p.new},set value(te){p.new=te},$$events:{blur:u},children:(te,ne)=>{Q();var re=X("New Password");r(te,re)},$$slots:{default:!0}});var ye=d(V,2);yt(ye,{type:"password",get width(){return $},autocomplete:"off",get value(){return p.verify},set value(te){p.verify=te},$$events:{blur:u},children:(te,ne)=>{Q();var re=X("New Password");r(te,re)},$$slots:{default:!0}});var de=d(ye,2);ke(de,{width:_,level:3,$$events:{click:g},children:(te,ne)=>{Q();var re=X("GENERATE RANDOM");r(te,re)},$$slots:{default:!0}});var Ie=d(de,4);ke(Ie,{width:_,level:1,get isLoading(){return e(v)},set isLoading(te){a(v,l(te))},$$events:{click:D},children:(te,ne)=>{Q();var re=X("SEND RESET E-MAIL");r(te,re)},$$slots:{default:!0}});var we=d(Ie,2);ke(we,{width:_,get isLoading(){return e(v)},set isLoading(te){a(v,l(te))},$$events:{click:c},children:(te,ne)=>{Q();var re=X("SAVE PASSWORD");r(te,re)},$$slots:{default:!0}}),r(C,K)};z(Z,C=>{t().account_type==="passkey"?C(se):C(S,!1)},!0)}r(P,B)};z(M,P=>{t().account_type==="new"?P(N):P(O,!1)})}var A=d(M,2);{var k=P=>{var B=ts();r(P,B)};z(A,P=>{(e(f)||e(m))&&P(k)})}var E=d(A,2);{var Y=P=>{var B=as(),Z=o(B,!0);n(B),G(()=>ee(Z,e(b))),r(P,B)};z(E,P=>{e(b)&&P(Y)})}var J=d(E,2);{var ae=P=>{var B=ss(),Z=o(B,!0);n(B),G(()=>ee(Z,e(w))),r(P,B)};z(J,P=>{e(w)&&P(ae)})}n(j),r(F,j),ie()}var is=L('<div class="err svelte-1jljqe9"> </div>'),ns=L('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this user?</div> <!> <!></div>');function vs(F,s){le(s,!0);let t=R(s,"user",27,()=>l({})),_=x(!1),v=x("");async function w(){a(v,""),a(_,!0);let $=await Ot(t().id);if($.ok)s.onSave();else{let y=await $.json();a(v,l(y.message))}a(_,!1)}var b=ns(),m=d(o(b),2);ke(m,{level:1,width:"5rem",get isLoading(){return e(_)},set isLoading($){a(_,l($))},$$events:{click:w},children:($,y)=>{Q();var q=X("DELETE");r($,q)},$$slots:{default:!0}});var f=d(m,2);{var I=$=>{var y=is(),q=o(y,!0);n(y),G(()=>ee(q,e(v))),r($,y)};z(f,$=>{e(v)&&$(I)})}n(b),r(F,b),ie()}var os=L('<div class="err svelte-1ofwsjt"> </div>'),ds=L('<div class="success svelte-1ofwsjt">Success</div>'),cs=L('<div class="container svelte-1ofwsjt"><div class="label svelte-1ofwsjt">Invalidate all existing sessions and refresh tokens for this user?</div> <!> <!></div>');function us(F,s){le(s,!0);let t=R(s,"user",27,()=>l({})),_=x(!1),v=x(""),w=x(!1);async function b(){a(v,""),a(_,!0);let q=await Ct(t().id);if(q.ok)a(w,!0);else{let p=await q.json();a(v,l(p.message))}a(_,!1)}var m=cs(),f=d(o(m),2);ke(f,{level:1,get isLoading(){return e(_)},set isLoading(q){a(_,l(q))},$$events:{click:b},children:(q,p)=>{Q();var h=X("LOGOUT");r(q,h)},$$slots:{default:!0}});var I=d(f,2);{var $=q=>{var p=os(),h=o(p,!0);n(p),G(()=>ee(h,e(v))),r(q,p)},y=q=>{var p=pe(),h=ve(p);{var u=D=>{var c=ds();r(D,c)};z(h,D=>{e(w)&&D(u)},!0)}r(q,p)};z(I,q=>{e(v)?q($):q(y,!1)})}n(m),r(F,m),ie()}var ms=L('<div class="success svelte-iv4fzr">Success</div>'),hs=L('<div class="err svelte-iv4fzr"> </div>'),ps=L('<div class="container svelte-iv4fzr"><div class="desc svelte-iv4fzr">Set custom user attributes.<br> All Key / Value pairs will be handled as String / String.</div> <!> <!> <!> <!></div>');function fs(F,s){le(s,!0);let t=x(""),_=x(l([])),v=x(!1),w=x(!1);Ee(()=>{f()});async function b(){let c=await Rt();if(!c.ok)a(t,"Error fetching attr: "+c.body.message);else return await c.json()}async function m(){let c=await Ft(s.user.id);if(!c.ok)a(t,"Error fetching user attr: "+c.body.message);else return await c.json()}async function f(){let c=await b(),g=c.values;if(c){let j=await m();if(j){let M=new Map;for(let N of j.values)M.set(N.key,N.value||"");for(let N of g){let O=M.get(N.name);O?N.value=O:N.value=""}a(_,l([...g]))}}}async function I(){a(t,""),a(w,!0);let c=[];for(let N of e(_)){let O={key:N.name,value:N.value};c.push(O)}let g={values:c},j=await Bt(s.user.id,g),M=await j.json();j.ok?a(v,!0):a(t,l(M.message)),s.onSave(),a(w,!1)}var $=ps(),y=d(o($),2);xe(y,17,()=>e(_),qe,(c,g,j)=>{var M=Ce(()=>e(g).desc||"JSON Value");me(c,{style:"width: 350px",autocomplete:"off",get placeholder(){return e(M)},get value(){return e(g).value},set value(N){e(g).value=N},children:(N,O)=>{Q();var A=X();G(()=>ee(A,e(g).name)),r(N,A)},$$slots:{default:!0}})});var q=d(y,2);ke(q,{get isLoading(){return e(w)},level:1,width:"4rem",$$events:{click:I},children:(c,g)=>{Q();var j=X("SAVE");r(c,j)},$$slots:{default:!0}});var p=d(q,2);{var h=c=>{var g=ms();r(c,g)};z(p,c=>{e(v)&&c(h)})}var u=d(p,2);{var D=c=>{var g=hs(),j=o(g,!0);n(g),G(()=>ee(j,e(t))),r(c,g)};z(u,c=>{e(t)&&c(D)})}n($),r(F,$),ie()}var gs=L('<div class="desc svelte-1a9qw6n">This user does not have any active MFA keys.</div>'),ys=L('<div class="keyContainer svelte-1a9qw6n"><div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Passkey Name:</div> <b> </b></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Key Registered:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Last Usage:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n"></div> <div class="deleteBtn svelte-1a9qw6n"><!></div></div></div>'),ws=L('<div class="desc svelte-1a9qw6n">You can delete the users MFA / Security Keys.<br> Be careful though, since this <b>cannot be reverted</b> without user interaction.<br> This is useful, if a user lost his keys and he is not able to log in any more.</div> <div class="keysContainer svelte-1a9qw6n"></div>',1),bs=L('<div class="err svelte-1a9qw6n"> </div>'),$s=L('<div class="container svelte-1a9qw6n"><!> <!></div>');function _s(F,s){le(s,!0);let t=R(s,"user",27,()=>l({})),_=x(""),v=x(l([]));Ee(async()=>{await w()});async function w(){let p=await ca(t().id),h=await p.json();p.ok?a(v,l(h)):console.error("error fetching passkeys: "+h.message)}async function b(p){let h=e(v).length===1,u=await ua(t().id,p);if(u.status===200)return await w(),h&&s.onSave(),!0;{let D=await u.json();return a(_,l(D.message)),!1}}var m=$s(),f=o(m);{var I=p=>{var h=gs();r(p,h)},$=p=>{var h=ws(),u=d(ve(h),2);xe(u,21,()=>e(v),D=>D.name,(D,c)=>{var g=ys(),j=o(g),M=d(o(j),2),N=o(M,!0);n(M),n(j);var O=d(j,2),A=d(o(O),2),k=o(A,!0);G(()=>ee(k,Me(e(c).registered))),n(A),n(O);var E=d(O,2),Y=d(o(E),2),J=o(Y,!0);G(()=>ee(J,Me(e(c).last_used))),n(Y),n(E);var ae=d(E,2),P=d(o(ae),2),B=o(P);ke(B,{level:4,$$events:{click:()=>b(e(c).name)},children:(Z,se)=>{Q();var S=X("DELETE");r(Z,S)},$$slots:{default:!0}}),n(P),n(ae),n(g),G(()=>ee(N,e(c).name)),r(D,g)}),n(u),r(p,h)};z(f,p=>{e(v).length<1?p(I):p($,!1)})}var y=d(f,2);{var q=p=>{var h=bs(),u=o(h,!0);n(h),G(()=>ee(u,e(_))),r(p,h)};z(y,p=>{e(_)&&p(q)})}n(m),r(F,m),ie()}var xs=L('<div class="container svelte-nw2ucx"><!></div>');function ks(F,s){le(s,!0);var t=xs(),_=o(t);pa(_,{get userId(){return s.user.id}}),n(t),r(F,t),ie()}var Es=L('<div class="data font-mono svelte-115hohv"> </div>'),Ss=L('<div class="data svelte-115hohv"> </div>'),Is=L('<div class="header svelte-115hohv"><!> <!></div>'),Ls=L("<div><!></div>"),js=L("<div><!></div>"),As=L("<div><!></div>"),qs=L("<div><!></div>"),Ts=L("<div><!></div>"),Ds=L("<div><!></div>"),Ms=L("<div><!></div>"),Ns=L("<!> <!>",1),Os=L("<div><!></div>");function $t(F,s){le(s,!0);let t=R(s,"userEmail",3,""),_=R(s,"userId",3,""),v=R(s,"onSave",15),w=x(void 0),b=x(!0),m=x(void 0);const f=["Info","Attributes","Password","MFA","Devices","Logout","Delete"];let I=x(l(f[0]));const $=200,y=$/2;async function q(){const h=await ma(_());if(h.ok)a(w,l(await h.json()));else{let u=await h.json();console.error(u)}a(b,!1)}function p(){a(m,!1),v()()}fe(()=>{e(m)&&q()}),wt(F,{get show(){return e(m)},set show(h){a(m,l(h))},header:h=>{var u=Is(),D=o(u);Be(D,{text:"User ID",children:(g,j)=>{var M=Es(),N=o(M,!0);n(M),G(()=>ee(N,_())),r(g,M)},$$slots:{default:!0}});var c=d(D,2);Be(c,{text:"E-Mail",children:(g,j)=>{var M=Ss(),N=o(M,!0);n(M),G(()=>ee(N,t())),r(g,M)},$$slots:{default:!0}}),n(u),r(h,u)},body:h=>{var u=Os(),D=o(u);{var c=j=>{ha(j,{})},g=j=>{var M=Ns(),N=ve(M);Ka(N,{labels:f,get selected(){return e(I)},set selected(E){a(I,l(E))}});var O=d(N,2);{var A=E=>{var Y=Ls(),J=o(Y);Za(J,{get user(){return e(w)},set user(ae){a(w,l(ae))},get onSave(){return v()},set onSave(ae){v(ae)}}),n(Y),oe(5,Y,()=>ce,()=>({delay:y,duration:$})),oe(6,Y,()=>ce,()=>({duration:$})),r(E,Y)},k=E=>{var Y=pe(),J=ve(Y);{var ae=B=>{var Z=js(),se=o(Z);fs(se,{get user(){return e(w)},set user(S){a(w,l(S))},get onSave(){return v()},set onSave(S){v(S)}}),n(Z),oe(5,Z,()=>ce,()=>({delay:y,duration:$})),oe(6,Z,()=>ce,()=>({duration:$})),r(B,Z)},P=B=>{var Z=pe(),se=ve(Z);{var S=K=>{var T=As(),W=o(T);ls(W,{get user(){return e(w)},set user(V){a(w,l(V))},get onSave(){return v()},set onSave(V){v(V)}}),n(T),oe(5,T,()=>ce,()=>({delay:y,duration:$})),oe(6,T,()=>ce,()=>({duration:$})),r(K,T)},C=K=>{var T=pe(),W=ve(T);{var V=ye=>{var de=qs(),Ie=o(de);_s(Ie,{get user(){return e(w)},set user(we){a(w,l(we))},get onSave(){return v()},set onSave(we){v(we)}}),n(de),oe(5,de,()=>ce,()=>({delay:y,duration:$})),oe(6,de,()=>ce,()=>({duration:$})),r(ye,de)},ge=ye=>{var de=pe(),Ie=ve(de);{var we=ne=>{var re=Ts(),Ne=o(re);ks(Ne,{get user(){return e(w)},set user(Te){a(w,l(Te))}}),n(re),oe(5,re,()=>ce,()=>({delay:y,duration:$})),oe(6,re,()=>ce,()=>({duration:$})),r(ne,re)},te=ne=>{var re=pe(),Ne=ve(re);{var Te=be=>{var $e=Ds(),Oe=o($e);us(Oe,{get user(){return e(w)},set user(je){a(w,l(je))}}),n($e),oe(5,$e,()=>ce,()=>({delay:y,duration:$})),oe(6,$e,()=>ce,()=>({duration:$})),r(be,$e)},ze=be=>{var $e=pe(),Oe=ve($e);{var je=De=>{var Ae=Ms(),We=o(Ae);vs(We,{onSave:p,get user(){return e(w)},set user(Ge){a(w,l(Ge))}}),n(Ae),oe(5,Ae,()=>ce,()=>({delay:y,duration:$})),oe(6,Ae,()=>ce,()=>({duration:$})),r(De,Ae)};z(Oe,De=>{e(I)==="Delete"&&De(je)},!0)}r(be,$e)};z(Ne,be=>{e(I)==="Logout"?be(Te):be(ze,!1)},!0)}r(ne,re)};z(Ie,ne=>{e(I)==="Devices"?ne(we):ne(te,!1)},!0)}r(ye,de)};z(W,ye=>{e(I)==="MFA"?ye(V):ye(ge,!1)},!0)}r(K,T)};z(se,K=>{e(I)==="Password"?K(S):K(C,!1)},!0)}r(B,Z)};z(J,B=>{e(I)==="Attributes"?B(ae):B(P,!1)},!0)}r(E,Y)};z(O,E=>{e(I)==="Info"?E(A):E(k,!1)})}r(j,M)};z(D,j=>{e(b)?j(c):j(g,!1)})}n(u),r(h,u)},$$slots:{header:!0,body:!0}}),ie()}var Cs=L('<div class="header font-label svelte-1y7ceqm">ADD NEW USER</div>'),Rs=L('<div class="err svelte-1y7ceqm"> </div>'),Fs=L('<div class="container svelte-1y7ceqm"><!> <!> <!> <div class="language svelte-1y7ceqm"><div class="label svelte-1y7ceqm">LANGUAGE</div> <div style="margin-top: .4rem"><!></div></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">ROLES</div> <!></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">GROUPS</div> <!></div> <div class="unit svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">LIMIT LIFETIME</div> <div class="value"><!></div></div> <!> <div class="btn svelte-1y7ceqm"><!> <!></div></div>');function Bs(F,s){le(s,!0);let t=R(s,"idx",31,()=>-1),_=x(""),v=x(void 0),w=x("EN"),b=x(!1),m=x(void 0),f=x(l({email:"",family_name:"",given_name:"",roles:[],groups:[]})),I=x(l({}));const $=Je().shape({email:_e().required("E-Mail is required").email("Bad E-Mail format"),given_name:_e().trim().required("Given Name is required").matches(Qe,"Invalid characters"),family_name:_e().trim().required("Family Name is required").matches(Qe,"Invalid characters")});let y=x(void 0);tt.subscribe(u=>{a(y,l(u))});let q=x(void 0);at.subscribe(u=>{a(q,l(u))});async function p(){if(!await h())return;a(_,"");let u=e(f);if(u.language=e(w).toLowerCase(),e(b)){let c=gt(e(m));if(!c){a(_,"Invalid Date Input: User Expires");return}u.user_expires=c}let D=await Pt(e(f));if(D.ok)a(f,l({})),a(v,!1),a(f,l({email:"",family_name:"",given_name:"",roles:[],groups:[]})),s.onSave();else{let c=await D.json();a(_,l(c.message))}}async function h(){try{return await $.validate(e(f),{abortEarly:!1}),a(I,l({})),!0}catch(u){return a(I,l(et(u))),!1}}wt(F,{get idx(){return t()},set idx(u){t(u)},get show(){return e(v)},set show(u){a(v,l(u))},header:u=>{var D=Cs();r(u,D)},body:u=>{var D=Fs(),c=o(D);me(c,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return e(f).email},set value(T){e(f).email=T},get error(){return e(I).email},set error(T){e(I).email=T},$$events:{input:h},children:(T,W)=>{Q();var V=X("E-MAIL");r(T,V)},$$slots:{default:!0}});var g=d(c,2);me(g,{autocomplete:"off",placeholder:"Given Name",get value(){return e(f).given_name},set value(T){e(f).given_name=T},get error(){return e(I).given_name},set error(T){e(I).given_name=T},$$events:{input:h},children:(T,W)=>{Q();var V=X("GIVEN NAME");r(T,V)},$$slots:{default:!0}});var j=d(g,2);me(j,{autocomplete:"off",placeholder:"Family Name",get value(){return e(f).family_name},set value(T){e(f).family_name=T},get error(){return e(I).family_name},set error(T){e(I).family_name=T},$$events:{input:h},children:(T,W)=>{Q();var V=X("FAMILY NAME");r(T,V)},$$slots:{default:!0}});var M=d(j,2),N=d(o(M),2),O=o(N);Ke(O,{options:ft,get value(){return e(w)},set value(T){a(w,l(T))}}),n(N),n(M);var A=d(M,2),k=d(o(A),2);Pe(k,{get options(){return e(y)},searchThreshold:4,get items(){return e(f).roles},set items(T){e(f).roles=T}}),n(A);var E=d(A,2),Y=d(o(E),2);Pe(Y,{get options(){return e(q)},searchThreshold:4,get items(){return e(f).groups},set items(T){e(f).groups=T}}),n(E);var J=d(E,2);Se(J,"margin-top","12px");var ae=d(o(J),2),P=o(ae);Re(P,{get selected(){return e(b)},set selected(T){a(b,l(T))}}),n(ae),n(J);var B=d(J,2);{var Z=T=>{me(T,{type:"datetime-local",step:"60",width:"18rem",get min(){return new Date().toISOString().split(".")[0]},max:"2099-01-01T00:00",get value(){return e(m)},set value(W){a(m,l(W))},$$events:{input:h},children:(W,V)=>{Q();var ge=X("USER EXPIRES");r(W,ge)},$$slots:{default:!0}})};z(B,T=>{e(b)&&T(Z)})}var se=d(B,2),S=o(se);ke(S,{level:1,$$events:{click:p},children:(T,W)=>{Q();var V=X("SAVE");r(T,V)},$$slots:{default:!0}});var C=d(S,2);{var K=T=>{var W=Rs(),V=o(W,!0);n(W),G(()=>ee(V,e(_))),r(T,W)};z(C,T=>{e(_)&&T(K)})}n(se),n(D),r(u,D)},$$slots:{header:!0,body:!0}}),ie()}var Ps=L("<option> </option>"),zs=L('<select class="opts font-label svelte-t7wy0q"></select>'),Ws=L('<div role="button" tabindex="0" class="icon svelte-t7wy0q"><!></div>'),Gs=L('<div class="container svelte-t7wy0q"><!> <!></div>');function Us(F,s){le(s,!0);let t=R(s,"items",19,()=>[]),_=R(s,"resItems",15),v=R(s,"options",19,()=>[]),w=R(s,"firstDirReverse",3,!1),b=x(""),m=x(1),f;Ee(()=>{v().length>0&&(a(b,l(v()[0].label)),I()),w()&&y(),$()});function I(){for(let c of v())if(c.label===e(b)){f=c.callback;break}f||console.error("Could not find a valid callback function in order options for label "+e(b))}function $(){if(f){let c=[...t()];c.sort((g,j)=>f(g,j)*e(m)),_([...c])}}function y(){a(m,e(m)*-1),$()}fe(()=>{t()&&$()}),fe(()=>{e(b)&&(I(),$())});var q=Gs(),p=o(q);{var h=c=>{Be(c,{text:"Order by",yOffset:-30,children:(g,j)=>{var M=zs();xe(M,21,v,qe,(N,O)=>{var A=Ps(),k={},E=o(A,!0);n(A),G(()=>{k!==(k=e(O).label)&&(A.value=(A.__value=e(O).label)==null?"":e(O).label),ee(E,e(O).label)}),r(N,A)}),n(M),mt(M,()=>e(b),N=>a(b,N)),r(g,M)},$$slots:{default:!0}})};z(p,c=>{v().length>1&&c(h)})}var u=d(p,2);{var D=c=>{var g=Ws();g.__click=y;var j=o(g);{var M=O=>{fa(O,{})},N=O=>{ga(O,{})};z(j,O=>{e(m)===1?O(M):O(N,!1)})}n(g),he("keypress",g,y),r(c,g)};z(u,c=>{v().length>0&&c(D)})}n(q),r(F,q),ie()}Le(["click"]);var Vs=L('<div class="divider svelte-16rtgja"></div>'),Zs=L('<div class="container svelte-16rtgja"><div><!></div> <!> <div><!></div></div>');function Xs(F,s){le(s,!0);let t=R(s,"items",31,()=>l([])),_=R(s,"resItems",15),v=R(s,"searchOptions",27,()=>l([])),w=R(s,"orderOptions",27,()=>l([])),b=R(s,"firstDirReverse",3,!1),m=R(s,"useServerSideIdx",15,""),f=R(s,"isSearchFiltered",15,!1),I=R(s,"search",15,""),$=x(l([]));var y=Zs(),q=o(y),p=o(q);Us(p,{get items(){return e($)},get options(){return w()},get firstDirReverse(){return b()},get resItems(){return _()},set resItems(g){_(g)}}),n(q);var h=d(q,2);{var u=g=>{var j=Vs();r(g,j)};z(h,g=>{w().length>0&&g(u)})}var D=d(h,2),c=o(D);bt(c,{get options(){return v()},get items(){return t()},set items(g){t(g)},get resItems(){return e($)},set resItems(g){a($,l(g))},get useServerSideIdx(){return m()},set useServerSideIdx(g){m(g)},get isSearchFiltered(){return f()},set isSearchFiltered(g){f(g)},get search(){return I()},set search(g){I(g)}}),n(D),n(y),r(F,y),ie()}var Ys=(F,s)=>a(s,e(s)-1),Hs=L('<div role="button" tabindex="0" class="icon iconLeft svelte-9iw34a"><!></div>'),Ks=(F,s,t)=>a(s,l(e(t))),Js=L('<div role="button" tabindex="0" class="link noselect svelte-9iw34a"> </div>'),Qs=(F,s)=>a(s,e(s)+1),er=L('<div role="button" tabindex="0" class="icon iconRight svelte-9iw34a"><!></div>'),tr=L('<div class="container svelte-9iw34a"><!> <div class="links svelte-9iw34a"></div> <!> <div class="chunkSize noselect svelte-9iw34a">Entries <!></div> <div class="font-label total svelte-9iw34a"> </div></div>');function ar(F,s){le(s,!0);let t=R(s,"items",27,()=>l([])),_=R(s,"resItems",31,()=>l([]));const v=[5,7,10,15,20,30,50,100],w=16;let b=x(l([])),m=x(1),f=5,I=x(15),$=x(!1),y=x(!1),q=x(l([]));fe(()=>{e(I)&&a(m,1)}),fe(()=>{if(e(I)&&t().length>0){let A=[];for(let k=0;k<t().length;k+=e(I)){const E=t().slice(k,k+e(I));A.push(E)}a(b,l(A)),_(e(b)[e(m)-1])}}),fe(()=>{if(e(m)){let A=[],k=Math.floor(f/2);if(e(b).length<=f){for(let E=1;E<=e(b).length;E++)A.push(E);a($,!1),a(y,!1)}else if(e(m)<=k){for(let E=1;E<=f;E++)A.push(E);a($,!1),a(y,!0)}else if(e(m)>e(b).length-k-1){for(let E=e(b).length-f;E<=e(b).length-1;E++)A.push(E+1);a($,!0),a(y,!1)}else{for(let E=e(m)-k;E<e(m)-k+f;E++)A.push(E);a($,!0),a(y,!0)}a(q,l(A))}});var p=tr(),h=o(p);{var u=A=>{var k=Hs();k.__click=[Ys,m];var E=o(k);He(E,{width:w}),n(k),he("keypress",k,()=>a(m,e(m)-1)),r(A,k)};z(h,A=>{e($)&&A(u)})}var D=d(h,2);xe(D,21,()=>e(q),qe,(A,k)=>{var E=Js();E.__click=[Ks,m,k];var Y=o(E,!0);n(E),G(()=>{Xt(E,"selected",e(m)===e(k)),ee(Y,e(k))}),he("keypress",E,()=>a(m,l(e(k)))),r(A,E)}),n(D);var c=d(D,2);{var g=A=>{var k=er();k.__click=[Qs,m];var E=o(k);He(E,{width:w}),n(k),he("keypress",k,()=>a(m,e(m)+1)),r(A,k)};z(c,A=>{e(y)&&A(g)})}var j=d(c,2),M=d(o(j));Ke(M,{options:v,width:"50px",get value(){return e(I)},set value(A){a(I,l(A))}}),n(j);var N=d(j,2),O=o(N);n(N),n(p),G(()=>ee(O,`Total: ${t().length??""}`)),r(F,p),ie()}Le(["click"]);var sr=L('<div class="svelte-1n3c0ep"><!></div>'),rr=L('<div class="svelte-1n3c0ep"><!></div>'),lr=L(' <div class="content"><!> <!> <div id="users" class="svelte-1n3c0ep"><!></div> <!></div>',1);function ir(F,s){le(s,!0);let t=x(""),_=x(l([])),v=x(l([])),w=x(l([])),b=x(""),m=x(!1),f=x(""),I=x(0),$=x(15),y=x(""),q=x(1),p=x(l([{label:"E-Mail",callback:(S,C)=>S.email.toLowerCase().includes(C.toLowerCase())},{label:"ID",callback:(S,C)=>S.id.toLowerCase().includes(C.toLowerCase())}])),h=x(l([{label:"E-Mail",callback:(S,C)=>S.email.localeCompare(C.email)},{label:"ID",callback:(S,C)=>S.id.localeCompare(C.id)},{label:"Created",callback:(S,C)=>S.created_at<C.created_at},{label:"Last Login",callback:(S,C)=>{let K=S.last_login||9999999999,T=C.last_login||9999999999;return K<T}}]));Ee(async()=>{u(),g(),j()});async function u(S,C,K,T){let W;if(S===!0?K&&e(q)===2?W=await ot(T||e($),C,void 0,!1):W=await ot(T||e($),C,e(y),K):W=await zt(),!W.ok)a(t,"Error fetching users: "+W.body.message);else{W.status===206?(a($,l(Number.parseInt(W.headers.get("x-page-size"),10))),a(b,"user"),W.headers.get("x-continuation-token"),a(y,l(W.headers.get("x-continuation-token")))):a(b,""),a(I,l(W.headers.get("x-user-count")));let V=await W.json();a(_,l([...V])),a(v,l([...V]))}}async function D(S,C){await u(!0,S,C),C?a(q,e(q)-1):a(q,e(q)+1)}async function c(S){a(y,""),await u(!0,0,!1,S),a(q,1)}async function g(){let S=await Wt();if(!S.ok)a(t,"Error fetching roles: "+S.body.message);else{let C=await S.json();_a.set(C),tt.set(C.map(K=>K.name))}}async function j(){let S=await Gt();if(!S.ok)a(t,"Error fetching groups: "+S.body.message);else{let C=await S.json();xa.set(C),at.set(C.map(K=>K.name))}}function M(){u(),g(),j(),a(f,"")}Q();var N=lr(),O=ve(N),A=d(O),k=o(A);Xs(k,{get items(){return e(_)},get resItems(){return e(v)},set resItems(S){a(v,l(S))},get searchOptions(){return e(p)},set searchOptions(S){a(p,l(S))},get orderOptions(){return e(h)},set orderOptions(S){a(h,l(S))},get useServerSideIdx(){return e(b)},set useServerSideIdx(S){a(b,l(S))},get isSearchFiltered(){return e(m)},set isSearchFiltered(S){a(m,l(S))},get search(){return e(f)},set search(S){a(f,l(S))}});var E=d(k,2);Bs(E,{onSave:M});var Y=d(E,2),J=o(Y);{var ae=S=>{var C=pe(),K=ve(C);xe(K,17,()=>e(v),T=>T.id,(T,W)=>{var V=sr(),ge=o(V);$t(ge,{get userId(){return e(W).id},get userEmail(){return e(W).email},onSave:M}),n(V),r(T,V)}),r(S,C)},P=S=>{var C=pe(),K=ve(C);xe(K,17,()=>e(w),T=>T.id,(T,W)=>{var V=rr(),ge=o(V);$t(ge,{get userId(){return e(W).id},get userEmail(){return e(W).email},onSave:M}),n(V),r(T,V)}),r(S,C)};z(J,S=>{e(b)&&!e(m)?S(ae):S(P,!1)})}n(Y);var B=d(Y,2);{var Z=S=>{Yt(S,{get itemsTotal(){return e(I)},fetchPageCallback:D,sspPageSizeChange:c,get sspPage(){return e(q)},set sspPage(C){a(q,l(C))},get sspPageSize(){return e($)},set sspPageSize(C){a($,l(C))},get sspContinuationToken(){return e(y)},set sspContinuationToken(C){a(y,l(C))}})},se=S=>{ar(S,{get items(){return e(v)},set items(C){a(v,l(C))},get resItems(){return e(w)},set resItems(C){a(w,l(C))}})};z(B,S=>{e(b)&&!e(m)?S(Z):S(se,!1)})}n(A),G(()=>ee(O,`${e(t)??""} `)),r(F,N),ie()}export{ir as U};
