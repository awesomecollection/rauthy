import{w as ke,x as se,y as re,F as Ce,I as oe,a0 as Te,aD as je,aB as Be,A as De,a1 as Ie,a2 as Le,W as Me,V as Oe,ai as Ee,a6 as k,p as H,o as ie,j as X,aZ as Ae,a7 as p,n as Xe,a5 as L,g as T,a9 as h,a as P,a3 as Y,a4 as F,d as Ne,a8 as W,h as Se}from"./index-client.Bsb9hq-M.js";import{j as He,w as ne,d as le,e as Z,s as M}from"./render.Cl_nSOQQ.js";import"./disclose-version.BDr9Qe-U.js";import{i as E}from"./if.Mw_hWmq0.js";import{d as ve,e as Pe,a as u,n as de,t as B,b as N,c as G}from"./template.D54H5ZkF.js";import{s as q}from"./snippet.DdpBggvk.js";import{a as y,i as ce,l as We,b as ue,f as Ye,t as me,c as qe,e as ze,g as Fe}from"./index.DiuQmtU3.js";import{p as S}from"./proxy.DclUEOHG.js";import{p as I,s as fe,a as Re,b as pe}from"./props.CcMnSFiY.js";import{r as Ve}from"./legacy-client.QbOhT8wP.js";import{w as Ze}from"./index.BaJiGNss.js";import{f as he,B as J,c as Ge,d as Je,e as Ke}from"./ThemeSwitch.Zeh_8WtX.js";import{u as K}from"./i18n.svelte.B0RF3bDg.js";import{O as Qe,r as Ue,y as we,E as Q}from"./helpers.Cfg4Q1a_.js";import{I as ea,a as aa}from"./patterns.CYl4_uw6.js";function be(r,e,a,n,o){var t=r,l="",i;ke(()=>{if(l===(l=e()??"")){se&&re();return}i!==void 0&&(Le(i),i=void 0),l!==""&&(i=Ce(()=>{if(se){oe.data;for(var s=re(),v=s;s!==null&&(s.nodeType!==8||s.data!=="");)v=s,s=Te(s);if(s===null)throw je(),Be;ve(oe,v),t=De(s);return}var d=l+"",m=Pe(d);ve(Ie(m),m.lastChild),t.before(m)}))})}function ta(r,e,a=e){var n=r==="x",o=()=>ne(()=>{t=!0,clearTimeout(l),l=setTimeout(i,100),a(window[n?"scrollX":"scrollY"])});addEventListener("scroll",o,{passive:!0});var t=!1,l,i=()=>{t=!1},s=!0;Me(()=>{var v=e();s?s=!1:!t&&v!=null&&(t=!0,clearTimeout(l),scrollTo(window.scrollX,v),l=setTimeout(i,100))}),Oe(o),Ee(()=>{removeEventListener("scroll",o)})}function sa(r,e){He(window,["resize"],()=>ne(()=>e(window[r])))}var ra=de('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function ge(r,e){let a=I(e,"opacity",3,.9),n=I(e,"width",3,"1.5rem"),o=I(e,"color",3,"hsl(var(--error))");var t=ra();y(t,"stroke-width",2),k(()=>{y(t,"width",n()),y(t,"color",o()),y(t,"opacity",a())}),u(r,t)}function U(r){return Object.prototype.toString.call(r)==="[object Date]"}function ee(r,e,a,n){if(typeof a=="number"||U(a)){const o=n-a,t=(a-e)/(r.dt||1/60),l=r.opts.stiffness*o,i=r.opts.damping*t,s=(l-i)*r.inv_mass,v=(t+s)*r.dt;return Math.abs(v)<r.opts.precision&&Math.abs(o)<r.opts.precision?n:(r.settled=!1,U(a)?new Date(a.getTime()+v):a+v)}else{if(Array.isArray(a))return a.map((o,t)=>ee(r,e[t],a[t],n[t]));if(typeof a=="object"){const o={};for(const t in a)o[t]=ee(r,e[t],a[t],n[t]);return o}else throw new Error(`Cannot spring ${typeof a} values`)}}function ae(r,e={}){const a=Ze(r),{stiffness:n=.15,damping:o=.8,precision:t=.01}=e;let l,i,s,v=r,d=r,m=1,g=0,b=!1;function $(x,C={}){d=x;const j=s={};return r==null||C.hard||w.stiffness>=1&&w.damping>=1?(b=!0,l=ce.now(),v=x,a.set(r=d),Promise.resolve()):(C.soft&&(g=1/((C.soft===!0?.5:+C.soft)*60),m=0),i||(l=ce.now(),b=!1,i=We(c=>{if(b)return b=!1,i=null,!1;m=Math.min(m+g,1);const _={inv_mass:m,opts:w,settled:!0,dt:(c-l)*60/1e3},f=ee(_,v,r,d);return l=c,v=r,a.set(r=f),_.settled&&(i=null),!_.settled})),new Promise(c=>{i.promise.then(()=>{j===s&&c()})}))}const w={set:$,update:(x,C)=>$(x(d,r),C),subscribe:a.subscribe,stiffness:n,damping:o,precision:t};return w}var oa=B('<div class="tooltip svelte-op12yu"><!></div>'),ia=B('<div role="none"><!> <!></div>');function na(r,e){H(e,!0);const a=fe(),n=()=>pe(T(v),"$coords",a);let o=I(e,"xOffset",3,10),t=I(e,"yOffset",3,10),l=I(e,"text",3,""),i=I(e,"html",3,""),s=Y(!1),v=Y(void 0),d;ie(()=>{Re(X(v,S(ae({x:(window==null?void 0:window.innerWidth)/2,y:window.innerHeight/2},{stiffness:.1,damping:.6}))),"$coords",a)}),Ae(()=>{clearTimeout(d)});function m(){clearTimeout(d),X(s,!0)}function g(){d=setTimeout(()=>{X(s,!1)},100)}function b(j){T(v).set({x:j.clientX+o(),y:j.clientY+t()})}var $=ia();$.__mouseover=m,$.__mouseout=g,$.__mousemove=b;var w=p($);q(w,()=>e.children??Xe);var x=L(w,2);{var C=j=>{var c=oa(),_=p(c);{var f=D=>{var O=N();k(()=>M(O,l())),u(D,O)},A=D=>{var O=G(),$e=F(O);{var xe=V=>{var te=G(),_e=F(te);be(_e,i),u(V,te)};E($e,V=>{i()&&V(xe)},!0)}u(D,O)};E(_,D=>{l()?D(f):D(A,!1)})}h(c),k(()=>y(c,"style",`top: ${`${n().y}px`??""}; left: ${`${n().x}px`??""}`)),ue(7,c,()=>Ye,()=>({delay:400,duration:200})),u(j,c)};E(x,j=>{T(s)&&j(C)})}h($),Z("focus",$,m),Z("blur",$,g),u(r,$),P()}le(["mouseover","mouseout","mousemove"]);let R=Y(void 0);function ye(r){return!T(R)&&Qe()&&he("/auth/v1/oidc/sessioninfo").then(e=>{e.status===401&&Ue(r),X(R,S(e.body))}),{get(){return T(R)},set(e){X(R,S(e))}}}var la=B('<div role="switch" tabindex="0" class="outer svelte-1mo9pov"><div class="inner svelte-1mo9pov"></div></div>');function va(r,e){H(e,!0);const a=fe(),n=()=>pe(l,"$margin",a);let o=I(e,"selected",15,!1);const t=11;let l=ae(0,{stiffness:.15,damping:.5});Ve(()=>{l.set(o()?t:0)});function i(){o(!o())}var s=la();s.__click=i;var v=p(s);h(s),k(()=>{y(s,"aria-checked",o()),me(s,"selectedOuter",o()),y(v,"style",`margin-left: ${`${n()}px`??""}`),me(v,"selected",o())}),Z("keypress",s,i),u(r,s),P()}le(["click"]);var da=de('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function ca(r,e){let a=I(e,"opacity",3,.9),n=I(e,"width",3,"1.5rem"),o=I(e,"color",3,"currentColor");var t=da();y(t,"stroke-width",2),k(()=>{y(t,"width",n()),y(t,"color",o()),y(t,"opacity",a())}),u(r,t)}var ua=B('<div class="chevron svelte-xwvd1l"><!></div>'),ma=B("<div><!></div>"),fa=B('<div class="container svelte-xwvd1l"><div class="header svelte-xwvd1l"><!> <div class="summary svelte-xwvd1l"><!></div></div> <div class="details svelte-xwvd1l"><!></div></div>');function pa(r,e){H(e,!0);let a=K();const n=we(),o=we();let t=I(e,"expand",15,!1);function l(w){w.preventDefault(),t(!t())}var i=fa(),s=p(i),v=p(s);J(v,{get ariaLabel(){return a.common.expandContent},ariaControls:o,invisible:!0,onclick:w=>l(w),children:(w,x)=>{var C=ua(),j=p(C);ca(j,{}),h(C),u(w,C)},$$slots:{default:!0}});var d=L(v,2);y(d,"id",n);var m=p(d);q(m,()=>e.summary),h(d),h(s);var g=L(s,2);y(g,"id",o),y(g,"aria-labelledby",n);var b=p(g);{var $=w=>{var x=ma(),C=p(x);q(C,()=>e.details),h(x),ue(3,x,()=>qe,()=>({duration:150})),u(w,x)};E(b,w=>{t()&&w($)})}h(g),h(i),k(()=>{y(i,"aria-expanded",t()),y(d,"aria-label",a.common.summary),y(g,"aria-label",a.common.details),y(g,"aria-hidden",!t())}),u(r,i),P()}var ha=B('<div class="label font-label svelte-1n9u417"> </div>'),wa=B('<div class="button svelte-1n9u417"><!></div>'),ba=B('<div class="container svelte-1n9u417"><!> <div class="flex gap-05"><div><!></div> <!></div></div>');function z(r,e){H(e,!0);var a=ba(),n=p(a);{var o=d=>{var m=ha(),g=p(m,!0);h(m),k(()=>M(g,e.label)),u(d,m)};E(n,d=>{e.label&&d(o)})}var t=L(n,2),l=p(t),i=p(l);q(i,()=>e.children),h(l);var s=L(l,2);{var v=d=>{var m=wa(),g=p(m);q(g,()=>e.button),h(m),u(d,m)};E(s,d=>{e.button&&d(v)})}h(t),h(a),k(()=>{y(l,"title",e.title||e.label||""),ze(l,Fe(e.mono?"font-mono":""),"svelte-1n9u417")}),u(r,a),P()}var ga=B('<div class="device-header svelte-9n911e"><div class="device-head font-mono svelte-9n911e"> </div></div>'),ya=B('<div class="saveButton svelte-9n911e"><!></div>'),$a=B("<div><!></div>"),xa=B("<div> </div>"),_a=B('<div class="device svelte-9n911e"><!> <div class="row svelte-9n911e"><!> <!></div> <!> <!> <!> <!></div>');function ka(r,e){H(e,!0);let a=I(e,"device",15),n=K(),o=Y(S(Ne(()=>a().name)));async function t(){let i={device_id:a().id,name:T(o)},s=await Ge(`/auth/v1/users/${e.userId}/devices`,i);s.error?console.error(s.error):a(a().name=T(o),!0)}async function l(){let i={device_id:a().id},s=await Je(`/auth/v1/users/${e.userId}/devices`,i);s.error?console.error(s.error):a(a().refresh_exp=void 0,!0)}pa(r,{summary:i=>{var s=ga(),v=p(s),d=p(v,!0);h(v),h(s),k(()=>M(d,a().name)),u(i,s)},details:i=>{var s=_a(),v=p(s);z(v,{get label(){return n.account.deviceId},mono:!0,children:(c,_)=>{W();var f=N();k(()=>M(f,a().id)),u(c,f)},$$slots:{default:!0}});var d=L(v,2),m=p(d);ea(m,{autocomplete:"off",width:"17rem",get label(){return n.account.deviceName},get placeholder(){return n.account.deviceName},onEnter:t,pattern:aa,required:!0,get value(){return T(o)},set value(c){X(o,S(c))},children:(c,_)=>{W();var f=N();k(()=>M(f,n.account.deviceName)),u(c,f)},$$slots:{default:!0}});var g=L(m,2);{var b=c=>{var _=ya(),f=p(_);J(f,{onclick:t,children:(A,D)=>{W();var O=N();k(()=>M(O,n.common.save)),u(A,O)},$$slots:{default:!0}}),h(_),u(c,_)};E(g,c=>{T(o)!==a().name&&c(b)})}h(d);var $=L(d,2);z($,{get label(){return n.account.regDate},children:(c,_)=>{W();var f=N();k(()=>M(f,Q(a().created))),u(c,f)},$$slots:{default:!0}});var w=L($,2);z(w,{get label(){return n.account.accessExp},children:(c,_)=>{W();var f=N();k(()=>M(f,Q(a().access_exp))),u(c,f)},$$slots:{default:!0}});var x=L(w,2);{var C=c=>{z(c,{get label(){return n.account.accessRenew},button:_=>{J(_,{get ariaLabel(){return n.common.delete},invisible:!0,onclick:l,children:(f,A)=>{var D=$a(),O=p(D);ge(O,{}),h(D),k(()=>y(D,"title",n.common.delete)),u(f,D)},$$slots:{default:!0}})},children:(_,f)=>{var A=xa(),D=p(A,!0);k(()=>M(D,Q(a().refresh_exp))),h(A),u(_,A)},$$slots:{button:!0,default:!0}})};E(x,c=>{a().refresh_exp&&c(C)})}var j=L(x,2);z(j,{get label(){return n.account.regIp},children:(c,_)=>{W();var f=N();k(()=>M(f,a().peer_ip)),u(c,f)},$$slots:{default:!0}}),h(s),u(i,s)},$$slots:{summary:!0,details:!0}}),P()}var Ca=B('<div class="head svelte-w0g6eh"> </div> <div class="devices svelte-w0g6eh"><!></div>',1);function Ta(r,e){H(e,!0);let a=K(),n=ye(e.viewMode),o=Se(()=>{var b;return(b=n.get())==null?void 0:b.user_id}),t=Y(S([]));ie(()=>{l()});async function l(){let b=await he(`/auth/v1/users/${T(o)}/devices`);b.body?X(t,S(b.body)):console.error("error fetching devices: "+b.error)}var i=Ca(),s=F(i),v=p(s,!0);h(s);var d=L(s,2),m=p(d);{var g=b=>{var $=G(),w=F($);Ke(w,19,()=>T(t),x=>x.id,(x,C,j)=>{ka(x,{get userId(){return T(o)},get device(){return T(t)[T(j)]},set device(c){T(t)[T(j)]=c}})}),u(b,$)};E(m,b=>{T(o)&&b(g)})}h(d),k(()=>M(v,(a==null?void 0:a.account.devicesDesc)||"Devices linked to this account")),u(r,i),P()}export{Ta as D,ge as I,va as S,na as T,ta as a,sa as b,be as h,U as i,ae as s,ye as u};
