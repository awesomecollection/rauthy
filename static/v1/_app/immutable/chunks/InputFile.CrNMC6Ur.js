import"./disclose-version.BDr9Qe-U.js";import{t as b,p as K,a6 as Q,l as e,m as n,c,r as v,a as R,o as j,s as x,f as V}from"./index-client.Ds4XgiuL.js";import{e as W,s as L}from"./render.Bq2-eTRf.js";import{i as X}from"./if.Du7BDhAX.js";import{a as y,n as Y,t as M}from"./template.DXIK6jcH.js";import{s as i}from"./class.Ik0ma2JO.js";import{a as B}from"./index.L0FyJ7Re.js";import{c as Z}from"./input.CyORuAkT.js";import{p as C}from"./proxy.Bsf9UJbk.js";import{p as t}from"./props.CpDInb2-.js";import{g as q}from"./helpers.BTvs6bnN.js";import{L as aa}from"./Loading.B8ItLQDD.js";import{u as ra}from"./i18n_admin.svelte.B_OuiPaR.js";import{u as oa}from"./fetch.DFmyLr06.js";var sa=Y('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function ia(U,a){let A=t(a,"opacity",3,.9),g=t(a,"width",3,"1.5rem"),w=t(a,"color",3,"currentColor");var m=sa();i(m,"stroke-width",2),b(()=>{i(m,"stroke",w()),i(m,"width",g()),i(m,"opacity",A())}),y(U,m)}var ea=M('<div class="flex space-between loading svelte-1k623j2"><span class="flex gap-05"><span> </span> <span> </span> <span>/</span> <span> </span></span> <!></div>'),ta=M('<label class="svelte-1k623j2"><!></label> <input type="file" class="svelte-1k623j2">',1),la=M('<form aria-dropeffect="move" aria-label="Upload" class="flex svelte-1k623j2"><!></form>');function na(U,a){K(a,!0);let A=t(a,"method",3,"PUT"),g=t(a,"accept",19,()=>[".image/jpg","image/jpeg","image/png","image/svg"]),w=t(a,"buttonOnly",3,!1),m=t(a,"buttonSize",3,"1.5rem"),I=t(a,"multiple",3,!1),N=t(a,"width",3,"17rem"),O=t(a,"height",3,"2.5rem");const S=q();let P=ra(),k=j(!1),d=j(void 0),T=j(0),u=j(0);Q(()=>{!e(k)&&e(d)&&e(d).length>0&&$(e(d))});function _(s){var o;n(d,C((o=s.dataTransfer)==null?void 0:o.files))}async function $(s){var o;n(T,C(s.length)),n(u,0),n(k,!0);for(let r of s){if(console.log("uploading file",r),g()&&!g().includes(r.type)){n(u,e(u)+1);continue}let p=await oa(A(),a.url,r,a.fileName||r.name);p.error?console.error(p.error):(o=a.onSuccess)==null||o.call(a),n(u,e(u)+1)}n(d,void 0),n(k,!1)}var f=la(),D=c(f);{var E=s=>{var o=ea(),r=c(o),p=c(r),l=c(p);v(p);var h=x(p,2),G=c(h,!0);v(h);var z=x(h,4),H=c(z,!0);v(z),v(r);var J=x(r,2);aa(J,{}),v(o),b(()=>{L(l,`${P.common.loading??""}:`),L(G,e(u)),L(H,e(T))}),y(s,o)},F=s=>{var o=ta(),r=V(o);i(r,"for",S);var p=c(r);ia(p,{get width(){return m()}}),v(r);var l=x(r,2);i(l,"id",S),b(()=>i(l,"accept",g()&&g().join(", "))),b(()=>{i(r,"aria-disabled",a.disabled),i(l,"aria-hidden",w()),i(l,"aria-disabled",a.disabled),l.disabled=a.disabled,l.multiple=I()}),Z(l,()=>e(d),h=>n(d,h)),y(s,o)};X(D,s=>{e(k)?s(E):s(F,!1)})}v(f),b(()=>{i(f,"data-nopad",w()),B(f,"width",N()),B(f,"height",O())}),W("drop",f,_),y(U,f),R()}export{na as I};
