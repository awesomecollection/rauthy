import"./disclose-version.BDr9Qe-U.js";import{p as h,$ as c,o as k,a6 as f,t as x,a as y,l as e,m as S,ab as s,c as T,r as q}from"./index-client.Ds4XgiuL.js";import{a as A,t as B}from"./template.DXIK6jcH.js";import{t as C}from"./class.Ik0ma2JO.js";import{p as d}from"./proxy.CB6KOiNf.js";import{p as I}from"./props.CvXd4vKV.js";import{u as M}from"./i18n.svelte.CgUwCKxn.js";import{o as O,L as P,q as _}from"./helpers.BTvs6bnN.js";import{O as $}from"./Options.Bth8pjCB.js";import{b as E}from"./fetch.DFmyLr06.js";import{p as G}from"./index.CnO-zJLG.js";var N=B('<div class="svelte-10y6iii"><!></div>');function U(v,t){h(t,!0);let i=I(t,"openTop",3,!0);const m=";Path=/;SameSite=Lax;Max-Age=157680000";let l=M(),n=c(()=>l.lang),a=k(d(n)),p=s(()=>{var o;return(o=G.route.id)!=null&&o.includes("/admin")?P:_}),g=s(()=>i()?`-${e(p).length*2+2}rem`:void 0),b=s(()=>i()?".2rem":void 0);f(()=>{let o=O("locale"),u=c(()=>e(a));o&&o!==u&&(document.cookie="locale="+u+m)}),f(()=>{e(a)!==n&&L()});async function L(){if(document.cookie="locale="+e(a).toLowerCase()+m,t.updateBackend){let o=await E("/auth/v1/update_language");if(o.error){console.error(o.error);return}}window.location.reload()}var r=N(),w=T(r);$(w,{get ariaLabel(){return l.common.selectI18n},get options(){return e(p)},borderless:!0,get offsetTop(){return e(g)},get offsetLeft(){return e(b)},get value(){return e(a)},set value(o){S(a,d(o))}}),q(r),x(()=>C(r,"absolute",t.absolute)),A(v,r),y()}export{U as L};
