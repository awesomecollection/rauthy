import"./disclose-version.BDr9Qe-U.js";import{a0 as Da,t as U,p as ne,o as Le,b as s,f as ee,g as e,a as oe,d as S,c as d,r as c,s as i,A as wt,y as We,ar as Yt,q as Ts,a9 as F,aC as Xt,aV as Na,k as Cs,$ as Ma}from"./index-client.B6iEebqi.js";import{h as za}from"./svelte-head.BZpVhBz3.js";import{a as l,n as Ye,c as me,t as T,b as Y}from"./template.BMDtqFuO.js";import{i as M}from"./if.1XSPtMho.js";import{i as As,p as o}from"./proxy.CjI65D-A.js";import{p as z,s as Pa,b as Oa,r as Ut,c as qa}from"./props.C6aLk1Bq.js";import{f as Ls,h as Ua,i as js,w as Rs,j as Ds,k as Ns,l as Ms,m as zs}from"./dataFetching.BAtorGRX.js";import{f as da,S as Ps,y as pt,O as ua,Q as Os,U as qs,V as Us,W as Gs,X as Ga,L as Ka,Y as Ot,k as Je,Z as Wa,H as Ks,$ as Gt,a0 as Fa,a1 as Ws,a2 as Fs,a3 as ea,j as tt,a4 as Bs,a5 as Hs,a6 as Ba,a7 as yt,a8 as Ys,r as Ha,a9 as Ya,aa as Va,ab as Kt,ac as ha,ad as Vs,ae as Js,af as Ja,ag as Qa,ah as pa,N as Qs}from"./helpers.Cbcu7vP_.js";import{I as ta,C as aa,B as Se,L as ma}from"./Button.CukofQdZ.js";import{i as Zs,l as Xs,s as ie,c as le,t as ue,f as mt,b as St,d as we,r as lt,h as sa,a as er,e as jt,g as Rt}from"./index.CmB1UnQy.js";import{i as Za,s as tr,T as Ze,S as He,D as ar,a as sr,h as Xa,b as rr}from"./Devices.CHOZ2tDU.js";import{r as Te}from"./legacy-client.BZkWSPYd.js";import{l as lr,s as V,d as it,e as Me,k as fa}from"./render.Bsso_k3p.js";import{s as bt}from"./snippet.CTHg_e8y.js";import{w as Tt}from"./index.DNRH1Gyi.js";import{T as es,b as dt,e as Ge,i as ut,j as ir}from"./ThemeSwitch.CRSTiBZD.js";import{s as nr,g as zt,c as Qe,a as he,b as $t,I as ve}from"./Input.DED1mI-K.js";import{b as ra}from"./this.D3iU5zny.js";import{P as or}from"./PasswordPolicy.D0S-eDD0.js";import"./legacy.BDl8PDwo.js";function ts(p,a,t){if(p.multiple)return cr(p,a);for(var n of p.options){var r=Vt(n);if(As(r,a)){n.selected=!0;return}}(!t||a!==void 0)&&(p.selectedIndex=-1)}function vr(p,a){Da(()=>{var t=new MutationObserver(()=>{var n=p.__value;ts(p,n)});return t.observe(p,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ga(p,a,t=a){var n=!0;lr(p,"change",r=>{var h=r?"[selected]":":checked",m;if(p.multiple)m=[].map.call(p.querySelectorAll(h),Vt);else{var u=p.querySelector(h)??p.querySelector("option:not([disabled])");m=u&&Vt(u)}t(m)}),Da(()=>{var r=a();if(ts(p,r,n),n&&r===void 0){var h=p.querySelector(":checked");h!==null&&(r=Vt(h),t(r))}p.__value=r,n=!1}),vr(p)}function cr(p,a){for(var t of p.options)t.selected=~a.indexOf(Vt(t))}function Vt(p){return"__value"in p?p.__value:p.value}function dr(p){return p}function ur(p){const a=p-1;return a*a*a+1}function wa(p,a){if(p===a||p!==p)return()=>p;const t=typeof p;if(t!==typeof a||Array.isArray(p)!==Array.isArray(a))throw new Error("Cannot interpolate values of different type");if(Array.isArray(p)){const n=a.map((r,h)=>wa(p[h],r));return r=>n.map(h=>h(r))}if(t==="object"){if(!p||!a)throw new Error("Object cannot be null");if(Za(p)&&Za(a)){const h=p.getTime(),m=a.getTime()-h;return u=>new Date(h+u*m)}const n=Object.keys(a),r={};return n.forEach(h=>{r[h]=wa(p[h],a[h])}),h=>{const m={};return n.forEach(u=>{m[u]=r[u](h)}),m}}if(t==="number"){const n=a-p;return r=>p+r*n}throw new Error(`Cannot interpolate ${t} values`)}function hr(p,a={}){const t=Tt(p);let n,r=p;function h(m,u){if(r=m,p==null)return t.set(p=m),Promise.resolve();let E=n,I=!1,{delay:v=0,duration:w=400,easing:f=dr,interpolate:A=wa}={...a,...u};if(w===0)return E&&(E.abort(),E=null),t.set(p=r),Promise.resolve();const k=Zs.now()+v;let g;return n=Xs(y=>{if(y<k)return!0;I||(g=A(p,m),typeof w=="function"&&(w=w(p,m)),I=!0),E&&(E.abort(),E=null);const $=y-k;return $>w?(t.set(p=m),!1):(t.set(p=g(f($/w))),!0)}),n.promise}return{set:h,update:(m,u)=>h(m(r,p),u),subscribe:t.subscribe}}const pr=Tt(),mr=Tt(),Jt=Tt(""),la=Tt(!0);var fr=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg>');function gr(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=fr();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var wr=T('<div class="ver upd svelte-4tal6i"><a target="_blank" class="svelte-4tal6i"> </a></div>'),yr=T('<div class="ver svelte-4tal6i"> </div>');function br(p,a){ne(a,!0);let t=S(""),n=S(!1),r=S("");Le(()=>{h()});async function h(){let v=await Ls();if(v.ok){let w=await v.json();s(t,o(w.current)),w.last_check,w.latest,s(r,o(w.latest_url)),s(n,o(w.update_available))}}var m=me(),u=ee(m);{var E=v=>{var w=wr(),f=d(w),A=d(f);c(f),c(w),U(()=>{ie(f,"href",e(r)),V(A,`v${e(t)??""} \u26A0\uFE0F`)}),l(v,w)},I=v=>{var w=yr(),f=d(w);c(w),U(()=>V(f,`v${e(t)??""}`)),l(v,w)};M(u,v=>{e(n)?v(E):v(I,!1)})}l(p,m),oe()}var $r=T('<div role="button" tabindex="0" class="close svelte-1hvg16q"><!></div> <div class="logo"><!></div>',1),_r=T('<div role="button" tabindex="0" class="burger svelte-1hvg16q"><!></div> <div></div> <div class="logo"><!></div>',1),kr=T("<!> <!>",1),xr=T('<div class="theme-collapsed svelte-1hvg16q"><!></div>'),Er=T('<nav class="nav svelte-1hvg16q"><div><!> <div class="menu svelte-1hvg16q"><div class="links svelte-1hvg16q"><!></div></div></div> <div class="version svelte-1hvg16q"><!></div></nav>');function Ir(p,a){ne(a,!0);const t=Pa(),n=()=>Oa(E,"$width",t);let r=z(a,"selected",15,""),h=z(a,"widthExpanded",3,185),m=z(a,"widthCollapsed",3,60),u=z(a,"isExpanded",15,!0);const E=hr(u()?h():m(),{duration:200,easing:ur});la.subscribe(L=>u(L)),Jt.subscribe(L=>{L&&r(L)}),Te(()=>{u()?(la.set(!0),E.set(h())):(la.set(!1),setTimeout(()=>{E.set(m())},200))}),Te(()=>{r()&&Jt.set(r())}),Le(()=>{pr.set(h()),mr.set(m()),Jt.set(r())});function I(){u(!u())}var v=Er(),w=d(v),f=d(w);{var A=L=>{var N=$r(),R=ee(N);R.__click=I;var j=d(R);ta(j,{}),c(R);var W=i(R,2),D=d(W);bt(D,()=>a.logo??wt),c(W),U(()=>le(R,"left",`calc(${n()??""}px - 22px)`)),Me("keypress",R,I),ue(1,R,()=>mt,()=>({delay:500,duration:200})),ue(2,R,()=>mt,()=>({duration:100})),ue(1,W,()=>mt,()=>({delay:250,duration:100})),ue(2,W,()=>mt,()=>({duration:20})),l(L,N)},k=L=>{var N=_r(),R=ee(N);R.__click=I,le(R,"left","3px");var j=d(R);gr(j,{width:24}),c(R);var W=i(R,2);le(W,"height","10px");var D=i(W,2),H=d(D);bt(H,()=>a.logo??wt),c(D),Me("keypress",R,I),ue(1,R,()=>mt,()=>({delay:500,duration:200})),ue(2,R,()=>mt,()=>({duration:100})),ue(1,D,()=>mt,()=>({delay:250,duration:100})),ue(2,D,()=>mt,()=>({duration:20})),l(L,N)};M(f,L=>{u()?L(A):L(k,!1)})}var g=i(f,2),y=d(g),$=d(y);bt($,()=>a.entries??wt),c(y),c(g),c(w);var _=i(w,2),x=d(_);{var b=L=>{var N=kr(),R=ee(N);es(R,{});var j=i(R,2);br(j,{}),l(L,N)},C=L=>{var N=xr(),R=d(N);es(R,{}),c(N),l(L,N)};M(x,L=>{u()?L(b):L(C,!1)})}c(_),c(v),U(()=>{le(v,"min-width",`${n()??""}px`),le(v,"width",`${n()??""}px`),le(v,"padding",u()?"20px 10px":"10px 3px")}),ue(1,_,()=>mt,()=>({delay:500,duration:200})),ue(2,_,()=>mt,()=>({duration:100})),l(p,v),oe()}it(["click"]);var Sr=T('<div role="menuitem" tabindex="0" class="entry noselect font-label svelte-r55922"><!> <span class="label svelte-r55922"> </span></div>'),Tr=T('<div role="menuitem" tabindex="0" class="entryCollapsed noselect font-label svelte-r55922"><!> <span class="labelCollapsed svelte-r55922"> </span></div>');function ft(p,a){ne(a,!0);let t=z(a,"label",3,""),n=z(a,"slotCollapsed",3,!0),r=S(!0),h=S("hsl(var(--text))"),m=S("");Jt.subscribe(k=>s(m,o(k))),la.subscribe(k=>s(r,o(k)));let u=S(!1);function E(){e(u)?s(h,"hsl(var(--error))"):e(m)===t()?s(h,"hsl(var(--action))"):s(h,"hsl(var(--text))")}function I(){Jt.set(t())}Te(()=>{e(m)&&E()}),Te(()=>{e(u)?s(h,"hsl(var(--error))"):E()});var v=me(),w=ee(v);{var f=k=>{var g=Sr();g.__click=I;var y=d(g);bt(y,()=>a.children??wt);var $=i(y,2),_=d($,!0);c($),c(g),U(()=>{St(g,"selected",e(m)===t()),V(_,t())}),Me("keypress",g,I),Me("mouseenter",g,()=>s(u,!0)),Me("mouseleave",g,()=>s(u,!1)),ue(7,g,()=>mt,()=>({duration:100})),l(k,g)},A=k=>{var g=Tr();g.__click=I;var y=d(g);{var $=b=>{var C=me(),L=ee(C);bt(L,()=>a.children??wt),l(b,C)};M(y,b=>{n()&&b($)})}var _=i(y,2),x=d(_,!0);c(_),c(g),U(()=>{St(g,"selectedCollapsed",e(m)===t()),V(x,t())}),Me("keypress",g,I),Me("mouseenter",g,()=>s(u,!0)),Me("mouseleave",g,()=>s(u,!1)),ue(5,g,()=>mt,()=>({delay:200,duration:100})),l(k,g)};M(w,k=>{e(r)?k(f):k(A,!1)})}l(p,v),oe()}it(["click"]);const nt={"Content-Type":"application/json",Accept:"application/json"};function De(){return{"csrf-token":da(),"Content-Type":"application/json",Accept:"application/json"}}async function ke(p){return p.status===403&&(await p.json()).error==="MfaRequired"&&(console.error("MFA is required for a rauthy admin account"),await nr(3e3),window.location.reload()),(p.status===401||p.status===403)&&window.location.reload(),p}async function Cr(){return await fetch("/auth/v1/oidc/certs",{method:"GET",headers:nt})}async function Ar(){const p=await fetch("/auth/v1/clients",{method:"GET",headers:nt});return await ke(p)}async function Lr(p){const a=await fetch("/auth/v1/clients",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function jr(p){const a=await fetch(`/auth/v1/clients/${p.id}`,{method:"PUT",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Rr(p){const a=await fetch(`/auth/v1/clients/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function Dr(p){const a=await fetch(`/auth/v1/clients/${p}/colors`,{method:"GET",headers:nt});return await ke(a)}async function Nr(p,a){const t=await fetch(`/auth/v1/clients/${p}/colors`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Mr(p){const a=await fetch(`/auth/v1/clients/${p}/colors`,{method:"DELETE",headers:De()});return await ke(a)}async function zr(p,a){const t=new FormData;t.append("logo",a);const n=await fetch(`/auth/v1/clients/${p}/logo`,{method:"PUT",headers:{"csrf-token":da()},body:t});return await ke(n)}async function Pr(p){const a=await fetch(`/auth/v1/clients/${p}/logo`,{method:"DELETE",headers:De()});return await ke(a)}async function Or(p){const a=await fetch(`/auth/v1/clients/${p}/secret`,{method:"POST",headers:De()});return await ke(a)}async function qr(p){const a=await fetch(`/auth/v1/clients/${p}/secret`,{method:"PUT",headers:De()});return await ke(a)}async function Ur(){const p=await fetch("/auth/v1/encryption/keys",{method:"GET",headers:nt});return await ke(p)}async function Gr(p){const a=await fetch("/auth/v1/encryption/migrate",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Kr(p){const a=await fetch("/auth/v1/events",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function as(){const p=await fetch("/auth/v1/groups",{method:"GET",headers:nt});return await ke(p)}async function Wr(p){const a=await fetch("/auth/v1/groups",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Fr(p,a){const t=await fetch(`/auth/v1/groups/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Br(p){const a=await fetch(`/auth/v1/groups/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function Hr(){const p=await fetch("/auth/v1/login_time",{method:"GET",headers:nt});return await ke(p)}async function Yr(p){const a=await fetch("/auth/v1/password_hash_times",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Vr(p){const a=await fetch("/auth/v1/password_policy",{method:"PUT",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Jr(p){const a=await fetch("/auth/v1/users/request_reset",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Qr(){return await fetch("/auth/v1/providers",{method:"POST",headers:De()})}async function Zr(p){return await fetch("/auth/v1/providers/create",{method:"POST",headers:De(),body:JSON.stringify(p)})}async function Xr(p,a){return await fetch(`/auth/v1/providers/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)})}async function el(p){return await fetch(`/auth/v1/providers/${p}`,{method:"DELETE",headers:De()})}async function tl(p){return await fetch(`/auth/v1/providers/${p}/delete_safe`,{method:"GET",headers:De()})}async function al(p,a){const t=new FormData;t.append("logo",a);const n=await fetch(`/auth/v1/providers/${p}/img`,{method:"PUT",headers:{"csrf-token":da()},body:t});return await ke(n)}async function sl(p){return await fetch("/auth/v1/providers/lookup",{method:"POST",headers:De(),body:JSON.stringify(p)})}async function rl(){const p=await fetch("/auth/v1/oidc/rotate_jwk",{method:"POST",headers:De()});return await ke(p)}async function ll(){const p=await fetch("/auth/v1/sessions",{method:"GET",headers:nt});return await ke(p)}async function ss(p,a,t,n){let r=`/auth/v1/sessions?page_size=${p}`;a&&(r=`${r}&offset=${a}`),n&&(r=`${r}&backwards=${n}`),t&&(r=`${r}&continuation_token=${t}`);const h=await fetch(r,{method:"GET",headers:nt});return await ke(h)}async function il(){const p=await fetch("/auth/v1/sessions",{method:"DELETE",headers:De()});return await ke(p)}async function nl(p){const a=await fetch(`/auth/v1/sessions/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function ol(){const p=await fetch("/auth/v1/users",{method:"GET",headers:nt});return await ke(p)}async function rs(p,a,t,n){let r=`/auth/v1/users?page_size=${p}`;a&&(r=`${r}&offset=${a}`),n&&(r=`${r}&backwards=${n}`),t&&(r=`${r}&continuation_token=${t}`);const h=await fetch(r,{method:"GET",headers:nt});return await ke(h)}async function vl(p){const a=await fetch("/auth/v1/users",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function ls(p,a){const t=await fetch(`/auth/v1/users/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function cl(p){const a=await fetch(`/auth/v1/users/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function ya(){const p=await fetch("/auth/v1/users/attr",{method:"GET",headers:nt});return await ke(p)}async function dl(p){const a=await fetch("/auth/v1/users/attr",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function ul(p,a){const t=await fetch(`/auth/v1/users/attr/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function hl(p){const a=await fetch(`/auth/v1/users/attr/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function pl(p){const a=await fetch(`/auth/v1/users/${p}/attr`,{method:"GET",headers:nt});return await ke(a)}async function ml(p,a){const t=await fetch(`/auth/v1/users/${p}/attr`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function fl(){const p=await fetch("/auth/v1/api_keys",{method:"GET",headers:nt});return await ke(p)}async function gl(p){const a=await fetch("/auth/v1/api_keys",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function wl(p){const a=await fetch(`/auth/v1/api_keys/${p.name}`,{method:"PUT",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function yl(p){const a=await fetch(`/auth/v1/api_keys/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function bl(p){const a=await fetch(`/auth/v1/api_keys/${p}/secret`,{method:"PUT",headers:De()});return await ke(a)}async function $l(){const p=await fetch("/auth/v1/blacklist",{method:"GET",headers:nt});return await ke(p)}async function _l(p){const a=await fetch("/auth/v1/blacklist",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function kl(p){const a=await fetch(`/auth/v1/blacklist/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function is(){const p=await fetch("/auth/v1/roles",{method:"GET",headers:nt});return await ke(p)}async function xl(p){const a=await fetch("/auth/v1/roles",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function El(p,a){const t=await fetch(`/auth/v1/roles/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Il(p){const a=await fetch(`/auth/v1/roles/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function ns(){const p=await fetch("/auth/v1/scopes",{method:"GET",headers:nt});return await ke(p)}async function Sl(p){const a=await fetch("/auth/v1/scopes",{method:"POST",headers:De(),body:JSON.stringify(p)});return await ke(a)}async function Tl(p,a){const t=await fetch(`/auth/v1/scopes/${p}`,{method:"PUT",headers:De(),body:JSON.stringify(a)});return await ke(t)}async function Cl(p){const a=await fetch(`/auth/v1/scopes/${p}`,{method:"DELETE",headers:De()});return await ke(a)}async function Al(p,a,t){const n=await fetch(`/auth/v1/search?ty=${p}&idx=${a}&q=${t}`,{method:"GET",headers:nt});return await ke(n)}var Ll=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg>');function Qt(p,a){let t=z(a,"color",3,"var(--col-text)"),n=z(a,"opacity",3,.9),r=z(a,"width",3,20);var h=Ll();ie(h,"stroke-width",2),U(()=>{ie(h,"width",r()),ie(h,"color",t()),ie(h,"opacity",n())}),l(p,h)}var jl=T('<div class="body svelte-1xshgki"><!></div>'),Rl=T('<div class="container svelte-1xshgki"><div class="containerHeader svelte-1xshgki"><div role="button" tabindex="0" class="expand svelte-1xshgki"><div><!></div></div> <div class="header svelte-1xshgki"><!></div></div> <!></div>');function vt(p,a){ne(a,!0);const t=Pa(),n=()=>Oa(w,"$rotate",t);let r=z(a,"idx",11,0),h=z(a,"show",15),m=z(a,"expandedCallback",3,()=>{}),u=S(!1),E=S(void 0),I=S(void 0),v=r()%2===0?"2px solid var(--col-acnt)":"2px solid var(--col-acnta)";const w=tr(0,{stiffness:.1,damping:.4});function f(){!h()&&m()&&m()(),h(!h())}function A(){const R=e(E).offsetTop+e(I).scrollHeight+100;window.innerHeight+window.scrollY-R<0&&window.scroll({top:R,behavior:"smooth"})}Te(()=>{h()?w.set(90):w.set(0)}),Te(()=>{h()&&e(I)&&setTimeout(()=>{A()},100)});var k=Rl(),g=d(k),y=d(g);y.__click=f;var $=d(y),_=d($),x=We(()=>e(u)?"var(--col-act2a)":"var(--col-act2)");Qt(_,{get color(){return e(x)}}),c($),c(y);var b=i(y,2),C=d(b);bt(C,()=>a.header??wt),c(b),c(g);var L=i(g,2);{var N=R=>{var j=jl(),W=d(j);bt(W,()=>a.body??wt),c(j),ra(j,D=>s(I,D),()=>e(I)),ue(7,j,()=>we,()=>({duration:200})),l(R,j)};M(L,R=>{h()&&R(N)})}c(k),ra(k,R=>s(E,R),()=>e(E)),U(()=>{le(k,"border-left",h()?v:"none"),ie($,"style",`rotate: ${n()??""}deg`)}),Me("mouseenter",y,()=>s(u,!0)),Me("mouseleave",y,()=>s(u,!1)),Me("keypress",y,f),l(p,k),oe()}it(["click"]);const Dl=Tt([]),ba=Tt([]),Nl=Tt([]),$a=Tt([]),Ml=Tt([]),os=Tt([]);var zl=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function Pl(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=zl();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Ol=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function ql(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Ol();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Ul=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function Gl(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Ul();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Kl=T("<option> </option>"),Wl=T('<select class="opts font-label svelte-9iykj"></select>'),Fl=T('<div class="container svelte-9iykj"><!> <div class="inputBar svelte-9iykj"><input class="input svelte-9iykj" type="text" placeholder="Search" autocomplete="off"> <div class="magnify svelte-9iykj"><!></div></div> <div class="backWrap svelte-9iykj"><div role="button" tabindex="0" class="back svelte-9iykj"><!></div></div></div>');function vs(p,a){ne(a,!0);let t=z(a,"items",27,()=>o([])),n=z(a,"resItems",15),r=z(a,"options",19,()=>[]),h=z(a,"useServerSideIdx",11,""),m=z(a,"isSearchFiltered",15,!1),u=z(a,"search",15,""),E=S(""),I;Le(()=>{r().length>0&&(s(E,o(r()[0].label)),v())});function v(){for(let R of r())if(R.label===e(E)){I=R.callback;break}I||console.error("Could not find a valid callback function in search options for label "+e(E))}function w(){u("")}function f(){if(u().length<2){n(t()),m(!1);return}n([...t().filter(R=>r().length>0?I(R,u()):R.toLowerCase().includes(u())||R===u())]),m(!0)}async function A(){if(u().length<Ps){n(t()),m(!1);return}m(!0);const R=e(E).replaceAll("-","").replaceAll(" ","").toLowerCase();let j=await Al(h(),R,u());j.ok?n(await j.json()):console.error(j)}Te(()=>{e(E)&&v()}),Te(()=>{u()?h()?A():f():(n(t()),m(!1))});var k=Fl(),g=d(k);{var y=R=>{Ze(R,{text:"Search by",yOffset:-30,children:(j,W)=>{var D=Wl();Ge(D,21,r,ut,(H,P)=>{var O=Kl(),G={},X=d(O,!0);c(O),U(()=>{G!==(G=e(P).label)&&(O.value=(O.__value=e(P).label)==null?"":e(P).label),V(X,e(P).label)}),l(H,O)}),c(D),ga(D,()=>e(E),H=>s(E,H)),l(j,D)},$$slots:{default:!0}})};M(g,R=>{r().length>1&&R(y)})}var $=i(g,2),_=d($);lt(_),U(()=>ie(_,"name",zt()));var x=i(_,2),b=d(x);ql(b,{width:20}),c(x),c($);var C=i($,2),L=d(C);L.__click=w;var N=d(L);Gl(N,{}),c(L),c(C),c(k),dt(_,u),Me("keypress",L,w),l(p,k),oe()}it(["click"]);var Bl=(p,a)=>s(a,!e(a)),Hl=T('<div class="search svelte-spg3op"><!></div>'),Yl=(p,a,t)=>a(e(t)),Vl=T('<div role="button" tabindex="0" class="item svelte-spg3op"> </div>'),Jl=T('<div class="itemsContainer svelte-spg3op"><!> <div class="items noselect font-label svelte-spg3op"></div></div>'),Ql=T('<div class="wrapper svelte-spg3op"><div role="button" tabindex="0" class="icon svelte-spg3op"><!></div> <!></div>');function Zl(p,a){ne(a,!0);let t=z(a,"items",31,()=>o([])),n=z(a,"onSelect",3,g=>{}),r=z(a,"mindWidth",3,130),h=z(a,"maxHeight",19,()=>t().length>4?175:120),m=z(a,"searchThreshold",11,5),u=S(o([])),E=S(!1);Te(()=>{t().length<=m()&&s(u,o(t()))});function I(g){s(E,!1),s(u,o(t())),n()(g)}var v=Ql(),w=d(v);w.__click=[Bl,E];var f=d(w);Pl(f,{}),c(w);var A=i(w,2);{var k=g=>{var y=Jl(),$=d(y);{var _=b=>{var C=Hl(),L=d(C);vs(L,{get items(){return t()},set items(N){t(N)},get resItems(){return e(u)},set resItems(N){s(u,o(N))}}),c(C),U(()=>le(C,"max-width",`${r()}px`)),l(b,C)};M($,b=>{t().length>m()&&b(_)})}var x=i($,2);Ge(x,21,()=>e(u),ut,(b,C)=>{var L=Vl();L.__click=[Yl,I,C];var N=d(L,!0);c(L),U(()=>V(N,e(C))),Me("keypress",L,()=>I(e(C))),l(b,L)}),c(x),c(y),U(()=>{ie(y,"style",`min-width: ${r()??""}px; max-height: ${h()??""}px`),ie(x,"style",`width: ${r()??""}; max-height: ${(t().length>m()?h()-29:h())??""}px`)}),ue(7,y,()=>we,()=>({duration:200})),l(g,y)};M(A,g=>{e(E)&&g(k)})}c(v),Me("keypress",w,()=>s(E,!e(E))),l(p,v),oe()}it(["click"]);var Xl=(p,a,t)=>a()(t.label),ei=T('<div class="label font-label svelte-jphwq"> <div role="button" tabindex="0" class="icon svelte-jphwq"><!></div></div>');function ti(p,a){ne(a,!0);let t=z(a,"onDelete",3,()=>{});var n=ei(),r=d(n),h=i(r);h.__click=[Xl,t,a];var m=d(h);ta(m,{color:"--var(--col-bg)",width:14}),c(h),c(n),U(()=>V(r,`${a.label??""} `)),Me("keypress",h,()=>t()(a.label)),l(p,n),oe()}it(["click"]);var ai=T('<div class="container svelte-1iraqg1"><!> <!></div>');function Pt(p,a){ne(a,!0);let t=z(a,"items",15),n=z(a,"options",19,()=>[]),r=z(a,"searchThreshold",15,4),h=S(o([]));Le(()=>{E()});async function m(k){t()||t([]),t().push(k),t([...t()]),await E()}async function u(k){t([...t().filter(g=>g!==k)]),await E()}async function E(){await Yt(),t()||t([]),s(h,o([...n().filter(k=>!t().includes(k))]))}var I=ai(),v=d(I);{var w=k=>{var g=me(),y=ee(g);Ge(y,17,t,ut,($,_,x)=>{ti($,{onDelete:u,get label(){return t()[x]},set label(b){t(t()[x]=b,!0)}})}),l(k,g)};M(v,k=>{var g;((g=t())==null?void 0:g.length)>0&&k(w)})}var f=i(v,2);{var A=k=>{Zl(k,{onSelect:m,get items(){return e(h)},set items(g){s(h,o(g))},get searchThreshold(){return r()},set searchThreshold(g){r(g)}})};M(f,k=>{e(h)&&e(h).length>0&&k(A)})}c(I),l(p,I),oe()}var si=T('<option class="opt svelte-1vaxdkm"> </option>'),ri=T('<select class="svelte-1vaxdkm"></select>');function Et(p,a){let t=z(a,"value",15),n=z(a,"options",19,()=>[]),r=z(a,"width",3,"inherit");var h=ri();Ge(h,21,n,ut,(m,u)=>{var E=si(),I={},v=d(E,!0);c(E),U(()=>{I!==(I=e(u))&&(E.value=(E.__value=e(u))==null?"":e(u)),V(v,e(u))}),l(m,E)}),c(h),U(()=>le(h,"width",r())),ga(h,t),l(p,h)}var li=T('<div class="success svelte-tl4x7h">Success</div>'),ii=T('<div class="err svelte-tl4x7h"> </div>'),ni=T('<div class="container svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">USER ID</div> <div class="value font-mono svelte-tl4x7h"> </div></div> <div class="row svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">ENABLED</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">E-MAIL VERIFIED</div> <div class="value svelte-tl4x7h"><!></div></div></div> <!> <!> <!> <div class="unit language svelte-tl4x7h"><div class="label svelte-tl4x7h">LANGUAGE</div> <div style="margin-top: .085rem"><!></div></div> <!> <!> <!> <!> <!> <!> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">ROLES</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">GROUPS</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LIMIT LIFETIME</div> <div class="value svelte-tl4x7h"><!></div></div> <!> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">CREATED</div> <div class="value svelte-tl4x7h"> </div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LAST LOGIN</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">PASSWORD EXPIRES</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">MFA ACTIVE</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><!> <!> <!></div></div>');function oi(p,a){ne(a,!0);let t=z(a,"user",31,()=>o({}));t().roles===void 0&&t(t().roles=[],!0),t().groups===void 0&&t(t().groups=[],!0);let n=S(""),r=S(!1),h=S(void 0),m=S(o(t().language.toUpperCase())),u=S(!!t().user_expires),E=S(o(Ts(()=>e(u))?pt(t().user_expires,!0):void 0)),I=S(o([]));ba.subscribe(Q=>{s(I,o(Q))});let v=S(o([]));$a.subscribe(Q=>{s(v,o(Q))}),Te(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},3e3)))});let w=S(o({}));const f=Qe().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(ua,"Invalid characters"),family_name:he().nullable().trim().matches(Os,"Invalid characters")});let A=S(o({}));const k=Qe().shape({birthdate:he().nullable().trim().matches(qs,"Invalid characters"),phone:he().nullable().trim().matches(Us,"Format: +..."),street:he().nullable().trim().matches(Gs,"Invalid characters"),zip:$t().nullable().min(1e3).max(999999),city:he().nullable().trim().matches(Ga,"Invalid characters"),country:he().nullable().trim().matches(Ga,"Invalid characters")});Le(()=>()=>clearTimeout(e(h)));function g(Q){Q.code==="Enter"&&y()}async function y(){if(!await $())return;s(n,""),console.log(t().user_values);const Q={email:t().email,given_name:t().given_name,family_name:t().family_name||null,language:e(m).toLowerCase(),roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified,user_expires:null,user_values:t().user_values};if(Q.user_values.phone&&(Q.user_values.phone=Q.user_values.phone.replaceAll(" ","")),Q.user_values.zip&&(Q.user_values.zip=Number.parseInt(Q.user_values.zip)),e(u)){let je=Ot(e(E));if(!je){s(n,"Invalid Date Input: User Expires");return}Q.user_expires=je}let Ee=await ls(t().id,Q);if(Ee.ok)s(r,!0);else{let je=await Ee.json();s(n,o(je.message))}}async function $(){let Q=!0;try{await f.validate(t(),{abortEarly:!1}),s(w,o({}))}catch(Ee){s(w,o(Je(Ee))),Q=!1}try{await k.validate(t().user_values,{abortEarly:!1}),s(A,o({}))}catch(Ee){s(A,o(Je(Ee))),Q=!1}return Q}var _=ni(),x=d(_),b=i(d(x),2),C=d(b,!0);c(b),c(x);var L=i(x,2);le(L,"margin-top","-5px");var N=d(L);le(N,"width","107px");var R=i(d(N),2),j=d(R);He(j,{get selected(){return t().enabled},set selected(Q){t(t().enabled=Q,!0)}}),c(R),c(N);var W=i(N,2);le(W,"width","135px");var D=i(d(W),2),H=d(D);He(H,{get selected(){return t().email_verified},set selected(Q){t(t().email_verified=Q,!0)}}),c(D),c(W),c(L);var P=i(L,2);ve(P,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return t().email},set value(Q){t(t().email=Q,!0)},get error(){return e(w).email},set error(Q){e(w).email=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("E-MAIL");l(Q,je)},$$slots:{default:!0}});var O=i(P,2);ve(O,{autocomplete:"off",placeholder:"Given Name",get value(){return t().given_name},set value(Q){t(t().given_name=Q,!0)},get error(){return e(w).given_name},set error(Q){e(w).given_name=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("GIVEN NAME");l(Q,je)},$$slots:{default:!0}});var G=i(O,2);ve(G,{autocomplete:"off",placeholder:"Family Name",get value(){return t().family_name},set value(Q){t(t().family_name=Q,!0)},get error(){return e(w).family_name},set error(Q){e(w).family_name=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("FAMILY NAME");l(Q,je)},$$slots:{default:!0}});var X=i(G,2),q=i(d(X),2),B=d(q);Et(B,{options:Ka,get value(){return e(m)},set value(Q){s(m,o(Q))}}),c(q),c(X);var K=i(X,2);ve(K,{autocomplete:"off",placeholder:"Street",get value(){return t().user_values.street},set value(Q){t(t().user_values.street=Q,!0)},get error(){return e(A).street},set error(Q){e(A).street=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("STREET");l(Q,je)},$$slots:{default:!0}});var Z=i(K,2);ve(Z,{type:"number",autocomplete:"off",placeholder:"ZIP",min:1e3,max:999999,get value(){return t().user_values.zip},set value(Q){t(t().user_values.zip=Q,!0)},get error(){return e(A).zip},set error(Q){e(A).zip=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("ZIP");l(Q,je)},$$slots:{default:!0}});var re=i(Z,2);ve(re,{autocomplete:"off",placeholder:"City",get value(){return t().user_values.city},set value(Q){t(t().user_values.city=Q,!0)},get error(){return e(A).city},set error(Q){e(A).city=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("CITY");l(Q,je)},$$slots:{default:!0}});var ce=i(re,2);ve(ce,{autocomplete:"off",placeholder:"Country",get value(){return t().user_values.country},set value(Q){t(t().user_values.country=Q,!0)},get error(){return e(A).country},set error(Q){e(A).country=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("COUNTRY");l(Q,je)},$$slots:{default:!0}});var $e=i(ce,2);ve($e,{autocomplete:"off",placeholder:"Phone",get value(){return t().user_values.phone},set value(Q){t(t().user_values.phone=Q,!0)},get error(){return e(A).phone},set error(Q){e(A).phone=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("PHONE");l(Q,je)},$$slots:{default:!0}});var _e=i($e,2);ve(_e,{type:"date",autocomplete:"off",placeholder:"Birthdate",get value(){return t().user_values.birthdate},set value(Q){t(t().user_values.birthdate=Q,!0)},get error(){return e(A).birthdate},set error(Q){e(A).birthdate=Q},$$events:{keypress:g,input:$},children:(Q,Ee)=>{F();var je=Y("BIRTHDATE");l(Q,je)},$$slots:{default:!0}});var pe=i(_e,2);le(pe,"margin-top","-3px");var Ne=i(d(pe),2);Pt(Ne,{get options(){return e(I)},searchThreshold:4,get items(){return t().roles},set items(Q){t(t().roles=Q,!0)}}),c(pe);var ge=i(pe,2),de=i(d(ge),2);Pt(de,{get options(){return e(v)},searchThreshold:4,get items(){return t().groups},set items(Q){t(t().groups=Q,!0)}}),c(ge);var ye=i(ge,2);le(ye,"margin-top","12px");var be=i(d(ye),2),ze=d(be);He(ze,{get selected(){return e(u)},set selected(Q){s(u,o(Q))}}),c(be),c(ye);var Ce=i(ye,2);{var xe=Q=>{var Ee=We(()=>Wa(new Date));ve(Q,{type:"datetime-local",step:"60",width:"16rem",get min(){return e(Ee)},max:"2099-01-01T00:00",get value(){return e(E)},set value(je){s(E,o(je))},$$events:{input:$},children:(je,At)=>{F();var ae=Y("USER EXPIRES");l(je,ae)},$$slots:{default:!0}})};M(Ce,Q=>{e(u)&&Q(xe)})}var Re=i(Ce,2);le(Re,"margin-top","12px");var J=i(d(Re),2),Ie=d(J,!0);U(()=>V(Ie,pt(t().created_at))),c(J),c(Re);var fe=i(Re,2),qe=i(d(fe),2),Ve=d(qe);{var rt=Q=>{var Ee=Y();U(()=>V(Ee,pt(t().last_login))),l(Q,Ee)},ct=Q=>{var Ee=Y("Never");l(Q,Ee)};M(Ve,Q=>{t().last_login?Q(rt):Q(ct,!1)})}c(qe),c(fe);var Ue=i(fe,2),Fe=i(d(Ue),2),ot=d(Fe);{var It=Q=>{var Ee=Y();U(()=>V(Ee,pt(t().password_expires))),l(Q,Ee)},kt=Q=>{var Ee=Y("Never");l(Q,Ee)};M(ot,Q=>{t().password_expires?Q(It):Q(kt,!1)})}c(Fe),c(Ue);var Xe=i(Ue,2),et=i(d(Xe),2),gt=d(et),ht=We(()=>!!t().webauthn_user_id);aa(gt,{get check(){return e(ht)}}),c(et),c(Xe);var Ct=i(Xe,2),at=d(Ct);Se(at,{level:1,width:"4rem",$$events:{click:y},children:(Q,Ee)=>{F();var je=Y("SAVE");l(Q,je)},$$slots:{default:!0}});var st=i(at,2);{var se=Q=>{var Ee=li();l(Q,Ee)};M(st,Q=>{e(r)&&Q(se)})}var Ae=i(st,2);{var Pe=Q=>{var Ee=ii(),je=d(Ee,!0);c(Ee),U(()=>V(je,e(n))),l(Q,Ee)};M(Ae,Q=>{e(n)&&Q(Pe)})}c(Ct),c(_),U(()=>V(C,t().id)),l(p,_),oe()}var vi=(p,a,t)=>a(e(t)),ci=T('<button class="btn font-label svelte-n2aryx"> </button>'),di=T('<div class="bar noselect svelte-n2aryx"></div>');function Dt(p,a){let t=z(a,"labels",19,()=>[]),n=z(a,"selected",15);var r=di();Ge(r,21,t,ut,(h,m)=>{var u=ci();u.__click=[vi,n,m];var E=d(u,!0);c(u),U(()=>{ie(u,"data-selected",n()===e(m)),V(E,e(m))}),Me("keypress",u,()=>n(e(m))),l(h,u)}),c(r),l(p,r)}it(["click"]);var ui=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z"></path></svg>');function cs(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,20);var r=ui();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var hi=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"></path></svg>');function _a(p,a){let t=z(a,"color",3,"var(--col-err)"),n=z(a,"opacity",3,.9),r=z(a,"width",3,24);var h=hi();ie(h,"stroke-width",2),U(()=>{ie(h,"width",r()),ie(h,"color",t()),ie(h,"opacity",n())}),l(p,h)}var pi=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>');function ka(p,a){let t=z(a,"color",3,"var(--col-ok)"),n=z(a,"opacity",3,.9),r=z(a,"width",3,24);var h=pi();ie(h,"stroke-width",2),U(()=>{ie(h,"width",r()),ie(h,"color",t()),ie(h,"opacity",n())}),l(p,h)}var mi=T('<div role="button" tabindex="0" class="btn clip svelte-yuw12p"><!></div>'),fi=T('<div class="rel svelte-yuw12p"><div class="err font-label svelte-yuw12p"> </div></div>'),gi=T('<div class="container svelte-yuw12p"><div class="label svelte-yuw12p"><div class="labelInner font-label noselect svelte-yuw12p"><label><!></label></div></div> <input> <div class="rel svelte-yuw12p"><!> <div role="button" tabindex="0" class="btn show svelte-yuw12p"><!></div></div> <!></div>');function Wt(p,a){ne(a,!0);let t=z(a,"bindThis",15,void 0),n=z(a,"name",19,zt),r=z(a,"disabled",3,!1),h=z(a,"error",3,""),m=z(a,"showCopy",3,!1),u=z(a,"value",15,""),E=z(a,"width",3,"250px"),I=z(a,"maxWidth",3,"inherit"),v=z(a,"autocomplete",3,"current-password"),w=z(a,"type",15,"password"),f=Ut(a,["$$slots","$$events","$$legacy","bindThis","name","disabled","error","showCopy","value","width","maxWidth","autocomplete","type","children"]);const A=Xt();function k(K){K.code==="Enter"?A("enter",!0):A("keypress",!0)}function g(){A("blur",!0)}function y(){navigator.clipboard.writeText(u())}function $(){w()==="password"?w("text"):w("password")}function _(K){u(K.target.value)}var x=gi(),b=d(x),C=d(b),L=d(C),N=d(L);bt(N,()=>a.children??wt),c(L),c(C),c(b);var R=i(b,2);lt(R);let j;ra(R,K=>t(K),()=>t());var W=i(R,2),D=d(W);{var H=K=>{var Z=mi();Z.__click=y;var re=d(Z);cs(re,{}),c(Z),Me("keypress",Z,y),l(K,Z)};M(D,K=>{m()&&K(H)})}var P=i(D,2);P.__click=$;var O=d(P);{var G=K=>{_a(K,{width:22})},X=K=>{ka(K,{width:22})};M(O,K=>{w()==="password"?K(G):K(X,!1)})}c(P),c(W);var q=i(W,2);{var B=K=>{var Z=fi(),re=d(Z),ce=d(re,!0);c(re),c(Z),U(()=>{le(re,"width",E()),V(ce,h())}),ue(7,re,()=>we,()=>({duration:250})),l(K,Z)};M(q,K=>{h()&&K(B)})}c(x),U(()=>{le(x,"width",`calc(${E()??""} + 12px)`),le(x,"max-width",I()),le(C,"background",r()?"hsla(var(--bg-high) / .25)":"hsl(var(--bg))"),ie(L,"for",n()),j=sa(R,j,{type:w(),name:n(),disabled:r(),value:u(),autocomplete:v(),...f,oninput:_,onkeypress:k,onblur:g},"svelte-yuw12p"),le(R,"width",E()),le(R,"padding-right",m()?"45px":"25px")}),Me("keypress",P,$),l(p,x),oe()}it(["click"]);var wi=T('<div class="desc svelte-8ppjyk"><p><b>The user has not initialized this account yet.</b></p> <p>You may send out a new Reset E-Mail, if the user has not received one.</p></div> <!>',1),yi=T(`<div class="desc svelte-8ppjyk"><p><b>This is a passkey only account type.</b></p> <p>This means, that this user is using the passwordless login flow only and does not have any password.</p> <p>If the user has lost all his keys and you have verified everything, you may reset his account type and
                send out a new reset E-Mail, so the user can get access again.</p> <p>To reset the account, navigate to 'MFA' and delete all registered keys for this user.</p></div>`),bi=T(`<!> <!> <!> <!> <div class="desc svelte-8ppjyk">You can either set and reset a user's password<br> or send out a new reset E-Mail for self-service.</div> <!> <!>`,1),$i=T('<div class="success svelte-8ppjyk">Success</div>'),_i=T('<div class="err svelte-8ppjyk"> </div>'),ki=T('<div class="err svelte-8ppjyk"> </div>'),xi=T('<div class="container svelte-8ppjyk"><!> <!> <!> <!></div>');function Ei(p,a){ne(a,!0);let t=z(a,"user",27,()=>o({}));const n="inherit";let r=S(!1),h=S(""),m=S(""),u=S(!1),E=S(!1),I=S(void 0),v="330px",w=S(void 0),f=S(!1),A=o({new:"",verify:""});Te(()=>{e(E)&&s(I,o(setTimeout(()=>{s(E,!1),a.onSave()},3e3)))}),Le(async()=>{if(!e(w)){let P=await Ua(),O=await P.json();P.ok?s(w,o(O)):s(m,o(O.message))}});async function k(){return s(m,""),await g()?e(f)?!0:(s(m,"You must follow the password policy"),!1):!1}async function g(){return s(m,""),A.new.length>256?(s(m,"max 256 characters"),!1):A.new!==A.verify?(s(m,"New passwords do not match"),!1):!0}async function y(){let P={email:t().email};s(h,""),s(r,!0);let O=await Jr(P);if(O.ok)s(u,!0);else{let G=await O.json();s(h,o(G.message))}s(r,!1)}async function $(){let P={email:t().email,given_name:t().given_name,family_name:t().family_name,roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified};if(A.new.length>0){if(!(await g()&&await k()))return;P.password=A.new}s(m,""),s(r,!0);let O=await ls(t().id,P);if(O.ok)s(E,!0);else{let G=await O.json();s(m,o(G.message))}s(r,!1)}function _(){const P=e(w).length_min>24?e(w).length_min:24;let O=Ks(P,e(w).include_lower_case,e(w).include_upper_case,e(w).include_digits,e(w).include_special);A.new=O,A.verify=O}var x=xi(),b=d(x);{var C=P=>{var O=wi(),G=i(ee(O),2);Se(G,{width:n,level:2,get isLoading(){return e(r)},set isLoading(X){s(r,o(X))},$$events:{click:y},children:(X,q)=>{F();var B=Y("SEND RESET E-MAIL");l(X,B)},$$slots:{default:!0}}),l(P,O)},L=P=>{var O=me(),G=ee(O);{var X=B=>{var K=yi();l(B,K)},q=B=>{var K=bi(),Z=ee(K);{var re=de=>{or(de,{get password(){return A.new},get policy(){return e(w)},get accepted(){return e(f)},set accepted(ye){s(f,o(ye))}})};M(Z,de=>{e(w)&&de(re)})}var ce=i(Z,2),$e=We(()=>A.new.length>0&&A.new===A.verify);Wt(ce,{type:"password",get width(){return v},autocomplete:"off",get showCopy(){return e($e)},get value(){return A.new},set value(de){A.new=de},$$events:{blur:g},children:(de,ye)=>{F();var be=Y("New Password");l(de,be)},$$slots:{default:!0}});var _e=i(ce,2);Wt(_e,{type:"password",get width(){return v},autocomplete:"off",get value(){return A.verify},set value(de){A.verify=de},$$events:{blur:g},children:(de,ye)=>{F();var be=Y("New Password");l(de,be)},$$slots:{default:!0}});var pe=i(_e,2);Se(pe,{width:n,level:3,$$events:{click:_},children:(de,ye)=>{F();var be=Y("GENERATE RANDOM");l(de,be)},$$slots:{default:!0}});var Ne=i(pe,4);Se(Ne,{width:n,level:1,get isLoading(){return e(r)},set isLoading(de){s(r,o(de))},$$events:{click:y},children:(de,ye)=>{F();var be=Y("SEND RESET E-MAIL");l(de,be)},$$slots:{default:!0}});var ge=i(Ne,2);Se(ge,{width:n,get isLoading(){return e(r)},set isLoading(de){s(r,o(de))},$$events:{click:$},children:(de,ye)=>{F();var be=Y("SAVE PASSWORD");l(de,be)},$$slots:{default:!0}}),l(B,K)};M(G,B=>{t().account_type==="passkey"?B(X):B(q,!1)},!0)}l(P,O)};M(b,P=>{t().account_type==="new"?P(C):P(L,!1)})}var N=i(b,2);{var R=P=>{var O=$i();l(P,O)};M(N,P=>{(e(E)||e(u))&&P(R)})}var j=i(N,2);{var W=P=>{var O=_i(),G=d(O,!0);c(O),U(()=>V(G,e(m))),l(P,O)};M(j,P=>{e(m)&&P(W)})}var D=i(j,2);{var H=P=>{var O=ki(),G=d(O,!0);c(O),U(()=>V(G,e(h))),l(P,O)};M(D,P=>{e(h)&&P(H)})}c(x),l(p,x),oe()}var Ii=T('<div class="err svelte-1jljqe9"> </div>'),Si=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this user?</div> <!> <!></div>');function Ti(p,a){ne(a,!0);let t=z(a,"user",27,()=>o({})),n=S(!1),r=S("");async function h(){s(r,""),s(n,!0);let v=await cl(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Si(),u=i(d(m),2);Se(u,{level:1,width:"5rem",get isLoading(){return e(n)},set isLoading(v){s(n,o(v))},$$events:{click:h},children:(v,w)=>{F();var f=Y("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var I=v=>{var w=Ii(),f=d(w,!0);c(w),U(()=>V(f,e(r))),l(v,w)};M(E,v=>{e(r)&&v(I)})}c(m),l(p,m),oe()}var Ci=T('<div class="err svelte-1ofwsjt"> </div>'),Ai=T('<div class="success svelte-1ofwsjt">Success</div>'),Li=T('<div class="container svelte-1ofwsjt"><div class="label svelte-1ofwsjt">Invalidate all existing sessions and refresh tokens for this user?</div> <!> <!></div>');function ji(p,a){ne(a,!0);let t=z(a,"user",27,()=>o({})),n=S(!1),r=S(""),h=S(!1);async function m(){s(r,""),s(n,!0);let f=await nl(t().id);if(f.ok)s(h,!0);else{let A=await f.json();s(r,o(A.message))}s(n,!1)}var u=Li(),E=i(d(u),2);Se(E,{level:1,get isLoading(){return e(n)},set isLoading(f){s(n,o(f))},$$events:{click:m},children:(f,A)=>{F();var k=Y("LOGOUT");l(f,k)},$$slots:{default:!0}});var I=i(E,2);{var v=f=>{var A=Ci(),k=d(A,!0);c(A),U(()=>V(k,e(r))),l(f,A)},w=f=>{var A=me(),k=ee(A);{var g=y=>{var $=Ai();l(y,$)};M(k,y=>{e(h)&&y(g)},!0)}l(f,A)};M(I,f=>{e(r)?f(v):f(w,!1)})}c(u),l(p,u),oe()}var Ri=T('<div class="success svelte-iv4fzr">Success</div>'),Di=T('<div class="err svelte-iv4fzr"> </div>'),Ni=T('<div class="container svelte-iv4fzr"><div class="desc svelte-iv4fzr">Set custom user attributes.<br> All Key / Value pairs will be handled as String / String.</div> <!> <!> <!> <!></div>');function Mi(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(!1),h=S(!1);Le(()=>{E()});async function m(){let $=await ya();if(!$.ok)s(t,"Error fetching attr: "+$.body.message);else return await $.json()}async function u(){let $=await pl(a.user.id);if(!$.ok)s(t,"Error fetching user attr: "+$.body.message);else return await $.json()}async function E(){let $=await m(),_=$.values;if($){let x=await u();if(x){let b=new Map;for(let C of x.values)b.set(C.key,C.value||"");for(let C of _){let L=b.get(C.name);L?C.value=L:C.value=""}s(n,o([..._]))}}}async function I(){s(t,""),s(h,!0);let $=[];for(let C of e(n)){let L={key:C.name,value:C.value};$.push(L)}let _={values:$},x=await ml(a.user.id,_),b=await x.json();x.ok?s(r,!0):s(t,o(b.message)),a.onSave(),s(h,!1)}var v=Ni(),w=i(d(v),2);Ge(w,17,()=>e(n),ut,($,_,x)=>{var b=We(()=>e(_).desc||"JSON Value");ve($,{style:"width: 350px",autocomplete:"off",get placeholder(){return e(b)},get value(){return e(_).value},set value(C){e(_).value=C},children:(C,L)=>{F();var N=Y();U(()=>V(N,e(_).name)),l(C,N)},$$slots:{default:!0}})});var f=i(w,2);Se(f,{get isLoading(){return e(h)},level:1,width:"4rem",$$events:{click:I},children:($,_)=>{F();var x=Y("SAVE");l($,x)},$$slots:{default:!0}});var A=i(f,2);{var k=$=>{var _=Ri();l($,_)};M(A,$=>{e(r)&&$(k)})}var g=i(A,2);{var y=$=>{var _=Di(),x=d(_,!0);c(_),U(()=>V(x,e(t))),l($,_)};M(g,$=>{e(t)&&$(y)})}c(v),l(p,v),oe()}var zi=T('<div class="desc svelte-1a9qw6n">This user does not have any active MFA keys.</div>'),Pi=T('<div class="keyContainer svelte-1a9qw6n"><div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Passkey Name:</div> <b> </b></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Key Registered:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Last Usage:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n"></div> <div class="deleteBtn svelte-1a9qw6n"><!></div></div></div>'),Oi=T('<div class="desc svelte-1a9qw6n">You can delete the users MFA / Security Keys.<br> Be careful though, since this <b>cannot be reverted</b> without user interaction.<br> This is useful, if a user lost his keys and he is not able to log in any more.</div> <div class="keysContainer svelte-1a9qw6n"></div>',1),qi=T('<div class="err svelte-1a9qw6n"> </div>'),Ui=T('<div class="container svelte-1a9qw6n"><!> <!></div>');function Gi(p,a){ne(a,!0);let t=z(a,"user",27,()=>o({})),n=S(""),r=S(o([]));Le(async()=>{await h()});async function h(){let A=await js(t().id),k=await A.json();A.ok?s(r,o(k)):console.error("error fetching passkeys: "+k.message)}async function m(A){let k=e(r).length===1,g=await Rs(t().id,A);if(g.status===200)return await h(),k&&a.onSave(),!0;{let y=await g.json();return s(n,o(y.message)),!1}}var u=Ui(),E=d(u);{var I=A=>{var k=zi();l(A,k)},v=A=>{var k=Oi(),g=i(ee(k),2);Ge(g,21,()=>e(r),y=>y.name,(y,$)=>{var _=Pi(),x=d(_),b=i(d(x),2),C=d(b,!0);c(b),c(x);var L=i(x,2),N=i(d(L),2),R=d(N,!0);U(()=>V(R,pt(e($).registered))),c(N),c(L);var j=i(L,2),W=i(d(j),2),D=d(W,!0);U(()=>V(D,pt(e($).last_used))),c(W),c(j);var H=i(j,2),P=i(d(H),2),O=d(P);Se(O,{level:4,$$events:{click:()=>m(e($).name)},children:(G,X)=>{F();var q=Y("DELETE");l(G,q)},$$slots:{default:!0}}),c(P),c(H),c(_),U(()=>V(C,e($).name)),l(y,_)}),c(g),l(A,k)};M(E,A=>{e(r).length<1?A(I):A(v,!1)})}var w=i(E,2);{var f=A=>{var k=qi(),g=d(k,!0);c(k),U(()=>V(g,e(n))),l(A,k)};M(w,A=>{e(n)&&A(f)})}c(u),l(p,u),oe()}var Ki=T('<div class="container svelte-nw2ucx"><!></div>');function Wi(p,a){ne(a,!0);var t=Ki(),n=d(t);ar(n,{get userId(){return a.user.id}}),c(t),l(p,t),oe()}var Fi=T('<div class="data font-mono svelte-115hohv"> </div>'),Bi=T('<div class="data svelte-115hohv"> </div>'),Hi=T('<div class="header svelte-115hohv"><!> <!></div>'),Yi=T("<div><!></div>"),Vi=T("<div><!></div>"),Ji=T("<div><!></div>"),Qi=T("<div><!></div>"),Zi=T("<div><!></div>"),Xi=T("<div><!></div>"),en=T("<div><!></div>"),tn=T("<!> <!>",1),an=T("<div><!></div>");function ds(p,a){ne(a,!0);let t=z(a,"userEmail",3,""),n=z(a,"userId",3,""),r=z(a,"onSave",15),h=S(void 0),m=S(!0),u=S(void 0);const E=["Info","Attributes","Password","MFA","Devices","Logout","Delete"];let I=S(o(E[0]));const v=200,w=v/2;async function f(){const k=await Ds(n());if(k.ok)s(h,o(await k.json()));else{let g=await k.json();console.error(g)}s(m,!1)}function A(){s(u,!1),r()()}Te(()=>{e(u)&&f()}),vt(p,{get show(){return e(u)},set show(k){s(u,o(k))},header:k=>{var g=Hi(),y=d(g);Ze(y,{text:"User ID",children:(_,x)=>{var b=Fi(),C=d(b,!0);c(b),U(()=>V(C,n())),l(_,b)},$$slots:{default:!0}});var $=i(y,2);Ze($,{text:"E-Mail",children:(_,x)=>{var b=Bi(),C=d(b,!0);c(b),U(()=>V(C,t())),l(_,b)},$$slots:{default:!0}}),c(g),l(k,g)},body:k=>{var g=an(),y=d(g);{var $=x=>{ma(x,{})},_=x=>{var b=tn(),C=ee(b);Dt(C,{labels:E,get selected(){return e(I)},set selected(j){s(I,o(j))}});var L=i(C,2);{var N=j=>{var W=Yi(),D=d(W);oi(D,{get user(){return e(h)},set user(H){s(h,o(H))},get onSave(){return r()},set onSave(H){r(H)}}),c(W),ue(5,W,()=>we,()=>({delay:w,duration:v})),ue(6,W,()=>we,()=>({duration:v})),l(j,W)},R=j=>{var W=me(),D=ee(W);{var H=O=>{var G=Vi(),X=d(G);Mi(X,{get user(){return e(h)},set user(q){s(h,o(q))},get onSave(){return r()},set onSave(q){r(q)}}),c(G),ue(5,G,()=>we,()=>({delay:w,duration:v})),ue(6,G,()=>we,()=>({duration:v})),l(O,G)},P=O=>{var G=me(),X=ee(G);{var q=K=>{var Z=Ji(),re=d(Z);Ei(re,{get user(){return e(h)},set user(ce){s(h,o(ce))},get onSave(){return r()},set onSave(ce){r(ce)}}),c(Z),ue(5,Z,()=>we,()=>({delay:w,duration:v})),ue(6,Z,()=>we,()=>({duration:v})),l(K,Z)},B=K=>{var Z=me(),re=ee(Z);{var ce=_e=>{var pe=Qi(),Ne=d(pe);Gi(Ne,{get user(){return e(h)},set user(ge){s(h,o(ge))},get onSave(){return r()},set onSave(ge){r(ge)}}),c(pe),ue(5,pe,()=>we,()=>({delay:w,duration:v})),ue(6,pe,()=>we,()=>({duration:v})),l(_e,pe)},$e=_e=>{var pe=me(),Ne=ee(pe);{var ge=ye=>{var be=Zi(),ze=d(be);Wi(ze,{get user(){return e(h)},set user(Ce){s(h,o(Ce))}}),c(be),ue(5,be,()=>we,()=>({delay:w,duration:v})),ue(6,be,()=>we,()=>({duration:v})),l(ye,be)},de=ye=>{var be=me(),ze=ee(be);{var Ce=Re=>{var J=Xi(),Ie=d(J);ji(Ie,{get user(){return e(h)},set user(fe){s(h,o(fe))}}),c(J),ue(5,J,()=>we,()=>({delay:w,duration:v})),ue(6,J,()=>we,()=>({duration:v})),l(Re,J)},xe=Re=>{var J=me(),Ie=ee(J);{var fe=qe=>{var Ve=en(),rt=d(Ve);Ti(rt,{onSave:A,get user(){return e(h)},set user(ct){s(h,o(ct))}}),c(Ve),ue(5,Ve,()=>we,()=>({delay:w,duration:v})),ue(6,Ve,()=>we,()=>({duration:v})),l(qe,Ve)};M(Ie,qe=>{e(I)==="Delete"&&qe(fe)},!0)}l(Re,J)};M(ze,Re=>{e(I)==="Logout"?Re(Ce):Re(xe,!1)},!0)}l(ye,be)};M(Ne,ye=>{e(I)==="Devices"?ye(ge):ye(de,!1)},!0)}l(_e,pe)};M(re,_e=>{e(I)==="MFA"?_e(ce):_e($e,!1)},!0)}l(K,Z)};M(X,K=>{e(I)==="Password"?K(q):K(B,!1)},!0)}l(O,G)};M(D,O=>{e(I)==="Attributes"?O(H):O(P,!1)},!0)}l(j,W)};M(L,j=>{e(I)==="Info"?j(N):j(R,!1)})}l(x,b)};M(y,x=>{e(m)?x($):x(_,!1)})}c(g),l(k,g)},$$slots:{header:!0,body:!0}}),oe()}var sn=T('<div class="header font-label svelte-1y7ceqm">ADD NEW USER</div>'),rn=T('<div class="err svelte-1y7ceqm"> </div>'),ln=T('<div class="container svelte-1y7ceqm"><!> <!> <!> <div class="language svelte-1y7ceqm"><div class="label svelte-1y7ceqm">LANGUAGE</div> <div style="margin-top: .4rem"><!></div></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">ROLES</div> <!></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">GROUPS</div> <!></div> <div class="unit svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">LIMIT LIFETIME</div> <div class="value"><!></div></div> <!> <div class="btn svelte-1y7ceqm"><!> <!></div></div>');function nn(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1),n=S(""),r=S(void 0),h=S("EN"),m=S(!1),u=S(void 0),E=S(o({email:"",family_name:"",given_name:"",roles:[],groups:[]})),I=S(o({}));const v=Qe().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(ua,"Invalid characters"),family_name:he().trim().required("Family Name is required").matches(ua,"Invalid characters")});let w=S(void 0);ba.subscribe(g=>{s(w,o(g))});let f=S(void 0);$a.subscribe(g=>{s(f,o(g))});async function A(){if(!await k())return;s(n,"");let g=e(E);if(g.language=e(h).toLowerCase(),e(m)){let $=Ot(e(u));if(!$){s(n,"Invalid Date Input: User Expires");return}g.user_expires=$}let y=await vl(e(E));if(y.ok)s(E,o({})),s(r,!1),s(E,o({email:"",family_name:"",given_name:"",roles:[],groups:[]})),a.onSave();else{let $=await y.json();s(n,o($.message))}}async function k(){try{return await v.validate(e(E),{abortEarly:!1}),s(I,o({})),!0}catch(g){return s(I,o(Je(g))),!1}}vt(p,{get idx(){return t()},set idx(g){t(g)},get show(){return e(r)},set show(g){s(r,o(g))},header:g=>{var y=sn();l(g,y)},body:g=>{var y=ln(),$=d(y);ve($,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return e(E).email},set value(Z){e(E).email=Z},get error(){return e(I).email},set error(Z){e(I).email=Z},$$events:{input:k},children:(Z,re)=>{F();var ce=Y("E-MAIL");l(Z,ce)},$$slots:{default:!0}});var _=i($,2);ve(_,{autocomplete:"off",placeholder:"Given Name",get value(){return e(E).given_name},set value(Z){e(E).given_name=Z},get error(){return e(I).given_name},set error(Z){e(I).given_name=Z},$$events:{input:k},children:(Z,re)=>{F();var ce=Y("GIVEN NAME");l(Z,ce)},$$slots:{default:!0}});var x=i(_,2);ve(x,{autocomplete:"off",placeholder:"Family Name",get value(){return e(E).family_name},set value(Z){e(E).family_name=Z},get error(){return e(I).family_name},set error(Z){e(I).family_name=Z},$$events:{input:k},children:(Z,re)=>{F();var ce=Y("FAMILY NAME");l(Z,ce)},$$slots:{default:!0}});var b=i(x,2),C=i(d(b),2),L=d(C);Et(L,{options:Ka,get value(){return e(h)},set value(Z){s(h,o(Z))}}),c(C),c(b);var N=i(b,2),R=i(d(N),2);Pt(R,{get options(){return e(w)},searchThreshold:4,get items(){return e(E).roles},set items(Z){e(E).roles=Z}}),c(N);var j=i(N,2),W=i(d(j),2);Pt(W,{get options(){return e(f)},searchThreshold:4,get items(){return e(E).groups},set items(Z){e(E).groups=Z}}),c(j);var D=i(j,2);le(D,"margin-top","12px");var H=i(d(D),2),P=d(H);He(P,{get selected(){return e(m)},set selected(Z){s(m,o(Z))}}),c(H),c(D);var O=i(D,2);{var G=Z=>{ve(Z,{type:"datetime-local",step:"60",width:"18rem",get min(){return new Date().toISOString().split(".")[0]},max:"2099-01-01T00:00",get value(){return e(u)},set value(re){s(u,o(re))},$$events:{input:k},children:(re,ce)=>{F();var $e=Y("USER EXPIRES");l(re,$e)},$$slots:{default:!0}})};M(O,Z=>{e(m)&&Z(G)})}var X=i(O,2),q=d(X);Se(q,{level:1,$$events:{click:A},children:(Z,re)=>{F();var ce=Y("SAVE");l(Z,ce)},$$slots:{default:!0}});var B=i(q,2);{var K=Z=>{var re=rn(),ce=d(re,!0);c(re),U(()=>V(ce,e(n))),l(Z,re)};M(B,Z=>{e(n)&&Z(K)})}c(X),c(y),l(g,y)},$$slots:{header:!0,body:!0}}),oe()}var on=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"></path></svg>');function vn(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=on();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var cn=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"></path></svg>');function dn(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=cn();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var un=T("<option> </option>"),hn=T('<select class="opts font-label svelte-t7wy0q"></select>'),pn=T('<div role="button" tabindex="0" class="icon svelte-t7wy0q"><!></div>'),mn=T('<div class="container svelte-t7wy0q"><!> <!></div>');function fn(p,a){ne(a,!0);let t=z(a,"items",19,()=>[]),n=z(a,"resItems",15),r=z(a,"options",19,()=>[]),h=z(a,"firstDirReverse",3,!1),m=S(""),u=S(1),E;Le(()=>{r().length>0&&(s(m,o(r()[0].label)),I()),h()&&w(),v()});function I(){for(let $ of r())if($.label===e(m)){E=$.callback;break}E||console.error("Could not find a valid callback function in order options for label "+e(m))}function v(){if(E){let $=[...t()];$.sort((_,x)=>E(_,x)*e(u)),n([...$])}}function w(){s(u,e(u)*-1),v()}Te(()=>{t()&&v()}),Te(()=>{e(m)&&(I(),v())});var f=mn(),A=d(f);{var k=$=>{Ze($,{text:"Order by",yOffset:-30,children:(_,x)=>{var b=hn();Ge(b,21,r,ut,(C,L)=>{var N=un(),R={},j=d(N,!0);c(N),U(()=>{R!==(R=e(L).label)&&(N.value=(N.__value=e(L).label)==null?"":e(L).label),V(j,e(L).label)}),l(C,N)}),c(b),ga(b,()=>e(m),C=>s(m,C)),l(_,b)},$$slots:{default:!0}})};M(A,$=>{r().length>1&&$(k)})}var g=i(A,2);{var y=$=>{var _=pn();_.__click=w;var x=d(_);{var b=L=>{dn(L,{})},C=L=>{vn(L,{})};M(x,L=>{e(u)===1?L(b):L(C,!1)})}c(_),Me("keypress",_,w),l($,_)};M(g,$=>{r().length>0&&$(y)})}c(f),l(p,f),oe()}it(["click"]);var gn=T('<div class="divider svelte-16rtgja"></div>'),wn=T('<div class="container svelte-16rtgja"><div><!></div> <!> <div><!></div></div>');function Lt(p,a){ne(a,!0);let t=z(a,"items",31,()=>o([])),n=z(a,"resItems",15),r=z(a,"searchOptions",27,()=>o([])),h=z(a,"orderOptions",27,()=>o([])),m=z(a,"firstDirReverse",3,!1),u=z(a,"useServerSideIdx",15,""),E=z(a,"isSearchFiltered",15,!1),I=z(a,"search",15,""),v=S(o([]));var w=wn(),f=d(w),A=d(f);fn(A,{get items(){return e(v)},get options(){return h()},get firstDirReverse(){return m()},get resItems(){return n()},set resItems(_){n(_)}}),c(f);var k=i(f,2);{var g=_=>{var x=gn();l(_,x)};M(k,_=>{h().length>0&&_(g)})}var y=i(k,2),$=d(y);vs($,{get options(){return r()},get items(){return t()},set items(_){t(_)},get resItems(){return e(v)},set resItems(_){s(v,o(_))},get useServerSideIdx(){return u()},set useServerSideIdx(_){u(_)},get isSearchFiltered(){return E()},set isSearchFiltered(_){E(_)},get search(){return I()},set search(_){I(_)}}),c(y),c(w),l(p,w),oe()}var yn=(p,a)=>s(a,e(a)-1),bn=T('<div role="button" tabindex="0" class="icon iconLeft svelte-9iw34a"><!></div>'),$n=(p,a,t)=>s(a,o(e(t))),_n=T('<div role="button" tabindex="0" class="link noselect svelte-9iw34a"> </div>'),kn=(p,a)=>s(a,e(a)+1),xn=T('<div role="button" tabindex="0" class="icon iconRight svelte-9iw34a"><!></div>'),En=T('<div class="container svelte-9iw34a"><!> <div class="links svelte-9iw34a"></div> <!> <div class="chunkSize noselect svelte-9iw34a">Entries <!></div> <div class="font-label total svelte-9iw34a"> </div></div>');function Nt(p,a){ne(a,!0);let t=z(a,"items",27,()=>o([])),n=z(a,"resItems",31,()=>o([]));const r=[5,7,10,15,20,30,50,100],h=16;let m=S(o([])),u=S(1),E=5,I=S(15),v=S(!1),w=S(!1),f=S(o([]));Te(()=>{e(I)&&s(u,1)}),Te(()=>{if(e(I)&&t().length>0){let N=[];for(let R=0;R<t().length;R+=e(I)){const j=t().slice(R,R+e(I));N.push(j)}s(m,o(N)),n(e(m)[e(u)-1])}}),Te(()=>{if(e(u)){let N=[],R=Math.floor(E/2);if(e(m).length<=E){for(let j=1;j<=e(m).length;j++)N.push(j);s(v,!1),s(w,!1)}else if(e(u)<=R){for(let j=1;j<=E;j++)N.push(j);s(v,!1),s(w,!0)}else if(e(u)>e(m).length-R-1){for(let j=e(m).length-E;j<=e(m).length-1;j++)N.push(j+1);s(v,!0),s(w,!1)}else{for(let j=e(u)-R;j<e(u)-R+E;j++)N.push(j);s(v,!0),s(w,!0)}s(f,o(N))}});var A=En(),k=d(A);{var g=N=>{var R=bn();R.__click=[yn,u];var j=d(R);Qt(j,{width:h}),c(R),Me("keypress",R,()=>s(u,e(u)-1)),l(N,R)};M(k,N=>{e(v)&&N(g)})}var y=i(k,2);Ge(y,21,()=>e(f),ut,(N,R)=>{var j=_n();j.__click=[$n,u,R];var W=d(j,!0);c(j),U(()=>{St(j,"selected",e(u)===e(R)),V(W,e(R))}),Me("keypress",j,()=>s(u,o(e(R)))),l(N,j)}),c(y);var $=i(y,2);{var _=N=>{var R=xn();R.__click=[kn,u];var j=d(R);Qt(j,{width:h}),c(R),Me("keypress",R,()=>s(u,e(u)+1)),l(N,R)};M($,N=>{e(w)&&N(_)})}var x=i($,2),b=i(d(x));Et(b,{options:r,width:"50px",get value(){return e(I)},set value(N){s(I,o(N))}}),c(x);var C=i(x,2),L=d(C);c(C),c(A),U(()=>V(L,`Total: ${t().length??""}`)),l(p,A),oe()}it(["click"]);var In=(p,a)=>a()(0,!0),Sn=T('<div role="button" tabindex="0" class="icon iconLeft svelte-1jvef4m"><!></div>'),Tn=(p,a)=>a()(0,!1),Cn=T('<div role="button" tabindex="0" class="icon iconRight svelte-1jvef4m"><!></div>'),An=T('<div class="font-label total svelte-1jvef4m"> </div>'),Ln=T('<div class="container svelte-1jvef4m"><!> <div class="links svelte-1jvef4m"><div class="pageNo noselect svelte-1jvef4m"> </div></div> <!> <div class="chunkSize noselect svelte-1jvef4m">Entries <!></div> <!></div>');function us(p,a){ne(a,!0);let t=z(a,"itemsTotal",3,0),n=z(a,"sspPage",11,1),r=z(a,"sspPageSize",11,15),h=z(a,"sspContinuationToken",11,""),m=z(a,"fetchPageCallback",3,(N,R)=>{}),u=z(a,"sspPageSizeChange",3,N=>{});const E=[2,3,5,7,10,15,20,30,50,100],I=16;let v=S(o(r()));Te(()=>{e(v)&&(console.log("page size change in pagination server"),u()(e(v)))});var w=Ln(),f=d(w);{var A=N=>{var R=Sn();R.__click=[In,m];var j=d(R);Qt(j,{width:I}),c(R),Me("keypress",R,()=>m()(0,!0)),l(N,R)};M(f,N=>{n()!==1&&N(A)})}var k=i(f,2),g=d(k),y=d(g,!0);c(g),c(k);var $=i(k,2);{var _=N=>{var R=Cn();R.__click=[Tn,m];var j=d(R);Qt(j,{width:I}),c(R),Me("keypress",R,()=>m()(0,!1)),l(N,R)};M($,N=>{h()&&N(_)})}var x=i($,2),b=i(d(x));Et(b,{options:E,width:"50px",get value(){return e(v)},set value(N){s(v,o(N))}}),c(x);var C=i(x,2);{var L=N=>{var R=An(),j=d(R);c(R),U(()=>V(j,`Total: ${t()??""}`)),l(N,R)};M(C,N=>{t()&&t()>0&&N(L)})}c(w),U(()=>V(y,n())),l(p,w),oe()}it(["click"]);var jn=T('<div class="svelte-1n3c0ep"><!></div>'),Rn=T('<div class="svelte-1n3c0ep"><!></div>'),Dn=T(' <div class="content"><!> <!> <div id="users" class="svelte-1n3c0ep"><!></div> <!></div>',1);function Nn(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=S(""),u=S(!1),E=S(""),I=S(0),v=S(15),w=S(""),f=S(1),A=S(o([{label:"E-Mail",callback:(q,B)=>q.email.toLowerCase().includes(B.toLowerCase())},{label:"ID",callback:(q,B)=>q.id.toLowerCase().includes(B.toLowerCase())}])),k=S(o([{label:"E-Mail",callback:(q,B)=>q.email.localeCompare(B.email)},{label:"ID",callback:(q,B)=>q.id.localeCompare(B.id)},{label:"Created",callback:(q,B)=>q.created_at<B.created_at},{label:"Last Login",callback:(q,B)=>{let K=q.last_login||9999999999,Z=B.last_login||9999999999;return K<Z}}]));Le(async()=>{g(),_(),x()});async function g(q,B,K,Z){let re;if(q===!0?K&&e(f)===2?re=await rs(Z||e(v),B,void 0,!1):re=await rs(Z||e(v),B,e(w),K):re=await ol(),!re.ok)s(t,"Error fetching users: "+re.body.message);else{re.status===206?(s(v,o(Number.parseInt(re.headers.get("x-page-size"),10))),s(m,"user"),re.headers.get("x-continuation-token"),s(w,o(re.headers.get("x-continuation-token")))):s(m,""),s(I,o(re.headers.get("x-user-count")));let ce=await re.json();s(n,o([...ce])),s(r,o([...ce]))}}async function y(q,B){await g(!0,q,B),B?s(f,e(f)-1):s(f,e(f)+1)}async function $(q){s(w,""),await g(!0,0,!1,q),s(f,1)}async function _(){let q=await is();if(!q.ok)s(t,"Error fetching roles: "+q.body.message);else{let B=await q.json();Dl.set(B),ba.set(B.map(K=>K.name))}}async function x(){let q=await as();if(!q.ok)s(t,"Error fetching groups: "+q.body.message);else{let B=await q.json();Nl.set(B),$a.set(B.map(K=>K.name))}}function b(){g(),_(),x(),s(E,"")}F();var C=Dn(),L=ee(C),N=i(L),R=d(N);Lt(R,{get items(){return e(n)},get resItems(){return e(r)},set resItems(q){s(r,o(q))},get searchOptions(){return e(A)},set searchOptions(q){s(A,o(q))},get orderOptions(){return e(k)},set orderOptions(q){s(k,o(q))},get useServerSideIdx(){return e(m)},set useServerSideIdx(q){s(m,o(q))},get isSearchFiltered(){return e(u)},set isSearchFiltered(q){s(u,o(q))},get search(){return e(E)},set search(q){s(E,o(q))}});var j=i(R,2);nn(j,{onSave:b});var W=i(j,2),D=d(W);{var H=q=>{var B=me(),K=ee(B);Ge(K,17,()=>e(r),Z=>Z.id,(Z,re)=>{var ce=jn(),$e=d(ce);ds($e,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:b}),c(ce),l(Z,ce)}),l(q,B)},P=q=>{var B=me(),K=ee(B);Ge(K,17,()=>e(h),Z=>Z.id,(Z,re)=>{var ce=Rn(),$e=d(ce);ds($e,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:b}),c(ce),l(Z,ce)}),l(q,B)};M(D,q=>{e(m)&&!e(u)?q(H):q(P,!1)})}c(W);var O=i(W,2);{var G=q=>{us(q,{get itemsTotal(){return e(I)},fetchPageCallback:y,sspPageSizeChange:$,get sspPage(){return e(f)},set sspPage(B){s(f,o(B))},get sspPageSize(){return e(v)},set sspPageSize(B){s(v,o(B))},get sspContinuationToken(){return e(w)},set sspContinuationToken(B){s(w,o(B))}})},X=q=>{Nt(q,{get items(){return e(r)},set items(B){s(r,o(B))},get resItems(){return e(h)},set resItems(B){s(h,o(B))}})};M(O,q=>{e(m)&&!e(u)?q(G):q(X,!1)})}c(N),U(()=>V(L,`${e(t)??""} `)),l(p,C),oe()}var Mn=T('<div class="content svelte-1mqfi4i"><!></div>');function _t(p,a){ne(a,!0);let t=z(a,"eventsCollapsed",11,!0),n=z(a,"eventsWide",11,!1);var r=Mn(),h=d(r);bt(h,()=>a.children??wt),c(r),U(()=>{St(r,"mr",!t()&&!n()),St(r,"mrCollapsed",t()&&!n()),St(r,"mrWide",!t()&&n())}),l(p,r),oe()}var zn=T('<div class="success svelte-17in7jd">Success</div>'),Pn=T('<div class="mainErr err svelte-17in7jd"> </div>'),On=T('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function qn(p,a){ne(a,!0);let t=z(a,"role",31,()=>o({})),n=S(""),r=S(!1),h=S(void 0);Te(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=S(o({}));const u=Qe().shape({name:he().trim().matches(Gt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(s(n,""),!await I()){s(n,"Invalid input");return}let C={role:t().name.trim()},L=await El(t().id,C);if(L.ok)s(r,!0);else{let N=await L.json();s(n,o(N.message))}}async function I(){try{return await u.validate(t(),{abortEarly:!1}),s(m,o({})),!0}catch(C){return s(m,o(Je(C))),!1}}var v=On(),w=d(v),f=i(d(w),2),A=d(f,!0);c(f),c(w);var k=i(w,2),g=We(()=>t().name==="rauthy_admin");ve(k,{autocomplete:"off",placeholder:"Role Name",get disabled(){return e(g)},get value(){return t().name},set value(C){t(t().name=C,!0)},get error(){return e(m).name},set error(C){e(m).name=C},$$events:{input:I},children:(C,L)=>{F();var N=Y("ROLE NAME");l(C,N)},$$slots:{default:!0}});var y=i(k,2);Se(y,{level:1,width:"4rem",$$events:{click:E},children:(C,L)=>{F();var N=Y("SAVE");l(C,N)},$$slots:{default:!0}});var $=i(y,2);{var _=C=>{var L=zn();l(C,L)};M($,C=>{e(r)&&C(_)})}var x=i($,2);{var b=C=>{var L=Pn(),N=d(L,!0);c(L),U(()=>V(N,e(n))),l(C,L)};M(x,C=>{e(n)&&C(b)})}c(v),U(()=>V(A,t().id)),l(p,v),oe()}var Un=T('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy_admin role cannot be deleted.</div>'),Gn=T('<div class="err svelte-1jljqe9"> </div>'),Kn=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this role?</div> <!> <!>',1),Wn=T('<div class="container svelte-1jljqe9"><!></div>');function Fn(p,a){ne(a,!0);let t=z(a,"role",19,()=>({})),n=S(!1),r=S("");async function h(){s(r,""),s(n,!0);let v=await Il(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Wn(),u=d(m);{var E=v=>{var w=Un();l(v,w)},I=v=>{var w=Kn(),f=i(ee(w),2);Se(f,{level:1,get isLoading(){return e(n)},set isLoading(g){s(n,o(g))},$$events:{click:h},children:(g,y)=>{F();var $=Y("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var y=Gn(),$=d(y,!0);c(y),U(()=>V($,e(r))),l(g,y)};M(A,g=>{e(r)&&g(k)})}l(v,w)};M(u,v=>{t().name==="rauthy_admin"?v(E):v(I,!1)})}c(m),l(p,m),oe()}var Bn=T('<div class="data font-mono svelte-115hohv"> </div>'),Hn=T('<div class="data svelte-115hohv"> </div>'),Yn=T('<div class="header svelte-115hohv"><!> <!></div>'),Vn=T("<div><!></div>"),Jn=T("<div><!></div>"),Qn=T("<div><!> <!></div>");function Zn(p,a){ne(a,!0);let t=z(a,"role",31,()=>o({})),n=z(a,"onSave",15),r=S(void 0);const h=["Config","Delete"];let m=S(o(h[0]));const u=200,E=u/2;function I(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Yn(),f=d(w);Ze(f,{text:"Role ID",children:(k,g)=>{var y=Bn(),$=d(y,!0);c(y),U(()=>V($,t().id)),l(k,y)},$$slots:{default:!0}});var A=i(f,2);Ze(A,{text:"Role Name",children:(k,g)=>{var y=Hn(),$=d(y,!0);c(y),U(()=>V($,t().name)),l(k,y)},$$slots:{default:!0}}),c(w),l(v,w)},body:v=>{var w=Qn(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Vn(),_=d($);qn(_,{get role(){return t()},set role(x){t(x)},get onSave(){return n()},set onSave(x){n(x)}}),c($),ue(5,$,()=>we,()=>({delay:E,duration:u})),ue(6,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=me(),_=ee($);{var x=b=>{var C=Jn(),L=d(C);Fn(L,{get role(){return t()},onSave:I}),c(C),ue(5,C,()=>we,()=>({delay:E,duration:u})),ue(6,C,()=>we,()=>({duration:u})),l(b,C)};M(_,b=>{e(m)==="Delete"&&b(x)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),oe()}var Xn=T('<div class="header font-label svelte-r30xs6">ADD NEW ROLE</div>'),eo=T('<div class="success svelte-r30xs6">Success</div>'),to=T('<div class="err svelte-r30xs6"> </div>'),ao=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function so(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1),n=S(void 0),r=S(o({role:""})),h=S(""),m=S(!1),u=S(void 0),E=S(o({}));const I=Qe().shape({role:he().trim().matches(Gt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(m)&&s(u,o(setTimeout(()=>{s(m,!1),s(r,o({role:""})),s(n,!1),a.onSave()},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await w()){s(h,"Invalid input");return}e(r).role=e(r).role.trim();let f=await xl(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,o(A.message))}}async function w(){try{return await I.validate(e(r),{abortEarly:!1}),s(E,o({})),!0}catch(f){return s(E,o(Je(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(n)},set show(f){s(n,o(f))},header:f=>{var A=Xn();l(f,A)},body:f=>{var A=ao(),k=d(A);ve(k,{autocomplete:"off",placeholder:"Role Name",get value(){return e(r).role},set value(b){e(r).role=b},get error(){return e(E).role},set error(b){e(E).role=b},$$events:{input:w},children:(b,C)=>{F();var L=Y("ROLE NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=eo();l(b,C)};M(y,b=>{e(m)&&b($)})}var _=i(y,2);{var x=b=>{var C=to(),L=d(C,!0);c(C),U(()=>V(L,e(h))),l(b,C)};M(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),oe()}var ro=T('<div class="svelte-db30dl"><!></div>'),lo=T(' <div class="content"><!> <!> <div id="roles" class="svelte-db30dl"></div> <!> <div style="height: 20px"></div></div>',1);function io(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=S(""),u=[{label:"Name",callback:(_,x)=>_.name.toLowerCase().includes(x.toLowerCase())},{label:"ID",callback:(_,x)=>_.id.toLowerCase().includes(x.toLowerCase())}],E=[{label:"Name",callback:(_,x)=>_.name.localeCompare(x.name)},{label:"ID",callback:(_,x)=>_.id.localeCompare(x.id)}];Le(async()=>{I()});async function I(){let _=await is(),x=await _.json();_.ok?s(n,o([...x])):s(t,o(x.message))}function v(){I(),s(m,"")}F();var w=lo(),f=ee(w),A=i(f),k=d(A);Lt(k,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(_){s(r,o(_))},get search(){return e(m)},set search(_){s(m,o(_))}});var g=i(k,2);so(g,{onSave:v});var y=i(g,2);Ge(y,23,()=>e(h),_=>_.id,(_,x,b)=>{var C=ro(),L=d(C);Zn(L,{onSave:v,get role(){return e(n)[e(b)]},set role(N){e(n)[e(b)]=N}}),c(C),l(_,C)}),c(y);var $=i(y,2);Nt($,{get items(){return e(r)},set items(_){s(r,o(_))},get resItems(){return e(h)},set resItems(_){s(h,o(_))}}),F(2),c(A),U(()=>V(f,`${e(t)??""} `)),l(p,w),oe()}var no=T('<div class="header font-label svelte-r30xs6">ADD NEW GROUP</div>'),oo=T('<div class="success svelte-r30xs6">Success</div>'),vo=T('<div class="err svelte-r30xs6"> </div>'),co=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function uo(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1),n=S(void 0),r=S(o({group:""})),h=S(""),m=S(!1),u=S(void 0),E=S(o({}));const I=Qe().shape({group:he().trim().matches(Gt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(m)&&s(u,o(setTimeout(()=>{a.onSave(),s(m,!1),s(r,o({group:""})),s(n,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await w()){s(h,"Invalid input");return}e(r).group=e(r).group.trim();let f=await Wr(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,o(A.message))}}async function w(){try{return await I.validate(e(r),{abortEarly:!1}),s(E,o({})),!0}catch(f){return s(E,o(Je(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(n)},set show(f){s(n,o(f))},header:f=>{var A=no();l(f,A)},body:f=>{var A=co(),k=d(A);ve(k,{autocomplete:"off",placeholder:"Group Name",get value(){return e(r).group},set value(b){e(r).group=b},get error(){return e(E).group},set error(b){e(E).group=b},$$events:{input:w},children:(b,C)=>{F();var L=Y("GROUP NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=oo();l(b,C)};M(y,b=>{e(m)&&b($)})}var _=i(y,2);{var x=b=>{var C=vo(),L=d(C,!0);c(C),U(()=>V(L,e(h))),l(b,C)};M(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),oe()}var ho=T('<div class="success svelte-17in7jd">Success</div>'),po=T('<div class="mainErr err svelte-17in7jd"> </div>'),mo=T('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function fo(p,a){ne(a,!0);let t=z(a,"group",31,()=>o({})),n=S(""),r=S(!1),h=S(void 0);Te(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=S(o({}));const u=Qe().shape({name:he().trim().matches(Gt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(s(n,""),!await I()){s(n,"Invalid input");return}let b={group:t().name.trim()},C=await Fr(t().id,b);if(C.ok)s(r,!0);else{let L=await C.json();s(n,o(L.message))}}async function I(){try{return await u.validate(t(),{abortEarly:!1}),s(m,o({})),!0}catch(b){return s(m,o(Je(b))),!1}}var v=mo(),w=d(v),f=i(d(w),2),A=d(f,!0);c(f),c(w);var k=i(w,2);ve(k,{autocomplete:"off",placeholder:"Group Name",get value(){return t().name},set value(b){t(t().name=b,!0)},get error(){return e(m).name},set error(b){e(m).name=b},$$events:{input:I},children:(b,C)=>{F();var L=Y("GROUP NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:E},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=ho();l(b,C)};M(y,b=>{e(r)&&b($)})}var _=i(y,2);{var x=b=>{var C=po(),L=d(C,!0);c(C),U(()=>V(L,e(n))),l(b,C)};M(_,b=>{e(n)&&b(x)})}c(v),U(()=>V(A,t().id)),l(p,v),oe()}var go=T('<div class="err svelte-1jljqe9"> </div>'),wo=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this group?</div> <!> <!></div>');function yo(p,a){ne(a,!0);let t=z(a,"group",19,()=>({})),n=S(!1),r=S("");async function h(){s(r,""),s(n,!0);let v=await Br(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=wo(),u=i(d(m),2);Se(u,{level:1,get isLoading(){return e(n)},set isLoading(v){s(n,o(v))},$$events:{click:h},children:(v,w)=>{F();var f=Y("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var I=v=>{var w=go(),f=d(w,!0);c(w),U(()=>V(f,e(r))),l(v,w)};M(E,v=>{e(r)&&v(I)})}c(m),l(p,m),oe()}var bo=T('<div class="data font-mono svelte-115hohv"> </div>'),$o=T('<div class="data svelte-115hohv"> </div>'),_o=T('<div class="header svelte-115hohv"><!> <!></div>'),ko=T("<div><!></div>"),xo=T("<div><!></div>"),Eo=T("<div><!> <!></div>");function Io(p,a){ne(a,!0);let t=z(a,"group",31,()=>o({})),n=S(void 0);const r=["Config","Delete"];let h=S(o(r[0]));const m=200,u=m/2;function E(){s(n,!1),a.onSave()}vt(p,{get show(){return e(n)},set show(I){s(n,o(I))},header:I=>{var v=_o(),w=d(v);Ze(w,{text:"Group ID",children:(A,k)=>{var g=bo(),y=d(g,!0);c(g),U(()=>V(y,t().id)),l(A,g)},$$slots:{default:!0}});var f=i(w,2);Ze(f,{text:"Group Name",children:(A,k)=>{var g=$o(),y=d(g,!0);c(g),U(()=>V(y,t().name)),l(A,g)},$$slots:{default:!0}}),c(v),l(I,v)},body:I=>{var v=Eo(),w=d(v);Dt(w,{labels:r,get selected(){return e(h)},set selected(g){s(h,o(g))}});var f=i(w,2);{var A=g=>{var y=ko(),$=d(y);fo($,{get onSave(){return a.onSave},get group(){return t()},set group(_){t(_)}}),c(y),ue(5,y,()=>we,()=>({delay:u,duration:m})),ue(6,y,()=>we,()=>({duration:m})),l(g,y)},k=g=>{var y=me(),$=ee(y);{var _=x=>{var b=xo(),C=d(b);yo(C,{get group(){return t()},onSave:E}),c(b),ue(5,b,()=>we,()=>({delay:u,duration:m})),ue(6,b,()=>we,()=>({duration:m})),l(x,b)};M($,x=>{e(h)==="Delete"&&x(_)},!0)}l(g,y)};M(f,g=>{e(h)==="Config"?g(A):g(k,!1)})}c(v),l(I,v)},$$slots:{header:!0,body:!0}}),oe()}var So=T('<div class="svelte-10dkaqk"><!></div>'),To=T(' <div class="content"><!> <!> <div id="groups" class="svelte-10dkaqk"></div> <!> <div style="height: 20px"></div></div>',1);function Co(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=[{label:"Name",callback:($,_)=>$.name.toLowerCase().includes(_.toLowerCase())},{label:"ID",callback:($,_)=>$.id.toLowerCase().includes(_.toLowerCase())}],u=[{label:"Name",callback:($,_)=>$.name.localeCompare(_.name)},{label:"ID",callback:($,_)=>$.id.localeCompare(_.id)}];Le(async()=>{E()});async function E(){let $=await as(),_=await $.json();$.ok?s(n,o([..._])):s(t,o(_.message))}function I(){E()}F();var v=To(),w=ee(v),f=i(w),A=d(f);Lt(A,{get items(){return e(n)},searchOptions:m,orderOptions:u,get resItems(){return e(r)},set resItems($){s(r,o($))}});var k=i(A,2);uo(k,{onSave:I});var g=i(k,2);Ge(g,23,()=>e(h),$=>$.id,($,_,x)=>{let b=x;var C=So(),L=d(C);Io(L,{onSave:I,get group(){return e(h)[e(b)]},set group(N){e(h)[e(b)]=N}}),c(C),l($,C)}),c(g);var y=i(g,2);Nt(y,{get items(){return e(r)},set items($){s(r,o($))},get resItems(){return e(h)},set resItems($){s(h,o($))}}),F(2),c(f),U(()=>V(w,`${e(t)??""} `)),l(p,v),oe()}var Ao=T('<div class="header font-label svelte-r30xs6">ADD NEW SCOPE</div>'),Lo=T('<div class="success svelte-r30xs6">Success</div>'),jo=T('<div class="err svelte-r30xs6"> </div>'),Ro=T('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function Do(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1),n=S(void 0),r=S(o({scope:""})),h=S(""),m=S(!1),u=S(void 0),E=S(o({}));const I=Qe().shape({scope:he().trim().matches(Gt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(m)&&s(u,o(setTimeout(()=>{a.onSave(),s(m,!1),s(r,o({scope:""})),s(n,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function v(){if(s(h,""),!await w()){s(h,"Invalid input");return}e(r).scope=e(r).scope.trim();let f=await Sl(e(r));if(f.ok)s(m,!0);else{let A=await f.json();s(h,o(A.message))}}async function w(){try{return await I.validate(e(r),{abortEarly:!1}),s(E,o({})),!0}catch(f){return s(E,o(Je(f))),!1}}vt(p,{get idx(){return t()},set idx(f){t(f)},get show(){return e(n)},set show(f){s(n,o(f))},header:f=>{var A=Ao();l(f,A)},body:f=>{var A=Ro(),k=d(A);ve(k,{autocomplete:"off",placeholder:"Scope Name",get value(){return e(r).scope},set value(b){e(r).scope=b},get error(){return e(E).scope},set error(b){e(E).scope=b},$$events:{input:w},children:(b,C)=>{F();var L=Y("SCOPE NAME");l(b,L)},$$slots:{default:!0}});var g=i(k,2);Se(g,{level:1,width:"4rem",$$events:{click:v},children:(b,C)=>{F();var L=Y("SAVE");l(b,L)},$$slots:{default:!0}});var y=i(g,2);{var $=b=>{var C=Lo();l(b,C)};M(y,b=>{e(m)&&b($)})}var _=i(y,2);{var x=b=>{var C=jo(),L=d(C,!0);c(C),U(()=>V(L,e(h))),l(b,C)};M(_,b=>{e(h)&&b(x)})}c(A),l(f,A)},$$slots:{header:!0,body:!0}}),oe()}var No=T('<div class="desc svelte-guvobw"><p>Custom mappings cannot be done for OpenID default scopes and their names cannot be changed.</p></div>'),Mo=T('<div class="desc svelte-guvobw"><p>You can map custom scopes to attributes.<br> All additional attributes, that were configured, can have a custom value for each user.<br> When they are mapped to a scope, they can be included in the Access and / or ID Tokens.</p></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ACCESS TOKEN MAPPINGS</div> <!></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ID TOKEN MAPPINGS</div> <!></div>',1),zo=T('<div class="success svelte-guvobw">Success</div>'),Po=T('<div class="mainErr err svelte-guvobw"> </div>'),Oo=T("<!> <!> <!>",1),qo=T('<div class="container svelte-guvobw"><div class="unit svelte-guvobw"><div class="label font-label svelte-guvobw">ID</div> <div class="value font-mono svelte-guvobw"> </div></div> <!> <div class="separator"></div> <!> <!></div>');function Uo(p,a){ne(a,!0);let t=z(a,"attrs",27,()=>o([])),n=z(a,"scope",31,()=>o({})),r=S(""),h=S(!1),m=S(void 0),u=S(!1),E=S(o([]));Te(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1),a.onSave()},2e3)))}),Te(()=>{t()&&s(E,o(t().map(N=>N.name)))}),Le(()=>(s(u,o(Fa(n().name))),()=>clearTimeout(e(m))));let I=S(o({}));const v=Qe().shape({name:he().trim().matches(Gt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function w(){if(s(r,""),!await f()){s(r,"Invalid input");return}let N={scope:n().name.trim()};n().attr_include_access.length>0&&(N.attr_include_access=n().attr_include_access),n().attr_include_id.length>0&&(N.attr_include_id=n().attr_include_id);let R=await Tl(n().id,N);if(R.ok)s(h,!0);else{let j=await R.json();s(r,o(j.message))}}async function f(){try{return await v.validate(n(),{abortEarly:!1}),s(I,o({})),!0}catch(N){return s(I,o(Je(N))),!1}}var A=qo(),k=d(A),g=i(d(k),2),y=d(g,!0);c(g),c(k);var $=i(k,2);ve($,{autocomplete:"off",placeholder:"Scope Name",get disabled(){return e(u)},get value(){return n().name},set value(N){n(n().name=N,!0)},get error(){return e(I).name},set error(N){e(I).name=N},$$events:{input:f},children:(N,R)=>{F();var j=Y("SCOPE NAME");l(N,j)},$$slots:{default:!0}});var _=i($,4);{var x=N=>{var R=No();l(N,R)},b=N=>{var R=Mo(),j=i(ee(R),2);le(j,"margin-top","-3px");var W=i(d(j),2);Pt(W,{get options(){return e(E)},searchThreshold:4,get items(){return n().attr_include_access},set items(P){n(n().attr_include_access=P,!0)}}),c(j);var D=i(j,2);le(D,"margin-top","-3px");var H=i(d(D),2);Pt(H,{get options(){return e(E)},searchThreshold:4,get items(){return n().attr_include_id},set items(P){n(n().attr_include_id=P,!0)}}),c(D),l(N,R)};M(_,N=>{e(u)?N(x):N(b,!1)})}var C=i(_,2);{var L=N=>{var R=Oo(),j=ee(R);Se(j,{level:1,width:"4rem",$$events:{click:w},children:(O,G)=>{F();var X=Y("SAVE");l(O,X)},$$slots:{default:!0}});var W=i(j,2);{var D=O=>{var G=zo();l(O,G)};M(W,O=>{e(h)&&O(D)})}var H=i(W,2);{var P=O=>{var G=Po(),X=d(G,!0);c(G),U(()=>V(X,e(r))),l(O,G)};M(H,O=>{e(r)&&O(P)})}l(N,R)};M(C,N=>{e(u)||N(L)})}c(A),U(()=>V(y,n().id)),l(p,A),oe()}var Go=T('<div class="label svelte-1jljqe9">OpenID default scopes cannot be deleted</div>'),Ko=T('<div class="err svelte-1jljqe9"> </div>'),Wo=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this scope?</div> <!> <!>',1),Fo=T('<div class="container svelte-1jljqe9"><!></div>');function Bo(p,a){ne(a,!0);let t=z(a,"scope",19,()=>({})),n=S(!1),r=S("");async function h(){s(r,""),s(n,!0);let v=await Cl(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Fo(),u=d(m);{var E=v=>{var w=Go();l(v,w)},I=v=>{var w=Wo(),f=i(ee(w),2);Se(f,{level:1,get isLoading(){return e(n)},set isLoading(g){s(n,o(g))},$$events:{click:h},children:(g,y)=>{F();var $=Y("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var y=Ko(),$=d(y,!0);c(y),U(()=>V($,e(r))),l(g,y)};M(A,g=>{e(r)&&g(k)})}l(v,w)};M(u,v=>{Fa(t().name)?v(E):v(I,!1)})}c(m),l(p,m),oe()}var Ho=T('<div class="data font-mono svelte-115hohv"> </div>'),Yo=T('<div class="data svelte-115hohv"> </div>'),Vo=T('<div class="header svelte-115hohv"><!> <!></div>'),Jo=T("<div><!></div>"),Qo=T("<div><!></div>"),Zo=T("<div><!> <!></div>");function Xo(p,a){ne(a,!0);let t=z(a,"attrs",15),n=z(a,"scope",31,()=>o({})),r=z(a,"onSave",15),h=S(void 0);const m=["Config","Delete"];let u=S(o(m[0]));const E=200,I=E/2;function v(){s(h,!1),r()()}vt(p,{get show(){return e(h)},set show(w){s(h,o(w))},header:w=>{var f=Vo(),A=d(f);Ze(A,{text:"Scope ID",children:(g,y)=>{var $=Ho(),_=d($,!0);c($),U(()=>V(_,n().id)),l(g,$)},$$slots:{default:!0}});var k=i(A,2);Ze(k,{text:"Scope Name",children:(g,y)=>{var $=Yo(),_=d($,!0);c($),U(()=>V(_,n().name)),l(g,$)},$$slots:{default:!0}}),c(f),l(w,f)},body:w=>{var f=Zo(),A=d(f);Dt(A,{labels:m,get selected(){return e(u)},set selected($){s(u,o($))}});var k=i(A,2);{var g=$=>{var _=Jo(),x=d(_);Uo(x,{get attrs(){return t()},set attrs(b){t(b)},get scope(){return n()},set scope(b){n(b)},get onSave(){return r()},set onSave(b){r(b)}}),c(_),ue(5,_,()=>we,()=>({delay:I,duration:E})),ue(6,_,()=>we,()=>({duration:E})),l($,_)},y=$=>{var _=me(),x=ee(_);{var b=C=>{var L=Qo(),N=d(L);Bo(N,{get scope(){return n()},onSave:v}),c(L),ue(5,L,()=>we,()=>({delay:I,duration:E})),ue(6,L,()=>we,()=>({duration:E})),l(C,L)};M(x,C=>{e(u)==="Delete"&&C(b)},!0)}l($,_)};M(k,$=>{e(u)==="Config"?$(g):$(y,!1)})}c(f),l(w,f)},$$slots:{header:!0,body:!0}}),oe()}var ev=T('<div class="svelte-15sc49d"><!></div>'),tv=T(' <div class="content"><!> <!> <div id="scopes" class="svelte-15sc49d"></div> <!> <div style="height: 20px"></div></div>',1);function av(p,a){ne(a,!0);let t=S(o([])),n=S(""),r=S(o([])),h=S(o([])),m=S(o([])),u=S(""),E=[{label:"Name",callback:(b,C)=>b.name.toLowerCase().includes(C.toLowerCase())},{label:"ID",callback:(b,C)=>b.id.toLowerCase().includes(C.toLowerCase())}],I=[{label:"Name",callback:(b,C)=>b.name.localeCompare(C.name)},{label:"ID",callback:(b,C)=>b.id.localeCompare(C.id)}];Le(()=>{w(),v(),s(u,"")});async function v(){let b=await ya();if(!b.ok)s(n,"Error fetching attributes: "+b.body.message);else{let C=await b.json();s(t,o([...C.values]))}}async function w(){let b=await ns(),C=await b.json();b.ok?s(r,o([...C])):s(n,o(C.message))}function f(){w()}F();var A=tv(),k=ee(A),g=i(k),y=d(g);Lt(y,{get items(){return e(r)},searchOptions:E,orderOptions:I,get resItems(){return e(h)},set resItems(b){s(h,o(b))},get search(){return e(u)},set search(b){s(u,o(b))}});var $=i(y,2);Do($,{onSave:f});var _=i($,2);Ge(_,23,()=>e(m),b=>b.id,(b,C,L)=>{var N=ev(),R=d(N);Xo(R,{onSave:f,get attrs(){return e(t)},set attrs(j){s(t,o(j))},get scope(){return e(m)[e(L)]},set scope(j){e(m)[e(L)]=j}}),c(N),l(b,N)}),c(_);var x=i(_,2);Nt(x,{get items(){return e(h)},set items(b){s(h,o(b))},get resItems(){return e(m)},set resItems(b){s(m,o(b))}}),F(2),c(g),U(()=>V(k,`${e(n)??""} `)),l(p,A),oe()}var sv=T('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),rv=T('<div class="list svelte-f2hz2l"></div>');function hs(p,a){let t=z(a,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var n=rv();Ge(n,21,t,ut,(r,h,m)=>{var u=sv(),E=d(u),I=d(E,!0);c(E);var v=i(E,2);He(v,{get selected(){return e(h).value},set selected(w){e(h).value=w}}),c(u),U(()=>V(I,e(h).label)),l(r,u)}),c(n),l(p,n)}var lv=T("<div><!></div>");function iv(p,a){ne(a,!0);let t=z(a,"validation",19,()=>({})),n=z(a,"value",15),r=z(a,"autocomplete",11,"on"),h=z(a,"validate",15),m=Ut(a,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);h(w);let u=S("");const E=Xt();async function I(){await Yt(),E("input",!0),w()}async function v(){E("blur",!0),w()}function w(){var k;return s(u,""),n()&&((k=t())!=null&&k.regex)&&!n().match(t().regex)?(s(u,o(t().errMsg||"Invalid input")),!1):!0}var f=lv(),A=d(f);return ve(A,qa({get width(){return a.width},get name(){return a.name},get autocomplete(){return r()}},()=>m,{get value(){return n()},set value(k){n(k)},get error(){return e(u)},set error(k){s(u,o(k))},$$events:{input:I,blur:v},children:(k,g)=>{var y=me(),$=ee(y);bt($,()=>a.children??wt),l(k,y)},$$slots:{default:!0}})),c(f),ue(7,f,()=>mt,()=>({duration:200})),l(p,f),oe({validateValue:w})}var nv=T('<div class="err svelte-nzivgu"> </div>'),ov=T('<div class="container svelte-nzivgu"><!> <!></div>');function Ft(p,a){ne(a,!0);let t=z(a,"validation",27,()=>o({required:!1,regex:void 0,errMsg:""})),n=z(a,"values",15),r=z(a,"validate",15),h=z(a,"width",3,"260px"),m=z(a,"optional",3,!1),u=z(a,"autocomplete",15,"on"),E=Ut(a,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);r(k);let I=S(""),v=S(o([]));const w=Xt();Le(()=>{n()||n([]);for(let x of n())e(v).push({name:zt(),value:x});e(v).push({name:zt(),value:""})});async function f(){await Yt(),e(v)[e(v).length-1].value?e(v).push({name:zt(),value:""}):e(v).length>1&&!e(v)[e(v).length-2].value&&s(v,o([...e(v).slice(0,e(v).length-1)])),w("input",!0),k(),n(A())}function A(){k();let x=[];for(let b=0;b<e(v).length-1;b++)x.push(e(v)[b].value);return x}function k(){if(t().required&&e(v).length===1&&!e(v)[0].value)return m()?!0:(s(I,"Required"),!1);let x=!0;for(let b of e(v))b.value&&!b.validate()&&(x=!1);return x}var g=ov(),y=d(g);Ge(y,17,()=>e(v),ut,(x,b,C)=>{iv(x,qa({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(b).name}},()=>E,{get value(){return e(b).value},set value(L){e(b).value=L},get validate(){return e(b).validate},set validate(L){e(b).validate=L},get autocomplete(){return u()},set autocomplete(L){u(L)},$$events:{input:f,blur:f},children:(L,N)=>{var R=me(),j=ee(R);bt(j,()=>a.children??wt),l(L,R)},$$slots:{default:!0}}))});var $=i(y,2);{var _=x=>{var b=nv(),C=d(b,!0);c(b),U(()=>V(C,e(I))),l(x,b)};M($,x=>{e(I)&&x(_)})}return c(g),U(()=>le(g,"width",h())),l(p,g),oe({getValues:A,validateValues:k})}var vv=T('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),cv=T(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),dv=T('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),uv=T('<div class="success svelte-1pba61y">Success</div>'),hv=T('<div class="mainErr err svelte-1pba61y"> </div>'),pv=T(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function mv(p,a){ne(a,!0);let t=z(a,"client",31,()=>o({}));const n="350px";let r=S(""),h=S(!1),m=S(void 0),u=o(Ws.map(se=>{var Ae,Pe;return se.label==="device_code"?se.value=(Ae=t().flows_enabled)==null?void 0:Ae.includes("urn:ietf:params:oauth:grant-type:device_code"):se.value=(Pe=t().flows_enabled)==null?void 0:Pe.includes(se.label),se})),E=S(void 0);os.subscribe(se=>{s(E,o(se))});let I=o(Fs.map(se=>{var Ae;return se.value=(Ae=t().challenges)==null?void 0:Ae.includes(se.label),se})),v=S(void 0),w=S(void 0),f=S(void 0),A=S(void 0);Le(()=>()=>clearTimeout(e(m)));let k=S(o({}));const g=Qe().shape({name:he().trim().matches(ea,"Can only contain characters, numbers and '-'"),client_uri:he().trim().nullable().matches(tt,"Invalid URI"),access_token_lifetime:$t().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function y(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function $(se){se.code==="Enter"&&_()}async function _(){s(r,"");const se=await x();if(!e(w)()){s(r,"Invalid Allowed Origin");return}if(!e(f)()){s(r,"Invalid Redirect URIs");return}if(!e(A)()){s(r,"Invalid Post Logout URIs");return}if(!e(v)()){s(r,"Invalid Contacts");return}if(!se){s(r,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=u.filter(Q=>Q.value).map(Q=>Q.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":Q.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){s(r,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){s(r,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){s(r,"At least one flow must be enabled");return}let Ae=t();t(t().challenges=I.filter(Q=>Q.value).map(Q=>Q.label),!0),t().challenges.length===0&&(Ae.challenges=null),Ae.name||(Ae.name=void 0),Ae.allowed_origins.length>0&&!Ae.allowed_origins[0]&&(Ae.allowed_origins=[]);let Pe=await jr(Ae);if(Pe.ok)s(h,!0);else{let Q=await Pe.json();s(r,o(Q.message))}}async function x(){try{return await g.validate(t(),{abortEarly:!1}),s(k,o({})),!0}catch(se){return s(k,o(Je(se))),!1}}Te(()=>{t().id&&y()}),Te(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1),a.onSave()},3e3)))});var b=pv(),C=d(b),L=i(d(C),2),N=d(L,!0);c(L),c(C);var R=i(C,4);ve(R,{autocomplete:"off",placeholder:"Client Name",width:n,get value(){return t().name},set value(se){t(t().name=se,!0)},get error(){return e(k).name},set error(se){e(k).name=se},$$events:{keypress:$,input:x},children:(se,Ae)=>{F();var Pe=Y("CLIENT NAME");l(se,Pe)},$$slots:{default:!0}});var j=i(R,4);ve(j,{autocomplete:"off",placeholder:"Client URI",width:n,get value(){return t().client_uri},set value(se){t(t().client_uri=se,!0)},get error(){return e(k).client_uri},set error(se){e(k).client_uri=se},$$events:{keypress:$,input:x},children:(se,Ae)=>{F();var Pe=Y("CLIENT URI");l(se,Pe)},$$slots:{default:!0}});var W=i(j,2);Ft(W,{style:`width: ${n}`,validation:{required:!1,regex:Bs,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(se){t(t().contacts=se,!0)},get validate(){return e(v)},set validate(se){s(v,o(se))},children:(se,Ae)=>{F();var Pe=Y("CONTACT");l(se,Pe)},$$slots:{default:!0}});var D=i(W,4);le(D,"margin-top","-5px");var H=d(D);le(H,"width","138px");var P=i(d(H),2),O=d(P);He(O,{get selected(){return t().enabled},set selected(se){t(t().enabled=se,!0)}}),c(P),c(H);var G=i(H,2);le(G,"width","110px");var X=i(d(G),2),q=d(X);He(q,{get selected(){return t().confidential},set selected(se){t(t().confidential=se,!0)}}),c(X),c(G),c(D);var B=i(D,2),K=i(d(B),2),Z=d(K);hs(Z,{get options(){return u}}),c(K),c(B);var re=i(B,2),ce=i(d(re),2),$e=d(ce);He($e,{get selected(){return t().force_mfa},set selected(se){t(t().force_mfa=se,!0)}}),c(ce),c(re);var _e=i(re,2);{var pe=se=>{var Ae=vv();le(Ae,"margin","-10px 0 -15px 5px");var Pe=d(Ae),Q=d(Pe);le(Q,"color","var(--col-err)"),F(7),c(Pe),c(Ae),l(se,Ae)},Ne=se=>{var Ae=me(),Pe=ee(Ae);{var Q=Ee=>{var je=cv();le(je,"margin","-10px 0 -15px 5px");var At=d(je),ae=d(At);le(ae,"color","var(--col-err)"),F(5),c(At),c(je),ue(3,je,()=>we),l(Ee,je)};M(Pe,Ee=>{t().force_mfa&&Ee(Q)},!0)}l(se,Ae)};M(_e,se=>{t().id==="rauthy"?se(pe):se(Ne,!1)})}var ge=i(_e,6);le(ge,"margin-top","-10px");var de=i(d(ge),2);Pt(de,{get options(){return e(E)},searchThreshold:4,get items(){return t().scopes},set items(se){t(t().scopes=se,!0)}}),c(ge);var ye=i(ge,2);le(ye,"margin-top","-3px");var be=i(d(ye),2);Pt(be,{get options(){return e(E)},searchThreshold:4,get items(){return t().default_scopes},set items(se){t(t().default_scopes=se,!0)}}),c(ye);var ze=i(ye,4);Ft(ze,{style:`width: ${n}`,validation:{required:!0,regex:Hs,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(se){t(t().allowed_origins=se,!0)},get validate(){return e(w)},set validate(se){s(w,o(se))},children:(se,Ae)=>{F();var Pe=Y("ALLOWED ORIGIN");l(se,Pe)},$$slots:{default:!0}});var Ce=i(ze,4);Ft(Ce,{style:`width: ${n}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(se){t(t().redirect_uris=se,!0)},get validate(){return e(f)},set validate(se){s(f,o(se))},children:(se,Ae)=>{F();var Pe=Y("REDIRECT URI");l(se,Pe)},$$slots:{default:!0}});var xe=i(Ce,4);Ft(xe,{style:`width: ${n}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(se){t(t().post_logout_redirect_uris=se,!0)},get validate(){return e(A)},set validate(se){s(A,o(se))},children:(se,Ae)=>{F();var Pe=Y("POST LOGOUT REDIRECT URI");l(se,Pe)},$$slots:{default:!0}});var Re=i(xe,6);ve(Re,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:n,get value(){return t().access_token_lifetime},set value(se){t(t().access_token_lifetime=se,!0)},get error(){return e(k).access_token_lifetime},set error(se){e(k).access_token_lifetime=se},$$events:{input:x},children:(se,Ae)=>{F();var Pe=Y("ACCESS TOKEN LIFETIME");l(se,Pe)},$$slots:{default:!0}});var J=i(Re,2),Ie=d(J);le(Ie,"width","220px");var fe=i(d(Ie),2),qe=d(fe);Et(qe,{options:Ba,get value(){return t().access_token_alg},set value(se){t(t().access_token_alg=se,!0)}}),c(fe),c(Ie);var Ve=i(Ie,2),rt=d(Ve);le(rt,"text-align","right");var ct=i(rt,2),Ue=d(ct);Et(Ue,{options:Ba,get value(){return t().id_token_alg},set value(se){t(t().id_token_alg=se,!0)}}),c(ct),c(Ve),c(J);var Fe=i(J,6),ot=i(d(Fe),2),It=d(ot);hs(It,{get options(){return I}}),c(ot),c(Fe);var kt=i(Fe,2),Xe=d(kt);{var et=se=>{var Ae=dv();F(4),l(se,Ae)};M(Xe,se=>{t().id==="rauthy"&&se(et)})}c(kt);var gt=i(kt,2);Se(gt,{level:1,width:"4rem",$$events:{click:_},children:(se,Ae)=>{F();var Pe=Y("SAVE");l(se,Pe)},$$slots:{default:!0}});var ht=i(gt,2);{var Ct=se=>{var Ae=uv();l(se,Ae)};M(ht,se=>{e(h)&&se(Ct)})}var at=i(ht,2);{var st=se=>{var Ae=hv(),Pe=d(Ae,!0);c(Ae),U(()=>V(Pe,e(r))),l(se,Ae)};M(at,se=>{e(r)&&se(st)})}c(b),U(()=>V(N,t().id)),l(p,b),oe()}var fv=T('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function gv(p,a){ne(a,!0);let t=S(""),n=S("");Le(()=>{r()});async function r(){let A=await Or(a.client.id),k=await A.json();A.ok?s(n,o(k.secret)):s(t,o(k.message))}async function h(){let A=await qr(a.client.id),k=await A.json();A.ok?await r():s(t,o(k.message))}var m=fv(),u=d(m),E=d(u,!0);c(u);var I=i(u,2),v=d(I);{var w=A=>{Wt(A,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(n)},set value(k){s(n,o(k))},children:(k,g)=>{F();var y=Y("CLIENT SECRET");l(k,y)},$$slots:{default:!0}})};M(v,A=>{e(n)&&A(w)})}c(I);var f=i(I,2);Se(f,{level:1,$$events:{click:h},children:(A,k)=>{F();var g=Y("GENERATE NEW");l(A,g)},$$slots:{default:!0}}),c(m),U(()=>V(E,e(t))),l(p,m),oe()}var wv=T('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),yv=T('<div class="err svelte-1jljqe9"> </div>'),bv=T('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),$v=T('<div class="container svelte-1jljqe9"><!></div>');function _v(p,a){ne(a,!0);let t=z(a,"client",19,()=>({})),n=S(!1),r=S("");async function h(){s(r,""),s(n,!0);let v=await Rr(t().id);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=$v(),u=d(m);{var E=v=>{var w=wv();l(v,w)},I=v=>{var w=bv(),f=i(ee(w),2);Se(f,{level:1,get isLoading(){return e(n)},set isLoading(g){s(n,o(g))},$$events:{click:h},children:(g,y)=>{F();var $=Y("DELETE");l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{var y=yv(),$=d(y,!0);c(y),U(()=>V($,e(r))),l(g,y)};M(A,g=>{e(r)&&g(k)})}l(v,w)};M(u,v=>{t().id==="rauthy"?v(E):v(I,!1)})}c(m),l(p,m),oe()}var kv=(p,a)=>s(a,!0),xv=T('<div class="load svelte-icxpvn"><!></div>'),Ev=T('<div class="txt svelte-icxpvn">LOAD</div>'),Iv=T('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function xa(p,a){ne(a,!0);let t=S(!1),n=S(!1),r=S(void 0),h=S(void 0),m=S(void 0),u=S(void 0),E=S(void 0),I=S("white");Na(()=>{clearTimeout(e(E))});function v(){switch(a.level){case 1:s(r,o(a.colors.act1)),s(h,o(a.colors.act1a)),s(m,"white"),s(u,`1px solid ${a.colors.gmid}`);break;case 2:s(r,o(a.colors.act2)),s(h,o(a.colors.act2a)),s(m,o(a.colors.ghigh)),s(u,`1px solid ${a.colors.gmid}`);break;default:s(r,o(a.colors.ghigh)),s(h,"white"),s(m,o(a.colors.act2a)),s(u,`1px solid ${a.colors.act2a}`),s(I,o(a.colors.acnt))}}Te(()=>{e(n)&&s(E,o(setTimeout(()=>{s(n,!1)},2e3)))}),Te(()=>{a.colors&&v()});var w=Iv(),f=d(w);f.__click=[kv,n],le(f,"width","100px");var A=d(f);{var k=y=>{var $=xv(),_=d($);ma(_,{background:!1,get color(){return e(I)}}),c($),l(y,$)},g=y=>{var $=Ev();l(y,$)};M(A,y=>{e(n)?y(k):y(g,!1)})}c(f),c(w),U(()=>{le(f,"border",e(u)),le(f,"box-shadow",`1px 1px 2px ${a.colors.gmid??""}`),le(f,"cursor",e(n)?"default":"pointer"),le(f,"color",e(m)),le(f,"background",e(t)?e(h):e(r))}),Me("focus",f,()=>s(t,!0)),Me("blur",f,()=>s(t,!1)),Me("keypress",f,()=>s(n,!0)),l(p,w),oe()}it(["click"]);var Sv=T('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),Tv=T('<div class="err font-label svelte-115vejc"> </div>'),Cv=T('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function ps(p,a){ne(a,!0);let t=z(a,"colors",19,()=>({})),n=z(a,"error",3,""),r=z(a,"name",3,""),h=z(a,"password",3,!1),m=z(a,"value",3,""),u=z(a,"width",3,"250px"),E=Ut(a,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),I=S(o(h()?"new-password":"text")),v=S(!1),w=S(!1);function f(){e(I)==="password"?s(I,"text"):s(I,"password")}var A=Cv(),k=d(A),g=d(k),y=d(g),$=d(y);bt($,()=>a.children??wt),c(y),c(g),c(k);var _=i(k,2);lt(_);var x=()=>s(v,!0),b=()=>s(v,!1),C=()=>s(w,!0),L=()=>s(w,!1);let N;var R=i(_,2);{var j=H=>{var P=Sv(),O=d(P);O.__click=f;var G=d(O);{var X=B=>{_a(B,{width:22,get color(){return t().err}})},q=B=>{ka(B,{width:22,get color(){return t().ok}})};M(G,B=>{e(I)==="password"?B(X):B(q,!1)})}c(O),c(P),Me("keypress",O,f),l(H,P)};M(R,H=>{h()&&H(j)})}var W=i(R,2);{var D=H=>{var P=Tv(),O=d(P,!0);c(P),U(()=>{le(P,"width",u()),le(P,"color",t().err),V(O,n())}),ue(7,P,()=>we,()=>({duration:250})),l(H,P)};M(W,H=>{n()&&H(D)})}c(A),U(()=>{le(A,"width",`calc(${u()??""} + 12px)`),le(g,"background",t().bg),ie(y,"for",r()),N=sa(_,N,{type:e(I),onmouseenter:x,onmouseleave:b,onfocus:C,onblur:L,autocomplete:"off",name:r(),value:m(),...E},"svelte-115vejc"),le(_,"width",u()),le(_,"background",(e(v)||e(w),t().bg)),le(_,"border",e(w)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),le(_,"color",t().text),le(_,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),l(p,A),oe()}it(["click"]);var Av=T('<img alt="No Logo Available">');function ms(p,a){ne(a,!0);var t=Av();U(()=>ie(t,"src",`/auth/v1/clients/${a.clientId}/logo?${zt(6)}`)),l(p,t),oe()}var Lv=T('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function jv(p,a){ne(a,!0);let t="This is an E-Mail error",n="This is a password error";var r=Lv(),h=i(ee(r),2),m=d(h),u=d(m),E=d(u);{var I=y=>{ms(y,{get clientId(){return a.clientId}})};M(E,y=>{a.isLoading||y(I)})}c(u),c(m);var v=i(m,4);ps(v,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return a.colors},children:(y,$)=>{F();var _=Y("E-MAIL");l(y,_)},$$slots:{default:!0}});var w=i(v,2);ps(w,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return n},get colors(){return a.colors},children:(y,$)=>{F();var _=Y("E-MAIL");l(y,_)},$$slots:{default:!0}});var f=i(w,2),A=d(f);xa(A,{get colors(){return a.colors},level:1});var k=i(A,2);xa(k,{get colors(){return a.colors},level:2});var g=i(k,2);xa(g,{get colors(){return a.colors},level:3}),c(f),c(h),U(()=>{le(h,"color",a.colors.text),le(h,"border",`1px solid ${a.colors.gmid??""}`),le(h,"background",a.colors.bg)}),l(p,r),oe()}var Rv=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function Dv(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Rv();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Nv=(p,a)=>e(a).click(),Mv=(p,a)=>e(a).click(),zv=(p,a)=>a(p),Pv=T('<div class="container svelte-jso5mh"><div role="button" tabindex="0" class="btn svelte-jso5mh"><!></div> <div role="button" tabindex="0" class="text noselect font-label svelte-jso5mh"> </div> <input class="imageInput svelte-jso5mh" type="file" accept=".jpg, .jpeg, .png, .svg"></div>');function fs(p,a){let t=z(a,"text",3,"UPLOAD LOGO"),n=z(a,"image",15),r=S(void 0);async function h(f){n(f.target.files[0])}var m=Pv(),u=d(m);u.__click=[Nv,r];var E=d(u);Dv(E,{width:22}),c(u);var I=i(u,2);I.__click=[Mv,r];var v=d(I,!0);c(I);var w=i(I,2);w.__change=[zv,h],ra(w,f=>s(r,f),()=>e(r)),c(m),U(()=>V(v,t())),Me("keypress",u,()=>e(r).click()),Me("keypress",I,()=>e(r).click()),l(p,m)}it(["click","change"]);var Ov=T('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),qv=T('<div class="preview svelte-11vvvzr"><!></div>'),Uv=T('<div class="success svelte-11vvvzr">Success</div>'),Gv=T('<div class="err svelte-11vvvzr"> </div>'),Kv=T(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function Wv(p,a){ne(a,!0);let t=z(a,"client",19,()=>({})),n=S(void 0),r=S(void 0),h=S(!1),m=S(""),u=S(!1),E=S(void 0),I=S(o({})),v=S(o({}));const w=Qe().shape({act1:he().trim().matches(yt,"only valid CSS color"),act1a:he().trim().matches(yt,"only valid CSS color"),act2:he().trim().matches(yt,"only valid CSS color"),act2a:he().trim().matches(yt,"only valid CSS color"),acnt:he().trim().matches(yt,"only valid CSS color"),acnta:he().trim().matches(yt,"only valid CSS color"),ok:he().trim().matches(yt,"only valid CSS color"),err:he().trim().matches(yt,"only valid CSS color"),glow:he().trim().matches(yt,"only valid CSS color"),gmid:he().trim().matches(yt,"only valid CSS color"),ghigh:he().trim().matches(yt,"only valid CSS color"),text:he().trim().matches(yt,"only valid CSS color"),bg:he().trim().matches(yt,"only valid CSS color")});Le(async()=>{await f()}),Na(()=>{e(E)&&clearTimeout(e(E))});async function f(){let O=await Dr(t().id);if(O.ok){let G=await O.json();s(n,o(G)),s(v,o(G))}else{let G=await O.json();s(m,o(G.message))}}async function A(){if(s(m,""),s(h,!0),!await y())return;let O=await Nr(t().id,e(v));if(O.ok)s(u,!0);else{let G=await O.json();s(m,o(G.message))}s(h,!1)}async function k(){s(m,""),s(h,!0);let O=await Mr(t().id);if(O.ok)await Pr(t().id),await f(),s(u,!0);else{let G=await O.json();s(m,o(G.message))}s(h,!1)}async function g(O){s(h,!0),await Yt();let G=await zr(t().id,O);if(!G.ok){let X=await G.json();console.error(X.message)}s(h,!1)}async function y(){try{await w.validate(e(v),{abortEarly:!1}),s(I,o({}))}catch(O){return s(I,o(Je(O))),!1}return s(n,o(e(v))),!0}Te(()=>{e(u)&&s(E,o(setTimeout(()=>{s(u,!1)},3e3)))}),Te(()=>{e(r)&&g(e(r))});var $=Kv(),_=i(d($),2),x=d(_);{var b=O=>{var G=Ov(),X=ee(G),q=d(X),B=d(q);ve(B,{autocomplete:"off",placeholder:"act1",get value(){return e(v).act1},set value(te){e(v).act1=te},get error(){return e(I).act1},set error(te){e(I).act1=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("act1");l(te,Be)},$$slots:{default:!0}});var K=i(B,2),Z=d(K);lt(Z);var re=i(Z,2);c(K),c(q);var ce=i(q,2),$e=d(ce);ve($e,{autocomplete:"off",placeholder:"act1a",get value(){return e(v).act1a},set value(te){e(v).act1a=te},get error(){return e(I).act1a},set error(te){e(I).act1a=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("act1a");l(te,Be)},$$slots:{default:!0}});var _e=i($e,2),pe=d(_e);lt(pe);var Ne=i(pe,2);c(_e),c(ce);var ge=i(ce,2),de=d(ge);ve(de,{autocomplete:"off",placeholder:"act2",get value(){return e(v).act2},set value(te){e(v).act2=te},get error(){return e(I).act2},set error(te){e(I).act2=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("act2");l(te,Be)},$$slots:{default:!0}});var ye=i(de,2),be=d(ye);lt(be);var ze=i(be,2);c(ye),c(ge);var Ce=i(ge,2),xe=d(Ce);ve(xe,{autocomplete:"off",placeholder:"act2a",get value(){return e(v).act2a},set value(te){e(v).act2a=te},get error(){return e(I).act2a},set error(te){e(I).act2a=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("act2a");l(te,Be)},$$slots:{default:!0}});var Re=i(xe,2),J=d(Re);lt(J);var Ie=i(J,2);c(Re),c(Ce);var fe=i(Ce,2),qe=d(fe);ve(qe,{autocomplete:"off",placeholder:"acnt",get value(){return e(v).acnt},set value(te){e(v).acnt=te},get error(){return e(I).acnt},set error(te){e(I).acnt=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("acnt");l(te,Be)},$$slots:{default:!0}});var Ve=i(qe,2),rt=d(Ve);lt(rt);var ct=i(rt,2);c(Ve),c(fe);var Ue=i(fe,2),Fe=d(Ue);ve(Fe,{autocomplete:"off",placeholder:"acnta",get value(){return e(v).acnta},set value(te){e(v).acnta=te},get error(){return e(I).acnta},set error(te){e(I).acnta=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("acnta");l(te,Be)},$$slots:{default:!0}});var ot=i(Fe,2),It=d(ot);lt(It);var kt=i(It,2);c(ot),c(Ue);var Xe=i(Ue,2),et=d(Xe);ve(et,{autocomplete:"off",placeholder:"ok",get value(){return e(v).ok},set value(te){e(v).ok=te},get error(){return e(I).ok},set error(te){e(I).ok=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("ok");l(te,Be)},$$slots:{default:!0}});var gt=i(et,2),ht=d(gt);lt(ht);var Ct=i(ht,2);c(gt),c(Xe);var at=i(Xe,2),st=d(at);ve(st,{autocomplete:"off",placeholder:"err",get value(){return e(v).err},set value(te){e(v).err=te},get error(){return e(I).err},set error(te){e(I).err=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("err");l(te,Be)},$$slots:{default:!0}});var se=i(st,2),Ae=d(se);lt(Ae);var Pe=i(Ae,2);c(se),c(at),c(X);var Q=i(X,2),Ee=d(Q),je=d(Ee);ve(je,{autocomplete:"off",placeholder:"glow",get value(){return e(v).glow},set value(te){e(v).glow=te},get error(){return e(I).glow},set error(te){e(I).glow=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("glow");l(te,Be)},$$slots:{default:!0}});var At=i(je,2),ae=d(At);lt(ae);var Ke=i(ae,2);c(At),c(Ee);var Oe=i(Ee,2),qt=d(Oe);ve(qt,{autocomplete:"off",placeholder:"gmid",get value(){return e(v).gmid},set value(te){e(v).gmid=te},get error(){return e(I).gmid},set error(te){e(I).gmid=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("gmid");l(te,Be)},$$slots:{default:!0}});var Zt=i(qt,2),Bt=d(Zt);lt(Bt);var Mt=i(Bt,2);c(Zt),c(Oe);var Ht=i(Oe,2),Ia=d(Ht);ve(Ia,{autocomplete:"off",placeholder:"ghigh",get value(){return e(v).ghigh},set value(te){e(v).ghigh=te},get error(){return e(I).ghigh},set error(te){e(I).ghigh=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("ghigh");l(te,Be)},$$slots:{default:!0}});var Sa=i(Ia,2),ia=d(Sa);lt(ia);var ks=i(ia,2);c(Sa),c(Ht);var na=i(Ht,2),Ta=d(na);ve(Ta,{autocomplete:"off",placeholder:"text",get value(){return e(v).text},set value(te){e(v).text=te},get error(){return e(I).text},set error(te){e(I).text=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("text");l(te,Be)},$$slots:{default:!0}});var Ca=i(Ta,2),oa=d(Ca);lt(oa);var xs=i(oa,2);c(Ca),c(na);var va=i(na,2),Aa=d(va);ve(Aa,{autocomplete:"off",placeholder:"bg",get value(){return e(v).bg},set value(te){e(v).bg=te},get error(){return e(I).bg},set error(te){e(I).bg=te},$$events:{input:y},children:(te,xt)=>{F();var Be=Y("bg");l(te,Be)},$$slots:{default:!0}});var La=i(Aa,2),ca=d(La);lt(ca);var Es=i(ca,2);c(La),c(va);var ja=i(va,2),Ra=d(ja);fs(Ra,{get image(){return e(r)},set image(te){s(r,o(te))}});var Is=i(Ra,2);{var Ss=te=>{ms(te,{get clientId(){return t().id}})};M(Is,te=>{e(h)||te(Ss)})}c(ja),c(Q),U(()=>{le(re,"background",e(v).act1),le(Ne,"background",e(v).act1a),le(ze,"background",e(v).act2),le(Ie,"background",e(v).act2a),le(ct,"background",e(v).acnt),le(kt,"background",e(v).acnta),le(Ct,"background",e(v).ok),le(Pe,"background",e(v).err),le(Ke,"background",e(v).glow),le(Mt,"background",e(v).gmid),le(ks,"background",e(v).ghigh),le(xs,"background",e(v).text),le(Es,"background",e(v).bg)}),dt(Z,()=>e(v).act1,te=>e(v).act1=te),dt(pe,()=>e(v).act1a,te=>e(v).act1a=te),dt(be,()=>e(v).act2,te=>e(v).act2=te),dt(J,()=>e(v).act2a,te=>e(v).act2a=te),dt(rt,()=>e(v).acnt,te=>e(v).acnt=te),dt(It,()=>e(v).acnta,te=>e(v).acnta=te),dt(ht,()=>e(v).ok,te=>e(v).ok=te),dt(Ae,()=>e(v).err,te=>e(v).err=te),dt(ae,()=>e(v).glow,te=>e(v).glow=te),dt(Bt,()=>e(v).gmid,te=>e(v).gmid=te),dt(ia,()=>e(v).ghigh,te=>e(v).ghigh=te),dt(oa,()=>e(v).text,te=>e(v).text=te),dt(ca,()=>e(v).bg,te=>e(v).bg=te),l(O,G)};M(x,O=>{e(v)&&O(b)})}var C=i(x,2);{var L=O=>{var G=qv(),X=d(G);jv(X,{get clientId(){return t().id},get isLoading(){return e(h)},get colors(){return e(n)},set colors(q){s(n,o(q))}}),c(G),l(O,G)};M(C,O=>{e(n)&&O(L)})}c(_);var N=i(_,2),R=d(N);Se(R,{level:1,get isLoading(){return e(h)},set isLoading(O){s(h,o(O))},$$events:{click:A},children:(O,G)=>{F();var X=Y("SAVE");l(O,X)},$$slots:{default:!0}});var j=i(R,2);Se(j,{level:3,get isLoading(){return e(h)},set isLoading(O){s(h,o(O))},$$events:{click:k},children:(O,G)=>{F();var X=Y("RESET");l(O,X)},$$slots:{default:!0}});var W=i(j,2);{var D=O=>{var G=Uv();l(O,G)};M(W,O=>{e(u)&&O(D)})}var H=i(W,2);{var P=O=>{var G=Gv(),X=d(G,!0);c(G),U(()=>V(X,e(m))),l(O,G)};M(H,O=>{e(m)&&O(P)})}c(N),c($),l(p,$),oe()}var Fv=T('<div class="data font-mono svelte-115hohv"> </div>'),Bv=T('<div class="data svelte-115hohv"> </div>'),Hv=T('<div class="header svelte-115hohv"><!> <!></div>'),Yv=T("<div><!></div>"),Vv=T("<div><!></div>"),Jv=T("<div><!></div>"),Qv=T("<div><!></div>"),Zv=T("<div><!> <!></div>");function Xv(p,a){ne(a,!0);let t=z(a,"client",31,()=>o({})),n=z(a,"onSave",15),r=S(void 0);const h=["Config","Secret","Branding","Delete"];let m=S(o(h[0]));const u=200,E=u/2;function I(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Hv(),f=d(w);Ze(f,{text:"Client ID",children:(g,y)=>{var $=Fv(),_=d($,!0);c($),U(()=>V(_,t().id)),l(g,$)},$$slots:{default:!0}});var A=i(f,2);{var k=g=>{Ze(g,{text:"Client Name",children:(y,$)=>{var _=Bv(),x=d(_,!0);c(_),U(()=>V(x,t().name)),l(y,_)},$$slots:{default:!0}})};M(A,g=>{t().name&&g(k)})}c(w),l(v,w)},body:v=>{var w=Zv(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Yv(),_=d($);mv(_,{get client(){return t()},set client(x){t(x)},get onSave(){return n()},set onSave(x){n(x)}}),c($),ue(5,$,()=>we,()=>({delay:E,duration:u})),ue(6,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=me(),_=ee($);{var x=C=>{var L=Vv(),N=d(L);gv(N,{get client(){return t()}}),c(L),ue(5,L,()=>we,()=>({delay:E,duration:u})),ue(6,L,()=>we,()=>({duration:u})),l(C,L)},b=C=>{var L=me(),N=ee(L);{var R=W=>{var D=Jv(),H=d(D);Wv(H,{get client(){return t()}}),c(D),ue(5,D,()=>we,()=>({delay:E,duration:u})),ue(6,D,()=>we,()=>({duration:u})),l(W,D)},j=W=>{var D=me(),H=ee(D);{var P=O=>{var G=Qv(),X=d(G);_v(X,{get client(){return t()},onSave:I}),c(G),ue(5,G,()=>we,()=>({delay:E,duration:u})),ue(6,G,()=>we,()=>({duration:u})),l(O,G)};M(H,O=>{e(m)==="Delete"&&O(P)},!0)}l(W,D)};M(N,W=>{e(m)==="Branding"?W(R):W(j,!1)},!0)}l(C,L)};M(_,C=>{e(m)==="Secret"?C(x):C(b,!1)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),oe()}var ec=T('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),tc=T('<div class="success svelte-gbj18i">Success</div>'),ac=T('<div class="mainErr err svelte-gbj18i"> </div>'),sc=T('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function rc(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1),n=S(void 0),r=o({id:"",name:"",confidential:!0,redirect_uris:[]}),h=S(""),m=S(!1),u=S(void 0),E=S(o({}));const I=Qe().shape({id:he().required("Client ID is required").trim().matches(Ys,"Can only contain characters, numbers and '-'"),name:he().trim().nullable().matches(ea,"Can only contain characters, numbers and '-'")});let v=S(void 0),w=S(void 0);const f="330px";Te(()=>{e(m)&&s(u,o(setTimeout(()=>{a.onSave(),s(m,!1),s(n,!1)},1500)))}),Le(()=>()=>clearTimeout(e(u)));async function A(){if(s(h,""),!await k()||!e(v)()||!e(w)()){s(h,"Invalid input");return}let g=r;g.name||(g.name=void 0);let y=await Lr(g);if(y.ok)s(m,!0);else{let $=await y.json();s(h,o($.message))}}async function k(){try{return await I.validate(r,{abortEarly:!1}),s(E,o({})),!0}catch(g){return s(E,o(Je(g))),!1}}vt(p,{get idx(){return t()},set idx(g){t(g)},get show(){return e(n)},set show(g){s(n,o(g))},header:g=>{var y=ec();l(g,y)},body:g=>{var y=sc(),$=d(y);ve($,{autocomplete:"off",placeholder:"Client ID",width:f,get value(){return r.id},set value(P){r.id=P},get error(){return e(E).id},set error(P){e(E).id=P},$$events:{input:k},children:(P,O)=>{F();var G=Y("CLIENT ID");l(P,G)},$$slots:{default:!0}});var _=i($,2);ve(_,{autocomplete:"off",placeholder:"Client Name",width:f,get value(){return r.name},set value(P){r.name=P},get error(){return e(E).name},set error(P){e(E).name=P},$$events:{input:k},children:(P,O)=>{F();var G=Y("NAME");l(P,G)},$$slots:{default:!0}});var x=i(_,2);Ft(x,{style:`width: ${f}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return r.redirect_uris},set values(P){r.redirect_uris=P},get validate(){return e(v)},set validate(P){s(v,o(P))},children:(P,O)=>{F();var G=Y("REDIRECT URI");l(P,G)},$$slots:{default:!0}});var b=i(x,2);Ft(b,{style:`width: ${f}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return r.post_logout_redirect_uris},set values(P){r.post_logout_redirect_uris=P},get validate(){return e(w)},set validate(P){s(w,o(P))},children:(P,O)=>{F();var G=Y("POST LOGOUT REDIRECT URI");l(P,G)},$$slots:{default:!0}});var C=i(b,2),L=i(d(C),2),N=d(L);He(N,{get selected(){return r.confidential},set selected(P){r.confidential=P}}),c(L),c(C);var R=i(C,2);Se(R,{level:1,width:"4rem",$$events:{click:A},children:(P,O)=>{F();var G=Y("SAVE");l(P,G)},$$slots:{default:!0}});var j=i(R,2);{var W=P=>{var O=tc();l(P,O)};M(j,P=>{e(m)&&P(W)})}var D=i(j,2);{var H=P=>{var O=ac(),G=d(O,!0);c(O),U(()=>V(G,e(h))),l(P,O)};M(D,P=>{e(h)&&P(H)})}c(y),l(g,y)},$$slots:{header:!0,body:!0}}),oe()}var lc=T('<div class="svelte-nj6lei"><!></div>'),ic=T(' <div class="content"><!> <!> <div id="clients" class="svelte-nj6lei"></div> <!> <div style="height: 20px"></div></div>',1);function nc(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=S(""),u=[{label:"ID",callback:(x,b)=>x.id.toLowerCase().includes(b.toLowerCase())}],E=[{label:"ID",callback:(x,b)=>x.id.localeCompare(b.id)}];Le(()=>{I(),v()});async function I(){let x=await Ar();if(!x.ok)s(t,"Error fetching clients: "+x.body.message);else{let b=await x.json();s(n,o([...b]))}}async function v(){let x=await ns();if(!x.ok)s(t,"Error fetching scopes: "+x.body.message);else{let b=await x.json();Ml.set(b),os.set(b.map(C=>C.name))}}function w(){I(),v(),s(m,"")}F();var f=ic(),A=ee(f),k=i(A),g=d(k);Lt(g,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(x){s(r,o(x))},get search(){return e(m)},set search(x){s(m,o(x))}});var y=i(g,2);rc(y,{onSave:w});var $=i(y,2);Ge($,23,()=>e(h),x=>x.id,(x,b,C)=>{var L=lc(),N=d(L);Xv(N,{onSave:w,get client(){return e(h)[e(C)]},set client(R){e(h)[e(C)]=R}}),c(L),l(x,L)}),c($);var _=i($,2);Nt(_,{get items(){return e(r)},set items(x){s(r,o(x))},get resItems(){return e(h)},set resItems(x){s(h,o(x))}}),F(2),c(k),U(()=>V(A,`${e(t)??""} `)),l(p,f),oe()}var oc=T('<div class="uid svelte-psgb3d"> </div>'),vc=T('<div class="ip svelte-psgb3d"> </div>'),cc=T('<div class="date svelte-psgb3d"> </div>'),dc=T('<div class="header svelte-psgb3d"><!> <div class="header svelte-psgb3d"><!> <!></div></div>'),uc=T('<div class="details svelte-psgb3d"><div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Session ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">User ID:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Expires:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">Last Seen:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">State:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">IP:</div> </div> <div class="flex svelte-psgb3d"><div class="label svelte-psgb3d">MFA:</div> <!></div></div>'),hc=T('<div class="container svelte-psgb3d"><!></div>');function gs(p,a){ne(a,!0);let t=z(a,"session",27,()=>o({})),n=z(a,"now",11,0);var r=hc(),h=d(r);vt(h,{header:m=>{var u=dc(),E=d(u);Ze(E,{text:"User ID",children:(f,A)=>{var k=oc(),g=d(k,!0);c(k),U(()=>V(g,t().user_id)),l(f,k)},$$slots:{default:!0}});var I=i(E,2),v=d(I);Ze(v,{text:"Peer IP",children:(f,A)=>{var k=vc(),g=d(k,!0);c(k),U(()=>V(g,t().remote_ip)),l(f,k)},$$slots:{default:!0}});var w=i(v,2);Ze(w,{text:"Last Seen",children:(f,A)=>{var k=cc(),g=d(k,!0);U(()=>V(g,pt(t().last_seen))),c(k),l(f,k)},$$slots:{default:!0}}),c(I),c(u),l(m,u)},body:m=>{var u=uc(),E=d(u),I=i(d(E));c(E);var v=i(E,2),w=i(d(v));c(v);var f=i(v,2),A=i(d(f));U(()=>V(A,` ${pt(t().exp)??""}`)),c(f);var k=i(f,2),g=i(d(k));U(()=>V(g,` ${pt(t().last_seen)??""}`)),c(k);var y=i(k,2),$=i(d(y));c(y);var _=i(y,2),x=i(d(_));c(_);var b=i(_,2),C=i(d(b),2);aa(C,{get check(){return t().is_mfa}}),c(b),c(u),U(()=>{V(I,` ${t().id??""}`),V(w,` ${t().user_id??""}`),V($,` ${t().state??""}`),V(x,` ${t().remote_ip??""}`)}),l(m,u)},$$slots:{header:!0,body:!0}}),c(r),U(()=>St(r,"expired",t().exp<n())),l(p,r),oe()}var pc=T('<div class="svelte-1rjd8yh"><!></div>'),mc=T('<div class="svelte-1rjd8yh"><!></div>'),fc=T('<div class="content"><div class="row svelte-1rjd8yh"><!> <div class="button svelte-1rjd8yh"><!></div></div> <div id="sessions" class="svelte-1rjd8yh"><!></div> <!></div>');function gc(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=S(Date.now()/1e3),u=S(""),E=S(!1),I=S(15),v=S(""),w=S(1),f=[{label:"User ID",callback:(G,X)=>{var q;return(q=G.user_id)==null?void 0:q.toLowerCase().includes(X.toLowerCase())}},{label:"Session ID",callback:(G,X)=>G.id.toLowerCase().includes(X.toLowerCase())},{label:"IP",callback:(G,X)=>{var q;return(q=G.remote_ip)==null?void 0:q.toLowerCase().includes(X.toLowerCase())}}],A=[{label:"Expires",callback:(G,X)=>G.exp-X.exp},{label:"Last Seen",callback:(G,X)=>G.last_seen-X.last_seen},{label:"Session ID",callback:(G,X)=>G.id.localeCompare(X.id)},{label:"User ID",callback:(G,X)=>{var q;return(q=G.user_id)==null?void 0:q.localeCompare(X.user_id)}},{label:"State",callback:(G,X)=>G.state.localeCompare(X.state)},{label:"IP",callback:(G,X)=>{var q;return(q=G.remote_ip)==null?void 0:q.localeCompare(X.remote_ip)}}];Le(()=>{k()});async function k(G,X,q,B){let K;if(G===!0?q&&e(w)===2?K=await ss(B||e(I),X,void 0,!1):K=await ss(B||e(I),X,e(v),q):K=await ll(),!K.ok)s(t,"Error fetching sessions: "+K.body.message);else{K.status===206?(s(I,o(Number.parseInt(K.headers.get("x-page-size"),10))),s(v,o(K.headers.get("x-continuation-token"))),s(u,"session")):s(u,"");let Z=await K.json();s(n,o([...Z])),s(r,o([...Z])),s(m,Date.now()/1e3)}}async function g(G,X){await k(!0,G,X),X?s(w,e(w)-1):s(w,e(w)+1)}async function y(G){s(v,""),await k(!0,0,!1,G),s(w,1)}async function $(){let G=await il();if(G.ok)Ha();else{let X=await G.json();s(t,o(X.message))}s(m,o(new Date))}var _=fc(),x=d(_),b=d(x);Lt(b,{get items(){return e(n)},searchOptions:f,orderOptions:A,firstDirReverse:!0,get resItems(){return e(r)},set resItems(G){s(r,o(G))},get useServerSideIdx(){return e(u)},set useServerSideIdx(G){s(u,o(G))},get isSearchFiltered(){return e(E)},set isSearchFiltered(G){s(E,o(G))}});var C=i(b,2);le(C,"margin-top","-10px");var L=d(C);Se(L,{level:3,$$events:{click:$},children:(G,X)=>{F();var q=Y("Invalidate All Sessions");l(G,q)},$$slots:{default:!0}}),c(C),c(x);var N=i(x),R=i(N),j=d(R);{var W=G=>{var X=me(),q=ee(X);Ge(q,19,()=>e(n),B=>B.id,(B,K,Z)=>{var re=pc(),ce=d(re);gs(ce,{get session(){return e(n)[e(Z)]},set session($e){e(n)[e(Z)]=$e},get now(){return e(m)},set now($e){s(m,o($e))}}),c(re),l(B,re)}),l(G,X)},D=G=>{var X=me(),q=ee(X);Ge(q,19,()=>e(h),B=>B.id,(B,K,Z)=>{var re=mc(),ce=d(re);gs(ce,{get session(){return e(h)[e(Z)]},set session($e){e(h)[e(Z)]=$e},get now(){return e(m)},set now($e){s(m,o($e))}}),c(re),l(B,re)}),l(G,X)};M(j,G=>{e(u)&&!e(E)?G(W):G(D,!1)})}c(R);var H=i(R,2);{var P=G=>{us(G,{fetchPageCallback:g,sspPageSizeChange:y,get sspPage(){return e(w)},set sspPage(X){s(w,o(X))},get sspPageSize(){return e(I)},set sspPageSize(X){s(I,o(X))},get sspContinuationToken(){return e(v)},set sspContinuationToken(X){s(v,o(X))}})},O=G=>{Nt(G,{get items(){return e(r)},set items(X){s(r,o(X))},get resItems(){return e(h)},set resItems(X){s(h,o(X))}})};M(H,G=>{e(u)&&!e(E)?G(P):G(O,!1)})}c(_),U(()=>V(N,` ${e(t)??""} `)),l(p,_),oe()}var wc=T('<div class="header font-label svelte-1mi5990">ADD NEW USER ATTRIBUTE</div>'),yc=T('<div class="mainErr err svelte-1mi5990"> </div>'),bc=T('<div class="container svelte-1mi5990"><div class="desc svelte-1mi5990">You can add a new custom user attribute.<br> These attributes can be set for every user and mapped to an existing scope.<br> They are simple Key / JsonValue pairs.</div> <!> <!> <!> <!> <!></div>');function $c(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1),n=S(""),r=S(void 0),h=o({name:"",desc:""}),m=S(o({}));const u=Qe().shape({name:he().trim().required("Name is required").matches(Ya,"Invalid characters: [a-z0-9-_/]{2,32}"),desc:he().trim().matches(Va,"Invalid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});async function E(){if(!await I())return;s(n,"");let v=await dl(h);if(v.ok)s(r,!1),a.onSave();else{let w=await v.json();s(n,o(w.message))}}async function I(){try{return await u.validate(h,{abortEarly:!1}),s(m,o({})),!0}catch(v){return s(m,o(Je(v))),!1}}vt(p,{get idx(){return t()},set idx(v){t(v)},get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=wc();l(v,w)},body:v=>{var w=bc(),f=i(d(w),2);ve(f,{autocomplete:"off",placeholder:"Name",get value(){return h.name},set value(_){h.name=_},get error(){return e(m).name},set error(_){e(m).name=_},$$events:{input:I},children:(_,x)=>{F();var b=Y("NAME");l(_,b)},$$slots:{default:!0}});var A=i(f,2);ve(A,{autocomplete:"off",placeholder:"Description",get value(){return h.desc},set value(_){h.desc=_},get error(){return e(m).desc},set error(_){e(m).desc=_},$$events:{input:I},children:(_,x)=>{F();var b=Y("DESCRIPTION");l(_,b)},$$slots:{default:!0}});var k=i(A,2);Se(k,{level:1,$$events:{click:E},children:(_,x)=>{F();var b=Y("SAVE");l(_,b)},$$slots:{default:!0}});var g=i(k,2);M(g,_=>{});var y=i(g,2);{var $=_=>{var x=yc(),b=d(x,!0);c(x),U(()=>V(b,e(n))),l(_,x)};M(y,_=>{e(n)&&_($)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),oe()}var _c=T('<div class="success svelte-2o3w7i">Success</div>'),kc=T('<div class="mainErr err svelte-2o3w7i"> </div>'),xc=T('<div class="container svelte-2o3w7i"><!> <!> <!> <!> <!></div>');function Ec(p,a){ne(a,!0);let t=z(a,"attr",19,()=>({})),n=S(""),r=S(!1),h=S(void 0);Te(()=>{e(r)&&s(h,o(setTimeout(()=>{s(r,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(h)));let m=S(o({})),u=o({});const E=Qe().shape({name:he().trim().required("Name is required").matches(Ya,"Valid characters: [a-z0-9-_/]{2,32}"),desc:he().nullable().trim().matches(Va,"Valid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});Le(()=>{u.name=t().name,u.desc=t().desc});async function I(){if(s(n,""),!await v()){s(n,"Invalid input");return}let x={name:u.name,desc:u.desc},b=await ul(t().name,x);if(b.ok)s(r,!0);else{let C=await b.json();s(n,o(C.message))}}async function v(){try{return await E.validate(u,{abortEarly:!1}),s(m,o({})),!0}catch(x){return s(m,o(Je(x))),!1}}var w=xc(),f=d(w);ve(f,{autocomplete:"off",placeholder:"Name",get value(){return u.name},set value(x){u.name=x},get error(){return e(m).name},set error(x){e(m).name=x},$$events:{input:v},children:(x,b)=>{F();var C=Y("NAME");l(x,C)},$$slots:{default:!0}});var A=i(f,2);ve(A,{autocomplete:"off",placeholder:"Description",get value(){return u.desc},set value(x){u.desc=x},get error(){return e(m).desc},set error(x){e(m).desc=x},$$events:{input:v},children:(x,b)=>{F();var C=Y("DESCRIPTION");l(x,C)},$$slots:{default:!0}});var k=i(A,2);Se(k,{level:1,width:"4rem",$$events:{click:I},children:(x,b)=>{F();var C=Y("SAVE");l(x,C)},$$slots:{default:!0}});var g=i(k,2);{var y=x=>{var b=_c();l(x,b)};M(g,x=>{e(r)&&x(y)})}var $=i(g,2);{var _=x=>{var b=kc(),C=d(b,!0);c(b),U(()=>V(C,e(n))),l(x,b)};M($,x=>{e(n)&&x(_)})}c(w),l(p,w),oe()}var Ic=T('<div class="err svelte-1jljqe9"> </div>'),Sc=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this custom attribute?</div> <!> <!></div>');function Tc(p,a){ne(a,!0);let t=z(a,"attr",19,()=>({})),n=S(!1),r=S("");async function h(){s(r,""),s(n,!0);let v=await hl(t().name);if(v.ok)a.onSave();else{let w=await v.json();s(r,o(w.message))}s(n,!1)}var m=Sc(),u=i(d(m),2);Se(u,{level:1,get isLoading(){return e(n)},set isLoading(v){s(n,o(v))},$$events:{click:h},children:(v,w)=>{F();var f=Y("DELETE");l(v,f)},$$slots:{default:!0}});var E=i(u,2);{var I=v=>{var w=Ic(),f=d(w,!0);c(w),U(()=>V(f,e(r))),l(v,w)};M(E,v=>{e(r)&&v(I)})}c(m),l(p,m),oe()}var Cc=T('<div class="data svelte-115hohv"> </div>'),Ac=T('<div class="header svelte-115hohv"><!></div>'),Lc=T("<div><!></div>"),jc=T("<div><!></div>"),Rc=T("<div><!> <!></div>");function Dc(p,a){ne(a,!0);let t=z(a,"attr",27,()=>o({})),n=z(a,"onSave",15),r=S(void 0);const h=["Config","Delete"];let m=S(o(h[0]));const u=200,E=u/2;function I(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Ac(),f=d(w);Ze(f,{text:"Custom Attribute Name",children:(A,k)=>{var g=Cc(),y=d(g,!0);c(g),U(()=>V(y,t().name)),l(A,g)},$$slots:{default:!0}}),c(w),l(v,w)},body:v=>{var w=Rc(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=Lc(),_=d($);Ec(_,{get attr(){return t()},get onSave(){return n()},set onSave(x){n(x)}}),c($),ue(5,$,()=>we,()=>({delay:E,duration:u})),ue(6,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=me(),_=ee($);{var x=b=>{var C=jc(),L=d(C);Tc(L,{get attr(){return t()},onSave:I}),c(C),ue(5,C,()=>we,()=>({delay:E,duration:u})),ue(6,C,()=>we,()=>({duration:u})),l(b,C)};M(_,b=>{e(m)==="Delete"&&b(x)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),oe()}var Nc=T('<div class="svelte-mjg702"><!></div>'),Mc=T(' <div class="content"><!> <!> <div id="attrs" class="svelte-mjg702"></div> <!> <div style="height: 20px"></div></div>',1);function zc(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=S(""),u=[{label:"NAME",callback:(_,x)=>_.name.toLowerCase().includes(x.toLowerCase())}],E=[{label:"NAME",callback:(_,x)=>_.name.localeCompare(x.name)}];Le(()=>{I()});async function I(){let _=await ya();if(!_.ok)s(t,"Error fetching user attr: "+_.body.message);else{let x=await _.json();s(n,o([...x.values]))}}function v(){e(n).length<2&&(s(n,o([])),s(r,o([])),s(h,o([]))),I(),s(m,"")}F();var w=Mc(),f=ee(w),A=i(f),k=d(A);Lt(k,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(_){s(r,o(_))},get search(){return e(m)},set search(_){s(m,o(_))}});var g=i(k,2);$c(g,{onSave:v});var y=i(g,2);Ge(y,23,()=>e(h),_=>_.name,(_,x,b)=>{var C=Nc(),L=d(C);Dc(L,{onSave:v,get attr(){return e(h)[e(b)]},set attr(N){e(h)[e(b)]=N}}),c(C),l(_,C)}),c(y);var $=i(y,2);Nt($,{get items(){return e(r)},set items(_){s(r,o(_))},get resItems(){return e(h)},set resItems(_){s(h,o(_))}}),F(2),c(A),U(()=>V(f,`${e(t)??""} `)),l(p,w),oe()}var Pc=T('<div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div></div>'),Oc=T('<div class="container svelte-151ox8b"><div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b">Time Taken (ms)</div> <div class="column svelte-151ox8b">t_cost</div> <div class="column svelte-151ox8b">m_cost</div> <div class="column svelte-151ox8b">p_cost</div></div> <!> <div style="height: 20px"></div></div>');function qc(p,a){let t=z(a,"res",19,()=>[]);var n=Oc(),r=i(d(n),2);Ge(r,17,t,ut,(h,m)=>{var u=Pc(),E=d(u),I=d(E,!0);c(E);var v=i(E,2),w=d(v,!0);c(v);var f=i(v,2),A=d(f,!0);c(f);var k=i(f,2),g=d(k,!0);c(k),c(u),U(()=>{V(I,e(m).time_taken),V(w,e(m).t_cost),V(A,e(m).m_cost),V(g,e(m).p_cost)}),l(h,u)}),F(2),c(n),l(p,n)}var Uc=T('<div class="result svelte-1digv30"><!></div>'),Gc=T('<div class="wrapper svelte-1digv30"><div class="container svelte-1digv30"><!> <!> <!> <!></div> <!></div>');function Kc(p,a){ne(a,!0);const t="170px";let n=S(!1),r=S(!1),h=S(void 0),m=S(void 0),u=o({targetTime:1e3,mCost:32768,pCost:2}),E=S(o({}));const I=Qe().shape({targetTime:$t().required("Target Time is required").min(500,"Cannot be lower than 500").max(99999,"Cannot be higher than 99999"),mCost:$t().min(32768,"Cannot be lower than 32768").max(1048576,"Cannot be higher than 1048576"),pCost:$t().min(2,"Cannot be lower than 2").max(1024,"Cannot be higher than 1024")});Te(()=>{e(r)&&e(h)&&s(m,o(window.innerHeight))});function v(b){b.code==="Enter"&&w()}async function w(){try{await I.validate(u,{abortEarly:!1}),s(E,o({}))}catch(N){s(E,o(Je(N)));return}s(n,!0),s(r,!1);const b={target_time:Number.parseInt(u.targetTime),m_cost:Number.parseInt(u.mCost),p_cost:Number.parseInt(u.pCost)},C=await Yr(b),L=await C.json();C.ok?(s(h,o(L.results)),s(r,!0)):L.message,s(n,!1)}var f=Gc(),A=d(f),k=d(A);ve(k,{type:"number",autocomplete:"off",placeholder:"Target Time (ms)",width:t,get value(){return u.targetTime},set value(b){u.targetTime=b},get error(){return e(E).targetTime},set error(b){e(E).targetTime=b},$$events:{keypress:v},children:(b,C)=>{F();var L=Y("TARGET TIME (ms)");l(b,L)},$$slots:{default:!0}});var g=i(k,2);ve(g,{type:"number",autocomplete:"off",placeholder:"m_cost (kB)",width:t,get value(){return u.mCost},set value(b){u.mCost=b},get error(){return e(E).mCost},set error(b){e(E).mCost=b},$$events:{keypress:v},children:(b,C)=>{F();var L=Y("M_COST (kB)");l(b,L)},$$slots:{default:!0}});var y=i(g,2);ve(y,{type:"number",autocomplete:"off",placeholder:"p_cost",width:t,get value(){return u.pCost},set value(b){u.pCost=b},get error(){return e(E).pCost},set error(b){e(E).pCost=b},$$events:{keypress:v},children:(b,C)=>{F();var L=Y("P_COST");l(b,L)},$$slots:{default:!0}});var $=i(y,2);Se($,{get isLoading(){return e(n)},level:1,$$events:{click:w},children:(b,C)=>{F();var L=Y("CALCULATE");l(b,L)},$$slots:{default:!0}}),c(A);var _=i(A,2);{var x=b=>{var C=Uc(),L=d(C);qc(L,{get res(){return e(h)}}),c(C),l(b,C)};M(_,b=>{e(r)&&b(x)})}c(f),sr("y",()=>e(m),b=>s(m,o(b))),l(p,f),oe()}var Wc=T(`<div class="container svelte-6927oe"><h3>Argon2ID - Password Hashing</h3> <p>This utility helps you find the best argon2id settings for your platform.<br> Argon2id is currently the safest available password hashing algorithm. To use it to its fullest potential, it
        has
        to be tuned for each deployment.</p> <p><b>Important:These values need to be tuned on the final architecture!</b><br> They change depending on the capabilities of the system. The more powerful the system, the more safe these
        values
        can be.</p> <p>If you want a detailed introduction to argon2id, many sources exist online. This guide will just give very short
        overview about the values.<br> Three of them need to be configured:</p> <ul><li><b>m cost</b> <p>The <code class="svelte-6927oe">m_cost</code> defines the amount of <b>memory (in kB)</b>, which is used for the hashing.<br> The higher the value, the better, of course. But you need to keep in mind the servers resources.<br> When you hash 4 passwords at the same time, for instance, the backend needs <code class="svelte-6927oe">4 x m_cost</code> during the
                hashing. These resources must be available.</p> <p>Tuning <code class="svelte-6927oe">m_cost</code> is pretty easy. If you can give rauthy 1GB of memory for hashing operations,
                give it
                1GB. If you can sacrifice 4GB, give it 4GB.</p> <p><b>Important: You should never go below an <code class="svelte-6927oe">m_cost</code> of <code class="svelte-6927oe">32768</code></b>.</p></li> <li><b>p cost</b> <p>The <code class="svelte-6927oe">p_cost</code> defines the amount of <b>parallelism</b> for hashing.<br> This value most often tops out at ~8, which is the default for Rauthy.<br> <code class="svelte-6927oe">p_cost</code> does not affect the time needed for the calculation, if the resources are available.</p> <p>The general rule is:<br> Set the <code class="svelte-6927oe">p_cost</code> to twice the size of cores your have available.<br> For instance, if you have 4 cores available, set the <code class="svelte-6927oe">p_cost</code> to <code class="svelte-6927oe">8</code>.<br></p></li> <li><b>t cost</b> <p>The <code class="svelte-6927oe">t_cost</code> defines the amount of <b>time</b> for hashing.<br> This value is actually the only one, that needs tuning, since <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> are
                basically given by the environment.</p> <p>Tuning is easy: Set <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> accordingly and then increase <code class="svelte-6927oe">t_cost</code> as long as you have not reached your hashing-time-goal.</p></li></ul> <br> <h3>A word about Login Time</h3> <p>Generally, users want everything as fast as possible. When doing a safe login though, a time between 500 - 1000
        ms
        should not be a problem.<br> The login time must not be too short, since it would lower the strength of the hash, of course.</p> <p>To provide as much safety by default as possible, this utility does not allow you to go below 500 ms for the
        login
        time.</p> <br> <h3>Current values</h3> <p>The current values from the backend are the following:</p> <div><div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>m_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>p_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>t_cost</b>:</div> </div> <br> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>Login Time</b>:</div> </div> <p><i>Note:</i> The Login Time from the backend does only provide a good guideline after at least 5 successful
            logins, after
            rauthy has been started.<br> The base value is always 2000 ms after a fresh restart and will adjust over time with each successful login.</p> <b>Threads (p_cost) rauthy has access to</b> <br></div> <br> <h3>Parameter Calculation Utility</h3> <p>You can use this tool to approximate good values for your deployment.<br> Keep in mind, that this should be executed with rauthy in its final place with all final resources
        available.<br><br> You should execute this utility during load to not over tune.<br><br> <code class="svelte-6927oe">m_cost</code> is optional and the safe minimal value of <code class="svelte-6927oe">32768</code> would be chosen, if empty.<br> <code class="svelte-6927oe">p_cost</code> is optional and rauthy will utilize all threads it can see, if empty.<br></p> <!> <div style="height: 20px"></div></div>`);function Fc(p,a){ne(a,!0);let t=S(void 0),n=S(void 0),r=S(void 0);Le(()=>{h()});async function h(){let x=await Hr(),b=await x.json();x.ok?(s(t,o(b.argon2_params)),s(n,o(b.login_time)),s(r,o(b.num_cpus))):b.message}var m=Wc(),u=i(d(m),8);le(u,"margin-left","-10px");var E=i(u,16),I=d(E),v=i(d(I));c(I);var w=i(I,2),f=i(d(w));c(w);var A=i(w,2),k=i(d(A));c(A);var g=i(A,4),y=i(d(g));c(g);var $=i(g,5);F(),c(E);var _=i(E,8);Kc(_,{}),F(2),c(m),U(()=>{var x,b,C;V(v,` ${((x=e(t))==null?void 0:x.m_cost)??""}`),V(f,` ${((b=e(t))==null?void 0:b.p_cost)??""}`),V(k,` ${((C=e(t))==null?void 0:C.t_cost)??""}`),V(y,` ${e(n)??""} ms`),V($,`: ${e(r)??""}`)}),l(p,m),oe()}var Bc=T('<li class="font-mono"> </li>'),Hc=T('<div class="err svelte-3rk97c"> </div>'),Yc=T('<div class="success svelte-3rk97c">Success</div>'),Vc=T(`<div class="wrapper svelte-3rk97c"><div class="desc svelte-3rk97c"><h3>Secrets Encryption Keys</h3> <p>These Keys are used for an additional encryption at rest, independently from any data store technology used
            under
            the hood. They are configured statically, but can be rotated and migrated on this page manually to maybe get
            rid
            of an old key, which is currently still in use in some places.</p> <p>The active key is statically set in the Rauthy config file / environment variables. It cannot be changed
            here
            dynamically.<br> <b>All new JWK encryption's will always use the currently active key.</b></p> <div class="valRow svelte-3rk97c"><div class="label svelte-3rk97c">Active Key:</div> <div class="value font-mono"> </div></div> <div class="keysBlock svelte-3rk97c"><div>Available Keys:</div> <ul></ul></div> <div class="migrateBlock svelte-3rk97c"><p>If you migrate all existing secrets, it might take a few seconds to finish, if you have a big
                dataset.<br> Manually migrate all existing encryption in the backend to key:</p> <!></div></div> <div class="btn svelte-3rk97c"><!></div> <!> <!></div>`);function Jc(p,a){ne(a,!0);let t=S(""),n=S(!0),r=S(""),h=S(""),m=S(o([])),u=S(!1);Le(async()=>{E()});async function E(){let j=await Ur(),W=await j.json();j.ok?(s(r,o(W.active)),s(h,o(W.active)),s(m,o(W.keys))):s(t,o(W.message)),s(n,!1)}async function I(){s(n,!0),s(u,!1);let j={key_id:e(h)},W=await Gr(j);if(W.ok)s(u,!0);else{let D=await W.json();s(t,o(D.message))}s(n,!1)}var v=Vc(),w=d(v),f=i(d(w),6),A=i(d(f),2),k=d(A,!0);c(A),c(f);var g=i(f,2),y=i(d(g),2);le(y,"margin-left","-10px"),Ge(y,21,()=>e(m),ut,(j,W)=>{var D=Bc(),H=d(D,!0);c(D),U(()=>V(H,e(W))),l(j,D)}),c(y),c(g);var $=i(g,2),_=i(d($),2);Et(_,{get options(){return e(m)},width:"186px",get value(){return e(h)},set value(j){s(h,o(j))}}),c($),c(w);var x=i(w,2),b=d(x);Se(b,{get isLoading(){return e(n)},set isLoading(j){s(n,o(j))},$$events:{click:I},children:(j,W)=>{F();var D=Y("MIGRATE");l(j,D)},$$slots:{default:!0}}),c(x);var C=i(x,2);{var L=j=>{var W=Hc(),D=d(W,!0);c(W),U(()=>V(D,e(t))),l(j,W)};M(C,j=>{e(t)&&j(L)})}var N=i(C,2);{var R=j=>{var W=Yc();l(j,W)};M(N,j=>{e(u)&&j(R)})}c(v),U(()=>V(k,e(r))),l(p,v),oe()}var Qc=T('<div class="success svelte-10h0sak">Success</div>'),Zc=T('<div class="err svelte-10h0sak"> </div>'),Xc=T('<div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="desc svelte-10h0sak"><p>Validity for a new password.<br> Not Recently Used denied the last n used passwords.<br> Setting no value at all with disable the given option.</p></div> <div class="row svelte-10h0sak"><!> <!></div> <!> <!> <!>',1),ed=T('<div class="wrapper svelte-10h0sak"><div class="desc svelte-10h0sak"><h3>Password Policy</h3> <p>Configure the password policy.<br> The policy is being applied to all passwords being set from this moment on.</p></div> <!></div>');function td(p,a){ne(a,!0);const t="160px";let n=S(!1),r=S(""),h=S(!1),m=S(void 0),u=S(void 0),E=S(o({}));const I=Qe().shape({length_min:$t().required("Min Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),length_max:$t().required("Max Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),not_recently_used:$t().nullable().min(0,"Cannot be lower than 0").max(10,"Cannot be higher than 10"),valid_days:$t().nullable().min(0,"Cannot be lower than 0").max(3650,"Cannot be higher than 3650"),include_digits:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_lower_case:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_upper_case:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_special:$t().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32")});Te(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1)},3e3)))}),Le(async()=>{if(!e(u)){let y=await Ua(),$=await y.json();y.ok?(s(u,o($)),e(u).length_min=$.length_min||0,e(u).length_max=$.length_max||0,e(u).include_digits=$.include_digits||0,e(u).include_lower_case=$.include_lower_case||0,e(u).include_upper_case=$.include_upper_case||0,e(u).include_special=$.include_special||0,e(u).length_max=$.length_max||0,e(u).valid_days=$.valid_days||0,e(u).not_recently_used=$.not_recently_used||0):s(r,o($.message))}});function v(y){y.code==="Enter"&&w()}async function w(){if(!await f())return;s(r,""),s(n,!0);let y=e(u);y.not_recently_used===0&&(y.not_recently_used=null),y.valid_days===0&&(y.valid_days=null),y.include_digits===0&&(y.include_digits=null),y.include_lower_case===0&&(y.include_lower_case=null),y.include_upper_case===0&&(y.include_upper_case=null),y.include_special===0&&(y.include_special=null);let $=await Vr(y);if($.ok)s(h,!0);else{let _=await $.json();s(r,o(_.message))}s(n,!1)}async function f(){try{return s(E,o({})),await I.validate(e(u),{abortEarly:!1}),e(u).length_min=Number.parseInt(e(u).length_min),e(u).length_max=Number.parseInt(e(u).length_max),e(u).include_digits=Number.parseInt(e(u).include_digits),e(u).include_lower_case=Number.parseInt(e(u).include_lower_case),e(u).include_upper_case=Number.parseInt(e(u).include_upper_case),e(u).include_special=Number.parseInt(e(u).include_special),e(u).length_max=Number.parseInt(e(u).length_max),e(u).valid_days=Number.parseInt(e(u).valid_days),e(u).not_recently_used=Number.parseInt(e(u).not_recently_used),e(u).length_max<e(u).length_min?(e(E).length_max="Max Length cannot be lower than Min Length",!1):e(u).include_digits+e(u).include_lower_case+e(u).include_upper_case+e(u).include_special>e(u).length_max?(e(E).length_max="The sum of all includes does not fit into Max Length",!1):!0}catch(y){return s(E,o(Je(y))),!1}}var A=ed(),k=i(d(A),2);{var g=y=>{var $=Xc(),_=ee($),x=d(_);ve(x,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_min},set value(K){e(u).length_min=K},get error(){return e(E).length_min},set error(K){e(E).length_min=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("MIN LENGTH");l(K,re)},$$slots:{default:!0}});var b=i(x,2);ve(b,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_max},set value(K){e(u).length_max=K},get error(){return e(E).length_max},set error(K){e(E).length_max=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("MAX LENGTH");l(K,re)},$$slots:{default:!0}}),c(_);var C=i(_,2),L=d(C);ve(L,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_lower_case},set value(K){e(u).include_lower_case=K},get error(){return e(E).include_lower_case},set error(K){e(E).include_lower_case=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("INCLUDE LOWERCASE");l(K,re)},$$slots:{default:!0}});var N=i(L,2);ve(N,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_upper_case},set value(K){e(u).include_upper_case=K},get error(){return e(E).include_upper_case},set error(K){e(E).include_upper_case=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("INCLUDE UPPERCASE");l(K,re)},$$slots:{default:!0}}),c(C);var R=i(C,2),j=d(R);ve(j,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_digits},set value(K){e(u).include_digits=K},get error(){return e(E).include_digits},set error(K){e(E).include_digits=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("INCLUDE DIGITS");l(K,re)},$$slots:{default:!0}});var W=i(j,2);ve(W,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_special},set value(K){e(u).include_special=K},get error(){return e(E).include_special},set error(K){e(E).include_special=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("INCLUDE SPECIAL");l(K,re)},$$slots:{default:!0}}),c(R);var D=i(R,4),H=d(D);ve(H,{type:"number",autocomplete:"off",width:t,get value(){return e(u).not_recently_used},set value(K){e(u).not_recently_used=K},get error(){return e(E).not_recently_used},set error(K){e(E).not_recently_used=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("NOT RECENTLY USED");l(K,re)},$$slots:{default:!0}});var P=i(H,2);ve(P,{type:"number",autocomplete:"off",width:t,get value(){return e(u).valid_days},set value(K){e(u).valid_days=K},get error(){return e(E).valid_days},set error(K){e(E).valid_days=K},$$events:{keypress:v,input:f},children:(K,Z)=>{F();var re=Y("VALID FOR DAYS");l(K,re)},$$slots:{default:!0}}),c(D);var O=i(D,2);Se(O,{level:1,width:"4rem",get isLoading(){return e(n)},set isLoading(K){s(n,o(K))},$$events:{click:w},children:(K,Z)=>{F();var re=Y("SAVE");l(K,re)},$$slots:{default:!0}});var G=i(O,2);{var X=K=>{var Z=Qc();l(K,Z)};M(G,K=>{e(h)&&K(X)})}var q=i(G,2);{var B=K=>{var Z=Zc(),re=d(Z,!0);c(Z),U(()=>V(re,e(r))),l(K,Z)};M(q,K=>{e(r)&&K(B)})}l(y,$)};M(k,y=>{e(u)&&y(g)})}c(A),l(p,A),oe()}var ad=T('<div class="details svelte-2yt27i"><div class="detailsInner svelte-2yt27i"><textarea class="font-mono text svelte-2yt27i"></textarea></div></div>'),sd=T('<div role="none" class="cert svelte-2yt27i"><div class="data font-mono svelte-2yt27i"> </div> <div class="data right svelte-2yt27i"> </div> <!></div>');function rd(p,a){ne(a,!0);let t=S(!1);function n(){if(a.jwk.kty==="OKP")return a.jwk.crv;if(a.jwk.kty==="RSA"){let w;const f=a.jwk.n.length;return f>600?w=4096:f>400?w=3072:w=2048,`RSA ${w}`}return"unknown type"}var r=sd(),h=d(r),m=d(h,!0);c(h);var u=i(h,2),E=d(u,!0);U(()=>V(E,n())),c(u);var I=i(u,2);{var v=w=>{var f=ad(),A=d(f),k=d(A);fa(k),ie(k,"rows",10),ie(k,"cols",40),U(()=>er(k,JSON.stringify(a.jwk,null,2))),c(A),c(f),U(()=>ie(k,"name",a.jwk.kid)),ue(7,f,()=>mt),l(w,f)};M(I,w=>{e(t)&&w(v)})}c(r),U(()=>V(m,a.jwk.kid)),Me("mouseenter",r,()=>s(t,!0)),Me("mouseleave",r,()=>s(t,!1)),l(p,r),oe()}var ld=T('<div class="success svelte-a4xw46">Success</div>'),id=T('<div class="err svelte-a4xw46"> </div>'),nd=T(`<div class="wrapper svelte-a4xw46"><div class="desc svelte-a4xw46"><h3>Json Web Keys</h3> <p>These are the Json Web Keys (JWKs) used for token singing.</p> <p>You can rotate them and generate a full new set. Depending on your deployment, this could take a few
            seconds.<br> New tokens will always be signed with the new / latest ones. The old keys will be cleaned up automatically,
            when
            there cannot be a token anymore that used the old key to not
            break any current token validation.</p></div> <!> <!> <!> <!></div>`);function od(p,a){ne(a,!0);let t=S(o([])),n=S(!1),r=S(""),h=S(!1),m=S(void 0);Te(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1)},3e3)))}),Le(()=>{e(t).length===0&&u()});async function u(){let y=await Cr(),$=await y.json();y.ok?s(t,o([...$.keys])):s(r,o($.message))}async function E(){s(r,""),s(n,!0);let y=await rl();if(y.ok)u(),s(h,!0);else{let $=await y.json();s(r,o($.message))}s(n,!1)}var I=nd(),v=i(d(I),2);Ge(v,19,()=>e(t),y=>y.kid,(y,$,_)=>{rd(y,{get jwk(){return e(t)[e(_)]},set jwk(x){e(t)[e(_)]=x}})});var w=i(v,2);Se(w,{level:1,get isLoading(){return e(n)},set isLoading(y){s(n,o(y))},$$events:{click:E},children:(y,$)=>{F();var _=Y("ROTATE KEYS");l(y,_)},$$slots:{default:!0}});var f=i(w,2);{var A=y=>{var $=ld();l(y,$)};M(f,y=>{e(h)&&y(A)})}var k=i(f,2);{var g=y=>{var $=id(),_=d($,!0);c($),U(()=>V(_,e(r))),l(y,$)};M(k,y=>{e(r)&&y(g)})}c(I),l(p,I),oe()}var vd=T('<div class="content"><div class="container svelte-5h65jg"><!> <!></div></div>');function cd(p){const a=["Password Policy","JWKS","Argon2 Parameter","Encryption Keys"];let t=S(o(a[0]));var n=vd(),r=d(n),h=d(r);Dt(h,{labels:a,get selected(){return e(t)},set selected(I){s(t,o(I))}});var m=i(h,2);{var u=I=>{td(I,{})},E=I=>{var v=me(),w=ee(v);{var f=k=>{od(k,{})},A=k=>{var g=me(),y=ee(g);{var $=x=>{Fc(x,{})},_=x=>{var b=me(),C=ee(b);{var L=N=>{Jc(N,{})};M(C,N=>{e(t)==="Encryption Keys"&&N(L)},!0)}l(x,b)};M(y,x=>{e(t)==="Argon2 Parameter"?x($):x(_,!1)},!0)}l(k,g)};M(w,k=>{e(t)==="JWKS"?k(f):k(A,!1)},!0)}l(I,v)};M(m,I=>{e(t)==="Password Policy"?I(u):I(E,!1)})}c(r),c(n),l(p,n)}var dd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"></path></svg>');function ud(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=dd();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var hd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>');function pd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=hd();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var md=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"></path></svg>');function fd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=md();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var gd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"></path></svg>');function wd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=gd();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var yd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>');function bd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=yd();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var $d=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path></svg>');function ws(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=$d();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var _d=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"></path></svg>');function kd(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=_d();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var xd=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z"></path></svg>');function Ed(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=xd();ie(r,"stroke-width",1.5),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Id=Ye(`<svg width="100%" height="100%" viewBox="0 0 512 138" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,0,-11)"><g transform="matrix(1,0,0,1,0,-176)"><g transform="matrix(0.920325,0,0,1.84151,45.9279,26.459)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:rgb(4,7,11);"></rect></g><g transform="matrix(1.93472,0,0,1.82732,8.35618,28.7533)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(4,7,11);stroke:rgb(4,7,11);stroke-width:1.06px;"></rect></g><g transform="matrix(1.82732,0,0,1.82732,-160.822,70.1806)"><g transform="matrix(72,0,0,72,227.174,123.417)"></g><text x="128.982px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">r<tspan x="152.994px 188.537px " y="123.417px 123.417px ">au</tspan></text></g><g transform="matrix(1,0,0,1.01617,-1.42109e-14,-5.24492)"><path d="M440.936,322.643L439.204,324.266L255.482,324.266L255.482,305.721L440.936,305.721L440.936,322.643Z" style="fill:url(#_Linear1);"></path></g><g transform="matrix(0.920191,0,0,1.84121,46.2464,-91.3383)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:url(#_Linear2);"></rect></g><g transform="matrix(1.97598,0,0,1.84619,190.187,26.062)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(43,65,107);"></rect></g><path d="M439.204,187.734L440.557,189.007L440.557,206.279L256,206.279L256,187.734L439.204,187.734Z" style="fill:rgb(43,65,107);"></path><g transform="matrix(1.82732,0,0,1.82732,-154.661,70.1806)"><g transform="matrix(72,0,0,72,323.045,123.417)"></g><text x="226.646px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">th<tspan x="288.943px " y="123.417px ">y</tspan></text></g><g transform="matrix(2,0,0,2,0,0)"><path d="M219.602,93.867L256,128L219.602,162.133L219.602,93.867Z" style="fill:rgb(43,65,107);"></path></g><g transform="matrix(2,0,0,1.95739,0,3.99997)"><path d="M36.398,93.867L0,93.867L35.908,128.524L0,163.619L36.398,163.619" style="fill:rgb(4,7,11);"></path></g></g></g><defs><linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(185.454,0,0,18.5443,255.482,314.994)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient><linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(200.517,0,0,10.1483,27.7414,156.645)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient></defs></svg>`);function Sd(p){var a=Id();l(p,a)}var Td=T(`<div class="content"><div class="container svelte-x4sug2"><h2>Documentation</h2> <p class="svelte-x4sug2">For general documentation about Rauthy itself, you should take a look at the <a href="https://sebadob.github.io/rauthy/" target="_blank" class="svelte-x4sug2">Rauthy Book</a></p> <p class="svelte-x4sug2">If you want to integrate an external application and use Rauthy's REST API, take a look at the <a href="/docs/v1/swagger-ui/" target="_blank" class="svelte-x4sug2">Swagger UI</a><br> <b>Note:</b> Depending on the backend configuration, the Swagger UI may not be exposed publicly at this point.
            It is however by default available via the internal <code>/metrics</code> HTTP server to not expose any information.</p> <p class="svelte-x4sug2">The source code can be found in <a href="https://github.com/sebadob/rauthy" target="_blank" class="svelte-x4sug2">Github</a></p></div></div>`);function Cd(p){var a=Td();l(p,a)}var Ad=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"></path></svg>');function Ld(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Ad();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var jd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),Rd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),Dd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div>',1),Nd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"><!></div>',1),Md=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"> </div> <div class="col-text"> </div>',1),zd=T('<div class="col-typ svelte-1aid5cl"> </div> <div class="col-ip svelte-1aid5cl"></div> <div class="col-text"> </div>',1),Pd=T('<div class="col-typ svelte-1aid5cl"> </div>'),Od=T('<div class="row svelte-1aid5cl"><div class="col-ts svelte-1aid5cl"> </div> <!></div>'),qd=T(" <br>",1),Ud=T("<br> <!> ",1),Gd=T(" <br> ",1),Kd=T("<br> <br> <!>",1),Wd=T("<br> <br> ",1),Fd=T("<br> ",1),Bd=T(" <br> <!>",1),Hd=T('<div role="contentinfo"><!></div>');function ys(p,a){ne(a,!0);let t=z(a,"collapsed",3,!0),n=S("event"),r=S(!1),h=We(()=>!t()&&!a.wide),m=We(()=>t()&&!a.wide&&!e(r)),u=We(()=>!t()&&a.wide),E=We(()=>e(m)?".5rem":".33rem");Le(()=>{new Date().getTime()-1e3*30<a.event.timestamp&&(setTimeout(()=>{s(n,"eventNew")},100),setTimeout(()=>{s(n,"event")},2500))});function I(){switch(a.event.level){case"test":return"T";case"info":return"I";case"notice":return"N";case"warning":return"W";case"critical":return"C";default:return"U"}}function v(){return pt(a.event.timestamp/1e3)}var w=Hd();const f=We(()=>`${e(E)} solid ${Kt(a.event.level)}`);var A=d(w);{var k=y=>{var $=Od(),_=d($),x=d(_,!0);U(()=>V(x,v())),c(_);var b=i(_,2);{var C=N=>{var R=jd(),j=ee(R),W=d(j,!0);c(j);var D=i(j,2),H=d(D,!0);c(D);var P=i(D,2),O=d(P,!0);c(P),U(()=>{V(W,a.event.typ),V(H,a.event.ip),V(O,a.event.text)}),l(N,R)},L=N=>{var R=me(),j=ee(R);{var W=H=>{var P=Rd(),O=ee(P),G=d(O,!0);c(O);var X=i(O,2),q=d(X,!0);c(X),U(()=>{V(G,`${a.event.typ}: ${a.event.data}`),V(q,a.event.ip)}),l(H,P)},D=H=>{var P=me(),O=ee(P);{var G=q=>{var B=Dd(),K=ee(B),Z=d(K,!0);c(K);var re=i(K,2),ce=d(re,!0);c(re),U(()=>{V(Z,a.event.typ),V(ce,a.event.ip||"")}),l(q,B)},X=q=>{var B=me(),K=ee(B);{var Z=ce=>{var $e=Nd(),_e=ee($e),pe=d(_e,!0);c(_e);var Ne=i(_e,2),ge=d(Ne,!0);c(Ne);var de=i(Ne,2),ye=d(de);Xa(ye,()=>a.event.text.replace("@","<wbr/>@")),c(de),U(()=>{V(pe,a.event.typ),V(ge,a.event.ip||"")}),l(ce,$e)},re=ce=>{var $e=me(),_e=ee($e);{var pe=ge=>{var de=Md(),ye=ee(de),be=d(ye,!0);c(ye);var ze=i(ye,2),Ce=d(ze,!0);c(ze);var xe=i(ze,2),Re=d(xe,!0);U(()=>V(Re,`Expires: ${pt(a.event.data)}`)),c(xe),U(()=>{V(be,a.event.typ),V(Ce,a.event.ip)}),l(ge,de)},Ne=ge=>{var de=me(),ye=ee(de);{var be=Ce=>{var xe=zd(),Re=ee(xe),J=d(Re,!0);c(Re);var Ie=i(Re,4),fe=d(Ie,!0);c(Ie),U(()=>{V(J,a.event.typ),V(fe,a.event.text)}),l(Ce,xe)},ze=Ce=>{var xe=Pd(),Re=d(xe,!0);c(xe),U(()=>V(Re,a.event.typ)),l(Ce,xe)};M(ye,Ce=>{a.event.typ==="RauthyStarted"||a.event.typ==="RauthyHealthy"||a.event.typ==="RauthyUnhealthy"?Ce(be):Ce(ze,!1)},!0)}l(ge,de)};M(_e,ge=>{a.event.typ==="IpBlacklisted"?ge(pe):ge(Ne,!1)},!0)}l(ce,$e)};M(K,ce=>{a.event.typ==="NewRauthyAdmin"||a.event.typ==="NewUserRegistered"||a.event.typ==="UserPasswordReset"||a.event.typ==="UserEmailChange"?ce(Z):ce(re,!1)},!0)}l(q,B)};M(O,q=>{a.event.typ==="SecretsMigrated"?q(G):q(X,!1)},!0)}l(H,P)};M(j,H=>{a.event.typ==="InvalidLogins"?H(W):H(D,!1)},!0)}l(N,R)};M(b,N=>{a.event.typ==="Test"?N(C):N(L,!1)})}c($),l(y,$)},g=y=>{var $=me(),_=ee($);{var x=C=>{var L=Bd(),N=ee(L,!0);U(()=>V(N,v()));var R=i(N,2),j=i(R);{var W=H=>{var P=Ud(),O=i(ee(P),2);{var G=q=>{var B=qd(),K=ee(B);F(),U(()=>V(K,`${a.event.text??""} `)),l(q,B)};M(O,q=>{a.event.text&&q(G)})}var X=i(O);U(()=>V(X,` ${a.event.ip??""}`)),l(H,P)},D=H=>{var P=me(),O=ee(P);{var G=q=>{var B=Gd(),K=ee(B,!0),Z=i(K,2);U(()=>{V(K,`: ${a.event.data}`),V(Z,` ${a.event.ip??""}`)}),l(q,B)},X=q=>{var B=me(),K=ee(B);{var Z=ce=>{var $e=Y();U(()=>V($e,a.event.ip)),l(ce,$e)},re=ce=>{var $e=me(),_e=ee($e);{var pe=ge=>{var de=Kd(),ye=i(ee(de)),be=i(ye,3);Xa(be,()=>a.event.text.replace("@","<wbr/>@")),U(()=>V(ye,` ${(a.event.ip||"")??""} `)),l(ge,de)},Ne=ge=>{var de=me(),ye=ee(de);{var be=Ce=>{var xe=Wd(),Re=i(ee(xe)),J=i(Re,2);U(()=>V(J,` ${pt(a.event.data)??""}`)),U(()=>V(Re,` ${a.event.ip??""} `)),l(Ce,xe)},ze=Ce=>{var xe=me(),Re=ee(xe);{var J=Ie=>{var fe=Fd(),qe=i(ee(fe));U(()=>V(qe,` ${a.event.text??""}`)),l(Ie,fe)};M(Re,Ie=>{(a.event.typ==="RauthyStarted"||a.event.typ==="RauthyHealthy"||a.event.typ==="RauthyUnhealthy")&&Ie(J)},!0)}l(Ce,xe)};M(ye,Ce=>{a.event.typ==="IpBlacklisted"?Ce(be):Ce(ze,!1)},!0)}l(ge,de)};M(_e,ge=>{a.event.typ==="NewRauthyAdmin"||a.event.typ==="NewUserRegistered"||a.event.typ==="UserPasswordReset"||a.event.typ==="UserEmailChange"?ge(pe):ge(Ne,!1)},!0)}l(ce,$e)};M(K,ce=>{a.event.typ==="SecretsMigrated"?ce(Z):ce(re,!1)},!0)}l(q,B)};M(O,q=>{a.event.typ==="InvalidLogins"?q(G):q(X,!1)},!0)}l(H,P)};M(j,H=>{a.event.typ==="Test"?H(W):H(D,!1)})}U(()=>V(R,` ${a.event.typ??""} `)),l(C,L)},b=C=>{var L=Y();U(()=>V(L,I())),l(C,L)};M(_,C=>{e(h)?C(x):C(b,!1)},!0)}l(y,$)};M(A,y=>{e(u)?y(k):y(g,!1)})}c(w),U(()=>{jt(w,Rt(e(n)),"svelte-1aid5cl"),St(w,"showCollapsed",e(m)),le(w,"border-left",e(f))}),Me("mouseenter",w,()=>s(r,!0)),Me("mouseleave",w,()=>s(r,!1)),l(p,w),oe()}var Yd=T("<div><div><b>Legend</b></div> <div><div>TEST</div> <div>INFO</div> <div>NOTICE</div> <div>WARNING</div> <div>CRITICAL</div></div></div>");function Vd(p,a){ne(a,!0);var t=Yd(),n=d(t),r=i(n,2),h=d(r);const m=We(()=>`.33rem solid ${Kt("test")}`);var u=i(h,2);const E=We(()=>`.33rem solid ${Kt("info")}`);var I=i(u,2);const v=We(()=>`.33rem solid ${Kt("notice")}`);var w=i(I,2);const f=We(()=>`.33rem solid ${Kt("warning")}`);var A=i(w,2);const k=We(()=>`.33rem solid ${Kt("critical")}`);c(r),c(t),U(()=>{jt(n,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),le(n,"border-left",".33rem solid var(--col-bg)"),jt(r,Rt(a.wide?"legendWide":"legend"),"svelte-1imwz5t"),jt(h,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),le(h,"border-left",e(m)),jt(u,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),le(u,"border-left",e(E)),jt(I,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),le(I,"border-left",e(v)),jt(w,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),le(w,"border-left",e(f)),jt(A,Rt(a.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),le(A,"border-left",e(k))}),l(p,t),oe()}var Jd=T('<div class="headerWideInner svelte-t1qwu8"><b>Events</b> <!></div>'),Qd=T("<b>Events</b>"),Zd=T("<!> <!>",1),Xd=T('<div class="opts svelte-t1qwu8"><!></div>'),eu=T('<div role="contentinfo" id="events" class="svelte-t1qwu8"><div class="upper"><div class="header svelte-t1qwu8"><!></div> <!> <div></div></div> <!></div>');function tu(p,a){ne(a,!0);let t=z(a,"collapsed",3,!0),n=z(a,"wide",15),r=50,h=S(void 0),m=S(o([])),u=S(o([])),E=S(void 0),I=S(!1);Le(async()=>{s(E,o(await v()))});async function v(){return localStorage.getItem("eventLevel")||"Info"}async function w(D){localStorage.setItem("eventLevel",D)}async function f(){await Ns()}function A(){var D;console.log("opening SSE stream"),s(h,o(new EventSource(`/auth/v1/events/stream?latest=${r}&level=${((D=e(E))==null?void 0:D.toLowerCase())||"info"}`))),e(h).onopen=()=>{console.log("SSE Events Stream opened"),s(m,o([]))},e(h).onerror=()=>{console.error("SSE Events Stream closed")},e(h).onmessage=H=>{if(H.data){let P=JSON.parse(H.data);s(m,o([P,...e(m).slice(-499)]))}}}let k=We(()=>!t()&&!n()||e(I)),g=We(()=>t()&&!n()&&!e(I)),y=We(()=>!t()&&n());Te(()=>{if(e(m))switch(e(E)){case"Info":s(u,o(e(m)));break;case"Notice":s(u,o(e(m).filter(D=>D.typ==="Test"||D.level==="notice"||D.level==="warning"||D.level==="critical")));break;case"Warning":s(u,o(e(m).filter(D=>D.typ==="Test"||D.level==="warning"||D.level==="critical")));break;case"Critical":s(u,o(e(m).filter(D=>D.typ==="Test"||D.level==="critical")));break}}),Te(()=>{e(E)&&(w(e(E)),e(h)&&e(h).readyState!==2&&e(h).close(),A())});var $=eu(),_=d($),x=d(_),b=d(x);{var C=D=>{var H=Zd(),P=ee(H);{var O=q=>{var B=Jd(),K=i(d(B),2);Et(K,{options:ha,get value(){return e(E)},set value(Z){s(E,o(Z))}}),c(B),l(q,B)},G=q=>{var B=Qd();l(q,B)};M(P,q=>{e(y)?q(O):q(G,!1)})}var X=i(P,2);Se(X,{level:3,$$events:{click:f},children:(q,B)=>{F();var K=Y("TEST");l(q,K)},$$slots:{default:!0}}),l(D,H)};M(b,D=>{e(g)||D(C)})}c(x);var L=i(x,2);{var N=D=>{var H=Xd(),P=d(H);Et(P,{options:ha,get value(){return e(E)},set value(O){s(E,o(O))}}),c(H),l(D,H)};M(L,D=>{e(y)||D(N)})}var R=i(L,2);Ge(R,23,()=>e(u),D=>D.id,(D,H,P)=>{var O=We(()=>t()&&!e(I));ys(D,{get collapsed(){return e(O)},get event(){return e(u)[e(P)]},set event(G){e(u)[e(P)]=G},get wide(){return n()},set wide(G){n(G)}})}),c(R),c(_);var j=i(_,2);{var W=D=>{Vd(D,{get wide(){return n()},set wide(H){n(H)}})};M(j,D=>{(!t()||e(I))&&D(W)})}c($),U(()=>{St($,"widthDefault",e(k)),St($,"widthCollapsed",e(g)),St($,"widthWide",e(y)),jt(R,Rt(e(y)?"dataWide":e(g)?"dataCollapsed":"data"),"svelte-t1qwu8")}),Me("mouseenter",$,()=>s(I,!0)),Me("mouseleave",$,()=>s(I,!1)),l(p,$),oe()}var au=T('<div class="addNewInputs svelte-1fhw572"><!> <!> <div class="saveBtn svelte-1fhw572"><!></div> <div class="err svelte-1fhw572"> </div></div>'),su=T('<div class="svelte-1fhw572">No blacklisted IPs</div>'),ru=(p,a,t)=>a(e(t).ip),lu=T('<div role="button" tabindex="0" class="delete svelte-1fhw572"><!></div>'),iu=T('<div class="blacklisted svelte-1fhw572"><div class="ip svelte-1fhw572"> </div> <div class="exp svelte-1fhw572"> </div> <!></div>'),nu=T(' <div class="content"><div class="top svelte-1fhw572"><!> <div class="addNew svelte-1fhw572"><!></div></div> <!> <div id="blacklist" class="svelte-1fhw572"><!></div> <!> <div style="height: 20px"></div></div>',1);function ou(p,a){ne(a,!0);let t=S(""),n=S(""),r=S(o([])),h=S(o([])),m=S(o([])),u=S(!1),E=o({ip:"",exp:""}),I=S(o({}));const v=Qe().shape({ip:he().required("IP is required").matches(Vs,"Invalid IPv4")}),w=new Date().toISOString().split(".")[0],f=[{label:"IP",callback:(q,B)=>q.ip.includes(B)}];let A=[{label:"IP",callback:(q,B)=>q.ip.localeCompare(B.ip)}];Te(()=>{e(u)&&(s(n,""),E.exp=new Date().toISOString().split(".")[0])}),Le(()=>{k()});async function k(){let q=await $l(),B=await q.json();q.ok?s(r,o(B.ips)):s(t,o(B.message))}async function g(){if(s(n,""),!await $())return;let q=Ot(E.exp);if(!q){s(n,"Invalid Date Input: User Expires");return}let B={ip:E.ip,exp:q},K=await _l(B);if(K.ok)s(u,!1),E.ip="",await k();else{let Z=await K.json();s(n,o(Z.message))}}async function y(q){(await kl(q)).ok&&await k()}async function $(){try{return await v.validate(E,{abortEarly:!1}),s(I,o({})),!0}catch(q){return s(I,o(Je(q))),!1}}F();var _=nu(),x=ee(_),b=i(x),C=d(b),L=d(C);Lt(L,{get items(){return e(r)},searchOptions:f,orderOptions:A,get resItems(){return e(h)},set resItems(q){s(h,o(q))}});var N=i(L,2),R=d(N);Se(R,{level:3,$$events:{click:()=>s(u,!e(u))},children:(q,B)=>{F();var K=Y("BLACKLIST IP");l(q,K)},$$slots:{default:!0}}),c(N),c(C);var j=i(C,2);{var W=q=>{var B=au(),K=d(B);ve(K,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return E.ip},set value(pe){E.ip=pe},get error(){return e(I).ip},set error(pe){e(I).ip=pe},children:(pe,Ne)=>{F();var ge=Y("IP");l(pe,ge)},$$slots:{default:!0}});var Z=i(K,2);ve(Z,{type:"datetime-local",step:"60",width:"18rem",min:w,max:"2099-01-01T00:00",get value(){return E.exp},set value(pe){E.exp=pe},children:(pe,Ne)=>{F();var ge=Y("EXPIRES");l(pe,ge)},$$slots:{default:!0}});var re=i(Z,2),ce=d(re);Se(ce,{level:1,$$events:{click:g},children:(pe,Ne)=>{F();var ge=Y("SAVE");l(pe,ge)},$$slots:{default:!0}}),c(re);var $e=i(re,2),_e=d($e,!0);c($e),c(B),U(()=>V(_e,e(n))),ue(3,B,()=>we),l(q,B)};M(j,q=>{e(u)&&q(W)})}var D=i(j,2),H=d(D);{var P=q=>{var B=su();l(q,B)},O=q=>{var B=me(),K=ee(B);Ge(K,17,()=>e(m),Z=>Z.ip,(Z,re)=>{var ce=iu(),$e=d(ce),_e=d($e,!0);c($e);var pe=i($e,2),Ne=d(pe,!0);U(()=>V(Ne,pt(e(re).exp))),c(pe);var ge=i(pe,2);Ze(ge,{text:"Delete IP",children:(de,ye)=>{var be=lu();be.__click=[ru,y,re];var ze=d(be);ta(ze,{color:"var(--col-err)"}),c(be),Me("keypress",be,()=>y(e(re).ip)),l(de,be)},$$slots:{default:!0}}),c(ce),U(()=>V(_e,e(re).ip)),l(Z,ce)}),l(q,B)};M(H,q=>{e(r).length===0?q(P):q(O,!1)})}c(D);var G=i(D,2);{var X=q=>{Nt(q,{get items(){return e(h)},set items(B){s(h,o(B))},get resItems(){return e(m)},set resItems(B){s(m,o(B))}})};M(G,q=>{e(r).length>0&&q(X)})}F(2),c(b),U(()=>V(x,`${e(t)??""} `)),l(p,_),oe()}it(["click"]);var vu=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"></path></svg>');function cu(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=vu();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var du=T('<div role="button" tabindex="0" class="cell pointer svelte-lgl56a"> </div>'),uu=T('<div class="cell svelte-lgl56a"><input class="pointer svelte-lgl56a" type="checkbox"></div>'),hu=T('<div class="mr svelte-lgl56a"><div role="button" tabindex="0" class="label pointer svelte-lgl56a"> </div> <!></div>'),pu=T('<div class="matrix svelte-lgl56a"><b>Access Rights</b> <div class="mr svelte-lgl56a"><div class="label svelte-lgl56a"></div> <!></div> <!></div>');function bs(p,a){ne(a,!0);let t=z(a,"accessMatrix",15);z(a,"finalize",15)(I);const n=["Blacklist","Clients","Events","Generic","Groups","Roles","Secrets","Sessions","Scopes","UserAttributes","Users"],r=["create","read","update","delete"];let h=new Array(n.length).fill(!1),m=new Array(r.length).fill(!1);Le(()=>{var $;u(),($=a.apiKey)!=null&&$.access&&E()});function u(){let $=new Array(n.length);for(let _=0;_<n.length;_++){$[_]={group:n[_]};for(let x of r)$[_][x]=!1}t($)}function E(){for(let $ of a.apiKey.access){let _=n.findIndex(x=>x===$.group);for(let x of $.access_rights){let b=r.findIndex(C=>C===x);t(t()[_][r[b]]=!0,!0)}}}function I(){let $=[];for(let _=0;_<n.length;_++){let x=[];for(let b of r)t()[_][b]&&x.push(b);x.length>0&&$.push({group:n[_],access_rights:x})}return $}function v($){h[$]=!h[$];const _=h[$];let x=t()[$];for(let b=0;b<r.length;b++)for(let C of Object.keys(x))C!=="group"&&(x[C]=_);t(t()[$]=x,!0)}function w($){m[$]=!m[$];const _=m[$];for(let x=0;x<n.length;x++)t(t()[x][r[$]]=_,!0)}var f=pu(),A=i(d(f),2),k=i(d(A),2);Ge(k,17,()=>r,ut,($,_,x)=>{var b=du(),C=We(()=>w.bind(this,x));b.__click=function(...R){var j;(j=e(C))==null||j.apply(this,R)};var L=We(()=>w.bind(this,x)),N=d(b,!0);c(b),U(()=>V(N,r[x])),Me("keypress",b,function(...R){var j;(j=e(L))==null||j.apply(this,R)}),l($,b)}),c(A);var g=i(A,2);{var y=$=>{var _=me(),x=ee(_);Ge(x,17,()=>n,ut,(b,C,L)=>{var N=hu(),R=d(N),j=We(()=>v.bind(this,L));R.__click=function(...P){var O;(O=e(j))==null||O.apply(this,P)};var W=We(()=>v.bind(this,L)),D=d(R,!0);c(R);var H=i(R,2);Ge(H,17,()=>r,ut,(P,O)=>{var G=uu(),X=d(G);lt(X),c(G),ir(X,()=>t()[L][e(O)],q=>t(t()[L][e(O)]=q,!0)),l(P,G)}),c(N),U(()=>V(D,n[L])),Me("keypress",R,function(...P){var O;(O=e(W))==null||O.apply(this,P)}),l(b,N)}),l($,_)};M(g,$=>{t()&&$(y)})}return c(f),l(p,f),oe({finalizeMatrix:I})}it(["click"]);var mu=T("<div><!></div>"),fu=T('<div class="container svelte-ubtepy"><!> <div class="switch svelte-ubtepy">Key Expires: <!></div> <!> <!> <div class="saveBtn svelte-ubtepy"><!></div> <div class="err svelte-ubtepy"> </div></div>');function gu(p,a){ne(a,!0);const t=new Date().toISOString().split(".")[0];let n=z(a,"apiKeys",19,()=>[]),r=z(a,"onSave",3,()=>{}),h=S(""),m=S(!1),u=S(void 0),E=S(void 0),I=o({name:"",exp:""}),v=S(o({}));const w=Qe().shape({name:he().required("Name is required").min(2).max(24).matches(Js,"Format: [a-zA-Z0-9_/-]{2,24}")});Te(()=>{e(m)&&(I.exp=new Date().toISOString().split(".")[0])});async function f(){if(s(h,""),!await A())return;let j={name:I.name,access:e(u)()};if(j.access.length===0){s(h,"Grant the new API Key at least one permission");return}if(e(m)){let D=Ot(I.exp);if(!D){s(h,"Invalid Date Input: User Expires");return}j.exp=D}let W=await gl(j);if(W.ok)r()();else{let D=await W.json();s(h,o(D.message))}}async function A(){try{await w.validate(I,{abortEarly:!1}),s(v,o({}))}catch(j){return s(v,o(Je(j))),!1}for(let j of n())if(j.name===I.name)return e(v).name="Name already exists",!1;return!0}var k=fu(),g=d(k);ve(g,{width:"18rem",autocomplete:"off",placeholder:"Name",get value(){return I.name},set value(j){I.name=j},get error(){return e(v).name},set error(j){e(v).name=j},children:(j,W)=>{F();var D=Y("NAME");l(j,D)},$$slots:{default:!0}});var y=i(g,2),$=i(d(y));He($,{get selected(){return e(m)},set selected(j){s(m,o(j))}}),c(y);var _=i(y,2);{var x=j=>{var W=mu(),D=d(W);ve(D,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return I.exp},set value(H){I.exp=H},children:(H,P)=>{F();var O=Y("EXPIRES");l(H,O)},$$slots:{default:!0}}),c(W),ue(3,W,()=>we),l(j,W)};M(_,j=>{e(m)&&j(x)})}var b=i(_,2);bs(b,{get accessMatrix(){return e(E)},set accessMatrix(j){s(E,o(j))},get finalize(){return e(u)},set finalize(j){s(u,o(j))}});var C=i(b,2),L=d(C);Se(L,{level:1,$$events:{click:f},children:(j,W)=>{F();var D=Y("SAVE");l(j,D)},$$slots:{default:!0}}),c(C);var N=i(C,2),R=d(N,!0);c(N),c(k),U(()=>V(R,e(h))),l(p,k),oe()}var wu=T("<div><!></div>"),yu=T('<div class="success svelte-1a3jnb3">Success</div>'),bu=T('<div class="mainErr err svelte-1a3jnb3"> </div>'),$u=T('<div class="container svelte-1a3jnb3"><div class="unit svelte-1a3jnb3"><div class="label svelte-1a3jnb3">Name</div> <div class="value svelte-1a3jnb3"> </div></div> <div class="switch svelte-1a3jnb3">Key Expires: <!></div> <!> <!> <!> <!> <!></div>');function _u(p,a){ne(a,!0);const t=new Date().toISOString().split(".")[0];let n=z(a,"apiKey",27,()=>o({})),r=S(""),h=S(!1),m=S(void 0),u=S(!!n().expires),E=S(void 0),I=S(void 0);Te(()=>{e(h)&&s(m,o(setTimeout(()=>{s(h,!1),a.onSave()},2e3)))}),Le(()=>()=>clearTimeout(e(m)));let v=o({exp:""});Te(()=>{e(u)&&(v.exp=new Date().toISOString().split(".")[0])});async function w(){s(r,"");let W={name:n().name,access:e(I)()};if(W.access.length===0){s(r,"Grant the API Key at least one permission");return}if(e(u)){let H=Ot(v.exp);if(!H){s(r,"Invalid Date Input: User Expires");return}W.exp=H}let D=await wl(W);if(D.ok)a.onSave(),s(h,!0);else{let H=await D.json();s(r,o(H.message))}}var f=$u(),A=d(f),k=i(d(A),2),g=d(k,!0);c(k),c(A);var y=i(A,2),$=i(d(y));He($,{get selected(){return e(u)},set selected(W){s(u,o(W))}}),c(y);var _=i(y,2);{var x=W=>{var D=wu(),H=d(D);ve(H,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return v.exp},set value(P){v.exp=P},children:(P,O)=>{F();var G=Y("EXPIRES");l(P,G)},$$slots:{default:!0}}),c(D),ue(3,D,()=>we),l(W,D)};M(_,W=>{e(u)&&W(x)})}var b=i(_,2);bs(b,{get apiKey(){return n()},get accessMatrix(){return e(E)},set accessMatrix(W){s(E,o(W))},get finalize(){return e(I)},set finalize(W){s(I,o(W))}});var C=i(b,2);Se(C,{level:1,width:"4rem",$$events:{click:w},children:(W,D)=>{F();var H=Y("SAVE");l(W,H)},$$slots:{default:!0}});var L=i(C,2);{var N=W=>{var D=yu();l(W,D)};M(L,W=>{e(h)&&W(N)})}var R=i(L,2);{var j=W=>{var D=bu(),H=d(D,!0);c(D),U(()=>V(H,e(r))),l(W,D)};M(R,W=>{e(r)&&W(j)})}c(f),U(()=>V(g,n().name)),l(p,f),oe()}var ku=T('<div class="err svelte-1jljqe9"> </div>'),xu=T('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this ApiKey?</div> <!> <!></div>');function Eu(p,a){ne(a,!0);let t=z(a,"apiKey",19,()=>({})),n=S("");async function r(){s(n,"");let I=await yl(t().name);if(I.ok)a.onSave();else{let v=await I.json();s(n,o(v.message))}}var h=xu(),m=i(d(h),2);Se(m,{level:1,$$events:{click:r},children:(I,v)=>{F();var w=Y("DELETE");l(I,w)},$$slots:{default:!0}});var u=i(m,2);{var E=I=>{var v=ku(),w=d(v,!0);c(v),U(()=>V(w,e(n))),l(I,v)};M(u,I=>{e(n)&&I(E)})}c(h),l(p,h),oe()}var Iu=T('<div><div class="iconsOuter svelte-s24qr4"><div class="iconsInner svelte-s24qr4"><div role="button" tabindex="0" class="show svelte-s24qr4"><!></div> <div role="button" tabindex="0"><!></div></div></div> <textarea></textarea></div>');function $s(p,a){ne(a,!0);let t=z(a,"value",3,""),n=z(a,"rows",3,10),r=z(a,"cols",3,60),h=z(a,"name",3,"default"),m=z(a,"show",15,!1),u=z(a,"width",3,"40rem"),E=Ut(a,["$$slots","$$events","$$legacy","value","rows","cols","name","show","width"]),I=S(""),v=S("");Te(()=>{m()?s(v,t()):s(v,o(e(I)))}),Le(()=>{for(let R=0;R<t().length;R++)s(I,e(I)+"*");s(v,o(e(I)))});function w(){navigator.clipboard.writeText(t())}function f(){m(!m())}var A=Iu(),k=d(A),g=d(k),y=d(g);y.__click=f;var $=d(y);{var _=R=>{ka(R,{width:22})},x=R=>{_a(R,{width:22})};M($,R=>{m()?R(_):R(x,!1)})}c(y);var b=i(y,2);b.__click=w;var C=d(b);cs(C,{}),c(b),c(g),c(k);var L=i(k,2);fa(L);let N;c(A),U(()=>{le(A,"width",`${u()}`),N=sa(L,N,{disabled:!0,name:h(),rows:n(),cols:r(),...E},"svelte-s24qr4"),le(L,"width",`${u()}`),le(L,"padding-right","2.75rem")}),Me("keypress",y,f),Me("keypress",b,w),dt(L,()=>e(v),R=>s(v,R)),l(p,A),oe()}it(["click"]);var Su=T(`<div class="secret font-mono svelte-1vixcxf"><!></div> <p class="svelte-1vixcxf">An API Key must be provided in the HTTP <span class="headerCodeSmall svelte-1vixcxf"><code>Authorization</code></span> header in the following format:</p> <p class="svelte-1vixcxf"><span class="headerCode svelte-1vixcxf"><b><code>API-Key YourSecretApiKeyHere</code></b></span></p> <p class="svelte-1vixcxf">You can use the following <code>curl</code> request to test your new Key:</p> <!> <p class="svelte-1vixcxf">If you don't have <code>jq</code> installed and the above fails:</p> <!>`,1),Tu=T(`<div class="container svelte-1vixcxf"><p class="svelte-1vixcxf">You Can generate a new secret for this API Key here.</p> <p class="svelte-1vixcxf">You will only see this secret once after the generation.
        When a new one has been generated, the old secret will be overridden permanently.
        This operation cannot be reverted!</p> <!> <!> <div class="err svelte-1vixcxf"> </div></div>`);function Cu(p,a){ne(a,!0);let t=S(""),n=S(""),r=S(""),h=S("");async function m(){let k=await bl(a.apiKey.name);if(k.ok)s(n,o(await k.text())),s(r,`curl -s -H 'Authorization: API-Key ${e(n)}' ${window.location.origin}/auth/v1/api_keys/${a.apiKey.name}/test`),s(h,`${e(r)} | jq`);else{let g=await k.json();s(t,o(g.message))}}var u=Tu(),E=i(d(u),4),I=We(()=>e(n)?3:1);Se(E,{get level(){return e(I)},width:"130px",$$events:{click:m},children:(k,g)=>{F();var y=Y("GENERATE NEW");l(k,y)},$$slots:{default:!0}});var v=i(E,2);{var w=k=>{var g=Su(),y=ee(g),$=d(y);Wt($,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(n)},set value(b){s(n,o(b))},children:(b,C)=>{F();var L=Y("API KEY");l(b,L)},$$slots:{default:!0}}),c(y);var _=i(y,8);$s(_,{name:"id",rows:3,get value(){return e(h)}});var x=i(_,4);$s(x,{name:"id",rows:3,get value(){return e(r)}}),ue(3,y,()=>we),l(k,g)};M(v,k=>{e(n)&&k(w)})}var f=i(v,2),A=d(f,!0);c(f),c(u),U(()=>V(A,e(t))),l(p,u),oe()}var Au=T('<div class="data svelte-115hohv"> </div>'),Lu=T('<div class="header svelte-115hohv"><div class="data svelte-115hohv"> </div> <!></div>'),ju=T("<div><!></div>"),Ru=T("<div><!></div>"),Du=T("<div><!></div>"),Nu=T("<div><!> <!></div>");function Mu(p,a){ne(a,!0);let t=z(a,"apiKey",31,()=>o({})),n=z(a,"onSave",11,()=>{}),r=S(void 0);const h=["Config","Secret","Delete"];let m=S(o(h[0]));const u=200,E=u/2;function I(){s(r,!1),n()()}vt(p,{get show(){return e(r)},set show(v){s(r,o(v))},header:v=>{var w=Lu(),f=d(w),A=d(f,!0);c(f);var k=i(f,2);{var g=y=>{Ze(y,{text:"Expiry",children:($,_)=>{var x=Au(),b=d(x,!0);U(()=>V(b,pt(t().expires))),c(x),l($,x)},$$slots:{default:!0}})};M(k,y=>{t().expires&&y(g)})}c(w),U(()=>V(A,t().name)),l(v,w)},body:v=>{var w=Nu(),f=d(w);Dt(f,{labels:h,get selected(){return e(m)},set selected(y){s(m,o(y))}});var A=i(f,2);{var k=y=>{var $=ju(),_=d($);_u(_,{get onSave(){return n()},get apiKey(){return t()},set apiKey(x){t(x)}}),c($),ue(1,$,()=>we,()=>({delay:E,duration:u})),ue(2,$,()=>we,()=>({duration:u})),l(y,$)},g=y=>{var $=me(),_=ee($);{var x=C=>{var L=Ru(),N=d(L);Cu(N,{get apiKey(){return t()}}),c(L),ue(1,L,()=>we,()=>({delay:E,duration:u})),ue(2,L,()=>we,()=>({duration:u})),l(C,L)},b=C=>{var L=me(),N=ee(L);{var R=j=>{var W=Du(),D=d(W);Eu(D,{get apiKey(){return t()},onSave:I}),c(W),ue(1,W,()=>we,()=>({delay:E,duration:u})),ue(2,W,()=>we,()=>({duration:u})),l(j,W)};M(N,j=>{e(m)==="Delete"&&j(R)},!0)}l(C,L)};M(_,C=>{e(m)==="Secret"?C(x):C(b,!1)},!0)}l(y,$)};M(A,y=>{e(m)==="Config"?y(k):y(g,!1)})}c(w),l(v,w)},$$slots:{header:!0,body:!0}}),oe()}var zu=T("<div><!></div>"),Pu=T('<div class="svelte-1fzx60h">No Api Keys</div>'),Ou=T(' <div class="content"><div class="top svelte-1fzx60h"><!> <div class="addNew svelte-1fzx60h"><!></div></div> <!> <div id="keys" class="svelte-1fzx60h"><!></div> <!> <div style="height: 20px"></div></div>',1);function qu(p,a){ne(a,!0);let t=S(""),n=S(o([])),r=S(o([])),h=S(o([])),m=S(!1);const u=[{label:"Name",callback:(j,W)=>j.name.includes(W)}];let E=[{label:"Name",callback:(j,W)=>j.name.localeCompare(W.name)}];Le(()=>{I()});async function I(){let j=await fl(),W=await j.json();j.ok?(s(n,o(W.keys)),s(m,!1)):s(t,o(W.message))}F();var v=Ou(),w=ee(v),f=i(w),A=d(f),k=d(A);Lt(k,{get items(){return e(n)},searchOptions:u,orderOptions:E,get resItems(){return e(r)},set resItems(j){s(r,o(j))}});var g=i(k,2),y=d(g);Se(y,{level:3,$$events:{click:()=>s(m,!e(m))},children:(j,W)=>{F();var D=Y("NEW KEY");l(j,D)},$$slots:{default:!0}}),c(g),c(A);var $=i(A,2);{var _=j=>{var W=zu(),D=d(W);gu(D,{onSave:I,get apiKeys(){return e(n)}}),c(W),ue(3,W,()=>we),l(j,W)};M($,j=>{e(m)&&j(_)})}var x=i($,2),b=d(x);{var C=j=>{var W=Pu();l(j,W)},L=j=>{var W=me(),D=ee(W);Ge(D,19,()=>e(h),H=>H.name,(H,P,O)=>{Mu(H,{onSave:I,get apiKey(){return e(h)[e(O)]},set apiKey(G){e(h)[e(O)]=G}})}),l(j,W)};M(b,j=>{e(n).length===0?j(C):j(L,!1)})}c(x);var N=i(x,2);{var R=j=>{Nt(j,{get items(){return e(r)},set items(W){s(r,o(W))},get resItems(){return e(h)},set resItems(W){s(h,o(W))}})};M(N,j=>{e(n).length>0&&j(R)})}F(2),c(f),U(()=>V(w,`${e(t)??""} `)),l(p,v),oe()}var Uu=T('<div class="row svelte-hjwmgw">No events found</div>'),Gu=T('<div class="content"><div class="row svelte-hjwmgw"><!></div> <div class="row filter svelte-hjwmgw"><!> <!></div> <div class="row filterOpts svelte-hjwmgw"><div><!></div> Filter <!> <!></div> <!></div>');function Ku(p,a){ne(a,!0);let t=S(o([])),n=S(o([])),r=S(o(Wa(new Date(new Date().getTime()-3600*1e3)))),h=S(void 0),m=S("Info"),u=S(!1),E=S(o(Ja[0])),I=[{label:"IP",callback:(D,H)=>{var P;return(P=D.ip)==null?void 0:P.includes(H)}},{label:"Content",callback:(D,H)=>{var P,O;return(O=(P=D.text)==null?void 0:P.toLowerCase())==null?void 0:O.includes(H.toLowerCase())}}],v=[{label:"Timestamp",callback:(D,H)=>D.timestamp-H.timestamp},{label:"Level",callback:(D,H)=>D.level.localeCompare(H.level)},{label:"Type",callback:(D,H)=>D.typ.localeCompare(H.typ)}];Cs(()=>{w()});async function w(){let D={from:Ot(e(r)),level:e(m).toLowerCase()};e(h)&&(D.until=Ot(e(h))),e(u)&&(D.typ=e(E));let H=await Kr(D),P=await H.json();H.ok?s(t,o(P)):P.message}var f=Gu(),A=d(f),k=d(A);Lt(k,{get items(){return e(t)},searchOptions:I,orderOptions:v,firstDirReverse:!0,get resItems(){return e(n)},set resItems(D){s(n,o(D))}}),c(A);var g=i(A,2),y=d(g);ve(y,{type:"datetime-local",step:"60",width:"17.5rem",max:"2099-01-01T00:00",get value(){return e(r)},set value(D){s(r,o(D))},children:(D,H)=>{F();var P=Y("FROM");l(D,P)},$$slots:{default:!0}});var $=i(y,2);ve($,{type:"datetime-local",step:"60",width:"17rem",max:"2099-01-01T00:00",get value(){return e(h)},set value(D){s(h,o(D))},children:(D,H)=>{F();var P=Y("UNTIL");l(D,P)},$$slots:{default:!0}}),c(g);var _=i(g,2),x=d(_);le(x,"margin","0 5.5rem 0 .25rem");var b=d(x);Et(b,{options:ha,get value(){return e(m)},set value(D){s(m,o(D))}}),c(x);var C=i(x,2);He(C,{get selected(){return e(u)},set selected(D){s(u,o(D))}});var L=i(C,2);{var N=D=>{Et(D,{options:Ja,get value(){return e(E)},set value(H){s(E,o(H))}})};M(L,D=>{e(u)&&D(N)})}c(_);var R=i(_,2);{var j=D=>{var H=Uu();l(D,H)},W=D=>{var H=me(),P=ee(H);Ge(P,19,()=>e(n),O=>O.id,(O,G,X)=>{ys(O,{collapsed:!1,wide:!0,get event(){return e(n)[e(X)]},set event(q){e(n)[e(X)]=q}})}),l(D,H)};M(R,D=>{e(n).length===0?D(j):D(W,!1)})}c(f),l(p,f),oe()}var Wu=Ye('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"></path></svg>');function Fu(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Wu();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Bu=Ye(`<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0
            0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>`);function Hu(p,a){let t=z(a,"opacity",3,.9),n=z(a,"width",3,24);var r=Bu();ie(r,"stroke-width",2),U(()=>{ie(r,"width",n()),ie(r,"opacity",t())}),l(p,r)}var Yu=T(`<div class="desc svelte-i817w5"><h4 class="svelte-i817w5">ID token claim mappings</h4> <p class="svelte-i817w5">Values from the ID token after a successful upstream login can be mapped automatically.</p> <p class="svelte-i817w5">The <code class="svelte-i817w5">path</code> needs to be given in a regex like syntax. It can resolve to
        single JSON values or resolve to a value in a JSON object or array.</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.</code> marks the start of the JSON object</p> <p class="svelte-i817w5"><code class="svelte-i817w5">*</code> can be used as a wildcard in your path</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles</code> would target <code class="svelte-i817w5">&#123;"roles": "value"&#125;</code></p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles.*</code> can target a value inside an object or array like<br> <code class="svelte-i817w5">&#123;"roles": ["value", "notMyValue"]&#125;</code></p></div>`);function _s(p){var a=Yu();l(p,a)}var Vu=T('<div class="err font-label svelte-w61ts0"> </div>'),Ju=T('<div class="container svelte-w61ts0"><div class="label svelte-w61ts0"><div class="labelInner font-label noselect svelte-w61ts0"><label><!></label></div></div> <textarea></textarea> <!></div>');function Ea(p,a){ne(a,!0);let t=z(a,"rows",3,10),n=z(a,"cols",3,10),r=z(a,"name",19,zt),h=z(a,"disabled",3,!1),m=z(a,"error",3,""),u=z(a,"value",15),E=z(a,"width",3,"32rem"),I=z(a,"fixed",3,!0),v=Ut(a,["$$slots","$$events","$$legacy","rows","cols","name","disabled","error","value","width","fixed","children"]);const w=Xt();async function f(R){await Yt(),u(R.target.value),w("input",u())}function A(){w("focus",!0)}function k(){w("blur",!0)}var g=Ju(),y=d(g),$=d(y),_=d($),x=d(_);bt(x,()=>a.children??wt),c(_),c($),c(y);var b=i(y,2);fa(b);let C;var L=i(b,2);{var N=R=>{var j=Vu(),W=d(j,!0);c(j),U(()=>{le(j,"width",E()),V(W,m())}),ue(7,j,()=>we,()=>({duration:250})),l(R,j)};M(L,R=>{m()&&R(N)})}c(g),U(()=>{le(g,"width",`calc(${E()??""} + 12px)`),le($,"background",h()?"var(--col-gmid)":"var(--col-bg)"),ie(_,"for",r()),C=sa(b,C,{name:r(),disabled:h(),value:u(),rows:t(),cols:n(),...v,oninput:f,onfocus:A,onblur:k},"svelte-w61ts0"),le(b,"resize",I()?"none":""),le(b,"width",E())}),l(p,g),oe()}var Qu=T('<div class="header font-label svelte-1m46su9">ADD NEW AUTHENTICATION PROVIDER</div>'),Zu=T('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),Xu=T('<div class="header svelte-1m46su9">Custom Root CA PEM</div> <div class="ml mb svelte-1m46su9"><!></div> <!>',1),eh=T("<!> <!>",1),th=T("<!> <!>",1),ah=T('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),sh=T(`<!> <!> <!> <!> <!> <div class="header svelte-1m46su9">Use PKCE</div> <div class="ml svelte-1m46su9"><!></div> <div class="desc svelte-1m46su9">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-1m46su9">Client name for the Rauthy login form</div> <!> <div class="desc svelte-1m46su9">Client ID given by the auth provider</div> <!> <div class="desc svelte-1m46su9">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
                        In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-1m46su9"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-1m46su9"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">If your provider issues a claim indicating that the user has used at least 2FA during
                        login, you can specify the mfa claim path.</p></div> <!> <!> <!> <!>`,1),rh=T('<div class="success svelte-1m46su9">Success</div>'),lh=T('<div class="err svelte-1m46su9"> </div>'),ih=T('<div class="container svelte-1m46su9"><div class="header svelte-1m46su9">Type</div> <div class="ml mb svelte-1m46su9"><!></div> <!> <!> <!> <!></div>');function nh(p,a){ne(a,!0);let t=z(a,"idx",31,()=>-1);const n="25rem";let r=S(!1),h=S(!1),m=S(""),u=S(!1),E=S(!1),I=S(void 0),v=S(!1),w=S(o({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),f=S(o({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),A=["OIDC","Auto","Custom","Github","Google"],k=S(o(A[0])),g=S(o({}));const y=Qe().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),authorization_endpoint:he().url().required("Required"),token_endpoint:he().url().required("Required"),userinfo_endpoint:he().url().required("Required"),name:he().trim().matches(ea,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128").required("Required"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Qa,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128").required("Required"),root_pem:he().trim().nullable().matches(pa,"Invalid PEM certificate"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")}),$=Qe().shape({issuer:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),metadata_url:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),root_pem:he().trim().nullable().matches(pa,"Valid PEM certificate")});Le(()=>()=>{s(r,!1),clearTimeout(e(I))});async function _(){if(!await C())return;if(!e(f).use_pkce&&!e(f).client_secret){s(m,"Must at least be a confidential client or use PKCE");return}s(m,""),s(h,!0),e(f).root_pem&&(e(f).danger_allow_insecure=!1,e(f).root_pem=e(f).root_pem.trim()),e(N)?e(f).typ="custom":e(f).typ=e(k).toLowerCase(),e(f).scope=e(f).scope.trim();let D=await Zr(e(f));if(D.ok)s(E,!0);else{let H=await D.json();H.message.includes("InvalidCertificate")?s(m,"Insecure connection not allowed"):s(m,o(H.message))}s(h,!1)}async function x(){if(!await L()){s(m,"Invalid input");return}s(m,""),s(h,!0);let D=await sl(e(w));if(D.ok){const H=await D.json();e(f).issuer=H.issuer,e(f).authorization_endpoint=H.authorization_endpoint,e(f).danger_allow_insecure=H.danger_allow_insecure,e(f).token_endpoint=H.token_endpoint,e(f).userinfo_endpoint=H.userinfo_endpoint,e(f).token_auth_method_basic=H.token_auth_method_basic,e(f).use_pkce=H.use_pkce,e(f).client_secret_basic=H.client_secret_basic,e(f).client_secret_post=!H.client_secret_basic&&H.client_secret_post,e(f).scope=H.scope,e(f).root_pem=H.root_pem,s(u,!0)}else{let H=await D.json();H.message.includes("InvalidCertificate")?s(m,"Insecure connection not allowed"):s(m,o(H.message))}s(h,!1)}function b(){s(w,o({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),s(f,o({enabled:!0,issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),s(u,!1),s(v,!1)}async function C(){s(g,o({}));try{return await y.validate(e(f),{abortEarly:!1}),e(f).client_secret&&!(e(f).client_secret_basic||e(f).client_secret_post)?(s(m,"You have given a client secret, but no client auth method is active"),!1):(s(m,"Invalid input"),!0)}catch(D){return s(g,o(Je(D))),D="Invalid input",!1}}async function L(){s(g,o({}));try{return await $.validate(e(w),{abortEarly:!1}),!e(w).issuer&&!e(w).metadata_url?(e(g).issuer="Required",e(g).metadata_url=e(g).issuer,!1):!0}catch(D){return s(g,o(Je(D))),!1}}let N=We(()=>e(k)===A[1]),R=We(()=>e(k)===A[2]),j=We(()=>e(k)===A[0]),W=We(()=>!e(N)&&!e(R)&&!e(j));Te(()=>{if(e(k))switch(s(u,!1),s(g,o({})),s(w,o({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),e(k)){case"Github":s(f,o({enabled:!0,issuer:"github.com",danger_allow_insecure:!1,authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",token_auth_method_basic:!1,userinfo_endpoint:"https://api.github.com/user",use_pkce:!1,name:"Github",client_id:"",client_secret:"",scope:"user:email",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:"$.two_factor_authentication",mfa_claim_value:"true"}));break;case"Google":s(w,o({issuer:"accounts.google.com",metadata_url:null,danger_allow_insecure:!1,root_pem:null})),x();break;default:s(f,o({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null}))}}),Te(()=>{e(E)&&s(I,o(setTimeout(()=>{a.onSave(),s(E,!1),s(r,!1),b()},1500)))}),vt(p,{get idx(){return t()},set idx(D){t(D)},get show(){return e(r)},set show(D){s(r,o(D))},header:D=>{var H=Qu();l(D,H)},body:D=>{var H=ih(),P=i(d(H),2),O=d(P);Et(O,{options:A,get value(){return e(k)},set value(_e){s(k,o(_e))}}),c(P);var G=i(P,2);{var X=_e=>{var pe=Xu(),Ne=i(ee(pe),2),ge=d(Ne);He(ge,{get selected(){return e(v)},set selected(ze){s(v,o(ze))}}),c(Ne);var de=i(Ne,2);{var ye=ze=>{Ea(ze,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(g).root_pem},get value(){return e(w).root_pem},set value(Ce){e(w).root_pem=Ce},children:(Ce,xe)=>{F();var Re=Y("Root Certificate in PEM format");l(Ce,Re)},$$slots:{default:!0}})},be=ze=>{var Ce=Zu(),xe=i(ee(Ce),2),Re=d(xe);He(Re,{get selected(){return e(w).danger_allow_insecure},set selected(J){e(w).danger_allow_insecure=J}}),c(xe),l(ze,Ce)};M(de,ze=>{e(v)?ze(ye):ze(be,!1)})}l(_e,pe)};M(G,_e=>{e(u)||_e(X)})}var q=i(G,2);{var B=_e=>{var pe=eh(),Ne=ee(pe);ve(Ne,{type:"url",name:"issuer",placeholder:"Issuer URL",width:n,get value(){return e(w).issuer},set value(de){e(w).issuer=de},get error(){return e(g).issuer},set error(de){e(g).issuer=de},$$events:{input:L,enter:x},children:(de,ye)=>{F();var be=Y("ISSUER URL");l(de,be)},$$slots:{default:!0}});var ge=i(Ne,2);Se(ge,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(de){s(h,o(de))},$$events:{click:x},children:(de,ye)=>{F();var be=Y("LOOKUP");l(de,be)},$$slots:{default:!0}}),l(_e,pe)},K=_e=>{var pe=me(),Ne=ee(pe);{var ge=ye=>{var be=th(),ze=ee(be);ve(ze,{type:"url",name:"metadata",placeholder:".../.well-known/openid-configuration",width:n,get value(){return e(w).metadata_url},set value(xe){e(w).metadata_url=xe},get error(){return e(g).metadata_url},set error(xe){e(g).metadata_url=xe},$$events:{input:L,enter:x},children:(xe,Re)=>{F();var J=Y("METADATA URL");l(xe,J)},$$slots:{default:!0}});var Ce=i(ze,2);Se(Ce,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(xe){s(h,o(xe))},$$events:{click:x},children:(xe,Re)=>{F();var J=Y("LOOKUP");l(xe,J)},$$slots:{default:!0}}),l(ye,be)},de=ye=>{var be=me(),ze=ee(be);{var Ce=xe=>{var Re=sh(),J=ee(Re);{var Ie=ae=>{Ea(ae,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(g).root_pem},get disabled(){return e(u)},get value(){return e(f).root_pem},set value(Ke){e(f).root_pem=Ke},children:(Ke,Oe)=>{F();var qt=Y("Root Certificate in PEM format");l(Ke,qt)},$$slots:{default:!0}})},fe=ae=>{var Ke=ah(),Oe=i(ee(Ke),2),qt=d(Oe);{var Zt=Mt=>{aa(Mt,{get check(){return e(f).danger_allow_insecure}})},Bt=Mt=>{He(Mt,{get selected(){return e(f).danger_allow_insecure},set selected(Ht){e(f).danger_allow_insecure=Ht}})};M(qt,Mt=>{e(u)?Mt(Zt):Mt(Bt,!1)})}c(Oe),l(ae,Ke)};M(J,ae=>{e(v)?ae(Ie):ae(fe,!1)})}var qe=i(J,2);ve(qe,{type:"url",name:"issuer",placeholder:"Issuer URL",width:n,get disabled(){return e(u)},get value(){return e(f).issuer},set value(ae){e(f).issuer=ae},get error(){return e(g).issuer},set error(ae){e(g).issuer=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Oe=Y("ISSUER URL");l(ae,Oe)},$$slots:{default:!0}});var Ve=i(qe,2);ve(Ve,{type:"url",name:"auth_endpoint",placeholder:"Authorization Endpoint",width:n,get disabled(){return e(u)},get value(){return e(f).authorization_endpoint},set value(ae){e(f).authorization_endpoint=ae},get error(){return e(g).authorization_endpoint},set error(ae){e(g).authorization_endpoint=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Oe=Y("AUTHORIZATION ENDPOINT");l(ae,Oe)},$$slots:{default:!0}});var rt=i(Ve,2);ve(rt,{type:"url",name:"token_endpoint",placeholder:"Token Endpoint",width:n,get disabled(){return e(u)},get value(){return e(f).token_endpoint},set value(ae){e(f).token_endpoint=ae},get error(){return e(g).token_endpoint},set error(ae){e(g).token_endpoint=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Oe=Y("TOKEN ENDPOINT");l(ae,Oe)},$$slots:{default:!0}});var ct=i(rt,2);ve(ct,{type:"url",name:"userinfo_endpoint",placeholder:"Userinfo Endpoint",width:n,get disabled(){return e(u)},get value(){return e(f).userinfo_endpoint},set value(ae){e(f).userinfo_endpoint=ae},get error(){return e(g).userinfo_endpoint},set error(ae){e(g).userinfo_endpoint=ae},$$events:{input:L},children:(ae,Ke)=>{F();var Oe=Y("USERINFO ENDPOINT");l(ae,Oe)},$$slots:{default:!0}});var Ue=i(ct,4),Fe=d(Ue);{var ot=ae=>{aa(ae,{get check(){return e(f).use_pkce}})},It=ae=>{He(ae,{get selected(){return e(f).use_pkce},set selected(Ke){e(f).use_pkce=Ke}})};M(Fe,ae=>{e(u)?ae(ot):ae(It,!1)})}c(Ue);var kt=i(Ue,4);ve(kt,{name:"scope",placeholder:"openid profile email",width:n,get value(){return e(f).scope},set value(ae){e(f).scope=ae},get error(){return e(g).scope},set error(ae){e(g).scope=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("SCOPE");l(ae,Oe)},$$slots:{default:!0}});var Xe=i(kt,4);ve(Xe,{name:"client_name",placeholder:"Client Name",width:n,get value(){return e(f).name},set value(ae){e(f).name=ae},get error(){return e(g).name},set error(ae){e(g).name=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("CLIENT NAME");l(ae,Oe)},$$slots:{default:!0}});var et=i(Xe,4);ve(et,{name:"client_id",autocomplete:"off",placeholder:"Client ID",width:n,get value(){return e(f).client_id},set value(ae){e(f).client_id=ae},get error(){return e(g).client_id},set error(ae){e(g).client_id=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("CLIENT ID");l(ae,Oe)},$$slots:{default:!0}});var gt=i(et,4);Wt(gt,{name:"client_secret",get error(){return e(g).client_secret},autocomplete:"off",placeholder:"Client Secret",width:n,get value(){return e(f).client_secret},set value(ae){e(f).client_secret=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("CLIENT SECRET");l(ae,Oe)},$$slots:{default:!0}});var ht=i(gt,4),Ct=i(d(ht),2);He(Ct,{get selected(){return e(f).client_secret_basic},set selected(ae){e(f).client_secret_basic=ae}}),c(ht);var at=i(ht,2),st=i(d(at),2);He(st,{get selected(){return e(f).client_secret_post},set selected(ae){e(f).client_secret_post=ae}}),c(at);var se=i(at,2);_s(se);var Ae=i(se,4);ve(Ae,{name:"admin_claim_path",placeholder:"$.roles.*",width:n,get value(){return e(f).admin_claim_path},set value(ae){e(f).admin_claim_path=ae},get error(){return e(g).admin_claim_path},set error(ae){e(g).admin_claim_path=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("ADMIN CLAIM PATH");l(ae,Oe)},$$slots:{default:!0}});var Pe=i(Ae,2);ve(Pe,{name:"admin_claim_value",placeholder:"rauthy_admin",width:n,get value(){return e(f).admin_claim_value},set value(ae){e(f).admin_claim_value=ae},get error(){return e(g).admin_claim_value},set error(ae){e(g).admin_claim_value=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("ADMIN CLAIM VALUE");l(ae,Oe)},$$slots:{default:!0}});var Q=i(Pe,4);ve(Q,{name:"mfa_claim_path",placeholder:"$.amr.*",width:n,get value(){return e(f).mfa_claim_path},set value(ae){e(f).mfa_claim_path=ae},get error(){return e(g).mfa_claim_path},set error(ae){e(g).mfa_claim_path=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("MFA CLAIM PATH");l(ae,Oe)},$$slots:{default:!0}});var Ee=i(Q,2);ve(Ee,{name:"mfa_claim_value",placeholder:"mfa",width:n,get value(){return e(f).mfa_claim_value},set value(ae){e(f).mfa_claim_value=ae},get error(){return e(g).mfa_claim_value},set error(ae){e(g).mfa_claim_value=ae},$$events:{input:C},children:(ae,Ke)=>{F();var Oe=Y("MFA CLAIM VALUE");l(ae,Oe)},$$slots:{default:!0}});var je=i(Ee,2);Se(je,{level:1,width:"6rem",get isLoading(){return e(h)},set isLoading(ae){s(h,o(ae))},$$events:{click:_},children:(ae,Ke)=>{F();var Oe=Y("SAVE");l(ae,Oe)},$$slots:{default:!0}});var At=i(je,2);Se(At,{level:4,width:"6rem",get isLoading(){return e(h)},set isLoading(ae){s(h,o(ae))},$$events:{click:b},children:(ae,Ke)=>{F();var Oe=Y("RESET");l(ae,Oe)},$$slots:{default:!0}}),l(xe,Re)};M(ze,xe=>{(e(W)||e(R)||e(u))&&xe(Ce)},!0)}l(ye,be)};M(Ne,ye=>{e(N)&&!e(u)?ye(ge):ye(de,!1)},!0)}l(_e,pe)};M(q,_e=>{e(j)&&!e(u)?_e(B):_e(K,!1)})}var Z=i(q,2);{var re=_e=>{var pe=rh();l(_e,pe)};M(Z,_e=>{e(E)&&_e(re)})}var ce=i(Z,2);{var $e=_e=>{var pe=lh(),Ne=d(pe,!0);c(pe),U(()=>V(Ne,e(m))),l(_e,pe)};M(ce,_e=>{e(m)&&_e($e)})}c(H),l(D,H)},$$slots:{header:!0,body:!0}}),oe()}var oh=T('<img alt="No Logo Available">');function vh(p,a){ne(a,!0);var t=oh();U(()=>ie(t,"src",`/auth/v1/providers/${a.providerId}/img?${zt(6)}`)),ie(t,"width",20),ie(t,"height",20),l(p,t),oe()}var ch=T('<div class="header svelte-19hes5">Allow insecure TLS certificates</div> <div class="ml mb svelte-19hes5"><!></div>',1),dh=T('<div class="success svelte-19hes5">Success</div>'),uh=T('<div class="mainErr err svelte-19hes5"> </div>'),hh=T("<!> <!> <!>",1),ph=T(`<div class="container svelte-19hes5"><div class="unit svelte-19hes5"><div class="label font-label svelte-19hes5">ID</div> <div class="value font-mono svelte-19hes5"> </div></div> <div class="separator"></div> <div class="header svelte-19hes5">Enabled</div> <div class="ml mb svelte-19hes5"><!></div> <div class="header svelte-19hes5">Custom Root CA PEM</div> <div class="ml mb svelte-19hes5"><!></div> <!> <!> <!> <!> <!> <div class="header svelte-19hes5">Use PKCE</div> <div class="ml mb svelte-19hes5"><!></div> <div class="desc svelte-19hes5">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-19hes5">Client name for the Rauthy login form</div> <!> <div class="desc svelte-19hes5">Client ID given by the auth provider</div> <!> <div class="desc svelte-19hes5">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
            In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-19hes5"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-19hes5"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">If your provider issues a claim indicating that the user has used at least 2FA during
            login, you can specify the mfa claim path.</p></div> <!> <!> <div class="logo svelte-19hes5"><!> <!></div> <!></div>`);function mh(p,a){ne(a,!0);let t=z(a,"provider",31,()=>o({}));const n="25rem";let r=S(!1),h=S(""),m=S(!1),u=S(void 0),E=S(o(t().root_pem)),I=S(void 0);Le(()=>()=>clearTimeout(e(u)));let v=S(o({}));const w=Qe().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),authorization_endpoint:he().url(),token_endpoint:he().url(),userinfo_endpoint:he().url(),name:he().trim().matches(ea,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Qa,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")});async function f(){if(e(E)||t(t().root_pem=void 0,!0),!await k())return;if(!t().use_pkce&&!t().client_secret){s(h,"Must at least be a confidential client or use PKCE");return}s(h,""),s(r,!0),t().root_pem?(t(t().danger_allow_insecure=!1,!0),t(t().root_pem=t().root_pem.trim(),!0)):t(t().root_pem=void 0,!0);let J=await Xr(t().id,t());if(J.ok)s(m,!0);else{let Ie=await J.json();s(h,o(Ie.message))}s(r,!1)}async function A(J){s(r,!0);let Ie=await al(t().id,J);if(!Ie.ok){let fe=await Ie.json();console.error(fe.message)}s(r,!1)}async function k(){s(v,o({}));try{return await w.validate(t(),{abortEarly:!1}),t().client_secret&&!(t().client_secret_basic||t().client_secret_post)?(s(h,"You have given a client secret, but no client auth method is active"),!1):(t().root_pem&&t().root_pem.length>0?pa.test(t().root_pem.trim())||(e(v).root_pem="Invalid PEM certificate"):s(h,"Invalid input"),!0)}catch(J){return s(v,o(Je(J))),!1}}Te(()=>{e(m)&&s(u,o(setTimeout(()=>{s(m,!1),a.onSave()},2e3)))}),Te(()=>{t().scope&&t(t().scope=t().scope.replaceAll("+"," "),!0)}),Te(()=>{e(I)&&A(e(I))});var g=ph(),y=d(g),$=i(d(y),2),_=d($,!0);c($),c(y);var x=i(y,6),b=d(x);He(b,{get selected(){return t().enabled},set selected(J){t(t().enabled=J,!0)}}),c(x);var C=i(x,4),L=d(C);He(L,{get selected(){return e(E)},set selected(J){s(E,o(J))}}),c(C);var N=i(C,2);{var R=J=>{Ea(J,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----`,get error(){return e(v).root_pem},get value(){return t().root_pem},set value(Ie){t(t().root_pem=Ie,!0)},children:(Ie,fe)=>{F();var qe=Y("Root Certificate in PEM format");l(Ie,qe)},$$slots:{default:!0}})},j=J=>{var Ie=ch(),fe=i(ee(Ie),2),qe=d(fe);He(qe,{get selected(){return t().danger_allow_insecure},set selected(Ve){t(t().danger_allow_insecure=Ve,!0)}}),c(fe),l(J,Ie)};M(N,J=>{e(E)?J(R):J(j,!1)})}var W=i(N,2);ve(W,{autocomplete:"off",placeholder:"Issuer URL",width:n,get value(){return t().issuer},set value(J){t(t().issuer=J,!0)},get error(){return e(v).issuer},set error(J){e(v).issuer=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("ISSUER URL");l(J,fe)},$$slots:{default:!0}});var D=i(W,2);ve(D,{autocomplete:"off",placeholder:"Authorization Endpoint",width:n,get value(){return t().authorization_endpoint},set value(J){t(t().authorization_endpoint=J,!0)},get error(){return e(v).authorization_endpoint},set error(J){e(v).authorization_endpoint=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("AUTHORIZATION ENDPOINT");l(J,fe)},$$slots:{default:!0}});var H=i(D,2);ve(H,{autocomplete:"off",placeholder:"Token Endpoint",width:n,get value(){return t().token_endpoint},set value(J){t(t().token_endpoint=J,!0)},get error(){return e(v).token_endpoint},set error(J){e(v).token_endpoint=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("TOKEN ENDPOINT");l(J,fe)},$$slots:{default:!0}});var P=i(H,2);ve(P,{autocomplete:"off",placeholder:"Userinfo Endpoint",width:n,get value(){return t().userinfo_endpoint},set value(J){t(t().userinfo_endpoint=J,!0)},get error(){return e(v).userinfo_endpoint},set error(J){e(v).userinfo_endpoint=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("USERINFO ENDPOINT");l(J,fe)},$$slots:{default:!0}});var O=i(P,4),G=d(O);He(G,{get selected(){return t().use_pkce},set selected(J){t(t().use_pkce=J,!0)}}),c(O);var X=i(O,4);ve(X,{autocomplete:"off",placeholder:"openid profile email",width:n,get value(){return t().scope},set value(J){t(t().scope=J,!0)},get error(){return e(v).scope},set error(J){e(v).scope=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("SCOPE");l(J,fe)},$$slots:{default:!0}});var q=i(X,4);ve(q,{autocomplete:"off",placeholder:"Client Name",width:n,get value(){return t().name},set value(J){t(t().name=J,!0)},get error(){return e(v).name},set error(J){e(v).name=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("CLIENT NAME");l(J,fe)},$$slots:{default:!0}});var B=i(q,4);ve(B,{autocomplete:"off",placeholder:"Client ID",width:n,get value(){return t().client_id},set value(J){t(t().client_id=J,!0)},get error(){return e(v).client_id},set error(J){e(v).client_id=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("CLIENT ID");l(J,fe)},$$slots:{default:!0}});var K=i(B,4);Wt(K,{get error(){return e(v).client_secret},autocomplete:"off",placeholder:"Client Secret",width:n,get value(){return t().client_secret},set value(J){t(t().client_secret=J,!0)},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("CLIENT SECRET");l(J,fe)},$$slots:{default:!0}});var Z=i(K,4),re=i(d(Z),2);He(re,{get selected(){return t().client_secret_basic},set selected(J){t(t().client_secret_basic=J,!0)}}),c(Z);var ce=i(Z,2),$e=i(d(ce),2);He($e,{get selected(){return t().client_secret_post},set selected(J){t(t().client_secret_post=J,!0)}}),c(ce);var _e=i(ce,2);_s(_e);var pe=i(_e,4);ve(pe,{autocomplete:"off",placeholder:"$.roles.*",width:n,get value(){return t().admin_claim_path},set value(J){t(t().admin_claim_path=J,!0)},get error(){return e(v).admin_claim_path},set error(J){e(v).admin_claim_path=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("ADMIN CLAIM PATH");l(J,fe)},$$slots:{default:!0}});var Ne=i(pe,2);ve(Ne,{autocomplete:"off",placeholder:"rauthy_admin",width:n,get value(){return t().admin_claim_value},set value(J){t(t().admin_claim_value=J,!0)},get error(){return e(v).admin_claim_value},set error(J){e(v).admin_claim_value=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("ADMIN CLAIM VALUE");l(J,fe)},$$slots:{default:!0}});var ge=i(Ne,4);ve(ge,{autocomplete:"off",placeholder:"$.amr.*",width:n,get value(){return t().mfa_claim_path},set value(J){t(t().mfa_claim_path=J,!0)},get error(){return e(v).mfa_claim_path},set error(J){e(v).mfa_claim_path=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("MFA CLAIM PATH");l(J,fe)},$$slots:{default:!0}});var de=i(ge,2);ve(de,{autocomplete:"off",placeholder:"mfa",width:n,get value(){return t().mfa_claim_value},set value(J){t(t().mfa_claim_value=J,!0)},get error(){return e(v).mfa_claim_value},set error(J){e(v).mfa_claim_value=J},$$events:{input:k},children:(J,Ie)=>{F();var fe=Y("MFA CLAIM VALUE");l(J,fe)},$$slots:{default:!0}});var ye=i(de,2),be=d(ye);fs(be,{get image(){return e(I)},set image(J){s(I,o(J))}});var ze=i(be,2);{var Ce=J=>{vh(J,{get providerId(){return t().id}})};M(ze,J=>{e(r)||J(Ce)})}c(ye);var xe=i(ye,2);{var Re=J=>{var Ie=hh(),fe=ee(Ie);Se(fe,{level:1,width:"4rem",get isLoading(){return e(r)},set isLoading(Ue){s(r,o(Ue))},$$events:{click:f},children:(Ue,Fe)=>{F();var ot=Y("SAVE");l(Ue,ot)},$$slots:{default:!0}});var qe=i(fe,2);{var Ve=Ue=>{var Fe=dh();l(Ue,Fe)};M(qe,Ue=>{e(m)&&Ue(Ve)})}var rt=i(qe,2);{var ct=Ue=>{var Fe=uh(),ot=d(Fe,!0);c(Fe),U(()=>V(ot,e(h))),l(Ue,Fe)};M(rt,Ue=>{e(h)&&Ue(ct)})}l(J,Ie)};M(xe,J=>{J(Re)})}c(g),U(()=>V(_,t().id)),l(p,g),oe()}var fh=T("<p> </p>"),gh=T(`<div class="label svelte-1tncxap"><p>This provider is in use by active users.</p> <p>You can force delete it, but users without a local password or passkey
                will not be able to log in anymore.</p> <details><summary>Linked Users</summary> <!></details></div> <div class="label svelte-1tncxap"><p>Are you sure you want to delete this provider?</p> <div class="forceDelete svelte-1tncxap">FORCE DELETE <!></div></div> <!>`,1),wh=T('<div class="label svelte-1tncxap">Are you sure, you want to delete this provider?</div> <!>',1),yh=T('<div class="err svelte-1tncxap"> </div>'),bh=T('<div class="container svelte-1tncxap"><!> <!></div>');function $h(p,a){ne(a,!0);let t=z(a,"provider",19,()=>({})),n=S(!0),r=S(""),h=S(!1),m=S(o([]));Le(async()=>{let k=await tl(t().id),g=await k.json();k.status===406?s(m,o(g)):s(r,o(g.message)),s(n,!1)});async function u(){s(r,""),s(n,!0);let k=await el(t().id);if(k.ok)a.onSave();else{let g=await k.json();s(r,o(g.message))}s(n,!1)}var E=bh(),I=d(E);{var v=k=>{var g=gh(),y=ee(g),$=i(d(y),4),_=i(d($),2);Ge(_,17,()=>e(m),R=>R.id,(R,j)=>{var W=fh(),D=d(W);c(W),U(()=>V(D,`${e(j).id??""} ${e(j).email??""}`)),l(R,W)}),c($),c(y);var x=i(y,2),b=i(d(x),2),C=i(d(b));He(C,{get selected(){return e(h)},set selected(R){s(h,o(R))}}),c(b),c(x);var L=i(x,2);{var N=R=>{Se(R,{level:1,get isLoading(){return e(n)},set isLoading(j){s(n,o(j))},$$events:{click:u},children:(j,W)=>{F();var D=Y("DELETE");l(j,D)},$$slots:{default:!0}})};M(L,R=>{e(h)&&R(N)})}l(k,g)},w=k=>{var g=wh(),y=i(ee(g),2);Se(y,{level:1,get isLoading(){return e(n)},set isLoading($){s(n,o($))},$$events:{click:u},children:($,_)=>{F();var x=Y("DELETE");l($,x)},$$slots:{default:!0}}),l(k,g)};M(I,k=>{e(m).length>0?k(v):k(w,!1)})}var f=i(I,2);{var A=k=>{var g=yh(),y=d(g,!0);c(g),U(()=>V(y,e(r))),l(k,g)};M(f,k=>{e(r)&&k(A)})}c(E),l(p,E),oe()}var _h=T('<div class="data font-mono svelte-115hohv"> </div>'),kh=T('<div class="data svelte-115hohv"> </div>'),xh=T('<div class="header svelte-115hohv"><!> <!></div>'),Eh=T("<div><!></div>"),Ih=T("<div><!></div>"),Sh=T("<div><!> <!></div>");function Th(p,a){ne(a,!0);let t=z(a,"provider",31,()=>o({})),n=z(a,"onSave",15),r=S(void 0);const h=["Config","Delete"];let m=S(o(h[0]));const u=200,E=u/2;vt(p,{get show(){return e(r)},set show(I){s(r,o(I))},header:I=>{var v=xh(),w=d(v);Ze(w,{text:"Provider ID",children:(A,k)=>{var g=_h(),y=d(g,!0);c(g),U(()=>V(y,t().id)),l(A,g)},$$slots:{default:!0}});var f=i(w,2);Ze(f,{text:"Provider Name",children:(A,k)=>{var g=kh(),y=d(g,!0);c(g),U(()=>V(y,t().name)),l(A,g)},$$slots:{default:!0}}),c(v),l(I,v)},body:I=>{var v=Sh(),w=d(v);Dt(w,{labels:h,get selected(){return e(m)},set selected(g){s(m,o(g))}});var f=i(w,2);{var A=g=>{var y=Eh(),$=d(y);mh($,{get provider(){return t()},set provider(_){t(_)},get onSave(){return n()},set onSave(_){n(_)}}),c(y),ue(1,y,()=>we,()=>({delay:E,duration:u})),ue(2,y,()=>we,()=>({duration:u})),l(g,y)},k=g=>{var y=me(),$=ee(y);{var _=x=>{var b=Ih(),C=d(b);$h(C,{get provider(){return t()},set provider(L){t(L)},get onSave(){return n()},set onSave(L){n(L)}}),c(b),ue(1,b,()=>we,()=>({delay:E,duration:u})),ue(2,b,()=>we,()=>({duration:u})),l(x,b)};M($,x=>{e(m)==="Delete"&&x(_)},!0)}l(g,y)};M(f,g=>{e(m)==="Config"?g(A):g(k,!1)})}c(v),l(I,v)},$$slots:{header:!0,body:!0}}),oe()}var Ch=T('<div class="svelte-4dnryh"><!></div>'),Ah=T(' <div class="content"><!> <div id="federation" class="svelte-4dnryh"></div> <div style="height: 20px"></div></div>',1);function Lh(p,a){ne(a,!0);let t=S(""),n=S(o([]));Le(()=>{r()});async function r(){let w=await Qr(),f=await w.json();w.ok?s(n,o([...f])):s(t,o(f.message))}function h(){r()}F();var m=Ah(),u=ee(m),E=i(u),I=d(E);nh(I,{onSave:h});var v=i(I,2);Ge(v,23,()=>e(n),w=>w.id,(w,f,A)=>{var k=Ch(),g=d(k);Th(g,{onSave:h,get provider(){return e(n)[e(A)]},set provider(y){e(n)[e(A)]=y}}),c(k),l(w,k)}),c(v),F(2),c(E),U(()=>V(u,`${e(t)??""} `)),l(p,m),oe()}var jh=T("<div><div><!></div></div>"),Rh=T("<div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>"),Dh=T('<main class="svelte-1a52j8o"><!> <div class="inner svelte-1a52j8o"><!> <!></div></main>');function Nh(p,a){ne(a,!0);let t=z(a,"selected",15,"Users"),n=S("Rauthy Admin"),r=S(!0),h=S(!0),m=S(!1),u=S(void 0);Te(()=>{e(u)&&(s(r,e(u)>1050),s(h,e(u)<1050),s(m,e(u)>1450))}),Te(()=>{if(t())switch(t()){case"Users":{window.history.pushState("Users","","/auth/v1/admin/users"),s(n,"Users");break}case"Attributes":{window.history.pushState("Attributes","","/auth/v1/admin/attributes"),s(n,"Attributes");break}case"Clients":{window.history.pushState("Clients","","/auth/v1/admin/clients"),s(n,"Clients");break}case"Roles":{window.history.pushState("Roles","","/auth/v1/admin/roles"),s(n,"Roles");break}case"Groups":{window.history.pushState("Groups","","/auth/v1/admin/groups"),s(n,"Groups");break}case"Scopes":{window.history.pushState("Scopes","","/auth/v1/admin/scopes"),s(n,"Scopes");break}case"Sessions":{window.history.pushState("Sessions","","/auth/v1/admin/sessions"),s(n,"Sessions");break}case"Events":{window.history.pushState("Sessions","","/auth/v1/admin/events"),s(n,"Events");break}case"Blacklist":{window.history.pushState("Blacklist","","/auth/v1/admin/blacklist"),s(n,"Blacklist");break}case"ApiKeys":{window.history.pushState("ApiKeys","","/auth/v1/admin/api_keys"),s(n,"ApiKeys");break}case"Providers":{window.history.pushState("Providers","","/auth/v1/admin/providers"),s(n,"Providers");break}case"Config":{window.history.pushState("Config","","/auth/v1/admin/config"),s(n,"Config");break}case"Docs":{window.history.pushState("Docs","","/auth/v1/admin/docs"),s(n,"Docs");break}case"Logout":Qs();break}}),Le(()=>(window.addEventListener("popstate",I),E(window.innerWidth),()=>window.removeEventListener("popstate",I)));function E(_){s(r,_>1050),s(h,_<1050),s(m,_>1450)}function I(_){t(_.state)}var v=Dh();za(_=>{U(()=>Ma.title=e(n))});var w=d(v);Ir(w,{widthExpanded:150,widthCollapsed:70,get selected(){return t()},set selected(_){t(_)},get isExpanded(){return e(r)},set isExpanded(_){s(r,o(_))},logo:_=>{var x=jh(),b=d(x),C=d(b);Sd(C),c(b),c(x),U(()=>{le(b,"width",e(r)?"120px":"55px"),le(b,"margin-top",e(r)?"32px":"40px"),le(b,"margin-bottom",e(r)?"13px":"22px")}),l(_,x)},entries:_=>{var x=Rh(),b=d(x);ft(b,{label:"Users",children:(B,K)=>{pd(B,{})},$$slots:{default:!0}});var C=i(b,2);ft(C,{label:"Attributes",children:(B,K)=>{bd(B,{})},$$slots:{default:!0}});var L=i(C,2);ft(L,{label:"Clients",children:(B,K)=>{fd(B,{})},$$slots:{default:!0}});var N=i(L,2);ft(N,{label:"Roles",children:(B,K)=>{ws(B,{})},$$slots:{default:!0}});var R=i(N,2);ft(R,{label:"Groups",children:(B,K)=>{wd(B,{})},$$slots:{default:!0}});var j=i(R,2);ft(j,{label:"Scopes",children:(B,K)=>{Ed(B,{})},$$slots:{default:!0}});var W=i(j,2);ft(W,{label:"Sessions",children:(B,K)=>{ws(B,{})},$$slots:{default:!0}});var D=i(W,2);ft(D,{label:"Events",children:(B,K)=>{Fu(B,{})},$$slots:{default:!0}});var H=i(D,2);ft(H,{label:"Blacklist",children:(B,K)=>{ta(B,{width:24,color:"currentColor"})},$$slots:{default:!0}});var P=i(H,2);ft(P,{label:"ApiKeys",children:(B,K)=>{cu(B,{})},$$slots:{default:!0}});var O=i(P,2);ft(O,{label:"Providers",children:(B,K)=>{Hu(B,{})},$$slots:{default:!0}});var G=i(O,2);ft(G,{label:"Config",children:(B,K)=>{ud(B,{})},$$slots:{default:!0}});var X=i(G,2);ft(X,{label:"Docs",children:(B,K)=>{Ld(B,{})},$$slots:{default:!0}});var q=i(X,2);ft(q,{label:"Logout",children:(B,K)=>{kd(B,{})},$$slots:{default:!0}}),c(x),l(_,x)},$$slots:{logo:!0,entries:!0}});var f=i(w,2),A=d(f);{var k=_=>{_t(_,{get eventsWide(){return e(m)},set eventsWide(x){s(m,o(x))},get eventsCollapsed(){return e(h)},set eventsCollapsed(x){s(h,o(x))},children:(x,b)=>{Nn(x,{})},$$slots:{default:!0}})},g=_=>{var x=me(),b=ee(x);{var C=N=>{_t(N,{get eventsWide(){return e(m)},set eventsWide(R){s(m,o(R))},get eventsCollapsed(){return e(h)},set eventsCollapsed(R){s(h,o(R))},children:(R,j)=>{zc(R,{})},$$slots:{default:!0}})},L=N=>{var R=me(),j=ee(R);{var W=H=>{_t(H,{get eventsWide(){return e(m)},set eventsWide(P){s(m,o(P))},get eventsCollapsed(){return e(h)},set eventsCollapsed(P){s(h,o(P))},children:(P,O)=>{nc(P,{})},$$slots:{default:!0}})},D=H=>{var P=me(),O=ee(P);{var G=q=>{_t(q,{get eventsWide(){return e(m)},set eventsWide(B){s(m,o(B))},get eventsCollapsed(){return e(h)},set eventsCollapsed(B){s(h,o(B))},children:(B,K)=>{io(B,{})},$$slots:{default:!0}})},X=q=>{var B=me(),K=ee(B);{var Z=ce=>{_t(ce,{get eventsWide(){return e(m)},set eventsWide($e){s(m,o($e))},get eventsCollapsed(){return e(h)},set eventsCollapsed($e){s(h,o($e))},children:($e,_e)=>{Co($e,{})},$$slots:{default:!0}})},re=ce=>{var $e=me(),_e=ee($e);{var pe=ge=>{_t(ge,{get eventsWide(){return e(m)},set eventsWide(de){s(m,o(de))},get eventsCollapsed(){return e(h)},set eventsCollapsed(de){s(h,o(de))},children:(de,ye)=>{av(de,{})},$$slots:{default:!0}})},Ne=ge=>{var de=me(),ye=ee(de);{var be=Ce=>{_t(Ce,{get eventsWide(){return e(m)},set eventsWide(xe){s(m,o(xe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(xe){s(h,o(xe))},children:(xe,Re)=>{gc(xe,{})},$$slots:{default:!0}})},ze=Ce=>{var xe=me(),Re=ee(xe);{var J=fe=>{_t(fe,{get eventsWide(){return e(m)},set eventsWide(qe){s(m,o(qe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(qe){s(h,o(qe))},children:(qe,Ve)=>{Ku(qe,{})},$$slots:{default:!0}})},Ie=fe=>{var qe=me(),Ve=ee(qe);{var rt=Ue=>{_t(Ue,{get eventsWide(){return e(m)},set eventsWide(Fe){s(m,o(Fe))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Fe){s(h,o(Fe))},children:(Fe,ot)=>{ou(Fe,{})},$$slots:{default:!0}})},ct=Ue=>{var Fe=me(),ot=ee(Fe);{var It=Xe=>{_t(Xe,{get eventsWide(){return e(m)},set eventsWide(et){s(m,o(et))},get eventsCollapsed(){return e(h)},set eventsCollapsed(et){s(h,o(et))},children:(et,gt)=>{qu(et,{})},$$slots:{default:!0}})},kt=Xe=>{var et=me(),gt=ee(et);{var ht=at=>{_t(at,{get eventsWide(){return e(m)},set eventsWide(st){s(m,o(st))},get eventsCollapsed(){return e(h)},set eventsCollapsed(st){s(h,o(st))},children:(st,se)=>{Lh(st,{})},$$slots:{default:!0}})},Ct=at=>{var st=me(),se=ee(st);{var Ae=Q=>{_t(Q,{get eventsWide(){return e(m)},set eventsWide(Ee){s(m,o(Ee))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ee){s(h,o(Ee))},children:(Ee,je)=>{cd(Ee)},$$slots:{default:!0}})},Pe=Q=>{var Ee=me(),je=ee(Ee);{var At=ae=>{_t(ae,{get eventsWide(){return e(m)},set eventsWide(Ke){s(m,o(Ke))},get eventsCollapsed(){return e(h)},set eventsCollapsed(Ke){s(h,o(Ke))},children:(Ke,Oe)=>{Cd(Ke)},$$slots:{default:!0}})};M(je,ae=>{t()==="Docs"&&ae(At)},!0)}l(Q,Ee)};M(se,Q=>{t()==="Config"?Q(Ae):Q(Pe,!1)},!0)}l(at,st)};M(gt,at=>{t()==="Providers"?at(ht):at(Ct,!1)},!0)}l(Xe,et)};M(ot,Xe=>{t()==="ApiKeys"?Xe(It):Xe(kt,!1)},!0)}l(Ue,Fe)};M(Ve,Ue=>{t()==="Blacklist"?Ue(rt):Ue(ct,!1)},!0)}l(fe,qe)};M(Re,fe=>{t()==="Events"?fe(J):fe(Ie,!1)},!0)}l(Ce,xe)};M(ye,Ce=>{t()==="Sessions"?Ce(be):Ce(ze,!1)},!0)}l(ge,de)};M(_e,ge=>{t()==="Scopes"?ge(pe):ge(Ne,!1)},!0)}l(ce,$e)};M(K,ce=>{t()==="Groups"?ce(Z):ce(re,!1)},!0)}l(q,B)};M(O,q=>{t()==="Roles"?q(G):q(X,!1)},!0)}l(H,P)};M(j,H=>{t()==="Clients"?H(W):H(D,!1)},!0)}l(N,R)};M(b,N=>{t()==="Attributes"?N(C):N(L,!1)},!0)}l(_,x)};M(A,_=>{t()==="Users"?_(k):_(g,!1)})}var y=i(A,2);{var $=_=>{tu(_,{get collapsed(){return e(h)},get wide(){return e(m)}})};M(y,_=>{e(u)!==void 0&&_($)})}c(f),c(v),rr("innerWidth",_=>s(u,o(_))),l(p,v),oe()}var Mh=T('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">A rauthy admin account must have <b>MFA enabled.</b><br> Please navigate to your <b>account</b> and activate MFA.<br> Afterwards, you need to do a logout and log back in.</div> <!></div>'),zh=T('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">You are not assigned to the <b>rauthy_admin</b> role.<br> You do not have access to the admin panel.</div> <!></div>');function Ph(p,a){ne(a,!0);let t=z(a,"selected",15,"Users"),n=S(void 0),r=S(!1),h=S(!1);Le(async()=>{let v=await Ms();if(v.ok){let w=await v.json(),f=await zs();f.ok?(s(n,o(w)),s(r,!0)):f.status===406?(s(h,!0),s(n,o({}))):s(n,o({}))}else Ha()});var m=me();za(v=>{Ma.title="Admin"});var u=ee(m);{var E=v=>{ma(v,{})},I=v=>{var w=me(),f=ee(w);{var A=g=>{var y=Mh(),$=i(d(y),2);Se($,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(_,x)=>{F();var b=Y("ACCOUNT");l(_,b)},$$slots:{default:!0}}),c(y),l(g,y)},k=g=>{var y=me(),$=ee(y);{var _=b=>{var C=zh(),L=i(d(C),2);Se(L,{$$events:{click:()=>window.location.href="/auth/v1/"},children:(N,R)=>{F();var j=Y("GO BACK");l(N,j)},$$slots:{default:!0}}),c(C),l(b,C)},x=b=>{Nh(b,{get selected(){return t()},set selected(C){t(C)}})};M($,b=>{e(r)?b(x,!1):b(_)},!0)}l(g,y)};M(f,g=>{e(h)?g(A):g(k,!1)},!0)}l(v,w)};M(u,v=>{!e(n)&&!e(h)?v(E):v(I,!1)})}l(p,m),oe()}export{Ph as A};
