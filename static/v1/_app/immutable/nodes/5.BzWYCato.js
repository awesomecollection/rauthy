import"../chunks/disclose-version.BDr9Qe-U.js";import{f as X,p as Ce,a4 as Fe,c as r,s as o,r as t,t as k,a as Pe,g as e,a9 as _e,aq as we,i as R,h as l,ao as va,ap as Za}from"../chunks/index-client.DAoU_hDn.js";import{h as et}from"../chunks/svelte-head.CtCGS4lr.js";import{e as me,a as n,t as $,d as ye,n as at}from"../chunks/template.DcxtE4ym.js";import{i as I}from"../chunks/if.BANCODOf.js";import{p as q}from"../chunks/proxy.D3ASEzk3.js";import{d as pa,e as oa,s as d,k as tt}from"../chunks/render.mNhspeV3.js";import{b as rt}from"../chunks/window.Dv-FFGvE.js";import{p as H}from"../chunks/props.VJ8UyA45.js";import{k as Oe,aa as ma,_ as st,P as vt,H as ot,z as it,q as nt,ab as lt,D as ct,r as dt}from"../chunks/helpers.BV-akmwW.js";import{e as fa,i as ut}from"../chunks/each.DTG73tix.js";import{h as Ia}from"../chunks/html.CT6bpSnI.js";import{s as de,b as Z,c as ee,t as ga,r as pt}from"../chunks/class.DWa3OhYO.js";import{I as ia}from"../chunks/IconCheck.DszTV7Wv.js";import{I as qa}from"../chunks/IconStop.DS7gZeVF.js";import{B as ke}from"../chunks/Button.Cy8gcSM8.js";import{s as La}from"../chunks/snippet.DHnbbgSs.js";import{b as Da}from"../chunks/this.Cfm51kc5.js";import{u as We}from"../chunks/i18n.svelte.DUvAL5Pw.js";import{d as mt,b as Ca,c as Pa,f as ea}from"../chunks/fetch.m5EOWhre.js";import{B as ft}from"../chunks/ButtonAuthProvider.C0t303gQ.js";import{t as Ve,f as je,s as Se,a as Ta}from"../chunks/index.DER1jHiU.js";import{I as Ae}from"../chunks/Input.DSR5bYkF.js";import{F as gt}from"../chunks/Form.gnacPhba.js";import{a as ha,c as ht,d as Ea,e as wt}from"../chunks/patterns.BdncpE46.js";import{I as bt}from"../chunks/InputDateTimeCombo.B0Hj-GFF.js";import{w as yt,h as kt,i as _t}from"../chunks/dataFetching.dLYaql-r.js";import{u as Na}from"../chunks/session.svelte.BqhfG0Yq.js";import{w as $t}from"../chunks/registration.DEN_CA7Z.js";import{W as Wa}from"../chunks/WebauthnRequest.C4OO6VEa.js";import{T as xt}from"../chunks/Tooltip.BKHmBuQ7.js";import{P as It}from"../chunks/PasswordPolicy.DAaeophg.js";import{I as wa}from"../chunks/InputPassword.nPyam57A.js";import{C as qt}from"../chunks/CheckIcon.CrU43zqd.js";import{a as Lt,b as Dt}from"../chunks/input.CNTnF6Qx.js";import{A as Ct}from"../chunks/A.CPSniiiu.js";import"../chunks/legacy.DtyiMpWz.js";import{D as Aa}from"../chunks/Devices.xP6jbLAC.js";import{T as Pt}from"../chunks/Template.g8euQA0a.js";import{u as Tt}from"../chunks/param.svelte.BFj7Iv3L.js";import{M as Et}from"../chunks/Main.B9oV9Is2.js";import{C as Nt}from"../chunks/ContentCenter.DlYnOTAE.js";import{T as Wt,L as At}from"../chunks/LangSelector.BrxfVQ9N.js";function ba(M,v){var a=me(),s=X(a);{var x=b=>{ia(b,{color:"hsl(var(--action))"})},i=b=>{qa(b,{color:"hsl(var(--error))"})};I(s,b=>{v.checked?b(x):b(i,!1)})}n(M,a)}function zt(M,v,a){v()||a()}function Mt(M){M.stopPropagation()}var Rt=$('<span class="closeIcon svelte-utq0b0"><!></span>'),Vt=$('<div class="relative"><div class="absolute close svelte-utq0b0"><!></div></div>'),Ut=$('<dialog aria-modal="true" class="svelte-utq0b0"><div role="none" class="svelte-utq0b0"><!> <!></div></dialog>');function Ft(M,v){Ce(v,!0);let a=H(v,"showModal",15),s=H(v,"closeModal",15),x=H(v,"strict",3,!1),i=H(v,"prerender",3,!1),b=We(),g;Fe(()=>{s(c)}),Fe(()=>{a()&&(g==null||g.showModal())});function c(C){C==null||C.preventDefault(),g==null||g.close(),a(!1)}var h=Ut();h.__click=[zt,x,c];var u=r(h);u.__click=[Mt];var z=r(u);{var W=C=>{var Q=Vt(),_=r(Q),L=r(_);ke(L,{get ariaLabel(){return b.common.close},invisible:!0,onclick:c,children:(w,j)=>{var S=Rt(),se=r(S);qa(se,{color:"currentColor",width:"1.2rem"}),t(S),n(w,S)},$$slots:{default:!0}}),t(_),t(Q),n(C,Q)};I(z,C=>{x()||C(W)})}var T=o(z,2);{var Y=C=>{var Q=me(),_=X(Q);La(_,()=>v.children),n(C,Q)};I(T,C=>{(i()||a())&&C(Y)})}t(u),t(h),Da(h,C=>g=C,()=>g),k(()=>de(h,"data-strict",x())),oa("close",h,()=>{var C;a(!1),(C=v.onClose)==null||C.call(v)}),n(M,h),Pe()}pa(["click"]);var Jt=$('<div class="link-err value svelte-1tea8v4"> </div>'),Ht=$('<div class="fed-btn svelte-1tea8v4"><!> <!></div>'),Yt=$('<h3> </h3> <p> </p> <div class="providers svelte-1tea8v4"></div>',1),Bt=$("<!> <!>",1),Ot=$('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),jt=$('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),St=$('<div><div>WebID:</div> <span class="value svelte-1tea8v4"><a target="_blank"><!></a></span></div>'),Gt=$('<div><div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <div><div class="value svelte-1tea8v4"> </div> <!></div></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <!> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <!> <!></div>');function za(M,v){Ce(v,!0);let a=H(v,"user",15),s=We(),x=R(!1),i=R(!1),b=_e(()=>{var O;return(O=a().account_type)==null?void 0:O.startsWith("federated")}),g=_e(()=>{var O;return e(b)?`${a().account_type}: ${((O=v.authProvider)==null?void 0:O.name)||""}`:a().account_type}),c=_e(()=>v.viewModePhone?"rowPhone":"row"),h=_e(()=>v.viewModePhone?"labelPhone":"label");function u(O){st(64,(ie,{challenge:ue,verifier:be})=>{ie||(localStorage.setItem(vt,be),z(O,ue))})}async function z(O,ie){let ue={email:a().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:O,pkce_challenge:ie},be=await Ca(`/auth/v1/providers/${O}/link`,ue);if(be.text){ot(be.text);let he=be.headers.get("location");he&&(window.location.href=he)}else console.error(be.error)}async function W(){let O=await mt("/auth/v1/providers/link");O.body?a(O.body):(console.error(O.error),l(x,!0))}var T=Gt(),Y=r(T),C=r(Y),Q=r(C,!0);t(C);var _=o(C,2),L=r(_,!0);t(_),t(Y);var w=o(Y,2),j=r(w),S=r(j,!0);t(j);var se=o(j,2),oe=r(se,!0);t(se),t(w);var re=o(w,2),f=r(re),p=r(f,!0);t(f);var E=o(f,2),m=r(E,!0);t(E),t(re);var G=o(re,2),ne=r(G),fe=r(ne);t(ne);var y=o(ne,2),U=r(y,!0);t(y),t(G);var F=o(G,2),V=r(F),B=r(V,!0);t(V);var ve=o(V,2),K=r(ve),pe=r(K,!0);t(K);var le=o(K,2);{var $e=O=>{var ie=Ht(),ue=r(ie);ke(ue,{get ariaLabel(){return s.account.providerUnlink},level:3,onclick:W,children:(Le,Ue)=>{we();var Be=ye();k(()=>d(Be,s.account.providerUnlink)),n(Le,Be)},$$slots:{default:!0}});var be=o(ue,2);{var he=Le=>{var Ue=Jt(),Be=r(Ue,!0);t(Ue),k(()=>d(Be,s.account.providerUnlinkDesc)),n(Le,Ue)};I(be,Le=>{e(x)&&Le(he)})}t(ie),n(O,ie)},J=O=>{var ie=me(),ue=X(ie);{var be=he=>{var Le=Bt(),Ue=X(Le);ke(Ue,{level:2,onclick:()=>l(i,!0),children:(Xe,Ga)=>{we();var Ze=ye();k(()=>d(Ze,s.account.providerLink)),n(Xe,Ze)},$$slots:{default:!0}});var Be=o(Ue,2);Ft(Be,{get showModal(){return e(i)},set showModal(Xe){l(i,q(Xe))},children:(Xe,Ga)=>{var Ze=Yt(),ca=X(Ze),Ka=r(ca,!0);t(ca);var da=o(ca,2),Qa=r(da,!0);t(da);var $a=o(da,2);fa($a,21,()=>v.providers,ua=>ua.id,(ua,xa)=>{var Xa=_e(()=>`${s.account.providerLink}: ${e(xa).name}`);ft(ua,{get ariaLabel(){return e(Xa)},get provider(){return e(xa)},onclick:u})}),t($a),k(()=>{d(Ka,s.account.providerLink),d(Qa,s.account.providerLinkDesc)}),n(Xe,Ze)},$$slots:{default:!0}}),n(he,Le)};I(ue,he=>{v.providers.length>0&&he(be)},!0)}n(O,ie)};I(le,O=>{e(b)?O($e):O(J,!1)})}t(ve),t(F);var P=o(F,2),D=r(P),A=r(D,!0);t(D);var ae=o(D,2),ge=r(ae,!0);t(ae),t(P);var N=o(P,2),te=r(N),ce=r(te,!0);t(te);var Ie=o(te,2),qe=r(Ie,!0);t(Ie),t(N);var xe=o(N,2),De=r(xe),Ge=r(De,!0);t(De);var Je=o(De,2),aa=_e(()=>!!a().webauthn_user_id);ba(Je,{get checked(){return e(aa)}}),t(xe);var Te=o(xe,2),ze=r(Te),na=r(ze,!0);t(ze);var ta=o(ze,2);ba(ta,{get checked(){return a().enabled}}),t(Te);var He=o(Te,2),Ye=r(He),la=r(Ye,!0);t(Ye);var Ne=o(Ye,2);ba(Ne,{get checked(){return a().email_verified}}),t(He);var Me=o(He,2);{var Ke=O=>{var ie=Ot(),ue=r(ie),be=r(ue,!0);t(ue);var he=o(ue,2),Le=r(he,!0);k(()=>d(Le,Oe(a().last_login))),t(he),t(ie),k(()=>{Z(ie,ee(e(c)),"svelte-1tea8v4"),Z(ue,ee(e(h)),"svelte-1tea8v4"),d(be,s.account.lastLogin)}),n(O,ie)};I(Me,O=>{a().last_login&&O(Ke)})}var Ee=o(Me,2),Re=r(Ee),ya=r(Re,!0);t(Re);var Qe=o(Re,2),Ha=r(Qe,!0);k(()=>d(Ha,a().password_expires&&Oe(a().password_expires)||s.common.never)),t(Qe),t(Ee);var ra=o(Ee,2),sa=r(ra),Ya=r(sa,!0);t(sa);var ka=o(sa,2),Ba=r(ka,!0);k(()=>d(Ba,Oe(a().created_at))),t(ka),t(ra);var _a=o(ra,2);{var Oa=O=>{var ie=jt(),ue=r(ie),be=r(ue,!0);t(ue);var he=o(ue,2),Le=r(he,!0);k(()=>d(Le,Oe(a().user_expires))),t(he),t(ie),k(()=>{Z(ie,ee(e(c)),"svelte-1tea8v4"),Z(ue,ee(e(h)),"svelte-1tea8v4"),d(be,s.account.userExpiry)}),n(O,ie)};I(_a,O=>{a().user_expires&&O(Oa)})}var ja=o(_a,2);{var Sa=O=>{var ie=St(),ue=r(ie),be=o(ue,2),he=r(be);k(()=>de(he,"href",ma(a().id)));var Le=r(he);Ia(Le,()=>ma(a().id).replace("/auth/","/auth/<wbr/>")),t(he),t(be),t(ie),k(()=>{Z(ie,ee(e(c)),"svelte-1tea8v4"),Z(ue,ee(e(h)),"svelte-1tea8v4")}),n(O,ie)};I(ja,O=>{v.webIdData&&O(Sa)})}t(T),k(()=>{Z(Y,ee(e(c)),"svelte-1tea8v4"),Z(C,ee(e(h)),"svelte-1tea8v4"),d(Q,s.common.email),d(L,a().email),Z(w,ee(e(c)),"svelte-1tea8v4"),Z(j,ee(e(h)),"svelte-1tea8v4"),d(S,s.account.givenName),d(oe,a().given_name),Z(re,ee(e(c)),"svelte-1tea8v4"),Z(f,ee(e(h)),"svelte-1tea8v4"),d(p,s.account.familyName),d(m,a().family_name),Z(G,ee(e(c)),"svelte-1tea8v4"),Z(ne,ee(e(h)),"svelte-1tea8v4"),d(fe,`${s.account.user??""} ID`),d(U,a().id),Z(F,ee(e(c)),"svelte-1tea8v4"),Z(V,ee(e(h)),"svelte-1tea8v4"),d(B,s.account.accType),d(pe,e(g)||""),Z(P,ee(e(c)),"svelte-1tea8v4"),Z(D,ee(e(h)),"svelte-1tea8v4"),d(A,s.account.roles),d(ge,a().roles||"None"),Z(N,ee(e(c)),"svelte-1tea8v4"),Z(te,ee(e(h)),"svelte-1tea8v4"),d(ce,s.account.groups),d(qe,a().groups||"None"),Z(xe,ee(e(c)),"svelte-1tea8v4"),Z(De,ee(e(h)),"svelte-1tea8v4"),d(Ge,s.account.mfaActivated),Z(Te,ee(e(c)),"svelte-1tea8v4"),Z(ze,ee(e(h)),"svelte-1tea8v4"),d(na,s.account.userEnabled),Z(He,ee(e(c)),"svelte-1tea8v4"),Z(Ye,ee(e(h)),"svelte-1tea8v4"),d(la,s.account.emailVerified),Z(Ee,ee(e(c)),"svelte-1tea8v4"),Z(Re,ee(e(h)),"svelte-1tea8v4"),d(ya,s.account.passwordExpiry),Z(ra,ee(e(c)),"svelte-1tea8v4"),Z(sa,ee(e(h)),"svelte-1tea8v4"),d(Ya,s.account.userCreated)}),n(M,T),Pe()}var Kt=$('<div class="success svelte-4ogr3z"><!></div>'),Qt=$("<p> </p>"),Xt=$('<div class="err svelte-4ogr3z"> </div>'),Zt=$('<div class="formInner svelte-4ogr3z"><div><!> <!> <!> <!></div> <div><!> <!> <!> <!> <!></div></div> <div class="bottom svelte-4ogr3z"><div><!></div> <!></div> <!>',1),er=$('<div class="container svelte-4ogr3z"><!></div>');function Ma(M,v){var z;Ce(v,!0);let a=H(v,"user",15);(z=a().user_values)!=null&&z.birthdate||a(a().user_values.birthdate="",!0);let s=We(),x=R(""),i=R(!1),b=R(!1);async function g(W,T){var p;const Y=T.get("email"),C=T.get("family_name")||void 0,Q=T.get("given_name")||void 0,_=T.get("birthdate")||void 0,L=((p=T.get("phone"))==null?void 0:p.replaceAll(" ",""))||void 0,w=T.get("street")||void 0,j=T.get("zip")||void 0,S=j?Number.parseInt(j):void 0,se=T.get("city")||void 0,oe=T.get("country")||void 0;let re={email:Y,family_name:C,given_name:Q,user_values:{birthdate:_,phone:L,street:w,zip:S,city:se,country:oe}},f=await Pa(`/auth/v1/users/${a().id}/self`,re);if(f.body){l(i,!0),a(f.body);let E=3e3;f.status===202&&(l(b,!0),E=3e4),setTimeout(()=>{l(i,!1)},E)}else f.error&&(console.error(f.error),l(x,q(f.error.message)))}var c=er(),h=r(c),u=_e(()=>`/auth/v1/users/${a().id}/self`);gt(h,{get action(){return e(u)},onSubmit:g,children:(W,T)=>{var Y=Zt(),C=X(Y),Q=r(C),_=r(Q);Ae(_,{typ:"email",name:"email",get label(){return s.common.email},get placeholder(){return s.common.email},get value(){return a().email},required:!0});var L=o(_,2);Ae(L,{name:"given_name",autocomplete:"given-name",get label(){return s.account.givenName},get placeholder(){return s.account.givenName},get value(){return a().given_name},required:!0,maxLength:32,pattern:ha});var w=o(L,2);Ae(w,{name:"family_name",autocomplete:"family-name",get label(){return s.account.familyName},get placeholder(){return s.account.familyName},get value(){return a().family_name},maxLength:32,pattern:ha});var j=o(w,2);bt(j,{name:"birthdate",get label(){return s.account.birthdate},withDelete:!0,get value(){return a().user_values.birthdate},set value(V){a(a().user_values.birthdate=V,!0)}}),t(Q);var S=o(Q,2),se=r(S);Ae(se,{name:"street",autocomplete:"street-address",get label(){return s.account.street},get placeholder(){return s.account.street},get value(){return a().user_values.street},maxLength:48,pattern:ht});var oe=o(se,2);Ae(oe,{typ:"number",name:"zip",autocomplete:"postal-code",get label(){return s.account.zip},get placeholder(){return s.account.zip},get value(){return a().user_values.zip},min:"1000",max:"9999999"});var re=o(oe,2);Ae(re,{name:"city",autocomplete:"address-level2",get label(){return s.account.city},get placeholder(){return s.account.city},get value(){return a().user_values.city},maxLength:48,pattern:Ea});var f=o(re,2);Ae(f,{name:"country",autocomplete:"country",get label(){return s.account.country},get placeholder(){return s.account.country},get value(){return a().user_values.country},maxLength:48,pattern:Ea});var p=o(f,2);Ae(p,{name:"phone",autocomplete:"tel",get label(){return s.account.phone},get placeholder(){return s.account.phone},get value(){return a().user_values.phone},maxLength:32,pattern:wt}),t(S),t(C);var E=o(C,2),m=r(E),G=r(m);ke(G,{type:"submit",children:(V,B)=>{we();var ve=ye();k(()=>d(ve,s.common.save)),n(V,ve)},$$slots:{default:!0}}),t(m);var ne=o(m,2);{var fe=V=>{var B=Kt(),ve=r(B);ia(ve,{}),t(B),Ve(3,B,()=>je),n(V,B)};I(ne,V=>{e(i)&&V(fe)})}t(E);var y=o(E,2);{var U=V=>{var B=Qt(),ve=r(B,!0);t(B),k(()=>d(ve,s.account.emailUpdateConfirm)),n(V,B)},F=V=>{var B=me(),ve=X(B);{var K=pe=>{var le=Xt(),$e=r(le,!0);t(le),k(()=>d($e,e(x))),Ve(3,le,()=>je),n(pe,le)};I(ve,pe=>{e(x)&&pe(K)},!0)}n(V,B)};I(y,V=>{e(b)?V(U):V(F,!1)})}n(W,Y)},$$slots:{default:!0}}),t(c),n(M,c),Pe()}var ar=at('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function tr(M,v){let a=H(v,"opacity",3,.9),s=H(v,"width",3,24),x=H(v,"color",3,"currentColor");var i=ar();de(i,"stroke-width",2),k(()=>{de(i,"stroke",x()),de(i,"width",s()),de(i,"opacity",a())}),n(M,i)}var rr=$('<div class="err svelte-qkgdvy"><b>Your browser does not support Webauthn credentials and must be updated.</b></div>'),sr=$('<!> <div class="regBtns svelte-qkgdvy"><!> <!></div>',1),vr=$('<div class="regNewBtn svelte-qkgdvy"><!></div>'),or=$('<div class="keysHeader svelte-qkgdvy"> </div>'),ir=$("<div><!></div>"),nr=$('<div class="row svelte-qkgdvy"><div></div> <div class="deleteBtn svelte-qkgdvy"><!></div></div>'),lr=$('<div class="keyContainer svelte-qkgdvy"><div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <div class="nameUv svelte-qkgdvy"><b> </b> <!></div></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <!></div>'),cr=$('<div class="button svelte-qkgdvy"><!></div>'),dr=$('<!> <p class="svelte-qkgdvy"> <br><br> </p> <!> <!> <div class="keysContainer svelte-qkgdvy"></div> <!> <div class="svelte-qkgdvy"> </div>',1),ur=$('<div class="container svelte-qkgdvy"><!></div>');function Ra(M,v){Ce(v,!0);const a="credentials"in navigator;let s=We(),x=Na("account"),i=_e(()=>{var f;return(f=x.get())==null?void 0:f.user_id}),b=R(void 0),g=R(!1),c=R(""),h=R(!1),u=R(v.user.account_type==="password"),z=R(void 0),W=R(""),T=R(!1),Y=R(q([]));va(()=>{Q()}),Fe(()=>{e(Y).length>0&&v.user.account_type==="passkey"&&l(u,e(Y).length>1)}),Fe(()=>{var f;(f=e(b))==null||f.focus()});function C(){l(g,!1),l(c,"")}async function Q(){var p;let f=await ea(`/auth/v1/users/${(p=x.get())==null?void 0:p.user_id}/webauthn`);f.body?l(Y,q(f.body)):console.error(f.error)}async function _(){if(C(),e(T)||!e(i))return;if(e(W).length<1){l(g,!0),l(c,q(s.mfa.passkeyNameErr));return}let f=await $t(e(i),e(W),s.authorize.invalidKeyUsed,s.authorize.requestExpired);f.error?(l(g,!0),l(c,`${s.mfa.errorReg} - ${f.error}`)):(l(h,!1),l(W,""),await Q())}async function L(f){let p=await yt(v.user.id,f);if(p.status===200)await Q();else{let E=await p.json();l(g,!0),l(c,q(E.message))}}function w(f){l(z,void 0),l(g,!0),l(c,q(f)),setTimeout(()=>{l(g,!1),l(c,"")},5e3)}function j(f){l(z,void 0),l(c,q(s.mfa.testSuccess)),setTimeout(()=>{l(c,"")},3e3)}var S=ur(),se=r(S);{var oe=f=>{var p=rr();n(f,p)},re=f=>{var p=dr(),E=X(p);{var m=J=>{Wa(J,{get userId(){return v.user.id},get purpose(){return e(z)},onSuccess:j,onError:w})};I(E,J=>{e(z)&&J(m)})}var G=o(E,2),ne=r(G),fe=o(ne,3);t(G);var y=o(G,2);{var U=J=>{var P=sr(),D=X(P);Ae(D,{autocomplete:"off",get label(){return s.mfa.passkeyName},get placeholder(){return s.mfa.passkeyName},maxLength:32,pattern:ha,onEnter:_,get ref(){return e(b)},set ref(N){l(b,q(N))},get value(){return e(W)},set value(N){l(W,q(N))},get isError(){return e(T)},set isError(N){l(T,q(N))}});var A=o(D,2),ae=r(A);ke(ae,{onclick:_,children:(N,te)=>{we();var ce=ye();k(()=>d(ce,s.mfa.register)),n(N,ce)},$$slots:{default:!0}});var ge=o(ae,2);ke(ge,{level:3,onclick:()=>l(h,!1),children:(N,te)=>{we();var ce=ye();k(()=>d(ce,s.common.cancel)),n(N,ce)},$$slots:{default:!0}}),t(A),n(J,P)},F=J=>{var P=vr(),D=r(P),A=_e(()=>e(Y).length===0?1:2);ke(D,{get level(){return e(A)},onclick:()=>l(h,!0),children:(ae,ge)=>{we();var N=ye();k(()=>d(N,s.mfa.registerNew)),n(ae,N)},$$slots:{default:!0}}),t(P),n(J,P)};I(y,J=>{e(h)?J(U):J(F,!1)})}var V=o(y,2);{var B=J=>{var P=or(),D=r(P,!0);t(P),k(()=>d(D,s.mfa.registerdKeys)),n(J,P)};I(V,J=>{e(Y).length>0&&J(B)})}var ve=o(V,2);fa(ve,21,()=>e(Y),J=>J.name,(J,P)=>{var D=lr(),A=r(D),ae=r(A),ge=r(ae,!0);t(ae);var N=o(ae,2),te=r(N),ce=r(te,!0);t(te);var Ie=o(te,2);{var qe=Ne=>{xt(Ne,{get text(){return s.account.userVerifiedTooltip},children:(Me,Ke)=>{var Ee=ir();Se(Ee,"margin-bottom","-.25rem");var Re=r(Ee);tr(Re,{width:18,color:"var(--col-acnt)"}),t(Ee),n(Me,Ee)},$$slots:{default:!0}})};I(Ie,Ne=>{e(P).user_verified&&Ne(qe)})}t(N),t(A);var xe=o(A,2),De=r(xe),Ge=r(De,!0);t(De);var Je=o(De,2),aa=r(Je,!0);k(()=>d(aa,Oe(e(P).registered))),t(Je),t(xe);var Te=o(xe,2),ze=r(Te),na=r(ze,!0);t(ze);var ta=o(ze,2),He=r(ta,!0);k(()=>d(He,Oe(e(P).last_used))),t(ta),t(Te);var Ye=o(Te,2);{var la=Ne=>{var Me=nr(),Ke=o(r(Me),2),Ee=r(Ke);ke(Ee,{level:-3,onclick:()=>L(e(P).name),children:(Re,ya)=>{we();var Qe=ye();k(()=>d(Qe,s.common.delete)),n(Re,Qe)},$$slots:{default:!0}}),t(Ke),t(Me),n(Ne,Me)};I(Ye,Ne=>{e(u)&&Ne(la)})}t(D),k(()=>{d(ge,s.mfa.passkeyName),d(ce,e(P).name),d(Ge,s.mfa.registerd),d(na,s.mfa.lastUsed)}),n(J,D)}),t(ve);var K=o(ve,2);{var pe=J=>{var P=cr(),D=r(P);ke(D,{onclick:()=>l(z,"Test"),children:(A,ae)=>{we();var ge=ye();k(()=>d(ge,s.mfa.test)),n(A,ge)},$$slots:{default:!0}}),t(P),n(J,P)};I(K,J=>{e(Y).length>0&&J(pe)})}var le=o(K,2),$e=r(le,!0);t(le),k(()=>{d(ne,`${s.mfa.p1??""} `),d(fe,` ${s.mfa.p2??""}`),ga(le,"success",!e(g)),ga(le,"err",e(g)),d($e,e(c))}),n(f,p)};I(se,f=>{a?f(re,!1):f(oe)})}t(S),n(M,S),Pe()}var pr=$('<div class="container svelte-ue7bk2"><!> <!> <!> <!> <div class="btn svelte-ue7bk2"><!></div> <div class="err svelte-ue7bk2"> </div></div>');function mr(M,v){Ce(v,!0);let a=H(v,"passwords",15),s=H(v,"hideCurrentPassword",3,!1),x=H(v,"isValid",15),i=We();x(W);let b=R(!1),g=R(""),c=R(void 0),h=_e(()=>{var _;return((_=a().new)==null?void 0:_.length)>6&&a().new===a().newConfirm}),u=R(void 0),z=R(void 0);va(async()=>{let _=await ea("/auth/v1/password_policy");_.body?l(c,q(_.body)):console.error(_.error)});function W(){return l(g,""),!s()&&!a().current?(l(g,q(i.account.passwordCurrReq)),!1):a().new?a().newConfirm?e(b)?a().new.length>256?(l(g,"max 256"),!1):a().new!==a().newConfirm?(l(g,q(i.account.passwordNoMatch)),!1):!0:(l(g,q(i.account.passwordPolicyFollow)),!1):(l(g,q(i.account.passwordNewReq)),!1):(l(g,q(i.account.passwordNewReq)),!1)}function T(){if(l(g,""),e(c)){let _=it(e(c));a(a().new=_,!0),a(a().newConfirm=_,!0)}requestAnimationFrame(()=>{var _,L;(_=e(u))==null||_(),(L=e(z))==null||L()})}var Y=me(),C=X(Y);{var Q=_=>{var L=pr(),w=r(L);It(w,{get policy(){return e(c)},get password(){return a().new},get accepted(){return e(b)},set accepted(m){l(b,q(m))}});var j=o(w,2);{var S=m=>{wa(m,{autocomplete:"current-password",get label(){return i.account.passwordCurr},get placeholder(){return i.account.passwordCurr},onInput:W,get width(){return v.inputWidth},get value(){return a().current},set value(G){a(a().current=G,!0)}})};I(j,m=>{s()||m(S)})}var se=o(j,2);wa(se,{autocomplete:"new-password",get label(){return i.account.passwordNew},get placeholder(){return i.account.passwordNew},onInput:W,get showCopy(){return e(h)},get width(){return v.inputWidth},get value(){return a().new},set value(m){a(a().new=m,!0)},get reportValidity(){return e(u)},set reportValidity(m){l(u,q(m))}});var oe=o(se,2);wa(oe,{autocomplete:"new-password",get label(){return i.account.passwordConfirm},get placeholder(){return i.account.passwordConfirm},onInput:W,get showCopy(){return e(h)},get width(){return v.inputWidth},get value(){return a().newConfirm},set value(m){a(a().newConfirm=m,!0)},get reportValidity(){return e(z)},set reportValidity(m){l(z,q(m))}});var re=o(oe,2),f=r(re);ke(f,{onclick:T,level:2,children:(m,G)=>{we();var ne=ye();k(()=>d(ne,i.account.generateRandom)),n(m,ne)},$$slots:{default:!0}}),t(re);var p=o(re,2),E=r(p,!0);t(p),t(L),k(()=>d(E,e(g))),n(_,L)};I(C,_=>{e(c)&&_(Q)})}return n(M,Y),Pe({isPwdValid:W})}var fr=$('<div class="m-05 svelte-1h4zvzu"><p> </p> <p><b> </b></p> <div></div> <p> </p> <!></div>'),gr=$("<p> </p> <p> </p> <p> </p> <div><!></div>",1),hr=$('<div class="success svelte-1h4zvzu"><!></div>'),wr=$('<div class="err"> </div>'),br=$('<div class="cancel"><!></div>'),yr=$('<div class="convertPasskey svelte-1h4zvzu"><h3> </h3> <p> </p> <!></div>'),kr=$('<div><!> <div class="save svelte-1h4zvzu"><!> <!></div></div> <!>',1),_r=$('<div class="container svelte-1h4zvzu"><!> <!> <!> <!></div>');function Va(M,v){Ce(v,!0);let a=H(v,"user",15),s=We(),x=_e(()=>v.viewModePhone?"calc(100vw - 1.5rem)":"300px"),i=R(q(a().account_type)),b=R(q([])),g=R(void 0),c=R(!1),h=R(!1),u=R(""),z=R(!1),W=R(void 0),T=R(q({current:"",new:"",newConfirm:""})),Y=_e(()=>e(b).filter(y=>y.user_verified).length>0);va(()=>{C()});async function C(){let y=await ea(`/auth/v1/users/${a().id}/webauthn`);y.body?l(b,q(y.body)):console.error("error fetching passkeys: "+y.error)}async function Q(){let y=await Ca(`/auth/v1/users/${a().id}/self/convert_passkey`);y.error?console.error("error fetching passkeys: "+y.error):window.location.reload()}async function _(){l(u,""),e(b).length>0?await L():await w()}async function L(){var y;if(!((y=e(g))!=null&&y())){l(u,q(s.common.invalidInput));return}l(W,"PasswordNew")}async function w(y){var V,B;if(!((V=e(g))!=null&&V())){l(u,q(s.common.invalidInput));return}l(h,!0);let U={password_new:e(T).new};y?U.mfa_code=y:U.password_current=e(T).current;let F=await Pa(`/auth/v1/users/${a().id}/self`,U);F.body?(l(z,!0),l(T,q({current:"",new:"",newConfirm:""})),a(F.body),l(i,q(F.body.account_type)),setTimeout(()=>{l(z,!1),l(c,!1)},3e3)):l(u,q(((B=F.error)==null?void 0:B.message)||"Error")),l(h,!1)}function j(y){l(W,void 0),l(u,q(y)),setTimeout(()=>{l(u,"")},5e3)}function S(y){l(W,void 0),y&&"code"in y&&w(y.code)}async function se(){let y=await kt({email:a().email});if(y.ok)l(z,!0);else{let U=await y.json();l(u,q(U.message))}}var oe=_r(),re=r(oe);{var f=y=>{Wa(y,{get userId(){return a().id},get purpose(){return e(W)},onSuccess:S,onError:j})};I(re,y=>{e(W)&&y(f)})}var p=o(re,2);{var E=y=>{var U=fr(),F=r(U),V=r(F,!0);t(F);var B=o(F,2),ve=r(B),K=r(ve,!0);t(ve),t(B);var pe=o(B,2);Se(pe,"height",".3rem");var le=o(pe,2),$e=r(le,!0);t(le);var J=o(le,2);{var P=A=>{qt(A,{check:!0})},D=A=>{ke(A,{level:2,onclick:se,children:(ae,ge)=>{we();var N=ye();k(()=>d(N,s.account.passwordReset)),n(ae,N)},$$slots:{default:!0}})};I(J,A=>{e(z)?A(P):A(D,!1)})}t(U),k(()=>{var A;d(V,s.account.federatedConvertPassword1),d(K,((A=v.authProvider)==null?void 0:A.name)||"UNKNOWN"),d($e,s.account.federatedConvertPassword2)}),n(y,U)};I(p,y=>{e(i)==="federated"&&y(E)})}var m=o(p,2);{var G=y=>{var U=gr(),F=X(U),V=r(F,!0);t(F);var B=o(F,2),ve=r(B,!0);t(B);var K=o(B,2),pe=r(K,!0);t(K);var le=o(K,2),$e=r(le);ke($e,{level:2,onclick:()=>l(c,!0),children:(J,P)=>{we();var D=ye();k(()=>d(D,s.account.convertAccount)),n(J,D)},$$slots:{default:!0}}),t(le),k(()=>{d(V,s.account.accTypePasskeyText1),d(ve,s.account.accTypePasskeyText2),d(pe,s.account.accTypePasskeyText3)}),n(y,U)};I(m,y=>{(e(i)==="passkey"||e(i)==="federated_passkey")&&!e(c)&&y(G)})}var ne=o(m,2);{var fe=y=>{var U=kr(),F=X(U),V=r(F),B=_e(()=>!(e(i)==="password"&&e(b).length<1));mr(V,{get inputWidth(){return e(x)},get hideCurrentPassword(){return e(B)},get passwords(){return e(T)},set passwords(D){l(T,q(D))},get isValid(){return e(g)},set isValid(D){l(g,q(D))}});var ve=o(V,2),K=r(ve);ke(K,{onclick:_,level:1,get isLoading(){return e(h)},children:(D,A)=>{we();var ae=ye();k(()=>d(ae,s.common.save)),n(D,ae)},$$slots:{default:!0}});var pe=o(K,2);{var le=D=>{var A=hr(),ae=r(A);ia(ae,{}),t(A),Ve(3,A,()=>je),n(D,A)},$e=D=>{var A=me(),ae=X(A);{var ge=te=>{var ce=wr(),Ie=r(ce,!0);t(ce),k(()=>d(Ie,e(u))),Ve(3,ce,()=>je),n(te,ce)},N=te=>{var ce=me(),Ie=X(ce);{var qe=xe=>{var De=br(),Ge=r(De);ke(Ge,{level:3,onclick:()=>l(c,!1),children:(Je,aa)=>{we();var Te=ye();k(()=>d(Te,s.common.cancel)),n(Je,Te)},$$slots:{default:!0}}),t(De),n(xe,De)};I(Ie,xe=>{e(c)&&!e(h)&&xe(qe)},!0)}n(te,ce)};I(ae,te=>{e(u)?te(ge):te(N,!1)},!0)}n(D,A)};I(pe,D=>{e(z)?D(le):D($e,!1)})}t(ve),t(F);var J=o(F,2);{var P=D=>{var A=yr(),ae=r(A),ge=r(ae,!0);t(ae);var N=o(ae,2),te=r(N,!0);t(N);var ce=o(N,2);ke(ce,{level:2,onclick:Q,children:(Ie,qe)=>{we();var xe=ye();k(()=>d(xe,s.account.convertAccount)),n(Ie,xe)},$$slots:{default:!0}}),t(A),k(()=>{d(ge,s.account.convertAccount),d(te,s.account.convertAccountP1)}),n(D,A)};I(J,D=>{!e(c)&&e(Y)&&D(P)})}n(y,U)};I(ne,y=>{(e(i)==="password"||e(i)==="federated_password"||e(c))&&y(fe)})}t(oe),n(M,oe),Pe()}function $r(M,v){M.code==="Enter"&&v()}var xr=$('<div class="flex"><div class="label font-label noselect svelte-1xf5lr3"><!></div> <label class="switch svelte-1xf5lr3"><input type="checkbox" class="svelte-1xf5lr3"> <span class="slider slider-round svelte-1xf5lr3"></span></label></div>');function Ua(M,v){Ce(v,!0);let a=H(v,"checked",15,!1),s=H(v,"ariaLabel",3,""),x=H(v,"name",3,"");function i(){a(!a())}var b=xr(),g=r(b),c=r(g);La(c,()=>v.children),t(g);var h=o(g,2),u=r(h);pt(u),u.__click=i,u.__keydown=[$r,i],we(2),t(h),t(b),k(()=>{Se(g,"width",v.labelWidth),de(u,"name",x()),u.disabled=v.disabled,de(u,"aria-checked",a()),de(u,"aria-label",s())}),Lt(u,a),n(M,b),Pe()}pa(["click","keydown"]);function Ir(M,v){v()}function qr(M,v,a){var s,x,i,b;switch(v(),M.code){case"ArrowUp":(s=a.onUp)==null||s.call(a);break;case"ArrowDown":(x=a.onDown)==null||x.call(a);break;case"ArrowLeft":(i=a.onLeft)==null||i.call(a);break;case"ArrowRight":(b=a.onRight)==null||b.call(a);break}}var Lr=$('<div class="error svelte-y71ny6"> </div>'),Dr=$(`<div class="container svelte-y71ny6"><textarea autocomplete="off" class="svelte-y71ny6">
    </textarea> <div class="label svelte-y71ny6"><label class="font-label noselect svelte-y71ny6"> </label> <!></div></div>`);function Cr(M,v){Ce(v,!0);let a=H(v,"ref",15),s=H(v,"id",19,nt),x=H(v,"value",15,""),i=H(v,"label",3,""),b=H(v,"rows",3,3),g=H(v,"placeholder",3,""),c=H(v,"errMsg",3,""),h=H(v,"disabled",3,!1),u=H(v,"required",3,!1),z=H(v,"isError",15,!1),W=H(v,"width",3,"inherit");const T=v.pattern?new RegExp(v.pattern,"gm"):void 0;function Y(f){var p;_(),(p=v.onBlur)==null||p.call(v)}function C(f){f.preventDefault(),z(!0)}function Q(f){_()}function _(){var f,p;return T&&(x().match(T).length>2?((f=a())==null||f.setCustomValidity(c()),z(!0)):((p=a())==null||p.setCustomValidity(""),z(!1))),!0}var L=Dr(),w=r(L);tt(w),w.__input=[Ir,_],w.__keydown=[qr,_,v],Da(w,f=>a(f),()=>a());var j=o(w,2),S=r(j),se=r(S,!0);t(S);var oe=o(S,2);{var re=f=>{var p=Lr(),E=r(p,!0);t(p),k(()=>d(E,c())),Ve(3,p,()=>Ta),n(f,p)};I(oe,f=>{z()&&f(re)})}t(j),t(L),k(()=>{Se(L,"width",W()),de(w,"id",s()),de(w,"name",v.name),de(w,"title",c()),de(w,"aria-label",i()||g()),de(w,"rows",b()),de(w,"placeholder",g()),de(w,"aria-placeholder",g()),w.disabled=h(),de(w,"aria-disabled",h()),de(w,"maxlength",v.maxLength||void 0),w.required=u()||void 0,de(w,"aria-required",u()||!1),de(w,"aria-invalid",z()),de(S,"for",s()),de(S,"data-required",u()),d(se,i())}),oa("submit",w,Q),oa("invalid",w,C),oa("blur",w,Y),Dt(w,x),n(M,L),Pe()}pa(["input","keydown"]);var Pr=$("<div><p> </p> <!></div>"),Tr=$('<div class="success svelte-5kivuv"><!></div>'),Er=$('<div class="err svelte-5kivuv"> </div>'),Nr=$('<div class="container svelte-5kivuv"><p> </p> <p><!></p> <div class="switch svelte-5kivuv"><!></div> <div class="switch svelte-5kivuv"><!></div> <!> <div class="bottom svelte-5kivuv"><!> <!></div></div>');function Fa(M,v){Ce(v,!0);let a=H(v,"webIdData",15),s=We();const x="14rem";let i=R(""),b=R(!1),g=R(!!a().custom_triples),c=ma(a().user_id);Fe(()=>{e(b)&&setTimeout(()=>{l(b,!1)},3e3)});async function h(){l(i,"");let p=await _t(a().user_id,a());if(p.ok)l(b,!0);else{let E=await p.json();l(i,q(E.message))}}var u=Nr(),z=r(u),W=r(z,!0);t(z);var T=o(z,2),Y=r(T);Ct(Y,{href:c,target:"_blank",children:(p,E)=>{var m=me(),G=X(m);Ia(G,()=>c.replace("/auth/","/auth/<wbr/>")),n(p,m)},$$slots:{default:!0}}),t(T);var C=o(T,2),Q=r(C);Ua(Q,{ariaLabel:"E-Mail",labelWidth:x,get checked(){return a().expose_email},set checked(p){a(a().expose_email=p,!0)},children:(p,E)=>{we();var m=ye("E-Mail");n(p,m)},$$slots:{default:!0}}),t(C);var _=o(C,2),L=r(_);Ua(L,{get ariaLabel(){return s.account.webIdExpertMode},labelWidth:x,get checked(){return e(g)},set checked(p){l(g,q(p))},children:(p,E)=>{we();var m=ye();k(()=>d(m,s.account.webIdExpertMode)),n(p,m)},$$slots:{default:!0}}),t(_);var w=o(_,2);{var j=p=>{var E=Pr(),m=r(E),G=r(m,!0);t(m);var ne=o(m,2);Cr(ne,{placeholder:"FOAF",rows:15,get value(){return a().custom_triples},set value(fe){a(a().custom_triples=fe,!0)}}),t(E),k(()=>d(G,s.account.webIdDescData)),Ve(3,E,()=>Ta),n(p,E)};I(w,p=>{e(g)&&p(j)})}var S=o(w,2),se=r(S);ke(se,{onclick:h,children:(p,E)=>{we();var m=ye();k(()=>d(m,s.common.save)),n(p,m)},$$slots:{default:!0}});var oe=o(se,2);{var re=p=>{var E=Tr(),m=r(E);ia(m,{}),t(E),Ve(3,E,()=>je),n(p,E)},f=p=>{var E=me(),m=X(E);{var G=ne=>{var fe=Er(),y=r(fe,!0);t(fe),k(()=>d(y,e(i))),Ve(3,fe,()=>je),n(ne,fe)};I(m,ne=>{e(i)&&ne(G)},!0)}n(p,E)};I(oe,p=>{e(b)?p(re):p(f,!1)})}t(S),t(u),k(()=>d(W,s.account.webIdDesc)),n(M,u),Pe()}function Wr(M){Aa(M,{viewMode:"account"})}var Ar=$('<span class="font-label tab svelte-mkcuiv"> </span>'),zr=$('<div class="tabs svelte-mkcuiv"></div>');function Ja(M,v){Ce(v,!0);let a=H(v,"selected",15,""),s=H(v,"borderRadius",3,"5px"),x=H(v,"center",3,!1),i=H(v,"width",3,"inherit");v.tabs.length>0&&a()===""&&a(v.tabs[0]);var b=zr();fa(b,21,()=>v.tabs,ut,(g,c)=>{var h=_e(()=>e(c)===a()?"step":void 0);ke(g,{get ariaCurrent(){return e(h)},invisible:!0,onclick:()=>a(e(c)),children:(u,z)=>{var W=Ar(),T=r(W,!0);t(W),k(()=>{de(W,"data-selected",e(c)===a()),d(T,e(c))}),n(u,W)},$$slots:{default:!0}})}),t(b),k(()=>{ga(b,"center",x()),Se(b,"border-radius",s()),Se(b,"width",i())}),n(M,b),Pe()}var Mr=$("<h3> </h3>"),Rr=$('<div class="headerPhone svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="innerPhone svelte-k6hxbm"><!></div></div>',1),Vr=$('<div class="header svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="inner svelte-k6hxbm"><!></div></div>',1),Ur=$('<!> <div class="wrapper svelte-k6hxbm"><!></div>',1);function Fr(M,v){Ce(v,!0);const a=L=>{var w=Mr(),j=r(w,!0);t(w),k(()=>d(j,`${s().given_name} ${s().family_name||""}`)),n(L,w)};let s=H(v,"user",15),x=H(v,"webIdData",15),i=We(),b=R(void 0),g=R(q([])),c=_e(()=>{var L;if((L=s().account_type)!=null&&L.startsWith("federated"))return e(g).filter(w=>w.id===s().auth_provider_id)[0]}),h=_e(()=>e(b)&&e(b)<500),u=R(q(i.account.navInfo)),z=q(x()?[i.account.navInfo,i.account.navEdit,i.common.password,i.account.navMfa,"WebID",i.account.devices,i.account.navLogout]:[i.account.navInfo,i.account.navEdit,i.common.password,i.account.navMfa,i.account.devices,i.account.navLogout]);va(()=>{Tt("v").get()==="devices"&&l(u,q(i.account.devices))}),Fe(()=>{e(u)===i.account.navLogout&&lt()});var W=Ur(),T=X(W);Pt(T,{id:ct,get value(){return e(g)},set value(L){l(g,q(L))}});var Y=o(T,2),C=r(Y);{var Q=L=>{var w=Rr(),j=X(w),S=r(j);a(S),t(j);var se=o(j,2),oe=r(se);Ja(oe,{get tabs(){return z},get selected(){return e(u)},set selected(m){l(u,q(m))}});var re=o(oe,2),f=r(re);{var p=m=>{za(m,{get providers(){return e(g)},get authProvider(){return e(c)},viewModePhone:!0,get webIdData(){return x()},get user(){return s()},set user(G){s(G)}})},E=m=>{var G=me(),ne=X(G);{var fe=U=>{Ma(U,{viewModePhone:!0,get user(){return s()},set user(F){s(F)}})},y=U=>{var F=me(),V=X(F);{var B=K=>{Va(K,{get user(){return s()},get authProvider(){return e(c)},viewModePhone:!0})},ve=K=>{var pe=me(),le=X(pe);{var $e=P=>{Ra(P,{get user(){return s()}})},J=P=>{var D=me(),A=X(D);{var ae=N=>{Fa(N,{get webIdData(){return x()},set webIdData(te){x(te)}})},ge=N=>{var te=me(),ce=X(te);{var Ie=qe=>{Aa(qe,{viewMode:"account"})};I(ce,qe=>{e(u)===i.account.devices&&qe(Ie)},!0)}n(N,te)};I(A,N=>{e(u)==="WebID"?N(ae):N(ge,!1)},!0)}n(P,D)};I(le,P=>{e(u)===i.account.navMfa?P($e):P(J,!1)},!0)}n(K,pe)};I(V,K=>{e(u)===i.common.password?K(B):K(ve,!1)},!0)}n(U,F)};I(ne,U=>{e(u)===i.account.navEdit?U(fe):U(y,!1)},!0)}n(m,G)};I(f,m=>{e(u)===i.account.navInfo?m(p):m(E,!1)})}t(re),t(se),n(L,w)},_=L=>{var w=Vr(),j=X(w),S=r(j);a(S),t(j);var se=o(j,2),oe=r(se);Ja(oe,{get tabs(){return z},center:!0,get selected(){return e(u)},set selected(m){l(u,q(m))}});var re=o(oe,2),f=r(re);{var p=m=>{za(m,{get webIdData(){return x()},get providers(){return e(g)},get authProvider(){return e(c)},get user(){return s()},set user(G){s(G)}})},E=m=>{var G=me(),ne=X(G);{var fe=U=>{Ma(U,{get user(){return s()},set user(F){s(F)}})},y=U=>{var F=me(),V=X(F);{var B=K=>{Va(K,{get user(){return s()},get authProvider(){return e(c)}})},ve=K=>{var pe=me(),le=X(pe);{var $e=P=>{Ra(P,{get user(){return s()}})},J=P=>{var D=me(),A=X(D);{var ae=N=>{Fa(N,{get webIdData(){return x()},set webIdData(te){x(te)}})},ge=N=>{var te=me(),ce=X(te);{var Ie=qe=>{Wr(qe)};I(ce,qe=>{e(u)===i.account.devices&&qe(Ie)},!0)}n(N,te)};I(A,N=>{e(u)==="WebID"?N(ae):N(ge,!1)},!0)}n(P,D)};I(le,P=>{e(u)===i.account.navMfa?P($e):P(J,!1)},!0)}n(K,pe)};I(V,K=>{e(u)===i.common.password?K(B):K(ve,!1)},!0)}n(U,F)};I(ne,U=>{e(u)===i.account.navEdit?U(fe):U(y,!1)},!0)}n(m,G)};I(f,m=>{e(u)===i.account.navInfo?m(p):m(E,!1)})}t(re),t(se),n(L,w)};I(C,L=>{e(h)?L(Q):L(_,!1)})}t(Y),rt("innerWidth",L=>l(b,q(L))),n(M,W),Pe()}var Jr=$("<!> <!> <!>",1);function Hr(M,v){Ce(v,!0);let a=We(),s=Na("account"),x=R(void 0),i=R(void 0),b=R(!1);Fe(()=>{let c=s.get();c&&g(c)});async function g(c){const h=c.user_id;if(h){let u=await Promise.all([ea(`/auth/v1/users/${h}`),ea(`/auth/v1/users/${h}/webid/data`)]);u[0].body?l(x,q(u[0].body)):dt("account"),u[1].body?l(i,q(u[1].body)):u[1].status===404&&l(i,q({user_id:h,expose_email:!1})),l(b,!0)}else console.error("no user_id in session")}et(c=>{k(()=>{var h;return Za.title=`${((a==null?void 0:a.account.account)||"Account")??""} ${((h=e(x))==null?void 0:h.email)??""}`})}),Et(M,{children:(c,h)=>{Nt(c,{children:(u,z)=>{var W=Jr(),T=X(W);{var Y=_=>{Fr(_,{get user(){return e(x)},set user(L){l(x,q(L))},get webIdData(){return e(i)},set webIdData(L){l(i,q(L))}})};I(T,_=>{e(b)&&s&&e(x)&&_(Y)})}var C=o(T,2);Wt(C,{absolute:!0});var Q=o(C,2);At(Q,{absolute:!0}),n(u,W)},$$slots:{default:!0}})},$$slots:{default:!0}}),Pe()}export{Hr as component};
