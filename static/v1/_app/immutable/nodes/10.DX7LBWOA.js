import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.pqhLE6I2.js";import{c as o,r as i,s as l,u as e,t as K,p as le,aO as Ot,v as s,a as se,w as z,f as de,F as mt,aM as bt,ao as Ee,aq as D,ar as Dt}from"../chunks/index-client.ChFmlJin.js";import{s as ie,d as yt,e as xe}from"../chunks/render.D821es-0.js";import{e as wt,i as Bt}from"../chunks/each.QTCItWz3.js";import{a as n,t as S,e as Se,d as B,n as ra}from"../chunks/template.DOaMAhd6.js";import{p}from"../chunks/proxy.DVTQVrWW.js";import{B as la,C as sa,D as ia,E as oa,F as va,G as ca,H as na,I as da,J as ua,K as pa,L as ga,q as ha}from"../chunks/dataFetchingAdmin.CWfMXXPM.js";import{d as Mt,e as fa}from"../chunks/admin.BDgb0RdI.js";import{i as V}from"../chunks/if.DhkeN2Rc.js";import{t as ne,f as ma,a as j,s as ue}from"../chunks/index.BCW953sO.js";import{p as W,c as Ut,r as $t}from"../chunks/props.B17NqqFW.js";import{E as Ft,T as Vt,a as ba,O as ya,P as wa}from"../chunks/Pagination.CbuOAm9_.js";import{r as ye}from"../chunks/legacy-client.CNC41JPz.js";import{I as Z,c as kt,a as Y,b as $a,B as Te}from"../chunks/Input.mueckHaA.js";import{a7 as ka,a8 as Ia,a9 as Wt,o as Ze,aa as _a,ab as Ca,ac as qt,q as It,ad as oe,ae as za}from"../chunks/helpers.BweJi6s8.js";import{S as Xe}from"../chunks/Switch.DcXaF-wz.js";import{I as Pt}from"../chunks/ItemTiles.xXeyeqNZ.js";import{O as Gt}from"../chunks/OptionSelect.Bi7wimFH.js";import{s as _t}from"../chunks/snippet.BgXKOAqY.js";import{g as it}from"../chunks/helpers.mrWtKrwW.js";import{P as Ea,b as xa,a as Sa}from"../chunks/PasswordInput.BLD_vrrz.js";import{r as ae,s as Je,d as Ta}from"../chunks/class.CSTj5U-k.js";import{b as ve}from"../chunks/input.DBuVJGyE.js";import{L as Ra}from"../chunks/Loading.BSUg0s8C.js";import{b as ja}from"../chunks/this.DLQK4UbS.js";var La=S('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),Aa=S('<div class="list svelte-f2hz2l"></div>');function Kt(N,v){let t=W(v,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var g=Aa();wt(g,21,t,Bt,(u,m,k)=>{var b=La(),T=o(b),h=o(T,!0);i(T);var a=l(T,2);Xe(a,{get selected(){return e(m).value},set selected(I){e(m).value=I}}),i(b),K(()=>ie(h,e(m).label)),n(u,b)}),i(g),n(N,g)}var Na=S("<div><!></div>");function Oa(N,v){le(v,!0);let t=W(v,"validation",19,()=>({})),g=W(v,"value",15),u=W(v,"autocomplete",11,"on"),m=W(v,"validate",15),k=$t(v,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);m(I);let b=z("");const T=Ot();async function h(){await bt(),T("input",!0),I()}async function a(){T("blur",!0),I()}function I(){var $;return s(b,""),g()&&(($=t())!=null&&$.regex)&&!g().match(t().regex)?(s(b,p(t().errMsg||"Invalid input")),!1):!0}var w=Na(),R=o(w);return Z(R,Ut({get width(){return v.width},get name(){return v.name},get autocomplete(){return u()}},()=>k,{get value(){return g()},set value($){g($)},get error(){return e(b)},set error($){s(b,p($))},$$events:{input:h,blur:a},children:($,_)=>{var d=Se(),x=de(d);_t(x,()=>v.children??mt),n($,d)},$$slots:{default:!0}})),i(w),ne(7,w,()=>ma,()=>({duration:200})),n(N,w),se({validateValue:I})}var Da=S('<div class="err svelte-nzivgu"> </div>'),Ba=S('<div class="container svelte-nzivgu"><!> <!></div>');function Re(N,v){le(v,!0);let t=W(v,"validation",27,()=>p({required:!1,regex:void 0,errMsg:""})),g=W(v,"values",15),u=W(v,"validate",15),m=W(v,"width",3,"260px"),k=W(v,"optional",3,!1),b=W(v,"autocomplete",15,"on"),T=$t(v,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);u($);let h=z(""),a=z(p([]));const I=Ot();Ee(()=>{g()||g([]);for(let y of g())e(a).push({name:it(),value:y});e(a).push({name:it(),value:""})});async function w(){await bt(),e(a)[e(a).length-1].value?e(a).push({name:it(),value:""}):e(a).length>1&&!e(a)[e(a).length-2].value&&s(a,p([...e(a).slice(0,e(a).length-1)])),I("input",!0),$(),g(R())}function R(){$();let y=[];for(let A=0;A<e(a).length-1;A++)y.push(e(a)[A].value);return y}function $(){if(t().required&&e(a).length===1&&!e(a)[0].value)return k()?!0:(s(h,"Required"),!1);let y=!0;for(let A of e(a))A.value&&!A.validate()&&(y=!1);return y}var _=Ba(),d=o(_);wt(d,17,()=>e(a),Bt,(y,A,F)=>{Oa(y,Ut({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(A).name}},()=>T,{get value(){return e(A).value},set value(M){e(A).value=M},get validate(){return e(A).validate},set validate(M){e(A).validate=M},get autocomplete(){return b()},set autocomplete(M){b(M)},$$events:{input:w,blur:w},children:(M,Q)=>{var X=Se(),te=de(X);_t(te,()=>v.children??mt),n(M,X)},$$slots:{default:!0}}))});var x=l(d,2);{var O=y=>{var A=Da(),F=o(A,!0);i(A),K(()=>ie(F,e(h))),n(y,A)};V(x,y=>{e(h)&&y(O)})}return i(_),K(()=>j(_,"width",m())),n(N,_),se({getValues:R,validateValues:$})}var Ma=S('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),Ua=S(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),Fa=S('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),Va=S('<div class="success svelte-1pba61y">Success</div>'),Wa=S('<div class="mainErr err svelte-1pba61y"> </div>'),qa=S(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function Pa(N,v){le(v,!0);let t=W(v,"client",31,()=>p({}));const g="350px";let u=z(""),m=z(!1),k=z(void 0),b=p(ka.map(c=>{var L,U;return c.label==="device_code"?c.value=(L=t().flows_enabled)==null?void 0:L.includes("urn:ietf:params:oauth:grant-type:device_code"):c.value=(U=t().flows_enabled)==null?void 0:U.includes(c.label),c})),T=z(void 0);Mt.subscribe(c=>{s(T,p(c))});let h=p(Ia.map(c=>{var L;return c.value=(L=t().challenges)==null?void 0:L.includes(c.label),c})),a=z(void 0),I=z(void 0),w=z(void 0),R=z(void 0);Ee(()=>()=>clearTimeout(e(k)));let $=z(p({}));const _=kt().shape({name:Y().trim().matches(Wt,"Can only contain characters, numbers and '-'"),client_uri:Y().trim().nullable().matches(Ze,"Invalid URI"),access_token_lifetime:$a().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function d(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function x(c){c.code==="Enter"&&O()}async function O(){s(u,"");const c=await y();if(!e(I)()){s(u,"Invalid Allowed Origin");return}if(!e(w)()){s(u,"Invalid Redirect URIs");return}if(!e(R)()){s(u,"Invalid Post Logout URIs");return}if(!e(a)()){s(u,"Invalid Contacts");return}if(!c){s(u,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=b.filter(J=>J.value).map(J=>J.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":J.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){s(u,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){s(u,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){s(u,"At least one flow must be enabled");return}let L=t();t(t().challenges=h.filter(J=>J.value).map(J=>J.label),!0),t().challenges.length===0&&(L.challenges=null),L.name||(L.name=void 0),L.allowed_origins.length>0&&!L.allowed_origins[0]&&(L.allowed_origins=[]);let U=await la(L);if(U.ok)s(m,!0);else{let J=await U.json();s(u,p(J.message))}}async function y(){try{return await _.validate(t(),{abortEarly:!1}),s($,p({})),!0}catch(c){return s($,p(It(c))),!1}}ye(()=>{t().id&&d()}),ye(()=>{e(m)&&s(k,p(setTimeout(()=>{s(m,!1),v.onSave()},3e3)))});var A=qa(),F=o(A),M=l(o(F),2),Q=o(M,!0);i(M),i(F);var X=l(F,4);Z(X,{autocomplete:"off",placeholder:"Client Name",width:g,get value(){return t().name},set value(c){t(t().name=c,!0)},get error(){return e($).name},set error(c){e($).name=c},$$events:{keypress:x,input:y},children:(c,L)=>{D();var U=B("CLIENT NAME");n(c,U)},$$slots:{default:!0}});var te=l(X,4);Z(te,{autocomplete:"off",placeholder:"Client URI",width:g,get value(){return t().client_uri},set value(c){t(t().client_uri=c,!0)},get error(){return e($).client_uri},set error(c){e($).client_uri=c},$$events:{keypress:x,input:y},children:(c,L)=>{D();var U=B("CLIENT URI");n(c,U)},$$slots:{default:!0}});var ee=l(te,2);Re(ee,{style:`width: ${g}`,validation:{required:!1,regex:_a,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(c){t(t().contacts=c,!0)},get validate(){return e(a)},set validate(c){s(a,p(c))},children:(c,L)=>{D();var U=B("CONTACT");n(c,U)},$$slots:{default:!0}});var H=l(ee,4);j(H,"margin-top","-5px");var P=o(H);j(P,"width","138px");var C=l(o(P),2),f=o(C);Xe(f,{get selected(){return t().enabled},set selected(c){t(t().enabled=c,!0)}}),i(C),i(P);var E=l(P,2);j(E,"width","110px");var G=l(o(E),2),pe=o(G);Xe(pe,{get selected(){return t().confidential},set selected(c){t(t().confidential=c,!0)}}),i(G),i(E),i(H);var re=l(H,2),je=l(o(re),2),Le=o(je);Kt(Le,{get options(){return b}}),i(je),i(re);var Ae=l(re,2),we=l(o(Ae),2),Ye=o(we);Xe(Ye,{get selected(){return t().force_mfa},set selected(c){t(t().force_mfa=c,!0)}}),i(we),i(Ae);var Ne=l(Ae,2);{var Oe=c=>{var L=Ma();j(L,"margin","-10px 0 -15px 5px");var U=o(L),J=o(U);j(J,"color","var(--col-err)"),D(7),i(U),i(L),n(c,L)},ot=c=>{var L=Se(),U=de(L);{var J=be=>{var he=Ua();j(he,"margin","-10px 0 -15px 5px");var Ke=o(he),He=o(Ke);j(He,"color","var(--col-err)"),D(5),i(Ke),i(he),ne(3,he,()=>ue),n(be,he)};V(U,be=>{t().force_mfa&&be(J)},!0)}n(c,L)};V(Ne,c=>{t().id==="rauthy"?c(Oe):c(ot,!1)})}var ge=l(Ne,6);j(ge,"margin-top","-10px");var Qe=l(o(ge),2);Pt(Qe,{get options(){return e(T)},searchThreshold:4,get items(){return t().scopes},set items(c){t(t().scopes=c,!0)}}),i(ge);var fe=l(ge,2);j(fe,"margin-top","-3px");var De=l(o(fe),2);Pt(De,{get options(){return e(T)},searchThreshold:4,get items(){return t().default_scopes},set items(c){t(t().default_scopes=c,!0)}}),i(fe);var et=l(fe,4);Re(et,{style:`width: ${g}`,validation:{required:!0,regex:Ca,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(c){t(t().allowed_origins=c,!0)},get validate(){return e(I)},set validate(c){s(I,p(c))},children:(c,L)=>{D();var U=B("ALLOWED ORIGIN");n(c,U)},$$slots:{default:!0}});var $e=l(et,4);Re($e,{style:`width: ${g}`,validation:{required:!0,regex:Ze,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(c){t(t().redirect_uris=c,!0)},get validate(){return e(w)},set validate(c){s(w,p(c))},children:(c,L)=>{D();var U=B("REDIRECT URI");n(c,U)},$$slots:{default:!0}});var Be=l($e,4);Re(Be,{style:`width: ${g}`,validation:{required:!0,regex:Ze,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(c){t(t().post_logout_redirect_uris=c,!0)},get validate(){return e(R)},set validate(c){s(R,p(c))},children:(c,L)=>{D();var U=B("POST LOGOUT REDIRECT URI");n(c,U)},$$slots:{default:!0}});var Me=l(Be,6);Z(Me,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:g,get value(){return t().access_token_lifetime},set value(c){t(t().access_token_lifetime=c,!0)},get error(){return e($).access_token_lifetime},set error(c){e($).access_token_lifetime=c},$$events:{input:y},children:(c,L)=>{D();var U=B("ACCESS TOKEN LIFETIME");n(c,U)},$$slots:{default:!0}});var me=l(Me,2),ke=o(me);j(ke,"width","220px");var Ie=l(o(ke),2),tt=o(Ie);Gt(tt,{options:qt,get value(){return t().access_token_alg},set value(c){t(t().access_token_alg=c,!0)}}),i(Ie),i(ke);var Ue=l(ke,2),_e=o(Ue);j(_e,"text-align","right");var at=l(_e,2),Fe=o(at);Gt(Fe,{options:qt,get value(){return t().id_token_alg},set value(c){t(t().id_token_alg=c,!0)}}),i(at),i(Ue),i(me);var Ce=l(me,6),Ve=l(o(Ce),2),We=o(Ve);Kt(We,{get options(){return h}}),i(Ve),i(Ce);var qe=l(Ce,2),Pe=o(qe);{var rt=c=>{var L=Fa();D(4),n(c,L)};V(Pe,c=>{t().id==="rauthy"&&c(rt)})}i(qe);var Ge=l(qe,2);Te(Ge,{level:1,width:"4rem",$$events:{click:O},children:(c,L)=>{D();var U=B("SAVE");n(c,U)},$$slots:{default:!0}});var ze=l(Ge,2);{var vt=c=>{var L=Va();n(c,L)};V(ze,c=>{e(m)&&c(vt)})}var lt=l(ze,2);{var st=c=>{var L=Wa(),U=o(L,!0);i(L),K(()=>ie(U,e(u))),n(c,L)};V(lt,c=>{e(u)&&c(st)})}i(A),K(()=>ie(Q,t().id)),n(N,A),se()}var Ga=S('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function Ka(N,v){le(v,!0);let t=z(""),g=z("");Ee(()=>{u()});async function u(){let R=await sa(v.client.id),$=await R.json();R.ok?s(g,p($.secret)):s(t,p($.message))}async function m(){let R=await ia(v.client.id),$=await R.json();R.ok?await u():s(t,p($.message))}var k=Ga(),b=o(k),T=o(b,!0);i(b);var h=l(b,2),a=o(h);{var I=R=>{Ea(R,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(g)},set value($){s(g,p($))},children:($,_)=>{D();var d=B("CLIENT SECRET");n($,d)},$$slots:{default:!0}})};V(a,R=>{e(g)&&R(I)})}i(h);var w=l(h,2);Te(w,{level:1,$$events:{click:m},children:(R,$)=>{D();var _=B("GENERATE NEW");n(R,_)},$$slots:{default:!0}}),i(k),K(()=>ie(T,e(t))),n(N,k),se()}var Ha=S('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),Za=S('<div class="err svelte-1jljqe9"> </div>'),Xa=S('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),Ja=S('<div class="container svelte-1jljqe9"><!></div>');function Ya(N,v){le(v,!0);let t=W(v,"client",19,()=>({})),g=z(!1),u=z("");async function m(){s(u,""),s(g,!0);let a=await oa(t().id);if(a.ok)v.onSave();else{let I=await a.json();s(u,p(I.message))}s(g,!1)}var k=Ja(),b=o(k);{var T=a=>{var I=Ha();n(a,I)},h=a=>{var I=Xa(),w=l(de(I),2);Te(w,{level:1,get isLoading(){return e(g)},set isLoading(_){s(g,p(_))},$$events:{click:m},children:(_,d)=>{D();var x=B("DELETE");n(_,x)},$$slots:{default:!0}});var R=l(w,2);{var $=_=>{var d=Za(),x=o(d,!0);i(d),K(()=>ie(x,e(u))),n(_,d)};V(R,_=>{e(u)&&_($)})}n(a,I)};V(b,a=>{t().id==="rauthy"?a(T):a(h,!1)})}i(k),n(N,k),se()}var Qa=(N,v)=>s(v,!0),er=S('<div class="load svelte-icxpvn"><!></div>'),tr=S('<div class="txt svelte-icxpvn">LOAD</div>'),ar=S('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function Ct(N,v){le(v,!0);let t=z(!1),g=z(!1),u=z(void 0),m=z(void 0),k=z(void 0),b=z(void 0),T=z(void 0),h=z("white");Dt(()=>{clearTimeout(e(T))});function a(){switch(v.level){case 1:s(u,p(v.colors.act1)),s(m,p(v.colors.act1a)),s(k,"white"),s(b,`1px solid ${v.colors.gmid}`);break;case 2:s(u,p(v.colors.act2)),s(m,p(v.colors.act2a)),s(k,p(v.colors.ghigh)),s(b,`1px solid ${v.colors.gmid}`);break;default:s(u,p(v.colors.ghigh)),s(m,"white"),s(k,p(v.colors.act2a)),s(b,`1px solid ${v.colors.act2a}`),s(h,p(v.colors.acnt))}}ye(()=>{e(g)&&s(T,p(setTimeout(()=>{s(g,!1)},2e3)))}),ye(()=>{v.colors&&a()});var I=ar(),w=o(I);w.__click=[Qa,g],j(w,"width","100px");var R=o(w);{var $=d=>{var x=er(),O=o(x);Ra(O,{background:!1,get color(){return e(h)}}),i(x),n(d,x)},_=d=>{var x=tr();n(d,x)};V(R,d=>{e(g)?d($):d(_,!1)})}i(w),i(I),K(()=>{j(w,"border",e(b)),j(w,"box-shadow",`1px 1px 2px ${v.colors.gmid??""}`),j(w,"cursor",e(g)?"default":"pointer"),j(w,"color",e(k)),j(w,"background",e(t)?e(m):e(u))}),xe("focus",w,()=>s(t,!0)),xe("blur",w,()=>s(t,!1)),xe("keypress",w,()=>s(g,!0)),n(N,I),se()}yt(["click"]);var rr=S('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),lr=S('<div class="err font-label svelte-115vejc"> </div>'),sr=S('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function Ht(N,v){le(v,!0);let t=W(v,"colors",19,()=>({})),g=W(v,"error",3,""),u=W(v,"name",3,""),m=W(v,"password",3,!1),k=W(v,"value",3,""),b=W(v,"width",3,"250px"),T=$t(v,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),h=z(p(m()?"new-password":"text")),a=z(!1),I=z(!1);function w(){e(h)==="password"?s(h,"text"):s(h,"password")}var R=sr(),$=o(R),_=o($),d=o(_),x=o(d);_t(x,()=>v.children??mt),i(d),i(_),i($);var O=l($,2);ae(O);var y=()=>s(a,!0),A=()=>s(a,!1),F=()=>s(I,!0),M=()=>s(I,!1);let Q;var X=l(O,2);{var te=P=>{var C=rr(),f=o(C);f.__click=w;var E=o(f);{var G=re=>{xa(re,{width:22,get color(){return t().err}})},pe=re=>{Sa(re,{width:22,get color(){return t().ok}})};V(E,re=>{e(h)==="password"?re(G):re(pe,!1)})}i(f),i(C),xe("keypress",f,w),n(P,C)};V(X,P=>{m()&&P(te)})}var ee=l(X,2);{var H=P=>{var C=lr(),f=o(C,!0);i(C),K(()=>{j(C,"width",b()),j(C,"color",t().err),ie(f,g())}),ne(7,C,()=>ue,()=>({duration:250})),n(P,C)};V(ee,P=>{g()&&P(H)})}i(R),K(()=>{j(R,"width",`calc(${b()??""} + 12px)`),j(_,"background",t().bg),Je(d,"for",u()),Q=Ta(O,Q,{type:e(h),onmouseenter:y,onmouseleave:A,onfocus:F,onblur:M,autocomplete:"off",name:u(),value:k(),...T},"svelte-115vejc"),j(O,"width",b()),j(O,"background",(e(a)||e(I),t().bg)),j(O,"border",e(I)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),j(O,"color",t().text),j(O,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),n(N,R),se()}yt(["click"]);var ir=S('<img alt="No Logo Available">');function Zt(N,v){le(v,!0);var t=ir();K(()=>Je(t,"src",`/auth/v1/clients/${v.clientId}/logo?${it(6)}`)),n(N,t),se()}var or=S('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function vr(N,v){le(v,!0);let t="This is an E-Mail error",g="This is a password error";var u=or(),m=l(de(u),2),k=o(m),b=o(k),T=o(b);{var h=d=>{Zt(d,{get clientId(){return v.clientId}})};V(T,d=>{v.isLoading||d(h)})}i(b),i(k);var a=l(k,4);Ht(a,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return v.colors},children:(d,x)=>{D();var O=B("E-MAIL");n(d,O)},$$slots:{default:!0}});var I=l(a,2);Ht(I,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return g},get colors(){return v.colors},children:(d,x)=>{D();var O=B("E-MAIL");n(d,O)},$$slots:{default:!0}});var w=l(I,2),R=o(w);Ct(R,{get colors(){return v.colors},level:1});var $=l(R,2);Ct($,{get colors(){return v.colors},level:2});var _=l($,2);Ct(_,{get colors(){return v.colors},level:3}),i(w),i(m),K(()=>{j(m,"color",v.colors.text),j(m,"border",`1px solid ${v.colors.gmid??""}`),j(m,"background",v.colors.bg)}),n(N,u),se()}var cr=ra('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function nr(N,v){let t=W(v,"opacity",3,.9),g=W(v,"width",3,24);var u=cr();Je(u,"stroke-width",2),K(()=>{Je(u,"width",g()),Je(u,"opacity",t())}),n(N,u)}var dr=(N,v)=>e(v).click(),ur=(N,v)=>e(v).click(),pr=(N,v)=>v(N),gr=S('<div class="container svelte-1o4mfj0"><div role="button" tabindex="0" class="btn svelte-1o4mfj0"><!></div> <div role="button" tabindex="0" class="text noselect font-label svelte-1o4mfj0"> </div> <input class="imageInput svelte-1o4mfj0" type="file" accept=".jpg, .jpeg, .png, .svg"></div>');function hr(N,v){let t=W(v,"text",3,"Upload Logo"),g=z(void 0),u=z(void 0);async function m(w){s(u,p(w.target.files[0]))}var k=gr(),b=o(k);b.__click=[dr,g];var T=o(b);nr(T,{width:22}),i(b);var h=l(b,2);h.__click=[ur,g];var a=o(h,!0);i(h);var I=l(h,2);I.__change=[pr,m],ja(I,w=>s(g,w),()=>e(g)),i(k),K(()=>ie(a,t())),xe("keypress",b,()=>e(g).click()),xe("keypress",h,()=>e(g).click()),n(N,k)}yt(["click","change"]);var fr=S('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),mr=S('<div class="preview svelte-11vvvzr"><!></div>'),br=S('<div class="success svelte-11vvvzr">Success</div>'),yr=S('<div class="err svelte-11vvvzr"> </div>'),wr=S(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function $r(N,v){le(v,!0);let t=W(v,"client",19,()=>({})),g=z(void 0),u=z(void 0),m=z(!1),k=z(""),b=z(!1),T=z(void 0),h=z(p({})),a=z(p({}));const I=kt().shape({act1:Y().trim().matches(oe,"only valid CSS color"),act1a:Y().trim().matches(oe,"only valid CSS color"),act2:Y().trim().matches(oe,"only valid CSS color"),act2a:Y().trim().matches(oe,"only valid CSS color"),acnt:Y().trim().matches(oe,"only valid CSS color"),acnta:Y().trim().matches(oe,"only valid CSS color"),ok:Y().trim().matches(oe,"only valid CSS color"),err:Y().trim().matches(oe,"only valid CSS color"),glow:Y().trim().matches(oe,"only valid CSS color"),gmid:Y().trim().matches(oe,"only valid CSS color"),ghigh:Y().trim().matches(oe,"only valid CSS color"),text:Y().trim().matches(oe,"only valid CSS color"),bg:Y().trim().matches(oe,"only valid CSS color")});Ee(async()=>{await w()}),Dt(()=>{e(T)&&clearTimeout(e(T))});async function w(){let f=await va(t().id);if(f.ok){let E=await f.json();s(g,p(E)),s(a,p(E))}else{let E=await f.json();s(k,p(E.message))}}async function R(){if(s(k,""),s(m,!0),!await d())return;let f=await ca(t().id,e(a));if(f.ok)s(b,!0);else{let E=await f.json();s(k,p(E.message))}s(m,!1)}async function $(){s(k,""),s(m,!0);let f=await na(t().id);if(f.ok)await da(t().id),await w(),s(b,!0);else{let E=await f.json();s(k,p(E.message))}s(m,!1)}async function _(f){s(m,!0),await bt();let E=await ua(t().id,f);if(!E.ok){let G=await E.json();console.error(G.message)}s(m,!1)}async function d(){try{await I.validate(e(a),{abortEarly:!1}),s(h,p({}))}catch(f){return s(h,p(It(f))),!1}return s(g,p(e(a))),!0}ye(()=>{e(b)&&s(T,p(setTimeout(()=>{s(b,!1)},3e3)))}),ye(()=>{e(u)&&_(e(u))});var x=wr(),O=l(o(x),2),y=o(O);{var A=f=>{var E=fr(),G=de(E),pe=o(G),re=o(pe);Z(re,{autocomplete:"off",placeholder:"act1",get value(){return e(a).act1},set value(r){e(a).act1=r},get error(){return e(h).act1},set error(r){e(h).act1=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("act1");n(r,q)},$$slots:{default:!0}});var je=l(re,2),Le=o(je);ae(Le);var Ae=l(Le,2);i(je),i(pe);var we=l(pe,2),Ye=o(we);Z(Ye,{autocomplete:"off",placeholder:"act1a",get value(){return e(a).act1a},set value(r){e(a).act1a=r},get error(){return e(h).act1a},set error(r){e(h).act1a=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("act1a");n(r,q)},$$slots:{default:!0}});var Ne=l(Ye,2),Oe=o(Ne);ae(Oe);var ot=l(Oe,2);i(Ne),i(we);var ge=l(we,2),Qe=o(ge);Z(Qe,{autocomplete:"off",placeholder:"act2",get value(){return e(a).act2},set value(r){e(a).act2=r},get error(){return e(h).act2},set error(r){e(h).act2=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("act2");n(r,q)},$$slots:{default:!0}});var fe=l(Qe,2),De=o(fe);ae(De);var et=l(De,2);i(fe),i(ge);var $e=l(ge,2),Be=o($e);Z(Be,{autocomplete:"off",placeholder:"act2a",get value(){return e(a).act2a},set value(r){e(a).act2a=r},get error(){return e(h).act2a},set error(r){e(h).act2a=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("act2a");n(r,q)},$$slots:{default:!0}});var Me=l(Be,2),me=o(Me);ae(me);var ke=l(me,2);i(Me),i($e);var Ie=l($e,2),tt=o(Ie);Z(tt,{autocomplete:"off",placeholder:"acnt",get value(){return e(a).acnt},set value(r){e(a).acnt=r},get error(){return e(h).acnt},set error(r){e(h).acnt=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("acnt");n(r,q)},$$slots:{default:!0}});var Ue=l(tt,2),_e=o(Ue);ae(_e);var at=l(_e,2);i(Ue),i(Ie);var Fe=l(Ie,2),Ce=o(Fe);Z(Ce,{autocomplete:"off",placeholder:"acnta",get value(){return e(a).acnta},set value(r){e(a).acnta=r},get error(){return e(h).acnta},set error(r){e(h).acnta=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("acnta");n(r,q)},$$slots:{default:!0}});var Ve=l(Ce,2),We=o(Ve);ae(We);var qe=l(We,2);i(Ve),i(Fe);var Pe=l(Fe,2),rt=o(Pe);Z(rt,{autocomplete:"off",placeholder:"ok",get value(){return e(a).ok},set value(r){e(a).ok=r},get error(){return e(h).ok},set error(r){e(h).ok=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("ok");n(r,q)},$$slots:{default:!0}});var Ge=l(rt,2),ze=o(Ge);ae(ze);var vt=l(ze,2);i(Ge),i(Pe);var lt=l(Pe,2),st=o(lt);Z(st,{autocomplete:"off",placeholder:"err",get value(){return e(a).err},set value(r){e(a).err=r},get error(){return e(h).err},set error(r){e(h).err=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("err");n(r,q)},$$slots:{default:!0}});var c=l(st,2),L=o(c);ae(L);var U=l(L,2);i(c),i(lt),i(G);var J=l(G,2),be=o(J),he=o(be);Z(he,{autocomplete:"off",placeholder:"glow",get value(){return e(a).glow},set value(r){e(a).glow=r},get error(){return e(h).glow},set error(r){e(h).glow=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("glow");n(r,q)},$$slots:{default:!0}});var Ke=l(he,2),He=o(Ke);ae(He);var Xt=l(He,2);i(Ke),i(be);var ct=l(be,2),zt=o(ct);Z(zt,{autocomplete:"off",placeholder:"gmid",get value(){return e(a).gmid},set value(r){e(a).gmid=r},get error(){return e(h).gmid},set error(r){e(h).gmid=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("gmid");n(r,q)},$$slots:{default:!0}});var Et=l(zt,2),nt=o(Et);ae(nt);var Jt=l(nt,2);i(Et),i(ct);var dt=l(ct,2),xt=o(dt);Z(xt,{autocomplete:"off",placeholder:"ghigh",get value(){return e(a).ghigh},set value(r){e(a).ghigh=r},get error(){return e(h).ghigh},set error(r){e(h).ghigh=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("ghigh");n(r,q)},$$slots:{default:!0}});var St=l(xt,2),ut=o(St);ae(ut);var Yt=l(ut,2);i(St),i(dt);var pt=l(dt,2),Tt=o(pt);Z(Tt,{autocomplete:"off",placeholder:"text",get value(){return e(a).text},set value(r){e(a).text=r},get error(){return e(h).text},set error(r){e(h).text=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("text");n(r,q)},$$slots:{default:!0}});var Rt=l(Tt,2),gt=o(Rt);ae(gt);var Qt=l(gt,2);i(Rt),i(pt);var ht=l(pt,2),jt=o(ht);Z(jt,{autocomplete:"off",placeholder:"bg",get value(){return e(a).bg},set value(r){e(a).bg=r},get error(){return e(h).bg},set error(r){e(h).bg=r},$$events:{input:d},children:(r,ce)=>{D();var q=B("bg");n(r,q)},$$slots:{default:!0}});var Lt=l(jt,2),ft=o(Lt);ae(ft);var ea=l(ft,2);i(Lt),i(ht);var At=l(ht,2),Nt=o(At);hr(Nt,{get image(){return e(u)},set image(r){s(u,p(r))}});var ta=l(Nt,2);{var aa=r=>{Zt(r,{get clientId(){return t().id}})};V(ta,r=>{e(m)||r(aa)})}i(At),i(J),K(()=>{j(Ae,"background",e(a).act1),j(ot,"background",e(a).act1a),j(et,"background",e(a).act2),j(ke,"background",e(a).act2a),j(at,"background",e(a).acnt),j(qe,"background",e(a).acnta),j(vt,"background",e(a).ok),j(U,"background",e(a).err),j(Xt,"background",e(a).glow),j(Jt,"background",e(a).gmid),j(Yt,"background",e(a).ghigh),j(Qt,"background",e(a).text),j(ea,"background",e(a).bg)}),ve(Le,()=>e(a).act1,r=>e(a).act1=r),ve(Oe,()=>e(a).act1a,r=>e(a).act1a=r),ve(De,()=>e(a).act2,r=>e(a).act2=r),ve(me,()=>e(a).act2a,r=>e(a).act2a=r),ve(_e,()=>e(a).acnt,r=>e(a).acnt=r),ve(We,()=>e(a).acnta,r=>e(a).acnta=r),ve(ze,()=>e(a).ok,r=>e(a).ok=r),ve(L,()=>e(a).err,r=>e(a).err=r),ve(He,()=>e(a).glow,r=>e(a).glow=r),ve(nt,()=>e(a).gmid,r=>e(a).gmid=r),ve(ut,()=>e(a).ghigh,r=>e(a).ghigh=r),ve(gt,()=>e(a).text,r=>e(a).text=r),ve(ft,()=>e(a).bg,r=>e(a).bg=r),n(f,E)};V(y,f=>{e(a)&&f(A)})}var F=l(y,2);{var M=f=>{var E=mr(),G=o(E);vr(G,{get clientId(){return t().id},get isLoading(){return e(m)},get colors(){return e(g)},set colors(pe){s(g,p(pe))}}),i(E),n(f,E)};V(F,f=>{e(g)&&f(M)})}i(O);var Q=l(O,2),X=o(Q);Te(X,{level:1,get isLoading(){return e(m)},set isLoading(f){s(m,p(f))},$$events:{click:R},children:(f,E)=>{D();var G=B("SAVE");n(f,G)},$$slots:{default:!0}});var te=l(X,2);Te(te,{level:3,get isLoading(){return e(m)},set isLoading(f){s(m,p(f))},$$events:{click:$},children:(f,E)=>{D();var G=B("RESET");n(f,G)},$$slots:{default:!0}});var ee=l(te,2);{var H=f=>{var E=br();n(f,E)};V(ee,f=>{e(b)&&f(H)})}var P=l(ee,2);{var C=f=>{var E=yr(),G=o(E,!0);i(E),K(()=>ie(G,e(k))),n(f,E)};V(P,f=>{e(k)&&f(C)})}i(Q),i(x),n(N,x),se()}var kr=S('<div class="data font-mono svelte-115hohv"> </div>'),Ir=S('<div class="data svelte-115hohv"> </div>'),_r=S('<div class="header svelte-115hohv"><!> <!></div>'),Cr=S("<div><!></div>"),zr=S("<div><!></div>"),Er=S("<div><!></div>"),xr=S("<div><!></div>"),Sr=S("<div><!> <!></div>");function Tr(N,v){le(v,!0);let t=W(v,"client",31,()=>p({})),g=W(v,"onSave",15),u=z(void 0);const m=["Config","Secret","Branding","Delete"];let k=z(p(m[0]));const b=200,T=b/2;function h(){s(u,!1),g()()}Ft(N,{get show(){return e(u)},set show(a){s(u,p(a))},header:a=>{var I=_r(),w=o(I);Vt(w,{text:"Client ID",children:(_,d)=>{var x=kr(),O=o(x,!0);i(x),K(()=>ie(O,t().id)),n(_,x)},$$slots:{default:!0}});var R=l(w,2);{var $=_=>{Vt(_,{text:"Client Name",children:(d,x)=>{var O=Ir(),y=o(O,!0);i(O),K(()=>ie(y,t().name)),n(d,O)},$$slots:{default:!0}})};V(R,_=>{t().name&&_($)})}i(I),n(a,I)},body:a=>{var I=Sr(),w=o(I);ba(w,{labels:m,get selected(){return e(k)},set selected(d){s(k,p(d))}});var R=l(w,2);{var $=d=>{var x=Cr(),O=o(x);Pa(O,{get client(){return t()},set client(y){t(y)},get onSave(){return g()},set onSave(y){g(y)}}),i(x),ne(5,x,()=>ue,()=>({delay:T,duration:b})),ne(6,x,()=>ue,()=>({duration:b})),n(d,x)},_=d=>{var x=Se(),O=de(x);{var y=F=>{var M=zr(),Q=o(M);Ka(Q,{get client(){return t()}}),i(M),ne(5,M,()=>ue,()=>({delay:T,duration:b})),ne(6,M,()=>ue,()=>({duration:b})),n(F,M)},A=F=>{var M=Se(),Q=de(M);{var X=ee=>{var H=Er(),P=o(H);$r(P,{get client(){return t()}}),i(H),ne(5,H,()=>ue,()=>({delay:T,duration:b})),ne(6,H,()=>ue,()=>({duration:b})),n(ee,H)},te=ee=>{var H=Se(),P=de(H);{var C=f=>{var E=xr(),G=o(E);Ya(G,{get client(){return t()},onSave:h}),i(E),ne(5,E,()=>ue,()=>({delay:T,duration:b})),ne(6,E,()=>ue,()=>({duration:b})),n(f,E)};V(P,f=>{e(k)==="Delete"&&f(C)},!0)}n(ee,H)};V(Q,ee=>{e(k)==="Branding"?ee(X):ee(te,!1)},!0)}n(F,M)};V(O,F=>{e(k)==="Secret"?F(y):F(A,!1)},!0)}n(d,x)};V(R,d=>{e(k)==="Config"?d($):d(_,!1)})}i(I),n(a,I)},$$slots:{header:!0,body:!0}}),se()}var Rr=S('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),jr=S('<div class="success svelte-gbj18i">Success</div>'),Lr=S('<div class="mainErr err svelte-gbj18i"> </div>'),Ar=S('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function Nr(N,v){le(v,!0);let t=W(v,"idx",31,()=>-1),g=z(void 0),u=p({id:"",name:"",confidential:!0,redirect_uris:[]}),m=z(""),k=z(!1),b=z(void 0),T=z(p({}));const h=kt().shape({id:Y().required("Client ID is required").trim().matches(za,"Can only contain characters, numbers and '-'"),name:Y().trim().nullable().matches(Wt,"Can only contain characters, numbers and '-'")});let a=z(void 0),I=z(void 0);const w="330px";ye(()=>{e(k)&&s(b,p(setTimeout(()=>{v.onSave(),s(k,!1),s(g,!1)},1500)))}),Ee(()=>()=>clearTimeout(e(b)));async function R(){if(s(m,""),!await $()||!e(a)()||!e(I)()){s(m,"Invalid input");return}let _=u;_.name||(_.name=void 0);let d=await pa(_);if(d.ok)s(k,!0);else{let x=await d.json();s(m,p(x.message))}}async function $(){try{return await h.validate(u,{abortEarly:!1}),s(T,p({})),!0}catch(_){return s(T,p(It(_))),!1}}Ft(N,{get idx(){return t()},set idx(_){t(_)},get show(){return e(g)},set show(_){s(g,p(_))},header:_=>{var d=Rr();n(_,d)},body:_=>{var d=Ar(),x=o(d);Z(x,{autocomplete:"off",placeholder:"Client ID",width:w,get value(){return u.id},set value(C){u.id=C},get error(){return e(T).id},set error(C){e(T).id=C},$$events:{input:$},children:(C,f)=>{D();var E=B("CLIENT ID");n(C,E)},$$slots:{default:!0}});var O=l(x,2);Z(O,{autocomplete:"off",placeholder:"Client Name",width:w,get value(){return u.name},set value(C){u.name=C},get error(){return e(T).name},set error(C){e(T).name=C},$$events:{input:$},children:(C,f)=>{D();var E=B("NAME");n(C,E)},$$slots:{default:!0}});var y=l(O,2);Re(y,{style:`width: ${w}`,validation:{required:!0,regex:Ze,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return u.redirect_uris},set values(C){u.redirect_uris=C},get validate(){return e(a)},set validate(C){s(a,p(C))},children:(C,f)=>{D();var E=B("REDIRECT URI");n(C,E)},$$slots:{default:!0}});var A=l(y,2);Re(A,{style:`width: ${w}`,validation:{required:!0,regex:Ze,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return u.post_logout_redirect_uris},set values(C){u.post_logout_redirect_uris=C},get validate(){return e(I)},set validate(C){s(I,p(C))},children:(C,f)=>{D();var E=B("POST LOGOUT REDIRECT URI");n(C,E)},$$slots:{default:!0}});var F=l(A,2),M=l(o(F),2),Q=o(M);Xe(Q,{get selected(){return u.confidential},set selected(C){u.confidential=C}}),i(M),i(F);var X=l(F,2);Te(X,{level:1,width:"4rem",$$events:{click:R},children:(C,f)=>{D();var E=B("SAVE");n(C,E)},$$slots:{default:!0}});var te=l(X,2);{var ee=C=>{var f=jr();n(C,f)};V(te,C=>{e(k)&&C(ee)})}var H=l(te,2);{var P=C=>{var f=Lr(),E=o(f,!0);i(f),K(()=>ie(E,e(m))),n(C,f)};V(H,C=>{e(m)&&C(P)})}i(d),n(_,d)},$$slots:{header:!0,body:!0}}),se()}var Or=S('<div class="svelte-nj6lei"><!></div>'),Dr=S(' <div class="content"><!> <!> <div id="clients" class="svelte-nj6lei"></div> <!> <div style="height: 20px"></div></div>',1);function Br(N,v){le(v,!0);let t=z(""),g=z(p([])),u=z(p([])),m=z(p([])),k=z(""),b=[{label:"ID",callback:(y,A)=>y.id.toLowerCase().includes(A.toLowerCase())}],T=[{label:"ID",callback:(y,A)=>y.id.localeCompare(A.id)}];Ee(()=>{h(),a()});async function h(){let y=await ga();if(!y.ok)s(t,"Error fetching clients: "+y.body.message);else{let A=await y.json();s(g,p([...A]))}}async function a(){let y=await ha();if(!y.ok)s(t,"Error fetching scopes: "+y.body.message);else{let A=await y.json();fa.set(A),Mt.set(A.map(F=>F.name))}}function I(){h(),a(),s(k,"")}D();var w=Dr(),R=de(w),$=l(R),_=o($);ya(_,{get items(){return e(g)},searchOptions:b,orderOptions:T,get resItems(){return e(u)},set resItems(y){s(u,p(y))},get search(){return e(k)},set search(y){s(k,p(y))}});var d=l(_,2);Nr(d,{onSave:I});var x=l(d,2);wt(x,23,()=>e(m),y=>y.id,(y,A,F)=>{var M=Or(),Q=o(M);Tr(Q,{onSave:I,get client(){return e(m)[e(F)]},set client(X){e(m)[e(F)]=X}}),i(M),n(y,M)}),i(x);var O=l(x,2);wa(O,{get items(){return e(u)},set items(y){s(u,p(y))},get resItems(){return e(m)},set resItems(y){s(m,p(y))}}),D(2),i($),K(()=>ie(R,`${e(t)??""} `)),n(N,w),se()}function Mr(N){Br(N,{})}export{Mr as component};
