import"../chunks/disclose-version.BDr9Qe-U.js";import{t as x,f as ne,p as Ce,F as Le,c as i,s as c,r as s,a as ze,u as n,O as fe,ap as _e,w as S,v as u,G as ht,$ as Fa}from"../chunks/runtime.BONl2e88.js";import{h as Wa}from"../chunks/svelte-head.DBtDtmZn.js";import{a as v,n as It,e as ye,t as _,d as Ee}from"../chunks/template.B7ldVCvc.js";import{i as U}from"../chunks/if.DS90EFHs.js";import{p as D}from"../chunks/proxy.0BECmVET.js";import{d as ct,e as He,s as p,k as Va}from"../chunks/render.AqJWcVDb.js";import{a as Ha}from"../chunks/window.Bh0CHd7o.js";import{p as T}from"../chunks/props.BlbrNjWf.js";import{a as Oa,o as ft}from"../chunks/index-client.Bjp_k6xO.js";import{z as et,ag as Et,_ as Qa,P as Za,I as Ka,q as qt,w as Xa,ah as Ja,D as Ga,r as er}from"../chunks/helpers.CQGRRstl.js";import{e as tt,i as pt}from"../chunks/each.Bce--_O8.js";import{h as Kt}from"../chunks/html.B6hxHEfi.js";import{s as R,h as oe,i as se,d as Xt,a as Be,c as Pt,f as Ke,t as Ct,b as at}from"../chunks/index.BJiFQ8Di.js";import{I as zt,u as Jt}from"../chunks/IconStop.B31Vq2M8.js";import{B as we,d as tr,a as Gt,c as ea,f as vt}from"../chunks/fetch.JUNnB5kv.js";import{s as Nt}from"../chunks/snippet.D6O6IDbh.js";import{b as gt}from"../chunks/this.8_1FeNtN.js";import{u as Ae}from"../chunks/i18n.svelte.B1gwAzk0.js";import{B as ar}from"../chunks/ButtonAuthProvider.C1AJY70X.js";import{I as Fe}from"../chunks/Input.DGOkRo_r.js";import{$ as ta,a as aa,b as rr,f as Tt,g as nr,c as or,d as ra,F as sr}from"../chunks/Form.CE2yJgP5.js";import{a as jt,c as ir,d as na,e as lr}from"../chunks/patterns.BdncpE46.js";import{b as oa,a as cr}from"../chunks/input.DulBaC0z.js";import{P as vr,O as sa,T as dr,L as ur}from"../chunks/LangSelector.Zw9l5r2b.js";import{w as mr,j as hr,k as fr}from"../chunks/dataFetching.CUoxx_U8.js";import{w as pr}from"../chunks/registration.nxjf7GXU.js";import{W as ia}from"../chunks/WebauthnRequest.B-jwabRJ.js";import{S as la}from"../chunks/spring.DIfzGqN5.js";import{P as gr}from"../chunks/PasswordPolicy.Difs7H-Z.js";import{I as Lt}from"../chunks/InputPassword.B__efQ7l.js";import{C as yr}from"../chunks/CheckIcon.CqUmlXj7.js";import{A as wr}from"../chunks/A.UEWOjmpJ.js";import"../chunks/legacy.BVESbwbj.js";import{D as ca}from"../chunks/Devices.By3h8XHs.js";import{T as br}from"../chunks/Template.DIImK_q5.js";import{u as kr}from"../chunks/param.svelte.BwWxV1Sm.js";import{M as Mr}from"../chunks/Main.DMwa1Kwf.js";import{C as $r}from"../chunks/ContentCenter.BNNwHQjF.js";var _r=It('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"></path></svg>');function yt(a,e){let t=T(e,"opacity",3,.9),r=T(e,"width",3,"1.5rem"),l=T(e,"color",3,"hsl(var(--action))");var o=_r();R(o,"stroke-width",2),x(()=>{R(o,"width",r()),R(o,"color",l()),R(o,"opacity",t())}),v(a,o)}function At(a,e){var t=ye(),r=ne(t);{var l=m=>{yt(m,{color:"hsl(var(--action))"})},o=m=>{zt(m,{color:"hsl(var(--error))"})};U(r,m=>{e.checked?m(l):m(o,!1)})}v(a,t)}function Dr(a,e,t){e()||t()}function xr(a){a.stopPropagation()}var Ir=_('<span class="closeIcon svelte-utq0b0"><!></span>'),Er=_('<div class="relative"><div class="absolute close svelte-utq0b0"><!></div></div>'),qr=_('<dialog aria-modal="true" class="svelte-utq0b0"><div role="none" class="svelte-utq0b0"><!> <!></div></dialog>');function Pr(a,e){Ce(e,!0);let t=T(e,"showModal",15),r=T(e,"closeModal",15),l=T(e,"strict",3,!1),o=T(e,"prerender",3,!1),m=Ae(),h;Le(()=>{r(d)}),Le(()=>{t()&&(h==null||h.showModal())});function d(I){I==null||I.preventDefault(),h==null||h.close(),t(!1)}var y=qr();y.__click=[Dr,l,d];var f=i(y);f.__click=[xr];var E=i(f);{var j=I=>{var W=Er(),C=i(W),L=i(C);we(L,{get ariaLabel(){return m.common.close},invisible:!0,onclick:d,children:(V,P)=>{var te=Ir(),Q=i(te);zt(Q,{color:"currentColor",width:"1.2rem"}),s(te),v(V,te)},$$slots:{default:!0}}),s(C),s(W),v(I,W)};U(E,I=>{l()||I(j)})}var M=c(E,2);{var F=I=>{var W=ye(),C=ne(W);Nt(C,()=>e.children),v(I,W)};U(M,I=>{(o()||t())&&I(F)})}s(f),s(y),gt(y,I=>h=I,()=>h),x(()=>R(y,"data-strict",l())),He("close",y,()=>{var I;t(!1),(I=e.onClose)==null||I.call(e)}),v(a,y),ze()}ct(["click"]);var Cr=_('<div class="link-err value svelte-1tea8v4"> </div>'),zr=_('<div class="fed-btn svelte-1tea8v4"><!> <!></div>'),Nr=_('<h3> </h3> <p> </p> <div class="providers svelte-1tea8v4"></div>',1),Tr=_("<!> <!>",1),jr=_('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),Lr=_('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),Ar=_('<div><div>WebID:</div> <span class="value svelte-1tea8v4"><a target="_blank"><!></a></span></div>'),Ur=_('<div><div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <div><div class="value svelte-1tea8v4"> </div> <!></div></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <!> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <!> <!></div>');function va(a,e){Ce(e,!0);let t=T(e,"user",15),r=Ae(),l=S(!1),o=S(!1),m=fe(()=>{var ee;return(ee=t().account_type)==null?void 0:ee.startsWith("federated")}),h=fe(()=>{var ee;return n(m)?`${t().account_type}: ${((ee=e.authProvider)==null?void 0:ee.name)||""}`:t().account_type}),d=fe(()=>e.viewModePhone?"rowPhone":"row"),y=fe(()=>e.viewModePhone?"labelPhone":"label");function f(ee){Qa(64,(he,{challenge:ge,verifier:Ie})=>{he||(localStorage.setItem(Za,Ie),E(ee,ge))})}async function E(ee,he){let ge={email:t().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:ee,pkce_challenge:he},Ie=await Gt(`/auth/v1/providers/${ee}/link`,ge);if(Ie.text){Ka(Ie.text);let $e=Ie.headers.get("location");$e&&(window.location.href=$e)}else console.error(Ie.error)}async function j(){let ee=await tr("/auth/v1/providers/link");ee.body?t(ee.body):(console.error(ee.error),u(l,!0))}var M=Ur(),F=i(M),I=i(F),W=i(I,!0);s(I);var C=c(I,2),L=i(C,!0);s(C),s(F);var V=c(F,2),P=i(V),te=i(P,!0);s(P);var Q=c(P,2),le=i(Q,!0);s(Q),s(V);var re=c(V,2),A=i(re),w=i(A,!0);s(A);var z=c(A,2),k=i(z,!0);s(z),s(re);var Z=c(re,2),ve=i(Z),pe=i(ve);s(ve);var q=c(ve,2),H=i(q,!0);s(q),s(Z);var N=c(Z,2),O=i(N),K=i(O,!0);s(O);var ie=c(O,2),G=i(ie),de=i(G,!0);s(G);var ue=c(G,2);{var De=ee=>{var he=zr(),ge=i(he);we(ge,{get ariaLabel(){return r.account.providerUnlink},level:3,onclick:j,children:(Ne,Ze)=>{_e();var Ge=Ee();x(()=>p(Ge,r.account.providerUnlink)),v(Ne,Ge)},$$slots:{default:!0}});var Ie=c(ge,2);{var $e=Ne=>{var Ze=Cr(),Ge=i(Ze,!0);s(Ze),x(()=>p(Ge,r.account.providerUnlinkDesc)),v(Ne,Ze)};U(Ie,Ne=>{n(l)&&Ne($e)})}s(he),v(ee,he)},X=ee=>{var he=ye(),ge=ne(he);{var Ie=$e=>{var Ne=Tr(),Ze=ne(Ne);we(Ze,{level:2,onclick:()=>u(o,!0),children:(it,Ra)=>{_e();var lt=Ee();x(()=>p(lt,r.account.providerLink)),v(it,lt)},$$slots:{default:!0}});var Ge=c(Ze,2);Pr(Ge,{get showModal(){return n(o)},set showModal(it){u(o,D(it))},children:(it,Ra)=>{var lt=Nr(),_t=ne(lt),Ya=i(_t,!0);s(_t);var Dt=c(_t,2),Ba=i(Dt,!0);s(Dt);var Qt=c(Dt,2);tt(Qt,21,()=>e.providers,xt=>xt.id,(xt,Zt)=>{var Sa=fe(()=>`${r.account.providerLink}: ${n(Zt).name}`);ar(xt,{get ariaLabel(){return n(Sa)},get provider(){return n(Zt)},onclick:f})}),s(Qt),x(()=>{p(Ya,r.account.providerLink),p(Ba,r.account.providerLinkDesc)}),v(it,lt)},$$slots:{default:!0}}),v($e,Ne)};U(ge,$e=>{e.providers.length>0&&$e(Ie)},!0)}v(ee,he)};U(ue,ee=>{n(m)?ee(De):ee(X,!1)})}s(ie),s(N);var g=c(N,2),b=i(g),$=i(b,!0);s(b);var Y=c(b,2),ce=i(Y,!0);s(Y),s(g);var B=c(g,2),ae=i(B),me=i(ae,!0);s(ae);var be=c(ae,2),ke=i(be,!0);s(be),s(B);var J=c(B,2),qe=i(J),Te=i(qe,!0);s(qe);var Ue=c(qe,2),Se=fe(()=>!!t().webauthn_user_id);At(Ue,{get checked(){return n(Se)}}),s(J);var Pe=c(J,2),xe=i(Pe),Xe=i(xe,!0);s(xe);var Je=c(xe,2);At(Je,{get checked(){return t().enabled}}),s(Pe);var We=c(Pe,2),Re=i(We),dt=i(Re,!0);s(Re);var Me=c(Re,2);At(Me,{get checked(){return t().email_verified}}),s(We);var Ye=c(We,2);{var ot=ee=>{var he=jr(),ge=i(he),Ie=i(ge,!0);s(ge);var $e=c(ge,2),Ne=i($e,!0);x(()=>p(Ne,et(t().last_login))),s($e),s(he),x(()=>{oe(he,se(n(d)),"svelte-1tea8v4"),oe(ge,se(n(y)),"svelte-1tea8v4"),p(Ie,r.account.lastLogin)}),v(ee,he)};U(Ye,ee=>{t().last_login&&ee(ot)})}var je=c(Ye,2),Ve=i(je),Vt=i(Ve,!0);s(Ve);var st=c(Ve,2),Na=i(st,!0);x(()=>p(Na,t().password_expires&&et(t().password_expires)||r.common.never)),s(st),s(je);var ut=c(je,2),mt=i(ut),Ta=i(mt,!0);s(mt);var Ht=c(mt,2),ja=i(Ht,!0);x(()=>p(ja,et(t().created_at))),s(Ht),s(ut);var Ot=c(ut,2);{var La=ee=>{var he=Lr(),ge=i(he),Ie=i(ge,!0);s(ge);var $e=c(ge,2),Ne=i($e,!0);x(()=>p(Ne,et(t().user_expires))),s($e),s(he),x(()=>{oe(he,se(n(d)),"svelte-1tea8v4"),oe(ge,se(n(y)),"svelte-1tea8v4"),p(Ie,r.account.userExpiry)}),v(ee,he)};U(Ot,ee=>{t().user_expires&&ee(La)})}var Aa=c(Ot,2);{var Ua=ee=>{var he=Ar(),ge=i(he),Ie=c(ge,2),$e=i(Ie);x(()=>R($e,"href",Et(t().id)));var Ne=i($e);Kt(Ne,()=>Et(t().id).replace("/auth/","/auth/<wbr/>")),s($e),s(Ie),s(he),x(()=>{oe(he,se(n(d)),"svelte-1tea8v4"),oe(ge,se(n(y)),"svelte-1tea8v4")}),v(ee,he)};U(Aa,ee=>{e.webIdData&&ee(Ua)})}s(M),x(()=>{oe(F,se(n(d)),"svelte-1tea8v4"),oe(I,se(n(y)),"svelte-1tea8v4"),p(W,r.common.email),p(L,t().email),oe(V,se(n(d)),"svelte-1tea8v4"),oe(P,se(n(y)),"svelte-1tea8v4"),p(te,r.account.givenName),p(le,t().given_name),oe(re,se(n(d)),"svelte-1tea8v4"),oe(A,se(n(y)),"svelte-1tea8v4"),p(w,r.account.familyName),p(k,t().family_name),oe(Z,se(n(d)),"svelte-1tea8v4"),oe(ve,se(n(y)),"svelte-1tea8v4"),p(pe,`${r.account.user??""} ID`),p(H,t().id),oe(N,se(n(d)),"svelte-1tea8v4"),oe(O,se(n(y)),"svelte-1tea8v4"),p(K,r.account.accType),p(de,n(h)||""),oe(g,se(n(d)),"svelte-1tea8v4"),oe(b,se(n(y)),"svelte-1tea8v4"),p($,r.account.roles),p(ce,t().roles||"None"),oe(B,se(n(d)),"svelte-1tea8v4"),oe(ae,se(n(y)),"svelte-1tea8v4"),p(me,r.account.groups),p(ke,t().groups||"None"),oe(J,se(n(d)),"svelte-1tea8v4"),oe(qe,se(n(y)),"svelte-1tea8v4"),p(Te,r.account.mfaActivated),oe(Pe,se(n(d)),"svelte-1tea8v4"),oe(xe,se(n(y)),"svelte-1tea8v4"),p(Xe,r.account.userEnabled),oe(We,se(n(d)),"svelte-1tea8v4"),oe(Re,se(n(y)),"svelte-1tea8v4"),p(dt,r.account.emailVerified),oe(je,se(n(d)),"svelte-1tea8v4"),oe(Ve,se(n(y)),"svelte-1tea8v4"),p(Vt,r.account.passwordExpiry),oe(ut,se(n(d)),"svelte-1tea8v4"),oe(mt,se(n(y)),"svelte-1tea8v4"),p(Ta,r.account.userCreated)}),v(a,M),ze()}function Ut(a,e){return a-e*Math.floor(a/e)}const da=1721426;function wt(a,e,t,r){e=Rt(a,e);let l=e-1,o=-2;return t<=2?o=0:bt(e)&&(o=-1),da-1+365*l+Math.floor(l/4)-Math.floor(l/100)+Math.floor(l/400)+Math.floor((367*t-362)/12+o+r)}function bt(a){return a%4===0&&(a%100!==0||a%400===0)}function Rt(a,e){return a==="BC"?1-e:e}function Rr(a){let e="AD";return a<=0&&(e="BC",a=1-a),[e,a]}const Yr={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class kt{fromJulianDay(e){let t=e,r=t-da,l=Math.floor(r/146097),o=Ut(r,146097),m=Math.floor(o/36524),h=Ut(o,36524),d=Math.floor(h/1461),y=Ut(h,1461),f=Math.floor(y/365),E=l*400+m*100+d*4+f+(m!==4&&f!==4?1:0),[j,M]=Rr(E),F=t-wt(j,M,1,1),I=2;t<wt(j,M,3,1)?I=0:bt(M)&&(I=1);let W=Math.floor(((F+I)*12+373)/367),C=t-wt(j,M,W,1)+1;return new nt(j,M,W,C)}toJulianDay(e){return wt(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return Yr[bt(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return bt(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}function ua(a){a=Yt(a,new kt);let e=Rt(a.era,a.year);return ma(e,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)}function ma(a,e,t,r,l,o,m){let h=new Date;return h.setUTCHours(r,l,o,m),h.setUTCFullYear(a,e-1,t),h.getTime()}function ha(a,e){if(e==="UTC")return 0;if(a>0&&e===ta())return new Date(a).getTimezoneOffset()*-6e4;let{year:t,month:r,day:l,hour:o,minute:m,second:h}=pa(a,e);return ma(t,r,l,o,m,h,0)-Math.floor(a/1e3)*1e3}const fa=new Map;function pa(a,e){let t=fa.get(e);t||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),fa.set(e,t));let r=t.formatToParts(new Date(a)),l={};for(let o of r)o.type!=="literal"&&(l[o.type]=o.value);return{year:l.era==="BC"||l.era==="B"?-l.year+1:+l.year,month:+l.month,day:+l.day,hour:l.hour==="24"?0:+l.hour,minute:+l.minute,second:+l.second}}const ga=864e5;function Br(a,e,t,r){return(t===r?[t]:[t,r]).filter(l=>Sr(a,e,l))}function Sr(a,e,t){let r=pa(t,e);return a.year===r.year&&a.month===r.month&&a.day===r.day&&a.hour===r.hour&&a.minute===r.minute&&a.second===r.second}function Fr(a,e,t="compatible"){let r=wa(a);if(e==="UTC")return ua(r);if(e===ta()&&t==="compatible"){r=Yt(r,new kt);let d=new Date,y=Rt(r.era,r.year);return d.setFullYear(y,r.month-1,r.day),d.setHours(r.hour,r.minute,r.second,r.millisecond),d.getTime()}let l=ua(r),o=ha(l-ga,e),m=ha(l+ga,e),h=Br(r,e,l-o,l-m);if(h.length===1)return h[0];if(h.length>1)switch(t){case"compatible":case"earlier":return h[0];case"later":return h[h.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(t){case"earlier":return Math.min(l-o,l-m);case"compatible":case"later":return Math.max(l-o,l-m);case"reject":throw new RangeError("No such absolute time found")}}function ya(a,e,t="compatible"){return new Date(Fr(a,e,t))}function wa(a,e){let t=0,r=0,l=0,o=0;if("timeZone"in a)({hour:t,minute:r,second:l,millisecond:o}=a);else if("hour"in a&&!e)return a;return e&&({hour:t,minute:r,second:l,millisecond:o}=e),new $t(a.calendar,a.era,a.year,a.month,a.day,t,r,l,o)}function Yt(a,e){if(a.calendar.identifier===e.identifier)return a;let t=e.fromJulianDay(a.calendar.toJulianDay(a)),r=a.copy();return r.calendar=e,r.era=t.era,r.year=t.year,r.month=t.month,r.day=t.day,rt(r),r}function Bt(a,e){let t=a.copy(),r="hour"in t?Zr(t,e):0;St(t,e.years||0),t.calendar.balanceYearMonth&&t.calendar.balanceYearMonth(t,a),t.month+=e.months||0,Ft(t),ba(t),t.day+=(e.weeks||0)*7,t.day+=e.days||0,t.day+=r,Wr(t),t.calendar.balanceDate&&t.calendar.balanceDate(t),t.year<1&&(t.year=1,t.month=1,t.day=1);let l=t.calendar.getYearsInEra(t);if(t.year>l){var o,m;let d=(o=(m=t.calendar).isInverseEra)===null||o===void 0?void 0:o.call(m,t);t.year=l,t.month=d?1:t.calendar.getMonthsInYear(t),t.day=d?1:t.calendar.getDaysInMonth(t)}t.month<1&&(t.month=1,t.day=1);let h=t.calendar.getMonthsInYear(t);return t.month>h&&(t.month=h,t.day=t.calendar.getDaysInMonth(t)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day)),t}function St(a,e){var t,r;!((t=(r=a.calendar).isInverseEra)===null||t===void 0)&&t.call(r,a)&&(e=-e),a.year+=e}function Ft(a){for(;a.month<1;)St(a,-1),a.month+=a.calendar.getMonthsInYear(a);let e=0;for(;a.month>(e=a.calendar.getMonthsInYear(a));)a.month-=e,St(a,1)}function Wr(a){for(;a.day<1;)a.month--,Ft(a),a.day+=a.calendar.getDaysInMonth(a);for(;a.day>a.calendar.getDaysInMonth(a);)a.day-=a.calendar.getDaysInMonth(a),a.month++,Ft(a)}function ba(a){a.month=Math.max(1,Math.min(a.calendar.getMonthsInYear(a),a.month)),a.day=Math.max(1,Math.min(a.calendar.getDaysInMonth(a),a.day))}function rt(a){a.calendar.constrainDate&&a.calendar.constrainDate(a),a.year=Math.max(1,Math.min(a.calendar.getYearsInEra(a),a.year)),ba(a)}function Vr(a){let e={};for(let t in a)typeof a[t]=="number"&&(e[t]=-a[t]);return e}function ka(a,e){return Bt(a,Vr(e))}function Ma(a,e){let t=a.copy();return e.era!=null&&(t.era=e.era),e.year!=null&&(t.year=e.year),e.month!=null&&(t.month=e.month),e.day!=null&&(t.day=e.day),rt(t),t}function Hr(a,e){let t=a.copy();return e.hour!=null&&(t.hour=e.hour),e.minute!=null&&(t.minute=e.minute),e.second!=null&&(t.second=e.second),e.millisecond!=null&&(t.millisecond=e.millisecond),Qr(t),t}function Or(a){a.second+=Math.floor(a.millisecond/1e3),a.millisecond=Mt(a.millisecond,1e3),a.minute+=Math.floor(a.second/60),a.second=Mt(a.second,60),a.hour+=Math.floor(a.minute/60),a.minute=Mt(a.minute,60);let e=Math.floor(a.hour/24);return a.hour=Mt(a.hour,24),e}function Qr(a){a.millisecond=Math.max(0,Math.min(a.millisecond,1e3)),a.second=Math.max(0,Math.min(a.second,59)),a.minute=Math.max(0,Math.min(a.minute,59)),a.hour=Math.max(0,Math.min(a.hour,23))}function Mt(a,e){let t=a%e;return t<0&&(t+=e),t}function Zr(a,e){return a.hour+=e.hours||0,a.minute+=e.minutes||0,a.second+=e.seconds||0,a.millisecond+=e.milliseconds||0,Or(a)}function $a(a,e,t,r){let l=a.copy();switch(e){case"era":{let h=a.calendar.getEras(),d=h.indexOf(a.era);if(d<0)throw new Error("Invalid era: "+a.era);d=Oe(d,t,0,h.length-1,r==null?void 0:r.round),l.era=h[d],rt(l);break}case"year":var o,m;!((o=(m=l.calendar).isInverseEra)===null||o===void 0)&&o.call(m,l)&&(t=-t),l.year=Oe(a.year,t,-1/0,9999,r==null?void 0:r.round),l.year===-1/0&&(l.year=1),l.calendar.balanceYearMonth&&l.calendar.balanceYearMonth(l,a);break;case"month":l.month=Oe(a.month,t,1,a.calendar.getMonthsInYear(a),r==null?void 0:r.round);break;case"day":l.day=Oe(a.day,t,1,a.calendar.getDaysInMonth(a),r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return a.calendar.balanceDate&&a.calendar.balanceDate(l),rt(l),l}function Kr(a,e,t,r){let l=a.copy();switch(e){case"hour":{let o=a.hour,m=0,h=23;if((r==null?void 0:r.hourCycle)===12){let d=o>=12;m=d?12:0,h=d?23:11}l.hour=Oe(o,t,m,h,r==null?void 0:r.round);break}case"minute":l.minute=Oe(a.minute,t,0,59,r==null?void 0:r.round);break;case"second":l.second=Oe(a.second,t,0,59,r==null?void 0:r.round);break;case"millisecond":l.millisecond=Oe(a.millisecond,t,0,999,r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return l}function Oe(a,e,t,r,l=!1){if(l){a+=Math.sign(e),a<t&&(a=r);let o=Math.abs(e);e>0?a=Math.ceil(a/o)*o:a=Math.floor(a/o)*o,a>r&&(a=t)}else a+=e,a<t?a=r-(t-a-1):a>r&&(a=t+(a-r-1));return a}const Xr=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/;function Qe(a){let e=a.match(Xr);if(!e)throw new Error("Invalid ISO 8601 date string: "+a);let t=new nt(Wt(e[1],0,9999),Wt(e[2],1,12),1);return t.day=Wt(e[3],0,t.calendar.getDaysInMonth(t)),t}function Wt(a,e,t){let r=Number(a);if(r<e||r>t)throw new RangeError(`Value out of range: ${e} <= ${r} <= ${t}`);return r}function Jr(a){return`${String(a.hour).padStart(2,"0")}:${String(a.minute).padStart(2,"0")}:${String(a.second).padStart(2,"0")}${a.millisecond?String(a.millisecond/1e3).slice(1):""}`}function _a(a){let e=Yt(a,new kt),t;return e.era==="BC"?t=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):t=String(e.year).padStart(4,"0"),`${t}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function Gr(a){return`${_a(a)}T${Jr(a)}`}function en(a,e){if(e.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Da(a,e,t){en(a,e),e.set(a,t)}function xa(a){let e=typeof a[0]=="object"?a.shift():new kt,t;if(typeof a[0]=="string")t=a.shift();else{let m=e.getEras();t=m[m.length-1]}let r=a.shift(),l=a.shift(),o=a.shift();return[e,t,r,l,o]}var tn=new WeakMap;class nt{copy(){return this.era?new nt(this.calendar,this.era,this.year,this.month,this.day):new nt(this.calendar,this.year,this.month,this.day)}add(e){return Bt(this,e)}subtract(e){return ka(this,e)}set(e){return Ma(this,e)}cycle(e,t,r){return $a(this,e,t,r)}toDate(e){return ya(this,e)}toString(){return _a(this)}compare(e){return aa(this,e)}constructor(...e){Da(this,tn,{writable:!0,value:void 0});let[t,r,l,o,m]=xa(e);this.calendar=t,this.era=r,this.year=l,this.month=o,this.day=m,rt(this)}}var an=new WeakMap;class $t{copy(){return this.era?new $t(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new $t(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return Bt(this,e)}subtract(e){return ka(this,e)}set(e){return Ma(Hr(this,e),e)}cycle(e,t,r){switch(e){case"era":case"year":case"month":case"day":return $a(this,e,t,r);default:return Kr(this,e,t,r)}}toDate(e,t){return ya(this,e,t)}toString(){return Gr(this)}compare(e){let t=aa(this,e);return t===0?rr(this,wa(e)):t}constructor(...e){Da(this,an,{writable:!0,value:void 0});let[t,r,l,o,m]=xa(e);this.calendar=t,this.era=r,this.year=l,this.month=o,this.day=m,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,rt(this)}}var rn=It(`<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21
            7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25
            0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"></path></svg>`);function nn(a,e){let t=T(e,"opacity",3,.9),r=T(e,"width",3,"1.5rem"),l=T(e,"color",3,"currentColor");var o=rn();R(o,"stroke-width",2),x(()=>{R(o,"stroke",l()),R(o,"width",r()),R(o,"opacity",t())}),v(a,o)}function on(a,e){var t,r,l,o,m;switch(a.code){case"Enter":(t=e.onEnter)==null||t.call(e);break;case"ArrowUp":(r=e.onUp)==null||r.call(e);break;case"ArrowDown":(l=e.onDown)==null||l.call(e);break;case"ArrowLeft":(o=e.onLeft)==null||o.call(e);break;case"ArrowRight":(m=e.onRight)==null||m.call(e);break}}var sn=_('<span class="pointer"><!></span>'),ln=_('<div class="day font-label weekLabel svelte-1j6kibo"> </div>'),cn=_('<time class="svelte-1j6kibo"> </time>'),vn=_('<div class="day svelte-1j6kibo"><!></div>'),dn=_('<div class="week svelte-1j6kibo"></div>'),un=_('<div class="popup svelte-1j6kibo"><div class="flex space-between"><div><!></div> <div><!></div></div> <div class="week svelte-1j6kibo"></div> <div class="month svelte-1j6kibo"></div></div>'),mn=_('<div class="error svelte-1j6kibo"> </div>'),hn=_('<div><div class="flex"><input type="date" step="any" class="svelte-1j6kibo"> <div class="relative"><div class="absolute patch svelte-1j6kibo"></div> <div class="absolute indicator svelte-1j6kibo"><!></div></div></div> <div class="label svelte-1j6kibo"><label class="font-label noselect svelte-1j6kibo"> </label> <!></div></div>');function fn(a,e){Ce(e,!0);let t=T(e,"id",19,qt),r=T(e,"value",31,()=>D(Tt())),l=T(e,"label",3,""),o=T(e,"title",3,""),m=T(e,"min",3,"1900-01-01"),h=T(e,"max",3,"2100-01-01");const d=Qe(Tt(new Date)),y=d.toString();let f=Ae(),E=S(!1),j=S(void 0),M,F=S(void 0),I=S(void 0),W=S(void 0),C=fe(()=>r()?Qe(r()):d),L=fe(()=>Qe(m())),V=fe(()=>Qe(h())),P=S(D(ht(()=>f.common.months[n(C).month-1]))),te=fe(()=>f.common.months.findIndex(g=>g===n(P))+1),Q=S(D(ht(()=>n(C).year))),le=S(D([ht(()=>n(Q))])),re=fe(()=>nr(n(C),f.lang));Le(()=>{let g=Number.parseInt(m().slice(0,4)),b=Number.parseInt(h().slice(0,4)),$=[];for(let Y=g;Y<=b;Y++)$.push(Y);u(le,D($))}),Le(()=>{if(r()){let g=ht(()=>Qe(r()));g=g.set({year:n(Q),month:n(te)}),r(g.toString())}}),Le(()=>{n(W)&&r()&&requestAnimationFrame(()=>{var b,$,Y;let g=((b=n(W))==null?void 0:b.getElementsByTagName("time"))||[];for(let ce of g)if(ce.getAttribute("datetime")===r()){(Y=($=ce.parentElement)==null?void 0:$.parentElement)==null||Y.focus();break}})});function A(g){let b=Qe(ra(g));return b.compare(n(L))<0||b.compare(n(V))>0?!1:n(te)===g.month}function w(){r(new nt(n(Q),n(te),1).toString())}function z(g){g.preventDefault(),u(E,!0)}function k(g,b){var $;g.preventDefault(),r(b),($=n(j))==null||$()}function Z(g,b){var ce,B;let $=Qe(b),Y=Qe(b);switch(g){case"left":Y=$.subtract({days:1});break;case"right":Y=$.add({days:1});break;case"up":Y=$.subtract({weeks:1});break;case"down":Y=$.add({weeks:1});break}Y.month!==$.month?or(Y,f.lang)<4?(ce=n(F))==null||ce.focus():(B=n(I))==null||B.focus():r(Y.toString())}function ve(g){switch(g){case"open":r()||(r(y),requestAnimationFrame(()=>pe()));break;case"closed":u(W,void 0);break}}function pe(){u(E,!(M!=null&&M.reportValidity()))}var q=hn(),H=i(q),N=i(H);Xt(N),N.__keydown=[on,e],gt(N,g=>M=g,()=>M);var O=c(N,2),K=c(i(O),2),ie=i(K);vr(ie,{ariaLabel:"Show Popover Example",offsetLeft:"-7.5rem",offsetTop:"-.2rem",onToggle:ve,btnInvisible:!0,lazy:!0,get close(){return n(j)},set close(g){u(j,D(g))},button:g=>{var b=sn(),$=i(b);nn($,{color:"hsl(var(--text)",width:"1.2rem"}),s(b),v(g,b)},children:(g,b)=>{var $=un(),Y=i($),ce=i(Y),B=i(ce);sa(B,{get ariaLabel(){return f.common.month},get options(){return f.common.months},maxHeight:"13rem",borderless:!0,onRight:()=>{var J;return(J=n(I))==null?void 0:J.focus()},onDown:w,get ref(){return n(F)},set ref(J){u(F,D(J))},get value(){return n(P)},set value(J){u(P,D(J))}}),s(ce);var ae=c(ce,2),me=i(ae);sa(me,{get ariaLabel(){return f.common.year},get options(){return n(le)},maxHeight:"13rem",borderless:!0,onLeft:()=>{var J;return(J=n(F))==null?void 0:J.focus()},onDown:w,get ref(){return n(I)},set ref(J){u(I,D(J))},get value(){return n(Q)},set value(J){u(Q,D(J))}}),s(ae),s(Y);var be=c(Y,2);tt(be,21,()=>f.common.weekDaysShort,pt,(J,qe)=>{var Te=ln(),Ue=i(Te,!0);s(Te),x(()=>p(Ue,n(qe))),v(J,Te)}),s(be);var ke=c(be,2);tt(ke,21,()=>n(re),pt,(J,qe)=>{var Te=dn();tt(Te,21,()=>n(qe).days,pt,(Ue,Se)=>{var Pe=vn();const xe=fe(()=>ra(n(Se))),Xe=fe(()=>A(n(Se)));var Je=i(Pe),We=fe(()=>!n(Xe));we(Je,{onclick:Re=>k(Re,n(xe)),get isDisabled(){return n(We)},invisible:!0,onLeft:()=>Z("left",n(xe)),onRight:()=>Z("right",n(xe)),onUp:()=>Z("up",n(xe)),onDown:()=>Z("down",n(xe)),children:(Re,dt)=>{var Me=cn(),Ye=i(Me,!0);s(Me),x(()=>{R(Me,"data-today",n(xe)===y),R(Me,"data-active",n(Xe)),R(Me,"data-selected",n(xe)===r()),R(Me,"data-weekend",n(Se).isWeekend),R(Me,"datetime",n(xe)),p(Ye,n(Se).day)}),v(Re,Me)},$$slots:{default:!0}}),s(Pe),v(Ue,Pe)}),s(Te),v(J,Te)}),s(ke),gt(ke,J=>u(W,J),()=>n(W)),s($),v(g,$)},$$slots:{button:!0,default:!0}}),s(K),s(O),s(H);var G=c(H,2),de=i(G),ue=i(de,!0);s(de);var De=c(de,2);{var X=g=>{var b=mn(),$=i(b,!0);s(b),x(()=>p($,o())),Be(3,b,()=>Pt),v(g,b)};U(De,g=>{n(E)&&g(X)})}s(G),s(q),x(()=>{R(N,"id",t()),R(N,"name",e.name),R(N,"title",o()),R(N,"aria-label",o()),N.disabled=e.disabled,R(N,"aria-disabled",e.disabled),N.required=e.required,R(N,"aria-required",e.required||!1),R(N,"aria-invalid",n(E)),R(N,"min",m()),R(N,"max",h()),R(de,"for",t()),R(de,"data-required",e.required),p(ue,l())}),He("invalid",N,z),He("blur",N,()=>pe()),oa(N,r),v(a,q),ze()}ct(["keydown"]);var pn=_("<span><!></span>"),gn=_('<div class="delete svelte-1gnpmkt"><!></div>'),yn=_('<div class="container svelte-1gnpmkt"><!> <!></div>');function wn(a,e){Ce(e,!0);let t=T(e,"id",19,qt),r=T(e,"value",31,()=>D(Tt())),l=T(e,"label",3,""),o=T(e,"title",3,""),m=T(e,"min",3,"1900-01-01"),h=T(e,"max",3,"2100-01-01"),d=Ae();var y=yn(),f=i(y);fn(f,{get id(){return t()},get name(){return e.name},get label(){return l()},get title(){return o()},get disabled(){return e.disabled},get min(){return m()},get max(){return h()},get required(){return e.required},get onEnter(){return e.onEnter},get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get value(){return r()},set value(M){r(M)}});var E=c(f,2);{var j=M=>{var F=gn(),I=i(F);we(I,{get ariaLabel(){return d.common.delete},invisible:!0,onclick:()=>r(""),children:(W,C)=>{var L=pn(),V=i(L);zt(V,{color:"hsla(var(--error) / .8)",width:"1.2rem"}),s(L),x(()=>R(L,"title",d.common.delete)),v(W,L)},$$slots:{default:!0}}),s(F),v(M,F)};U(E,M=>{e.withDelete&&M(j)})}s(y),v(a,y),ze()}var bn=_('<div class="success svelte-4ogr3z"><!></div>'),kn=_("<p> </p>"),Mn=_('<div class="err svelte-4ogr3z"> </div>'),$n=_('<div class="formInner svelte-4ogr3z"><div><!> <!> <!> <!></div> <div><!> <!> <!> <!> <!></div></div> <div class="bottom svelte-4ogr3z"><div><!></div> <!></div> <!>',1),_n=_('<div class="container svelte-4ogr3z"><!></div>');function Ia(a,e){var E;Ce(e,!0);let t=T(e,"user",15);(E=t().user_values)!=null&&E.birthdate||t(t().user_values.birthdate="",!0);let r=Ae(),l=S(""),o=S(!1),m=S(!1);async function h(j,M){var w;const F=M.get("email"),I=M.get("family_name")||void 0,W=M.get("given_name")||void 0,C=M.get("birthdate")||void 0,L=((w=M.get("phone"))==null?void 0:w.replaceAll(" ",""))||void 0,V=M.get("street")||void 0,P=M.get("zip")||void 0,te=P?Number.parseInt(P):void 0,Q=M.get("city")||void 0,le=M.get("country")||void 0;let re={email:F,family_name:I,given_name:W,user_values:{birthdate:C,phone:L,street:V,zip:te,city:Q,country:le}},A=await ea(`/auth/v1/users/${t().id}/self`,re);if(A.body){u(o,!0),t(A.body);let z=3e3;A.status===202&&(u(m,!0),z=3e4),setTimeout(()=>{u(o,!1)},z)}else A.error&&(console.error(A.error),u(l,D(A.error.message)))}var d=_n(),y=i(d),f=fe(()=>`/auth/v1/users/${t().id}/self`);sr(y,{get action(){return n(f)},onSubmit:h,children:(j,M)=>{var F=$n(),I=ne(F),W=i(I),C=i(W);Fe(C,{typ:"email",name:"email",get label(){return r.common.email},get placeholder(){return r.common.email},get value(){return t().email},required:!0});var L=c(C,2);Fe(L,{name:"given_name",autocomplete:"given-name",get label(){return r.account.givenName},get placeholder(){return r.account.givenName},get value(){return t().given_name},required:!0,maxLength:32,pattern:jt});var V=c(L,2);Fe(V,{name:"family_name",autocomplete:"family-name",get label(){return r.account.familyName},get placeholder(){return r.account.familyName},get value(){return t().family_name},maxLength:32,pattern:jt});var P=c(V,2);wn(P,{name:"birthdate",get label(){return r.account.birthdate},withDelete:!0,get value(){return t().user_values.birthdate},set value(O){t(t().user_values.birthdate=O,!0)}}),s(W);var te=c(W,2),Q=i(te);Fe(Q,{name:"street",autocomplete:"street-address",get label(){return r.account.street},get placeholder(){return r.account.street},get value(){return t().user_values.street},maxLength:48,pattern:ir});var le=c(Q,2);Fe(le,{typ:"number",name:"zip",autocomplete:"postal-code",get label(){return r.account.zip},get placeholder(){return r.account.zip},get value(){return t().user_values.zip},min:"1000",max:"9999999"});var re=c(le,2);Fe(re,{name:"city",autocomplete:"address-level2",get label(){return r.account.city},get placeholder(){return r.account.city},get value(){return t().user_values.city},maxLength:48,pattern:na});var A=c(re,2);Fe(A,{name:"country",autocomplete:"country",get label(){return r.account.country},get placeholder(){return r.account.country},get value(){return t().user_values.country},maxLength:48,pattern:na});var w=c(A,2);Fe(w,{name:"phone",autocomplete:"tel",get label(){return r.account.phone},get placeholder(){return r.account.phone},get value(){return t().user_values.phone},maxLength:32,pattern:lr}),s(te),s(I);var z=c(I,2),k=i(z),Z=i(k);we(Z,{type:"submit",children:(O,K)=>{_e();var ie=Ee();x(()=>p(ie,r.common.save)),v(O,ie)},$$slots:{default:!0}}),s(k);var ve=c(k,2);{var pe=O=>{var K=bn(),ie=i(K);yt(ie,{}),s(K),Be(3,K,()=>Ke),v(O,K)};U(ve,O=>{n(o)&&O(pe)})}s(z);var q=c(z,2);{var H=O=>{var K=kn(),ie=i(K,!0);s(K),x(()=>p(ie,r.account.emailUpdateConfirm)),v(O,K)},N=O=>{var K=ye(),ie=ne(K);{var G=de=>{var ue=Mn(),De=i(ue,!0);s(ue),x(()=>p(De,n(l))),Be(3,ue,()=>Ke),v(de,ue)};U(ie,de=>{n(l)&&de(G)},!0)}v(O,K)};U(q,O=>{n(m)?O(H):O(N,!1)})}v(j,F)},$$slots:{default:!0}}),s(d),v(a,d),ze()}var Dn=It('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function xn(a,e){let t=T(e,"opacity",3,.9),r=T(e,"width",3,24),l=T(e,"color",3,"currentColor");var o=Dn();R(o,"stroke-width",2),x(()=>{R(o,"stroke",l()),R(o,"width",r()),R(o,"opacity",t())}),v(a,o)}function In(a,e,t,r,l){e.set(a.clientY+t()),r.set(a.clientX+l())}var En=_('<div class="tooltip svelte-1pvad8v"> </div>'),qn=_('<div role="tooltip"><!> <!></div>');function Pn(a,e){Ce(e,!0);let t=T(e,"xOffset",3,10),r=T(e,"yOffset",3,10),l=S(D(e.text)),o=S(!1),m=S(void 0);const h=new la(0,{stiffness:.1,damping:.6}),d=new la(0,{stiffness:.1,damping:.6});Le(()=>{u(l,"")}),Oa(()=>{clearTimeout(n(m))});function y(){clearTimeout(n(m)),u(o,!0)}function f(){u(m,D(setTimeout(()=>{u(o,!1)},100)))}var E=qn();E.__mouseover=y,E.__mouseout=f,E.__mousemove=[In,h,r,d,t];var j=i(E);Nt(j,()=>e.children);var M=c(j,2);{var F=I=>{var W=En(),C=i(W,!0);s(W),x(()=>{R(W,"style",`top: ${`${h.current}px`??""}; left: ${`${d.current}px`??""}`),p(C,e.text)}),Be(3,W,()=>Ke,()=>({delay:400,duration:200})),v(I,W)};U(M,I=>{n(o)&&I(F)})}s(E),x(()=>R(E,"title",n(l))),He("focus",E,y),He("blur",E,f),v(a,E),ze()}ct(["mouseover","mouseout","mousemove"]);var Cn=_('<div class="err svelte-qkgdvy"><b>Your browser does not support Webauthn credentials and must be updated.</b></div>'),zn=_('<!> <div class="regBtns svelte-qkgdvy"><!> <!></div>',1),Nn=_('<div class="regNewBtn svelte-qkgdvy"><!></div>'),Tn=_('<div class="keysHeader svelte-qkgdvy"> </div>'),jn=_("<div><!></div>"),Ln=_('<div class="row svelte-qkgdvy"><div></div> <div class="deleteBtn svelte-qkgdvy"><!></div></div>'),An=_('<div class="keyContainer svelte-qkgdvy"><div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <div class="nameUv svelte-qkgdvy"><b> </b> <!></div></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <!></div>'),Un=_('<div class="button svelte-qkgdvy"><!></div>'),Rn=_('<!> <p class="svelte-qkgdvy"> <br><br> </p> <!> <!> <div class="keysContainer svelte-qkgdvy"></div> <!> <div class="svelte-qkgdvy"> </div>',1),Yn=_('<div class="container svelte-qkgdvy"><!></div>');function Ea(a,e){Ce(e,!0);const t="credentials"in navigator;let r=Ae(),l=Jt("account"),o=fe(()=>{var A;return(A=l.get())==null?void 0:A.user_id}),m=S(void 0),h=S(!1),d=S(""),y=S(!1),f=S(e.user.account_type==="password"),E=S(void 0),j=S(""),M=S(!1),F=S(D([]));ft(()=>{W()}),Le(()=>{n(F).length>0&&e.user.account_type==="passkey"&&u(f,n(F).length>1)}),Le(()=>{var A;(A=n(m))==null||A.focus()});function I(){u(h,!1),u(d,"")}async function W(){var w;let A=await vt(`/auth/v1/users/${(w=l.get())==null?void 0:w.user_id}/webauthn`);A.body?u(F,D(A.body)):console.error(A.error)}async function C(){if(I(),n(M)||!n(o))return;if(n(j).length<1){u(h,!0),u(d,D(r.mfa.passkeyNameErr));return}let A=await pr(n(o),n(j),r.authorize.invalidKeyUsed,r.authorize.requestExpired);A.error?(u(h,!0),u(d,`${r.mfa.errorReg} - ${A.error}`)):(u(y,!1),u(j,""),await W())}async function L(A){let w=await mr(e.user.id,A);if(w.status===200)await W();else{let z=await w.json();u(h,!0),u(d,D(z.message))}}function V(A){u(E,void 0),u(h,!0),u(d,D(A)),setTimeout(()=>{u(h,!1),u(d,"")},5e3)}function P(A){u(E,void 0),u(d,D(r.mfa.testSuccess)),setTimeout(()=>{u(d,"")},3e3)}var te=Yn(),Q=i(te);{var le=A=>{var w=Cn();v(A,w)},re=A=>{var w=Rn(),z=ne(w);{var k=X=>{ia(X,{get userId(){return e.user.id},get purpose(){return n(E)},onSuccess:P,onError:V})};U(z,X=>{n(E)&&X(k)})}var Z=c(z,2),ve=i(Z),pe=c(ve,3);s(Z);var q=c(Z,2);{var H=X=>{var g=zn(),b=ne(g);Fe(b,{autocomplete:"off",get label(){return r.mfa.passkeyName},get placeholder(){return r.mfa.passkeyName},maxLength:32,pattern:jt,onEnter:C,get ref(){return n(m)},set ref(B){u(m,D(B))},get value(){return n(j)},set value(B){u(j,D(B))},get isError(){return n(M)},set isError(B){u(M,D(B))}});var $=c(b,2),Y=i($);we(Y,{onclick:C,children:(B,ae)=>{_e();var me=Ee();x(()=>p(me,r.mfa.register)),v(B,me)},$$slots:{default:!0}});var ce=c(Y,2);we(ce,{level:3,onclick:()=>u(y,!1),children:(B,ae)=>{_e();var me=Ee();x(()=>p(me,r.common.cancel)),v(B,me)},$$slots:{default:!0}}),s($),v(X,g)},N=X=>{var g=Nn(),b=i(g),$=fe(()=>n(F).length===0?1:2);we(b,{get level(){return n($)},onclick:()=>u(y,!0),children:(Y,ce)=>{_e();var B=Ee();x(()=>p(B,r.mfa.registerNew)),v(Y,B)},$$slots:{default:!0}}),s(g),v(X,g)};U(q,X=>{n(y)?X(H):X(N,!1)})}var O=c(q,2);{var K=X=>{var g=Tn(),b=i(g,!0);s(g),x(()=>p(b,r.mfa.registerdKeys)),v(X,g)};U(O,X=>{n(F).length>0&&X(K)})}var ie=c(O,2);tt(ie,21,()=>n(F),X=>X.name,(X,g)=>{var b=An(),$=i(b),Y=i($),ce=i(Y,!0);s(Y);var B=c(Y,2),ae=i(B),me=i(ae,!0);s(ae);var be=c(ae,2);{var ke=Me=>{Pn(Me,{get text(){return r.account.userVerifiedTooltip},children:(Ye,ot)=>{var je=jn();at(je,"margin-bottom","-.25rem");var Ve=i(je);xn(Ve,{width:18,color:"var(--col-acnt)"}),s(je),v(Ye,je)},$$slots:{default:!0}})};U(be,Me=>{n(g).user_verified&&Me(ke)})}s(B),s($);var J=c($,2),qe=i(J),Te=i(qe,!0);s(qe);var Ue=c(qe,2),Se=i(Ue,!0);x(()=>p(Se,et(n(g).registered))),s(Ue),s(J);var Pe=c(J,2),xe=i(Pe),Xe=i(xe,!0);s(xe);var Je=c(xe,2),We=i(Je,!0);x(()=>p(We,et(n(g).last_used))),s(Je),s(Pe);var Re=c(Pe,2);{var dt=Me=>{var Ye=Ln(),ot=c(i(Ye),2),je=i(ot);we(je,{level:-3,onclick:()=>L(n(g).name),children:(Ve,Vt)=>{_e();var st=Ee();x(()=>p(st,r.common.delete)),v(Ve,st)},$$slots:{default:!0}}),s(ot),s(Ye),v(Me,Ye)};U(Re,Me=>{n(f)&&Me(dt)})}s(b),x(()=>{p(ce,r.mfa.passkeyName),p(me,n(g).name),p(Te,r.mfa.registerd),p(Xe,r.mfa.lastUsed)}),v(X,b)}),s(ie);var G=c(ie,2);{var de=X=>{var g=Un(),b=i(g);we(b,{onclick:()=>u(E,"Test"),children:($,Y)=>{_e();var ce=Ee();x(()=>p(ce,r.mfa.test)),v($,ce)},$$slots:{default:!0}}),s(g),v(X,g)};U(G,X=>{n(F).length>0&&X(de)})}var ue=c(G,2),De=i(ue,!0);s(ue),x(()=>{p(ve,`${r.mfa.p1??""} `),p(pe,` ${r.mfa.p2??""}`),Ct(ue,"success",!n(h)),Ct(ue,"err",n(h)),p(De,n(d))}),v(A,w)};U(Q,A=>{t?A(re,!1):A(le)})}s(te),v(a,te),ze()}var Bn=_('<div class="container svelte-ue7bk2"><!> <!> <!> <!> <div class="btn svelte-ue7bk2"><!></div> <div class="err svelte-ue7bk2"> </div></div>');function Sn(a,e){Ce(e,!0);let t=T(e,"passwords",15),r=T(e,"hideCurrentPassword",3,!1),l=T(e,"isValid",15),o=Ae();l(j);let m=S(!1),h=S(""),d=S(void 0),y=fe(()=>{var C;return((C=t().new)==null?void 0:C.length)>6&&t().new===t().newConfirm}),f=S(void 0),E=S(void 0);ft(async()=>{let C=await vt("/auth/v1/password_policy");C.body?u(d,D(C.body)):console.error(C.error)});function j(){return u(h,""),!r()&&!t().current?(u(h,D(o.account.passwordCurrReq)),!1):t().new?t().newConfirm?n(m)?t().new.length>256?(u(h,"max 256"),!1):t().new!==t().newConfirm?(u(h,D(o.account.passwordNoMatch)),!1):!0:(u(h,D(o.account.passwordPolicyFollow)),!1):(u(h,D(o.account.passwordNewReq)),!1):(u(h,D(o.account.passwordNewReq)),!1)}function M(){if(u(h,""),n(d)){let C=Xa(n(d));t(t().new=C,!0),t(t().newConfirm=C,!0)}requestAnimationFrame(()=>{var C,L;(C=n(f))==null||C(),(L=n(E))==null||L()})}var F=ye(),I=ne(F);{var W=C=>{var L=Bn(),V=i(L);gr(V,{get policy(){return n(d)},get password(){return t().new},get accepted(){return n(m)},set accepted(k){u(m,D(k))}});var P=c(V,2);{var te=k=>{Lt(k,{autocomplete:"current-password",get label(){return o.account.passwordCurr},get placeholder(){return o.account.passwordCurr},onInput:j,get width(){return e.inputWidth},get value(){return t().current},set value(Z){t(t().current=Z,!0)}})};U(P,k=>{r()||k(te)})}var Q=c(P,2);Lt(Q,{autocomplete:"new-password",get label(){return o.account.passwordNew},get placeholder(){return o.account.passwordNew},onInput:j,get showCopy(){return n(y)},get width(){return e.inputWidth},get value(){return t().new},set value(k){t(t().new=k,!0)},get reportValidity(){return n(f)},set reportValidity(k){u(f,D(k))}});var le=c(Q,2);Lt(le,{autocomplete:"new-password",get label(){return o.account.passwordConfirm},get placeholder(){return o.account.passwordConfirm},onInput:j,get showCopy(){return n(y)},get width(){return e.inputWidth},get value(){return t().newConfirm},set value(k){t(t().newConfirm=k,!0)},get reportValidity(){return n(E)},set reportValidity(k){u(E,D(k))}});var re=c(le,2),A=i(re);we(A,{onclick:M,level:2,children:(k,Z)=>{_e();var ve=Ee();x(()=>p(ve,o.account.generateRandom)),v(k,ve)},$$slots:{default:!0}}),s(re);var w=c(re,2),z=i(w,!0);s(w),s(L),x(()=>p(z,n(h))),v(C,L)};U(I,C=>{n(d)&&C(W)})}return v(a,F),ze({isPwdValid:j})}var Fn=_('<div class="m-05 svelte-1h4zvzu"><p> </p> <p><b> </b></p> <div></div> <p> </p> <!></div>'),Wn=_("<p> </p> <p> </p> <p> </p> <div><!></div>",1),Vn=_('<div class="success svelte-1h4zvzu"><!></div>'),Hn=_('<div class="err"> </div>'),On=_('<div class="cancel"><!></div>'),Qn=_('<div class="convertPasskey svelte-1h4zvzu"><h3> </h3> <p> </p> <!></div>'),Zn=_('<div><!> <div class="save svelte-1h4zvzu"><!> <!></div></div> <!>',1),Kn=_('<div class="container svelte-1h4zvzu"><!> <!> <!> <!></div>');function qa(a,e){Ce(e,!0);let t=T(e,"user",15),r=Ae(),l=fe(()=>e.viewModePhone?"calc(100vw - 1.5rem)":"300px"),o=S(D(t().account_type)),m=S(D([])),h=S(void 0),d=S(!1),y=S(!1),f=S(""),E=S(!1),j=S(void 0),M=S(D({current:"",new:"",newConfirm:""})),F=fe(()=>n(m).filter(q=>q.user_verified).length>0);ft(()=>{I()});async function I(){let q=await vt(`/auth/v1/users/${t().id}/webauthn`);q.body?u(m,D(q.body)):console.error("error fetching passkeys: "+q.error)}async function W(){let q=await Gt(`/auth/v1/users/${t().id}/self/convert_passkey`);q.error?console.error("error fetching passkeys: "+q.error):window.location.reload()}async function C(){u(f,""),n(m).length>0?await L():await V()}async function L(){var q;if(!((q=n(h))!=null&&q())){u(f,D(r.common.invalidInput));return}u(j,"PasswordNew")}async function V(q){var O,K;if(!((O=n(h))!=null&&O())){u(f,D(r.common.invalidInput));return}u(y,!0);let H={password_new:n(M).new};q?H.mfa_code=q:H.password_current=n(M).current;let N=await ea(`/auth/v1/users/${t().id}/self`,H);N.body?(u(E,!0),u(M,D({current:"",new:"",newConfirm:""})),t(N.body),u(o,D(N.body.account_type)),setTimeout(()=>{u(E,!1),u(d,!1)},3e3)):u(f,D(((K=N.error)==null?void 0:K.message)||"Error")),u(y,!1)}function P(q){u(j,void 0),u(f,D(q)),setTimeout(()=>{u(f,"")},5e3)}function te(q){u(j,void 0),q&&"code"in q&&V(q.code)}async function Q(){let q=await hr({email:t().email});if(q.ok)u(E,!0);else{let H=await q.json();u(f,D(H.message))}}var le=Kn(),re=i(le);{var A=q=>{ia(q,{get userId(){return t().id},get purpose(){return n(j)},onSuccess:te,onError:P})};U(re,q=>{n(j)&&q(A)})}var w=c(re,2);{var z=q=>{var H=Fn(),N=i(H),O=i(N,!0);s(N);var K=c(N,2),ie=i(K),G=i(ie,!0);s(ie),s(K);var de=c(K,2);at(de,"height",".3rem");var ue=c(de,2),De=i(ue,!0);s(ue);var X=c(ue,2);{var g=$=>{yr($,{check:!0})},b=$=>{we($,{level:2,onclick:Q,children:(Y,ce)=>{_e();var B=Ee();x(()=>p(B,r.account.passwordReset)),v(Y,B)},$$slots:{default:!0}})};U(X,$=>{n(E)?$(g):$(b,!1)})}s(H),x(()=>{var $;p(O,r.account.federatedConvertPassword1),p(G,(($=e.authProvider)==null?void 0:$.name)||"UNKNOWN"),p(De,r.account.federatedConvertPassword2)}),v(q,H)};U(w,q=>{n(o)==="federated"&&q(z)})}var k=c(w,2);{var Z=q=>{var H=Wn(),N=ne(H),O=i(N,!0);s(N);var K=c(N,2),ie=i(K,!0);s(K);var G=c(K,2),de=i(G,!0);s(G);var ue=c(G,2),De=i(ue);we(De,{level:2,onclick:()=>u(d,!0),children:(X,g)=>{_e();var b=Ee();x(()=>p(b,r.account.convertAccount)),v(X,b)},$$slots:{default:!0}}),s(ue),x(()=>{p(O,r.account.accTypePasskeyText1),p(ie,r.account.accTypePasskeyText2),p(de,r.account.accTypePasskeyText3)}),v(q,H)};U(k,q=>{(n(o)==="passkey"||n(o)==="federated_passkey")&&!n(d)&&q(Z)})}var ve=c(k,2);{var pe=q=>{var H=Zn(),N=ne(H),O=i(N),K=fe(()=>!(n(o)==="password"&&n(m).length<1));Sn(O,{get inputWidth(){return n(l)},get hideCurrentPassword(){return n(K)},get passwords(){return n(M)},set passwords(b){u(M,D(b))},get isValid(){return n(h)},set isValid(b){u(h,D(b))}});var ie=c(O,2),G=i(ie);we(G,{onclick:C,level:1,get isLoading(){return n(y)},children:(b,$)=>{_e();var Y=Ee();x(()=>p(Y,r.common.save)),v(b,Y)},$$slots:{default:!0}});var de=c(G,2);{var ue=b=>{var $=Vn(),Y=i($);yt(Y,{}),s($),Be(3,$,()=>Ke),v(b,$)},De=b=>{var $=ye(),Y=ne($);{var ce=ae=>{var me=Hn(),be=i(me,!0);s(me),x(()=>p(be,n(f))),Be(3,me,()=>Ke),v(ae,me)},B=ae=>{var me=ye(),be=ne(me);{var ke=J=>{var qe=On(),Te=i(qe);we(Te,{level:3,onclick:()=>u(d,!1),children:(Ue,Se)=>{_e();var Pe=Ee();x(()=>p(Pe,r.common.cancel)),v(Ue,Pe)},$$slots:{default:!0}}),s(qe),v(J,qe)};U(be,J=>{n(d)&&!n(y)&&J(ke)},!0)}v(ae,me)};U(Y,ae=>{n(f)?ae(ce):ae(B,!1)},!0)}v(b,$)};U(de,b=>{n(E)?b(ue):b(De,!1)})}s(ie),s(N);var X=c(N,2);{var g=b=>{var $=Qn(),Y=i($),ce=i(Y,!0);s(Y);var B=c(Y,2),ae=i(B,!0);s(B);var me=c(B,2);we(me,{level:2,onclick:W,children:(be,ke)=>{_e();var J=Ee();x(()=>p(J,r.account.convertAccount)),v(be,J)},$$slots:{default:!0}}),s($),x(()=>{p(ce,r.account.convertAccount),p(ae,r.account.convertAccountP1)}),v(b,$)};U(X,b=>{!n(d)&&n(F)&&b(g)})}v(q,H)};U(ve,q=>{(n(o)==="password"||n(o)==="federated_password"||n(d))&&q(pe)})}s(le),v(a,le),ze()}function Xn(a,e){a.code==="Enter"&&e()}var Jn=_('<div class="flex"><div class="label font-label noselect svelte-16z07u1"><!></div> <label class="switch svelte-16z07u1"><input type="checkbox" class="svelte-16z07u1"> <span class="slider slider-round svelte-16z07u1"></span></label></div>');function Pa(a,e){Ce(e,!0);let t=T(e,"checked",15,!1),r=T(e,"ariaLabel",3,""),l=T(e,"name",3,"");function o(){t(!t())}var m=Jn(),h=i(m),d=i(h);Nt(d,()=>e.children),s(h);var y=c(h,2),f=i(y);Xt(f),f.__click=o,f.__keydown=[Xn,o],_e(2),s(y),s(m),x(()=>{at(h,"width",e.labelWidth),R(f,"name",l()),f.disabled=e.disabled,R(f,"aria-checked",t()),R(f,"aria-label",r())}),cr(f,t),v(a,m),ze()}ct(["click","keydown"]);function Gn(a,e){e()}function eo(a,e,t){var r,l,o,m;switch(e(),a.code){case"ArrowUp":(r=t.onUp)==null||r.call(t);break;case"ArrowDown":(l=t.onDown)==null||l.call(t);break;case"ArrowLeft":(o=t.onLeft)==null||o.call(t);break;case"ArrowRight":(m=t.onRight)==null||m.call(t);break}}var to=_('<div class="error svelte-y71ny6"> </div>'),ao=_(`<div class="container svelte-y71ny6"><textarea autocomplete="off" class="svelte-y71ny6">
    </textarea> <div class="label svelte-y71ny6"><label class="font-label noselect svelte-y71ny6"> </label> <!></div></div>`);function ro(a,e){Ce(e,!0);let t=T(e,"ref",15),r=T(e,"id",19,qt),l=T(e,"value",15,""),o=T(e,"label",3,""),m=T(e,"rows",3,3),h=T(e,"placeholder",3,""),d=T(e,"errMsg",3,""),y=T(e,"disabled",3,!1),f=T(e,"required",3,!1),E=T(e,"isError",15,!1),j=T(e,"width",3,"inherit");const M=e.pattern?new RegExp(e.pattern,"gm"):void 0;let F=fe(()=>o()||h());function I(w){var z;L(),(z=e.onBlur)==null||z.call(e)}function W(w){w.preventDefault(),E(!0)}function C(w){L()}function L(){var w,z;return M&&(l().match(M).length>2?((w=t())==null||w.setCustomValidity(d()),E(!0)):((z=t())==null||z.setCustomValidity(""),E(!1))),!0}var V=ao(),P=i(V);Va(P),P.__input=[Gn,L],P.__keydown=[eo,L,e],gt(P,w=>t(w),()=>t());var te=c(P,2),Q=i(te),le=i(Q,!0);s(Q);var re=c(Q,2);{var A=w=>{var z=to(),k=i(z,!0);s(z),x(()=>p(k,d())),Be(3,z,()=>Pt),v(w,z)};U(re,w=>{E()&&w(A)})}s(te),s(V),x(()=>{at(V,"width",j()),R(P,"id",r()),R(P,"name",e.name),R(P,"title",n(F)),R(P,"aria-label",n(F)),R(P,"rows",m()),R(P,"placeholder",h()),R(P,"aria-placeholder",h()),P.disabled=y(),R(P,"aria-disabled",y()),R(P,"maxlength",e.maxLength||void 0),P.required=f()||void 0,R(P,"aria-required",f()||!1),R(P,"aria-invalid",E()),R(Q,"for",r()),R(Q,"data-required",f()),p(le,o())}),He("submit",P,C),He("invalid",P,W),He("blur",P,I),oa(P,l),v(a,V),ze()}ct(["input","keydown"]);var no=_("<div><p> </p> <!></div>"),oo=_('<div class="success svelte-5kivuv"><!></div>'),so=_('<div class="err svelte-5kivuv"> </div>'),io=_('<div class="container svelte-5kivuv"><p> </p> <p><!></p> <div class="switch svelte-5kivuv"><!></div> <div class="switch svelte-5kivuv"><!></div> <!> <div class="bottom svelte-5kivuv"><!> <!></div></div>');function Ca(a,e){Ce(e,!0);let t=T(e,"webIdData",15),r=Ae();const l="14rem";let o=S(""),m=S(!1),h=S(!!t().custom_triples),d=Et(t().user_id);Le(()=>{n(m)&&setTimeout(()=>{u(m,!1)},3e3)});async function y(){u(o,"");let w=await fr(t().user_id,t());if(w.ok)u(m,!0);else{let z=await w.json();u(o,D(z.message))}}var f=io(),E=i(f),j=i(E,!0);s(E);var M=c(E,2),F=i(M);wr(F,{href:d,target:"_blank",children:(w,z)=>{var k=ye(),Z=ne(k);Kt(Z,()=>d.replace("/auth/","/auth/<wbr/>")),v(w,k)},$$slots:{default:!0}}),s(M);var I=c(M,2),W=i(I);Pa(W,{ariaLabel:"E-Mail",labelWidth:l,get checked(){return t().expose_email},set checked(w){t(t().expose_email=w,!0)},children:(w,z)=>{_e();var k=Ee("E-Mail");v(w,k)},$$slots:{default:!0}}),s(I);var C=c(I,2),L=i(C);Pa(L,{get ariaLabel(){return r.account.webIdExpertMode},labelWidth:l,get checked(){return n(h)},set checked(w){u(h,D(w))},children:(w,z)=>{_e();var k=Ee();x(()=>p(k,r.account.webIdExpertMode)),v(w,k)},$$slots:{default:!0}}),s(C);var V=c(C,2);{var P=w=>{var z=no(),k=i(z),Z=i(k,!0);s(k);var ve=c(k,2);ro(ve,{placeholder:"FOAF",rows:15,get value(){return t().custom_triples},set value(pe){t(t().custom_triples=pe,!0)}}),s(z),x(()=>p(Z,r.account.webIdDescData)),Be(3,z,()=>Pt),v(w,z)};U(V,w=>{n(h)&&w(P)})}var te=c(V,2),Q=i(te);we(Q,{onclick:y,children:(w,z)=>{_e();var k=Ee();x(()=>p(k,r.common.save)),v(w,k)},$$slots:{default:!0}});var le=c(Q,2);{var re=w=>{var z=oo(),k=i(z);yt(k,{}),s(z),Be(3,z,()=>Ke),v(w,z)},A=w=>{var z=ye(),k=ne(z);{var Z=ve=>{var pe=so(),q=i(pe,!0);s(pe),x(()=>p(q,n(o))),Be(3,pe,()=>Ke),v(ve,pe)};U(k,ve=>{n(o)&&ve(Z)},!0)}v(w,z)};U(le,w=>{n(m)?w(re):w(A,!1)})}s(te),s(f),x(()=>p(j,r.account.webIdDesc)),v(a,f),ze()}function lo(a){ca(a,{viewMode:"account"})}var co=_('<span class="font-label tab svelte-mkcuiv"> </span>'),vo=_('<div class="tabs svelte-mkcuiv"></div>');function za(a,e){Ce(e,!0);let t=T(e,"selected",15,""),r=T(e,"borderRadius",3,"5px"),l=T(e,"center",3,!1),o=T(e,"width",3,"inherit");e.tabs.length>0&&t()===""&&t(e.tabs[0]);var m=vo();tt(m,21,()=>e.tabs,pt,(h,d)=>{var y=fe(()=>n(d)===t()?"step":void 0);we(h,{get ariaCurrent(){return n(y)},invisible:!0,onclick:()=>t(n(d)),children:(f,E)=>{var j=co(),M=i(j,!0);s(j),x(()=>{R(j,"data-selected",n(d)===t()),p(M,n(d))}),v(f,j)},$$slots:{default:!0}})}),s(m),x(()=>{Ct(m,"center",l()),at(m,"border-radius",r()),at(m,"width",o())}),v(a,m),ze()}var uo=_("<h3> </h3>"),mo=_('<div class="headerPhone svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="innerPhone svelte-k6hxbm"><!></div></div>',1),ho=_('<div class="header svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="inner svelte-k6hxbm"><!></div></div>',1),fo=_('<!> <div class="wrapper svelte-k6hxbm"><!></div>',1);function po(a,e){Ce(e,!0);const t=L=>{var V=uo(),P=i(V,!0);s(V),x(()=>p(P,`${r().given_name} ${r().family_name||""}`)),v(L,V)};let r=T(e,"user",15),l=T(e,"webIdData",15),o=Ae(),m=S(void 0),h=S(D([])),d=fe(()=>{var L;if((L=r().account_type)!=null&&L.startsWith("federated"))return n(h).filter(V=>V.id===r().auth_provider_id)[0]}),y=fe(()=>n(m)&&n(m)<500),f=S(D(o.account.navInfo)),E=D(l()?[o.account.navInfo,o.account.navEdit,o.common.password,o.account.navMfa,"WebID",o.account.devices,o.account.navLogout]:[o.account.navInfo,o.account.navEdit,o.common.password,o.account.navMfa,o.account.devices,o.account.navLogout]);ft(()=>{kr("v").get()==="devices"&&u(f,D(o.account.devices))}),Le(()=>{n(f)===o.account.navLogout&&Ja()});var j=fo(),M=ne(j);br(M,{id:Ga,get value(){return n(h)},set value(L){u(h,D(L))}});var F=c(M,2),I=i(F);{var W=L=>{var V=mo(),P=ne(V),te=i(P);t(te),s(P);var Q=c(P,2),le=i(Q);za(le,{get tabs(){return E},get selected(){return n(f)},set selected(k){u(f,D(k))}});var re=c(le,2),A=i(re);{var w=k=>{va(k,{get providers(){return n(h)},get authProvider(){return n(d)},viewModePhone:!0,get webIdData(){return l()},get user(){return r()},set user(Z){r(Z)}})},z=k=>{var Z=ye(),ve=ne(Z);{var pe=H=>{Ia(H,{viewModePhone:!0,get user(){return r()},set user(N){r(N)}})},q=H=>{var N=ye(),O=ne(N);{var K=G=>{qa(G,{get user(){return r()},get authProvider(){return n(d)},viewModePhone:!0})},ie=G=>{var de=ye(),ue=ne(de);{var De=g=>{Ea(g,{get user(){return r()}})},X=g=>{var b=ye(),$=ne(b);{var Y=B=>{Ca(B,{get webIdData(){return l()},set webIdData(ae){l(ae)}})},ce=B=>{var ae=ye(),me=ne(ae);{var be=ke=>{ca(ke,{viewMode:"account"})};U(me,ke=>{n(f)===o.account.devices&&ke(be)},!0)}v(B,ae)};U($,B=>{n(f)==="WebID"?B(Y):B(ce,!1)},!0)}v(g,b)};U(ue,g=>{n(f)===o.account.navMfa?g(De):g(X,!1)},!0)}v(G,de)};U(O,G=>{n(f)===o.common.password?G(K):G(ie,!1)},!0)}v(H,N)};U(ve,H=>{n(f)===o.account.navEdit?H(pe):H(q,!1)},!0)}v(k,Z)};U(A,k=>{n(f)===o.account.navInfo?k(w):k(z,!1)})}s(re),s(Q),v(L,V)},C=L=>{var V=ho(),P=ne(V),te=i(P);t(te),s(P);var Q=c(P,2),le=i(Q);za(le,{get tabs(){return E},center:!0,get selected(){return n(f)},set selected(k){u(f,D(k))}});var re=c(le,2),A=i(re);{var w=k=>{va(k,{get webIdData(){return l()},get providers(){return n(h)},get authProvider(){return n(d)},get user(){return r()},set user(Z){r(Z)}})},z=k=>{var Z=ye(),ve=ne(Z);{var pe=H=>{Ia(H,{get user(){return r()},set user(N){r(N)}})},q=H=>{var N=ye(),O=ne(N);{var K=G=>{qa(G,{get user(){return r()},get authProvider(){return n(d)}})},ie=G=>{var de=ye(),ue=ne(de);{var De=g=>{Ea(g,{get user(){return r()}})},X=g=>{var b=ye(),$=ne(b);{var Y=B=>{Ca(B,{get webIdData(){return l()},set webIdData(ae){l(ae)}})},ce=B=>{var ae=ye(),me=ne(ae);{var be=ke=>{lo(ke)};U(me,ke=>{n(f)===o.account.devices&&ke(be)},!0)}v(B,ae)};U($,B=>{n(f)==="WebID"?B(Y):B(ce,!1)},!0)}v(g,b)};U(ue,g=>{n(f)===o.account.navMfa?g(De):g(X,!1)},!0)}v(G,de)};U(O,G=>{n(f)===o.common.password?G(K):G(ie,!1)},!0)}v(H,N)};U(ve,H=>{n(f)===o.account.navEdit?H(pe):H(q,!1)},!0)}v(k,Z)};U(A,k=>{n(f)===o.account.navInfo?k(w):k(z,!1)})}s(re),s(Q),v(L,V)};U(I,L=>{n(y)?L(W):L(C,!1)})}s(F),Ha("innerWidth",L=>u(m,D(L))),v(a,j),ze()}var go=_("<!> <!> <!>",1);function yo(a,e){Ce(e,!0);let t=Ae(),r=Jt("account"),l=S(void 0),o=S(void 0),m=S(!1);Le(()=>{let d=r.get();d&&h(d)});async function h(d){const y=d.user_id;if(y){let f=await Promise.all([vt(`/auth/v1/users/${y}`),vt(`/auth/v1/users/${y}/webid/data`)]);f[0].body?u(l,D(f[0].body)):er("account"),f[1].body?u(o,D(f[1].body)):f[1].status===404&&u(o,D({user_id:y,expose_email:!1})),u(m,!0)}else console.error("no user_id in session")}Wa(d=>{x(()=>{var y;return Fa.title=`${((t==null?void 0:t.account.account)||"Account")??""} ${((y=n(l))==null?void 0:y.email)??""}`})}),Mr(a,{children:(d,y)=>{$r(d,{children:(f,E)=>{var j=go(),M=ne(j);{var F=C=>{po(C,{get user(){return n(l)},set user(L){u(l,D(L))},get webIdData(){return n(o)},set webIdData(L){u(o,D(L))}})};U(M,C=>{n(m)&&r&&n(l)&&C(F)})}var I=c(M,2);dr(I,{absolute:!0});var W=c(I,2);ur(W,{absolute:!0}),v(f,j)},$$slots:{default:!0}})},$$slots:{default:!0}}),ze()}export{yo as component};
