import{a as l,b as W,c as we,n as za,t as re}from"../chunks/disclose-version.C0dpEWi_.js";import{a2 as t,a0 as o,a4 as a,a1 as w,p as We,Z as K,b as ia,j as v,g as e,a as ze,h as Ie,_ as le,a3 as se,o as He,$ as _t}from"../chunks/index-client.LkyNpeLM.js";import{d as La,e as Ma,s as d,r as xt,h as Nt}from"../chunks/render.D21ACvZ4.js";import{i as q}from"../chunks/if.BQqAvi9S.js";import{p as m}from"../chunks/proxy.bVSoDcUp.js";import{x as Oe,v as Be,O as Ge,u as ne,a8 as wa,a9 as It,_ as Ct,P as Dt,aa as Pt,S as qt,g as jt,q as Aa,t as Ut,ab as Wt,ac as zt,ad as Lt,ae as Ta,af as Ea,n as Fe,ag as Ra,ah as Mt,D as Je,E as Ke,ai as At,z as Va,Z as Tt,aj as Et,ak as Rt,y as Vt,al as Kt,V as St,am as Ot,an as Bt,G as Gt,a0 as Ht,ao as Ft,a1 as Ka,ap as Jt}from"../chunks/dataFetching.C4rEqQY1.js";import{t as Ae,s as _e,f as Ve,g as Zt,c as ie,h as Qt,a as Xt}from"../chunks/Loading.CZYfBo5y.js";import{h as Sa,T as Yt,a as er,S as Oa,b as ar,D as tr,c as rr}from"../chunks/Devices.C6IiDFKU.js";import{p as V,r as sr,s as nr,a as ir}from"../chunks/props.BDzDHVdA.js";import{r as ba}from"../chunks/legacy-client.yBTdRgtG.js";import{e as Ba}from"../chunks/OptionSelect.CHnFxA-i.js";import{C as oa}from"../chunks/CheckIcon.D95u0ggr.js";import{B as De}from"../chunks/Button.BDI_bIrm.js";import{s as Ga}from"../chunks/snippet.C6oh0jnA.js";import{b as Ha}from"../chunks/this.BhcZdidn.js";import{u as Te}from"../chunks/i18n.svelte.DPkpATkG.js";import{c as Ze,a as Pe,b as or,I as Ee}from"../chunks/Input.BWHohn37.js";import{t as lr}from"../chunks/tweened._kLXMt8j.js";import{L as Fa}from"../chunks/LangSelector.PrFnGVsI.js";import{P as cr}from"../chunks/PasswordPolicy.Bw5rsarJ.js";import{P as ga}from"../chunks/PasswordInput.j52NsKBe.js";import{W as vr}from"../chunks/WebauthnRequest.CDgCRlgS.js";import{T as dr}from"../chunks/Template.CTK3kKGi.js";import{M as ur,C as pr}from"../chunks/ContentCenter.BsVUI9il.js";var mr=W('<div class="container svelte-1yqkxw6"><div class="loading svelte-1yqkxw6"><div class="loading-1 svelte-1yqkxw6"></div> <div class="loading-2 svelte-1yqkxw6"></div> <div class="loading-3 svelte-1yqkxw6"></div></div></div>');function Ja(S,i){let r=V(i,"background",3,!1),b=V(i,"color",3,"hsl(var(--text))"),s=V(i,"global",3,!1),p=V(i,"offset",3,0);var h=mr(),u=t(h),j=t(u),g=o(j,2),k=o(g,2);a(u),a(h),w(()=>{Oe(h,"global",s()),Oe(h,"local",!s()),Oe(h,"background",r()),_e(u,"style",`margin-top: ${p()??""}px;`),Be(j,"background",b()),Be(g,"background",b()),Be(k,"background",b())}),Ae(3,h,()=>Ve,()=>({duration:100})),l(S,h)}var hr=W('<div class="load svelte-av2wub"><!></div>'),fr=W('<div class="font-label svelte-av2wub"><!></div>'),wr=W("<button><!></button>");function br(S,i){We(i,!0);let r=V(i,"type",3,"button"),b=V(i,"role",3,"button"),s=V(i,"ref",15),p=V(i,"level",3,1),h=V(i,"isDisabled",3,!1),u=V(i,"isLoading",3,!1),j=V(i,"invisible",3,!1),g=V(i,"invisibleOutline",3,!1),k=sr(i,["$$slots","$$events","$$legacy","type","role","ref","id","ariaLabel","ariaControls","ariaCurrent","level","width","isDisabled","isLoading","invisible","invisibleOutline","popovertarget","popovertargetaction","onclick","onLeft","onRight","onUp","onDown","children"]),M=Ie(()=>{if(j())return"invisible";switch(p()){case-1:return"l1d";case-2:return"l2d";case-3:return"l3d";case 2:return"l2";case 3:return"l3";default:return"l1"}}),N=K(!u()),G=Ie(()=>h()||u());ia(()=>{u()?setTimeout(()=>{v(N,!1)},120):setTimeout(()=>{v(N,!0)},120)});function P(){switch(p()){case-1:return"var(--btn-text)";case-2:return"hsl(var(--error))";case-3:return"hsl(var(--error))";case 2:return"hsl(var(--action))";case 3:return"hsl(var(--action))";default:return"var(--btn-text)"}}function I(C){var R,Y,J,Z,ee;switch(C.code){case"Enter":(R=i.onclick)==null||R.call(i,C);break;case"ArrowLeft":(Y=i.onLeft)==null||Y.call(i);break;case"ArrowRight":(J=i.onRight)==null||J.call(i);break;case"ArrowUp":(Z=i.onUp)==null||Z.call(i);break;case"ArrowDown":(ee=i.onDown)==null||ee.call(i);break}}var A=wr();let Q;var F=t(A);{var z=C=>{var R=hr(),Y=t(R),J=Ie(P);Ja(Y,{background:!1,get color(){return e(J)}}),a(R),l(C,R)},H=C=>{var R=we(),Y=le(R);{var J=Z=>{var ee=fr(),ae=t(ee);Ga(ae,()=>i.children),a(ee),Ae(1,ee,()=>Ve),l(Z,ee)};q(Y,Z=>{e(N)&&Z(J)},!0)}l(C,R)};q(F,C=>{u()?C(z):C(H,!1)})}a(A),Ha(A,C=>s(C),()=>s()),w(()=>{Q=Zt(A,Q,{role:b(),type:r(),id:i.id,"aria-label":i.ariaLabel,"aria-controls":i.ariaControls,"aria-current":i.ariaCurrent,class:e(M),"data-isloading":u(),onclick:i.onclick,onkeydown:I,disabled:e(G),"aria-disabled":e(G),popovertarget:i.popovertarget,popovertargetaction:i.popovertargetaction,...k},"svelte-av2wub"),Oe(A,"invisibleOutline",g()),Be(A,"width",i.width)}),l(S,A),ze()}var gr=za('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function $r(S,i){let r=V(i,"opacity",3,.9),b=V(i,"width",3,"1.5rem"),s=V(i,"color",3,"hsl(var(--error))");var p=gr();_e(p,"stroke-width",2),w(()=>{_e(p,"width",b()),_e(p,"color",s()),_e(p,"opacity",r())}),l(S,p)}function yr(S,i,r){i()||r()}function kr(S){S.stopPropagation()}var _r=W('<span class="closeIcon svelte-1w7l4fj"><!></span>'),xr=W('<div class="relative"><div class="absolute close svelte-1w7l4fj"><!></div></div>'),Nr=W('<dialog aria-modal="true" class="svelte-1w7l4fj"><div role="none" class="svelte-1w7l4fj"><!> <!></div></dialog>');function Ir(S,i){We(i,!0);let r=V(i,"showModal",15),b=V(i,"closeModal",15),s=V(i,"strict",3,!1),p=V(i,"prerender",3,!1),h=Te(),u;ia(()=>{b(j)}),ia(()=>{r()&&(u==null||u.showModal())});function j(I){I==null||I.preventDefault(),u==null||u.close(),r(!1)}var g=Nr();g.__click=[yr,s,j];var k=t(g);k.__click=[kr];var M=t(k);{var N=I=>{var A=xr(),Q=t(A),F=t(Q);br(F,{get ariaLabel(){return h.common.close},invisible:!0,onclick:j,children:(z,H)=>{var C=_r(),R=t(C);$r(R,{color:"currentColor",width:"1.2rem"}),a(C),l(z,C)},$$slots:{default:!0}}),a(Q),a(A),l(I,A)};q(M,I=>{s()||I(N)})}var G=o(M,2);{var P=I=>{var A=we(),Q=le(A);Ga(Q,()=>i.children),l(I,A)};q(G,I=>{(p()||r())&&I(P)})}a(k),a(g),Ha(g,I=>u=I,()=>u),w(()=>_e(g,"data-strict",s())),Ma("close",g,()=>{var I;r(!1),(I=i.onClose)==null||I.call(i)}),l(S,g),ze()}La(["click"]);var Cr=W('<div class="link-err value svelte-bckoh9"> </div>'),Dr=W('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),Pr=(S,i)=>v(i,!e(i)),qr=W('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),jr=W('<p> </p> <div class="providers svelte-bckoh9"></div>',1),Ur=W('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),Wr=W('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),zr=W('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),Lr=W('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Za(S,i){We(i,!0);let r=V(i,"user",15),b=V(i,"viewModePhone",3,!1),s=Te(),p=K(!1),h=K(!1),u=Ie(()=>{var X;return(X=r().account_type)==null?void 0:X.startsWith("federated")}),j=Ie(()=>{var X;return e(u)?`${r().account_type}: ${((X=i.authProvider)==null?void 0:X.name)||""}`:r().account_type}),g=Ie(()=>b()?"rowPhone":"row"),k=Ie(()=>b()?"labelPhone":"label");function M(X){Ct(64,(me,{challenge:xe,verifier:Ne})=>{me||(localStorage.setItem(Dt,Ne),N(X,xe))})}async function N(X,me){let xe={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:X,pkce_challenge:me},Ne=await Pt(X,xe);if(Ne.ok){const Ce=await Ne.text();qt(Ce),window.location.href=Ne.headers.get("location")}else{let Ce=await Ne.json();console.error(Ce)}}async function G(){let X=await It(),me=await X.json();X.ok?r(me):v(p,!0)}var P=Lr(),I=t(P),A=t(I),Q=t(A),F=t(Q);a(Q),a(A);var z=o(A,2),H=t(z,!0);a(z),a(I);var C=o(I,2),R=t(C),Y=t(R),J=t(Y);a(Y),a(R);var Z=o(R,2),ee=t(Z,!0);a(Z),a(C);var ae=o(C,2),ue=t(ae),O=t(ue),U=t(O);a(O),a(ue);var T=o(ue,2),y=t(T,!0);a(T),a(ae);var x=o(ae,2),$=t(x),c=t($),D=t(c);a(c),a($);var n=o($,2),_=t(n,!0);a(n),a(x);var f=o(x,2),E=t(f),te=t(E),oe=t(te);a(te),a(E);var he=o(E,2),pe=t(he),be=t(pe,!0);a(pe);var ge=o(pe,2);{var ke=X=>{var me=Dr(),xe=t(me);De(xe,{level:3,$$events:{click:G},children:(qe,Ue)=>{se();var Se=re();w(()=>d(Se,s.account.providerUnlink)),l(qe,Se)},$$slots:{default:!0}});var Ne=o(xe,2);{var Ce=qe=>{var Ue=Cr(),Se=t(Ue,!0);a(Ue),w(()=>d(Se,s.account.providerUnlinkDesc)),l(qe,Ue)};q(Ne,qe=>{e(p)&&qe(Ce)})}a(me),l(X,me)},je=X=>{var me=we(),xe=le(me);{var Ne=Ce=>{var qe=Ur(),Ue=le(qe);Ue.__click=[Pr,h];var Se=t(Ue,!0);a(Ue);var gt=o(Ue,2);Ir(gt,{get showModal(){return e(h)},set showModal(ua){v(h,m(ua))},children:(ua,fs)=>{var qa=jr(),pa=le(qa),$t=t(pa,!0);a(pa);var ja=o(pa,2);Ba(ja,21,()=>i.providers,ma=>ma.id,(ma,ha)=>{De(ma,{level:3,$$events:{click:()=>M(e(ha).id)},children:(yt,ws)=>{var fa=qr(),Ua=t(fa),Wa=o(Ua,2),kt=t(Wa,!0);a(Wa),a(fa),w(()=>{_e(Ua,"src",`/auth/v1/providers/${e(ha).id}/img`),d(kt,e(ha).name)}),l(yt,fa)},$$slots:{default:!0}})}),a(ja),w(()=>d($t,s.account.providerLinkDesc)),l(ua,qa)},$$slots:{default:!0}}),w(()=>d(Se,s.account.providerLink)),Ma("keypress",Ue,()=>v(h,!e(h))),l(Ce,qe)};q(xe,Ce=>{i.providers.length>0&&Ce(Ne)},!0)}l(X,me)};q(ge,X=>{e(u)?X(ke):X(je,!1)})}a(he),a(f);var $e=o(f,2),L=t($e),ce=t(L),ve=t(ce);a(ce),a(L);var ye=o(L,2),de=t(ye,!0);a(ye),a($e);var B=o($e,2),fe=t(B),Re=t(fe),Le=t(Re);a(Re),a(fe);var Me=o(fe,2),la=t(Me,!0);a(Me),a(B);var ca=o(B,2),Qe=t(ca),$a=t(Qe),rt=t($a);a($a),a(Qe);var st=o(Qe,2),nt=Ie(()=>!!r().webauthn_user_id);oa(st,{get check(){return e(nt)}}),a(ca);var va=o(ca,2),Xe=t(va),ya=t(Xe),it=t(ya);a(ya),a(Xe);var ot=o(Xe,2);oa(ot,{get check(){return r().enabled}}),a(va);var da=o(va,2),Ye=t(da),ka=t(Ye),lt=t(ka);a(ka),a(Ye);var ct=o(Ye,2);oa(ct,{get check(){return r().email_verified}}),a(da);var ea=o(da,2),aa=t(ea),_a=t(aa),vt=t(_a);a(_a),a(aa);var xa=o(aa,2),dt=t(xa,!0);w(()=>d(dt,Ge(r().last_login))),a(xa),a(ea);var ta=o(ea,2),ra=t(ta),Na=t(ra),ut=t(Na);a(Na),a(ra);var Ia=o(ra,2),pt=t(Ia,!0);w(()=>d(pt,r().password_expires&&Ge(r().password_expires)||s.common.never)),a(Ia),a(ta);var sa=o(ta,2),na=t(sa),Ca=t(na),mt=t(Ca);a(Ca),a(na);var Da=o(na,2),ht=t(Da,!0);w(()=>d(ht,Ge(r().created_at))),a(Da),a(sa);var Pa=o(sa,2);{var ft=X=>{var me=Wr(),xe=t(me),Ne=t(xe),Ce=t(Ne);a(Ne),a(xe);var qe=o(xe,2),Ue=t(qe,!0);w(()=>d(Ue,Ge(r().user_expires))),a(qe),a(me),w(()=>{ne(me,ie(e(g)),"svelte-bckoh9"),ne(xe,ie(e(k)),"svelte-bckoh9"),d(Ce,`${s.account.userExpiry??""}:`)}),l(X,me)};q(Pa,X=>{r().user_expires&&X(ft)})}var wt=o(Pa,2);{var bt=X=>{var me=zr(),xe=t(me),Ne=o(xe,2),Ce=t(Ne);w(()=>_e(Ce,"href",wa(r().id)));var qe=t(Ce);Sa(qe,()=>wa(r().id).replace("/auth/","/auth/<wbr/>")),a(Ce),a(Ne),a(me),w(()=>{ne(me,ie(e(g)),"svelte-bckoh9"),ne(xe,ie(e(k)),"svelte-bckoh9")}),l(X,me)};q(wt,X=>{i.webIdData&&X(bt)})}a(P),w(()=>{ne(I,ie(e(g)),"svelte-bckoh9"),ne(A,ie(e(k)),"svelte-bckoh9"),d(F,`${s.common.email??""}:`),d(H,r().email),ne(C,ie(e(g)),"svelte-bckoh9"),ne(R,ie(e(k)),"svelte-bckoh9"),d(J,`${s.account.givenName??""}:`),d(ee,r().given_name),ne(ae,ie(e(g)),"svelte-bckoh9"),ne(ue,ie(e(k)),"svelte-bckoh9"),d(U,`${s.account.familyName??""}:`),d(y,r().family_name),ne(x,ie(e(g)),"svelte-bckoh9"),ne($,ie(e(k)),"svelte-bckoh9"),d(D,`${s.account.user??""} ID:`),d(_,r().id),ne(f,ie(e(g)),"svelte-bckoh9"),ne(E,ie(e(k)),"svelte-bckoh9"),d(oe,`${s.account.accType??""}:`),d(be,e(j)||""),ne($e,ie(e(g)),"svelte-bckoh9"),ne(L,ie(e(k)),"svelte-bckoh9"),d(ve,`${s.account.roles??""}:`),d(de,r().roles||"None"),ne(B,ie(e(g)),"svelte-bckoh9"),ne(fe,ie(e(k)),"svelte-bckoh9"),d(Le,`${s.account.groups??""}:`),d(la,r().groups||"None"),ne(Qe,ie(e(k)),"svelte-bckoh9"),d(rt,`${s.account.mfaActivated??""}:`),ne(Xe,ie(e(k)),"svelte-bckoh9"),d(it,`${s.account.userEnabled??""}:`),ne(Ye,ie(e(k)),"svelte-bckoh9"),d(lt,`${s.account.emailVerified??""}:`),ne(ea,ie(e(g)),"svelte-bckoh9"),ne(aa,ie(e(k)),"svelte-bckoh9"),d(vt,`${s.account.lastLogin??""}:`),ne(ta,ie(e(g)),"svelte-bckoh9"),ne(ra,ie(e(k)),"svelte-bckoh9"),d(ut,`${s.account.passwordExpiry??""}:`),ne(sa,ie(e(g)),"svelte-bckoh9"),ne(na,ie(e(k)),"svelte-bckoh9"),d(mt,`${s.account.userCreated??""}:`)}),l(S,P),ze()}La(["click"]);function Qa(S,i){We(i,!0);let r=V(i,"selected",15),b=V(i,"showWebId",3,!1),s=Te(),p=m(b()?[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,"WebID",s.account.devices,s.account.navLogout]:[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,s.account.devices,s.account.navLogout]);He(()=>{jt().v==="devices"&&r(s.account.devices)}),Yt(S,{get labels(){return p},get selected(){return r()},set selected(h){r(h)}}),ze()}var Mr=W("<p> </p>"),Ar=W('<div class="success svelte-1xh7x72">Update successful <!></div>'),Tr=W('<div class="err svelte-1xh7x72"> </div>'),Er=W('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Xa(S,i){We(i,!0);let r=V(i,"user",31,()=>m({})),b=V(i,"viewModePhone",3,!1),s=Te(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="8rem";let u=K(!1),j=K(""),g=K(!1),k=K(!1),M=m({email:r().email,givenName:r().given_name,familyName:r().family_name}),N=K(m({}));const G=Ze().shape({email:Pe().required(s.account.validEmail).email(s.account.validEmail),givenName:Pe().required(s.account.validGivenName).matches(Aa,s.account.validGivenName),familyName:Pe().nullable().matches(Ut,s.account.validFamilyName)});let P=K(m({}));const I=Ze().shape({birthdate:Pe().nullable().trim().matches(Wt,s.common.invalidInput),phone:Pe().nullable().trim().matches(zt,"+..."),street:Pe().nullable().trim().matches(Lt,s.common.invalidInput),zip:or().nullable().min(1e3).max(999999),city:Pe().nullable().trim().matches(Ta,s.common.invalidInput),country:Pe().nullable().trim().matches(Ta,s.common.invalidInput)});function A(n){n.code==="Enter"&&Q()}async function Q(){if(!await F()){v(j,m(s.common.invalidInput));return}v(u,!0);const n={email:M.email,given_name:M.givenName,family_name:M.familyName||null,user_values:r().user_values};n.user_values.phone&&(n.user_values.phone=n.user_values.phone.replaceAll(" ","")),n.user_values.zip&&(n.user_values.zip=Number.parseInt(n.user_values.zip));let _=await Ea(r().id,n);if(_.ok)v(g,!0),r(r().email=M.email,!0),r(r().given_name=M.givenName,!0),r(r().family_name=M.familyName,!0),_.status===202&&v(k,!0);else{let f=await _.json();v(j,m(f.message))}v(u,!1)}async function F(){let n=!0;try{await G.validate(M,{abortEarly:!1}),v(N,m({}))}catch(_){v(N,m(Fe(_))),n=!1}try{await I.validate(r().user_values,{abortEarly:!1}),v(P,m({}))}catch(_){v(P,m(Fe(_))),n=!1}return n}var z=Er(),H=t(z),C=t(H);Ee(C,{autocomplete:"family-name",get placeholder(){return s.common.email},get width(){return e(p)},get value(){return M.email},set value(n){M.email=n},get error(){return e(N).email},set error(n){e(N).email=n},$$events:{input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.common.email.toUpperCase())),l(n,f)},$$slots:{default:!0}});var R=o(C,2);Ee(R,{autocomplete:"given-name",get placeholder(){return s.account.givenName},get width(){return e(p)},get value(){return M.givenName},set value(n){M.givenName=n},get error(){return e(N).givenName},set error(n){e(N).givenName=n},$$events:{input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.givenName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var Y=o(R,2);Ee(Y,{autocomplete:"family-name",get placeholder(){return s.account.familyName},get width(){return e(p)},get value(){return M.familyName},set value(n){M.familyName=n},get error(){return e(N).familyName},set error(n){e(N).familyName=n},$$events:{input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.familyName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var J=o(Y,2);Be(J,"margin",".5rem");var Z=t(J,!0);a(J);var ee=o(J,2);Ee(ee,{autocomplete:"street-address",get placeholder(){return s.account.street},get width(){return e(p)},get value(){return r().user_values.street},set value(n){r(r().user_values.street=n,!0)},get error(){return e(P).street},set error(n){e(P).street=n},$$events:{keypress:A,input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.street.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ae=o(ee,2);Ee(ae,{type:"number",autocomplete:"postal-code",get placeholder(){return s.account.zip},min:1e3,max:999999,get width(){return e(p)},get value(){return r().user_values.zip},set value(n){r(r().user_values.zip=n,!0)},get error(){return e(P).zip},set error(n){e(P).zip=n},$$events:{keypress:A,input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.zip.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ue=o(ae,2);Ee(ue,{autocomplete:"adress-level2",get placeholder(){return s.account.city},get width(){return e(p)},get value(){return r().user_values.city},set value(n){r(r().user_values.city=n,!0)},get error(){return e(P).city},set error(n){e(P).city=n},$$events:{keypress:A,input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.city.toUpperCase())),l(n,f)},$$slots:{default:!0}});var O=o(ue,2);Ee(O,{autocomplete:"country",get placeholder(){return s.account.country},get width(){return e(p)},get value(){return r().user_values.country},set value(n){r(r().user_values.country=n,!0)},get error(){return e(P).country},set error(n){e(P).country=n},$$events:{keypress:A,input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.country.toUpperCase())),l(n,f)},$$slots:{default:!0}});var U=o(O,2);Ee(U,{autocomplete:"tel",get placeholder(){return s.account.phone},get width(){return e(p)},get value(){return r().user_values.phone},set value(n){r(r().user_values.phone=n,!0)},get error(){return e(P).phone},set error(n){e(P).phone=n},$$events:{keypress:A,input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.phone.toUpperCase())),l(n,f)},$$slots:{default:!0}});var T=o(U,2);Ee(T,{type:"date",autocomplete:"bday",get placeholder(){return s.account.birthdate},get width(){return e(p)},get value(){return r().user_values.birthdate},set value(n){r(r().user_values.birthdate=n,!0)},get error(){return e(P).birthdate},set error(n){e(P).birthdate=n},$$events:{keypress:A,input:F},children:(n,_)=>{se();var f=re();w(()=>d(f,s.account.birthdate.toUpperCase())),l(n,f)},$$slots:{default:!0}});var y=o(T,2);De(y,{width:h,level:1,get isLoading(){return e(u)},set isLoading(n){v(u,m(n))},$$events:{click:Q},children:(n,_)=>{se();var f=re();w(()=>d(f,s.common.save)),l(n,f)},$$slots:{default:!0}});var x=o(y,2),$=t(x);{var c=n=>{var _=Ar(),f=o(t(_));{var E=te=>{var oe=Mr(),he=t(oe,!0);a(oe),w(()=>d(he,s.account.emailUpdateConfirm)),l(te,oe)};q(f,te=>{e(k)&&te(E)})}a(_),Ae(3,_,()=>Ve),l(n,_)},D=n=>{var _=we(),f=le(_);{var E=te=>{var oe=Tr(),he=t(oe,!0);a(oe),w(()=>d(he,e(j))),Ae(3,oe,()=>Ve),l(te,oe)};q(f,te=>{e(j)&&te(E)},!0)}l(n,_)};q($,n=>{e(g)?n(c):n(D,!1)})}a(x),a(H),a(z),w(()=>d(Z,s.account.optionalValues)),l(S,z),ze()}var Rr=za('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Vr(S,i){let r=V(i,"opacity",3,.9),b=V(i,"width",3,24),s=V(i,"color",3,"currentColor");var p=Rr();_e(p,"stroke-width",2),w(()=>{_e(p,"stroke",s()),_e(p,"width",b()),_e(p,"opacity",r())}),l(S,p)}var Kr=W('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),Sr=W('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Or=W('<div class="keysHeader svelte-q7vfo0"> </div>'),Br=W("<div><!></div>"),Gr=W('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Hr=W('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Fr=W('<div class="button svelte-q7vfo0"><!></div>'),Jr=W('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Ya(S,i){We(i,!0);let r=V(i,"user",19,()=>({})),b=Te(),s=K(!1),p=K(""),h=K(!1),u=K(r().account_type==="password"),j=K(m([]));ba(()=>{e(j).length>0&&r().account_type==="passkey"&&v(u,e(j).length>1)});let g=m({passkeyName:""}),k=K(m({}));const M=Ze().shape({passkeyName:Pe().required(b.common.invalidInput).matches(Aa,b.mfa.passkeyNameErr)});He(()=>{G()});function N(){v(s,!1),v(p,"")}async function G(){let y=await Ra(i.session.user_id),x=await y.json();y.ok?v(j,m(x)):console.error("error fetching passkeys: "+x.message)}async function P(){if(N(),!await Q())return;const y=g.passkeyName;if(y.length<2){v(s,!0),v(p,m(b.mfa.passkeyNameErr));return}let x=await Mt(r().id,{passkey_name:y});if(x.status===200){let $=await x.json();$.publicKey.challenge=Je($.publicKey.challenge),$.publicKey.user.id=Je($.publicKey.user.id),$.publicKey.excludeCredentials=$.publicKey.excludeCredentials,$.publicKey.excludeCredentials&&($.publicKey.excludeCredentials=$.publicKey.excludeCredentials.map(n=>(n.id=Je(n.id),n)));let c=await navigator.credentials.create($),D={passkey_name:y,data:{id:c.id,rawId:Ke(c.rawId),response:{attestationObject:Ke(c.response.attestationObject),clientDataJSON:Ke(c.response.clientDataJSON)},type:c.type}};x=await At(r().id,D),x.status===201?(v(h,!1),g.passkeyName="",await G()):console.error(x)}else v(s,!0),v(p,m(b.mfa.errorReg))}async function I(){N();let y=await Va(r().id,{purpose:"Test"});if(y.status===200){let x=await y.json(),$=x.rcr;$.publicKey.challenge=Je($.publicKey.challenge);for(let n of $.publicKey.allowCredentials)n.id=Je(n.id);let c;try{c=await navigator.credentials.get($)}catch{v(s,!0),v(p,m(b.mfa.invalidKeyUsed));return}let D={code:x.code,data:{id:c.id,rawId:Ke(c.rawId),response:{authenticatorData:Ke(c.response.authenticatorData),clientDataJSON:Ke(c.response.clientDataJSON),signature:Ke(c.response.signature)},type:c.type}};y=await Tt(r().id,D),y.status===202?(v(p,m(b.mfa.testSuccess)),await G()):console.error(y)}else v(s,!0),v(p,m(b.mfa.testError))}async function A(y){let x=await Et(r().id,y);if(x.status===200)await G();else{let $=await x.json();v(s,!0),v(p,m($.message))}}async function Q(){try{return await M.validate(g,{abortEarly:!1}),v(k,m({})),!0}catch(y){return v(k,m(Fe(y))),!1}}var F=Jr(),z=t(F),H=t(z),C=o(H,3);a(z);var R=o(z,2);{var Y=y=>{var x=Kr(),$=le(x);Ee($,{autocomplete:"off",get placeholder(){return b.mfa.passkeyName},autofocus:!0,get value(){return g.passkeyName},set value(_){g.passkeyName=_},get error(){return e(k).passkeyName},set error(_){e(k).passkeyName=_},$$events:{input:Q,enter:P},children:(_,f)=>{se();var E=re();w(()=>d(E,b.mfa.passkeyName)),l(_,E)},$$slots:{default:!0}});var c=o($,2),D=t(c);De(D,{level:1,$$events:{click:P},children:(_,f)=>{se();var E=re();w(()=>d(E,b.mfa.register)),l(_,E)},$$slots:{default:!0}});var n=o(D,2);De(n,{level:4,$$events:{click:()=>v(h,!1)},children:(_,f)=>{se();var E=re();w(()=>d(E,b.common.cancel)),l(_,E)},$$slots:{default:!0}}),a(c),l(y,x)},J=y=>{var x=Sr(),$=t(x);De($,{level:3,$$events:{click:()=>v(h,!0)},children:(c,D)=>{se();var n=re();w(()=>d(n,b.mfa.registerNew)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};q(R,y=>{e(h)?y(Y):y(J,!1)})}var Z=o(R,2);{var ee=y=>{var x=Or(),$=t(x,!0);a(x),w(()=>d($,b.mfa.registerdKeys)),l(y,x)};q(Z,y=>{e(j).length>0&&y(ee)})}var ae=o(Z,2);Ba(ae,21,()=>e(j),y=>y.name,(y,x)=>{var $=Hr(),c=t($),D=t(c),n=o(D),_=t(n),f=t(_,!0);a(_);var E=o(_,2);{var te=ve=>{er(ve,{get text(){return b.account.userVerifiedTooltip},children:(ye,de)=>{var B=Br();Be(B,"margin-bottom","-.25rem");var fe=t(B);Vr(fe,{width:18,color:"var(--col-acnt)"}),a(B),l(ye,B)},$$slots:{default:!0}})};q(E,ve=>{e(x).user_verified&&ve(te)})}a(n),a(c);var oe=o(c,2),he=t(oe),pe=o(he),be=t(pe,!0);w(()=>d(be,Ge(e(x).registered))),a(pe),a(oe);var ge=o(oe,2),ke=t(ge),je=o(ke),$e=t(je,!0);w(()=>d($e,Ge(e(x).last_used))),a(je),a(ge);var L=o(ge,2);{var ce=ve=>{var ye=Gr(),de=o(t(ye),2),B=t(de);De(B,{level:4,$$events:{click:()=>A(e(x).name)},children:(fe,Re)=>{se();var Le=re();w(()=>d(Le,b.mfa.delete.toUpperCase())),l(fe,Le)},$$slots:{default:!0}}),a(de),a(ye),l(ve,ye)};q(L,ve=>{e(u)&&ve(ce)})}a($),w(()=>{d(D,`${`${b.mfa.passkeyName}: `??""} `),d(f,e(x).name),d(he,`${`${b.mfa.registerd}: `??""} `),d(ke,`${`${b.mfa.lastUsed}: `??""} `)}),l(y,$)}),a(ae);var ue=o(ae,2);{var O=y=>{var x=Fr(),$=t(x);De($,{level:1,$$events:{click:I},children:(c,D)=>{se();var n=re();w(()=>d(n,b.mfa.test)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};q(ue,y=>{e(j).length>0&&y(O)})}var U=o(ue,2),T=t(U,!0);a(U),a(F),w(()=>{d(H,`${b.mfa.p1??""} `),d(C,` ${b.mfa.p2??""}`),Oe(U,"msg",!e(s)),Oe(U,"err",e(s)),d(T,e(p))}),l(S,F),ze()}var Zr=W('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Qr(S,i){We(i,!0);let r=V(i,"formValues",31,()=>m({})),b=V(i,"btnWidth",3,"4rem"),s=V(i,"hideCurrentPassword",3,!1),p=V(i,"isValid",15),h=Te();p(P);let u=K(!1),j=K(""),g=K(void 0),k=K(m({})),M=Ie(()=>{var z;return((z=r().new)==null?void 0:z.length)>6&&r().new===r().verify});const N=Ze().shape({current:Pe().required(h.account.passwordCurrReq),new:Pe().required(h.account.passwordNewReq),verify:Pe().required(h.account.passwordNoMatch)}),G=Ze().shape({new:Pe().required(h.account.passwordNewReq),verify:Pe().required(h.account.passwordNoMatch)});He(async()=>{let z=await Rt(),H=await z.json();z.ok?v(g,m(H)):v(j,m(H.message))});async function P(){if(v(j,""),s())try{await G.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(z){return v(k,m(Fe(z))),!1}else try{await N.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(z){return v(k,m(Fe(z))),!1}return e(u)?r().new.length>256?(v(j,"max 256"),!1):r().new!==r().verify?(v(j,m(h.account.passwordNoMatch)),!1):!0:(v(j,m(h.account.passwordPolicyFollow)),!1)}function I(){const z=e(g).length_min>20?e(g).length_min:20;let H=Vt(z,e(g).include_lower_case,e(g).include_upper_case,e(g).include_digits,e(g).include_special);r(r().new=H,!0),r(r().verify=H,!0)}var A=we(),Q=le(A);{var F=z=>{var H=Zr(),C=t(H);cr(C,{t:h,get policy(){return e(g)},get password(){return r().new},get accepted(){return e(u)},set accepted(O){v(u,m(O))}});var R=o(C,2);{var Y=O=>{ga(O,{get error(){return e(k).current},autocomplete:"current-password",get placeholder(){return h.account.passwordCurr},get width(){return i.inputWidth},get value(){return r().current},set value(U){r(r().current=U,!0)},$$events:{input:P},children:(U,T)=>{se();var y=re();w(()=>d(y,h.account.passwordCurr.toUpperCase())),l(U,y)},$$slots:{default:!0}})};q(R,O=>{s()||O(Y)})}var J=o(R,2);ga(J,{get error(){return e(k).new},autocomplete:"new-password",get placeholder(){return h.account.passwordNew},get showCopy(){return e(M)},get width(){return i.inputWidth},get value(){return r().new},set value(O){r(r().new=O,!0)},$$events:{input:P},children:(O,U)=>{se();var T=re();w(()=>d(T,h.account.passwordNew.toUpperCase())),l(O,T)},$$slots:{default:!0}});var Z=o(J,2);ga(Z,{get error(){return e(k).verify},autocomplete:"new-password",get placeholder(){return h.account.passwordConfirm},get showCopy(){return e(M)},get width(){return i.inputWidth},get value(){return r().verify},set value(O){r(r().verify=O,!0)},$$events:{input:P},children:(O,U)=>{se();var T=re();w(()=>d(T,h.account.passwordConfirm.toUpperCase())),l(O,T)},$$slots:{default:!0}});var ee=o(Z,2);De(ee,{level:2,get width(){return b()},$$events:{click:I},children:(O,U)=>{se();var T=re();w(()=>d(T,h.account.generateRandom)),l(O,T)},$$slots:{default:!0}});var ae=o(ee,2),ue=t(ae,!0);a(ae),a(H),w(()=>d(ue,e(j))),l(z,H)};q(Q,z=>{e(g)&&z(F)})}return l(S,A),ze({isPwdValid:P})}var Xr=W('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Yr=W('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),es=W("<div><!></div>"),as=W('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),ts=W('<div class="success svelte-od1aaa">Update successful</div>'),rs=W('<div class="err svelte-od1aaa"> </div>'),ss=W('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),ns=W('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function et(S,i){We(i,!0);let r=V(i,"user",19,()=>({})),b=V(i,"viewModePhone",3,!1),s=Te(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="13rem";let u=r().account_type,j=K(m([])),g=K(void 0),k=K(!1),M=K(!1),N=K(""),G=K(!1),P=K(void 0),I=K(m({current:"",new:"",verify:""})),A=Ie(()=>e(j).filter(c=>c.user_verified).length>0);He(()=>{Q()});async function Q(){let c=await Ra(r().id),D=await c.json();c.ok?v(j,m(D)):console.error("error fetching passkeys: "+D.message)}async function F(){let c=await Kt(r().id);if(c.ok)window.location.reload();else{let D=await c.json();console.error("error fetching passkeys: "+D.message)}}async function z(){e(j).length>0?await H():await C()}async function H(){if(!await e(g)()){v(N,m(s.common.invalidInput));return}const c=await Va(r().id,{purpose:"PasswordNew"});v(P,m(await c.json()))}async function C(c){if(!await e(g)()){v(N,m(s.common.invalidInput));return}v(M,!0);let D={password_new:e(I).new};c?D.mfa_code=c:D.password_current=e(I).current;let n=await Ea(r().id,D);if(n.ok)v(G,!0),v(I,m({})),window.location.reload();else{let _=await n.json();v(N,m(_.message))}v(M,!1)}function R(){v(P,void 0),v(N,m(s.mfa.errorReg))}function Y(c){c&&(v(P,void 0),C(c.code))}async function J(){let c=await St({email:r().email});if(c.ok)v(G,!0);else{let D=await c.json();v(N,m(D.message))}}var Z=ns(),ee=t(Z),ae=t(ee);{var ue=c=>{vr(c,{purpose:"PasswordNew",onSuccess:Y,onError:R,get data(){return e(P)},set data(D){v(P,m(D))}})};q(ae,c=>{e(P)&&c(ue)})}var O=o(ae,2);{var U=c=>{var D=Xr(),n=t(D),_=t(n,!0);a(n);var f=o(n,2),E=t(f),te=t(E,!0);a(E),a(f);var oe=o(f,2),he=t(oe,!0);a(oe);var pe=o(oe,2);{var be=ke=>{oa(ke,{check:!0})},ge=ke=>{De(ke,{width:h,level:3,$$events:{click:J},children:(je,$e)=>{se();var L=re();w(()=>d(L,s.account.passwordReset)),l(je,L)},$$slots:{default:!0}})};q(pe,ke=>{e(G)?ke(be):ke(ge,!1)})}a(D),w(()=>{d(_,s.account.federatedConvertPassword1),d(te,i.authProvider.name||"UNKNOWN"),d(he,s.account.federatedConvertPassword2)}),l(c,D)};q(O,c=>{u==="federated"&&c(U)})}var T=o(O,2);{var y=c=>{var D=Yr(),n=le(D),_=t(n,!0);a(n);var f=o(n,2),E=t(f,!0);a(f);var te=o(f,2),oe=t(te,!0);a(te);var he=o(te,2);De(he,{width:h,level:3,$$events:{click:()=>v(k,!0)},children:(pe,be)=>{se();var ge=re();w(()=>d(ge,s.account.convertAccount)),l(pe,ge)},$$slots:{default:!0}}),w(()=>{d(_,s.account.accTypePasskeyText1),d(E,s.account.accTypePasskeyText2),d(oe,s.account.accTypePasskeyText3)}),l(c,D)};q(T,c=>{(u==="passkey"||u==="federated_passkey")&&!e(k)&&c(y)})}var x=o(T,2);{var $=c=>{var D=ss(),n=le(D),_=t(n),f=Ie(()=>!(u==="password"&&e(j).length<1));Qr(_,{btnWidth:h,get inputWidth(){return e(p)},get hideCurrentPassword(){return e(f)},get formValues(){return e(I)},set formValues(L){v(I,m(L))},get isValid(){return e(g)},set isValid(L){v(g,m(L))}});var E=o(_,2),te=t(E);De(te,{width:h,level:1,get isLoading(){return e(M)},set isLoading(L){v(M,m(L))},$$events:{click:z},children:(L,ce)=>{se();var ve=re();w(()=>d(ve,s.common.save)),l(L,ve)},$$slots:{default:!0}}),a(E);var oe=o(E,2);{var he=L=>{var ce=es(),ve=t(ce);De(ve,{width:h,level:4,$$events:{click:()=>v(k,!1)},children:(ye,de)=>{se();var B=re();w(()=>d(B,s.common.cancel)),l(ye,B)},$$slots:{default:!0}}),a(ce),l(L,ce)};q(oe,L=>{e(k)&&!e(M)&&L(he)})}a(n);var pe=o(n,2);{var be=L=>{var ce=as(),ve=t(ce),ye=t(ve,!0);a(ve);var de=o(ve,2),B=t(de,!0);a(de);var fe=o(de,2);De(fe,{width:h,level:3,$$events:{click:F},children:(Re,Le)=>{se();var Me=re();w(()=>d(Me,s.account.convertAccount)),l(Re,Me)},$$slots:{default:!0}}),a(ce),w(()=>{d(ye,s.account.convertAccount),d(B,s.account.convertAccountP1)}),l(L,ce)};q(pe,L=>{!e(k)&&e(A)&&L(be)})}var ge=o(pe,2),ke=t(ge);{var je=L=>{var ce=ts();Ae(3,ce,()=>Ve),l(L,ce)},$e=L=>{var ce=we(),ve=le(ce);{var ye=de=>{var B=rs(),fe=t(B,!0);a(B),w(()=>d(fe,e(N))),Ae(3,B,()=>Ve),l(de,B)};q(ve,de=>{e(N)&&de(ye)},!0)}l(L,ce)};q(ke,L=>{e(G)?L(je):L($e,!1)})}a(ge),Ae(1,n,()=>Qt,()=>({duration:350})),l(c,D)};q(x,c=>{(u==="password"||u==="federated_password"||e(k))&&c($)})}a(ee),a(Z),l(S,Z),ze()}var is=W('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),os=W('<div class="success svelte-naxx27">Update successful</div>'),ls=W('<div class="err svelte-naxx27"> </div>'),cs=W('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function at(S,i){We(i,!0);let r=V(i,"webIdData",15),b=Te();const s="12rem";let p=K(""),h=K(!1),u=K(!!r().custom_triples),j=wa(r().user_id);ba(()=>{e(h)&&setTimeout(()=>{v(h,!1)},3e3)});async function g(){v(p,"");let U=await Ot(r().user_id,r());if(U.ok)v(h,!0);else{let T=await U.json();v(p,m(T.message))}}var k=cs(),M=t(k),N=t(M),G=t(N,!0);a(N);var P=o(N,2),I=t(P);_e(I,"href",j);var A=t(I);Sa(A,()=>j.replace("/auth/","/auth/<wbr/>")),a(I),a(P);var Q=o(P,2),F=o(t(Q),2);Oa(F,{get selected(){return r().expose_email},set selected(U){r(r().expose_email=U,!0)}}),a(Q);var z=o(Q,2),H=t(z),C=t(H,!0);a(H);var R=o(H,2);Oa(R,{get selected(){return e(u)},set selected(U){v(u,m(U))}}),a(z);var Y=o(z,2);{var J=U=>{var T=is(),y=t(T),x=t(y,!0);a(y);var $=o(y,2);xt($),_e($,"rows",15),_e($,"cols",40),a(T),w(()=>d(x,b.account.webIdDescData)),ar($,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),Ae(3,T,()=>Xt),l(U,T)};q(Y,U=>{e(u)&&U(J)})}var Z=o(Y,2);De(Z,{width:s,level:1,$$events:{click:g},children:(U,T)=>{se();var y=re();w(()=>d(y,b.common.save)),l(U,y)},$$slots:{default:!0}});var ee=o(Z,2),ae=t(ee);{var ue=U=>{var T=os();Ae(3,T,()=>Ve),l(U,T)},O=U=>{var T=we(),y=le(T);{var x=$=>{var c=ls(),D=t(c,!0);a(c),w(()=>d(D,e(p))),Ae(3,c,()=>Ve),l($,c)};q(y,$=>{e(p)&&$(x)},!0)}l(U,T)};q(ae,U=>{e(h)?U(ue):U(O,!1)})}a(ee),a(M),a(k),w(()=>{d(G,b.account.webIdDesc),d(C,b.account.webIdExpertMode)}),l(S,k),ze()}var vs=W('<div class="container svelte-1nrg3bb"><!></div>');function tt(S,i){We(i,!0);var r=vs(),b=t(r);tr(b,{get userId(){return i.session.user_id}}),a(r),l(S,r),ze()}var ds=W('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),us=W('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>'),ps=W("<!> <!>",1);function ms(S,i){We(i,!0);const r=nr(),b=()=>ir(M,"$op",r);let s=V(i,"session",7),p=V(i,"user",15),h=V(i,"webIdData",15),u=Te(),j=K(void 0),g=K(m([])),k=Ie(()=>{var C;if((C=p().account_type)!=null&&C.startsWith("federated"))return e(g).filter(R=>R.id===p().auth_provider_id)[0]}),M=lr(1,{duration:100}),N=K(m(u.account.navInfo)),G=K(m(u.account.navInfo));function P(){M.set(0).then(()=>v(N,m(e(G)))).then(()=>M.set(1))}let I=Ie(()=>e(j)&&e(j)<500);ba(()=>{e(G)&&P()}),ia(()=>{e(G)===u.account.navLogout&&Bt()});var A=ps(),Q=le(A);dr(Q,{id:Gt,get value(){return e(g)},set value(C){v(g,m(C))}});var F=o(Q,2);{var z=C=>{var R=ds(),Y=t(R);Fa(Y,{absolute:!0,absoluteRight:!0,updateBackend:!0});var J=o(Y,2),Z=t(J),ee=t(Z,!0);a(Z),a(J);var ae=o(J,2),ue=t(ae);Qa(ue,{get selected(){return e(G)},set selected($){v(G,m($))}});var O=o(ue,2),U=t(O),T=t(U);{var y=$=>{Za($,{get webIdData(){return h()},viewModePhone:!0,get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(c){p(c)}})},x=$=>{var c=we(),D=le(c);{var n=f=>{Xa(f,{viewModePhone:!0,get user(){return p()},set user(E){p(E)}})},_=f=>{var E=we(),te=le(E);{var oe=pe=>{et(pe,{get user(){return p()},get authProvider(){return e(k)},viewModePhone:!0})},he=pe=>{var be=we(),ge=le(be);{var ke=$e=>{Ya($e,{get session(){return s()},get user(){return p()}})},je=$e=>{var L=we(),ce=le(L);{var ve=de=>{at(de,{get webIdData(){return h()},set webIdData(B){h(B)}})},ye=de=>{var B=we(),fe=le(B);{var Re=Le=>{tt(Le,{get session(){return s()},set session(Me){s(Me)}})};q(fe,Le=>{e(N)===u.account.devices&&Le(Re)},!0)}l(de,B)};q(ce,de=>{e(N)==="WebID"?de(ve):de(ye,!1)},!0)}l($e,L)};q(ge,$e=>{e(N)===u.account.navMfa?$e(ke):$e(je,!1)},!0)}l(pe,be)};q(te,pe=>{e(N)===u.common.password?pe(oe):pe(he,!1)},!0)}l(f,E)};q(D,f=>{e(N)===u.account.navEdit?f(n):f(_,!1)},!0)}l($,c)};q(T,$=>{e(N)===u.account.navInfo?$(y):$(x,!1)})}a(U),a(O),a(ae),a(R),w(()=>{d(ee,u.account.account),_e(U,"style",`opacity: ${b()??""}`)}),l(C,R)},H=C=>{var R=us(),Y=t(R);Fa(Y,{absolute:!0,updateBackend:!0});var J=o(Y,2),Z=t(J),ee=t(Z,!0);a(Z),a(J);var ae=o(J,2),ue=t(ae),O=Ie(()=>!!h());Qa(ue,{get showWebId(){return e(O)},get selected(){return e(G)},set selected(c){v(G,m(c))}});var U=o(ue,2),T=t(U),y=t(T);{var x=c=>{Za(c,{get webIdData(){return h()},get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(D){p(D)}})},$=c=>{var D=we(),n=le(D);{var _=E=>{Xa(E,{get user(){return p()},set user(te){p(te)}})},f=E=>{var te=we(),oe=le(te);{var he=be=>{et(be,{get user(){return p()},get authProvider(){return e(k)}})},pe=be=>{var ge=we(),ke=le(ge);{var je=L=>{Ya(L,{get session(){return s()},get user(){return p()}})},$e=L=>{var ce=we(),ve=le(ce);{var ye=B=>{at(B,{get webIdData(){return h()},set webIdData(fe){h(fe)}})},de=B=>{var fe=we(),Re=le(fe);{var Le=Me=>{tt(Me,{get session(){return s()},set session(la){s(la)}})};q(Re,Me=>{e(N)===u.account.devices&&Me(Le)},!0)}l(B,fe)};q(ve,B=>{e(N)==="WebID"?B(ye):B(de,!1)},!0)}l(L,ce)};q(ke,L=>{e(N)===u.account.navMfa?L(je):L($e,!1)},!0)}l(be,ge)};q(oe,be=>{e(N)===u.common.password?be(he):be(pe,!1)},!0)}l(E,te)};q(n,E=>{e(N)===u.account.navEdit?E(_):E(f,!1)},!0)}l(c,D)};q(y,c=>{e(N)===u.account.navInfo?c(x):c($,!1)})}a(T),a(U),a(ae),a(R),w(()=>{d(ee,u.account.account),_e(T,"style",`opacity: ${b()??""}`)}),l(C,R)};q(F,C=>{e(I)?C(z):C(H,!1)})}rr("innerWidth",C=>v(j,m(C))),l(S,A),ze()}function hs(S,i){We(i,!0);let r=Te(),b=K(void 0),s=K(void 0),p=K(void 0),h=K(!1);He(async()=>{let u=await Ht();if(u.ok){if(v(b,m(await u.json())),!e(b)){console.error("did not receive valid session response");return}u=await Ft(e(b).user_id),u.ok?v(s,m(await u.json())):Ka("account"),u=await Jt(e(b).user_id),u.ok?v(p,m(await u.json())):u.status===404&&v(p,m({user_id:e(b).user_id,is_open:!1})),v(h,!0)}else Ka("account")}),Nt(u=>{w(()=>{var j;return _t.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((j=e(s))==null?void 0:j.email)??""}`})}),ur(S,{children:(u,j)=>{pr(u,{children:(g,k)=>{var M=we(),N=le(M);{var G=I=>{Ja(I,{})},P=I=>{var A=we(),Q=le(A);{var F=z=>{ms(z,{get session(){return e(b)},get user(){return e(s)},set user(H){v(s,m(H))},get webIdData(){return e(p)},set webIdData(H){v(p,m(H))}})};q(Q,z=>{e(b)&&e(s)&&z(F)},!0)}l(I,A)};q(N,I=>{e(h)?I(P,!1):I(G)})}l(g,M)},$$slots:{default:!0}})},$$slots:{default:!0}}),ze()}export{hs as component};
