import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DUFkTaXF.js";import{p as W,i as n,a4 as j,a as Y,g as e,h as l,f as k,s as u,c as w,r as L}from"../chunks/index-client.CzvcfCLI.js";import{a as $,t as z,e as ee}from"../chunks/template.CQASMEo4.js";import{i as te}from"../chunks/if.Dlf0zx3_.js";import{e as re}from"../chunks/each.BtetwUOf.js";import{p as a}from"../chunks/proxy.CHyqegA9.js";import{E as N,D as ae}from"../chunks/helpers.DC_VHWHA.js";import{E as oe}from"../chunks/Event.DAbPTaZy.js";import{b as se}from"../chunks/fetch.jldij1e_.js";import{O as A}from"../chunks/Options.H0oeJWel.js";import{u as ie}from"../chunks/i18n_admin.svelte.BIwIWUz9.js";import{I as B}from"../chunks/InputDateTimeCombo.C63yl3I1.js";import{f as le,a as me,b as F}from"../chunks/form.DekAF1-C.js";import{O as ne}from"../chunks/OrderSearchBar.CdfasuLu.js";import{C as ve}from"../chunks/ContentAdmin.CEcZ6LAl.js";var pe=z('<div class="row svelte-itq81i">No events found</div>'),ue=z('<!> <div class="row svelte-itq81i"><!> <!></div> <div class="filters svelte-itq81i"><div class="level svelte-itq81i"><!></div> <div class="typ svelte-itq81i"><!></div></div> <!>',1);function fe(O,G){W(G,!0);let f=ie(),v=n(a([])),p=n(a([])),T=n(a(le())),q=n(a(me())),c=n(""),d=n("--:--"),V=n("info"),g=n(a(N[0])),y=["IP","Content"],h=n(a(y[0])),D=n(""),C=["Timestamp","Level","Type"];j(()=>{H()}),j(()=>{let o=e(D).toLowerCase();o?e(h)===y[0]?l(p,a(e(v).filter(m=>{var s;return(s=m.ip)==null?void 0:s.includes(o)}))):e(h)===y[1]&&l(p,a(e(v).filter(m=>{var s,r;return((s=m.typ)==null?void 0:s.toLowerCase().includes(o))||((r=m.text)==null?void 0:r.toLowerCase().includes(o))}))):l(p,a(e(v)))});async function H(){let o=F(e(T),e(q));if(!o){console.error("from ts invalid",o);return}let m;e(c)&&e(d)&&(m=F(e(c),e(d)));let s={from:o,until:m,level:e(V),typ:e(g)!==N[0]?e(g):void 0},r=await se("/auth/v1/events",s);r.body?l(v,a(r.body)):console.error(r.error)}function J(o,m){let s=m==="up";o===C[0]?e(v).sort((r,i)=>s?r.timestamp-i.timestamp:i.timestamp-r.timestamp):o===C[1]?e(v).sort((r,i)=>s?r.level.localeCompare(i.level):i.level.localeCompare(r.level)):o===C[2]&&e(v).sort((r,i)=>s?r.typ.localeCompare(i.typ):i.typ.localeCompare(r.typ))}ve(O,{children:(o,m)=>{var s=ue(),r=k(s);ne(r,{searchOptions:y,orderOptions:C,onChangeOrder:J,firstDirReverse:!0,get searchOption(){return e(h)},set searchOption(t){l(h,a(t))},get value(){return e(D)},set value(t){l(D,a(t))}});var i=u(r,2),P=w(i);B(P,{get label(){return f.common.from},withTime:!0,get value(){return e(T)},set value(t){l(T,a(t))},get timeValue(){return e(q)},set timeValue(t){l(q,a(t))}});var K=u(P,2);B(K,{get label(){return f.common.until},withTime:!0,withDelete:!0,get value(){return e(c)},set value(t){l(c,a(t))},get timeValue(){return e(d)},set timeValue(t){l(d,a(t))}}),L(i);var x=u(i,2),E=w(x),S=w(E);A(S,{get ariaLabel(){return f.events.eventLevel},options:ae,borderless:!0,get value(){return e(V)},set value(t){l(V,a(t))}}),L(E);var R=u(E,2),U=w(R);A(U,{get ariaLabel(){return f.events.eventType},options:N,borderless:!0,get value(){return e(g)},set value(t){l(g,a(t))}}),L(R),L(x);var X=u(x,2);{var Z=t=>{var b=pe();$(t,b)},_=t=>{var b=ee(),M=k(b);re(M,17,()=>e(p),I=>I.id,(I,Q)=>{oe(I,{get event(){return e(Q)},inline:!0})}),$(t,b)};te(X,t=>{e(p).length===0?t(Z):t(_,!1)})}$(o,s)},$$slots:{default:!0}}),Y()}function ce(O){fe(O,{})}export{ce as component};
