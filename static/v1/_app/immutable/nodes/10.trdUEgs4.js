import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DvmPJwhI.js";import{p as se,s as a,t as T,a as ne,l as r,o as C,m as n,c as d,r as c,f as oe,ab as re,a6 as ge,ar as W,ap as Yt}from"../chunks/index-client.Ds4XgiuL.js";import{d as Ue,e as xt,s as E}from"../chunks/render.Bq2-eTRf.js";import{i as Y}from"../chunks/if.Du7BDhAX.js";import{e as Me,i as Ct}from"../chunks/each.MnMr4iw5.js";import{a as u,t as P,e as ye,d as G}from"../chunks/template.DXIK6jcH.js";import{a as z,t as er,s as tr}from"../chunks/index.L0FyJ7Re.js";import{p as i}from"../chunks/proxy.Bsf9UJbk.js";import{B as rr}from"../chunks/ButtonAddModal.brPC44dh.js";import{C as ar}from"../chunks/ContentAdmin.COLOikfe.js";import{N as lr}from"../chunks/NavButtonTile.Dssmovmu.js";import{N as ir}from"../chunks/NavSub.Bt5KOzAQ.js";import{O as sr}from"../chunks/OrderSearchBar.B8p4xeqT.js";import{b as je,d as Be,c as Lt,f as St}from"../chunks/fetch.DFmyLr06.js";import{u as nr}from"../chunks/param.svelte.CIQUM_7v.js";import{h as $e}from"../chunks/html.CbFxqVHf.js";import{B as ce}from"../chunks/Button.C_IpvWJY.js";import{I as he}from"../chunks/pow.CCs-o8yN.js";import{n as or,f as At,g as Ne,o as cr,p as dr,q as It}from"../chunks/patterns.D9HtGhEC.js";import{F as Qe}from"../chunks/Form.t2_rDZ40.js";import{u as be}from"../chunks/i18n.svelte.CB3BpIrt.js";import{u as pe}from"../chunks/i18n_admin.svelte.B_OuiPaR.js";import{I as ve}from"../chunks/InputCheckbox.CCJJoAul.js";import{r as Pe,s as F}from"../chunks/class.Ik0ma2JO.js";import{b as De}from"../chunks/input.CyORuAkT.js";import{b as qt}from"../chunks/this.B0BrlS58.js";import{p as V}from"../chunks/props.CpDInb2-.js";import{g as _e}from"../chunks/helpers.BTvs6bnN.js";import{I as vr}from"../chunks/IconStop.BmVwxLbP.js";import{T as Et}from"../chunks/Tabs.D_E9skdl.js";import{I as Rt}from"../chunks/IconCheck.BTwS8Q2u.js";import{L as Fe}from"../chunks/LabeledValue.CfdJ335t.js";import{S as Tt}from"../chunks/SelectList.B4ro9Cwc.js";import{O as Ut}from"../chunks/Options.DccTdWl1.js";import{I as ur}from"../chunks/InputPassword.DAD-j3Oi.js";import{k as hr}from"../chunks/key.Aw0aEB78.js";import{T as mr}from"../chunks/ThemeSwitch.DayTFcBZ.js";import{I as gr}from"../chunks/InputFile.CrNMC6Ur.js";function pr(j,e,t,l){var v;e(),(v=t.onInput)==null||v.call(t,r(l))}function fr(j,e,t){var l;switch(j.code){case"Enter":e(),(l=t.onEnter)==null||l.call(t);break}}function br(j,e){var t,l;(t=e())==null||t.focus(),(l=e())==null||l.scrollIntoView({behavior:"smooth",block:"center"})}var _r=P('<li class="value svelte-r5y8pk"><div class="label"> </div> <div class="btnClose svelte-r5y8pk"><!></div></li>'),kr=P("<option></option>"),$r=P('<datalist class="absolute svelte-r5y8pk"></datalist>'),wr=P('<span class="err"> </span>'),yr=P('<div role="none" class="container svelte-r5y8pk"><ul class="svelte-r5y8pk"><!> <li class="svelte-r5y8pk"><input autocomplete="off" class="svelte-r5y8pk"> <!></li></ul> <label class="font-label noselect svelte-r5y8pk"> <!></label></div>');function ke(j,e){se(e,!0);let t=V(e,"ref",15),l=V(e,"typ",3,"text"),v=V(e,"id",19,_e),h=V(e,"values",31,()=>i([])),$=V(e,"label",3,""),m=V(e,"placeholder",3,""),w=V(e,"disabled",3,!1),y=V(e,"required",3,!1),g=V(e,"isError",15,!1),k=V(e,"width",3,"inherit"),R=V(e,"maxHeightList",3,"inherit"),_=be();const p=_e();let x=C(""),b=re(()=>e.datalist&&e.datalist.length>0?p:void 0);function N(D){h(h().filter(I=>I!==D))}function B(D){var I;L(),(I=e.onBlur)==null||I.call(e),J()}function Q(D){D.preventDefault(),g(!0)}function J(){r(x)&&L()&&(h().push(r(x)),n(x,""))}function L(){var I;let D=(I=t())==null?void 0:I.validity;return D?(g(!D.valid),D.valid):(g(!1),!0)}var A=yr();A.__click=[br,t];var o=d(A),U=d(o);Me(U,17,h,Ct,(D,I)=>{var te=_r(),X=d(te),ie=d(X,!0);c(X);var le=a(X,2),K=d(le);ce(K,{invisible:!0,onclick:()=>N(r(I)),children:(ue,de)=>{vr(ue,{width:"1.2rem"})},$$slots:{default:!0}}),c(le),c(te),T(()=>E(ie,r(I))),u(D,te)});var O=a(U,2),S=d(O);Pe(S),S.__keydown=[fr,J,e],S.__input=[pr,L,e,x],qt(S,D=>t(D),()=>t());var f=a(S,2);{var Z=D=>{var I=$r();F(I,"id",p),Me(I,21,()=>e.datalist,Ct,(te,X)=>{var ie=kr(),le={};T(()=>{le!==(le=r(X))&&(ie.value=(ie.__value=r(X))==null?"":r(X))}),u(te,ie)}),c(I),u(D,I)};Y(f,D=>{e.datalist&&e.datalist.length>1&&D(Z)})}c(O),c(o);var M=a(o,2),ae=d(M),me=a(ae);{var ee=D=>{var I=ye(),te=oe(I);{var X=ie=>{var le=wr(),K=d(le,!0);c(le),T(()=>E(K,e.errMsg||_.common.invalidInput)),u(ie,le)};Y(te,ie=>{g()&&ie(X)})}u(D,I)};Y(me,D=>{g()&&D(ee)})}c(M),c(A),T(()=>{z(A,"width",k()),z(o,"max-height",R()),F(S,"type",l()),F(S,"id",v()),F(S,"name",e.name),F(S,"list",r(b)),F(S,"title",e.errMsg),F(S,"aria-label",$()||m()),F(S,"placeholder",m()),F(S,"aria-placeholder",m()),S.disabled=w(),F(S,"aria-disabled",w()),S.required=y()&&h().length<1,F(S,"aria-required",y()&&h().length<1),F(S,"maxlength",e.maxLength||void 0),F(S,"min",e.min||void 0),F(S,"max",e.max||void 0),F(S,"pattern",e.pattern),F(M,"for",v()),F(M,"data-required",y()),E(ae,`${$()??""} `)}),xt("invalid",S,Q),xt("blur",S,B),De(S,()=>r(x),D=>n(x,D)),u(j,A),ne()}Ue(["click","keydown","input"]);var xr=P('<div class="err"> </div>'),Cr=P('<!> <!> <!> <p class="svelte-15tp6i6"><!></p> <!> <!> <!> <!>',1),Lr=P('<div class="container svelte-15tp6i6"><!></div>');function Sr(j,e){se(e,!0);let t=be(),l=pe(),v=C(void 0),h=C(""),$=C(""),m=C(""),w=C(!0),y=C(i([])),g=C(i([]));ge(()=>{requestAnimationFrame(()=>{var p;(p=r(v))==null||p.focus()})});async function k(p,x){var B;if(e.clients.find(Q=>Q.id===r($))){n(h,i(l.common.nameExistsAlready));return}n(h,"");let b={id:r($),name:r(m)||void 0,confidential:r(w),redirect_uris:r(y),post_logout_redirect_uris:r(g).length>0?r(g):void 0},N=await je(p.action,b);N.body?e.onSave(N.body.id):n(h,i(((B=N.error)==null?void 0:B.message)||"Error"))}var R=Lr(),_=d(R);Qe(_,{action:"/auth/v1/clients",onSubmit:k,children:(p,x)=>{var b=Cr(),N=oe(b);he(N,{autocomplete:"off",label:"Client ID",placeholder:"Client ID",required:!0,pattern:or,get ref(){return r(v)},set ref(f){n(v,i(f))},get value(){return r($)},set value(f){n($,i(f))}});var B=a(N,2);he(B,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},pattern:At,get value(){return r(m)},set value(f){n(m,i(f))}});var Q=a(B,2);ve(Q,{get ariaLabel(){return l.clients.confidential},get checked(){return r(w)},set checked(f){n(w,i(f))},children:(f,Z)=>{W();var M=G();T(()=>E(M,l.clients.confidential)),u(f,M)},$$slots:{default:!0}});var J=a(Q,2),L=d(J);$e(L,()=>l.clients.descUri),c(J);var A=a(J,2);ke(A,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(y)},set values(f){n(y,i(f))}});var o=a(A,2);ke(o,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(g)},set values(f){n(g,i(f))}});var U=a(o,2);ce(U,{type:"submit",children:(f,Z)=>{W();var M=G();T(()=>E(M,t.common.save)),u(f,M)},$$slots:{default:!0}});var O=a(U,2);{var S=f=>{var Z=xr(),M=d(Z,!0);c(Z),T(()=>E(M,r(h))),u(f,Z)};Y(O,f=>{r(h)&&f(S)})}u(p,b)},$$slots:{default:!0}}),c(R),u(j,R),ne()}const Oe="urn:ietf:params:oauth:grant-type:device_code";var Ar=P('<div class="err"> </div>'),Ir=P('<div class="err"> </div>'),qr=P('<h5> </h5> <!> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"> </p> <!> <!> <div></div> <h5> </h5> <!> <!> <!> <p class="mb-0 svelte-5tvvvt">Authentication Flows</p> <!> <!> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <p class="desc svelte-5tvvvt"><strong> </strong></p> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p> </p> <!> <div></div> <p> </p> <p> </p> <!> <!> <div></div> <p> </p> <!> <div class="flex gap-05"><!> <!></div> <!> <div></div>',1),Er=P('<div class="container svelte-5tvvvt"><!></div>');function Rr(j,e){var ae,me;se(e,!0);let t=be(),l=pe();const v="min(20rem, calc(100dvw - .5rem))";let h=C(""),$=C(!1),m=C(i(e.client.id)),w=C(i(e.client.name||"")),y=C(i(e.client.enabled)),g=C(i(e.client.confidential)),k=C(i(e.client.client_uri||"")),R=C(i(e.client.contacts?Array.from(e.client.contacts):[])),_=C(i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),p=C(i(Array.from(e.client.redirect_uris))),x=C(i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),b=i({authorizationCode:e.client.flows_enabled.includes("authorization_code"),clientCredentials:e.client.flows_enabled.includes("client_credentials"),password:e.client.flows_enabled.includes("password"),refreshToken:e.client.flows_enabled.includes("refresh_token"),deviceCode:e.client.flows_enabled.includes(Oe)});const N=["RS256","RS384","RS512","EdDSA"];let B=C(i(e.client.access_token_alg)),Q=C(i(e.client.id_token_alg)),J=C(i(e.client.access_token_lifetime.toString())),L=C(i(e.client.auth_code_lifetime.toString())),A=C(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.scopes.includes(ee)||!1})))),o=C(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.default_scopes.includes(ee)||!1})))),U=i({plain:((ae=e.client.challenges)==null?void 0:ae.includes("plain"))||!1,s256:((me=e.client.challenges)==null?void 0:me.includes("S256"))||!1}),O=C(i(e.client.force_mfa));ge(()=>{var ee,D;e.client.id&&(n(m,i(e.client.id)),n(w,i(e.client.name||"")),n(y,i(e.client.enabled)),n(g,i(e.client.confidential)),n(k,i(e.client.client_uri||"")),n(R,i(e.client.contacts?Array.from(e.client.contacts):[])),n(_,i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),n(p,i(Array.from(e.client.redirect_uris))),n(x,i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),b.authorizationCode=e.client.flows_enabled.includes("authorization_code"),b.clientCredentials=e.client.flows_enabled.includes("client_credentials"),b.password=e.client.flows_enabled.includes("password"),b.refreshToken=e.client.flows_enabled.includes("refresh_token"),b.deviceCode=e.client.flows_enabled.includes(Oe),n(B,i(e.client.access_token_alg)),n(Q,i(e.client.id_token_alg)),n(J,i(e.client.access_token_lifetime.toString())),n(L,i(e.client.auth_code_lifetime.toString())),n(A,i(e.scopesAll.map(I=>({name:I,selected:e.client.scopes.includes(I)||!1})))),n(o,i(e.scopesAll.map(I=>({name:I,selected:e.client.default_scopes.includes(I)||!1})))),U.plain=((ee=e.client.challenges)==null?void 0:ee.includes("plain"))||!1,U.s256=((D=e.client.challenges)==null?void 0:D.includes("S256"))||!1)});async function S(ee,D){n(h,"");let I={id:r(m),name:r(w)||void 0,enabled:r(y),confidential:r(g),allowed_origins:r(_).length>0?r(_):void 0,redirect_uris:r(p),post_logout_redirect_uris:r(x).length>0?r(x):void 0,flows_enabled:[],access_token_alg:r(B),id_token_alg:r(Q),access_token_lifetime:Number.parseInt(r(J)),auth_code_lifetime:Number.parseInt(r(L)),scopes:r(A).filter(X=>X.selected).map(X=>X.name),default_scopes:r(o).filter(X=>X.selected).map(X=>X.name),challenges:void 0,force_mfa:r(O),client_uri:r(k)||void 0,contacts:r(R).length>0?r(R):void 0};b.authorizationCode&&I.flows_enabled.push("authorization_code"),b.clientCredentials&&I.flows_enabled.push("client_credentials"),b.password&&I.flows_enabled.push("password"),b.refreshToken&&I.flows_enabled.push("refresh_token"),b.deviceCode&&I.flows_enabled.push(Oe),U.plain&&(I.challenges=["plain"]),U.s256&&(I.challenges?I.challenges.push("S256"):I.challenges=["S256"]),console.log("payload",I);let te=await Be(ee.action,I);te.error?n(h,i(te.error.message)):(n($,!0),e.onSave(),setTimeout(()=>{n($,!1)},2e3))}var f=Er(),Z=d(f),M=re(()=>`/auth/v1/clients/${e.client.id}`);Qe(Z,{get action(){return r(M)},onSubmit:S,children:(ee,D)=>{var I=qr(),te=oe(I),X=d(te,!0);c(te);var ie=a(te,2);Fe(ie,{label:"ID",mono:!0,children:(s,H)=>{W();var q=G();T(()=>E(q,e.client.id)),u(s,q)},$$slots:{default:!0}});var le=a(ie,2),K=d(le,!0);c(le);var ue=a(le,2);he(ue,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},width:v,pattern:At,get value(){return r(w)},set value(s){n(w,i(s))}});var de=a(ue,2),Bt=d(de,!0);c(de);var Ze=a(de,2);he(Ze,{typ:"url",autocomplete:"off",label:"URI",placeholder:"URI",width:v,pattern:Ne,get value(){return r(k)},set value(s){n(k,i(s))}});var Ge=a(Ze,2);ke(Ge,{get label(){return l.common.contact},pattern:cr,get values(){return r(R)},set values(s){n(R,i(s))}});var Je=a(Ge,2);z(Je,"height",".5rem");var xe=a(Je,2),Nt=d(xe,!0);c(xe);var Ke=a(xe,2);ve(Ke,{get ariaLabel(){return l.common.enabled},get checked(){return r(y)},set checked(s){n(y,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.common.enabled)),u(s,q)},$$slots:{default:!0}});var He=a(Ke,2);ve(He,{get ariaLabel(){return l.clients.confidential},get checked(){return r(g)},set checked(s){n(g,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.confidential)),u(s,q)},$$slots:{default:!0}});var Xe=a(He,2);ve(Xe,{get ariaLabel(){return l.clients.forceMfa},get checked(){return r(O)},set checked(s){n(O,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.forceMfa)),u(s,q)},$$slots:{default:!0}});var Ve=a(Xe,4);ve(Ve,{ariaLabel:"authorization_code",get checked(){return b.authorizationCode},set checked(s){b.authorizationCode=s},children:(s,H)=>{W();var q=G("authorization_code");u(s,q)},$$slots:{default:!0}});var Ye=a(Ve,2);ve(Ye,{ariaLabel:"urn:ietf:params:oauth:grant-type:device_code",get checked(){return b.deviceCode},set checked(s){b.deviceCode=s},children:(s,H)=>{W();var q=G("device_code");u(s,q)},$$slots:{default:!0}});var et=a(Ye,2);ve(et,{ariaLabel:"client_credentials",get checked(){return b.clientCredentials},set checked(s){b.clientCredentials=s},children:(s,H)=>{W();var q=G("client_credentials");u(s,q)},$$slots:{default:!0}});var tt=a(et,2);ve(tt,{ariaLabel:"password",get checked(){return b.password},set checked(s){b.password=s},children:(s,H)=>{W();var q=G("password");u(s,q)},$$slots:{default:!0}});var rt=a(tt,2);ve(rt,{ariaLabel:"refresh_token",get checked(){return b.refreshToken},set checked(s){b.refreshToken=s},children:(s,H)=>{W();var q=G("refresh_token");u(s,q)},$$slots:{default:!0}});var at=a(rt,2);z(at,"height",".5rem");var Ce=a(at,2),Qt=d(Ce,!0);c(Ce);var Le=a(Ce,2),lt=d(Le),Pt=d(lt,!0);c(lt),c(Le);var it=a(Le,2);ve(it,{ariaLabel:"PKCE plain",get checked(){return U.plain},set checked(s){U.plain=s},children:(s,H)=>{W();var q=G("plain");u(s,q)},$$slots:{default:!0}});var st=a(it,2);ve(st,{ariaLabel:"PKCE S256",get checked(){return U.s256},set checked(s){U.s256=s},children:(s,H)=>{W();var q=G("S256");u(s,q)},$$slots:{default:!0}});var nt=a(st,2);{var Dt=s=>{var H=Ar(),q=d(H,!0);c(H),T(()=>E(q,l.clients.errConfidentialPKCE)),er(3,H,()=>tr,()=>({duration:150})),u(s,H)};Y(nt,s=>{!r(g)&&!U.plain&&!U.s256&&s(Dt)})}var ot=a(nt,2);z(ot,"height",".5rem");var Se=a(ot,2),Ft=d(Se,!0);c(Se);var ct=a(Se,2);ke(ct,{typ:"url",label:"Allowed Origins",get errMsg(){return l.validation.origin},pattern:dr,get values(){return r(_)},set values(s){n(_,i(s))}});var Ae=a(ct,2),Ot=d(Ae);$e(Ot,()=>l.clients.descUri),c(Ae);var dt=a(Ae,2);ke(dt,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get required(){return b.authorizationCode},pattern:Ne,get values(){return r(p)},set values(s){n(p,i(s))}});var vt=a(dt,2);ke(vt,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},pattern:Ne,get values(){return r(x)},set values(s){n(x,i(s))}});var ut=a(vt,2);z(ut,"height",".5rem");var Ie=a(ut,2),Wt=d(Ie);$e(Wt,()=>l.clients.scopes.desc),c(Ie);var ht=a(Ie,2);Tt(ht,{get items(){return r(A)},set items(s){n(A,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.scopes.allowed)),u(s,q)},$$slots:{default:!0}});var mt=a(ht,2);Tt(mt,{get items(){return r(o)},set items(s){n(o,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.scopes.default)),u(s,q)},$$slots:{default:!0}});var gt=a(mt,2);z(gt,"height",".75rem");var qe=a(gt,2),zt=d(qe,!0);c(qe);var pt=a(qe,2);he(pt,{typ:"number",autocomplete:"off",label:"Token Lifetime",placeholder:"Token Lifetime",width:v,min:"10",max:"86400",errMsg:"10 <= Token Lifetime <= 86400",get value(){return r(J)},set value(s){n(J,i(s))}});var ft=a(pt,2);z(ft,"height",".5rem");var Ee=a(ft,2),Zt=d(Ee,!0);c(Ee);var Re=a(Ee,2),Gt=d(Re,!0);c(Re);var bt=a(Re,2);Fe(bt,{label:"Access Token Algorithm",children:(s,H)=>{Ut(s,{ariaLabel:"Access Token Algorithm",options:N,borderless:!0,get value(){return r(B)},set value(q){n(B,i(q))}})},$$slots:{default:!0}});var _t=a(bt,2);Fe(_t,{label:"ID Token Algorithm",children:(s,H)=>{Ut(s,{ariaLabel:"ID Token Algorithm",options:N,borderless:!0,get value(){return r(Q)},set value(q){n(Q,i(q))}})},$$slots:{default:!0}});var kt=a(_t,2);z(kt,"height",".5rem");var Te=a(kt,2),Jt=d(Te,!0);c(Te);var $t=a(Te,2);he($t,{typ:"number",autocomplete:"off",label:"Auth Code Lifetime",placeholder:"Auth Code Lifetime",width:v,min:"10",max:"300",errMsg:"10 <= Auth Code Lifetime <= 300",get value(){return r(L)},set value(s){n(L,i(s))}});var we=a($t,2);z(we,"margin-top","1rem");var wt=d(we);ce(wt,{type:"submit",children:(s,H)=>{W();var q=G();T(()=>E(q,t.common.save)),u(s,q)},$$slots:{default:!0}});var Kt=a(wt,2);{var Ht=s=>{Rt(s,{})};Y(Kt,s=>{r($)&&s(Ht)})}c(we);var yt=a(we,2);{var Xt=s=>{var H=Ir(),q=d(H,!0);c(H),T(()=>E(q,r(h))),u(s,H)};Y(yt,s=>{r(h)&&s(Xt)})}var Vt=a(yt,2);z(Vt,"height","1rem"),T(()=>{E(X,l.common.information),E(K,l.clients.descName),E(Bt,l.clients.descClientUri),E(Nt,l.clients.config),E(Qt,l.clients.descPKCE),E(Pt,l.clients.descPKCEEnforce),E(Ft,l.clients.descOrigin),E(zt,l.clients.tokenLifetime.p1),E(Zt,l.clients.tokenLifetime.p2),E(Gt,l.clients.tokenLifetime.p3),E(Jt,l.clients.descAuthCode)}),u(ee,I)},$$slots:{default:!0}}),c(f),u(j,f),ne()}var Tr=P("<!> <!>",1),Ur=P('<div class="container svelte-19xcrje"><div class="err"> </div> <!></div>');function Mr(j,e){se(e,!0);let t=pe(),l=C(""),v=C(void 0);ge(()=>{n(l,""),n(v,""),e.client.confidential?h():n(l,i(t.clients.confidentialNoSecret))});async function h(){let _=await je(`/auth/v1/clients/${e.client.id}/secret`);m(_)}async function $(){let _=await Be(`/auth/v1/clients/${e.client.id}/secret`);m(_)}function m(_){var p;_.body?_.body.secret&&n(v,i(_.body.secret)):n(l,i(((p=_.error)==null?void 0:p.message)||"Error"))}var w=Ur(),y=d(w),g=d(y,!0);c(y);var k=a(y,2);{var R=_=>{var p=Tr(),x=oe(p);ur(x,{autocomplete:"off",label:"Client Secret",placeholder:"Client Secret",disabled:!0,showCopy:!0,get value(){return r(v)},set value(N){n(v,i(N))}});var b=a(x,2);ce(b,{onclick:$,children:(N,B)=>{W();var Q=G();T(()=>E(Q,t.clients.generateSecret)),u(N,Q)},$$slots:{default:!0}}),u(_,p)};Y(k,_=>{r(v)&&_(R)})}c(w),T(()=>E(g,r(l))),u(j,w),ne()}var jr=P('<div class="err"> </div>'),Br=P("<p> </p> <!> <!>",1);function Nr(j,e){se(e,!0);let t=be(),l=pe(),v=C("");async function h(){n(v,"");let R=await Lt(`/auth/v1/clients/${e.client.id}`);R.error?n(v,i(R.error.message)):e.onSave()}var $=Br(),m=oe($),w=d(m,!0);c(m);var y=a(m,2);ce(y,{level:-1,onclick:h,children:(R,_)=>{W();var p=G();T(()=>E(p,t.common.delete)),u(R,p)},$$slots:{default:!0}});var g=a(y,2);{var k=R=>{var _=jr(),p=d(_,!0);c(_),T(()=>E(p,r(v))),u(R,_)};Y(g,R=>{r(v)&&R(k)})}T(()=>E(w,l.clients.delete1)),u(j,$),ne()}var Qr=P('<div><div class="flex"><input type="range" class="svelte-12j8dit"> <div class="value font-mono svelte-12j8dit"> </div></div> <div class="label svelte-12j8dit"><label class="font-label noselect svelte-12j8dit"> </label></div></div>');function We(j,e){se(e,!0);let t=V(e,"value",15),l=V(e,"label",3,""),v=V(e,"disabled",3,!1),h=V(e,"step",3,1),$=V(e,"widthRange",3,"15rem");const m=_e();let w=re(()=>{if(e.hue!==void 0&&e.sat!==void 0&&e.lum!==void 0){if(e.bgMode==="hue")return`linear-gradient(
                    to right,
                    hsl(0 ${e.sat} ${e.lum}) 0%,
                    hsl(60 ${e.sat} ${e.lum}) 17%,
                    hsl(120 ${e.sat} ${e.lum}) 33%,
                    hsl(180 ${e.sat} ${e.lum}) 50%,
                    hsl(240 ${e.sat} ${e.lum}) 67%,
                    hsl(300 ${e.sat} ${e.lum}) 83%,
                    hsl(3600 ${e.sat} ${e.lum}) 100%
                )`;if(e.bgMode==="sat")return`linear-gradient(to right, hsl(${e.hue} 0 ${e.lum}), hsl(${e.hue} 100 ${e.lum}))`;if(e.bgMode==="lum")return`linear-gradient(to right, hsl(${e.hue} ${e.sat} 0), hsl(${e.hue} ${e.sat} 100))`}return"hsl(var(--text) / .5)"});var y=Qr(),g=d(y),k=d(g);Pe(k),F(k,"id",m);var R=a(k,2),_=d(R,!0);c(R),c(g);var p=a(g,2),x=d(p);F(x,"for",m);var b=d(x,!0);c(x),c(p),c(y),T(()=>{F(k,"name",e.name),F(k,"title",l()),F(k,"aria-label",l()),k.disabled=v(),F(k,"aria-disabled",v()),F(k,"min",e.min),F(k,"max",e.max),F(k,"step",h()),z(k,"width",$()),z(k,"--bg-slider",r(w)),E(_,t()),E(b,l())}),De(k,t),u(j,y),ne()}var Pr=P('<div class="outer svelte-1evkwuy"><div class="container svelte-1evkwuy"><div><label class="font-label svelte-1evkwuy"> </label> <div class="values svelte-1evkwuy"><!> <!> <!></div></div> <div class="color svelte-1evkwuy"></div></div></div>');function fe(j,e){se(e,!0);let t=V(e,"h",15),l=V(e,"s",15),v=V(e,"l",15);const h=_e(),$="15rem";let m=re(()=>`hsl(${t()} ${l()} ${v()})`);var w=Pr(),y=d(w),g=d(y),k=d(g);F(k,"for",h);var R=d(k,!0);c(k);var _=a(k,2);F(_,"id",h);var p=d(_);We(p,{label:"Hue",min:0,max:359,widthRange:$,bgMode:"hue",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return t()},set value(B){t(B)}});var x=a(p,2);We(x,{label:"Sat",min:0,max:100,widthRange:$,bgMode:"sat",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return l()},set value(B){l(B)}});var b=a(x,2);We(b,{label:"Lum",min:0,max:100,widthRange:$,bgMode:"lum",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return v()},set value(B){v(B)}}),c(_),c(g);var N=a(g,2);c(y),c(w),T(()=>{z(y,"border-color",r(m)),E(R,e.label),z(N,"background",r(m))}),u(j,w),ne()}var Dr=(j,e)=>{var t;return(t=r(e))==null?void 0:t.click()},Fr=P('<div class="container svelte-lcwq3j"><!> <div role="none" class="mask svelte-lcwq3j"><div class="colorWrapper svelte-lcwq3j"><div class="color svelte-lcwq3j"></div></div> <input type="color" class="svelte-lcwq3j"></div></div>');function ze(j,e){se(e,!0);let t=V(e,"value",15),l=pe(),v=C(void 0);var h=Fr(),$=d(h);he($,{get label(){return e.label},get placeholder(){return e.label},get errMsg(){return l.validation.css},get width(){return e.inputWidth},required:!0,pattern:It,get value(){return t()},set value(y){t(y)}});var m=a($,2);m.__click=[Dr,v];var w=a(d(m),2);Pe(w),qt(w,y=>n(v,y),()=>r(v)),c(m),c(h),T(()=>z(h,"--color",t())),De(w,t),u(j,h),ne()}Ue(["click"]);var Or=P('<div><p> </p> <div class="hsl svelte-10udpph"><div><!> <!> <!> <!></div> <div><!> <!> <!></div></div> <div><p><!></p> <!> <!> <!></div></div>');function Mt(j,e){se(e,!0);let t=V(e,"values",15),l=pe();var v=Or(),h=d(v),$=d(h,!0);c(h);var m=a(h,2),w=d(m),y=d(w);fe(y,{label:"--text",get h(){return t().text[0]},set h(o){t(t().text[0]=o,!0)},get s(){return t().text[1]},set s(o){t(t().text[1]=o,!0)},get l(){return t().text[2]},set l(o){t(t().text[2]=o,!0)}});var g=a(y,2);fe(g,{label:"--text-high",get h(){return t().text_high[0]},set h(o){t(t().text_high[0]=o,!0)},get s(){return t().text_high[1]},set s(o){t(t().text_high[1]=o,!0)},get l(){return t().text_high[2]},set l(o){t(t().text_high[2]=o,!0)}});var k=a(g,2);fe(k,{label:"--bg",get h(){return t().bg[0]},set h(o){t(t().bg[0]=o,!0)},get s(){return t().bg[1]},set s(o){t(t().bg[1]=o,!0)},get l(){return t().bg[2]},set l(o){t(t().bg[2]=o,!0)}});var R=a(k,2);fe(R,{label:"--bg-high",get h(){return t().bg_high[0]},set h(o){t(t().bg_high[0]=o,!0)},get s(){return t().bg_high[1]},set s(o){t(t().bg_high[1]=o,!0)},get l(){return t().bg_high[2]},set l(o){t(t().bg_high[2]=o,!0)}}),c(w);var _=a(w,2),p=d(_);fe(p,{label:"--action",get h(){return t().action[0]},set h(o){t(t().action[0]=o,!0)},get s(){return t().action[1]},set s(o){t(t().action[1]=o,!0)},get l(){return t().action[2]},set l(o){t(t().action[2]=o,!0)}});var x=a(p,2);fe(x,{label:"--accent",get h(){return t().accent[0]},set h(o){t(t().accent[0]=o,!0)},get s(){return t().accent[1]},set s(o){t(t().accent[1]=o,!0)},get l(){return t().accent[2]},set l(o){t(t().accent[2]=o,!0)}});var b=a(x,2);fe(b,{label:"--error",get h(){return t().error[0]},set h(o){t(t().error[0]=o,!0)},get s(){return t().error[1]},set s(o){t(t().error[1]=o,!0)},get l(){return t().error[2]},set l(o){t(t().error[2]=o,!0)}}),c(_),c(m);var N=a(m,2),B=d(N),Q=d(B);$e(Q,()=>l.clients.branding.descFullCss),c(B);var J=a(B,2);ze(J,{label:"--btn-text",get inputWidth(){return e.inputWidth},get value(){return t().btn_text},set value(o){t(t().btn_text=o,!0)}});var L=a(J,2);ze(L,{label:"--theme-sun",get inputWidth(){return e.inputWidth},get value(){return t().theme_sun},set value(o){t(t().theme_sun=o,!0)}});var A=a(L,2);ze(A,{label:"--theme-moon",get inputWidth(){return e.inputWidth},get value(){return t().theme_moon},set value(o){t(t().theme_moon=o,!0)}}),c(N),c(v),T(()=>E($,l.clients.branding.descHsl)),u(j,v),ne()}var Wr=j=>j.preventDefault(),zr=P('<div aria-label="Preview: All components inside are only for theme and colors preview and have no effect or interaction"><div class="inner svelte-fkmn75"><div class="container svelte-fkmn75"><div class="logo svelte-fkmn75"><img alt="Client Logo"></div> <h3 class="svelte-fkmn75">Header</h3> <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p> <p><span class="svelte-fkmn75">--accent-color</span></p> <!> <div class="btn svelte-fkmn75"><div class="svelte-fkmn75"><!> <br> <!> <br> <!> <br></div> <div class="svelte-fkmn75"><!> <br> <!> <br> <!></div></div> <a>Link</a> <br> <!></div></div></div>');function jt(j,e){se(e,!0);let t=C(!1);ge(()=>{r(t)&&setTimeout(()=>{n(t,!1)},2e3)});var l=zr();const v=re(()=>e.theme.text.join(" "));T(()=>z(l,"--text",r(v)));const h=re(()=>e.theme.text_high.join(" "));T(()=>z(l,"--text-high",r(h)));const $=re(()=>e.theme.bg.join(" "));T(()=>z(l,"--bg",r($)));const m=re(()=>e.theme.bg_high.join(" "));T(()=>z(l,"--bg-high",r(m)));const w=re(()=>e.theme.action.join(" "));T(()=>z(l,"--action",r(w)));const y=re(()=>e.theme.accent.join(" "));T(()=>z(l,"--accent",r(y)));const g=re(()=>e.theme.error.join(" "));T(()=>z(l,"--error",r(g)));var k=d(l),R=d(k),_=d(R),p=d(_);c(_);var x=a(_,8);he(x,{label:"Preview",placeholder:"Preview",width:"12.5rem"});var b=a(x,2),N=d(b),B=d(N);ce(B,{level:1,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var Q=a(B,4);ce(Q,{level:2,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var J=a(Q,4);ce(J,{level:3,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}}),W(2),c(N);var L=a(N,2),A=d(L);ce(A,{level:-1,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var o=a(A,4);ce(o,{level:-2,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var U=a(o,4);ce(U,{level:-3,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}}),c(L),c(b);var O=a(b,2);F(O,"href",window.location.href),O.__click=[Wr];var S=a(O,4);mr(S,{}),c(R),c(k),c(l),T(()=>{z(l,"--border-radius",e.borderRadius),z(l,"--btn-text",e.theme.btn_text),z(l,"--theme-sun",e.theme.theme_sun),z(l,"--theme-moon",e.theme.theme_moon),F(p,"src",e.logoUrl)}),u(j,l),ne()}Ue(["click"]);var Zr=P('<div><h2>Preview</h2> <!> <div class="preview svelte-1nlq99j"><!></div></div>');function Gr(j,e){se(e,!0);let t=["Light Theme","Dark Theme"],l=C(i(t[0]));var v=Zr(),h=a(d(v),2);Et(h,{tabs:t,center:!0,get selected(){return r(l)},set selected(g){n(l,i(g))}});var $=a(h,2),m=d($);{var w=g=>{jt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.light}})},y=g=>{jt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.dark}})};Y(m,g=>{r(l)===t[0]?g(w):g(y,!1)})}c($),c(v),u(j,v),ne()}var Jr=P('<div class="err"> </div>'),Kr=P('<div class="values svelte-1pkqupw"><p><!></p> <!> <h1>Light Theme</h1> <!> <br> <h1>Dark Theme</h1> <!></div> <div class="preview"><!> <hr> <p>Logo Upload</p> <!> <div class="buttons svelte-1pkqupw"><!> <!> <!></div> <!></div>',1),Hr=P('<div class="container svelte-1pkqupw"><!></div>');function Xr(j,e){se(e,!0);const t="13rem";let l=be(),v=pe(),h=C(!1),$=C(""),m=C(void 0),w=C(i(_e())),y=re(()=>`/auth/v1/clients/${e.client.id}/logo?${r(w)}`),g=re(()=>`/auth/v1/theme/${e.client.id}`);ge(()=>{k()});async function k(){var b;let x=await je(r(g));x.body?(x.body.client_id==="rauthy"&&console.log("using Rauthy default scheme"),n(m,i(x.body))):n($,i(((b=x.error)==null?void 0:b.message)||"Error"))}async function R(x,b){if(!r(m)){console.error("theme is undefined");return}let N=r(m);N.client_id=e.client.id;let B=await Be(r(g),N);B.error?n($,i(B.error.message)):(n(h,!0),setTimeout(()=>{n(h,!1)},2e3))}async function _(){let x=await Lt(r(g));x.error?n($,i(x.error.message)):(await k(),n(h,!0),setTimeout(()=>{n(h,!1)},2e3))}async function p(){n(w,i(_e()))}Qe(j,{get action(){return r(g)},onSubmit:R,children:(x,b)=>{var N=Hr(),B=d(N);{var Q=J=>{var L=Kr(),A=oe(L),o=d(A),U=d(o);$e(U,()=>v.clients.branding.descVariables),c(o);var O=a(o,2);he(O,{label:"--border-radius",placeholder:"--border-radius",get errMsg(){return v.validation.css},width:t,required:!0,pattern:It,get value(){return r(m).border_radius},set value(K){r(m).border_radius=K}});var S=a(O,4);Mt(S,{inputWidth:t,get values(){return r(m).light},set values(K){r(m).light=K}});var f=a(S,6);Mt(f,{inputWidth:t,get values(){return r(m).dark},set values(K){r(m).dark=K}}),c(A);var Z=a(A,2),M=d(Z);hr(M,()=>r(w),K=>{Gr(K,{get logoUrl(){return r(y)},get theme(){return r(m)}})});var ae=a(M,6),me=re(()=>`/auth/v1/clients/${e.client.id}/logo`);gr(ae,{method:"PUT",get url(){return r(me)},fileName:"logo",onSuccess:p});var ee=a(ae,2),D=d(ee);ce(D,{type:"submit",children:(K,ue)=>{W();var de=G();T(()=>E(de,l.common.save)),u(K,de)},$$slots:{default:!0}});var I=a(D,2);ce(I,{level:-2,onclick:_,children:(K,ue)=>{W();var de=G();T(()=>E(de,v.common.reset)),u(K,de)},$$slots:{default:!0}});var te=a(I,2);{var X=K=>{Rt(K,{})};Y(te,K=>{r(h)&&K(X)})}c(ee);var ie=a(ee,2);{var le=K=>{var ue=Jr(),de=d(ue,!0);c(ue),T(()=>E(de,r($))),u(K,ue)};Y(ie,K=>{r($)&&K(le)})}c(Z),u(J,L)};Y(B,J=>{r(m)&&J(Q)})}c(N),u(x,N)},$$slots:{default:!0}}),ne()}var Vr=P('<div class="flex"><!></div> <div class="details"><!></div>',1);function Yr(j,e){se(e,!0);let t=be(),l=pe();const v=[l.nav.config,"Secret","Branding",t.common.delete];let h=C(i(v[0])),$=C(void 0);ge(()=>{e.client.id&&requestAnimationFrame(()=>{var p;(p=r($))==null||p()})});var m=Vr(),w=oe(m),y=d(w);Et(y,{tabs:v,get selected(){return r(h)},set selected(p){n(h,i(p))},get focusFirst(){return r($)},set focusFirst(p){n($,i(p))}}),c(w);var g=a(w,2),k=d(g);{var R=p=>{Rr(p,{get client(){return e.client},get clients(){return e.clients},get scopesAll(){return e.scopesAll},get onSave(){return e.onSave}})},_=p=>{var x=ye(),b=oe(x);{var N=Q=>{Mr(Q,{get client(){return e.client}})},B=Q=>{var J=ye(),L=oe(J);{var A=U=>{Xr(U,{get client(){return e.client}})},o=U=>{var O=ye(),S=oe(O);{var f=Z=>{Nr(Z,{get client(){return e.client},get onSave(){return e.onSave}})};Y(S,Z=>{r(h)===t.common.delete&&Z(f)},!0)}u(U,O)};Y(L,U=>{r(h)==="Branding"?U(A):U(o,!1)},!0)}u(Q,J)};Y(b,Q=>{r(h)==="Secret"?Q(N):Q(B,!1)},!0)}u(p,x)};Y(k,p=>{r(h)===l.nav.config?p(R):p(_,!1)})}c(g),u(j,m),ne()}var ea=P("<div></div> <!>",1),ta=P("<!> <!>",1),ra=P('<div class="err"> </div>'),aa=P('<!> <div id="groups"><!></div>',1),la=P("<!> <!>",1);function ia(j,e){se(e,!0);let t=C(void 0),l=C(""),v=C(i([])),h=C(i([])),$=C(void 0),m=nr("cid"),w=C(i([]));const y=["ID"];let g=C(i(y[0])),k=C("");const R=["ID"];Yt(()=>{_(),p()}),ge(()=>{n($,i(r(v).find(L=>L.id===m.get())))}),ge(()=>{let L=r(k).toLowerCase();L?r(g)===y[0]&&n(h,i(r(v).filter(A=>A.id.toLowerCase().includes(L)))):n(h,i(r(v)))});async function _(){var A;let L=await St("/auth/v1/clients");L.body?n(v,i(L.body)):n(l,i(((A=L.error)==null?void 0:A.message)||"Error"))}async function p(){var A;let L=await St("/auth/v1/scopes");L.body?n(w,i(L.body.map(o=>o.name))):n(l,i(((A=L.error)==null?void 0:A.message)||"Error"))}function x(L,A){let o=A==="up";L===R[0]&&r(v).sort((U,O)=>o?U.id.localeCompare(O.id):O.id.localeCompare(U.id))}function b(){_()}async function N(L){var A;(A=r(t))==null||A(),await _(),m.set(L)}var B=la(),Q=oe(B);ir(Q,{paddingTop:"2.1rem",buttonTilesAriaControls:"groups",width:"min(20rem, 100dvw)",thresholdNavSub:700,buttonTiles:L=>{var A=ea(),o=oe(A);z(o,"height",".5rem");var U=a(o,2);Me(U,17,()=>r(h),O=>O.id,(O,S)=>{var f=re(()=>m.get()===r(S).id);lr(O,{onclick:()=>m.set(r(S).id),get selected(){return r(f)},children:(Z,M)=>{W();var ae=G();T(()=>E(ae,r(S).id)),u(Z,ae)},$$slots:{default:!0}})}),u(L,A)},children:(L,A)=>{var o=ta(),U=oe(o),O=re(()=>r(v).length===0?1:2);rr(U,{get level(){return r(O)},alignRight:!0,get closeModal(){return r(t)},set closeModal(f){n(t,i(f))},children:(f,Z)=>{Sr(f,{onSave:N,get clients(){return r(v)}})},$$slots:{default:!0}});var S=a(U,2);sr(S,{searchOptions:y,orderOptions:R,onChangeOrder:x,searchWidth:"min(19.5rem, 100dvw - .5rem)",get searchOption(){return r(g)},set searchOption(f){n(g,i(f))},get value(){return r(k)},set value(f){n(k,i(f))}}),u(L,o)},$$slots:{buttonTiles:!0,default:!0}});var J=a(Q,2);ar(J,{children:(L,A)=>{var o=aa(),U=oe(o);{var O=M=>{var ae=ra(),me=d(ae,!0);c(ae),T(()=>E(me,r(l))),u(M,ae)};Y(U,M=>{r(l)&&M(O)})}var S=a(U,2),f=d(S);{var Z=M=>{Yr(M,{get client(){return r($)},get clients(){return r(v)},get scopesAll(){return r(w)},onSave:b})};Y(f,M=>{r($)&&M(Z)})}c(S),u(L,o)},$$slots:{default:!0}}),u(j,B),ne()}function sa(j){ia(j,{})}export{sa as component};
