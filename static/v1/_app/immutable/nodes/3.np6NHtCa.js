import"../chunks/disclose-version.BDr9Qe-U.js";import{t as D,f as ne,p as Pe,k as Le,c as i,s as c,r as o,a as ze,g as n,y as fe,a9 as _e,d as F,b as u,q as mt,aW as Ua,o as ft,$ as Fa}from"../chunks/index-client.BTDbhFDr.js";import{h as Ya}from"../chunks/svelte-head.j24Rpelw.js";import{a as v,n as It,c as ye,t as _,b as Ee}from"../chunks/template.WjkCsOA4.js";import{i as A}from"../chunks/if.DAPrgfY3.js";import{p as E}from"../chunks/proxy.RLXrsQTM.js";import{d as ct,e as He,s as p,k as Ha}from"../chunks/render.Bnf33Vuq.js";import{I as Et,h as Zt,S as Xt,u as Jt,D as Gt,b as Oa}from"../chunks/Devices.CbOw9cF-.js";import{p as N}from"../chunks/props.C0sO4y_5.js";import{z as et,M as qt,_ as Qa,P as Ka,A as Za,q as Ct,u as Xa,N as Ja,v as Ga,r as er}from"../chunks/helpers.DwhnXD2f.js";import{B as be,h as tr,e as tt,a as ea,i as pt,b as ta,g as aa,f as vt,j as ar,T as rr}from"../chunks/ThemeSwitch.roIqycWj.js";import{s as R,g as se,h as oe,r as ra,t as Se,d as Pt,f as Ze,b as zt,c as at}from"../chunks/index.C-OHSz9E.js";import{s as Nt}from"../chunks/snippet.DrOrOIgy.js";import{b as gt}from"../chunks/this.0speaOir.js";import{u as Ae}from"../chunks/i18n.svelte.CR36i7o7.js";import{B as nr}from"../chunks/ButtonAuthProvider.K0Z2bwM2.js";import{I as Ue}from"../chunks/Input.CUSPvo5Z.js";import{$ as na,a as sa,b as sr,f as Tt,g as or,c as ir,d as oa,F as lr}from"../chunks/Form.D12CCp_z.js";import{a as jt,c as cr,d as ia,e as vr}from"../chunks/patterns.BdncpE46.js";import{P as dr,O as la,L as ur}from"../chunks/LangSelector.C4OT_tcu.js";import{w as hr,d as mr,e as fr}from"../chunks/dataFetching.hs0Cnov0.js";import{w as pr,A as gr}from"../chunks/A._XWgsO21.js";import{W as ca}from"../chunks/WebauthnRequest.DdM1Tehs.js";import{P as yr}from"../chunks/PasswordPolicy.Cl5PT5DD.js";import{I as Lt}from"../chunks/InputPassword.CdjaKT40.js";import{C as br}from"../chunks/CheckIcon.Bn8r0Uf_.js";import"../chunks/legacy.CiDis14V.js";import{T as wr}from"../chunks/Template.CAvnUEat.js";import{u as kr}from"../chunks/param.svelte.Bo6XdOlX.js";import{M as Mr,C as $r}from"../chunks/ContentCenter.BfmJnKUc.js";var _r=It('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"></path></svg>');function yt(a,e){let t=N(e,"opacity",3,.9),r=N(e,"width",3,"1.5rem"),l=N(e,"color",3,"hsl(var(--action))");var s=_r();R(s,"stroke-width",2),D(()=>{R(s,"width",r()),R(s,"color",l()),R(s,"opacity",t())}),v(a,s)}function At(a,e){var t=ye(),r=ne(t);{var l=h=>{yt(h,{color:"hsl(var(--action))"})},s=h=>{Et(h,{color:"hsl(var(--error))"})};A(r,h=>{e.checked?h(l):h(s,!1)})}v(a,t)}function Dr(a,e,t){e()||t()}function xr(a){a.stopPropagation()}var Ir=_('<span class="closeIcon svelte-utq0b0"><!></span>'),Er=_('<div class="relative"><div class="absolute close svelte-utq0b0"><!></div></div>'),qr=_('<dialog aria-modal="true" class="svelte-utq0b0"><div role="none" class="svelte-utq0b0"><!> <!></div></dialog>');function Cr(a,e){Pe(e,!0);let t=N(e,"showModal",15),r=N(e,"closeModal",15),l=N(e,"strict",3,!1),s=N(e,"prerender",3,!1),h=Ae(),m;Le(()=>{r(d)}),Le(()=>{t()&&(m==null||m.showModal())});function d(I){I==null||I.preventDefault(),m==null||m.close(),t(!1)}var y=qr();y.__click=[Dr,l,d];var f=i(y);f.__click=[xr];var x=i(f);{var T=I=>{var U=Er(),L=i(U),W=i(L);be(W,{get ariaLabel(){return h.common.close},invisible:!0,onclick:d,children:(Y,C)=>{var te=Ir(),Q=i(te);Et(Q,{color:"currentColor",width:"1.2rem"}),o(te),v(Y,te)},$$slots:{default:!0}}),o(L),o(U),v(I,U)};A(x,I=>{l()||I(T)})}var M=c(x,2);{var V=I=>{var U=ye(),L=ne(U);Nt(L,()=>e.children),v(I,U)};A(M,I=>{(s()||t())&&I(V)})}o(f),o(y),gt(y,I=>m=I,()=>m),D(()=>R(y,"data-strict",l())),He("close",y,()=>{var I;t(!1),(I=e.onClose)==null||I.call(e)}),v(a,y),ze()}ct(["click"]);var Pr=_('<div class="link-err value svelte-1tea8v4"> </div>'),zr=_('<div class="fed-btn svelte-1tea8v4"><!> <!></div>'),Nr=_('<h3> </h3> <p> </p> <div class="providers svelte-1tea8v4"></div>',1),Tr=_("<!> <!>",1),jr=_('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),Lr=_('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),Ar=_('<div><div>WebID:</div> <span class="value svelte-1tea8v4"><a target="_blank"><!></a></span></div>'),Wr=_('<div><div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <div><div class="value svelte-1tea8v4"> </div> <!></div></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <!> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <!> <!></div>');function va(a,e){Pe(e,!0);let t=N(e,"user",15),r=Ae(),l=F(!1),s=F(!1),h=fe(()=>{var ee;return(ee=t().account_type)==null?void 0:ee.startsWith("federated")}),m=fe(()=>{var ee;return n(h)?`${t().account_type}: ${((ee=e.authProvider)==null?void 0:ee.name)||""}`:t().account_type}),d=fe(()=>e.viewModePhone?"rowPhone":"row"),y=fe(()=>e.viewModePhone?"labelPhone":"label");function f(ee){Qa(64,(me,{challenge:ge,verifier:Ie})=>{me||(localStorage.setItem(Ka,Ie),x(ee,ge))})}async function x(ee,me){let ge={email:t().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:ee,pkce_challenge:me},Ie=await ea(`/auth/v1/providers/${ee}/link`,ge);if(Ie.text){Za(Ie.text);let $e=Ie.headers.get("location");$e&&(window.location.href=$e)}else console.error(Ie.error)}async function T(){let ee=await tr("/auth/v1/providers/link");ee.body?t(ee.body):(console.error(ee.error),u(l,!0))}var M=Wr(),V=i(M),I=i(V),U=i(I,!0);o(I);var L=c(I,2),W=i(L,!0);o(L),o(V);var Y=c(V,2),C=i(Y),te=i(C,!0);o(C);var Q=c(C,2),le=i(Q,!0);o(Q),o(Y);var re=c(Y,2),j=i(re),b=i(j,!0);o(j);var P=c(j,2),k=i(P,!0);o(P),o(re);var K=c(re,2),ve=i(K),pe=i(ve);o(ve);var q=c(ve,2),H=i(q,!0);o(q),o(K);var z=c(K,2),O=i(z),Z=i(O,!0);o(O);var ie=c(O,2),G=i(ie),de=i(G,!0);o(G);var ue=c(G,2);{var De=ee=>{var me=zr(),ge=i(me);be(ge,{get ariaLabel(){return r.account.providerUnlink},level:3,onclick:T,children:(Ne,Ke)=>{_e();var Ge=Ee();D(()=>p(Ge,r.account.providerUnlink)),v(Ne,Ge)},$$slots:{default:!0}});var Ie=c(ge,2);{var $e=Ne=>{var Ke=Pr(),Ge=i(Ke,!0);o(Ke),D(()=>p(Ge,r.account.providerUnlinkDesc)),v(Ne,Ke)};A(Ie,Ne=>{n(l)&&Ne($e)})}o(me),v(ee,me)},X=ee=>{var me=ye(),ge=ne(me);{var Ie=$e=>{var Ne=Tr(),Ke=ne(Ne);be(Ke,{level:2,onclick:()=>u(s,!0),children:(it,Ra)=>{_e();var lt=Ee();D(()=>p(lt,r.account.providerLink)),v(it,lt)},$$slots:{default:!0}});var Ge=c(Ke,2);Cr(Ge,{get showModal(){return n(s)},set showModal(it){u(s,E(it))},children:(it,Ra)=>{var lt=Nr(),_t=ne(lt),Ba=i(_t,!0);o(_t);var Dt=c(_t,2),Sa=i(Dt,!0);o(Dt);var Qt=c(Dt,2);tt(Qt,21,()=>e.providers,xt=>xt.id,(xt,Kt)=>{var Va=fe(()=>`${r.account.providerLink}: ${n(Kt).name}`);nr(xt,{get ariaLabel(){return n(Va)},get provider(){return n(Kt)},onclick:f})}),o(Qt),D(()=>{p(Ba,r.account.providerLink),p(Sa,r.account.providerLinkDesc)}),v(it,lt)},$$slots:{default:!0}}),v($e,Ne)};A(ge,$e=>{e.providers.length>0&&$e(Ie)},!0)}v(ee,me)};A(ue,ee=>{n(h)?ee(De):ee(X,!1)})}o(ie),o(z);var g=c(z,2),w=i(g),$=i(w,!0);o(w);var B=c(w,2),ce=i(B,!0);o(B),o(g);var S=c(g,2),ae=i(S),he=i(ae,!0);o(ae);var we=c(ae,2),ke=i(we,!0);o(we),o(S);var J=c(S,2),qe=i(J),Te=i(qe,!0);o(qe);var We=c(qe,2),Ve=fe(()=>!!t().webauthn_user_id);At(We,{get checked(){return n(Ve)}}),o(J);var Ce=c(J,2),xe=i(Ce),Xe=i(xe,!0);o(xe);var Je=c(xe,2);At(Je,{get checked(){return t().enabled}}),o(Ce);var Fe=c(Ce,2),Re=i(Fe),dt=i(Re,!0);o(Re);var Me=c(Re,2);At(Me,{get checked(){return t().email_verified}}),o(Fe);var Be=c(Fe,2);{var st=ee=>{var me=jr(),ge=i(me),Ie=i(ge,!0);o(ge);var $e=c(ge,2),Ne=i($e,!0);D(()=>p(Ne,et(t().last_login))),o($e),o(me),D(()=>{se(me,oe(n(d)),"svelte-1tea8v4"),se(ge,oe(n(y)),"svelte-1tea8v4"),p(Ie,r.account.lastLogin)}),v(ee,me)};A(Be,ee=>{t().last_login&&ee(st)})}var je=c(Be,2),Ye=i(je),Yt=i(Ye,!0);o(Ye);var ot=c(Ye,2),Na=i(ot,!0);D(()=>p(Na,t().password_expires&&et(t().password_expires)||r.common.never)),o(ot),o(je);var ut=c(je,2),ht=i(ut),Ta=i(ht,!0);o(ht);var Ht=c(ht,2),ja=i(Ht,!0);D(()=>p(ja,et(t().created_at))),o(Ht),o(ut);var Ot=c(ut,2);{var La=ee=>{var me=Lr(),ge=i(me),Ie=i(ge,!0);o(ge);var $e=c(ge,2),Ne=i($e,!0);D(()=>p(Ne,et(t().user_expires))),o($e),o(me),D(()=>{se(me,oe(n(d)),"svelte-1tea8v4"),se(ge,oe(n(y)),"svelte-1tea8v4"),p(Ie,r.account.userExpiry)}),v(ee,me)};A(Ot,ee=>{t().user_expires&&ee(La)})}var Aa=c(Ot,2);{var Wa=ee=>{var me=Ar(),ge=i(me),Ie=c(ge,2),$e=i(Ie);D(()=>R($e,"href",qt(t().id)));var Ne=i($e);Zt(Ne,()=>qt(t().id).replace("/auth/","/auth/<wbr/>")),o($e),o(Ie),o(me),D(()=>{se(me,oe(n(d)),"svelte-1tea8v4"),se(ge,oe(n(y)),"svelte-1tea8v4")}),v(ee,me)};A(Aa,ee=>{e.webIdData&&ee(Wa)})}o(M),D(()=>{se(V,oe(n(d)),"svelte-1tea8v4"),se(I,oe(n(y)),"svelte-1tea8v4"),p(U,r.common.email),p(W,t().email),se(Y,oe(n(d)),"svelte-1tea8v4"),se(C,oe(n(y)),"svelte-1tea8v4"),p(te,r.account.givenName),p(le,t().given_name),se(re,oe(n(d)),"svelte-1tea8v4"),se(j,oe(n(y)),"svelte-1tea8v4"),p(b,r.account.familyName),p(k,t().family_name),se(K,oe(n(d)),"svelte-1tea8v4"),se(ve,oe(n(y)),"svelte-1tea8v4"),p(pe,`${r.account.user??""} ID`),p(H,t().id),se(z,oe(n(d)),"svelte-1tea8v4"),se(O,oe(n(y)),"svelte-1tea8v4"),p(Z,r.account.accType),p(de,n(m)||""),se(g,oe(n(d)),"svelte-1tea8v4"),se(w,oe(n(y)),"svelte-1tea8v4"),p($,r.account.roles),p(ce,t().roles||"None"),se(S,oe(n(d)),"svelte-1tea8v4"),se(ae,oe(n(y)),"svelte-1tea8v4"),p(he,r.account.groups),p(ke,t().groups||"None"),se(J,oe(n(d)),"svelte-1tea8v4"),se(qe,oe(n(y)),"svelte-1tea8v4"),p(Te,r.account.mfaActivated),se(Ce,oe(n(d)),"svelte-1tea8v4"),se(xe,oe(n(y)),"svelte-1tea8v4"),p(Xe,r.account.userEnabled),se(Fe,oe(n(d)),"svelte-1tea8v4"),se(Re,oe(n(y)),"svelte-1tea8v4"),p(dt,r.account.emailVerified),se(je,oe(n(d)),"svelte-1tea8v4"),se(Ye,oe(n(y)),"svelte-1tea8v4"),p(Yt,r.account.passwordExpiry),se(ut,oe(n(d)),"svelte-1tea8v4"),se(ht,oe(n(y)),"svelte-1tea8v4"),p(Ta,r.account.userCreated)}),v(a,M),ze()}function Wt(a,e){return a-e*Math.floor(a/e)}const da=1721426;function bt(a,e,t,r){e=Rt(a,e);let l=e-1,s=-2;return t<=2?s=0:wt(e)&&(s=-1),da-1+365*l+Math.floor(l/4)-Math.floor(l/100)+Math.floor(l/400)+Math.floor((367*t-362)/12+s+r)}function wt(a){return a%4===0&&(a%100!==0||a%400===0)}function Rt(a,e){return a==="BC"?1-e:e}function Rr(a){let e="AD";return a<=0&&(e="BC",a=1-a),[e,a]}const Br={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class kt{fromJulianDay(e){let t=e,r=t-da,l=Math.floor(r/146097),s=Wt(r,146097),h=Math.floor(s/36524),m=Wt(s,36524),d=Math.floor(m/1461),y=Wt(m,1461),f=Math.floor(y/365),x=l*400+h*100+d*4+f+(h!==4&&f!==4?1:0),[T,M]=Rr(x),V=t-bt(T,M,1,1),I=2;t<bt(T,M,3,1)?I=0:wt(M)&&(I=1);let U=Math.floor(((V+I)*12+373)/367),L=t-bt(T,M,U,1)+1;return new nt(T,M,U,L)}toJulianDay(e){return bt(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return Br[wt(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return wt(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}function ua(a){a=Bt(a,new kt);let e=Rt(a.era,a.year);return ha(e,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)}function ha(a,e,t,r,l,s,h){let m=new Date;return m.setUTCHours(r,l,s,h),m.setUTCFullYear(a,e-1,t),m.getTime()}function ma(a,e){if(e==="UTC")return 0;if(a>0&&e===na())return new Date(a).getTimezoneOffset()*-6e4;let{year:t,month:r,day:l,hour:s,minute:h,second:m}=pa(a,e);return ha(t,r,l,s,h,m,0)-Math.floor(a/1e3)*1e3}const fa=new Map;function pa(a,e){let t=fa.get(e);t||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),fa.set(e,t));let r=t.formatToParts(new Date(a)),l={};for(let s of r)s.type!=="literal"&&(l[s.type]=s.value);return{year:l.era==="BC"||l.era==="B"?-l.year+1:+l.year,month:+l.month,day:+l.day,hour:l.hour==="24"?0:+l.hour,minute:+l.minute,second:+l.second}}const ga=864e5;function Sr(a,e,t,r){return(t===r?[t]:[t,r]).filter(l=>Vr(a,e,l))}function Vr(a,e,t){let r=pa(t,e);return a.year===r.year&&a.month===r.month&&a.day===r.day&&a.hour===r.hour&&a.minute===r.minute&&a.second===r.second}function Ur(a,e,t="compatible"){let r=ba(a);if(e==="UTC")return ua(r);if(e===na()&&t==="compatible"){r=Bt(r,new kt);let d=new Date,y=Rt(r.era,r.year);return d.setFullYear(y,r.month-1,r.day),d.setHours(r.hour,r.minute,r.second,r.millisecond),d.getTime()}let l=ua(r),s=ma(l-ga,e),h=ma(l+ga,e),m=Sr(r,e,l-s,l-h);if(m.length===1)return m[0];if(m.length>1)switch(t){case"compatible":case"earlier":return m[0];case"later":return m[m.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(t){case"earlier":return Math.min(l-s,l-h);case"compatible":case"later":return Math.max(l-s,l-h);case"reject":throw new RangeError("No such absolute time found")}}function ya(a,e,t="compatible"){return new Date(Ur(a,e,t))}function ba(a,e){let t=0,r=0,l=0,s=0;if("timeZone"in a)({hour:t,minute:r,second:l,millisecond:s}=a);else if("hour"in a&&!e)return a;return e&&({hour:t,minute:r,second:l,millisecond:s}=e),new $t(a.calendar,a.era,a.year,a.month,a.day,t,r,l,s)}function Bt(a,e){if(a.calendar.identifier===e.identifier)return a;let t=e.fromJulianDay(a.calendar.toJulianDay(a)),r=a.copy();return r.calendar=e,r.era=t.era,r.year=t.year,r.month=t.month,r.day=t.day,rt(r),r}function St(a,e){let t=a.copy(),r="hour"in t?Kr(t,e):0;Vt(t,e.years||0),t.calendar.balanceYearMonth&&t.calendar.balanceYearMonth(t,a),t.month+=e.months||0,Ut(t),wa(t),t.day+=(e.weeks||0)*7,t.day+=e.days||0,t.day+=r,Fr(t),t.calendar.balanceDate&&t.calendar.balanceDate(t),t.year<1&&(t.year=1,t.month=1,t.day=1);let l=t.calendar.getYearsInEra(t);if(t.year>l){var s,h;let d=(s=(h=t.calendar).isInverseEra)===null||s===void 0?void 0:s.call(h,t);t.year=l,t.month=d?1:t.calendar.getMonthsInYear(t),t.day=d?1:t.calendar.getDaysInMonth(t)}t.month<1&&(t.month=1,t.day=1);let m=t.calendar.getMonthsInYear(t);return t.month>m&&(t.month=m,t.day=t.calendar.getDaysInMonth(t)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day)),t}function Vt(a,e){var t,r;!((t=(r=a.calendar).isInverseEra)===null||t===void 0)&&t.call(r,a)&&(e=-e),a.year+=e}function Ut(a){for(;a.month<1;)Vt(a,-1),a.month+=a.calendar.getMonthsInYear(a);let e=0;for(;a.month>(e=a.calendar.getMonthsInYear(a));)a.month-=e,Vt(a,1)}function Fr(a){for(;a.day<1;)a.month--,Ut(a),a.day+=a.calendar.getDaysInMonth(a);for(;a.day>a.calendar.getDaysInMonth(a);)a.day-=a.calendar.getDaysInMonth(a),a.month++,Ut(a)}function wa(a){a.month=Math.max(1,Math.min(a.calendar.getMonthsInYear(a),a.month)),a.day=Math.max(1,Math.min(a.calendar.getDaysInMonth(a),a.day))}function rt(a){a.calendar.constrainDate&&a.calendar.constrainDate(a),a.year=Math.max(1,Math.min(a.calendar.getYearsInEra(a),a.year)),wa(a)}function Yr(a){let e={};for(let t in a)typeof a[t]=="number"&&(e[t]=-a[t]);return e}function ka(a,e){return St(a,Yr(e))}function Ma(a,e){let t=a.copy();return e.era!=null&&(t.era=e.era),e.year!=null&&(t.year=e.year),e.month!=null&&(t.month=e.month),e.day!=null&&(t.day=e.day),rt(t),t}function Hr(a,e){let t=a.copy();return e.hour!=null&&(t.hour=e.hour),e.minute!=null&&(t.minute=e.minute),e.second!=null&&(t.second=e.second),e.millisecond!=null&&(t.millisecond=e.millisecond),Qr(t),t}function Or(a){a.second+=Math.floor(a.millisecond/1e3),a.millisecond=Mt(a.millisecond,1e3),a.minute+=Math.floor(a.second/60),a.second=Mt(a.second,60),a.hour+=Math.floor(a.minute/60),a.minute=Mt(a.minute,60);let e=Math.floor(a.hour/24);return a.hour=Mt(a.hour,24),e}function Qr(a){a.millisecond=Math.max(0,Math.min(a.millisecond,1e3)),a.second=Math.max(0,Math.min(a.second,59)),a.minute=Math.max(0,Math.min(a.minute,59)),a.hour=Math.max(0,Math.min(a.hour,23))}function Mt(a,e){let t=a%e;return t<0&&(t+=e),t}function Kr(a,e){return a.hour+=e.hours||0,a.minute+=e.minutes||0,a.second+=e.seconds||0,a.millisecond+=e.milliseconds||0,Or(a)}function $a(a,e,t,r){let l=a.copy();switch(e){case"era":{let m=a.calendar.getEras(),d=m.indexOf(a.era);if(d<0)throw new Error("Invalid era: "+a.era);d=Oe(d,t,0,m.length-1,r==null?void 0:r.round),l.era=m[d],rt(l);break}case"year":var s,h;!((s=(h=l.calendar).isInverseEra)===null||s===void 0)&&s.call(h,l)&&(t=-t),l.year=Oe(a.year,t,-1/0,9999,r==null?void 0:r.round),l.year===-1/0&&(l.year=1),l.calendar.balanceYearMonth&&l.calendar.balanceYearMonth(l,a);break;case"month":l.month=Oe(a.month,t,1,a.calendar.getMonthsInYear(a),r==null?void 0:r.round);break;case"day":l.day=Oe(a.day,t,1,a.calendar.getDaysInMonth(a),r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return a.calendar.balanceDate&&a.calendar.balanceDate(l),rt(l),l}function Zr(a,e,t,r){let l=a.copy();switch(e){case"hour":{let s=a.hour,h=0,m=23;if((r==null?void 0:r.hourCycle)===12){let d=s>=12;h=d?12:0,m=d?23:11}l.hour=Oe(s,t,h,m,r==null?void 0:r.round);break}case"minute":l.minute=Oe(a.minute,t,0,59,r==null?void 0:r.round);break;case"second":l.second=Oe(a.second,t,0,59,r==null?void 0:r.round);break;case"millisecond":l.millisecond=Oe(a.millisecond,t,0,999,r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return l}function Oe(a,e,t,r,l=!1){if(l){a+=Math.sign(e),a<t&&(a=r);let s=Math.abs(e);e>0?a=Math.ceil(a/s)*s:a=Math.floor(a/s)*s,a>r&&(a=t)}else a+=e,a<t?a=r-(t-a-1):a>r&&(a=t+(a-r-1));return a}const Xr=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/;function Qe(a){let e=a.match(Xr);if(!e)throw new Error("Invalid ISO 8601 date string: "+a);let t=new nt(Ft(e[1],0,9999),Ft(e[2],1,12),1);return t.day=Ft(e[3],0,t.calendar.getDaysInMonth(t)),t}function Ft(a,e,t){let r=Number(a);if(r<e||r>t)throw new RangeError(`Value out of range: ${e} <= ${r} <= ${t}`);return r}function Jr(a){return`${String(a.hour).padStart(2,"0")}:${String(a.minute).padStart(2,"0")}:${String(a.second).padStart(2,"0")}${a.millisecond?String(a.millisecond/1e3).slice(1):""}`}function _a(a){let e=Bt(a,new kt),t;return e.era==="BC"?t=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):t=String(e.year).padStart(4,"0"),`${t}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function Gr(a){return`${_a(a)}T${Jr(a)}`}function en(a,e){if(e.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Da(a,e,t){en(a,e),e.set(a,t)}function xa(a){let e=typeof a[0]=="object"?a.shift():new kt,t;if(typeof a[0]=="string")t=a.shift();else{let h=e.getEras();t=h[h.length-1]}let r=a.shift(),l=a.shift(),s=a.shift();return[e,t,r,l,s]}var tn=new WeakMap;class nt{copy(){return this.era?new nt(this.calendar,this.era,this.year,this.month,this.day):new nt(this.calendar,this.year,this.month,this.day)}add(e){return St(this,e)}subtract(e){return ka(this,e)}set(e){return Ma(this,e)}cycle(e,t,r){return $a(this,e,t,r)}toDate(e){return ya(this,e)}toString(){return _a(this)}compare(e){return sa(this,e)}constructor(...e){Da(this,tn,{writable:!0,value:void 0});let[t,r,l,s,h]=xa(e);this.calendar=t,this.era=r,this.year=l,this.month=s,this.day=h,rt(this)}}var an=new WeakMap;class $t{copy(){return this.era?new $t(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new $t(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return St(this,e)}subtract(e){return ka(this,e)}set(e){return Ma(Hr(this,e),e)}cycle(e,t,r){switch(e){case"era":case"year":case"month":case"day":return $a(this,e,t,r);default:return Zr(this,e,t,r)}}toDate(e,t){return ya(this,e,t)}toString(){return Gr(this)}compare(e){let t=sa(this,e);return t===0?sr(this,ba(e)):t}constructor(...e){Da(this,an,{writable:!0,value:void 0});let[t,r,l,s,h]=xa(e);this.calendar=t,this.era=r,this.year=l,this.month=s,this.day=h,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,rt(this)}}var rn=It(`<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21
            7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25
            0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"></path></svg>`);function nn(a,e){let t=N(e,"opacity",3,.9),r=N(e,"width",3,"1.5rem"),l=N(e,"color",3,"currentColor");var s=rn();R(s,"stroke-width",2),D(()=>{R(s,"stroke",l()),R(s,"width",r()),R(s,"opacity",t())}),v(a,s)}function sn(a,e){var t,r,l,s,h;switch(a.code){case"Enter":(t=e.onEnter)==null||t.call(e);break;case"ArrowUp":(r=e.onUp)==null||r.call(e);break;case"ArrowDown":(l=e.onDown)==null||l.call(e);break;case"ArrowLeft":(s=e.onLeft)==null||s.call(e);break;case"ArrowRight":(h=e.onRight)==null||h.call(e);break}}var on=_('<span class="pointer"><!></span>'),ln=_('<div class="day font-label weekLabel svelte-1j6kibo"> </div>'),cn=_('<time class="svelte-1j6kibo"> </time>'),vn=_('<div class="day svelte-1j6kibo"><!></div>'),dn=_('<div class="week svelte-1j6kibo"></div>'),un=_('<div class="popup svelte-1j6kibo"><div class="flex space-between"><div><!></div> <div><!></div></div> <div class="week svelte-1j6kibo"></div> <div class="month svelte-1j6kibo"></div></div>'),hn=_('<div class="error svelte-1j6kibo"> </div>'),mn=_('<div><div class="flex"><input type="date" step="any" class="svelte-1j6kibo"> <div class="relative"><div class="absolute patch svelte-1j6kibo"></div> <div class="absolute indicator svelte-1j6kibo"><!></div></div></div> <div class="label svelte-1j6kibo"><label class="font-label noselect svelte-1j6kibo"> </label> <!></div></div>');function fn(a,e){Pe(e,!0);let t=N(e,"id",19,Ct),r=N(e,"value",31,()=>E(Tt())),l=N(e,"label",3,""),s=N(e,"title",3,""),h=N(e,"min",3,"1900-01-01"),m=N(e,"max",3,"2100-01-01");const d=Qe(Tt(new Date)),y=d.toString();let f=Ae(),x=F(!1),T=F(void 0),M,V=F(void 0),I=F(void 0),U=F(void 0),L=fe(()=>r()?Qe(r()):d),W=fe(()=>Qe(h())),Y=fe(()=>Qe(m())),C=F(E(mt(()=>f.common.months[n(L).month-1]))),te=fe(()=>f.common.months.findIndex(g=>g===n(C))+1),Q=F(E(mt(()=>n(L).year))),le=F(E([mt(()=>n(Q))])),re=fe(()=>or(n(L),f.lang));Le(()=>{let g=Number.parseInt(h().slice(0,4)),w=Number.parseInt(m().slice(0,4)),$=[];for(let B=g;B<=w;B++)$.push(B);u(le,E($))}),Le(()=>{if(r()){let g=mt(()=>Qe(r()));g=g.set({year:n(Q),month:n(te)}),r(g.toString())}}),Le(()=>{n(U)&&r()&&requestAnimationFrame(()=>{var w,$,B;let g=((w=n(U))==null?void 0:w.getElementsByTagName("time"))||[];for(let ce of g)if(ce.getAttribute("datetime")===r()){(B=($=ce.parentElement)==null?void 0:$.parentElement)==null||B.focus();break}})});function j(g){let w=Qe(oa(g));return w.compare(n(W))<0||w.compare(n(Y))>0?!1:n(te)===g.month}function b(){r(new nt(n(Q),n(te),1).toString())}function P(g){g.preventDefault(),u(x,!0)}function k(g,w){var $;g.preventDefault(),r(w),($=n(T))==null||$()}function K(g,w){var ce,S;let $=Qe(w),B=Qe(w);switch(g){case"left":B=$.subtract({days:1});break;case"right":B=$.add({days:1});break;case"up":B=$.subtract({weeks:1});break;case"down":B=$.add({weeks:1});break}B.month!==$.month?ir(B,f.lang)<4?(ce=n(V))==null||ce.focus():(S=n(I))==null||S.focus():r(B.toString())}function ve(g){switch(g){case"open":r()||(r(y),requestAnimationFrame(()=>pe()));break;case"closed":u(U,void 0);break}}function pe(){u(x,!(M!=null&&M.reportValidity()))}var q=mn(),H=i(q),z=i(H);ra(z),z.__keydown=[sn,e],gt(z,g=>M=g,()=>M);var O=c(z,2),Z=c(i(O),2),ie=i(Z);dr(ie,{ariaLabel:"Show Popover Example",offsetLeft:"-7.5rem",offsetTop:"-.2rem",onToggle:ve,btnInvisible:!0,lazy:!0,get close(){return n(T)},set close(g){u(T,E(g))},button:g=>{var w=on(),$=i(w);nn($,{color:"hsl(var(--text)",width:"1.2rem"}),o(w),v(g,w)},children:(g,w)=>{var $=un(),B=i($),ce=i(B),S=i(ce);la(S,{get ariaLabel(){return f.common.month},get options(){return f.common.months},maxHeight:"13rem",borderless:!0,onRight:()=>{var J;return(J=n(I))==null?void 0:J.focus()},onDown:b,get ref(){return n(V)},set ref(J){u(V,E(J))},get value(){return n(C)},set value(J){u(C,E(J))}}),o(ce);var ae=c(ce,2),he=i(ae);la(he,{get ariaLabel(){return f.common.year},get options(){return n(le)},maxHeight:"13rem",borderless:!0,onLeft:()=>{var J;return(J=n(V))==null?void 0:J.focus()},onDown:b,get ref(){return n(I)},set ref(J){u(I,E(J))},get value(){return n(Q)},set value(J){u(Q,E(J))}}),o(ae),o(B);var we=c(B,2);tt(we,21,()=>f.common.weekDaysShort,pt,(J,qe)=>{var Te=ln(),We=i(Te,!0);o(Te),D(()=>p(We,n(qe))),v(J,Te)}),o(we);var ke=c(we,2);tt(ke,21,()=>n(re),pt,(J,qe)=>{var Te=dn();tt(Te,21,()=>n(qe).days,pt,(We,Ve)=>{var Ce=vn();const xe=fe(()=>oa(n(Ve))),Xe=fe(()=>j(n(Ve)));var Je=i(Ce),Fe=fe(()=>!n(Xe));be(Je,{onclick:Re=>k(Re,n(xe)),get isDisabled(){return n(Fe)},invisible:!0,onLeft:()=>K("left",n(xe)),onRight:()=>K("right",n(xe)),onUp:()=>K("up",n(xe)),onDown:()=>K("down",n(xe)),children:(Re,dt)=>{var Me=cn(),Be=i(Me,!0);o(Me),D(()=>{R(Me,"data-today",n(xe)===y),R(Me,"data-active",n(Xe)),R(Me,"data-selected",n(xe)===r()),R(Me,"data-weekend",n(Ve).isWeekend),R(Me,"datetime",n(xe)),p(Be,n(Ve).day)}),v(Re,Me)},$$slots:{default:!0}}),o(Ce),v(We,Ce)}),o(Te),v(J,Te)}),o(ke),gt(ke,J=>u(U,J),()=>n(U)),o($),v(g,$)},$$slots:{button:!0,default:!0}}),o(Z),o(O),o(H);var G=c(H,2),de=i(G),ue=i(de,!0);o(de);var De=c(de,2);{var X=g=>{var w=hn(),$=i(w,!0);o(w),D(()=>p($,s())),Se(3,w,()=>Pt),v(g,w)};A(De,g=>{n(x)&&g(X)})}o(G),o(q),D(()=>{R(z,"id",t()),R(z,"name",e.name),R(z,"title",s()),R(z,"aria-label",s()),z.disabled=e.disabled,R(z,"aria-disabled",e.disabled),z.required=e.required,R(z,"aria-required",e.required||!1),R(z,"aria-invalid",n(x)),R(z,"min",h()),R(z,"max",m()),R(de,"for",t()),R(de,"data-required",e.required),p(ue,l())}),He("invalid",z,P),He("blur",z,()=>pe()),ta(z,r),v(a,q),ze()}ct(["keydown"]);var pn=_("<span><!></span>"),gn=_('<div class="delete svelte-1gnpmkt"><!></div>'),yn=_('<div class="container svelte-1gnpmkt"><!> <!></div>');function bn(a,e){Pe(e,!0);let t=N(e,"id",19,Ct),r=N(e,"value",31,()=>E(Tt())),l=N(e,"label",3,""),s=N(e,"title",3,""),h=N(e,"min",3,"1900-01-01"),m=N(e,"max",3,"2100-01-01"),d=Ae();var y=yn(),f=i(y);fn(f,{get id(){return t()},get name(){return e.name},get label(){return l()},get title(){return s()},get disabled(){return e.disabled},get min(){return h()},get max(){return m()},get required(){return e.required},get onEnter(){return e.onEnter},get onLeft(){return e.onLeft},get onRight(){return e.onRight},get onUp(){return e.onUp},get onDown(){return e.onDown},get value(){return r()},set value(M){r(M)}});var x=c(f,2);{var T=M=>{var V=gn(),I=i(V);be(I,{get ariaLabel(){return d.common.delete},invisible:!0,onclick:()=>r(""),children:(U,L)=>{var W=pn(),Y=i(W);Et(Y,{color:"hsla(var(--error) / .8)",width:"1.2rem"}),o(W),D(()=>R(W,"title",d.common.delete)),v(U,W)},$$slots:{default:!0}}),o(V),v(M,V)};A(x,M=>{e.withDelete&&M(T)})}o(y),v(a,y),ze()}var wn=_('<div class="success svelte-4ogr3z"><!></div>'),kn=_("<p> </p>"),Mn=_('<div class="err svelte-4ogr3z"> </div>'),$n=_('<div class="formInner svelte-4ogr3z"><div><!> <!> <!> <!></div> <div><!> <!> <!> <!> <!></div></div> <div class="bottom svelte-4ogr3z"><div><!></div> <!></div> <!>',1),_n=_('<div class="container svelte-4ogr3z"><!></div>');function Ia(a,e){var x;Pe(e,!0);let t=N(e,"user",15);(x=t().user_values)!=null&&x.birthdate||t(t().user_values.birthdate="",!0);let r=Ae(),l=F(""),s=F(!1),h=F(!1);async function m(T,M){var b;const V=M.get("email"),I=M.get("family_name")||void 0,U=M.get("given_name")||void 0,L=M.get("birthdate")||void 0,W=((b=M.get("phone"))==null?void 0:b.replaceAll(" ",""))||void 0,Y=M.get("street")||void 0,C=M.get("zip")||void 0,te=C?Number.parseInt(C):void 0,Q=M.get("city")||void 0,le=M.get("country")||void 0;let re={email:V,family_name:I,given_name:U,user_values:{birthdate:L,phone:W,street:Y,zip:te,city:Q,country:le}},j=await aa(`/auth/v1/users/${t().id}/self`,re);if(j.body){u(s,!0),t(j.body);let P=3e3;j.status===202&&(u(h,!0),P=3e4),setTimeout(()=>{u(s,!1)},P)}else j.error&&(console.error(j.error),u(l,E(j.error.message)))}var d=_n(),y=i(d),f=fe(()=>`/auth/v1/users/${t().id}/self`);lr(y,{get action(){return n(f)},onSubmit:m,children:(T,M)=>{var V=$n(),I=ne(V),U=i(I),L=i(U);Ue(L,{typ:"email",name:"email",get label(){return r.common.email},get placeholder(){return r.common.email},get value(){return t().email},required:!0});var W=c(L,2);Ue(W,{name:"given_name",autocomplete:"given-name",get label(){return r.account.givenName},get placeholder(){return r.account.givenName},get value(){return t().given_name},required:!0,maxLength:32,pattern:jt});var Y=c(W,2);Ue(Y,{name:"family_name",autocomplete:"family-name",get label(){return r.account.familyName},get placeholder(){return r.account.familyName},get value(){return t().family_name},maxLength:32,pattern:jt});var C=c(Y,2);bn(C,{name:"birthdate",get label(){return r.account.birthdate},withDelete:!0,get value(){return t().user_values.birthdate},set value(O){t(t().user_values.birthdate=O,!0)}}),o(U);var te=c(U,2),Q=i(te);Ue(Q,{name:"street",autocomplete:"street-address",get label(){return r.account.street},get placeholder(){return r.account.street},get value(){return t().user_values.street},maxLength:48,pattern:cr});var le=c(Q,2);Ue(le,{typ:"number",name:"zip",autocomplete:"postal-code",get label(){return r.account.zip},get placeholder(){return r.account.zip},get value(){return t().user_values.zip},min:"1000",max:"9999999"});var re=c(le,2);Ue(re,{name:"city",autocomplete:"address-level2",get label(){return r.account.city},get placeholder(){return r.account.city},get value(){return t().user_values.city},maxLength:48,pattern:ia});var j=c(re,2);Ue(j,{name:"country",autocomplete:"country",get label(){return r.account.country},get placeholder(){return r.account.country},get value(){return t().user_values.country},maxLength:48,pattern:ia});var b=c(j,2);Ue(b,{name:"phone",autocomplete:"tel",get label(){return r.account.phone},get placeholder(){return r.account.phone},get value(){return t().user_values.phone},maxLength:32,pattern:vr}),o(te),o(I);var P=c(I,2),k=i(P),K=i(k);be(K,{type:"submit",children:(O,Z)=>{_e();var ie=Ee();D(()=>p(ie,r.common.save)),v(O,ie)},$$slots:{default:!0}}),o(k);var ve=c(k,2);{var pe=O=>{var Z=wn(),ie=i(Z);yt(ie,{}),o(Z),Se(3,Z,()=>Ze),v(O,Z)};A(ve,O=>{n(s)&&O(pe)})}o(P);var q=c(P,2);{var H=O=>{var Z=kn(),ie=i(Z,!0);o(Z),D(()=>p(ie,r.account.emailUpdateConfirm)),v(O,Z)},z=O=>{var Z=ye(),ie=ne(Z);{var G=de=>{var ue=Mn(),De=i(ue,!0);o(ue),D(()=>p(De,n(l))),Se(3,ue,()=>Ze),v(de,ue)};A(ie,de=>{n(l)&&de(G)},!0)}v(O,Z)};A(q,O=>{n(h)?O(H):O(z,!1)})}v(T,V)},$$slots:{default:!0}}),o(d),v(a,d),ze()}var Dn=It('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function xn(a,e){let t=N(e,"opacity",3,.9),r=N(e,"width",3,24),l=N(e,"color",3,"currentColor");var s=Dn();R(s,"stroke-width",2),D(()=>{R(s,"stroke",l()),R(s,"width",r()),R(s,"opacity",t())}),v(a,s)}function In(a,e,t,r,l){e.set(a.clientY+t()),r.set(a.clientX+l())}var En=_('<div class="tooltip svelte-1pvad8v"> </div>'),qn=_('<div role="tooltip"><!> <!></div>');function Cn(a,e){Pe(e,!0);let t=N(e,"xOffset",3,10),r=N(e,"yOffset",3,10),l=F(E(e.text)),s=F(!1),h=F(void 0);const m=new Xt(0,{stiffness:.1,damping:.6}),d=new Xt(0,{stiffness:.1,damping:.6});Le(()=>{u(l,"")}),Ua(()=>{clearTimeout(n(h))});function y(){clearTimeout(n(h)),u(s,!0)}function f(){u(h,E(setTimeout(()=>{u(s,!1)},100)))}var x=qn();x.__mouseover=y,x.__mouseout=f,x.__mousemove=[In,m,r,d,t];var T=i(x);Nt(T,()=>e.children);var M=c(T,2);{var V=I=>{var U=En(),L=i(U,!0);o(U),D(()=>{R(U,"style",`top: ${`${m.current}px`??""}; left: ${`${d.current}px`??""}`),p(L,e.text)}),Se(3,U,()=>Ze,()=>({delay:400,duration:200})),v(I,U)};A(M,I=>{n(s)&&I(V)})}o(x),D(()=>R(x,"title",n(l))),He("focus",x,y),He("blur",x,f),v(a,x),ze()}ct(["mouseover","mouseout","mousemove"]);var Pn=_('<div class="err svelte-qkgdvy"><b>Your browser does not support Webauthn credentials and must be updated.</b></div>'),zn=_('<!> <div class="regBtns svelte-qkgdvy"><!> <!></div>',1),Nn=_('<div class="regNewBtn svelte-qkgdvy"><!></div>'),Tn=_('<div class="keysHeader svelte-qkgdvy"> </div>'),jn=_("<div><!></div>"),Ln=_('<div class="row svelte-qkgdvy"><div></div> <div class="deleteBtn svelte-qkgdvy"><!></div></div>'),An=_('<div class="keyContainer svelte-qkgdvy"><div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <div class="nameUv svelte-qkgdvy"><b> </b> <!></div></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <!></div>'),Wn=_('<div class="button svelte-qkgdvy"><!></div>'),Rn=_('<!> <p class="svelte-qkgdvy"> <br><br> </p> <!> <!> <div class="keysContainer svelte-qkgdvy"></div> <!> <div class="svelte-qkgdvy"> </div>',1),Bn=_('<div class="container svelte-qkgdvy"><!></div>');function Ea(a,e){Pe(e,!0);const t="credentials"in navigator;let r=Ae(),l=Jt("account"),s=fe(()=>{var j;return(j=l.get())==null?void 0:j.user_id}),h=F(void 0),m=F(!1),d=F(""),y=F(!1),f=F(e.user.account_type==="password"),x=F(void 0),T=F(""),M=F(!1),V=F(E([]));ft(()=>{U()}),Le(()=>{n(V).length>0&&e.user.account_type==="passkey"&&u(f,n(V).length>1)}),Le(()=>{var j;(j=n(h))==null||j.focus()});function I(){u(m,!1),u(d,"")}async function U(){var b;let j=await vt(`/auth/v1/users/${(b=l.get())==null?void 0:b.user_id}/webauthn`);j.body?u(V,E(j.body)):console.error(j.error)}async function L(){if(I(),n(M)||!n(s))return;if(n(T).length<1){u(m,!0),u(d,E(r.mfa.passkeyNameErr));return}let j=await pr(n(s),n(T),r.authorize.invalidKeyUsed,r.authorize.requestExpired);j.error?(u(m,!0),u(d,`${r.mfa.errorReg} - ${j.error}`)):(u(y,!1),u(T,""),await U())}async function W(j){let b=await hr(e.user.id,j);if(b.status===200)await U();else{let P=await b.json();u(m,!0),u(d,E(P.message))}}function Y(j){u(x,void 0),u(m,!0),u(d,E(j)),setTimeout(()=>{u(m,!1),u(d,"")},5e3)}function C(j){u(x,void 0),u(d,E(r.mfa.testSuccess)),setTimeout(()=>{u(d,"")},3e3)}var te=Bn(),Q=i(te);{var le=j=>{var b=Pn();v(j,b)},re=j=>{var b=Rn(),P=ne(b);{var k=X=>{ca(X,{get userId(){return e.user.id},get purpose(){return n(x)},onSuccess:C,onError:Y})};A(P,X=>{n(x)&&X(k)})}var K=c(P,2),ve=i(K),pe=c(ve,3);o(K);var q=c(K,2);{var H=X=>{var g=zn(),w=ne(g);Ue(w,{autocomplete:"off",get label(){return r.mfa.passkeyName},get placeholder(){return r.mfa.passkeyName},maxLength:32,pattern:jt,onEnter:L,get ref(){return n(h)},set ref(S){u(h,E(S))},get value(){return n(T)},set value(S){u(T,E(S))},get isError(){return n(M)},set isError(S){u(M,E(S))}});var $=c(w,2),B=i($);be(B,{onclick:L,children:(S,ae)=>{_e();var he=Ee();D(()=>p(he,r.mfa.register)),v(S,he)},$$slots:{default:!0}});var ce=c(B,2);be(ce,{level:3,onclick:()=>u(y,!1),children:(S,ae)=>{_e();var he=Ee();D(()=>p(he,r.common.cancel)),v(S,he)},$$slots:{default:!0}}),o($),v(X,g)},z=X=>{var g=Nn(),w=i(g),$=fe(()=>n(V).length===0?1:2);be(w,{get level(){return n($)},onclick:()=>u(y,!0),children:(B,ce)=>{_e();var S=Ee();D(()=>p(S,r.mfa.registerNew)),v(B,S)},$$slots:{default:!0}}),o(g),v(X,g)};A(q,X=>{n(y)?X(H):X(z,!1)})}var O=c(q,2);{var Z=X=>{var g=Tn(),w=i(g,!0);o(g),D(()=>p(w,r.mfa.registerdKeys)),v(X,g)};A(O,X=>{n(V).length>0&&X(Z)})}var ie=c(O,2);tt(ie,21,()=>n(V),X=>X.name,(X,g)=>{var w=An(),$=i(w),B=i($),ce=i(B,!0);o(B);var S=c(B,2),ae=i(S),he=i(ae,!0);o(ae);var we=c(ae,2);{var ke=Me=>{Cn(Me,{get text(){return r.account.userVerifiedTooltip},children:(Be,st)=>{var je=jn();at(je,"margin-bottom","-.25rem");var Ye=i(je);xn(Ye,{width:18,color:"var(--col-acnt)"}),o(je),v(Be,je)},$$slots:{default:!0}})};A(we,Me=>{n(g).user_verified&&Me(ke)})}o(S),o($);var J=c($,2),qe=i(J),Te=i(qe,!0);o(qe);var We=c(qe,2),Ve=i(We,!0);D(()=>p(Ve,et(n(g).registered))),o(We),o(J);var Ce=c(J,2),xe=i(Ce),Xe=i(xe,!0);o(xe);var Je=c(xe,2),Fe=i(Je,!0);D(()=>p(Fe,et(n(g).last_used))),o(Je),o(Ce);var Re=c(Ce,2);{var dt=Me=>{var Be=Ln(),st=c(i(Be),2),je=i(st);be(je,{level:-3,onclick:()=>W(n(g).name),children:(Ye,Yt)=>{_e();var ot=Ee();D(()=>p(ot,r.common.delete)),v(Ye,ot)},$$slots:{default:!0}}),o(st),o(Be),v(Me,Be)};A(Re,Me=>{n(f)&&Me(dt)})}o(w),D(()=>{p(ce,r.mfa.passkeyName),p(he,n(g).name),p(Te,r.mfa.registerd),p(Xe,r.mfa.lastUsed)}),v(X,w)}),o(ie);var G=c(ie,2);{var de=X=>{var g=Wn(),w=i(g);be(w,{onclick:()=>u(x,"Test"),children:($,B)=>{_e();var ce=Ee();D(()=>p(ce,r.mfa.test)),v($,ce)},$$slots:{default:!0}}),o(g),v(X,g)};A(G,X=>{n(V).length>0&&X(de)})}var ue=c(G,2),De=i(ue,!0);o(ue),D(()=>{p(ve,`${r.mfa.p1??""} `),p(pe,` ${r.mfa.p2??""}`),zt(ue,"success",!n(m)),zt(ue,"err",n(m)),p(De,n(d))}),v(j,b)};A(Q,j=>{t?j(re,!1):j(le)})}o(te),v(a,te),ze()}var Sn=_('<div class="container svelte-ue7bk2"><!> <!> <!> <!> <div class="btn svelte-ue7bk2"><!></div> <div class="err svelte-ue7bk2"> </div></div>');function Vn(a,e){Pe(e,!0);let t=N(e,"passwords",15),r=N(e,"hideCurrentPassword",3,!1),l=N(e,"isValid",15),s=Ae();l(T);let h=F(!1),m=F(""),d=F(void 0),y=fe(()=>{var L;return((L=t().new)==null?void 0:L.length)>6&&t().new===t().newConfirm}),f,x;ft(async()=>{let L=await vt("/auth/v1/password_policy");L.body?u(d,E(L.body)):console.error(L.error)});function T(){return u(m,""),!r()&&!t().current?(u(m,E(s.account.passwordCurrReq)),!1):t().new?t().newConfirm?n(h)?t().new.length>256?(u(m,"max 256"),!1):t().new!==t().newConfirm?(u(m,E(s.account.passwordNoMatch)),!1):!0:(u(m,E(s.account.passwordPolicyFollow)),!1):(u(m,E(s.account.passwordNewReq)),!1):(u(m,E(s.account.passwordNewReq)),!1)}function M(){if(u(m,""),n(d)){let L=Xa(n(d));t(t().new=L,!0),t(t().newConfirm=L,!0)}requestAnimationFrame(()=>{f==null||f(),x==null||x()})}var V=ye(),I=ne(V);{var U=L=>{var W=Sn(),Y=i(W);yr(Y,{get policy(){return n(d)},get password(){return t().new},get accepted(){return n(h)},set accepted(k){u(h,E(k))}});var C=c(Y,2);{var te=k=>{Lt(k,{autocomplete:"current-password",get label(){return s.account.passwordCurr},get placeholder(){return s.account.passwordCurr},onInput:T,get width(){return e.inputWidth},get value(){return t().current},set value(K){t(t().current=K,!0)}})};A(C,k=>{r()||k(te)})}var Q=c(C,2);Lt(Q,{autocomplete:"new-password",get label(){return s.account.passwordNew},get placeholder(){return s.account.passwordNew},onInput:T,get showCopy(){return n(y)},get width(){return e.inputWidth},get value(){return t().new},set value(k){t(t().new=k,!0)},get reportValidity(){return f},set reportValidity(k){f=k}});var le=c(Q,2);Lt(le,{autocomplete:"new-password",get label(){return s.account.passwordConfirm},get placeholder(){return s.account.passwordConfirm},onInput:T,get showCopy(){return n(y)},get width(){return e.inputWidth},get value(){return t().newConfirm},set value(k){t(t().newConfirm=k,!0)},get reportValidity(){return x},set reportValidity(k){x=k}});var re=c(le,2),j=i(re);be(j,{onclick:M,level:2,children:(k,K)=>{_e();var ve=Ee();D(()=>p(ve,s.account.generateRandom)),v(k,ve)},$$slots:{default:!0}}),o(re);var b=c(re,2),P=i(b,!0);o(b),o(W),D(()=>p(P,n(m))),v(L,W)};A(I,L=>{n(d)&&L(U)})}return v(a,V),ze({isPwdValid:T})}var Un=_('<div class="m-05 svelte-1h4zvzu"><p> </p> <p><b> </b></p> <div></div> <p> </p> <!></div>'),Fn=_("<p> </p> <p> </p> <p> </p> <div><!></div>",1),Yn=_('<div class="success svelte-1h4zvzu"><!></div>'),Hn=_('<div class="err"> </div>'),On=_('<div class="cancel"><!></div>'),Qn=_('<div class="convertPasskey svelte-1h4zvzu"><h3> </h3> <p> </p> <!></div>'),Kn=_('<div><!> <div class="save svelte-1h4zvzu"><!> <!></div></div> <!>',1),Zn=_('<div class="container svelte-1h4zvzu"><!> <!> <!> <!></div>');function qa(a,e){Pe(e,!0);let t=N(e,"user",15),r=Ae(),l=fe(()=>e.viewModePhone?"calc(100vw - 1.5rem)":"300px"),s=F(E(t().account_type)),h=F(E([])),m=F(void 0),d=F(!1),y=F(!1),f=F(""),x=F(!1),T=F(void 0),M=F(E({current:"",new:"",newConfirm:""})),V=fe(()=>n(h).filter(q=>q.user_verified).length>0);ft(()=>{I()});async function I(){let q=await vt(`/auth/v1/users/${t().id}/webauthn`);q.body?u(h,E(q.body)):console.error("error fetching passkeys: "+q.error)}async function U(){let q=await ea(`/auth/v1/users/${t().id}/self/convert_passkey`);q.error?console.error("error fetching passkeys: "+q.error):window.location.reload()}async function L(){u(f,""),n(h).length>0?await W():await Y()}async function W(){var q;if(!((q=n(m))!=null&&q())){u(f,E(r.common.invalidInput));return}u(T,"PasswordNew")}async function Y(q){var O,Z;if(!((O=n(m))!=null&&O())){u(f,E(r.common.invalidInput));return}u(y,!0);let H={password_new:n(M).new};q?H.mfa_code=q:H.password_current=n(M).current;let z=await aa(`/auth/v1/users/${t().id}/self`,H);z.body?(u(x,!0),u(M,E({current:"",new:"",newConfirm:""})),t(z.body),u(s,E(z.body.account_type)),setTimeout(()=>{u(x,!1),u(d,!1)},3e3)):u(f,E(((Z=z.error)==null?void 0:Z.message)||"Error")),u(y,!1)}function C(q){u(T,void 0),u(f,E(q)),setTimeout(()=>{u(f,"")},5e3)}function te(q){u(T,void 0),q&&"code"in q&&Y(q.code)}async function Q(){let q=await mr({email:t().email});if(q.ok)u(x,!0);else{let H=await q.json();u(f,E(H.message))}}var le=Zn(),re=i(le);{var j=q=>{ca(q,{get userId(){return t().id},get purpose(){return n(T)},onSuccess:te,onError:C})};A(re,q=>{n(T)&&q(j)})}var b=c(re,2);{var P=q=>{var H=Un(),z=i(H),O=i(z,!0);o(z);var Z=c(z,2),ie=i(Z),G=i(ie,!0);o(ie),o(Z);var de=c(Z,2);at(de,"height",".3rem");var ue=c(de,2),De=i(ue,!0);o(ue);var X=c(ue,2);{var g=$=>{br($,{check:!0})},w=$=>{be($,{level:2,onclick:Q,children:(B,ce)=>{_e();var S=Ee();D(()=>p(S,r.account.passwordReset)),v(B,S)},$$slots:{default:!0}})};A(X,$=>{n(x)?$(g):$(w,!1)})}o(H),D(()=>{var $;p(O,r.account.federatedConvertPassword1),p(G,(($=e.authProvider)==null?void 0:$.name)||"UNKNOWN"),p(De,r.account.federatedConvertPassword2)}),v(q,H)};A(b,q=>{n(s)==="federated"&&q(P)})}var k=c(b,2);{var K=q=>{var H=Fn(),z=ne(H),O=i(z,!0);o(z);var Z=c(z,2),ie=i(Z,!0);o(Z);var G=c(Z,2),de=i(G,!0);o(G);var ue=c(G,2),De=i(ue);be(De,{level:2,onclick:()=>u(d,!0),children:(X,g)=>{_e();var w=Ee();D(()=>p(w,r.account.convertAccount)),v(X,w)},$$slots:{default:!0}}),o(ue),D(()=>{p(O,r.account.accTypePasskeyText1),p(ie,r.account.accTypePasskeyText2),p(de,r.account.accTypePasskeyText3)}),v(q,H)};A(k,q=>{(n(s)==="passkey"||n(s)==="federated_passkey")&&!n(d)&&q(K)})}var ve=c(k,2);{var pe=q=>{var H=Kn(),z=ne(H),O=i(z),Z=fe(()=>!(n(s)==="password"&&n(h).length<1));Vn(O,{get inputWidth(){return n(l)},get hideCurrentPassword(){return n(Z)},get passwords(){return n(M)},set passwords(w){u(M,E(w))},get isValid(){return n(m)},set isValid(w){u(m,E(w))}});var ie=c(O,2),G=i(ie);be(G,{onclick:L,level:1,get isLoading(){return n(y)},children:(w,$)=>{_e();var B=Ee();D(()=>p(B,r.common.save)),v(w,B)},$$slots:{default:!0}});var de=c(G,2);{var ue=w=>{var $=Yn(),B=i($);yt(B,{}),o($),Se(3,$,()=>Ze),v(w,$)},De=w=>{var $=ye(),B=ne($);{var ce=ae=>{var he=Hn(),we=i(he,!0);o(he),D(()=>p(we,n(f))),Se(3,he,()=>Ze),v(ae,he)},S=ae=>{var he=ye(),we=ne(he);{var ke=J=>{var qe=On(),Te=i(qe);be(Te,{level:3,onclick:()=>u(d,!1),children:(We,Ve)=>{_e();var Ce=Ee();D(()=>p(Ce,r.common.cancel)),v(We,Ce)},$$slots:{default:!0}}),o(qe),v(J,qe)};A(we,J=>{n(d)&&!n(y)&&J(ke)},!0)}v(ae,he)};A(B,ae=>{n(f)?ae(ce):ae(S,!1)},!0)}v(w,$)};A(de,w=>{n(x)?w(ue):w(De,!1)})}o(ie),o(z);var X=c(z,2);{var g=w=>{var $=Qn(),B=i($),ce=i(B,!0);o(B);var S=c(B,2),ae=i(S,!0);o(S);var he=c(S,2);be(he,{level:2,onclick:U,children:(we,ke)=>{_e();var J=Ee();D(()=>p(J,r.account.convertAccount)),v(we,J)},$$slots:{default:!0}}),o($),D(()=>{p(ce,r.account.convertAccount),p(ae,r.account.convertAccountP1)}),v(w,$)};A(X,w=>{!n(d)&&n(V)&&w(g)})}v(q,H)};A(ve,q=>{(n(s)==="password"||n(s)==="federated_password"||n(d))&&q(pe)})}o(le),v(a,le),ze()}function Xn(a,e){a.code==="Enter"&&e()}var Jn=_('<div class="flex"><div class="label font-label noselect svelte-16z07u1"><!></div> <label class="switch svelte-16z07u1"><input type="checkbox" class="svelte-16z07u1"> <span class="slider slider-round svelte-16z07u1"></span></label></div>');function Ca(a,e){Pe(e,!0);let t=N(e,"checked",15,!1),r=N(e,"ariaLabel",3,""),l=N(e,"name",3,"");function s(){t(!t())}var h=Jn(),m=i(h),d=i(m);Nt(d,()=>e.children),o(m);var y=c(m,2),f=i(y);ra(f),f.__click=s,f.__keydown=[Xn,s],_e(2),o(y),o(h),D(()=>{at(m,"width",e.labelWidth),R(f,"name",l()),f.disabled=e.disabled,R(f,"aria-checked",t()),R(f,"aria-label",r())}),ar(f,t),v(a,h),ze()}ct(["click","keydown"]);function Gn(a,e){e()}function es(a,e,t){var r,l,s,h;switch(e(),a.code){case"ArrowUp":(r=t.onUp)==null||r.call(t);break;case"ArrowDown":(l=t.onDown)==null||l.call(t);break;case"ArrowLeft":(s=t.onLeft)==null||s.call(t);break;case"ArrowRight":(h=t.onRight)==null||h.call(t);break}}var ts=_('<div class="error svelte-y71ny6"> </div>'),as=_(`<div class="container svelte-y71ny6"><textarea autocomplete="off" class="svelte-y71ny6">
    </textarea> <div class="label svelte-y71ny6"><label class="font-label noselect svelte-y71ny6"> </label> <!></div></div>`);function rs(a,e){Pe(e,!0);let t=N(e,"ref",15),r=N(e,"id",19,Ct),l=N(e,"value",15,""),s=N(e,"label",3,""),h=N(e,"rows",3,3),m=N(e,"placeholder",3,""),d=N(e,"errMsg",3,""),y=N(e,"disabled",3,!1),f=N(e,"required",3,!1),x=N(e,"isError",15,!1),T=N(e,"width",3,"inherit");const M=e.pattern?new RegExp(e.pattern,"gm"):void 0;let V=fe(()=>s()||m());function I(b){var P;W(),(P=e.onBlur)==null||P.call(e)}function U(b){b.preventDefault(),x(!0)}function L(b){W()}function W(){var b,P;return M&&(l().match(M).length>2?((b=t())==null||b.setCustomValidity(d()),x(!0)):((P=t())==null||P.setCustomValidity(""),x(!1))),!0}var Y=as(),C=i(Y);Ha(C),C.__input=[Gn,W],C.__keydown=[es,W,e],gt(C,b=>t(b),()=>t());var te=c(C,2),Q=i(te),le=i(Q,!0);o(Q);var re=c(Q,2);{var j=b=>{var P=ts(),k=i(P,!0);o(P),D(()=>p(k,d())),Se(3,P,()=>Pt),v(b,P)};A(re,b=>{x()&&b(j)})}o(te),o(Y),D(()=>{at(Y,"width",T()),R(C,"id",r()),R(C,"name",e.name),R(C,"title",n(V)),R(C,"aria-label",n(V)),R(C,"rows",h()),R(C,"placeholder",m()),R(C,"aria-placeholder",m()),C.disabled=y(),R(C,"aria-disabled",y()),R(C,"maxlength",e.maxLength||void 0),C.required=f()||void 0,R(C,"aria-required",f()||!1),R(C,"aria-invalid",x()),R(Q,"for",r()),R(Q,"data-required",f()),p(le,s())}),He("submit",C,L),He("invalid",C,U),He("blur",C,I),ta(C,l),v(a,Y),ze()}ct(["input","keydown"]);var ns=_("<div><p> </p> <!></div>"),ss=_('<div class="success svelte-5kivuv"><!></div>'),os=_('<div class="err svelte-5kivuv"> </div>'),is=_('<div class="container svelte-5kivuv"><p> </p> <p><!></p> <div class="switch svelte-5kivuv"><!></div> <div class="switch svelte-5kivuv"><!></div> <!> <div class="bottom svelte-5kivuv"><!> <!></div></div>');function Pa(a,e){Pe(e,!0);let t=N(e,"webIdData",15),r=Ae();const l="14rem";let s=F(""),h=F(!1),m=F(!!t().custom_triples),d=qt(t().user_id);Le(()=>{n(h)&&setTimeout(()=>{u(h,!1)},3e3)});async function y(){u(s,"");let b=await fr(t().user_id,t());if(b.ok)u(h,!0);else{let P=await b.json();u(s,E(P.message))}}var f=is(),x=i(f),T=i(x,!0);o(x);var M=c(x,2),V=i(M);gr(V,{href:d,target:"_blank",children:(b,P)=>{var k=ye(),K=ne(k);Zt(K,()=>d.replace("/auth/","/auth/<wbr/>")),v(b,k)},$$slots:{default:!0}}),o(M);var I=c(M,2),U=i(I);Ca(U,{ariaLabel:"E-Mail",labelWidth:l,get checked(){return t().expose_email},set checked(b){t(t().expose_email=b,!0)},children:(b,P)=>{_e();var k=Ee("E-Mail");v(b,k)},$$slots:{default:!0}}),o(I);var L=c(I,2),W=i(L);Ca(W,{get ariaLabel(){return r.account.webIdExpertMode},labelWidth:l,get checked(){return n(m)},set checked(b){u(m,E(b))},children:(b,P)=>{_e();var k=Ee();D(()=>p(k,r.account.webIdExpertMode)),v(b,k)},$$slots:{default:!0}}),o(L);var Y=c(L,2);{var C=b=>{var P=ns(),k=i(P),K=i(k,!0);o(k);var ve=c(k,2);rs(ve,{placeholder:"FOAF",rows:15,get value(){return t().custom_triples},set value(pe){t(t().custom_triples=pe,!0)}}),o(P),D(()=>p(K,r.account.webIdDescData)),Se(3,P,()=>Pt),v(b,P)};A(Y,b=>{n(m)&&b(C)})}var te=c(Y,2),Q=i(te);be(Q,{onclick:y,children:(b,P)=>{_e();var k=Ee();D(()=>p(k,r.common.save)),v(b,k)},$$slots:{default:!0}});var le=c(Q,2);{var re=b=>{var P=ss(),k=i(P);yt(k,{}),o(P),Se(3,P,()=>Ze),v(b,P)},j=b=>{var P=ye(),k=ne(P);{var K=ve=>{var pe=os(),q=i(pe,!0);o(pe),D(()=>p(q,n(s))),Se(3,pe,()=>Ze),v(ve,pe)};A(k,ve=>{n(s)&&ve(K)},!0)}v(b,P)};A(le,b=>{n(h)?b(re):b(j,!1)})}o(te),o(f),D(()=>p(T,r.account.webIdDesc)),v(a,f),ze()}function ls(a){Gt(a,{viewMode:"account"})}var cs=_('<span class="font-label tab svelte-mkcuiv"> </span>'),vs=_('<div class="tabs svelte-mkcuiv"></div>');function za(a,e){Pe(e,!0);let t=N(e,"selected",15,""),r=N(e,"borderRadius",3,"5px"),l=N(e,"center",3,!1),s=N(e,"width",3,"inherit");e.tabs.length>0&&t()===""&&t(e.tabs[0]);var h=vs();tt(h,21,()=>e.tabs,pt,(m,d)=>{var y=fe(()=>n(d)===t()?"step":void 0);be(m,{get ariaCurrent(){return n(y)},invisible:!0,onclick:()=>t(n(d)),children:(f,x)=>{var T=cs(),M=i(T,!0);o(T),D(()=>{R(T,"data-selected",n(d)===t()),p(M,n(d))}),v(f,T)},$$slots:{default:!0}})}),o(h),D(()=>{zt(h,"center",l()),at(h,"border-radius",r()),at(h,"width",s())}),v(a,h),ze()}var ds=_("<h3> </h3>"),us=_('<div class="headerPhone svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="innerPhone svelte-k6hxbm"><!></div></div>',1),hs=_('<div class="header svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="inner svelte-k6hxbm"><!></div></div>',1),ms=_('<!> <div class="wrapper svelte-k6hxbm"><!></div>',1);function fs(a,e){Pe(e,!0);const t=W=>{var Y=ds(),C=i(Y,!0);o(Y),D(()=>p(C,`${r().given_name} ${r().family_name||""}`)),v(W,Y)};let r=N(e,"user",15),l=N(e,"webIdData",15),s=Ae(),h=F(void 0),m=F(E([])),d=fe(()=>{var W;if((W=r().account_type)!=null&&W.startsWith("federated"))return n(m).filter(Y=>Y.id===r().auth_provider_id)[0]}),y=fe(()=>n(h)&&n(h)<500),f=F(E(s.account.navInfo)),x=E(l()?[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,"WebID",s.account.devices,s.account.navLogout]:[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,s.account.devices,s.account.navLogout]);ft(()=>{kr("v").get()==="devices"&&u(f,E(s.account.devices))}),Le(()=>{n(f)===s.account.navLogout&&Ja()});var T=ms(),M=ne(T);wr(M,{id:Ga,get value(){return n(m)},set value(W){u(m,E(W))}});var V=c(M,2),I=i(V);{var U=W=>{var Y=us(),C=ne(Y),te=i(C);t(te),o(C);var Q=c(C,2),le=i(Q);za(le,{get tabs(){return x},get selected(){return n(f)},set selected(k){u(f,E(k))}});var re=c(le,2),j=i(re);{var b=k=>{va(k,{get providers(){return n(m)},get authProvider(){return n(d)},viewModePhone:!0,get webIdData(){return l()},get user(){return r()},set user(K){r(K)}})},P=k=>{var K=ye(),ve=ne(K);{var pe=H=>{Ia(H,{viewModePhone:!0,get user(){return r()},set user(z){r(z)}})},q=H=>{var z=ye(),O=ne(z);{var Z=G=>{qa(G,{get user(){return r()},get authProvider(){return n(d)},viewModePhone:!0})},ie=G=>{var de=ye(),ue=ne(de);{var De=g=>{Ea(g,{get user(){return r()}})},X=g=>{var w=ye(),$=ne(w);{var B=S=>{Pa(S,{get webIdData(){return l()},set webIdData(ae){l(ae)}})},ce=S=>{var ae=ye(),he=ne(ae);{var we=ke=>{Gt(ke,{viewMode:"account"})};A(he,ke=>{n(f)===s.account.devices&&ke(we)},!0)}v(S,ae)};A($,S=>{n(f)==="WebID"?S(B):S(ce,!1)},!0)}v(g,w)};A(ue,g=>{n(f)===s.account.navMfa?g(De):g(X,!1)},!0)}v(G,de)};A(O,G=>{n(f)===s.common.password?G(Z):G(ie,!1)},!0)}v(H,z)};A(ve,H=>{n(f)===s.account.navEdit?H(pe):H(q,!1)},!0)}v(k,K)};A(j,k=>{n(f)===s.account.navInfo?k(b):k(P,!1)})}o(re),o(Q),v(W,Y)},L=W=>{var Y=hs(),C=ne(Y),te=i(C);t(te),o(C);var Q=c(C,2),le=i(Q);za(le,{get tabs(){return x},center:!0,get selected(){return n(f)},set selected(k){u(f,E(k))}});var re=c(le,2),j=i(re);{var b=k=>{va(k,{get webIdData(){return l()},get providers(){return n(m)},get authProvider(){return n(d)},get user(){return r()},set user(K){r(K)}})},P=k=>{var K=ye(),ve=ne(K);{var pe=H=>{Ia(H,{get user(){return r()},set user(z){r(z)}})},q=H=>{var z=ye(),O=ne(z);{var Z=G=>{qa(G,{get user(){return r()},get authProvider(){return n(d)}})},ie=G=>{var de=ye(),ue=ne(de);{var De=g=>{Ea(g,{get user(){return r()}})},X=g=>{var w=ye(),$=ne(w);{var B=S=>{Pa(S,{get webIdData(){return l()},set webIdData(ae){l(ae)}})},ce=S=>{var ae=ye(),he=ne(ae);{var we=ke=>{ls(ke)};A(he,ke=>{n(f)===s.account.devices&&ke(we)},!0)}v(S,ae)};A($,S=>{n(f)==="WebID"?S(B):S(ce,!1)},!0)}v(g,w)};A(ue,g=>{n(f)===s.account.navMfa?g(De):g(X,!1)},!0)}v(G,de)};A(O,G=>{n(f)===s.common.password?G(Z):G(ie,!1)},!0)}v(H,z)};A(ve,H=>{n(f)===s.account.navEdit?H(pe):H(q,!1)},!0)}v(k,K)};A(j,k=>{n(f)===s.account.navInfo?k(b):k(P,!1)})}o(re),o(Q),v(W,Y)};A(I,W=>{n(y)?W(U):W(L,!1)})}o(V),Oa("innerWidth",W=>u(h,E(W))),v(a,T),ze()}var ps=_("<!> <!> <!>",1);function gs(a,e){Pe(e,!0);let t=Ae(),r=Jt("account"),l=F(void 0),s=F(void 0),h=F(!1);Le(()=>{let d=r.get();d&&m(d)});async function m(d){const y=d.user_id;if(y){let f=await Promise.all([vt(`/auth/v1/users/${y}`),vt(`/auth/v1/users/${y}/webid/data`)]);f[0].body?u(l,E(f[0].body)):er("account"),f[1].body?u(s,E(f[1].body)):f[1].status===404&&u(s,E({user_id:y,expose_email:!1})),u(h,!0)}else console.error("no user_id in session")}Ya(d=>{D(()=>{var y;return Fa.title=`${((t==null?void 0:t.account.account)||"Account")??""} ${((y=n(l))==null?void 0:y.email)??""}`})}),Mr(a,{children:(d,y)=>{$r(d,{children:(f,x)=>{var T=ps(),M=ne(T);{var V=L=>{fs(L,{get user(){return n(l)},set user(W){u(l,E(W))},get webIdData(){return n(s)},set webIdData(W){u(s,E(W))}})};A(M,L=>{n(h)&&r&&n(l)&&L(V)})}var I=c(M,2);rr(I,{absolute:!0});var U=c(I,2);ur(U,{absolute:!0}),v(f,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),ze()}export{gs as component};
