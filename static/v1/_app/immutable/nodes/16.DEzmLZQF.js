import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DtyiMpWz.js";import{p as z,i as d,a4 as A,g as e,s as $,a as F,c as L,h as n,r as O,f as G}from"../chunks/index-client.DAoU_hDn.js";import{a as S,t as B,e as ae}from"../chunks/template.DcxtE4ym.js";import{i as E}from"../chunks/if.BANCODOf.js";import{e as ie}from"../chunks/each.DTG73tix.js";import{p as t}from"../chunks/proxy.D3ASEzk3.js";import{S as N,U as ne}from"../chunks/helpers.BV-akmwW.js";import{E as le}from"../chunks/Event.CE7YDde8.js";import{b as ue}from"../chunks/fetch.m5EOWhre.js";import{O as U,S as ve}from"../chunks/Options.DfbArCXn.js";import{u as H}from"../chunks/i18n_admin.svelte.C0tjsaXn.js";import{I as J}from"../chunks/InputDateTimeCombo.B0Hj-GFF.js";import{f as me,a as de,b as K}from"../chunks/form.DXGq3I_7.js";import{p as I}from"../chunks/props.VJ8UyA45.js";import{I as pe,a as ce}from"../chunks/IconBarsArrowUp.DaMY-BXE.js";import{B as M}from"../chunks/Button.Cy8gcSM8.js";import{T as W}from"../chunks/Tooltip.BKHmBuQ7.js";import{C as fe}from"../chunks/ContentAdmin.DjjTGKTF.js";var ge=B('<div class="container svelte-5a6d30"><!> <div class="btn svelte-5a6d30"><!></div></div>');function he(y,s){z(s,!0);let p=I(s,"options",19,()=>[]),a=H(),c=d(t(p()[0])),v=d(t(s.firstDirReverse?"down":"up"));A(()=>{s.onChange(e(c),e(v))});var f=ge(),C=L(f);{var g=l=>{W(l,{get text(){return a.search.orderBy},children:(h,P)=>{U(h,{get ariaLabel(){return a.search.orderBy},get options(){return p()},get borderless(){return s.borderless},get value(){return e(c)},set value(w){n(c,t(w))}})},$$slots:{default:!0}})};E(C,l=>{p().length>1&&l(g)})}var T=$(C,2),D=L(T);{var q=l=>{M(l,{get ariaLabel(){return a.search.orderChangeToDesc},invisible:!0,onclick:()=>n(v,"down"),children:(h,P)=>{W(h,{get text(){return a.search.orderChangeToDesc},children:(w,i)=>{pe(w,{})},$$slots:{default:!0}})},$$slots:{default:!0}})},x=l=>{M(l,{get ariaLabel(){return a.search.orderChangeToAsc},invisible:!0,onclick:()=>n(v,"up"),children:(h,P)=>{W(h,{get text(){return a.search.orderChangeToAsc},children:(w,i)=>{ce(w,{})},$$slots:{default:!0}})},$$slots:{default:!0}})};E(D,l=>{e(v)==="up"?l(q):l(x,!1)})}O(T),O(f),S(y,f),F()}var be=B('<div class="container svelte-1dr1eqd"><!> <!></div>');function Ce(y,s){let p=I(s,"searchOption",15),a=I(s,"value",15),c=I(s,"searchWidth",3,"min(25rem, calc(100dvw - .5rem))");var v=be(),f=L(v);he(f,{get options(){return s.orderOptions},get onChange(){return s.onChangeOrder},get borderless(){return s.borderless},get firstDirReverse(){return s.firstDirReverse}});var C=$(f,2);ve(C,{get datalist(){return s.datalist},get options(){return s.searchOptions},get pattern(){return s.pattern},get width(){return c()},get borderless(){return s.borderless},get onSearch(){return s.onSearch},get value(){return a()},set value(g){a(g)},get option(){return p()},set option(g){p(g)}}),O(v),S(y,v)}var ye=B('<div class="row svelte-itq81i">No events found</div>'),we=B('<!> <div class="row svelte-itq81i"><!> <!></div> <div class="filters svelte-itq81i"><div class="level svelte-itq81i"><!></div> <div class="typ svelte-itq81i"><!></div></div> <!>',1);function $e(y,s){z(s,!0);let p=H(),a=d(t([])),c=d(t([])),v=d(t(me())),f=d(t(de())),C=d(""),g=d("--:--"),T=d("info"),D=d(t(N[0])),q=["IP","Content"],x=d(t(q[0])),l=d(""),h=["Timestamp","Level","Type"];A(()=>{P()}),A(()=>{let i=e(l).toLowerCase();i?e(x)===q[0]?n(c,t(e(a).filter(b=>{var u;return(u=b.ip)==null?void 0:u.includes(i)}))):e(x)===q[1]&&n(c,t(e(a).filter(b=>{var u,o;return((u=b.typ)==null?void 0:u.toLowerCase().includes(i))||((o=b.text)==null?void 0:o.toLowerCase().includes(i))}))):n(c,t(e(a)))});async function P(){let i=K(e(v),e(f));if(!i){console.error("from ts invalid",i);return}let b;e(C)&&e(g)&&(b=K(e(C),e(g)));let u={from:i,until:b,level:e(T),typ:e(D)!==N[0]?e(D):void 0},o=await ue("/auth/v1/events",u);o.body?n(a,t(o.body)):console.error(o.error)}function w(i,b){let u=b==="up";i===h[0]?e(a).sort((o,m)=>u?o.timestamp-m.timestamp:m.timestamp-o.timestamp):i===h[1]?e(a).sort((o,m)=>u?o.level.localeCompare(m.level):m.level.localeCompare(o.level)):i===h[2]&&e(a).sort((o,m)=>u?o.typ.localeCompare(m.typ):m.typ.localeCompare(o.typ))}fe(y,{children:(i,b)=>{var u=we(),o=G(u);Ce(o,{searchOptions:q,orderOptions:h,onChangeOrder:w,firstDirReverse:!0,get searchOption(){return e(x)},set searchOption(r){n(x,t(r))},get value(){return e(l)},set value(r){n(l,t(r))}});var m=$(o,2),Y=L(m);J(Y,{get label(){return p.common.from},withTime:!0,get value(){return e(v)},set value(r){n(v,t(r))},get timeValue(){return e(f)},set timeValue(r){n(f,t(r))}});var Q=$(Y,2);J(Q,{get label(){return p.common.until},withTime:!0,withDelete:!0,get value(){return e(C)},set value(r){n(C,t(r))},get timeValue(){return e(g)},set timeValue(r){n(g,t(r))}}),O(m);var R=$(m,2),_=L(R),X=L(_);U(X,{get ariaLabel(){return p.events.eventLevel},options:ne,borderless:!0,get value(){return e(T)},set value(r){n(T,t(r))}}),O(_);var j=$(_,2),Z=L(j);U(Z,{get ariaLabel(){return p.events.eventType},options:N,borderless:!0,get value(){return e(D)},set value(r){n(D,t(r))}}),O(j),O(R);var ee=$(R,2);{var re=r=>{var V=ye();S(r,V)},te=r=>{var V=ae(),se=G(V);ie(se,17,()=>e(c),k=>k.id,(k,oe)=>{le(k,{get event(){return e(oe)},inline:!0})}),S(r,V)};E(ee,r=>{e(c).length===0?r(re):r(te,!1)})}S(i,u)},$$slots:{default:!0}}),F()}function Le(y){$e(y,{})}export{Le as component};
