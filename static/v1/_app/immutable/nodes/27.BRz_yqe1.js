import"../chunks/disclose-version.BDr9Qe-U.js";import{p as W,o as z,a5 as R,a4 as p,a as A,j as o,g as c,a3 as $,n as q,$ as D,a7 as B,a8 as J,a9 as F,a6 as K}from"../chunks/index-client.Bsb9hq-M.js";import{s as Q}from"../chunks/render.Cl_nSOQQ.js";import{i as b}from"../chunks/if.Mw_hWmq0.js";import{a as s,t as g,c as _,b as S}from"../chunks/template.D54H5ZkF.js";import{h as U}from"../chunks/svelte-head.YbFS2hoE.js";import{p as d}from"../chunks/proxy.DclUEOHG.js";import{G as V,H as X}from"../chunks/helpers.Cfg4Q1a_.js";import{k as Z}from"../chunks/dataFetching.D_YOETHp.js";import{W as aa}from"../chunks/WebauthnRequest.CFGMqx9K.js";import{s as ea}from"../chunks/snippet.DdpBggvk.js";import{L as oa}from"../chunks/LangSelector.4aRmjdrU.js";import{B as ta}from"../chunks/Button.BbZR8hhL.js";import{u as ra}from"../chunks/i18n.svelte.B0RF3bDg.js";import{u as j}from"../chunks/param.svelte.CjFurolb.js";import{T as sa}from"../chunks/ThemeSwitch.Zeh_8WtX.js";var ia=g("<div><h2>Cookies disabled</h2> <p>You need to enable Cookies.<br> Without them, a safe login cannot be executed.</p></div>"),na=g("<noscript></noscript> <!>",1);function ca(y,k){W(k,!0);let x=$(!1),u=$(!1);z(()=>{o(u,d(navigator.cookieEnabled)),o(x,!0)});var t=na(),n=R(p(t),2);{var G=h=>{var e=_(),C=p(e);{var a=i=>{var l=_(),E=p(l);ea(E,()=>k.children??q),s(i,l)},r=i=>{var l=ia();s(i,l)};b(C,i=>{c(u)?i(a):i(r,!1)})}s(h,e)};b(n,h=>{c(x)&&h(G)})}s(y,t),A()}var la=g('<div class="btn flex-col svelte-1dkpwyo"><!></div>'),va=g('<div class="error svelte-1dkpwyo"> </div>'),ma=g("<!> <!> <!>",1);function fa(y,k){W(k,!0);let x=ra(),u=$(!1),t=$(""),n=$(void 0);z(async()=>{let e=j("error").get();if(e){let r=j("error_description").get();o(t,`${e}: ${r}`);return}let C={state:j("state").get(),code:j("code").get(),pkce_verifier:V(),xsrf_token:X()},a=await Z(C);if(a.status===202)window.location.replace(a.headers.get("location")||"/auth/v1/account");else if(a.status===200)o(t,""),o(n,d(await a.json()));else if(a.status===204)window.location.replace("/auth/v1/account");else if(a.status===403){let r=await a.json();console.error(r),o(t,d(r.message))}else if(a.status===406)o(t,d(x.authorize.clientForceMfa)),o(u,!0);else{let r=await a.text();o(t,`HTTP ${a.status}: ${r}`)}});function G(e){o(t,d(e||"ERROR")),o(n,void 0)}function h(e){e&&window.location.replace(e.loc)}U(e=>{D.title="Callback"}),ca(y,{children:(e,C)=>{var a=ma(),r=p(a);{var i=v=>{aa(v,{onSuccess:h,onError:G,get data(){return c(n)},set data(O){o(n,d(O))}})},l=v=>{var O=_(),M=p(O);{var N=m=>{var f=la(),H=B(f);ta(H,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(L,T)=>{J();var w=S("ACCOUNT LOGIN");s(L,w)},$$slots:{default:!0}}),F(f),s(m,f)},P=m=>{var f=_(),H=p(f);{var L=T=>{var w=va(),Y=B(w,!0);F(w),K(()=>Q(Y,c(t))),s(T,w)};b(H,T=>{c(t)&&T(L)},!0)}s(m,f)};b(M,m=>{c(u)?m(N):m(P,!1)},!0)}s(v,O)};b(r,v=>{c(n)?v(i):v(l,!1)})}var E=R(r,2);sa(E,{absolute:!0});var I=R(E,2);oa(I,{absolute:!0}),s(e,a)},$$slots:{default:!0}}),A()}export{fa as component};
