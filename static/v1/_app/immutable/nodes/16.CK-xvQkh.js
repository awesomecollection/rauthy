import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DJEB66nf.js";import{p as Q,A as n,a6 as N,a as W,y as e,z as l,f as P,s as u,c as w,r as L}from"../chunks/index-client.Di99sPv0.js";import{a as $,t as j,e as ee}from"../chunks/template.BEKX6jgL.js";import{i as te}from"../chunks/if.DgeUjMU2.js";import{e as re}from"../chunks/each.DxtmCefA.js";import{p as a}from"../chunks/proxy.BQ2dmY0t.js";import{E as z,F as ae}from"../chunks/helpers.D3KrX4pz.js";import{E as oe}from"../chunks/Event.CfdXWBcV.js";import{b as se}from"../chunks/fetch.DxJS_Pk_.js";import{O as k}from"../chunks/Options.DtWx0xTK.js";import{u as ie}from"../chunks/i18n_admin.svelte.DI6l2V4l.js";import{I as B}from"../chunks/InputDateTimeCombo.C0589-57.js";import{f as le,a as me,b as G}from"../chunks/form.DekAF1-C.js";import{O as ne}from"../chunks/OrderSearchBar.CS_Hs5DC.js";import{C as ve}from"../chunks/ContentAdmin.BWiTVMIY.js";var pe=j('<div class="row svelte-itq81i">No events found</div>'),ue=j('<!> <div class="row svelte-itq81i"><!> <!></div> <div class="filters svelte-itq81i"><div class="level svelte-itq81i"><!></div> <div class="typ svelte-itq81i"><!></div></div> <!>',1);function fe(O,H){Q(H,!0);let f=ie(),v=n(a([])),p=n(a([])),T=n(a(le())),q=n(a(me())),c=n(""),d=n("--:--"),V=n("info"),g=n(a(z[0])),y=["IP","Content"],h=n(a(y[0])),x=n(""),C=["Timestamp","Level","Type"];N(()=>{J()}),N(()=>{let o=e(x).toLowerCase();o?e(h)===y[0]?l(p,a(e(v).filter(m=>{var s;return(s=m.ip)==null?void 0:s.includes(o)}))):e(h)===y[1]&&l(p,a(e(v).filter(m=>{var s,r;return((s=m.typ)==null?void 0:s.toLowerCase().includes(o))||((r=m.text)==null?void 0:r.toLowerCase().includes(o))}))):l(p,a(e(v)))});async function J(){let o=G(e(T),e(q));if(!o){console.error("from ts invalid",o);return}let m;e(c)&&e(d)&&(m=G(e(c),e(d)));let s={from:o,until:m,level:e(V),typ:e(g)!==z[0]?e(g):void 0},r=await se("/auth/v1/events",s);r.body?l(v,a(r.body)):console.error(r.error)}function K(o,m){let s=m==="up";o===C[0]?e(v).sort((r,i)=>s?r.timestamp-i.timestamp:i.timestamp-r.timestamp):o===C[1]?e(v).sort((r,i)=>s?r.level.localeCompare(i.level):i.level.localeCompare(r.level)):o===C[2]&&e(v).sort((r,i)=>s?r.typ.localeCompare(i.typ):i.typ.localeCompare(r.typ))}ve(O,{children:(o,m)=>{var s=ue(),r=P(s);ne(r,{searchOptions:y,orderOptions:C,onChangeOrder:K,firstDirReverse:!0,get searchOption(){return e(h)},set searchOption(t){l(h,a(t))},get value(){return e(x)},set value(t){l(x,a(t))}});var i=u(r,2),A=w(i);B(A,{get label(){return f.common.from},withTime:!0,get value(){return e(T)},set value(t){l(T,a(t))},get timeValue(){return e(q)},set timeValue(t){l(q,a(t))}});var R=u(A,2);B(R,{get label(){return f.common.until},withTime:!0,withDelete:!0,get value(){return e(c)},set value(t){l(c,a(t))},get timeValue(){return e(d)},set timeValue(t){l(d,a(t))}}),L(i);var D=u(i,2),E=w(D),S=w(E);k(S,{get ariaLabel(){return f.events.eventLevel},options:ae,borderless:!0,get value(){return e(V)},set value(t){l(V,a(t))}}),L(E);var F=u(E,2),U=w(F);k(U,{get ariaLabel(){return f.events.eventType},options:z,borderless:!0,get value(){return e(g)},set value(t){l(g,a(t))}}),L(F),L(D);var X=u(D,2);{var Y=t=>{var b=pe();$(t,b)},Z=t=>{var b=ee(),_=P(b);re(_,17,()=>e(p),I=>I.id,(I,M)=>{oe(I,{get event(){return e(M)},inline:!0})}),$(t,b)};te(X,t=>{e(p).length===0?t(Y):t(Z,!1)})}$(o,s)},$$slots:{default:!0}}),W()}function ce(O){fe(O,{})}export{ce as component};
