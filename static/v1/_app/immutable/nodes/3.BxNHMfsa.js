import"../chunks/disclose-version.BDr9Qe-U.js";import{U as t,R as o,W as a,T as w,p as je,P as K,b as ia,j as v,g as e,a as Le,h as Ie,Q as le,V as re,o as Fe,$ as _t}from"../chunks/index-client.CzqVbBUo.js";import{h as xt}from"../chunks/svelte-head.BSz900xL.js";import{a as l,b as j,c as we,n as La,t as se}from"../chunks/template.C3U8HW1x.js";import{i as q,p as m}from"../chunks/if.BnegfJmL.js";import{O as Oe,a8 as wa,a9 as Nt,_ as It,P as Ct,aa as Pt,S as Dt,g as qt,u as za,v as Ut,ab as Wt,ac as jt,ad as Lt,ae as Ma,af as Ta,n as Ge,ag as Ea,ah as zt,E as Je,F as Ke,ai as Mt,A as Va,Z as Tt,aj as Et,ak as Vt,z as Rt,al as At,V as Kt,am as St,an as Ot,H as Bt,a0 as Ht,ao as Ft,a1 as Ra,ap as Gt}from"../chunks/dataFetching.BAMt2mQp.js";import{d as Aa,e as Ka,s as d,r as Jt}from"../chunks/render.DOFZNw8l.js";import{t as Te,s as _e,f as Ae,e as Qt,g as ne,B as Pe,h as Yt,a as Xt}from"../chunks/Button.65naIT6w.js";import{h as Sa,T as Zt,a as er,S as Oa,b as ar,D as tr,c as rr}from"../chunks/Devices.Nl6i4O0B.js";import{p as A,r as sr,s as nr,a as ir}from"../chunks/props.C_MHtC74.js";import{r as ba}from"../chunks/legacy-client.DtCljIS0.js";import{e as Ba}from"../chunks/OptionSelect.CIygkAfc.js";import{t as Be,s as He,b as ie}from"../chunks/helpers.BvaXa0cv.js";import{C as oa}from"../chunks/CheckIcon.DvwC4MNL.js";import{s as Ha}from"../chunks/snippet.B82X2vfx.js";import{b as Fa}from"../chunks/this.CLOcaDU7.js";import{u as Ee}from"../chunks/i18n.svelte.C_qSL0ZA.js";import{c as Qe,a as De,b as or,I as Ve}from"../chunks/Input.BRe7i--g.js";import{t as lr}from"../chunks/tweened.B25itCeH.js";import{L as Ga}from"../chunks/LangSelector.Co2kZP41.js";import{P as cr}from"../chunks/PasswordPolicy.DA8XElUB.js";import{P as ga}from"../chunks/PasswordInput.BNTSsZot.js";import{W as vr}from"../chunks/WebauthnRequest.CgI5hSPb.js";import{T as dr}from"../chunks/Template.CJON1Uel.js";import{M as ur,C as pr}from"../chunks/ContentCenter.D3vmDIv7.js";var mr=j('<div class="container svelte-1yqkxw6"><div class="loading svelte-1yqkxw6"><div class="loading-1 svelte-1yqkxw6"></div> <div class="loading-2 svelte-1yqkxw6"></div> <div class="loading-3 svelte-1yqkxw6"></div></div></div>');function Ja(S,i){let r=A(i,"background",3,!1),b=A(i,"color",3,"hsl(var(--text))"),s=A(i,"global",3,!1),p=A(i,"offset",3,0);var h=mr(),u=t(h),U=t(u),g=o(U,2),k=o(g,2);a(u),a(h),w(()=>{Be(h,"global",s()),Be(h,"local",!s()),Be(h,"background",r()),_e(u,"style",`margin-top: ${p()??""}px;`),He(U,"background",b()),He(g,"background",b()),He(k,"background",b())}),Te(3,h,()=>Ae,()=>({duration:100})),l(S,h)}var hr=j('<div class="load svelte-av2wub"><!></div>'),fr=j('<div class="font-label svelte-av2wub"><!></div>'),wr=j("<button><!></button>");function br(S,i){je(i,!0);let r=A(i,"type",3,"button"),b=A(i,"role",3,"button"),s=A(i,"ref",15),p=A(i,"level",3,1),h=A(i,"isDisabled",3,!1),u=A(i,"isLoading",3,!1),U=A(i,"invisible",3,!1),g=A(i,"invisibleOutline",3,!1),k=sr(i,["$$slots","$$events","$$legacy","type","role","ref","id","ariaLabel","ariaControls","ariaCurrent","level","width","isDisabled","isLoading","invisible","invisibleOutline","popovertarget","popovertargetaction","onclick","onLeft","onRight","onUp","onDown","children"]),M=Ie(()=>{if(U())return"invisible";switch(p()){case-1:return"l1d";case-2:return"l2d";case-3:return"l3d";case 2:return"l2";case 3:return"l3";default:return"l1"}}),N=K(!u()),H=Ie(()=>h()||u());ia(()=>{u()?setTimeout(()=>{v(N,!1)},120):setTimeout(()=>{v(N,!0)},120)});function D(){switch(p()){case-1:return"var(--btn-text)";case-2:return"hsl(var(--error))";case-3:return"hsl(var(--error))";case 2:return"hsl(var(--action))";case 3:return"hsl(var(--action))";default:return"var(--btn-text)"}}function I(C){var R,Z,J,Q,ee;switch(C.code){case"Enter":(R=i.onclick)==null||R.call(i,C);break;case"ArrowLeft":(Z=i.onLeft)==null||Z.call(i);break;case"ArrowRight":(J=i.onRight)==null||J.call(i);break;case"ArrowUp":(Q=i.onUp)==null||Q.call(i);break;case"ArrowDown":(ee=i.onDown)==null||ee.call(i);break}}var T=wr();let Y;var G=t(T);{var L=C=>{var R=hr(),Z=t(R),J=Ie(D);Ja(Z,{background:!1,get color(){return e(J)}}),a(R),l(C,R)},F=C=>{var R=we(),Z=le(R);{var J=Q=>{var ee=fr(),ae=t(ee);Ha(ae,()=>i.children),a(ee),Te(1,ee,()=>Ae),l(Q,ee)};q(Z,Q=>{e(N)&&Q(J)},!0)}l(C,R)};q(G,C=>{u()?C(L):C(F,!1)})}a(T),Fa(T,C=>s(C),()=>s()),w(()=>{Y=Qt(T,Y,{role:b(),type:r(),id:i.id,"aria-label":i.ariaLabel,"aria-controls":i.ariaControls,"aria-current":i.ariaCurrent,class:e(M),"data-isloading":u(),onclick:i.onclick,onkeydown:I,disabled:e(H),"aria-disabled":e(H),popovertarget:i.popovertarget,popovertargetaction:i.popovertargetaction,...k},"svelte-av2wub"),Be(T,"invisibleOutline",g()),He(T,"width",i.width)}),l(S,T),Le()}var gr=La('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function $r(S,i){let r=A(i,"opacity",3,.9),b=A(i,"width",3,"1.5rem"),s=A(i,"color",3,"hsl(var(--error))");var p=gr();_e(p,"stroke-width",2),w(()=>{_e(p,"width",b()),_e(p,"color",s()),_e(p,"opacity",r())}),l(S,p)}function yr(S,i,r){i()||r()}function kr(S){S.stopPropagation()}var _r=j('<span class="closeIcon svelte-1w7l4fj"><!></span>'),xr=j('<div class="relative"><div class="absolute close svelte-1w7l4fj"><!></div></div>'),Nr=j('<dialog aria-modal="true" class="svelte-1w7l4fj"><div role="none" class="svelte-1w7l4fj"><!> <!></div></dialog>');function Ir(S,i){je(i,!0);let r=A(i,"showModal",15),b=A(i,"closeModal",15),s=A(i,"strict",3,!1),p=A(i,"prerender",3,!1),h=Ee(),u;ia(()=>{b(U)}),ia(()=>{r()&&(u==null||u.showModal())});function U(I){I==null||I.preventDefault(),u==null||u.close(),r(!1)}var g=Nr();g.__click=[yr,s,U];var k=t(g);k.__click=[kr];var M=t(k);{var N=I=>{var T=xr(),Y=t(T),G=t(Y);br(G,{get ariaLabel(){return h.common.close},invisible:!0,onclick:U,children:(L,F)=>{var C=_r(),R=t(C);$r(R,{color:"currentColor",width:"1.2rem"}),a(C),l(L,C)},$$slots:{default:!0}}),a(Y),a(T),l(I,T)};q(M,I=>{s()||I(N)})}var H=o(M,2);{var D=I=>{var T=we(),Y=le(T);Ha(Y,()=>i.children),l(I,T)};q(H,I=>{(p()||r())&&I(D)})}a(k),a(g),Fa(g,I=>u=I,()=>u),w(()=>_e(g,"data-strict",s())),Ka("close",g,()=>{var I;r(!1),(I=i.onClose)==null||I.call(i)}),l(S,g),Le()}Aa(["click"]);var Cr=j('<div class="link-err value svelte-bckoh9"> </div>'),Pr=j('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),Dr=(S,i)=>v(i,!e(i)),qr=j('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),Ur=j('<p> </p> <div class="providers svelte-bckoh9"></div>',1),Wr=j('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),jr=j('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),Lr=j('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),zr=j('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Qa(S,i){je(i,!0);let r=A(i,"user",15),b=A(i,"viewModePhone",3,!1),s=Ee(),p=K(!1),h=K(!1),u=Ie(()=>{var X;return(X=r().account_type)==null?void 0:X.startsWith("federated")}),U=Ie(()=>{var X;return e(u)?`${r().account_type}: ${((X=i.authProvider)==null?void 0:X.name)||""}`:r().account_type}),g=Ie(()=>b()?"rowPhone":"row"),k=Ie(()=>b()?"labelPhone":"label");function M(X){It(64,(me,{challenge:xe,verifier:Ne})=>{me||(localStorage.setItem(Ct,Ne),N(X,xe))})}async function N(X,me){let xe={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:X,pkce_challenge:me},Ne=await Pt(X,xe);if(Ne.ok){const Ce=await Ne.text();Dt(Ce),window.location.href=Ne.headers.get("location")}else{let Ce=await Ne.json();console.error(Ce)}}async function H(){let X=await Nt(),me=await X.json();X.ok?r(me):v(p,!0)}var D=zr(),I=t(D),T=t(I),Y=t(T),G=t(Y);a(Y),a(T);var L=o(T,2),F=t(L,!0);a(L),a(I);var C=o(I,2),R=t(C),Z=t(R),J=t(Z);a(Z),a(R);var Q=o(R,2),ee=t(Q,!0);a(Q),a(C);var ae=o(C,2),ue=t(ae),O=t(ue),W=t(O);a(O),a(ue);var E=o(ue,2),y=t(E,!0);a(E),a(ae);var x=o(ae,2),$=t(x),c=t($),P=t(c);a(c),a($);var n=o($,2),_=t(n,!0);a(n),a(x);var f=o(x,2),V=t(f),te=t(V),oe=t(te);a(te),a(V);var he=o(V,2),pe=t(he),be=t(pe,!0);a(pe);var ge=o(pe,2);{var ke=X=>{var me=Pr(),xe=t(me);Pe(xe,{level:3,$$events:{click:H},children:(qe,We)=>{re();var Se=se();w(()=>d(Se,s.account.providerUnlink)),l(qe,Se)},$$slots:{default:!0}});var Ne=o(xe,2);{var Ce=qe=>{var We=Cr(),Se=t(We,!0);a(We),w(()=>d(Se,s.account.providerUnlinkDesc)),l(qe,We)};q(Ne,qe=>{e(p)&&qe(Ce)})}a(me),l(X,me)},Ue=X=>{var me=we(),xe=le(me);{var Ne=Ce=>{var qe=Wr(),We=le(qe);We.__click=[Dr,h];var Se=t(We,!0);a(We);var gt=o(We,2);Ir(gt,{get showModal(){return e(h)},set showModal(ua){v(h,m(ua))},children:(ua,fs)=>{var qa=Ur(),pa=le(qa),$t=t(pa,!0);a(pa);var Ua=o(pa,2);Ba(Ua,21,()=>i.providers,ma=>ma.id,(ma,ha)=>{Pe(ma,{level:3,$$events:{click:()=>M(e(ha).id)},children:(yt,ws)=>{var fa=qr(),Wa=t(fa),ja=o(Wa,2),kt=t(ja,!0);a(ja),a(fa),w(()=>{_e(Wa,"src",`/auth/v1/providers/${e(ha).id}/img`),d(kt,e(ha).name)}),l(yt,fa)},$$slots:{default:!0}})}),a(Ua),w(()=>d($t,s.account.providerLinkDesc)),l(ua,qa)},$$slots:{default:!0}}),w(()=>d(Se,s.account.providerLink)),Ka("keypress",We,()=>v(h,!e(h))),l(Ce,qe)};q(xe,Ce=>{i.providers.length>0&&Ce(Ne)},!0)}l(X,me)};q(ge,X=>{e(u)?X(ke):X(Ue,!1)})}a(he),a(f);var $e=o(f,2),z=t($e),ce=t(z),ve=t(ce);a(ce),a(z);var ye=o(z,2),de=t(ye,!0);a(ye),a($e);var B=o($e,2),fe=t(B),Re=t(fe),ze=t(Re);a(Re),a(fe);var Me=o(fe,2),la=t(Me,!0);a(Me),a(B);var ca=o(B,2),Ye=t(ca),$a=t(Ye),rt=t($a);a($a),a(Ye);var st=o(Ye,2),nt=Ie(()=>!!r().webauthn_user_id);oa(st,{get check(){return e(nt)}}),a(ca);var va=o(ca,2),Xe=t(va),ya=t(Xe),it=t(ya);a(ya),a(Xe);var ot=o(Xe,2);oa(ot,{get check(){return r().enabled}}),a(va);var da=o(va,2),Ze=t(da),ka=t(Ze),lt=t(ka);a(ka),a(Ze);var ct=o(Ze,2);oa(ct,{get check(){return r().email_verified}}),a(da);var ea=o(da,2),aa=t(ea),_a=t(aa),vt=t(_a);a(_a),a(aa);var xa=o(aa,2),dt=t(xa,!0);w(()=>d(dt,Oe(r().last_login))),a(xa),a(ea);var ta=o(ea,2),ra=t(ta),Na=t(ra),ut=t(Na);a(Na),a(ra);var Ia=o(ra,2),pt=t(Ia,!0);w(()=>d(pt,r().password_expires&&Oe(r().password_expires)||s.common.never)),a(Ia),a(ta);var sa=o(ta,2),na=t(sa),Ca=t(na),mt=t(Ca);a(Ca),a(na);var Pa=o(na,2),ht=t(Pa,!0);w(()=>d(ht,Oe(r().created_at))),a(Pa),a(sa);var Da=o(sa,2);{var ft=X=>{var me=jr(),xe=t(me),Ne=t(xe),Ce=t(Ne);a(Ne),a(xe);var qe=o(xe,2),We=t(qe,!0);w(()=>d(We,Oe(r().user_expires))),a(qe),a(me),w(()=>{ie(me,ne(e(g)),"svelte-bckoh9"),ie(xe,ne(e(k)),"svelte-bckoh9"),d(Ce,`${s.account.userExpiry??""}:`)}),l(X,me)};q(Da,X=>{r().user_expires&&X(ft)})}var wt=o(Da,2);{var bt=X=>{var me=Lr(),xe=t(me),Ne=o(xe,2),Ce=t(Ne);w(()=>_e(Ce,"href",wa(r().id)));var qe=t(Ce);Sa(qe,()=>wa(r().id).replace("/auth/","/auth/<wbr/>")),a(Ce),a(Ne),a(me),w(()=>{ie(me,ne(e(g)),"svelte-bckoh9"),ie(xe,ne(e(k)),"svelte-bckoh9")}),l(X,me)};q(wt,X=>{i.webIdData&&X(bt)})}a(D),w(()=>{ie(I,ne(e(g)),"svelte-bckoh9"),ie(T,ne(e(k)),"svelte-bckoh9"),d(G,`${s.common.email??""}:`),d(F,r().email),ie(C,ne(e(g)),"svelte-bckoh9"),ie(R,ne(e(k)),"svelte-bckoh9"),d(J,`${s.account.givenName??""}:`),d(ee,r().given_name),ie(ae,ne(e(g)),"svelte-bckoh9"),ie(ue,ne(e(k)),"svelte-bckoh9"),d(W,`${s.account.familyName??""}:`),d(y,r().family_name),ie(x,ne(e(g)),"svelte-bckoh9"),ie($,ne(e(k)),"svelte-bckoh9"),d(P,`${s.account.user??""} ID:`),d(_,r().id),ie(f,ne(e(g)),"svelte-bckoh9"),ie(V,ne(e(k)),"svelte-bckoh9"),d(oe,`${s.account.accType??""}:`),d(be,e(U)||""),ie($e,ne(e(g)),"svelte-bckoh9"),ie(z,ne(e(k)),"svelte-bckoh9"),d(ve,`${s.account.roles??""}:`),d(de,r().roles||"None"),ie(B,ne(e(g)),"svelte-bckoh9"),ie(fe,ne(e(k)),"svelte-bckoh9"),d(ze,`${s.account.groups??""}:`),d(la,r().groups||"None"),ie(Ye,ne(e(k)),"svelte-bckoh9"),d(rt,`${s.account.mfaActivated??""}:`),ie(Xe,ne(e(k)),"svelte-bckoh9"),d(it,`${s.account.userEnabled??""}:`),ie(Ze,ne(e(k)),"svelte-bckoh9"),d(lt,`${s.account.emailVerified??""}:`),ie(ea,ne(e(g)),"svelte-bckoh9"),ie(aa,ne(e(k)),"svelte-bckoh9"),d(vt,`${s.account.lastLogin??""}:`),ie(ta,ne(e(g)),"svelte-bckoh9"),ie(ra,ne(e(k)),"svelte-bckoh9"),d(ut,`${s.account.passwordExpiry??""}:`),ie(sa,ne(e(g)),"svelte-bckoh9"),ie(na,ne(e(k)),"svelte-bckoh9"),d(mt,`${s.account.userCreated??""}:`)}),l(S,D),Le()}Aa(["click"]);function Ya(S,i){je(i,!0);let r=A(i,"selected",15),b=A(i,"showWebId",3,!1),s=Ee(),p=m(b()?[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,"WebID",s.account.devices,s.account.navLogout]:[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,s.account.devices,s.account.navLogout]);Fe(()=>{qt().v==="devices"&&r(s.account.devices)}),Zt(S,{get labels(){return p},get selected(){return r()},set selected(h){r(h)}}),Le()}var Mr=j("<p> </p>"),Tr=j('<div class="success svelte-1xh7x72">Update successful <!></div>'),Er=j('<div class="err svelte-1xh7x72"> </div>'),Vr=j('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Xa(S,i){je(i,!0);let r=A(i,"user",31,()=>m({})),b=A(i,"viewModePhone",3,!1),s=Ee(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="8rem";let u=K(!1),U=K(""),g=K(!1),k=K(!1),M=m({email:r().email,givenName:r().given_name,familyName:r().family_name}),N=K(m({}));const H=Qe().shape({email:De().required(s.account.validEmail).email(s.account.validEmail),givenName:De().required(s.account.validGivenName).matches(za,s.account.validGivenName),familyName:De().nullable().matches(Ut,s.account.validFamilyName)});let D=K(m({}));const I=Qe().shape({birthdate:De().nullable().trim().matches(Wt,s.common.invalidInput),phone:De().nullable().trim().matches(jt,"+..."),street:De().nullable().trim().matches(Lt,s.common.invalidInput),zip:or().nullable().min(1e3).max(999999),city:De().nullable().trim().matches(Ma,s.common.invalidInput),country:De().nullable().trim().matches(Ma,s.common.invalidInput)});function T(n){n.code==="Enter"&&Y()}async function Y(){if(!await G()){v(U,m(s.common.invalidInput));return}v(u,!0);const n={email:M.email,given_name:M.givenName,family_name:M.familyName||null,user_values:r().user_values};n.user_values.phone&&(n.user_values.phone=n.user_values.phone.replaceAll(" ","")),n.user_values.zip&&(n.user_values.zip=Number.parseInt(n.user_values.zip));let _=await Ta(r().id,n);if(_.ok)v(g,!0),r(r().email=M.email,!0),r(r().given_name=M.givenName,!0),r(r().family_name=M.familyName,!0),_.status===202&&v(k,!0);else{let f=await _.json();v(U,m(f.message))}v(u,!1)}async function G(){let n=!0;try{await H.validate(M,{abortEarly:!1}),v(N,m({}))}catch(_){v(N,m(Ge(_))),n=!1}try{await I.validate(r().user_values,{abortEarly:!1}),v(D,m({}))}catch(_){v(D,m(Ge(_))),n=!1}return n}var L=Vr(),F=t(L),C=t(F);Ve(C,{autocomplete:"family-name",get placeholder(){return s.common.email},get width(){return e(p)},get value(){return M.email},set value(n){M.email=n},get error(){return e(N).email},set error(n){e(N).email=n},$$events:{input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.common.email.toUpperCase())),l(n,f)},$$slots:{default:!0}});var R=o(C,2);Ve(R,{autocomplete:"given-name",get placeholder(){return s.account.givenName},get width(){return e(p)},get value(){return M.givenName},set value(n){M.givenName=n},get error(){return e(N).givenName},set error(n){e(N).givenName=n},$$events:{input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.givenName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var Z=o(R,2);Ve(Z,{autocomplete:"family-name",get placeholder(){return s.account.familyName},get width(){return e(p)},get value(){return M.familyName},set value(n){M.familyName=n},get error(){return e(N).familyName},set error(n){e(N).familyName=n},$$events:{input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.familyName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var J=o(Z,2);He(J,"margin",".5rem");var Q=t(J,!0);a(J);var ee=o(J,2);Ve(ee,{autocomplete:"street-address",get placeholder(){return s.account.street},get width(){return e(p)},get value(){return r().user_values.street},set value(n){r(r().user_values.street=n,!0)},get error(){return e(D).street},set error(n){e(D).street=n},$$events:{keypress:T,input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.street.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ae=o(ee,2);Ve(ae,{type:"number",autocomplete:"postal-code",get placeholder(){return s.account.zip},min:1e3,max:999999,get width(){return e(p)},get value(){return r().user_values.zip},set value(n){r(r().user_values.zip=n,!0)},get error(){return e(D).zip},set error(n){e(D).zip=n},$$events:{keypress:T,input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.zip.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ue=o(ae,2);Ve(ue,{autocomplete:"adress-level2",get placeholder(){return s.account.city},get width(){return e(p)},get value(){return r().user_values.city},set value(n){r(r().user_values.city=n,!0)},get error(){return e(D).city},set error(n){e(D).city=n},$$events:{keypress:T,input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.city.toUpperCase())),l(n,f)},$$slots:{default:!0}});var O=o(ue,2);Ve(O,{autocomplete:"country",get placeholder(){return s.account.country},get width(){return e(p)},get value(){return r().user_values.country},set value(n){r(r().user_values.country=n,!0)},get error(){return e(D).country},set error(n){e(D).country=n},$$events:{keypress:T,input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.country.toUpperCase())),l(n,f)},$$slots:{default:!0}});var W=o(O,2);Ve(W,{autocomplete:"tel",get placeholder(){return s.account.phone},get width(){return e(p)},get value(){return r().user_values.phone},set value(n){r(r().user_values.phone=n,!0)},get error(){return e(D).phone},set error(n){e(D).phone=n},$$events:{keypress:T,input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.phone.toUpperCase())),l(n,f)},$$slots:{default:!0}});var E=o(W,2);Ve(E,{type:"date",autocomplete:"bday",get placeholder(){return s.account.birthdate},get width(){return e(p)},get value(){return r().user_values.birthdate},set value(n){r(r().user_values.birthdate=n,!0)},get error(){return e(D).birthdate},set error(n){e(D).birthdate=n},$$events:{keypress:T,input:G},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.birthdate.toUpperCase())),l(n,f)},$$slots:{default:!0}});var y=o(E,2);Pe(y,{width:h,level:1,get isLoading(){return e(u)},set isLoading(n){v(u,m(n))},$$events:{click:Y},children:(n,_)=>{re();var f=se();w(()=>d(f,s.common.save)),l(n,f)},$$slots:{default:!0}});var x=o(y,2),$=t(x);{var c=n=>{var _=Tr(),f=o(t(_));{var V=te=>{var oe=Mr(),he=t(oe,!0);a(oe),w(()=>d(he,s.account.emailUpdateConfirm)),l(te,oe)};q(f,te=>{e(k)&&te(V)})}a(_),Te(3,_,()=>Ae),l(n,_)},P=n=>{var _=we(),f=le(_);{var V=te=>{var oe=Er(),he=t(oe,!0);a(oe),w(()=>d(he,e(U))),Te(3,oe,()=>Ae),l(te,oe)};q(f,te=>{e(U)&&te(V)},!0)}l(n,_)};q($,n=>{e(g)?n(c):n(P,!1)})}a(x),a(F),a(L),w(()=>d(Q,s.account.optionalValues)),l(S,L),Le()}var Rr=La('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Ar(S,i){let r=A(i,"opacity",3,.9),b=A(i,"width",3,24),s=A(i,"color",3,"currentColor");var p=Rr();_e(p,"stroke-width",2),w(()=>{_e(p,"stroke",s()),_e(p,"width",b()),_e(p,"opacity",r())}),l(S,p)}var Kr=j('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),Sr=j('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Or=j('<div class="keysHeader svelte-q7vfo0"> </div>'),Br=j("<div><!></div>"),Hr=j('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Fr=j('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Gr=j('<div class="button svelte-q7vfo0"><!></div>'),Jr=j('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Za(S,i){je(i,!0);let r=A(i,"user",19,()=>({})),b=Ee(),s=K(!1),p=K(""),h=K(!1),u=K(r().account_type==="password"),U=K(m([]));ba(()=>{e(U).length>0&&r().account_type==="passkey"&&v(u,e(U).length>1)});let g=m({passkeyName:""}),k=K(m({}));const M=Qe().shape({passkeyName:De().required(b.common.invalidInput).matches(za,b.mfa.passkeyNameErr)});Fe(()=>{H()});function N(){v(s,!1),v(p,"")}async function H(){let y=await Ea(i.session.user_id),x=await y.json();y.ok?v(U,m(x)):console.error("error fetching passkeys: "+x.message)}async function D(){if(N(),!await Y())return;const y=g.passkeyName;if(y.length<2){v(s,!0),v(p,m(b.mfa.passkeyNameErr));return}let x=await zt(r().id,{passkey_name:y});if(x.status===200){let $=await x.json();$.publicKey.challenge=Je($.publicKey.challenge),$.publicKey.user.id=Je($.publicKey.user.id),$.publicKey.excludeCredentials=$.publicKey.excludeCredentials,$.publicKey.excludeCredentials&&($.publicKey.excludeCredentials=$.publicKey.excludeCredentials.map(n=>(n.id=Je(n.id),n)));let c=await navigator.credentials.create($),P={passkey_name:y,data:{id:c.id,rawId:Ke(c.rawId),response:{attestationObject:Ke(c.response.attestationObject),clientDataJSON:Ke(c.response.clientDataJSON)},type:c.type}};x=await Mt(r().id,P),x.status===201?(v(h,!1),g.passkeyName="",await H()):console.error(x)}else v(s,!0),v(p,m(b.mfa.errorReg))}async function I(){N();let y=await Va(r().id,{purpose:"Test"});if(y.status===200){let x=await y.json(),$=x.rcr;$.publicKey.challenge=Je($.publicKey.challenge);for(let n of $.publicKey.allowCredentials)n.id=Je(n.id);let c;try{c=await navigator.credentials.get($)}catch{v(s,!0),v(p,m(b.mfa.invalidKeyUsed));return}let P={code:x.code,data:{id:c.id,rawId:Ke(c.rawId),response:{authenticatorData:Ke(c.response.authenticatorData),clientDataJSON:Ke(c.response.clientDataJSON),signature:Ke(c.response.signature)},type:c.type}};y=await Tt(r().id,P),y.status===202?(v(p,m(b.mfa.testSuccess)),await H()):console.error(y)}else v(s,!0),v(p,m(b.mfa.testError))}async function T(y){let x=await Et(r().id,y);if(x.status===200)await H();else{let $=await x.json();v(s,!0),v(p,m($.message))}}async function Y(){try{return await M.validate(g,{abortEarly:!1}),v(k,m({})),!0}catch(y){return v(k,m(Ge(y))),!1}}var G=Jr(),L=t(G),F=t(L),C=o(F,3);a(L);var R=o(L,2);{var Z=y=>{var x=Kr(),$=le(x);Ve($,{autocomplete:"off",get placeholder(){return b.mfa.passkeyName},autofocus:!0,get value(){return g.passkeyName},set value(_){g.passkeyName=_},get error(){return e(k).passkeyName},set error(_){e(k).passkeyName=_},$$events:{input:Y,enter:D},children:(_,f)=>{re();var V=se();w(()=>d(V,b.mfa.passkeyName)),l(_,V)},$$slots:{default:!0}});var c=o($,2),P=t(c);Pe(P,{level:1,$$events:{click:D},children:(_,f)=>{re();var V=se();w(()=>d(V,b.mfa.register)),l(_,V)},$$slots:{default:!0}});var n=o(P,2);Pe(n,{level:4,$$events:{click:()=>v(h,!1)},children:(_,f)=>{re();var V=se();w(()=>d(V,b.common.cancel)),l(_,V)},$$slots:{default:!0}}),a(c),l(y,x)},J=y=>{var x=Sr(),$=t(x);Pe($,{level:3,$$events:{click:()=>v(h,!0)},children:(c,P)=>{re();var n=se();w(()=>d(n,b.mfa.registerNew)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};q(R,y=>{e(h)?y(Z):y(J,!1)})}var Q=o(R,2);{var ee=y=>{var x=Or(),$=t(x,!0);a(x),w(()=>d($,b.mfa.registerdKeys)),l(y,x)};q(Q,y=>{e(U).length>0&&y(ee)})}var ae=o(Q,2);Ba(ae,21,()=>e(U),y=>y.name,(y,x)=>{var $=Fr(),c=t($),P=t(c),n=o(P),_=t(n),f=t(_,!0);a(_);var V=o(_,2);{var te=ve=>{er(ve,{get text(){return b.account.userVerifiedTooltip},children:(ye,de)=>{var B=Br();He(B,"margin-bottom","-.25rem");var fe=t(B);Ar(fe,{width:18,color:"var(--col-acnt)"}),a(B),l(ye,B)},$$slots:{default:!0}})};q(V,ve=>{e(x).user_verified&&ve(te)})}a(n),a(c);var oe=o(c,2),he=t(oe),pe=o(he),be=t(pe,!0);w(()=>d(be,Oe(e(x).registered))),a(pe),a(oe);var ge=o(oe,2),ke=t(ge),Ue=o(ke),$e=t(Ue,!0);w(()=>d($e,Oe(e(x).last_used))),a(Ue),a(ge);var z=o(ge,2);{var ce=ve=>{var ye=Hr(),de=o(t(ye),2),B=t(de);Pe(B,{level:4,$$events:{click:()=>T(e(x).name)},children:(fe,Re)=>{re();var ze=se();w(()=>d(ze,b.mfa.delete.toUpperCase())),l(fe,ze)},$$slots:{default:!0}}),a(de),a(ye),l(ve,ye)};q(z,ve=>{e(u)&&ve(ce)})}a($),w(()=>{d(P,`${`${b.mfa.passkeyName}: `??""} `),d(f,e(x).name),d(he,`${`${b.mfa.registerd}: `??""} `),d(ke,`${`${b.mfa.lastUsed}: `??""} `)}),l(y,$)}),a(ae);var ue=o(ae,2);{var O=y=>{var x=Gr(),$=t(x);Pe($,{level:1,$$events:{click:I},children:(c,P)=>{re();var n=se();w(()=>d(n,b.mfa.test)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};q(ue,y=>{e(U).length>0&&y(O)})}var W=o(ue,2),E=t(W,!0);a(W),a(G),w(()=>{d(F,`${b.mfa.p1??""} `),d(C,` ${b.mfa.p2??""}`),Be(W,"msg",!e(s)),Be(W,"err",e(s)),d(E,e(p))}),l(S,G),Le()}var Qr=j('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Yr(S,i){je(i,!0);let r=A(i,"formValues",31,()=>m({})),b=A(i,"btnWidth",3,"4rem"),s=A(i,"hideCurrentPassword",3,!1),p=A(i,"isValid",15),h=Ee();p(D);let u=K(!1),U=K(""),g=K(void 0),k=K(m({})),M=Ie(()=>{var L;return((L=r().new)==null?void 0:L.length)>6&&r().new===r().verify});const N=Qe().shape({current:De().required(h.account.passwordCurrReq),new:De().required(h.account.passwordNewReq),verify:De().required(h.account.passwordNoMatch)}),H=Qe().shape({new:De().required(h.account.passwordNewReq),verify:De().required(h.account.passwordNoMatch)});Fe(async()=>{let L=await Vt(),F=await L.json();L.ok?v(g,m(F)):v(U,m(F.message))});async function D(){if(v(U,""),s())try{await H.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(L){return v(k,m(Ge(L))),!1}else try{await N.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(L){return v(k,m(Ge(L))),!1}return e(u)?r().new.length>256?(v(U,"max 256"),!1):r().new!==r().verify?(v(U,m(h.account.passwordNoMatch)),!1):!0:(v(U,m(h.account.passwordPolicyFollow)),!1)}function I(){const L=e(g).length_min>20?e(g).length_min:20;let F=Rt(L,e(g).include_lower_case,e(g).include_upper_case,e(g).include_digits,e(g).include_special);r(r().new=F,!0),r(r().verify=F,!0)}var T=we(),Y=le(T);{var G=L=>{var F=Qr(),C=t(F);cr(C,{t:h,get policy(){return e(g)},get password(){return r().new},get accepted(){return e(u)},set accepted(O){v(u,m(O))}});var R=o(C,2);{var Z=O=>{ga(O,{get error(){return e(k).current},autocomplete:"current-password",get placeholder(){return h.account.passwordCurr},get width(){return i.inputWidth},get value(){return r().current},set value(W){r(r().current=W,!0)},$$events:{input:D},children:(W,E)=>{re();var y=se();w(()=>d(y,h.account.passwordCurr.toUpperCase())),l(W,y)},$$slots:{default:!0}})};q(R,O=>{s()||O(Z)})}var J=o(R,2);ga(J,{get error(){return e(k).new},autocomplete:"new-password",get placeholder(){return h.account.passwordNew},get showCopy(){return e(M)},get width(){return i.inputWidth},get value(){return r().new},set value(O){r(r().new=O,!0)},$$events:{input:D},children:(O,W)=>{re();var E=se();w(()=>d(E,h.account.passwordNew.toUpperCase())),l(O,E)},$$slots:{default:!0}});var Q=o(J,2);ga(Q,{get error(){return e(k).verify},autocomplete:"new-password",get placeholder(){return h.account.passwordConfirm},get showCopy(){return e(M)},get width(){return i.inputWidth},get value(){return r().verify},set value(O){r(r().verify=O,!0)},$$events:{input:D},children:(O,W)=>{re();var E=se();w(()=>d(E,h.account.passwordConfirm.toUpperCase())),l(O,E)},$$slots:{default:!0}});var ee=o(Q,2);Pe(ee,{level:2,get width(){return b()},$$events:{click:I},children:(O,W)=>{re();var E=se();w(()=>d(E,h.account.generateRandom)),l(O,E)},$$slots:{default:!0}});var ae=o(ee,2),ue=t(ae,!0);a(ae),a(F),w(()=>d(ue,e(U))),l(L,F)};q(Y,L=>{e(g)&&L(G)})}return l(S,T),Le({isPwdValid:D})}var Xr=j('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Zr=j('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),es=j("<div><!></div>"),as=j('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),ts=j('<div class="success svelte-od1aaa">Update successful</div>'),rs=j('<div class="err svelte-od1aaa"> </div>'),ss=j('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),ns=j('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function et(S,i){je(i,!0);let r=A(i,"user",19,()=>({})),b=A(i,"viewModePhone",3,!1),s=Ee(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="13rem";let u=r().account_type,U=K(m([])),g=K(void 0),k=K(!1),M=K(!1),N=K(""),H=K(!1),D=K(void 0),I=K(m({current:"",new:"",verify:""})),T=Ie(()=>e(U).filter(c=>c.user_verified).length>0);Fe(()=>{Y()});async function Y(){let c=await Ea(r().id),P=await c.json();c.ok?v(U,m(P)):console.error("error fetching passkeys: "+P.message)}async function G(){let c=await At(r().id);if(c.ok)window.location.reload();else{let P=await c.json();console.error("error fetching passkeys: "+P.message)}}async function L(){e(U).length>0?await F():await C()}async function F(){if(!await e(g)()){v(N,m(s.common.invalidInput));return}const c=await Va(r().id,{purpose:"PasswordNew"});v(D,m(await c.json()))}async function C(c){if(!await e(g)()){v(N,m(s.common.invalidInput));return}v(M,!0);let P={password_new:e(I).new};c?P.mfa_code=c:P.password_current=e(I).current;let n=await Ta(r().id,P);if(n.ok)v(H,!0),v(I,m({})),window.location.reload();else{let _=await n.json();v(N,m(_.message))}v(M,!1)}function R(){v(D,void 0),v(N,m(s.mfa.errorReg))}function Z(c){c&&(v(D,void 0),C(c.code))}async function J(){let c=await Kt({email:r().email});if(c.ok)v(H,!0);else{let P=await c.json();v(N,m(P.message))}}var Q=ns(),ee=t(Q),ae=t(ee);{var ue=c=>{vr(c,{purpose:"PasswordNew",onSuccess:Z,onError:R,get data(){return e(D)},set data(P){v(D,m(P))}})};q(ae,c=>{e(D)&&c(ue)})}var O=o(ae,2);{var W=c=>{var P=Xr(),n=t(P),_=t(n,!0);a(n);var f=o(n,2),V=t(f),te=t(V,!0);a(V),a(f);var oe=o(f,2),he=t(oe,!0);a(oe);var pe=o(oe,2);{var be=ke=>{oa(ke,{check:!0})},ge=ke=>{Pe(ke,{width:h,level:3,$$events:{click:J},children:(Ue,$e)=>{re();var z=se();w(()=>d(z,s.account.passwordReset)),l(Ue,z)},$$slots:{default:!0}})};q(pe,ke=>{e(H)?ke(be):ke(ge,!1)})}a(P),w(()=>{d(_,s.account.federatedConvertPassword1),d(te,i.authProvider.name||"UNKNOWN"),d(he,s.account.federatedConvertPassword2)}),l(c,P)};q(O,c=>{u==="federated"&&c(W)})}var E=o(O,2);{var y=c=>{var P=Zr(),n=le(P),_=t(n,!0);a(n);var f=o(n,2),V=t(f,!0);a(f);var te=o(f,2),oe=t(te,!0);a(te);var he=o(te,2);Pe(he,{width:h,level:3,$$events:{click:()=>v(k,!0)},children:(pe,be)=>{re();var ge=se();w(()=>d(ge,s.account.convertAccount)),l(pe,ge)},$$slots:{default:!0}}),w(()=>{d(_,s.account.accTypePasskeyText1),d(V,s.account.accTypePasskeyText2),d(oe,s.account.accTypePasskeyText3)}),l(c,P)};q(E,c=>{(u==="passkey"||u==="federated_passkey")&&!e(k)&&c(y)})}var x=o(E,2);{var $=c=>{var P=ss(),n=le(P),_=t(n),f=Ie(()=>!(u==="password"&&e(U).length<1));Yr(_,{btnWidth:h,get inputWidth(){return e(p)},get hideCurrentPassword(){return e(f)},get formValues(){return e(I)},set formValues(z){v(I,m(z))},get isValid(){return e(g)},set isValid(z){v(g,m(z))}});var V=o(_,2),te=t(V);Pe(te,{width:h,level:1,get isLoading(){return e(M)},set isLoading(z){v(M,m(z))},$$events:{click:L},children:(z,ce)=>{re();var ve=se();w(()=>d(ve,s.common.save)),l(z,ve)},$$slots:{default:!0}}),a(V);var oe=o(V,2);{var he=z=>{var ce=es(),ve=t(ce);Pe(ve,{width:h,level:4,$$events:{click:()=>v(k,!1)},children:(ye,de)=>{re();var B=se();w(()=>d(B,s.common.cancel)),l(ye,B)},$$slots:{default:!0}}),a(ce),l(z,ce)};q(oe,z=>{e(k)&&!e(M)&&z(he)})}a(n);var pe=o(n,2);{var be=z=>{var ce=as(),ve=t(ce),ye=t(ve,!0);a(ve);var de=o(ve,2),B=t(de,!0);a(de);var fe=o(de,2);Pe(fe,{width:h,level:3,$$events:{click:G},children:(Re,ze)=>{re();var Me=se();w(()=>d(Me,s.account.convertAccount)),l(Re,Me)},$$slots:{default:!0}}),a(ce),w(()=>{d(ye,s.account.convertAccount),d(B,s.account.convertAccountP1)}),l(z,ce)};q(pe,z=>{!e(k)&&e(T)&&z(be)})}var ge=o(pe,2),ke=t(ge);{var Ue=z=>{var ce=ts();Te(3,ce,()=>Ae),l(z,ce)},$e=z=>{var ce=we(),ve=le(ce);{var ye=de=>{var B=rs(),fe=t(B,!0);a(B),w(()=>d(fe,e(N))),Te(3,B,()=>Ae),l(de,B)};q(ve,de=>{e(N)&&de(ye)},!0)}l(z,ce)};q(ke,z=>{e(H)?z(Ue):z($e,!1)})}a(ge),Te(1,n,()=>Yt,()=>({duration:350})),l(c,P)};q(x,c=>{(u==="password"||u==="federated_password"||e(k))&&c($)})}a(ee),a(Q),l(S,Q),Le()}var is=j('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),os=j('<div class="success svelte-naxx27">Update successful</div>'),ls=j('<div class="err svelte-naxx27"> </div>'),cs=j('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function at(S,i){je(i,!0);let r=A(i,"webIdData",15),b=Ee();const s="12rem";let p=K(""),h=K(!1),u=K(!!r().custom_triples),U=wa(r().user_id);ba(()=>{e(h)&&setTimeout(()=>{v(h,!1)},3e3)});async function g(){v(p,"");let W=await St(r().user_id,r());if(W.ok)v(h,!0);else{let E=await W.json();v(p,m(E.message))}}var k=cs(),M=t(k),N=t(M),H=t(N,!0);a(N);var D=o(N,2),I=t(D);_e(I,"href",U);var T=t(I);Sa(T,()=>U.replace("/auth/","/auth/<wbr/>")),a(I),a(D);var Y=o(D,2),G=o(t(Y),2);Oa(G,{get selected(){return r().expose_email},set selected(W){r(r().expose_email=W,!0)}}),a(Y);var L=o(Y,2),F=t(L),C=t(F,!0);a(F);var R=o(F,2);Oa(R,{get selected(){return e(u)},set selected(W){v(u,m(W))}}),a(L);var Z=o(L,2);{var J=W=>{var E=is(),y=t(E),x=t(y,!0);a(y);var $=o(y,2);Jt($),_e($,"rows",15),_e($,"cols",40),a(E),w(()=>d(x,b.account.webIdDescData)),ar($,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),Te(3,E,()=>Xt),l(W,E)};q(Z,W=>{e(u)&&W(J)})}var Q=o(Z,2);Pe(Q,{width:s,level:1,$$events:{click:g},children:(W,E)=>{re();var y=se();w(()=>d(y,b.common.save)),l(W,y)},$$slots:{default:!0}});var ee=o(Q,2),ae=t(ee);{var ue=W=>{var E=os();Te(3,E,()=>Ae),l(W,E)},O=W=>{var E=we(),y=le(E);{var x=$=>{var c=ls(),P=t(c,!0);a(c),w(()=>d(P,e(p))),Te(3,c,()=>Ae),l($,c)};q(y,$=>{e(p)&&$(x)},!0)}l(W,E)};q(ae,W=>{e(h)?W(ue):W(O,!1)})}a(ee),a(M),a(k),w(()=>{d(H,b.account.webIdDesc),d(C,b.account.webIdExpertMode)}),l(S,k),Le()}var vs=j('<div class="container svelte-1nrg3bb"><!></div>');function tt(S,i){je(i,!0);var r=vs(),b=t(r);tr(b,{get userId(){return i.session.user_id}}),a(r),l(S,r),Le()}var ds=j('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),us=j('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>'),ps=j("<!> <!>",1);function ms(S,i){je(i,!0);const r=nr(),b=()=>ir(M,"$op",r);let s=A(i,"session",7),p=A(i,"user",15),h=A(i,"webIdData",15),u=Ee(),U=K(void 0),g=K(m([])),k=Ie(()=>{var C;if((C=p().account_type)!=null&&C.startsWith("federated"))return e(g).filter(R=>R.id===p().auth_provider_id)[0]}),M=lr(1,{duration:100}),N=K(m(u.account.navInfo)),H=K(m(u.account.navInfo));function D(){M.set(0).then(()=>v(N,m(e(H)))).then(()=>M.set(1))}let I=Ie(()=>e(U)&&e(U)<500);ba(()=>{e(H)&&D()}),ia(()=>{e(H)===u.account.navLogout&&Ot()});var T=ps(),Y=le(T);dr(Y,{id:Bt,get value(){return e(g)},set value(C){v(g,m(C))}});var G=o(Y,2);{var L=C=>{var R=ds(),Z=t(R);Ga(Z,{absolute:!0,absoluteRight:!0,updateBackend:!0});var J=o(Z,2),Q=t(J),ee=t(Q,!0);a(Q),a(J);var ae=o(J,2),ue=t(ae);Ya(ue,{get selected(){return e(H)},set selected($){v(H,m($))}});var O=o(ue,2),W=t(O),E=t(W);{var y=$=>{Qa($,{get webIdData(){return h()},viewModePhone:!0,get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(c){p(c)}})},x=$=>{var c=we(),P=le(c);{var n=f=>{Xa(f,{viewModePhone:!0,get user(){return p()},set user(V){p(V)}})},_=f=>{var V=we(),te=le(V);{var oe=pe=>{et(pe,{get user(){return p()},get authProvider(){return e(k)},viewModePhone:!0})},he=pe=>{var be=we(),ge=le(be);{var ke=$e=>{Za($e,{get session(){return s()},get user(){return p()}})},Ue=$e=>{var z=we(),ce=le(z);{var ve=de=>{at(de,{get webIdData(){return h()},set webIdData(B){h(B)}})},ye=de=>{var B=we(),fe=le(B);{var Re=ze=>{tt(ze,{get session(){return s()},set session(Me){s(Me)}})};q(fe,ze=>{e(N)===u.account.devices&&ze(Re)},!0)}l(de,B)};q(ce,de=>{e(N)==="WebID"?de(ve):de(ye,!1)},!0)}l($e,z)};q(ge,$e=>{e(N)===u.account.navMfa?$e(ke):$e(Ue,!1)},!0)}l(pe,be)};q(te,pe=>{e(N)===u.common.password?pe(oe):pe(he,!1)},!0)}l(f,V)};q(P,f=>{e(N)===u.account.navEdit?f(n):f(_,!1)},!0)}l($,c)};q(E,$=>{e(N)===u.account.navInfo?$(y):$(x,!1)})}a(W),a(O),a(ae),a(R),w(()=>{d(ee,u.account.account),_e(W,"style",`opacity: ${b()??""}`)}),l(C,R)},F=C=>{var R=us(),Z=t(R);Ga(Z,{absolute:!0,updateBackend:!0});var J=o(Z,2),Q=t(J),ee=t(Q,!0);a(Q),a(J);var ae=o(J,2),ue=t(ae),O=Ie(()=>!!h());Ya(ue,{get showWebId(){return e(O)},get selected(){return e(H)},set selected(c){v(H,m(c))}});var W=o(ue,2),E=t(W),y=t(E);{var x=c=>{Qa(c,{get webIdData(){return h()},get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(P){p(P)}})},$=c=>{var P=we(),n=le(P);{var _=V=>{Xa(V,{get user(){return p()},set user(te){p(te)}})},f=V=>{var te=we(),oe=le(te);{var he=be=>{et(be,{get user(){return p()},get authProvider(){return e(k)}})},pe=be=>{var ge=we(),ke=le(ge);{var Ue=z=>{Za(z,{get session(){return s()},get user(){return p()}})},$e=z=>{var ce=we(),ve=le(ce);{var ye=B=>{at(B,{get webIdData(){return h()},set webIdData(fe){h(fe)}})},de=B=>{var fe=we(),Re=le(fe);{var ze=Me=>{tt(Me,{get session(){return s()},set session(la){s(la)}})};q(Re,Me=>{e(N)===u.account.devices&&Me(ze)},!0)}l(B,fe)};q(ve,B=>{e(N)==="WebID"?B(ye):B(de,!1)},!0)}l(z,ce)};q(ke,z=>{e(N)===u.account.navMfa?z(Ue):z($e,!1)},!0)}l(be,ge)};q(oe,be=>{e(N)===u.common.password?be(he):be(pe,!1)},!0)}l(V,te)};q(n,V=>{e(N)===u.account.navEdit?V(_):V(f,!1)},!0)}l(c,P)};q(y,c=>{e(N)===u.account.navInfo?c(x):c($,!1)})}a(E),a(W),a(ae),a(R),w(()=>{d(ee,u.account.account),_e(E,"style",`opacity: ${b()??""}`)}),l(C,R)};q(G,C=>{e(I)?C(L):C(F,!1)})}rr("innerWidth",C=>v(U,m(C))),l(S,T),Le()}function hs(S,i){je(i,!0);let r=Ee(),b=K(void 0),s=K(void 0),p=K(void 0),h=K(!1);Fe(async()=>{let u=await Ht();if(u.ok){if(v(b,m(await u.json())),!e(b)){console.error("did not receive valid session response");return}u=await Ft(e(b).user_id),u.ok?v(s,m(await u.json())):Ra("account"),u=await Gt(e(b).user_id),u.ok?v(p,m(await u.json())):u.status===404&&v(p,m({user_id:e(b).user_id,is_open:!1})),v(h,!0)}else Ra("account")}),xt(u=>{w(()=>{var U;return _t.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((U=e(s))==null?void 0:U.email)??""}`})}),ur(S,{children:(u,U)=>{pr(u,{children:(g,k)=>{var M=we(),N=le(M);{var H=I=>{Ja(I,{})},D=I=>{var T=we(),Y=le(T);{var G=L=>{ms(L,{get session(){return e(b)},get user(){return e(s)},set user(F){v(s,m(F))},get webIdData(){return e(p)},set webIdData(F){v(p,m(F))}})};q(Y,L=>{e(b)&&e(s)&&L(G)},!0)}l(I,T)};q(N,I=>{e(h)?I(D,!1):I(H)})}l(g,M)},$$slots:{default:!0}})},$$slots:{default:!0}}),Le()}export{hs as component};
