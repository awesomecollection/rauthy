import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DJEB66nf.js";import{p as se,s as a,t as T,z as n,y as r,a as ne,A as C,c as d,r as c,f as oe,ab as re,a6 as ge,ar as W,ap as Yt}from"../chunks/index-client.Di99sPv0.js";import{d as Ue,e as xt,s as E}from"../chunks/render.Cjc4CIr8.js";import{i as Y}from"../chunks/if.DgeUjMU2.js";import{e as Me,i as Ct}from"../chunks/each.DxtmCefA.js";import{a as u,t as Q,e as ye,d as G}from"../chunks/template.BEKX6jgL.js";import{a as F,t as er,s as tr}from"../chunks/index.BnJsthXQ.js";import{p as i}from"../chunks/proxy.BQ2dmY0t.js";import{B as rr}from"../chunks/ButtonAddModal.DLvLHw-v.js";import{C as ar}from"../chunks/ContentAdmin.BWiTVMIY.js";import{N as lr}from"../chunks/NavButtonTile.BjzIPqLk.js";import{N as ir}from"../chunks/NavSub.D01RyWn2.js";import{O as sr}from"../chunks/OrderSearchBar.CS_Hs5DC.js";import{b as je,d as ze,c as Lt,f as At}from"../chunks/fetch.DxJS_Pk_.js";import{u as nr}from"../chunks/param.svelte.B2CvjQ2c.js";import{h as $e}from"../chunks/html.CddWxNhc.js";import{B as ce}from"../chunks/Button.D-14suAe.js";import{I as he}from"../chunks/Input.-lhBsjDF.js";import{n as or,c as St,g as Be,o as cr,p as dr,q as It}from"../chunks/patterns.BDQXnG3O.js";import{F as Ne}from"../chunks/Form.C0Yvca1O.js";import{u as be}from"../chunks/i18n.svelte.Bc6aINkd.js";import{u as pe}from"../chunks/i18n_admin.svelte.DI6l2V4l.js";import{I as ve}from"../chunks/InputCheckbox.BTJtACoe.js";import{r as Qe,s as D}from"../chunks/class.BCapn1bP.js";import{b as Pe}from"../chunks/input.NYWjhvEE.js";import{b as qt}from"../chunks/this.Ckttlp1y.js";import{p as V}from"../chunks/props.ClgLgKUv.js";import{a as _e}from"../chunks/helpers.D3KrX4pz.js";import{I as vr}from"../chunks/IconStop.8S4C4V3m.js";import{T as Et}from"../chunks/Tabs.CTmGp6-A.js";import{I as Rt}from"../chunks/IconCheck.K_67dytm.js";import{L as De}from"../chunks/LabeledValue.D0BXhgF2.js";import{S as Tt}from"../chunks/SelectList.BcngFbY0.js";import{O as Ut}from"../chunks/Options.DtWx0xTK.js";import{I as ur}from"../chunks/InputPassword.Bl28d8lQ.js";import{k as hr}from"../chunks/key.DB5VoPJt.js";import{T as mr}from"../chunks/ThemeSwitch._9IF3ElF.js";import{I as gr}from"../chunks/InputFile.D28REYhm.js";function pr(j,e,t,l){var v;e(),(v=t.onInput)==null||v.call(t,r(l))}function fr(j,e,t){var l;switch(j.code){case"Enter":e(),(l=t.onEnter)==null||l.call(t);break}}function br(j,e){var t,l;(t=e())==null||t.focus(),(l=e())==null||l.scrollIntoView({behavior:"smooth",block:"center"})}var _r=Q('<li class="value svelte-r5y8pk"><div class="label"> </div> <div class="btnClose svelte-r5y8pk"><!></div></li>'),kr=Q("<option></option>"),$r=Q('<datalist class="absolute svelte-r5y8pk"></datalist>'),wr=Q('<span class="err"> </span>'),yr=Q('<div role="none" class="container svelte-r5y8pk"><ul class="svelte-r5y8pk"><!> <li class="svelte-r5y8pk"><input autocomplete="off" class="svelte-r5y8pk"> <!></li></ul> <label class="font-label noselect svelte-r5y8pk"> <!></label></div>');function ke(j,e){se(e,!0);let t=V(e,"ref",15),l=V(e,"typ",3,"text"),v=V(e,"id",19,_e),h=V(e,"values",31,()=>i([])),$=V(e,"label",3,""),m=V(e,"placeholder",3,""),w=V(e,"disabled",3,!1),y=V(e,"required",3,!1),g=V(e,"isError",15,!1),k=V(e,"width",3,"inherit"),R=V(e,"maxHeightList",3,"inherit"),_=be();const p=_e();let x=C(""),b=re(()=>e.datalist&&e.datalist.length>0?p:void 0);function B(P){h(h().filter(I=>I!==P))}function z(P){var I;L(),(I=e.onBlur)==null||I.call(e),J()}function N(P){P.preventDefault(),g(!0)}function J(){r(x)&&L()&&(h().push(r(x)),n(x,""))}function L(){var I;let P=(I=t())==null?void 0:I.validity;return P?(g(!P.valid),P.valid):(g(!1),!0)}var S=yr();S.__click=[br,t];var o=d(S),U=d(o);Me(U,17,h,Ct,(P,I)=>{var te=_r(),X=d(te),ie=d(X,!0);c(X);var le=a(X,2),K=d(le);ce(K,{invisible:!0,onclick:()=>B(r(I)),children:(ue,de)=>{vr(ue,{width:"1.2rem"})},$$slots:{default:!0}}),c(le),c(te),T(()=>E(ie,r(I))),u(P,te)});var O=a(U,2),A=d(O);Qe(A),A.__keydown=[fr,J,e],A.__input=[pr,L,e,x],qt(A,P=>t(P),()=>t());var f=a(A,2);{var Z=P=>{var I=$r();D(I,"id",p),Me(I,21,()=>e.datalist,Ct,(te,X)=>{var ie=kr(),le={};T(()=>{le!==(le=r(X))&&(ie.value=(ie.__value=r(X))==null?"":r(X))}),u(te,ie)}),c(I),u(P,I)};Y(f,P=>{e.datalist&&e.datalist.length>1&&P(Z)})}c(O),c(o);var M=a(o,2),ae=d(M),me=a(ae);{var ee=P=>{var I=ye(),te=oe(I);{var X=ie=>{var le=wr(),K=d(le,!0);c(le),T(()=>E(K,e.errMsg||_.common.invalidInput)),u(ie,le)};Y(te,ie=>{g()&&ie(X)})}u(P,I)};Y(me,P=>{g()&&P(ee)})}c(M),c(S),T(()=>{F(S,"width",k()),F(o,"max-height",R()),D(A,"type",l()),D(A,"id",v()),D(A,"name",e.name),D(A,"list",r(b)),D(A,"title",e.errMsg),D(A,"aria-label",$()||m()),D(A,"placeholder",m()),D(A,"aria-placeholder",m()),A.disabled=w(),D(A,"aria-disabled",w()),A.required=y()&&h().length<1,D(A,"aria-required",y()&&h().length<1),D(A,"maxlength",e.maxLength||void 0),D(A,"min",e.min||void 0),D(A,"max",e.max||void 0),D(A,"pattern",e.pattern),D(M,"for",v()),D(M,"data-required",y()),E(ae,`${$()??""} `)}),xt("invalid",A,N),xt("blur",A,z),Pe(A,()=>r(x),P=>n(x,P)),u(j,S),ne()}Ue(["click","keydown","input"]);var xr=Q('<div class="err"> </div>'),Cr=Q('<!> <!> <!> <p class="svelte-15tp6i6"><!></p> <!> <!> <!> <!>',1),Lr=Q('<div class="container svelte-15tp6i6"><!></div>');function Ar(j,e){se(e,!0);let t=be(),l=pe(),v=C(void 0),h=C(""),$=C(""),m=C(""),w=C(!0),y=C(i([])),g=C(i([]));ge(()=>{requestAnimationFrame(()=>{var p;(p=r(v))==null||p.focus()})});async function k(p,x){var z;if(e.clients.find(N=>N.id===r($))){n(h,i(l.common.nameExistsAlready));return}n(h,"");let b={id:r($),name:r(m)||void 0,confidential:r(w),redirect_uris:r(y),post_logout_redirect_uris:r(g).length>0?r(g):void 0},B=await je(p.action,b);B.body?e.onSave(B.body.id):n(h,i(((z=B.error)==null?void 0:z.message)||"Error"))}var R=Lr(),_=d(R);Ne(_,{action:"/auth/v1/clients",onSubmit:k,children:(p,x)=>{var b=Cr(),B=oe(b);he(B,{autocomplete:"off",label:"Client ID",placeholder:"Client ID",required:!0,pattern:or,get ref(){return r(v)},set ref(f){n(v,i(f))},get value(){return r($)},set value(f){n($,i(f))}});var z=a(B,2);he(z,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},pattern:St,get value(){return r(m)},set value(f){n(m,i(f))}});var N=a(z,2);ve(N,{get ariaLabel(){return l.clients.confidential},get checked(){return r(w)},set checked(f){n(w,i(f))},children:(f,Z)=>{W();var M=G();T(()=>E(M,l.clients.confidential)),u(f,M)},$$slots:{default:!0}});var J=a(N,2),L=d(J);$e(L,()=>l.clients.descUri),c(J);var S=a(J,2);ke(S,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(y)},set values(f){n(y,i(f))}});var o=a(S,2);ke(o,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(g)},set values(f){n(g,i(f))}});var U=a(o,2);ce(U,{type:"submit",children:(f,Z)=>{W();var M=G();T(()=>E(M,t.common.save)),u(f,M)},$$slots:{default:!0}});var O=a(U,2);{var A=f=>{var Z=xr(),M=d(Z,!0);c(Z),T(()=>E(M,r(h))),u(f,Z)};Y(O,f=>{r(h)&&f(A)})}u(p,b)},$$slots:{default:!0}}),c(R),u(j,R),ne()}const Oe="urn:ietf:params:oauth:grant-type:device_code";var Sr=Q('<div class="err"> </div>'),Ir=Q('<div class="err"> </div>'),qr=Q('<h5> </h5> <!> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"> </p> <!> <!> <div></div> <h5> </h5> <!> <!> <!> <p class="mb-0 svelte-5tvvvt">Authentication Flows</p> <!> <!> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <p class="desc svelte-5tvvvt"><strong> </strong></p> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p> </p> <!> <div></div> <p> </p> <p> </p> <!> <!> <div></div> <p> </p> <!> <div class="flex gap-05"><!> <!></div> <!> <div></div>',1),Er=Q('<div class="container svelte-5tvvvt"><!></div>');function Rr(j,e){var ae,me;se(e,!0);let t=be(),l=pe();const v="min(20rem, calc(100dvw - .5rem))";let h=C(""),$=C(!1),m=C(i(e.client.id)),w=C(i(e.client.name||"")),y=C(i(e.client.enabled)),g=C(i(e.client.confidential)),k=C(i(e.client.client_uri||"")),R=C(i(e.client.contacts?Array.from(e.client.contacts):[])),_=C(i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),p=C(i(Array.from(e.client.redirect_uris))),x=C(i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),b=i({authorizationCode:e.client.flows_enabled.includes("authorization_code"),clientCredentials:e.client.flows_enabled.includes("client_credentials"),password:e.client.flows_enabled.includes("password"),refreshToken:e.client.flows_enabled.includes("refresh_token"),deviceCode:e.client.flows_enabled.includes(Oe)});const B=["RS256","RS384","RS512","EdDSA"];let z=C(i(e.client.access_token_alg)),N=C(i(e.client.id_token_alg)),J=C(i(e.client.access_token_lifetime.toString())),L=C(i(e.client.auth_code_lifetime.toString())),S=C(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.scopes.includes(ee)||!1})))),o=C(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.default_scopes.includes(ee)||!1})))),U=i({plain:((ae=e.client.challenges)==null?void 0:ae.includes("plain"))||!1,s256:((me=e.client.challenges)==null?void 0:me.includes("S256"))||!1}),O=C(i(e.client.force_mfa));ge(()=>{var ee,P;e.client.id&&(n(m,i(e.client.id)),n(w,i(e.client.name||"")),n(y,i(e.client.enabled)),n(g,i(e.client.confidential)),n(k,i(e.client.client_uri||"")),n(R,i(e.client.contacts?Array.from(e.client.contacts):[])),n(_,i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),n(p,i(Array.from(e.client.redirect_uris))),n(x,i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),b.authorizationCode=e.client.flows_enabled.includes("authorization_code"),b.clientCredentials=e.client.flows_enabled.includes("client_credentials"),b.password=e.client.flows_enabled.includes("password"),b.refreshToken=e.client.flows_enabled.includes("refresh_token"),b.deviceCode=e.client.flows_enabled.includes(Oe),n(z,i(e.client.access_token_alg)),n(N,i(e.client.id_token_alg)),n(J,i(e.client.access_token_lifetime.toString())),n(L,i(e.client.auth_code_lifetime.toString())),n(S,i(e.scopesAll.map(I=>({name:I,selected:e.client.scopes.includes(I)||!1})))),n(o,i(e.scopesAll.map(I=>({name:I,selected:e.client.default_scopes.includes(I)||!1})))),U.plain=((ee=e.client.challenges)==null?void 0:ee.includes("plain"))||!1,U.s256=((P=e.client.challenges)==null?void 0:P.includes("S256"))||!1)});async function A(ee,P){n(h,"");let I={id:r(m),name:r(w)||void 0,enabled:r(y),confidential:r(g),allowed_origins:r(_).length>0?r(_):void 0,redirect_uris:r(p),post_logout_redirect_uris:r(x).length>0?r(x):void 0,flows_enabled:[],access_token_alg:r(z),id_token_alg:r(N),access_token_lifetime:Number.parseInt(r(J)),auth_code_lifetime:Number.parseInt(r(L)),scopes:r(S).filter(X=>X.selected).map(X=>X.name),default_scopes:r(o).filter(X=>X.selected).map(X=>X.name),challenges:void 0,force_mfa:r(O),client_uri:r(k)||void 0,contacts:r(R).length>0?r(R):void 0};b.authorizationCode&&I.flows_enabled.push("authorization_code"),b.clientCredentials&&I.flows_enabled.push("client_credentials"),b.password&&I.flows_enabled.push("password"),b.refreshToken&&I.flows_enabled.push("refresh_token"),b.deviceCode&&I.flows_enabled.push(Oe),U.plain&&(I.challenges=["plain"]),U.s256&&(I.challenges?I.challenges.push("S256"):I.challenges=["S256"]),console.log("payload",I);let te=await ze(ee.action,I);te.error?n(h,i(te.error.message)):(n($,!0),e.onSave(),setTimeout(()=>{n($,!1)},2e3))}var f=Er(),Z=d(f),M=re(()=>`/auth/v1/clients/${e.client.id}`);Ne(Z,{get action(){return r(M)},onSubmit:A,children:(ee,P)=>{var I=qr(),te=oe(I),X=d(te,!0);c(te);var ie=a(te,2);De(ie,{label:"ID",mono:!0,children:(s,H)=>{W();var q=G();T(()=>E(q,e.client.id)),u(s,q)},$$slots:{default:!0}});var le=a(ie,2),K=d(le,!0);c(le);var ue=a(le,2);he(ue,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},width:v,pattern:St,get value(){return r(w)},set value(s){n(w,i(s))}});var de=a(ue,2),zt=d(de,!0);c(de);var Ze=a(de,2);he(Ze,{typ:"url",autocomplete:"off",label:"URI",placeholder:"URI",width:v,pattern:Be,get value(){return r(k)},set value(s){n(k,i(s))}});var Ge=a(Ze,2);ke(Ge,{get label(){return l.common.contact},pattern:cr,get values(){return r(R)},set values(s){n(R,i(s))}});var Je=a(Ge,2);F(Je,"height",".5rem");var xe=a(Je,2),Bt=d(xe,!0);c(xe);var Ke=a(xe,2);ve(Ke,{get ariaLabel(){return l.common.enabled},get checked(){return r(y)},set checked(s){n(y,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.common.enabled)),u(s,q)},$$slots:{default:!0}});var He=a(Ke,2);ve(He,{get ariaLabel(){return l.clients.confidential},get checked(){return r(g)},set checked(s){n(g,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.confidential)),u(s,q)},$$slots:{default:!0}});var Xe=a(He,2);ve(Xe,{get ariaLabel(){return l.clients.forceMfa},get checked(){return r(O)},set checked(s){n(O,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.forceMfa)),u(s,q)},$$slots:{default:!0}});var Ve=a(Xe,4);ve(Ve,{ariaLabel:"authorization_code",get checked(){return b.authorizationCode},set checked(s){b.authorizationCode=s},children:(s,H)=>{W();var q=G("authorization_code");u(s,q)},$$slots:{default:!0}});var Ye=a(Ve,2);ve(Ye,{ariaLabel:"urn:ietf:params:oauth:grant-type:device_code",get checked(){return b.deviceCode},set checked(s){b.deviceCode=s},children:(s,H)=>{W();var q=G("device_code");u(s,q)},$$slots:{default:!0}});var et=a(Ye,2);ve(et,{ariaLabel:"client_credentials",get checked(){return b.clientCredentials},set checked(s){b.clientCredentials=s},children:(s,H)=>{W();var q=G("client_credentials");u(s,q)},$$slots:{default:!0}});var tt=a(et,2);ve(tt,{ariaLabel:"password",get checked(){return b.password},set checked(s){b.password=s},children:(s,H)=>{W();var q=G("password");u(s,q)},$$slots:{default:!0}});var rt=a(tt,2);ve(rt,{ariaLabel:"refresh_token",get checked(){return b.refreshToken},set checked(s){b.refreshToken=s},children:(s,H)=>{W();var q=G("refresh_token");u(s,q)},$$slots:{default:!0}});var at=a(rt,2);F(at,"height",".5rem");var Ce=a(at,2),Nt=d(Ce,!0);c(Ce);var Le=a(Ce,2),lt=d(Le),Qt=d(lt,!0);c(lt),c(Le);var it=a(Le,2);ve(it,{ariaLabel:"PKCE plain",get checked(){return U.plain},set checked(s){U.plain=s},children:(s,H)=>{W();var q=G("plain");u(s,q)},$$slots:{default:!0}});var st=a(it,2);ve(st,{ariaLabel:"PKCE S256",get checked(){return U.s256},set checked(s){U.s256=s},children:(s,H)=>{W();var q=G("S256");u(s,q)},$$slots:{default:!0}});var nt=a(st,2);{var Pt=s=>{var H=Sr(),q=d(H,!0);c(H),T(()=>E(q,l.clients.errConfidentialPKCE)),er(3,H,()=>tr,()=>({duration:150})),u(s,H)};Y(nt,s=>{!r(g)&&!U.plain&&!U.s256&&s(Pt)})}var ot=a(nt,2);F(ot,"height",".5rem");var Ae=a(ot,2),Dt=d(Ae,!0);c(Ae);var ct=a(Ae,2);ke(ct,{typ:"url",label:"Allowed Origins",get errMsg(){return l.validation.origin},pattern:dr,get values(){return r(_)},set values(s){n(_,i(s))}});var Se=a(ct,2),Ot=d(Se);$e(Ot,()=>l.clients.descUri),c(Se);var dt=a(Se,2);ke(dt,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get required(){return b.authorizationCode},pattern:Be,get values(){return r(p)},set values(s){n(p,i(s))}});var vt=a(dt,2);ke(vt,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},pattern:Be,get values(){return r(x)},set values(s){n(x,i(s))}});var ut=a(vt,2);F(ut,"height",".5rem");var Ie=a(ut,2),Wt=d(Ie);$e(Wt,()=>l.clients.scopes.desc),c(Ie);var ht=a(Ie,2);Tt(ht,{get items(){return r(S)},set items(s){n(S,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.scopes.allowed)),u(s,q)},$$slots:{default:!0}});var mt=a(ht,2);Tt(mt,{get items(){return r(o)},set items(s){n(o,i(s))},children:(s,H)=>{W();var q=G();T(()=>E(q,l.clients.scopes.default)),u(s,q)},$$slots:{default:!0}});var gt=a(mt,2);F(gt,"height",".75rem");var qe=a(gt,2),Ft=d(qe,!0);c(qe);var pt=a(qe,2);he(pt,{typ:"number",autocomplete:"off",label:"Token Lifetime",placeholder:"Token Lifetime",width:v,min:"10",max:"86400",errMsg:"10 <= Token Lifetime <= 86400",get value(){return r(J)},set value(s){n(J,i(s))}});var ft=a(pt,2);F(ft,"height",".5rem");var Ee=a(ft,2),Zt=d(Ee,!0);c(Ee);var Re=a(Ee,2),Gt=d(Re,!0);c(Re);var bt=a(Re,2);De(bt,{label:"Access Token Algorithm",children:(s,H)=>{Ut(s,{ariaLabel:"Access Token Algorithm",options:B,borderless:!0,get value(){return r(z)},set value(q){n(z,i(q))}})},$$slots:{default:!0}});var _t=a(bt,2);De(_t,{label:"ID Token Algorithm",children:(s,H)=>{Ut(s,{ariaLabel:"ID Token Algorithm",options:B,borderless:!0,get value(){return r(N)},set value(q){n(N,i(q))}})},$$slots:{default:!0}});var kt=a(_t,2);F(kt,"height",".5rem");var Te=a(kt,2),Jt=d(Te,!0);c(Te);var $t=a(Te,2);he($t,{typ:"number",autocomplete:"off",label:"Auth Code Lifetime",placeholder:"Auth Code Lifetime",width:v,min:"10",max:"300",errMsg:"10 <= Auth Code Lifetime <= 300",get value(){return r(L)},set value(s){n(L,i(s))}});var we=a($t,2);F(we,"margin-top","1rem");var wt=d(we);ce(wt,{type:"submit",children:(s,H)=>{W();var q=G();T(()=>E(q,t.common.save)),u(s,q)},$$slots:{default:!0}});var Kt=a(wt,2);{var Ht=s=>{Rt(s,{})};Y(Kt,s=>{r($)&&s(Ht)})}c(we);var yt=a(we,2);{var Xt=s=>{var H=Ir(),q=d(H,!0);c(H),T(()=>E(q,r(h))),u(s,H)};Y(yt,s=>{r(h)&&s(Xt)})}var Vt=a(yt,2);F(Vt,"height","1rem"),T(()=>{E(X,l.common.information),E(K,l.clients.descName),E(zt,l.clients.descClientUri),E(Bt,l.clients.config),E(Nt,l.clients.descPKCE),E(Qt,l.clients.descPKCEEnforce),E(Dt,l.clients.descOrigin),E(Ft,l.clients.tokenLifetime.p1),E(Zt,l.clients.tokenLifetime.p2),E(Gt,l.clients.tokenLifetime.p3),E(Jt,l.clients.descAuthCode)}),u(ee,I)},$$slots:{default:!0}}),c(f),u(j,f),ne()}var Tr=Q("<!> <!>",1),Ur=Q('<div class="container svelte-19xcrje"><div class="err"> </div> <!></div>');function Mr(j,e){se(e,!0);let t=pe(),l=C(""),v=C(void 0);ge(()=>{n(l,""),n(v,""),e.client.confidential?h():n(l,i(t.clients.confidentialNoSecret))});async function h(){let _=await je(`/auth/v1/clients/${e.client.id}/secret`);m(_)}async function $(){let _=await ze(`/auth/v1/clients/${e.client.id}/secret`);m(_)}function m(_){var p;_.body?_.body.secret&&n(v,i(_.body.secret)):n(l,i(((p=_.error)==null?void 0:p.message)||"Error"))}var w=Ur(),y=d(w),g=d(y,!0);c(y);var k=a(y,2);{var R=_=>{var p=Tr(),x=oe(p);ur(x,{autocomplete:"off",label:"Client Secret",placeholder:"Client Secret",disabled:!0,showCopy:!0,get value(){return r(v)},set value(B){n(v,i(B))}});var b=a(x,2);ce(b,{onclick:$,children:(B,z)=>{W();var N=G();T(()=>E(N,t.clients.generateSecret)),u(B,N)},$$slots:{default:!0}}),u(_,p)};Y(k,_=>{r(v)&&_(R)})}c(w),T(()=>E(g,r(l))),u(j,w),ne()}var jr=Q('<div class="err"> </div>'),zr=Q("<p> </p> <!> <!>",1);function Br(j,e){se(e,!0);let t=be(),l=pe(),v=C("");async function h(){n(v,"");let R=await Lt(`/auth/v1/clients/${e.client.id}`);R.error?n(v,i(R.error.message)):e.onSave()}var $=zr(),m=oe($),w=d(m,!0);c(m);var y=a(m,2);ce(y,{level:-1,onclick:h,children:(R,_)=>{W();var p=G();T(()=>E(p,t.common.delete)),u(R,p)},$$slots:{default:!0}});var g=a(y,2);{var k=R=>{var _=jr(),p=d(_,!0);c(_),T(()=>E(p,r(v))),u(R,_)};Y(g,R=>{r(v)&&R(k)})}T(()=>E(w,l.clients.delete1)),u(j,$),ne()}var Nr=Q('<div><div class="flex"><input type="range" class="svelte-12j8dit"> <div class="value font-mono svelte-12j8dit"> </div></div> <div class="label svelte-12j8dit"><label class="font-label noselect svelte-12j8dit"> </label></div></div>');function We(j,e){se(e,!0);let t=V(e,"value",15),l=V(e,"label",3,""),v=V(e,"disabled",3,!1),h=V(e,"step",3,1),$=V(e,"widthRange",3,"15rem");const m=_e();let w=re(()=>{if(e.hue!==void 0&&e.sat!==void 0&&e.lum!==void 0){if(e.bgMode==="hue")return`linear-gradient(
                    to right,
                    hsl(0 ${e.sat} ${e.lum}) 0%,
                    hsl(60 ${e.sat} ${e.lum}) 17%,
                    hsl(120 ${e.sat} ${e.lum}) 33%,
                    hsl(180 ${e.sat} ${e.lum}) 50%,
                    hsl(240 ${e.sat} ${e.lum}) 67%,
                    hsl(300 ${e.sat} ${e.lum}) 83%,
                    hsl(3600 ${e.sat} ${e.lum}) 100%
                )`;if(e.bgMode==="sat")return`linear-gradient(to right, hsl(${e.hue} 0 ${e.lum}), hsl(${e.hue} 100 ${e.lum}))`;if(e.bgMode==="lum")return`linear-gradient(to right, hsl(${e.hue} ${e.sat} 0), hsl(${e.hue} ${e.sat} 100))`}return"hsl(var(--text) / .5)"});var y=Nr(),g=d(y),k=d(g);Qe(k),D(k,"id",m);var R=a(k,2),_=d(R,!0);c(R),c(g);var p=a(g,2),x=d(p);D(x,"for",m);var b=d(x,!0);c(x),c(p),c(y),T(()=>{D(k,"name",e.name),D(k,"title",l()),D(k,"aria-label",l()),k.disabled=v(),D(k,"aria-disabled",v()),D(k,"min",e.min),D(k,"max",e.max),D(k,"step",h()),F(k,"width",$()),F(k,"--bg-slider",r(w)),E(_,t()),E(b,l())}),Pe(k,t),u(j,y),ne()}var Qr=Q('<div class="outer svelte-1evkwuy"><div class="container svelte-1evkwuy"><div><label class="font-label svelte-1evkwuy"> </label> <div class="values svelte-1evkwuy"><!> <!> <!></div></div> <div class="color svelte-1evkwuy"></div></div></div>');function fe(j,e){se(e,!0);let t=V(e,"h",15),l=V(e,"s",15),v=V(e,"l",15);const h=_e(),$="15rem";let m=re(()=>`hsl(${t()} ${l()} ${v()})`);var w=Qr(),y=d(w),g=d(y),k=d(g);D(k,"for",h);var R=d(k,!0);c(k);var _=a(k,2);D(_,"id",h);var p=d(_);We(p,{label:"Hue",min:0,max:359,widthRange:$,bgMode:"hue",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return t()},set value(z){t(z)}});var x=a(p,2);We(x,{label:"Sat",min:0,max:100,widthRange:$,bgMode:"sat",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return l()},set value(z){l(z)}});var b=a(x,2);We(b,{label:"Lum",min:0,max:100,widthRange:$,bgMode:"lum",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return v()},set value(z){v(z)}}),c(_),c(g);var B=a(g,2);c(y),c(w),T(()=>{F(y,"border-color",r(m)),E(R,e.label),F(B,"background",r(m))}),u(j,w),ne()}var Pr=(j,e)=>{var t;return(t=r(e))==null?void 0:t.click()},Dr=Q('<div class="container svelte-lcwq3j"><!> <div role="none" class="mask svelte-lcwq3j"><div class="colorWrapper svelte-lcwq3j"><div class="color svelte-lcwq3j"></div></div> <input type="color" class="svelte-lcwq3j"></div></div>');function Fe(j,e){se(e,!0);let t=V(e,"value",15),l=pe(),v=C(void 0);var h=Dr(),$=d(h);he($,{get label(){return e.label},get placeholder(){return e.label},get errMsg(){return l.validation.css},get width(){return e.inputWidth},required:!0,pattern:It,get value(){return t()},set value(y){t(y)}});var m=a($,2);m.__click=[Pr,v];var w=a(d(m),2);Qe(w),qt(w,y=>n(v,y),()=>r(v)),c(m),c(h),T(()=>F(h,"--color",t())),Pe(w,t),u(j,h),ne()}Ue(["click"]);var Or=Q('<div><p> </p> <div class="hsl svelte-10udpph"><div><!> <!> <!> <!></div> <div><!> <!> <!></div></div> <div><p><!></p> <!> <!> <!></div></div>');function Mt(j,e){se(e,!0);let t=V(e,"values",15),l=pe();var v=Or(),h=d(v),$=d(h,!0);c(h);var m=a(h,2),w=d(m),y=d(w);fe(y,{label:"--text",get h(){return t().text[0]},set h(o){t(t().text[0]=o,!0)},get s(){return t().text[1]},set s(o){t(t().text[1]=o,!0)},get l(){return t().text[2]},set l(o){t(t().text[2]=o,!0)}});var g=a(y,2);fe(g,{label:"--text-high",get h(){return t().text_high[0]},set h(o){t(t().text_high[0]=o,!0)},get s(){return t().text_high[1]},set s(o){t(t().text_high[1]=o,!0)},get l(){return t().text_high[2]},set l(o){t(t().text_high[2]=o,!0)}});var k=a(g,2);fe(k,{label:"--bg",get h(){return t().bg[0]},set h(o){t(t().bg[0]=o,!0)},get s(){return t().bg[1]},set s(o){t(t().bg[1]=o,!0)},get l(){return t().bg[2]},set l(o){t(t().bg[2]=o,!0)}});var R=a(k,2);fe(R,{label:"--bg-high",get h(){return t().bg_high[0]},set h(o){t(t().bg_high[0]=o,!0)},get s(){return t().bg_high[1]},set s(o){t(t().bg_high[1]=o,!0)},get l(){return t().bg_high[2]},set l(o){t(t().bg_high[2]=o,!0)}}),c(w);var _=a(w,2),p=d(_);fe(p,{label:"--action",get h(){return t().action[0]},set h(o){t(t().action[0]=o,!0)},get s(){return t().action[1]},set s(o){t(t().action[1]=o,!0)},get l(){return t().action[2]},set l(o){t(t().action[2]=o,!0)}});var x=a(p,2);fe(x,{label:"--accent",get h(){return t().accent[0]},set h(o){t(t().accent[0]=o,!0)},get s(){return t().accent[1]},set s(o){t(t().accent[1]=o,!0)},get l(){return t().accent[2]},set l(o){t(t().accent[2]=o,!0)}});var b=a(x,2);fe(b,{label:"--error",get h(){return t().error[0]},set h(o){t(t().error[0]=o,!0)},get s(){return t().error[1]},set s(o){t(t().error[1]=o,!0)},get l(){return t().error[2]},set l(o){t(t().error[2]=o,!0)}}),c(_),c(m);var B=a(m,2),z=d(B),N=d(z);$e(N,()=>l.clients.branding.descFullCss),c(z);var J=a(z,2);Fe(J,{label:"--btn-text",get inputWidth(){return e.inputWidth},get value(){return t().btn_text},set value(o){t(t().btn_text=o,!0)}});var L=a(J,2);Fe(L,{label:"--theme-sun",get inputWidth(){return e.inputWidth},get value(){return t().theme_sun},set value(o){t(t().theme_sun=o,!0)}});var S=a(L,2);Fe(S,{label:"--theme-moon",get inputWidth(){return e.inputWidth},get value(){return t().theme_moon},set value(o){t(t().theme_moon=o,!0)}}),c(B),c(v),T(()=>E($,l.clients.branding.descHsl)),u(j,v),ne()}var Wr=j=>j.preventDefault(),Fr=Q('<div aria-label="Preview: All components inside are only for theme and colors preview and have no effect or interaction"><div class="inner svelte-fkmn75"><div class="container svelte-fkmn75"><div class="logo svelte-fkmn75"><img alt="Client Logo"></div> <h3 class="svelte-fkmn75">Header</h3> <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p> <p><span class="svelte-fkmn75">--accent-color</span></p> <!> <div class="btn svelte-fkmn75"><div class="svelte-fkmn75"><!> <br> <!> <br> <!> <br></div> <div class="svelte-fkmn75"><!> <br> <!> <br> <!></div></div> <a>Link</a> <br> <!></div></div></div>');function jt(j,e){se(e,!0);let t=C(!1);ge(()=>{r(t)&&setTimeout(()=>{n(t,!1)},2e3)});var l=Fr();const v=re(()=>e.theme.text.join(" "));T(()=>F(l,"--text",r(v)));const h=re(()=>e.theme.text_high.join(" "));T(()=>F(l,"--text-high",r(h)));const $=re(()=>e.theme.bg.join(" "));T(()=>F(l,"--bg",r($)));const m=re(()=>e.theme.bg_high.join(" "));T(()=>F(l,"--bg-high",r(m)));const w=re(()=>e.theme.action.join(" "));T(()=>F(l,"--action",r(w)));const y=re(()=>e.theme.accent.join(" "));T(()=>F(l,"--accent",r(y)));const g=re(()=>e.theme.error.join(" "));T(()=>F(l,"--error",r(g)));var k=d(l),R=d(k),_=d(R),p=d(_);c(_);var x=a(_,8);he(x,{label:"Preview",placeholder:"Preview",width:"12.5rem"});var b=a(x,2),B=d(b),z=d(B);ce(z,{level:1,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var N=a(z,4);ce(N,{level:2,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var J=a(N,4);ce(J,{level:3,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}}),W(2),c(B);var L=a(B,2),S=d(L);ce(S,{level:-1,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var o=a(S,4);ce(o,{level:-2,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}});var U=a(o,4);ce(U,{level:-3,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var M=G("Button");u(f,M)},$$slots:{default:!0}}),c(L),c(b);var O=a(b,2);D(O,"href",window.location.href),O.__click=[Wr];var A=a(O,4);mr(A,{}),c(R),c(k),c(l),T(()=>{F(l,"--border-radius",e.borderRadius),F(l,"--btn-text",e.theme.btn_text),F(l,"--theme-sun",e.theme.theme_sun),F(l,"--theme-moon",e.theme.theme_moon),D(p,"src",e.logoUrl)}),u(j,l),ne()}Ue(["click"]);var Zr=Q('<div><h2>Preview</h2> <!> <div class="preview svelte-1nlq99j"><!></div></div>');function Gr(j,e){se(e,!0);let t=["Light Theme","Dark Theme"],l=C(i(t[0]));var v=Zr(),h=a(d(v),2);Et(h,{tabs:t,center:!0,get selected(){return r(l)},set selected(g){n(l,i(g))}});var $=a(h,2),m=d($);{var w=g=>{jt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.light}})},y=g=>{jt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.dark}})};Y(m,g=>{r(l)===t[0]?g(w):g(y,!1)})}c($),c(v),u(j,v),ne()}var Jr=Q('<div class="err"> </div>'),Kr=Q('<div class="values svelte-1pkqupw"><p><!></p> <!> <h1>Light Theme</h1> <!> <br> <h1>Dark Theme</h1> <!></div> <div class="preview"><!> <hr> <p>Logo Upload</p> <!> <div class="buttons svelte-1pkqupw"><!> <!> <!></div> <!></div>',1),Hr=Q('<div class="container svelte-1pkqupw"><!></div>');function Xr(j,e){se(e,!0);const t="13rem";let l=be(),v=pe(),h=C(!1),$=C(""),m=C(void 0),w=C(i(_e())),y=re(()=>`/auth/v1/clients/${e.client.id}/logo?${r(w)}`),g=re(()=>`/auth/v1/theme/${e.client.id}`);ge(()=>{k()});async function k(){var b;let x=await je(r(g));x.body?(x.body.client_id==="rauthy"&&console.log("using Rauthy default scheme"),n(m,i(x.body))):n($,i(((b=x.error)==null?void 0:b.message)||"Error"))}async function R(x,b){if(!r(m)){console.error("theme is undefined");return}let B=r(m);B.client_id=e.client.id;let z=await ze(r(g),B);z.error?n($,i(z.error.message)):(n(h,!0),setTimeout(()=>{n(h,!1)},2e3))}async function _(){let x=await Lt(r(g));x.error?n($,i(x.error.message)):(await k(),n(h,!0),setTimeout(()=>{n(h,!1)},2e3))}async function p(){n(w,i(_e()))}Ne(j,{get action(){return r(g)},onSubmit:R,children:(x,b)=>{var B=Hr(),z=d(B);{var N=J=>{var L=Kr(),S=oe(L),o=d(S),U=d(o);$e(U,()=>v.clients.branding.descVariables),c(o);var O=a(o,2);he(O,{label:"--border-radius",placeholder:"--border-radius",get errMsg(){return v.validation.css},width:t,required:!0,pattern:It,get value(){return r(m).border_radius},set value(K){r(m).border_radius=K}});var A=a(O,4);Mt(A,{inputWidth:t,get values(){return r(m).light},set values(K){r(m).light=K}});var f=a(A,6);Mt(f,{inputWidth:t,get values(){return r(m).dark},set values(K){r(m).dark=K}}),c(S);var Z=a(S,2),M=d(Z);hr(M,()=>r(w),K=>{Gr(K,{get logoUrl(){return r(y)},get theme(){return r(m)}})});var ae=a(M,6),me=re(()=>`/auth/v1/clients/${e.client.id}/logo`);gr(ae,{method:"PUT",get url(){return r(me)},fileName:"logo",onSuccess:p});var ee=a(ae,2),P=d(ee);ce(P,{type:"submit",children:(K,ue)=>{W();var de=G();T(()=>E(de,l.common.save)),u(K,de)},$$slots:{default:!0}});var I=a(P,2);ce(I,{level:-2,onclick:_,children:(K,ue)=>{W();var de=G();T(()=>E(de,v.common.reset)),u(K,de)},$$slots:{default:!0}});var te=a(I,2);{var X=K=>{Rt(K,{})};Y(te,K=>{r(h)&&K(X)})}c(ee);var ie=a(ee,2);{var le=K=>{var ue=Jr(),de=d(ue,!0);c(ue),T(()=>E(de,r($))),u(K,ue)};Y(ie,K=>{r($)&&K(le)})}c(Z),u(J,L)};Y(z,J=>{r(m)&&J(N)})}c(B),u(x,B)},$$slots:{default:!0}}),ne()}var Vr=Q('<div class="flex"><!></div> <div class="details"><!></div>',1);function Yr(j,e){se(e,!0);let t=be(),l=pe();const v=[l.nav.config,"Secret","Branding",t.common.delete];let h=C(i(v[0])),$=C(void 0);ge(()=>{e.client.id&&requestAnimationFrame(()=>{var p;(p=r($))==null||p()})});var m=Vr(),w=oe(m),y=d(w);Et(y,{tabs:v,get selected(){return r(h)},set selected(p){n(h,i(p))},get focusFirst(){return r($)},set focusFirst(p){n($,i(p))}}),c(w);var g=a(w,2),k=d(g);{var R=p=>{Rr(p,{get client(){return e.client},get clients(){return e.clients},get scopesAll(){return e.scopesAll},get onSave(){return e.onSave}})},_=p=>{var x=ye(),b=oe(x);{var B=N=>{Mr(N,{get client(){return e.client}})},z=N=>{var J=ye(),L=oe(J);{var S=U=>{Xr(U,{get client(){return e.client}})},o=U=>{var O=ye(),A=oe(O);{var f=Z=>{Br(Z,{get client(){return e.client},get onSave(){return e.onSave}})};Y(A,Z=>{r(h)===t.common.delete&&Z(f)},!0)}u(U,O)};Y(L,U=>{r(h)==="Branding"?U(S):U(o,!1)},!0)}u(N,J)};Y(b,N=>{r(h)==="Secret"?N(B):N(z,!1)},!0)}u(p,x)};Y(k,p=>{r(h)===l.nav.config?p(R):p(_,!1)})}c(g),u(j,m),ne()}var ea=Q("<div></div> <!>",1),ta=Q("<!> <!>",1),ra=Q('<div class="err"> </div>'),aa=Q('<!> <div id="groups"><!></div>',1),la=Q("<!> <!>",1);function ia(j,e){se(e,!0);let t=C(void 0),l=C(""),v=C(i([])),h=C(i([])),$=C(void 0),m=nr("cid"),w=C(i([]));const y=["ID"];let g=C(i(y[0])),k=C("");const R=["ID"];Yt(()=>{_(),p()}),ge(()=>{n($,i(r(v).find(L=>L.id===m.get())))}),ge(()=>{let L=r(k).toLowerCase();L?r(g)===y[0]&&n(h,i(r(v).filter(S=>S.id.toLowerCase().includes(L)))):n(h,i(r(v)))});async function _(){var S;let L=await At("/auth/v1/clients");L.body?n(v,i(L.body)):n(l,i(((S=L.error)==null?void 0:S.message)||"Error"))}async function p(){var S;let L=await At("/auth/v1/scopes");L.body?n(w,i(L.body.map(o=>o.name))):n(l,i(((S=L.error)==null?void 0:S.message)||"Error"))}function x(L,S){let o=S==="up";L===R[0]&&r(v).sort((U,O)=>o?U.id.localeCompare(O.id):O.id.localeCompare(U.id))}function b(){_()}async function B(L){var S;(S=r(t))==null||S(),await _(),m.set(L)}var z=la(),N=oe(z);ir(N,{paddingTop:"2.1rem",buttonTilesAriaControls:"groups",width:"min(20rem, 100dvw)",thresholdNavSub:700,buttonTiles:L=>{var S=ea(),o=oe(S);F(o,"height",".5rem");var U=a(o,2);Me(U,17,()=>r(h),O=>O.id,(O,A)=>{var f=re(()=>m.get()===r(A).id);lr(O,{onclick:()=>m.set(r(A).id),get selected(){return r(f)},children:(Z,M)=>{W();var ae=G();T(()=>E(ae,r(A).id)),u(Z,ae)},$$slots:{default:!0}})}),u(L,S)},children:(L,S)=>{var o=ta(),U=oe(o),O=re(()=>r(v).length===0?1:2);rr(U,{get level(){return r(O)},alignRight:!0,get closeModal(){return r(t)},set closeModal(f){n(t,i(f))},children:(f,Z)=>{Ar(f,{onSave:B,get clients(){return r(v)}})},$$slots:{default:!0}});var A=a(U,2);sr(A,{searchOptions:y,orderOptions:R,onChangeOrder:x,searchWidth:"min(19.5rem, 100dvw - .5rem)",get searchOption(){return r(g)},set searchOption(f){n(g,i(f))},get value(){return r(k)},set value(f){n(k,i(f))}}),u(L,o)},$$slots:{buttonTiles:!0,default:!0}});var J=a(N,2);ar(J,{children:(L,S)=>{var o=aa(),U=oe(o);{var O=M=>{var ae=ra(),me=d(ae,!0);c(ae),T(()=>E(me,r(l))),u(M,ae)};Y(U,M=>{r(l)&&M(O)})}var A=a(U,2),f=d(A);{var Z=M=>{Yr(M,{get client(){return r($)},get clients(){return r(v)},get scopesAll(){return r(w)},onSave:b})};Y(f,M=>{r($)&&M(Z)})}c(A),u(L,o)},$$slots:{default:!0}}),u(j,z),ne()}function sa(j){ia(j,{})}export{sa as component};
