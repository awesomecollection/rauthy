import{a as f,t as E,e as U}from"../chunks/disclose-version.BP4T4xdV.js";import{l as m,a5 as W,f as ee,t as u,p as ae,a as se,k as t,s as r,j as c,c as o,r as a,a7 as re}from"../chunks/index-client.hxMyB_b4.js";import{s as i}from"../chunks/render.yNX9q8-B.js";import{i as D}from"../chunks/if.BeBa1Kxb.js";import{e as oe,i as te}from"../chunks/each.BUp7aLCc.js";import{p as v}from"../chunks/proxy.DaVNR9vk.js";import{B as ie}from"../chunks/Button.BR1gOfNn.js";import{I as ce}from"../chunks/IconCheck.C6tGCpWy.js";import{f as ne,b as pe}from"../chunks/fetch.Bq59EV_b.js";import{u as ve}from"../chunks/i18n_admin.svelte.lt3dD7TQ.js";import{O as me}from"../chunks/Options.CjsqRicG.js";var le=E('<li class="font-mono"> </li>'),ye=E('<div class="err"> </div>'),de=E('<h3> </h3> <p> </p> <p> </p> <p><span class="font-label"> </span> <span class="active font-mono svelte-lxghyr"> </span></p> <p> </p> <ul></ul> <p> </p> <p> </p> <!> <div class="btn svelte-lxghyr"><!></div> <!> <!>',1);function fe(g,F){se(F,!0);let n=ve(),l=m(""),y=m(!0),I=m(""),d=m(""),K=m(v([])),b=m(!1);W(async()=>{var s;let e=await ne("/auth/v1/encryption/keys");e.body?(t(K,v(e.body.keys)),t(I,v(e.body.active)),t(d,v(e.body.active))):t(l,v(((s=e.error)==null?void 0:s.message)||"Error")),t(y,!1)});async function G(){t(y,!0);let e={key_id:c(d)},s=await pe("/auth/v1/encryption/migrate",e);s.error?t(l,v(s.error.message)):(t(b,!0),setTimeout(()=>{t(b,!1)},4e3)),t(y,!1)}var O=de(),h=ee(O),H=o(h,!0);a(h);var k=r(h,2),J=o(k,!0);a(k);var $=r(k,2),N=o($,!0);a($);var x=r($,2),L=o(x),P=o(L);a(L);var q=r(L,2),Q=o(q,!0);a(q),a(x);var T=r(x,2),R=o(T);a(T);var w=r(T,2);oe(w,21,()=>c(K),te,(e,s)=>{var p=le(),M=o(p,!0);a(p),u(()=>i(M,c(s))),f(e,p)}),a(w);var A=r(w,2),S=o(A,!0);a(A);var j=r(A,2),V=o(j);a(j);var z=r(j,2);me(z,{get ariaLabel(){return n.docs.encKeys.migrateToKey},get options(){return c(K)},get value(){return c(d)},set value(e){t(d,v(e))}});var B=r(z,2),X=o(B);ie(X,{onclick:G,get isLoading(){return c(y)},children:(e,s)=>{re();var p=U();u(()=>i(p,n.docs.encKeys.migrate)),f(e,p)},$$slots:{default:!0}}),a(B);var C=r(B,2);{var Y=e=>{var s=ye(),p=o(s,!0);a(s),u(()=>i(p,c(l))),f(e,s)};D(C,e=>{c(l)&&e(Y)})}var Z=r(C,2);{var _=e=>{ce(e,{})};D(Z,e=>{c(b)&&e(_)})}u(()=>{i(H,n.docs.encKeys.header),i(J,n.docs.encKeys.p1),i(N,n.docs.encKeys.p2),i(P,`${n.docs.encKeys.keyActive??""}:`),i(Q,c(I)),i(R,`${n.docs.encKeys.keysAvailable??""}:`),i(S,n.docs.encKeys.p3),i(V,`${n.docs.encKeys.migrateToKey??""}:`)}),f(g,O),ae()}function ue(g){fe(g,{})}export{ue as component};
