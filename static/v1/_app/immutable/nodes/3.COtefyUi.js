import"../chunks/disclose-version.BDr9Qe-U.js";import{U as t,R as o,W as a,T as w,p as We,P as A,b as ia,j as v,g as e,a as Le,h as Ie,Q as le,V as re,o as Ge,$ as _t}from"../chunks/index-client.CzqVbBUo.js";import{h as xt}from"../chunks/svelte-head.BSz900xL.js";import{a as l,b as W,c as we,n as La,t as se}from"../chunks/template.C3U8HW1x.js";import{i as D,p as m}from"../chunks/if.BnegfJmL.js";import{K as Be,a5 as wa,a6 as Nt,_ as It,P as Ct,a7 as qt,N as Pt,g as Dt,t as za,u as jt,a8 as Ut,a9 as Wt,aa as Lt,ab as Ma,ac as Ta,n as Je,ad as Ea,ae as zt,A as Se,B as Ae,af as Mt,x as Ra,W as Tt,ag as Et,ah as Rt,w as Vt,ai as Kt,Q as At,aj as Ot,ak as Bt,E as Ht,Y as Ft,al as Gt,Z as Va,am as Jt}from"../chunks/dataFetching.CF6CPDU9.js";import{d as Ka,e as Aa,s as d,r as St}from"../chunks/render.DOFZNw8l.js";import{t as Te,s as _e,f as Ke,e as Qt,g as ne,B as qe,h as Yt,a as Xt}from"../chunks/Button.65naIT6w.js";import{h as Oa,T as Zt,a as er,S as Ba,b as ar,D as tr,c as rr}from"../chunks/Devices.BImHv0OM.js";import{p as K,r as sr,s as nr,a as ir}from"../chunks/props.C_MHtC74.js";import{r as ba}from"../chunks/legacy-client.DtCljIS0.js";import{e as Ha}from"../chunks/OptionSelect.CIygkAfc.js";import{t as He,s as Fe,b as ie}from"../chunks/helpers.BvaXa0cv.js";import{C as oa}from"../chunks/CheckIcon.DvwC4MNL.js";import{s as Fa}from"../chunks/snippet.B82X2vfx.js";import{b as Ga}from"../chunks/this.CLOcaDU7.js";import{u as Ee}from"../chunks/i18n.svelte.C_qSL0ZA.js";import{c as Qe,a as Pe,b as or,I as Re}from"../chunks/Input.BRe7i--g.js";import{t as lr}from"../chunks/tweened.B25itCeH.js";import{L as Ja}from"../chunks/LangSelector.DlaDUv8u.js";import{P as cr}from"../chunks/PasswordPolicy.DA8XElUB.js";import{P as ga}from"../chunks/PasswordInput.BNTSsZot.js";import{W as vr}from"../chunks/WebauthnRequest.Dv2jfFi4.js";import{T as dr}from"../chunks/Template.CJON1Uel.js";import{M as ur,C as pr}from"../chunks/ContentCenter.D3vmDIv7.js";var mr=W('<div class="container svelte-1yqkxw6"><div class="loading svelte-1yqkxw6"><div class="loading-1 svelte-1yqkxw6"></div> <div class="loading-2 svelte-1yqkxw6"></div> <div class="loading-3 svelte-1yqkxw6"></div></div></div>');function Sa(O,i){let r=K(i,"background",3,!1),b=K(i,"color",3,"hsl(var(--text))"),s=K(i,"global",3,!1),p=K(i,"offset",3,0);var h=mr(),u=t(h),j=t(u),g=o(j,2),k=o(g,2);a(u),a(h),w(()=>{He(h,"global",s()),He(h,"local",!s()),He(h,"background",r()),_e(u,"style",`margin-top: ${p()??""}px;`),Fe(j,"background",b()),Fe(g,"background",b()),Fe(k,"background",b())}),Te(3,h,()=>Ke,()=>({duration:100})),l(O,h)}var hr=W('<div class="load svelte-av2wub"><!></div>'),fr=W('<div class="font-label svelte-av2wub"><!></div>'),wr=W("<button><!></button>");function br(O,i){We(i,!0);let r=K(i,"type",3,"button"),b=K(i,"role",3,"button"),s=K(i,"ref",15),p=K(i,"level",3,1),h=K(i,"isDisabled",3,!1),u=K(i,"isLoading",3,!1),j=K(i,"invisible",3,!1),g=K(i,"invisibleOutline",3,!1),k=sr(i,["$$slots","$$events","$$legacy","type","role","ref","id","ariaLabel","ariaControls","ariaCurrent","level","width","isDisabled","isLoading","invisible","invisibleOutline","popovertarget","popovertargetaction","onclick","onLeft","onRight","onUp","onDown","children"]),M=Ie(()=>{if(j())return"invisible";switch(p()){case-1:return"l1d";case-2:return"l2d";case-3:return"l3d";case 2:return"l2";case 3:return"l3";default:return"l1"}}),N=A(!u()),F=Ie(()=>h()||u());ia(()=>{u()?setTimeout(()=>{v(N,!1)},120):setTimeout(()=>{v(N,!0)},120)});function P(){switch(p()){case-1:return"var(--btn-text)";case-2:return"hsl(var(--error))";case-3:return"hsl(var(--error))";case 2:return"hsl(var(--action))";case 3:return"hsl(var(--action))";default:return"var(--btn-text)"}}function I(C){var V,Z,S,Q,ee;switch(C.code){case"Enter":(V=i.onclick)==null||V.call(i,C);break;case"ArrowLeft":(Z=i.onLeft)==null||Z.call(i);break;case"ArrowRight":(S=i.onRight)==null||S.call(i);break;case"ArrowUp":(Q=i.onUp)==null||Q.call(i);break;case"ArrowDown":(ee=i.onDown)==null||ee.call(i);break}}var T=wr();let Y;var J=t(T);{var L=C=>{var V=hr(),Z=t(V),S=Ie(P);Sa(Z,{background:!1,get color(){return e(S)}}),a(V),l(C,V)},G=C=>{var V=we(),Z=le(V);{var S=Q=>{var ee=fr(),ae=t(ee);Fa(ae,()=>i.children),a(ee),Te(1,ee,()=>Ke),l(Q,ee)};D(Z,Q=>{e(N)&&Q(S)},!0)}l(C,V)};D(J,C=>{u()?C(L):C(G,!1)})}a(T),Ga(T,C=>s(C),()=>s()),w(()=>{Y=Qt(T,Y,{role:b(),type:r(),id:i.id,"aria-label":i.ariaLabel,"aria-controls":i.ariaControls,"aria-current":i.ariaCurrent,class:e(M),"data-isloading":u(),onclick:i.onclick,onkeydown:I,disabled:e(F),"aria-disabled":e(F),popovertarget:i.popovertarget,popovertargetaction:i.popovertargetaction,...k},"svelte-av2wub"),He(T,"invisibleOutline",g()),Fe(T,"width",i.width)}),l(O,T),Le()}var gr=La('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function $r(O,i){let r=K(i,"opacity",3,.9),b=K(i,"width",3,"1.5rem"),s=K(i,"color",3,"hsl(var(--error))");var p=gr();_e(p,"stroke-width",2),w(()=>{_e(p,"width",b()),_e(p,"color",s()),_e(p,"opacity",r())}),l(O,p)}function yr(O,i,r){i()||r()}function kr(O){O.stopPropagation()}var _r=W('<span class="closeIcon svelte-1w7l4fj"><!></span>'),xr=W('<div class="relative"><div class="absolute close svelte-1w7l4fj"><!></div></div>'),Nr=W('<dialog aria-modal="true" class="svelte-1w7l4fj"><div role="none" class="svelte-1w7l4fj"><!> <!></div></dialog>');function Ir(O,i){We(i,!0);let r=K(i,"showModal",15),b=K(i,"closeModal",15),s=K(i,"strict",3,!1),p=K(i,"prerender",3,!1),h=Ee(),u;ia(()=>{b(j)}),ia(()=>{r()&&(u==null||u.showModal())});function j(I){I==null||I.preventDefault(),u==null||u.close(),r(!1)}var g=Nr();g.__click=[yr,s,j];var k=t(g);k.__click=[kr];var M=t(k);{var N=I=>{var T=xr(),Y=t(T),J=t(Y);br(J,{get ariaLabel(){return h.common.close},invisible:!0,onclick:j,children:(L,G)=>{var C=_r(),V=t(C);$r(V,{color:"currentColor",width:"1.2rem"}),a(C),l(L,C)},$$slots:{default:!0}}),a(Y),a(T),l(I,T)};D(M,I=>{s()||I(N)})}var F=o(M,2);{var P=I=>{var T=we(),Y=le(T);Fa(Y,()=>i.children),l(I,T)};D(F,I=>{(p()||r())&&I(P)})}a(k),a(g),Ga(g,I=>u=I,()=>u),w(()=>_e(g,"data-strict",s())),Aa("close",g,()=>{var I;r(!1),(I=i.onClose)==null||I.call(i)}),l(O,g),Le()}Ka(["click"]);var Cr=W('<div class="link-err value svelte-bckoh9"> </div>'),qr=W('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),Pr=(O,i)=>v(i,!e(i)),Dr=W('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),jr=W('<p> </p> <div class="providers svelte-bckoh9"></div>',1),Ur=W('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),Wr=W('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),Lr=W('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),zr=W('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Qa(O,i){We(i,!0);let r=K(i,"user",15),b=K(i,"viewModePhone",3,!1),s=Ee(),p=A(!1),h=A(!1),u=Ie(()=>{var X;return(X=r().account_type)==null?void 0:X.startsWith("federated")}),j=Ie(()=>{var X;return e(u)?`${r().account_type}: ${((X=i.authProvider)==null?void 0:X.name)||""}`:r().account_type}),g=Ie(()=>b()?"rowPhone":"row"),k=Ie(()=>b()?"labelPhone":"label");function M(X){It(64,(me,{challenge:xe,verifier:Ne})=>{me||(localStorage.setItem(Ct,Ne),N(X,xe))})}async function N(X,me){let xe={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:X,pkce_challenge:me},Ne=await qt(X,xe);if(Ne.ok){const Ce=await Ne.text();Pt(Ce),window.location.href=Ne.headers.get("location")}else{let Ce=await Ne.json();console.error(Ce)}}async function F(){let X=await Nt(),me=await X.json();X.ok?r(me):v(p,!0)}var P=zr(),I=t(P),T=t(I),Y=t(T),J=t(Y);a(Y),a(T);var L=o(T,2),G=t(L,!0);a(L),a(I);var C=o(I,2),V=t(C),Z=t(V),S=t(Z);a(Z),a(V);var Q=o(V,2),ee=t(Q,!0);a(Q),a(C);var ae=o(C,2),ue=t(ae),B=t(ue),U=t(B);a(B),a(ue);var E=o(ue,2),y=t(E,!0);a(E),a(ae);var x=o(ae,2),$=t(x),c=t($),q=t(c);a(c),a($);var n=o($,2),_=t(n,!0);a(n),a(x);var f=o(x,2),R=t(f),te=t(R),oe=t(te);a(te),a(R);var he=o(R,2),pe=t(he),be=t(pe,!0);a(pe);var ge=o(pe,2);{var ke=X=>{var me=qr(),xe=t(me);qe(xe,{level:3,$$events:{click:F},children:(De,Ue)=>{re();var Oe=se();w(()=>d(Oe,s.account.providerUnlink)),l(De,Oe)},$$slots:{default:!0}});var Ne=o(xe,2);{var Ce=De=>{var Ue=Cr(),Oe=t(Ue,!0);a(Ue),w(()=>d(Oe,s.account.providerUnlinkDesc)),l(De,Ue)};D(Ne,De=>{e(p)&&De(Ce)})}a(me),l(X,me)},je=X=>{var me=we(),xe=le(me);{var Ne=Ce=>{var De=Ur(),Ue=le(De);Ue.__click=[Pr,h];var Oe=t(Ue,!0);a(Ue);var gt=o(Ue,2);Ir(gt,{get showModal(){return e(h)},set showModal(ua){v(h,m(ua))},children:(ua,fs)=>{var Da=jr(),pa=le(Da),$t=t(pa,!0);a(pa);var ja=o(pa,2);Ha(ja,21,()=>i.providers,ma=>ma.id,(ma,ha)=>{qe(ma,{level:3,$$events:{click:()=>M(e(ha).id)},children:(yt,ws)=>{var fa=Dr(),Ua=t(fa),Wa=o(Ua,2),kt=t(Wa,!0);a(Wa),a(fa),w(()=>{_e(Ua,"src",`/auth/v1/providers/${e(ha).id}/img`),d(kt,e(ha).name)}),l(yt,fa)},$$slots:{default:!0}})}),a(ja),w(()=>d($t,s.account.providerLinkDesc)),l(ua,Da)},$$slots:{default:!0}}),w(()=>d(Oe,s.account.providerLink)),Aa("keypress",Ue,()=>v(h,!e(h))),l(Ce,De)};D(xe,Ce=>{i.providers.length>0&&Ce(Ne)},!0)}l(X,me)};D(ge,X=>{e(u)?X(ke):X(je,!1)})}a(he),a(f);var $e=o(f,2),z=t($e),ce=t(z),ve=t(ce);a(ce),a(z);var ye=o(z,2),de=t(ye,!0);a(ye),a($e);var H=o($e,2),fe=t(H),Ve=t(fe),ze=t(Ve);a(Ve),a(fe);var Me=o(fe,2),la=t(Me,!0);a(Me),a(H);var ca=o(H,2),Ye=t(ca),$a=t(Ye),rt=t($a);a($a),a(Ye);var st=o(Ye,2),nt=Ie(()=>!!r().webauthn_user_id);oa(st,{get check(){return e(nt)}}),a(ca);var va=o(ca,2),Xe=t(va),ya=t(Xe),it=t(ya);a(ya),a(Xe);var ot=o(Xe,2);oa(ot,{get check(){return r().enabled}}),a(va);var da=o(va,2),Ze=t(da),ka=t(Ze),lt=t(ka);a(ka),a(Ze);var ct=o(Ze,2);oa(ct,{get check(){return r().email_verified}}),a(da);var ea=o(da,2),aa=t(ea),_a=t(aa),vt=t(_a);a(_a),a(aa);var xa=o(aa,2),dt=t(xa,!0);w(()=>d(dt,Be(r().last_login))),a(xa),a(ea);var ta=o(ea,2),ra=t(ta),Na=t(ra),ut=t(Na);a(Na),a(ra);var Ia=o(ra,2),pt=t(Ia,!0);w(()=>d(pt,r().password_expires&&Be(r().password_expires)||s.common.never)),a(Ia),a(ta);var sa=o(ta,2),na=t(sa),Ca=t(na),mt=t(Ca);a(Ca),a(na);var qa=o(na,2),ht=t(qa,!0);w(()=>d(ht,Be(r().created_at))),a(qa),a(sa);var Pa=o(sa,2);{var ft=X=>{var me=Wr(),xe=t(me),Ne=t(xe),Ce=t(Ne);a(Ne),a(xe);var De=o(xe,2),Ue=t(De,!0);w(()=>d(Ue,Be(r().user_expires))),a(De),a(me),w(()=>{ie(me,ne(e(g)),"svelte-bckoh9"),ie(xe,ne(e(k)),"svelte-bckoh9"),d(Ce,`${s.account.userExpiry??""}:`)}),l(X,me)};D(Pa,X=>{r().user_expires&&X(ft)})}var wt=o(Pa,2);{var bt=X=>{var me=Lr(),xe=t(me),Ne=o(xe,2),Ce=t(Ne);w(()=>_e(Ce,"href",wa(r().id)));var De=t(Ce);Oa(De,()=>wa(r().id).replace("/auth/","/auth/<wbr/>")),a(Ce),a(Ne),a(me),w(()=>{ie(me,ne(e(g)),"svelte-bckoh9"),ie(xe,ne(e(k)),"svelte-bckoh9")}),l(X,me)};D(wt,X=>{i.webIdData&&X(bt)})}a(P),w(()=>{ie(I,ne(e(g)),"svelte-bckoh9"),ie(T,ne(e(k)),"svelte-bckoh9"),d(J,`${s.common.email??""}:`),d(G,r().email),ie(C,ne(e(g)),"svelte-bckoh9"),ie(V,ne(e(k)),"svelte-bckoh9"),d(S,`${s.account.givenName??""}:`),d(ee,r().given_name),ie(ae,ne(e(g)),"svelte-bckoh9"),ie(ue,ne(e(k)),"svelte-bckoh9"),d(U,`${s.account.familyName??""}:`),d(y,r().family_name),ie(x,ne(e(g)),"svelte-bckoh9"),ie($,ne(e(k)),"svelte-bckoh9"),d(q,`${s.account.user??""} ID:`),d(_,r().id),ie(f,ne(e(g)),"svelte-bckoh9"),ie(R,ne(e(k)),"svelte-bckoh9"),d(oe,`${s.account.accType??""}:`),d(be,e(j)||""),ie($e,ne(e(g)),"svelte-bckoh9"),ie(z,ne(e(k)),"svelte-bckoh9"),d(ve,`${s.account.roles??""}:`),d(de,r().roles||"None"),ie(H,ne(e(g)),"svelte-bckoh9"),ie(fe,ne(e(k)),"svelte-bckoh9"),d(ze,`${s.account.groups??""}:`),d(la,r().groups||"None"),ie(Ye,ne(e(k)),"svelte-bckoh9"),d(rt,`${s.account.mfaActivated??""}:`),ie(Xe,ne(e(k)),"svelte-bckoh9"),d(it,`${s.account.userEnabled??""}:`),ie(Ze,ne(e(k)),"svelte-bckoh9"),d(lt,`${s.account.emailVerified??""}:`),ie(ea,ne(e(g)),"svelte-bckoh9"),ie(aa,ne(e(k)),"svelte-bckoh9"),d(vt,`${s.account.lastLogin??""}:`),ie(ta,ne(e(g)),"svelte-bckoh9"),ie(ra,ne(e(k)),"svelte-bckoh9"),d(ut,`${s.account.passwordExpiry??""}:`),ie(sa,ne(e(g)),"svelte-bckoh9"),ie(na,ne(e(k)),"svelte-bckoh9"),d(mt,`${s.account.userCreated??""}:`)}),l(O,P),Le()}Ka(["click"]);function Ya(O,i){We(i,!0);let r=K(i,"selected",15),b=K(i,"showWebId",3,!1),s=Ee(),p=m(b()?[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,"WebID",s.account.devices,s.account.navLogout]:[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,s.account.devices,s.account.navLogout]);Ge(()=>{Dt().v==="devices"&&r(s.account.devices)}),Zt(O,{get labels(){return p},get selected(){return r()},set selected(h){r(h)}}),Le()}var Mr=W("<p> </p>"),Tr=W('<div class="success svelte-1xh7x72">Update successful <!></div>'),Er=W('<div class="err svelte-1xh7x72"> </div>'),Rr=W('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Xa(O,i){We(i,!0);let r=K(i,"user",31,()=>m({})),b=K(i,"viewModePhone",3,!1),s=Ee(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="8rem";let u=A(!1),j=A(""),g=A(!1),k=A(!1),M=m({email:r().email,givenName:r().given_name,familyName:r().family_name}),N=A(m({}));const F=Qe().shape({email:Pe().required(s.account.validEmail).email(s.account.validEmail),givenName:Pe().required(s.account.validGivenName).matches(za,s.account.validGivenName),familyName:Pe().nullable().matches(jt,s.account.validFamilyName)});let P=A(m({}));const I=Qe().shape({birthdate:Pe().nullable().trim().matches(Ut,s.common.invalidInput),phone:Pe().nullable().trim().matches(Wt,"+..."),street:Pe().nullable().trim().matches(Lt,s.common.invalidInput),zip:or().nullable().min(1e3).max(999999),city:Pe().nullable().trim().matches(Ma,s.common.invalidInput),country:Pe().nullable().trim().matches(Ma,s.common.invalidInput)});function T(n){n.code==="Enter"&&Y()}async function Y(){if(!await J()){v(j,m(s.common.invalidInput));return}v(u,!0);const n={email:M.email,given_name:M.givenName,family_name:M.familyName||null,user_values:r().user_values};n.user_values.phone&&(n.user_values.phone=n.user_values.phone.replaceAll(" ","")),n.user_values.zip&&(n.user_values.zip=Number.parseInt(n.user_values.zip));let _=await Ta(r().id,n);if(_.ok)v(g,!0),r(r().email=M.email,!0),r(r().given_name=M.givenName,!0),r(r().family_name=M.familyName,!0),_.status===202&&v(k,!0);else{let f=await _.json();v(j,m(f.message))}v(u,!1)}async function J(){let n=!0;try{await F.validate(M,{abortEarly:!1}),v(N,m({}))}catch(_){v(N,m(Je(_))),n=!1}try{await I.validate(r().user_values,{abortEarly:!1}),v(P,m({}))}catch(_){v(P,m(Je(_))),n=!1}return n}var L=Rr(),G=t(L),C=t(G);Re(C,{autocomplete:"family-name",get placeholder(){return s.common.email},get width(){return e(p)},get value(){return M.email},set value(n){M.email=n},get error(){return e(N).email},set error(n){e(N).email=n},$$events:{input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.common.email.toUpperCase())),l(n,f)},$$slots:{default:!0}});var V=o(C,2);Re(V,{autocomplete:"given-name",get placeholder(){return s.account.givenName},get width(){return e(p)},get value(){return M.givenName},set value(n){M.givenName=n},get error(){return e(N).givenName},set error(n){e(N).givenName=n},$$events:{input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.givenName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var Z=o(V,2);Re(Z,{autocomplete:"family-name",get placeholder(){return s.account.familyName},get width(){return e(p)},get value(){return M.familyName},set value(n){M.familyName=n},get error(){return e(N).familyName},set error(n){e(N).familyName=n},$$events:{input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.familyName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var S=o(Z,2);Fe(S,"margin",".5rem");var Q=t(S,!0);a(S);var ee=o(S,2);Re(ee,{autocomplete:"street-address",get placeholder(){return s.account.street},get width(){return e(p)},get value(){return r().user_values.street},set value(n){r(r().user_values.street=n,!0)},get error(){return e(P).street},set error(n){e(P).street=n},$$events:{keypress:T,input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.street.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ae=o(ee,2);Re(ae,{type:"number",autocomplete:"postal-code",get placeholder(){return s.account.zip},min:1e3,max:999999,get width(){return e(p)},get value(){return r().user_values.zip},set value(n){r(r().user_values.zip=n,!0)},get error(){return e(P).zip},set error(n){e(P).zip=n},$$events:{keypress:T,input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.zip.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ue=o(ae,2);Re(ue,{autocomplete:"adress-level2",get placeholder(){return s.account.city},get width(){return e(p)},get value(){return r().user_values.city},set value(n){r(r().user_values.city=n,!0)},get error(){return e(P).city},set error(n){e(P).city=n},$$events:{keypress:T,input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.city.toUpperCase())),l(n,f)},$$slots:{default:!0}});var B=o(ue,2);Re(B,{autocomplete:"country",get placeholder(){return s.account.country},get width(){return e(p)},get value(){return r().user_values.country},set value(n){r(r().user_values.country=n,!0)},get error(){return e(P).country},set error(n){e(P).country=n},$$events:{keypress:T,input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.country.toUpperCase())),l(n,f)},$$slots:{default:!0}});var U=o(B,2);Re(U,{autocomplete:"tel",get placeholder(){return s.account.phone},get width(){return e(p)},get value(){return r().user_values.phone},set value(n){r(r().user_values.phone=n,!0)},get error(){return e(P).phone},set error(n){e(P).phone=n},$$events:{keypress:T,input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.phone.toUpperCase())),l(n,f)},$$slots:{default:!0}});var E=o(U,2);Re(E,{type:"date",autocomplete:"bday",get placeholder(){return s.account.birthdate},get width(){return e(p)},get value(){return r().user_values.birthdate},set value(n){r(r().user_values.birthdate=n,!0)},get error(){return e(P).birthdate},set error(n){e(P).birthdate=n},$$events:{keypress:T,input:J},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.birthdate.toUpperCase())),l(n,f)},$$slots:{default:!0}});var y=o(E,2);qe(y,{width:h,level:1,get isLoading(){return e(u)},set isLoading(n){v(u,m(n))},$$events:{click:Y},children:(n,_)=>{re();var f=se();w(()=>d(f,s.common.save)),l(n,f)},$$slots:{default:!0}});var x=o(y,2),$=t(x);{var c=n=>{var _=Tr(),f=o(t(_));{var R=te=>{var oe=Mr(),he=t(oe,!0);a(oe),w(()=>d(he,s.account.emailUpdateConfirm)),l(te,oe)};D(f,te=>{e(k)&&te(R)})}a(_),Te(3,_,()=>Ke),l(n,_)},q=n=>{var _=we(),f=le(_);{var R=te=>{var oe=Er(),he=t(oe,!0);a(oe),w(()=>d(he,e(j))),Te(3,oe,()=>Ke),l(te,oe)};D(f,te=>{e(j)&&te(R)},!0)}l(n,_)};D($,n=>{e(g)?n(c):n(q,!1)})}a(x),a(G),a(L),w(()=>d(Q,s.account.optionalValues)),l(O,L),Le()}var Vr=La('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Kr(O,i){let r=K(i,"opacity",3,.9),b=K(i,"width",3,24),s=K(i,"color",3,"currentColor");var p=Vr();_e(p,"stroke-width",2),w(()=>{_e(p,"stroke",s()),_e(p,"width",b()),_e(p,"opacity",r())}),l(O,p)}var Ar=W('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),Or=W('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Br=W('<div class="keysHeader svelte-q7vfo0"> </div>'),Hr=W("<div><!></div>"),Fr=W('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Gr=W('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Jr=W('<div class="button svelte-q7vfo0"><!></div>'),Sr=W('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Za(O,i){We(i,!0);let r=K(i,"user",19,()=>({})),b=Ee(),s=A(!1),p=A(""),h=A(!1),u=A(r().account_type==="password"),j=A(m([]));ba(()=>{e(j).length>0&&r().account_type==="passkey"&&v(u,e(j).length>1)});let g=m({passkeyName:""}),k=A(m({}));const M=Qe().shape({passkeyName:Pe().required(b.common.invalidInput).matches(za,b.mfa.passkeyNameErr)});Ge(()=>{F()});function N(){v(s,!1),v(p,"")}async function F(){let y=await Ea(i.session.user_id),x=await y.json();y.ok?v(j,m(x)):console.error("error fetching passkeys: "+x.message)}async function P(){if(N(),!await Y())return;const y=g.passkeyName;if(y.length<2){v(s,!0),v(p,m(b.mfa.passkeyNameErr));return}let x=await zt(r().id,{passkey_name:y});if(x.status===200){let $=await x.json();$.publicKey.challenge=Se($.publicKey.challenge),$.publicKey.user.id=Se($.publicKey.user.id),$.publicKey.excludeCredentials=$.publicKey.excludeCredentials,$.publicKey.excludeCredentials&&($.publicKey.excludeCredentials=$.publicKey.excludeCredentials.map(n=>(n.id=Se(n.id),n)));let c=await navigator.credentials.create($),q={passkey_name:y,data:{id:c.id,rawId:Ae(c.rawId),response:{attestationObject:Ae(c.response.attestationObject),clientDataJSON:Ae(c.response.clientDataJSON)},type:c.type}};x=await Mt(r().id,q),x.status===201?(v(h,!1),g.passkeyName="",await F()):console.error(x)}else v(s,!0),v(p,m(b.mfa.errorReg))}async function I(){N();let y=await Ra(r().id,{purpose:"Test"});if(y.status===200){let x=await y.json(),$=x.rcr;$.publicKey.challenge=Se($.publicKey.challenge);for(let n of $.publicKey.allowCredentials)n.id=Se(n.id);let c;try{c=await navigator.credentials.get($)}catch{v(s,!0),v(p,m(b.mfa.invalidKeyUsed));return}let q={code:x.code,data:{id:c.id,rawId:Ae(c.rawId),response:{authenticatorData:Ae(c.response.authenticatorData),clientDataJSON:Ae(c.response.clientDataJSON),signature:Ae(c.response.signature)},type:c.type}};y=await Tt(r().id,q),y.status===202?(v(p,m(b.mfa.testSuccess)),await F()):console.error(y)}else v(s,!0),v(p,m(b.mfa.testError))}async function T(y){let x=await Et(r().id,y);if(x.status===200)await F();else{let $=await x.json();v(s,!0),v(p,m($.message))}}async function Y(){try{return await M.validate(g,{abortEarly:!1}),v(k,m({})),!0}catch(y){return v(k,m(Je(y))),!1}}var J=Sr(),L=t(J),G=t(L),C=o(G,3);a(L);var V=o(L,2);{var Z=y=>{var x=Ar(),$=le(x);Re($,{autocomplete:"off",get placeholder(){return b.mfa.passkeyName},autofocus:!0,get value(){return g.passkeyName},set value(_){g.passkeyName=_},get error(){return e(k).passkeyName},set error(_){e(k).passkeyName=_},$$events:{input:Y,enter:P},children:(_,f)=>{re();var R=se();w(()=>d(R,b.mfa.passkeyName)),l(_,R)},$$slots:{default:!0}});var c=o($,2),q=t(c);qe(q,{level:1,$$events:{click:P},children:(_,f)=>{re();var R=se();w(()=>d(R,b.mfa.register)),l(_,R)},$$slots:{default:!0}});var n=o(q,2);qe(n,{level:4,$$events:{click:()=>v(h,!1)},children:(_,f)=>{re();var R=se();w(()=>d(R,b.common.cancel)),l(_,R)},$$slots:{default:!0}}),a(c),l(y,x)},S=y=>{var x=Or(),$=t(x);qe($,{level:3,$$events:{click:()=>v(h,!0)},children:(c,q)=>{re();var n=se();w(()=>d(n,b.mfa.registerNew)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};D(V,y=>{e(h)?y(Z):y(S,!1)})}var Q=o(V,2);{var ee=y=>{var x=Br(),$=t(x,!0);a(x),w(()=>d($,b.mfa.registerdKeys)),l(y,x)};D(Q,y=>{e(j).length>0&&y(ee)})}var ae=o(Q,2);Ha(ae,21,()=>e(j),y=>y.name,(y,x)=>{var $=Gr(),c=t($),q=t(c),n=o(q),_=t(n),f=t(_,!0);a(_);var R=o(_,2);{var te=ve=>{er(ve,{get text(){return b.account.userVerifiedTooltip},children:(ye,de)=>{var H=Hr();Fe(H,"margin-bottom","-.25rem");var fe=t(H);Kr(fe,{width:18,color:"var(--col-acnt)"}),a(H),l(ye,H)},$$slots:{default:!0}})};D(R,ve=>{e(x).user_verified&&ve(te)})}a(n),a(c);var oe=o(c,2),he=t(oe),pe=o(he),be=t(pe,!0);w(()=>d(be,Be(e(x).registered))),a(pe),a(oe);var ge=o(oe,2),ke=t(ge),je=o(ke),$e=t(je,!0);w(()=>d($e,Be(e(x).last_used))),a(je),a(ge);var z=o(ge,2);{var ce=ve=>{var ye=Fr(),de=o(t(ye),2),H=t(de);qe(H,{level:4,$$events:{click:()=>T(e(x).name)},children:(fe,Ve)=>{re();var ze=se();w(()=>d(ze,b.mfa.delete.toUpperCase())),l(fe,ze)},$$slots:{default:!0}}),a(de),a(ye),l(ve,ye)};D(z,ve=>{e(u)&&ve(ce)})}a($),w(()=>{d(q,`${`${b.mfa.passkeyName}: `??""} `),d(f,e(x).name),d(he,`${`${b.mfa.registerd}: `??""} `),d(ke,`${`${b.mfa.lastUsed}: `??""} `)}),l(y,$)}),a(ae);var ue=o(ae,2);{var B=y=>{var x=Jr(),$=t(x);qe($,{level:1,$$events:{click:I},children:(c,q)=>{re();var n=se();w(()=>d(n,b.mfa.test)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};D(ue,y=>{e(j).length>0&&y(B)})}var U=o(ue,2),E=t(U,!0);a(U),a(J),w(()=>{d(G,`${b.mfa.p1??""} `),d(C,` ${b.mfa.p2??""}`),He(U,"msg",!e(s)),He(U,"err",e(s)),d(E,e(p))}),l(O,J),Le()}var Qr=W('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Yr(O,i){We(i,!0);let r=K(i,"formValues",31,()=>m({})),b=K(i,"btnWidth",3,"4rem"),s=K(i,"hideCurrentPassword",3,!1),p=K(i,"isValid",15),h=Ee();p(P);let u=A(!1),j=A(""),g=A(void 0),k=A(m({})),M=Ie(()=>{var L;return((L=r().new)==null?void 0:L.length)>6&&r().new===r().verify});const N=Qe().shape({current:Pe().required(h.account.passwordCurrReq),new:Pe().required(h.account.passwordNewReq),verify:Pe().required(h.account.passwordNoMatch)}),F=Qe().shape({new:Pe().required(h.account.passwordNewReq),verify:Pe().required(h.account.passwordNoMatch)});Ge(async()=>{let L=await Rt(),G=await L.json();L.ok?v(g,m(G)):v(j,m(G.message))});async function P(){if(v(j,""),s())try{await F.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(L){return v(k,m(Je(L))),!1}else try{await N.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(L){return v(k,m(Je(L))),!1}return e(u)?r().new.length>256?(v(j,"max 256"),!1):r().new!==r().verify?(v(j,m(h.account.passwordNoMatch)),!1):!0:(v(j,m(h.account.passwordPolicyFollow)),!1)}function I(){const L=e(g).length_min>20?e(g).length_min:20;let G=Vt(L,e(g).include_lower_case,e(g).include_upper_case,e(g).include_digits,e(g).include_special);r(r().new=G,!0),r(r().verify=G,!0)}var T=we(),Y=le(T);{var J=L=>{var G=Qr(),C=t(G);cr(C,{t:h,get policy(){return e(g)},get password(){return r().new},get accepted(){return e(u)},set accepted(B){v(u,m(B))}});var V=o(C,2);{var Z=B=>{ga(B,{get error(){return e(k).current},autocomplete:"current-password",get placeholder(){return h.account.passwordCurr},get width(){return i.inputWidth},get value(){return r().current},set value(U){r(r().current=U,!0)},$$events:{input:P},children:(U,E)=>{re();var y=se();w(()=>d(y,h.account.passwordCurr.toUpperCase())),l(U,y)},$$slots:{default:!0}})};D(V,B=>{s()||B(Z)})}var S=o(V,2);ga(S,{get error(){return e(k).new},autocomplete:"new-password",get placeholder(){return h.account.passwordNew},get showCopy(){return e(M)},get width(){return i.inputWidth},get value(){return r().new},set value(B){r(r().new=B,!0)},$$events:{input:P},children:(B,U)=>{re();var E=se();w(()=>d(E,h.account.passwordNew.toUpperCase())),l(B,E)},$$slots:{default:!0}});var Q=o(S,2);ga(Q,{get error(){return e(k).verify},autocomplete:"new-password",get placeholder(){return h.account.passwordConfirm},get showCopy(){return e(M)},get width(){return i.inputWidth},get value(){return r().verify},set value(B){r(r().verify=B,!0)},$$events:{input:P},children:(B,U)=>{re();var E=se();w(()=>d(E,h.account.passwordConfirm.toUpperCase())),l(B,E)},$$slots:{default:!0}});var ee=o(Q,2);qe(ee,{level:2,get width(){return b()},$$events:{click:I},children:(B,U)=>{re();var E=se();w(()=>d(E,h.account.generateRandom)),l(B,E)},$$slots:{default:!0}});var ae=o(ee,2),ue=t(ae,!0);a(ae),a(G),w(()=>d(ue,e(j))),l(L,G)};D(Y,L=>{e(g)&&L(J)})}return l(O,T),Le({isPwdValid:P})}var Xr=W('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Zr=W('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),es=W("<div><!></div>"),as=W('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),ts=W('<div class="success svelte-od1aaa">Update successful</div>'),rs=W('<div class="err svelte-od1aaa"> </div>'),ss=W('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),ns=W('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function et(O,i){We(i,!0);let r=K(i,"user",19,()=>({})),b=K(i,"viewModePhone",3,!1),s=Ee(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="13rem";let u=r().account_type,j=A(m([])),g=A(void 0),k=A(!1),M=A(!1),N=A(""),F=A(!1),P=A(void 0),I=A(m({current:"",new:"",verify:""})),T=Ie(()=>e(j).filter(c=>c.user_verified).length>0);Ge(()=>{Y()});async function Y(){let c=await Ea(r().id),q=await c.json();c.ok?v(j,m(q)):console.error("error fetching passkeys: "+q.message)}async function J(){let c=await Kt(r().id);if(c.ok)window.location.reload();else{let q=await c.json();console.error("error fetching passkeys: "+q.message)}}async function L(){e(j).length>0?await G():await C()}async function G(){if(!await e(g)()){v(N,m(s.common.invalidInput));return}const c=await Ra(r().id,{purpose:"PasswordNew"});v(P,m(await c.json()))}async function C(c){if(!await e(g)()){v(N,m(s.common.invalidInput));return}v(M,!0);let q={password_new:e(I).new};c?q.mfa_code=c:q.password_current=e(I).current;let n=await Ta(r().id,q);if(n.ok)v(F,!0),v(I,m({})),window.location.reload();else{let _=await n.json();v(N,m(_.message))}v(M,!1)}function V(){v(P,void 0),v(N,m(s.mfa.errorReg))}function Z(c){c&&(v(P,void 0),C(c.code))}async function S(){let c=await At({email:r().email});if(c.ok)v(F,!0);else{let q=await c.json();v(N,m(q.message))}}var Q=ns(),ee=t(Q),ae=t(ee);{var ue=c=>{vr(c,{purpose:"PasswordNew",onSuccess:Z,onError:V,get data(){return e(P)},set data(q){v(P,m(q))}})};D(ae,c=>{e(P)&&c(ue)})}var B=o(ae,2);{var U=c=>{var q=Xr(),n=t(q),_=t(n,!0);a(n);var f=o(n,2),R=t(f),te=t(R,!0);a(R),a(f);var oe=o(f,2),he=t(oe,!0);a(oe);var pe=o(oe,2);{var be=ke=>{oa(ke,{check:!0})},ge=ke=>{qe(ke,{width:h,level:3,$$events:{click:S},children:(je,$e)=>{re();var z=se();w(()=>d(z,s.account.passwordReset)),l(je,z)},$$slots:{default:!0}})};D(pe,ke=>{e(F)?ke(be):ke(ge,!1)})}a(q),w(()=>{d(_,s.account.federatedConvertPassword1),d(te,i.authProvider.name||"UNKNOWN"),d(he,s.account.federatedConvertPassword2)}),l(c,q)};D(B,c=>{u==="federated"&&c(U)})}var E=o(B,2);{var y=c=>{var q=Zr(),n=le(q),_=t(n,!0);a(n);var f=o(n,2),R=t(f,!0);a(f);var te=o(f,2),oe=t(te,!0);a(te);var he=o(te,2);qe(he,{width:h,level:3,$$events:{click:()=>v(k,!0)},children:(pe,be)=>{re();var ge=se();w(()=>d(ge,s.account.convertAccount)),l(pe,ge)},$$slots:{default:!0}}),w(()=>{d(_,s.account.accTypePasskeyText1),d(R,s.account.accTypePasskeyText2),d(oe,s.account.accTypePasskeyText3)}),l(c,q)};D(E,c=>{(u==="passkey"||u==="federated_passkey")&&!e(k)&&c(y)})}var x=o(E,2);{var $=c=>{var q=ss(),n=le(q),_=t(n),f=Ie(()=>!(u==="password"&&e(j).length<1));Yr(_,{btnWidth:h,get inputWidth(){return e(p)},get hideCurrentPassword(){return e(f)},get formValues(){return e(I)},set formValues(z){v(I,m(z))},get isValid(){return e(g)},set isValid(z){v(g,m(z))}});var R=o(_,2),te=t(R);qe(te,{width:h,level:1,get isLoading(){return e(M)},set isLoading(z){v(M,m(z))},$$events:{click:L},children:(z,ce)=>{re();var ve=se();w(()=>d(ve,s.common.save)),l(z,ve)},$$slots:{default:!0}}),a(R);var oe=o(R,2);{var he=z=>{var ce=es(),ve=t(ce);qe(ve,{width:h,level:4,$$events:{click:()=>v(k,!1)},children:(ye,de)=>{re();var H=se();w(()=>d(H,s.common.cancel)),l(ye,H)},$$slots:{default:!0}}),a(ce),l(z,ce)};D(oe,z=>{e(k)&&!e(M)&&z(he)})}a(n);var pe=o(n,2);{var be=z=>{var ce=as(),ve=t(ce),ye=t(ve,!0);a(ve);var de=o(ve,2),H=t(de,!0);a(de);var fe=o(de,2);qe(fe,{width:h,level:3,$$events:{click:J},children:(Ve,ze)=>{re();var Me=se();w(()=>d(Me,s.account.convertAccount)),l(Ve,Me)},$$slots:{default:!0}}),a(ce),w(()=>{d(ye,s.account.convertAccount),d(H,s.account.convertAccountP1)}),l(z,ce)};D(pe,z=>{!e(k)&&e(T)&&z(be)})}var ge=o(pe,2),ke=t(ge);{var je=z=>{var ce=ts();Te(3,ce,()=>Ke),l(z,ce)},$e=z=>{var ce=we(),ve=le(ce);{var ye=de=>{var H=rs(),fe=t(H,!0);a(H),w(()=>d(fe,e(N))),Te(3,H,()=>Ke),l(de,H)};D(ve,de=>{e(N)&&de(ye)},!0)}l(z,ce)};D(ke,z=>{e(F)?z(je):z($e,!1)})}a(ge),Te(1,n,()=>Yt,()=>({duration:350})),l(c,q)};D(x,c=>{(u==="password"||u==="federated_password"||e(k))&&c($)})}a(ee),a(Q),l(O,Q),Le()}var is=W('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),os=W('<div class="success svelte-naxx27">Update successful</div>'),ls=W('<div class="err svelte-naxx27"> </div>'),cs=W('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function at(O,i){We(i,!0);let r=K(i,"webIdData",15),b=Ee();const s="12rem";let p=A(""),h=A(!1),u=A(!!r().custom_triples),j=wa(r().user_id);ba(()=>{e(h)&&setTimeout(()=>{v(h,!1)},3e3)});async function g(){v(p,"");let U=await Ot(r().user_id,r());if(U.ok)v(h,!0);else{let E=await U.json();v(p,m(E.message))}}var k=cs(),M=t(k),N=t(M),F=t(N,!0);a(N);var P=o(N,2),I=t(P);_e(I,"href",j);var T=t(I);Oa(T,()=>j.replace("/auth/","/auth/<wbr/>")),a(I),a(P);var Y=o(P,2),J=o(t(Y),2);Ba(J,{get selected(){return r().expose_email},set selected(U){r(r().expose_email=U,!0)}}),a(Y);var L=o(Y,2),G=t(L),C=t(G,!0);a(G);var V=o(G,2);Ba(V,{get selected(){return e(u)},set selected(U){v(u,m(U))}}),a(L);var Z=o(L,2);{var S=U=>{var E=is(),y=t(E),x=t(y,!0);a(y);var $=o(y,2);St($),_e($,"rows",15),_e($,"cols",40),a(E),w(()=>d(x,b.account.webIdDescData)),ar($,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),Te(3,E,()=>Xt),l(U,E)};D(Z,U=>{e(u)&&U(S)})}var Q=o(Z,2);qe(Q,{width:s,level:1,$$events:{click:g},children:(U,E)=>{re();var y=se();w(()=>d(y,b.common.save)),l(U,y)},$$slots:{default:!0}});var ee=o(Q,2),ae=t(ee);{var ue=U=>{var E=os();Te(3,E,()=>Ke),l(U,E)},B=U=>{var E=we(),y=le(E);{var x=$=>{var c=ls(),q=t(c,!0);a(c),w(()=>d(q,e(p))),Te(3,c,()=>Ke),l($,c)};D(y,$=>{e(p)&&$(x)},!0)}l(U,E)};D(ae,U=>{e(h)?U(ue):U(B,!1)})}a(ee),a(M),a(k),w(()=>{d(F,b.account.webIdDesc),d(C,b.account.webIdExpertMode)}),l(O,k),Le()}var vs=W('<div class="container svelte-1nrg3bb"><!></div>');function tt(O,i){We(i,!0);var r=vs(),b=t(r);tr(b,{get userId(){return i.session.user_id}}),a(r),l(O,r),Le()}var ds=W('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),us=W('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>'),ps=W("<!> <!>",1);function ms(O,i){We(i,!0);const r=nr(),b=()=>ir(M,"$op",r);let s=K(i,"session",7),p=K(i,"user",15),h=K(i,"webIdData",15),u=Ee(),j=A(void 0),g=A(m([])),k=Ie(()=>{var C;if((C=p().account_type)!=null&&C.startsWith("federated"))return e(g).filter(V=>V.id===p().auth_provider_id)[0]}),M=lr(1,{duration:100}),N=A(m(u.account.navInfo)),F=A(m(u.account.navInfo));function P(){M.set(0).then(()=>v(N,m(e(F)))).then(()=>M.set(1))}let I=Ie(()=>e(j)&&e(j)<500);ba(()=>{e(F)&&P()}),ia(()=>{e(F)===u.account.navLogout&&Bt()});var T=ps(),Y=le(T);dr(Y,{id:Ht,get value(){return e(g)},set value(C){v(g,m(C))}});var J=o(Y,2);{var L=C=>{var V=ds(),Z=t(V);Ja(Z,{absolute:!0,absoluteRight:!0,updateBackend:!0});var S=o(Z,2),Q=t(S),ee=t(Q,!0);a(Q),a(S);var ae=o(S,2),ue=t(ae);Ya(ue,{get selected(){return e(F)},set selected($){v(F,m($))}});var B=o(ue,2),U=t(B),E=t(U);{var y=$=>{Qa($,{get webIdData(){return h()},viewModePhone:!0,get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(c){p(c)}})},x=$=>{var c=we(),q=le(c);{var n=f=>{Xa(f,{viewModePhone:!0,get user(){return p()},set user(R){p(R)}})},_=f=>{var R=we(),te=le(R);{var oe=pe=>{et(pe,{get user(){return p()},get authProvider(){return e(k)},viewModePhone:!0})},he=pe=>{var be=we(),ge=le(be);{var ke=$e=>{Za($e,{get session(){return s()},get user(){return p()}})},je=$e=>{var z=we(),ce=le(z);{var ve=de=>{at(de,{get webIdData(){return h()},set webIdData(H){h(H)}})},ye=de=>{var H=we(),fe=le(H);{var Ve=ze=>{tt(ze,{get session(){return s()},set session(Me){s(Me)}})};D(fe,ze=>{e(N)===u.account.devices&&ze(Ve)},!0)}l(de,H)};D(ce,de=>{e(N)==="WebID"?de(ve):de(ye,!1)},!0)}l($e,z)};D(ge,$e=>{e(N)===u.account.navMfa?$e(ke):$e(je,!1)},!0)}l(pe,be)};D(te,pe=>{e(N)===u.common.password?pe(oe):pe(he,!1)},!0)}l(f,R)};D(q,f=>{e(N)===u.account.navEdit?f(n):f(_,!1)},!0)}l($,c)};D(E,$=>{e(N)===u.account.navInfo?$(y):$(x,!1)})}a(U),a(B),a(ae),a(V),w(()=>{d(ee,u.account.account),_e(U,"style",`opacity: ${b()??""}`)}),l(C,V)},G=C=>{var V=us(),Z=t(V);Ja(Z,{absolute:!0,updateBackend:!0});var S=o(Z,2),Q=t(S),ee=t(Q,!0);a(Q),a(S);var ae=o(S,2),ue=t(ae),B=Ie(()=>!!h());Ya(ue,{get showWebId(){return e(B)},get selected(){return e(F)},set selected(c){v(F,m(c))}});var U=o(ue,2),E=t(U),y=t(E);{var x=c=>{Qa(c,{get webIdData(){return h()},get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(q){p(q)}})},$=c=>{var q=we(),n=le(q);{var _=R=>{Xa(R,{get user(){return p()},set user(te){p(te)}})},f=R=>{var te=we(),oe=le(te);{var he=be=>{et(be,{get user(){return p()},get authProvider(){return e(k)}})},pe=be=>{var ge=we(),ke=le(ge);{var je=z=>{Za(z,{get session(){return s()},get user(){return p()}})},$e=z=>{var ce=we(),ve=le(ce);{var ye=H=>{at(H,{get webIdData(){return h()},set webIdData(fe){h(fe)}})},de=H=>{var fe=we(),Ve=le(fe);{var ze=Me=>{tt(Me,{get session(){return s()},set session(la){s(la)}})};D(Ve,Me=>{e(N)===u.account.devices&&Me(ze)},!0)}l(H,fe)};D(ve,H=>{e(N)==="WebID"?H(ye):H(de,!1)},!0)}l(z,ce)};D(ke,z=>{e(N)===u.account.navMfa?z(je):z($e,!1)},!0)}l(be,ge)};D(oe,be=>{e(N)===u.common.password?be(he):be(pe,!1)},!0)}l(R,te)};D(n,R=>{e(N)===u.account.navEdit?R(_):R(f,!1)},!0)}l(c,q)};D(y,c=>{e(N)===u.account.navInfo?c(x):c($,!1)})}a(E),a(U),a(ae),a(V),w(()=>{d(ee,u.account.account),_e(E,"style",`opacity: ${b()??""}`)}),l(C,V)};D(J,C=>{e(I)?C(L):C(G,!1)})}rr("innerWidth",C=>v(j,m(C))),l(O,T),Le()}function hs(O,i){We(i,!0);let r=Ee(),b=A(void 0),s=A(void 0),p=A(void 0),h=A(!1);Ge(async()=>{let u=await Ft();if(u.ok){if(v(b,m(await u.json())),!e(b)){console.error("did not receive valid session response");return}u=await Gt(e(b).user_id),u.ok?v(s,m(await u.json())):Va("account"),u=await Jt(e(b).user_id),u.ok?v(p,m(await u.json())):u.status===404&&v(p,m({user_id:e(b).user_id,is_open:!1})),v(h,!0)}else Va("account")}),xt(u=>{w(()=>{var j;return _t.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((j=e(s))==null?void 0:j.email)??""}`})}),ur(O,{children:(u,j)=>{pr(u,{children:(g,k)=>{var M=we(),N=le(M);{var F=I=>{Sa(I,{})},P=I=>{var T=we(),Y=le(T);{var J=L=>{ms(L,{get session(){return e(b)},get user(){return e(s)},set user(G){v(s,m(G))},get webIdData(){return e(p)},set webIdData(G){v(p,m(G))}})};D(Y,L=>{e(b)&&e(s)&&L(J)},!0)}l(I,T)};D(N,I=>{e(h)?I(P,!1):I(F)})}l(g,M)},$$slots:{default:!0}})},$$slots:{default:!0}}),Le()}export{hs as component};
