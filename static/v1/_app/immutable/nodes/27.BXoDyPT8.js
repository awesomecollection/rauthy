import"../chunks/disclose-version.BDr9Qe-U.js";import{p as z,o as A,a5 as R,a4 as f,a as B,j as t,g as c,a3 as $,n as U,$ as X,a7 as F,a8 as Y,a9 as G,a6 as D}from"../chunks/index-client.Cqn5bTAA.js";import{s as J}from"../chunks/render.BxZ_8nPF.js";import{i as b}from"../chunks/if.CfO-_epY.js";import{a as s,t as g,c as j,b as K}from"../chunks/template.A7ni-K4i.js";import{h as Q}from"../chunks/svelte-head.DTZb8QfM.js";import{p}from"../chunks/proxy.Ce5Ub1RB.js";import{W as V,X as Z,Y as q}from"../chunks/dataFetching.BTF7Y2Cd.js";import{W as aa}from"../chunks/WebauthnRequest.CQBdNqvu.js";import{s as ea}from"../chunks/snippet.YItZinX2.js";import{L as ta}from"../chunks/LangSelector.BJ1Lurmb.js";import{B as oa}from"../chunks/Button.Ch35LVs2.js";import{u as ra}from"../chunks/i18n.svelte.CZcZQkVy.js";import{u as y}from"../chunks/param.svelte.BjpJyl57.js";import{T as sa}from"../chunks/ThemeSwitch.Nnphyg3I.js";var ia=g("<div><h2>Cookies disabled</h2> <p>You need to enable Cookies.<br> Without them, a safe login cannot be executed.</p></div>"),na=g("<noscript></noscript> <!>",1);function ca(W,k){z(k,!0);let x=$(!1),u=$(!1);A(()=>{t(u,p(navigator.cookieEnabled)),t(x,!0)});var o=na(),n=R(f(o),2);{var E=h=>{var e=j(),C=f(e);{var a=i=>{var l=j(),T=f(l);ea(T,()=>k.children??U),s(i,l)},r=i=>{var l=ia();s(i,l)};b(C,i=>{c(u)?i(a):i(r,!1)})}s(h,e)};b(n,h=>{c(x)&&h(E)})}s(W,o),B()}var la=g('<div class="btn flex-col svelte-1dkpwyo"><!></div>'),va=g('<div class="error svelte-1dkpwyo"> </div>'),ma=g("<!> <!> <!>",1);function da(W,k){z(k,!0);let x=ra(),u=$(!1),o=$(""),n=$(void 0);A(async()=>{let e=y("error").get();if(e){let r=y("error_description").get();t(o,`${e}: ${r}`);return}let C={state:y("state").get(),code:y("code").get(),pkce_verifier:V(),xsrf_token:Z()},a=await q(C);if(a.status===202)window.location.replace(a.headers.get("location")||"/auth/v1/account");else if(a.status===200)t(o,""),t(n,p(await a.json()));else if(a.status===204)window.location.replace("/auth/v1/account");else if(a.status===403){let r=await a.json();console.error(r),t(o,p(r.message))}else if(a.status===406)t(o,p(x.authorize.clientForceMfa)),t(u,!0);else{let r=await a.text();t(o,`HTTP ${a.status}: ${r}`)}});function E(e){t(o,p(e||"ERROR")),t(n,void 0)}function h(e){e&&window.location.replace(e.loc)}Q(e=>{X.title="Callback"}),ca(W,{children:(e,C)=>{var a=ma(),r=f(a);{var i=v=>{aa(v,{onSuccess:h,onError:E,get data(){return c(n)},set data(O){t(n,p(O))}})},l=v=>{var O=j(),I=f(O);{var M=m=>{var d=la(),L=F(d);oa(L,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(N,_)=>{Y();var w=K("ACCOUNT LOGIN");s(N,w)},$$slots:{default:!0}}),G(d),s(m,d)},P=m=>{var d=j(),L=f(d);{var N=_=>{var w=va(),S=F(w,!0);G(w),D(()=>J(S,c(o))),s(_,w)};b(L,_=>{c(o)&&_(N)},!0)}s(m,d)};b(I,m=>{c(u)?m(M):m(P,!1)},!0)}s(v,O)};b(r,v=>{c(n)?v(i):v(l,!1)})}var T=R(r,2);sa(T,{absolute:!0});var H=R(T,2);ta(H,{absolute:!0}),s(e,a)},$$slots:{default:!0}}),B()}export{da as component};
