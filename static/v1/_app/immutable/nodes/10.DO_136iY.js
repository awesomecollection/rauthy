import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DJEB66nf.js";import{p as se,s as a,t as j,z as o,y as r,a as ne,A as x,c as d,r as c,f as oe,ab as re,a6 as me,ar as z,ap as Jt}from"../chunks/index-client.Di99sPv0.js";import{d as je,e as Lt,s as B}from"../chunks/render.Cjc4CIr8.js";import{i as J}from"../chunks/if.DgeUjMU2.js";import{e as Me,i as St}from"../chunks/each.DxtmCefA.js";import{a as u,t as Q,e as Le,d as F}from"../chunks/template.BEKX6jgL.js";import{a as O,t as er,s as tr}from"../chunks/index.BnJsthXQ.js";import{p as i}from"../chunks/proxy.BQ2dmY0t.js";import{B as rr}from"../chunks/ButtonAddModal.DLvLHw-v.js";import{C as ar}from"../chunks/ContentAdmin.BWiTVMIY.js";import{N as lr}from"../chunks/NavButtonTile.BjzIPqLk.js";import{N as ir}from"../chunks/NavSub.D01RyWn2.js";import{O as sr}from"../chunks/OrderSearchBar.CS_Hs5DC.js";import{b as Pe,d as De,c as Ct,f as At}from"../chunks/fetch.DxJS_Pk_.js";import{u as nr}from"../chunks/param.svelte.Bg3Frte-.js";import{h as ye}from"../chunks/html.CddWxNhc.js";import{B as ce}from"../chunks/Button.D-14suAe.js";import{I as he}from"../chunks/Input.-lhBsjDF.js";import{n as or,c as Tt,g as Qe,o as cr,p as dr,q as It}from"../chunks/patterns.BDQXnG3O.js";import{F as Ke}from"../chunks/Form.C0Yvca1O.js";import{u as ke}from"../chunks/i18n.svelte.Bc6aINkd.js";import{u as ge}from"../chunks/i18n_admin.svelte.DI6l2V4l.js";import{I as de}from"../chunks/InputCheckbox.BTJtACoe.js";import{r as Ne,s as N}from"../chunks/class.BCapn1bP.js";import{b as We}from"../chunks/input.NYWjhvEE.js";import{b as Rt}from"../chunks/this.Ckttlp1y.js";import{p as Z}from"../chunks/props.ClgLgKUv.js";import{a as $e}from"../chunks/helpers.D3KrX4pz.js";import{I as vr}from"../chunks/IconStop.8S4C4V3m.js";import{T as qt}from"../chunks/Tabs.CTmGp6-A.js";import{I as Ut}from"../chunks/IconCheck.K_67dytm.js";import{L as ze}from"../chunks/LabeledValue.D0BXhgF2.js";import{S as Et}from"../chunks/SelectList.BcngFbY0.js";import{O as Bt}from"../chunks/Options.DtWx0xTK.js";import{I as ur}from"../chunks/InputPassword.Bl28d8lQ.js";import{k as hr}from"../chunks/key.DB5VoPJt.js";import{T as mr}from"../chunks/ThemeSwitch._9IF3ElF.js";import{I as gr}from"../chunks/InputFile.D28REYhm.js";import{u as pr}from"../chunks/is_dev.svelte.DF22tCPV.js";function fr(D,e,t,l){var v;e(),(v=t.onInput)==null||v.call(t,r(l))}function br(D,e,t){var l;switch(D.code){case"Enter":e(),(l=t.onEnter)==null||l.call(t);break}}function _r(D,e){var t,l;(t=e())==null||t.focus(),(l=e())==null||l.scrollIntoView({behavior:"smooth",block:"center"})}var kr=Q('<li class="value svelte-r5y8pk"><div class="label"> </div> <div class="btnClose svelte-r5y8pk"><!></div></li>'),$r=Q("<option></option>"),wr=Q('<datalist class="absolute svelte-r5y8pk"></datalist>'),yr=Q('<span class="err"> </span>'),xr=Q('<div role="none" class="container svelte-r5y8pk"><ul class="svelte-r5y8pk"><!> <li class="svelte-r5y8pk"><input autocomplete="off" class="svelte-r5y8pk"> <!></li></ul> <label class="font-label noselect svelte-r5y8pk"> <!></label></div>');function we(D,e){se(e,!0);let t=Z(e,"ref",15),l=Z(e,"typ",3,"text"),v=Z(e,"id",19,$e),h=Z(e,"values",31,()=>i([])),_=Z(e,"label",3,""),m=Z(e,"placeholder",3,""),k=Z(e,"disabled",3,!1),$=Z(e,"required",3,!1),g=Z(e,"isError",15,!1),w=Z(e,"width",3,"inherit"),U=Z(e,"maxHeightList",3,"inherit"),b=ke();const p=$e();let M=x(""),y=re(()=>e.datalist&&e.datalist.length>0?p:void 0);function T(W){h(h().filter(A=>A!==W))}function L(W){var A;S(),(A=e.onBlur)==null||A.call(e),H()}function q(W){W.preventDefault(),g(!0)}function H(){r(M)&&S()&&(h().push(r(M)),o(M,""))}function S(){var A;let W=(A=t())==null?void 0:A.validity;return W?(g(!W.valid),W.valid):(g(!1),!0)}var I=xr();I.__click=[_r,t];var n=d(I),E=d(n);Me(E,17,h,St,(W,A)=>{var te=kr(),Y=d(te),ie=d(Y,!0);c(Y);var le=a(Y,2),pe=d(le);ce(pe,{invisible:!0,onclick:()=>T(r(A)),children:(_e,X)=>{vr(_e,{width:"1.2rem"})},$$slots:{default:!0}}),c(le),c(te),j(()=>B(ie,r(A))),u(W,te)});var K=a(E,2),C=d(K);Ne(C),C.__keydown=[br,H,e],C.__input=[fr,S,e,M],Rt(C,W=>t(W),()=>t());var f=a(C,2);{var G=W=>{var A=wr();N(A,"id",p),Me(A,21,()=>e.datalist,St,(te,Y)=>{var ie=$r(),le={};j(()=>{le!==(le=r(Y))&&(ie.value=(ie.__value=r(Y))==null?"":r(Y))}),u(te,ie)}),c(A),u(W,A)};J(f,W=>{e.datalist&&e.datalist.length>1&&W(G)})}c(K),c(n);var P=a(n,2),ae=d(P),ue=a(ae);{var ee=W=>{var A=Le(),te=oe(A);{var Y=ie=>{var le=yr(),pe=d(le,!0);c(le),j(()=>B(pe,e.errMsg||b.common.invalidInput)),u(ie,le)};J(te,ie=>{g()&&ie(Y)})}u(W,A)};J(ue,W=>{g()&&W(ee)})}c(P),c(I),j(()=>{O(I,"width",w()),O(n,"max-height",U()),N(C,"type",l()),N(C,"id",v()),N(C,"name",e.name),N(C,"list",r(y)),N(C,"title",e.errMsg),N(C,"aria-label",_()||m()),N(C,"placeholder",m()),N(C,"aria-placeholder",m()),C.disabled=k(),N(C,"aria-disabled",k()),C.required=$()&&h().length<1,N(C,"aria-required",$()&&h().length<1),N(C,"maxlength",e.maxLength||void 0),N(C,"min",e.min||void 0),N(C,"max",e.max||void 0),N(C,"pattern",e.pattern),N(P,"for",v()),N(P,"data-required",$()),B(ae,`${_()??""} `)}),Lt("invalid",C,q),Lt("blur",C,L),We(C,()=>r(M),W=>o(M,W)),u(D,I),ne()}je(["click","keydown","input"]);var Lr=Q('<div class="err"> </div>'),Sr=Q('<!> <!> <!> <p class="svelte-15tp6i6"><!></p> <!> <!> <!> <!>',1),Cr=Q('<div class="container svelte-15tp6i6"><!></div>');function Ar(D,e){se(e,!0);let t=ke(),l=ge(),v=x(void 0),h=x(""),_=x(""),m=x(""),k=x(!0),$=x(i([])),g=x(i([]));me(()=>{requestAnimationFrame(()=>{var p;(p=r(v))==null||p.focus()})});async function w(p,M){var L;if(e.clients.find(q=>q.id===r(_))){o(h,i(l.common.nameExistsAlready));return}o(h,"");let y={id:r(_),name:r(m)||void 0,confidential:r(k),redirect_uris:r($),post_logout_redirect_uris:r(g).length>0?r(g):void 0},T=await Pe(p.action,y);T.body?e.onSave(T.body.id):o(h,i(((L=T.error)==null?void 0:L.message)||"Error"))}var U=Cr(),b=d(U);Ke(b,{action:"/auth/v1/clients",onSubmit:w,children:(p,M)=>{var y=Sr(),T=oe(y);he(T,{autocomplete:"off",label:"Client ID",placeholder:"Client ID",required:!0,pattern:or,get ref(){return r(v)},set ref(f){o(v,i(f))},get value(){return r(_)},set value(f){o(_,i(f))}});var L=a(T,2);he(L,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},pattern:Tt,get value(){return r(m)},set value(f){o(m,i(f))}});var q=a(L,2);de(q,{get ariaLabel(){return l.clients.confidential},get checked(){return r(k)},set checked(f){o(k,i(f))},children:(f,G)=>{z();var P=F();j(()=>B(P,l.clients.confidential)),u(f,P)},$$slots:{default:!0}});var H=a(q,2),S=d(H);ye(S,()=>l.clients.descUri),c(H);var I=a(H,2);we(I,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r($)},set values(f){o($,i(f))}});var n=a(I,2);we(n,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(g)},set values(f){o(g,i(f))}});var E=a(n,2);ce(E,{type:"submit",children:(f,G)=>{z();var P=F();j(()=>B(P,t.common.save)),u(f,P)},$$slots:{default:!0}});var K=a(E,2);{var C=f=>{var G=Lr(),P=d(G,!0);c(G),j(()=>B(P,r(h))),u(f,G)};J(K,f=>{r(h)&&f(C)})}u(p,y)},$$slots:{default:!0}}),c(U),u(D,U),ne()}const Oe="urn:ietf:params:oauth:grant-type:device_code";var Tr=Q('<div class="err"> </div>'),Ir=Q('<div class="err"> </div>'),Rr=Q('<h5> </h5> <!> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"> </p> <!> <!> <div></div> <h5> </h5> <!> <!> <!> <p class="mb-0 svelte-5tvvvt">Authentication Flows</p> <!> <!> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <p class="desc svelte-5tvvvt"><strong> </strong></p> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p> </p> <!> <div></div> <p> </p> <p> </p> <!> <!> <div></div> <p> </p> <!> <div class="flex gap-05"><!> <!></div> <!> <div></div>',1),qr=Q('<div class="container svelte-5tvvvt"><!></div>');function Ur(D,e){var ae,ue;se(e,!0);let t=ke(),l=ge();const v="min(20rem, calc(100dvw - .5rem))";let h=x(""),_=x(!1),m=x(i(e.client.id)),k=x(i(e.client.name||"")),$=x(i(e.client.enabled)),g=x(i(e.client.confidential)),w=x(i(e.client.client_uri||"")),U=x(i(e.client.contacts?Array.from(e.client.contacts):[])),b=x(i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),p=x(i(Array.from(e.client.redirect_uris))),M=x(i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),y=i({authorizationCode:e.client.flows_enabled.includes("authorization_code"),clientCredentials:e.client.flows_enabled.includes("client_credentials"),password:e.client.flows_enabled.includes("password"),refreshToken:e.client.flows_enabled.includes("refresh_token"),deviceCode:e.client.flows_enabled.includes(Oe)});const T=["RS256","RS384","RS512","EdDSA"];let L=x(i(e.client.access_token_alg)),q=x(i(e.client.id_token_alg)),H=x(i(e.client.access_token_lifetime.toString())),S=x(i(e.client.auth_code_lifetime.toString())),I=x(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.scopes.includes(ee)||!1})))),n=x(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.default_scopes.includes(ee)||!1})))),E=i({plain:((ae=e.client.challenges)==null?void 0:ae.includes("plain"))||!1,s256:((ue=e.client.challenges)==null?void 0:ue.includes("S256"))||!1}),K=x(i(e.client.force_mfa));me(()=>{var ee,W;e.client.id&&(o(m,i(e.client.id)),o(k,i(e.client.name||"")),o($,i(e.client.enabled)),o(g,i(e.client.confidential)),o(w,i(e.client.client_uri||"")),o(U,i(e.client.contacts?Array.from(e.client.contacts):[])),o(b,i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),o(p,i(Array.from(e.client.redirect_uris))),o(M,i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),y.authorizationCode=e.client.flows_enabled.includes("authorization_code"),y.clientCredentials=e.client.flows_enabled.includes("client_credentials"),y.password=e.client.flows_enabled.includes("password"),y.refreshToken=e.client.flows_enabled.includes("refresh_token"),y.deviceCode=e.client.flows_enabled.includes(Oe),o(L,i(e.client.access_token_alg)),o(q,i(e.client.id_token_alg)),o(H,i(e.client.access_token_lifetime.toString())),o(S,i(e.client.auth_code_lifetime.toString())),o(I,i(e.scopesAll.map(A=>({name:A,selected:e.client.scopes.includes(A)||!1})))),o(n,i(e.scopesAll.map(A=>({name:A,selected:e.client.default_scopes.includes(A)||!1})))),E.plain=((ee=e.client.challenges)==null?void 0:ee.includes("plain"))||!1,E.s256=((W=e.client.challenges)==null?void 0:W.includes("S256"))||!1)});async function C(ee,W){o(h,"");let A={id:r(m),name:r(k)||void 0,enabled:r($),confidential:r(g),allowed_origins:r(b).length>0?r(b):void 0,redirect_uris:r(p),post_logout_redirect_uris:r(M).length>0?r(M):void 0,flows_enabled:[],access_token_alg:r(L),id_token_alg:r(q),access_token_lifetime:Number.parseInt(r(H)),auth_code_lifetime:Number.parseInt(r(S)),scopes:r(I).filter(Y=>Y.selected).map(Y=>Y.name),default_scopes:r(n).filter(Y=>Y.selected).map(Y=>Y.name),challenges:void 0,force_mfa:r(K),client_uri:r(w)||void 0,contacts:r(U).length>0?r(U):void 0};y.authorizationCode&&A.flows_enabled.push("authorization_code"),y.clientCredentials&&A.flows_enabled.push("client_credentials"),y.password&&A.flows_enabled.push("password"),y.refreshToken&&A.flows_enabled.push("refresh_token"),y.deviceCode&&A.flows_enabled.push(Oe),E.plain&&(A.challenges=["plain"]),E.s256&&(A.challenges?A.challenges.push("S256"):A.challenges=["S256"]),console.log("payload",A);let te=await De(ee.action,A);te.error?o(h,i(te.error.message)):(o(_,!0),e.onSave(),setTimeout(()=>{o(_,!1)},2e3))}var f=qr(),G=d(f),P=re(()=>`/auth/v1/clients/${e.client.id}`);Ke(G,{get action(){return r(P)},onSubmit:C,children:(ee,W)=>{var A=Rr(),te=oe(A),Y=d(te,!0);c(te);var ie=a(te,2);ze(ie,{label:"ID",mono:!0,children:(s,V)=>{z();var R=F();j(()=>B(R,e.client.id)),u(s,R)},$$slots:{default:!0}});var le=a(ie,2),pe=d(le,!0);c(le);var _e=a(le,2);he(_e,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},width:v,pattern:Tt,get value(){return r(k)},set value(s){o(k,i(s))}});var X=a(_e,2),fe=d(X,!0);c(X);var ve=a(X,2);he(ve,{typ:"url",autocomplete:"off",label:"URI",placeholder:"URI",width:v,pattern:Qe,get value(){return r(w)},set value(s){o(w,i(s))}});var He=a(ve,2);we(He,{get label(){return l.common.contact},pattern:cr,get values(){return r(U)},set values(s){o(U,i(s))}});var Xe=a(He,2);O(Xe,"height",".5rem");var Se=a(Xe,2),Pt=d(Se,!0);c(Se);var Ve=a(Se,2);de(Ve,{get ariaLabel(){return l.common.enabled},get checked(){return r($)},set checked(s){o($,i(s))},children:(s,V)=>{z();var R=F();j(()=>B(R,l.common.enabled)),u(s,R)},$$slots:{default:!0}});var Ye=a(Ve,2);de(Ye,{get ariaLabel(){return l.clients.confidential},get checked(){return r(g)},set checked(s){o(g,i(s))},children:(s,V)=>{z();var R=F();j(()=>B(R,l.clients.confidential)),u(s,R)},$$slots:{default:!0}});var Ze=a(Ye,2);de(Ze,{get ariaLabel(){return l.clients.forceMfa},get checked(){return r(K)},set checked(s){o(K,i(s))},children:(s,V)=>{z();var R=F();j(()=>B(R,l.clients.forceMfa)),u(s,R)},$$slots:{default:!0}});var Je=a(Ze,4);de(Je,{ariaLabel:"authorization_code",get checked(){return y.authorizationCode},set checked(s){y.authorizationCode=s},children:(s,V)=>{z();var R=F("authorization_code");u(s,R)},$$slots:{default:!0}});var et=a(Je,2);de(et,{ariaLabel:"urn:ietf:params:oauth:grant-type:device_code",get checked(){return y.deviceCode},set checked(s){y.deviceCode=s},children:(s,V)=>{z();var R=F("device_code");u(s,R)},$$slots:{default:!0}});var tt=a(et,2);de(tt,{ariaLabel:"client_credentials",get checked(){return y.clientCredentials},set checked(s){y.clientCredentials=s},children:(s,V)=>{z();var R=F("client_credentials");u(s,R)},$$slots:{default:!0}});var rt=a(tt,2);de(rt,{ariaLabel:"password",get checked(){return y.password},set checked(s){y.password=s},children:(s,V)=>{z();var R=F("password");u(s,R)},$$slots:{default:!0}});var at=a(rt,2);de(at,{ariaLabel:"refresh_token",get checked(){return y.refreshToken},set checked(s){y.refreshToken=s},children:(s,V)=>{z();var R=F("refresh_token");u(s,R)},$$slots:{default:!0}});var lt=a(at,2);O(lt,"height",".5rem");var Ce=a(lt,2),Dt=d(Ce,!0);c(Ce);var Ae=a(Ce,2),it=d(Ae),Qt=d(it,!0);c(it),c(Ae);var st=a(Ae,2);de(st,{ariaLabel:"PKCE plain",get checked(){return E.plain},set checked(s){E.plain=s},children:(s,V)=>{z();var R=F("plain");u(s,R)},$$slots:{default:!0}});var nt=a(st,2);de(nt,{ariaLabel:"PKCE S256",get checked(){return E.s256},set checked(s){E.s256=s},children:(s,V)=>{z();var R=F("S256");u(s,R)},$$slots:{default:!0}});var ot=a(nt,2);{var Kt=s=>{var V=Tr(),R=d(V,!0);c(V),j(()=>B(R,l.clients.errConfidentialPKCE)),er(3,V,()=>tr,()=>({duration:150})),u(s,V)};J(ot,s=>{!r(g)&&!E.plain&&!E.s256&&s(Kt)})}var ct=a(ot,2);O(ct,"height",".5rem");var Te=a(ct,2),Nt=d(Te,!0);c(Te);var dt=a(Te,2);we(dt,{typ:"url",label:"Allowed Origins",get errMsg(){return l.validation.origin},pattern:dr,get values(){return r(b)},set values(s){o(b,i(s))}});var Ie=a(dt,2),Wt=d(Ie);ye(Wt,()=>l.clients.descUri),c(Ie);var vt=a(Ie,2);we(vt,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get required(){return y.authorizationCode},pattern:Qe,get values(){return r(p)},set values(s){o(p,i(s))}});var ut=a(vt,2);we(ut,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},pattern:Qe,get values(){return r(M)},set values(s){o(M,i(s))}});var ht=a(ut,2);O(ht,"height",".5rem");var Re=a(ht,2),zt=d(Re);ye(zt,()=>l.clients.scopes.desc),c(Re);var mt=a(Re,2);Et(mt,{get items(){return r(I)},set items(s){o(I,i(s))},children:(s,V)=>{z();var R=F();j(()=>B(R,l.clients.scopes.allowed)),u(s,R)},$$slots:{default:!0}});var gt=a(mt,2);Et(gt,{get items(){return r(n)},set items(s){o(n,i(s))},children:(s,V)=>{z();var R=F();j(()=>B(R,l.clients.scopes.default)),u(s,R)},$$slots:{default:!0}});var pt=a(gt,2);O(pt,"height",".75rem");var qe=a(pt,2),Ot=d(qe,!0);c(qe);var ft=a(qe,2);he(ft,{typ:"number",autocomplete:"off",label:"Token Lifetime",placeholder:"Token Lifetime",width:v,min:"10",max:"86400",errMsg:"10 <= Token Lifetime <= 86400",get value(){return r(H)},set value(s){o(H,i(s))}});var bt=a(ft,2);O(bt,"height",".5rem");var Ue=a(bt,2),Gt=d(Ue,!0);c(Ue);var Ee=a(Ue,2),Ft=d(Ee,!0);c(Ee);var _t=a(Ee,2);ze(_t,{label:"Access Token Algorithm",children:(s,V)=>{Bt(s,{ariaLabel:"Access Token Algorithm",options:T,borderless:!0,get value(){return r(L)},set value(R){o(L,i(R))}})},$$slots:{default:!0}});var kt=a(_t,2);ze(kt,{label:"ID Token Algorithm",children:(s,V)=>{Bt(s,{ariaLabel:"ID Token Algorithm",options:T,borderless:!0,get value(){return r(q)},set value(R){o(q,i(R))}})},$$slots:{default:!0}});var $t=a(kt,2);O($t,"height",".5rem");var Be=a($t,2),Ht=d(Be,!0);c(Be);var wt=a(Be,2);he(wt,{typ:"number",autocomplete:"off",label:"Auth Code Lifetime",placeholder:"Auth Code Lifetime",width:v,min:"10",max:"300",errMsg:"10 <= Auth Code Lifetime <= 300",get value(){return r(S)},set value(s){o(S,i(s))}});var xe=a(wt,2);O(xe,"margin-top","1rem");var yt=d(xe);ce(yt,{type:"submit",children:(s,V)=>{z();var R=F();j(()=>B(R,t.common.save)),u(s,R)},$$slots:{default:!0}});var Xt=a(yt,2);{var Vt=s=>{Ut(s,{})};J(Xt,s=>{r(_)&&s(Vt)})}c(xe);var xt=a(xe,2);{var Yt=s=>{var V=Ir(),R=d(V,!0);c(V),j(()=>B(R,r(h))),u(s,V)};J(xt,s=>{r(h)&&s(Yt)})}var Zt=a(xt,2);O(Zt,"height","1rem"),j(()=>{B(Y,l.common.information),B(pe,l.clients.descName),B(fe,l.clients.descClientUri),B(Pt,l.clients.config),B(Dt,l.clients.descPKCE),B(Qt,l.clients.descPKCEEnforce),B(Nt,l.clients.descOrigin),B(Ot,l.clients.tokenLifetime.p1),B(Gt,l.clients.tokenLifetime.p2),B(Ft,l.clients.tokenLifetime.p3),B(Ht,l.clients.descAuthCode)}),u(ee,A)},$$slots:{default:!0}}),c(f),u(D,f),ne()}var Er=Q("<!> <!>",1),Br=Q('<div class="container svelte-19xcrje"><div class="err"> </div> <!></div>');function jr(D,e){se(e,!0);let t=ge(),l=x(""),v=x(void 0);me(()=>{o(l,""),o(v,""),e.client.confidential?h():o(l,i(t.clients.confidentialNoSecret))});async function h(){let b=await Pe(`/auth/v1/clients/${e.client.id}/secret`);m(b)}async function _(){let b=await De(`/auth/v1/clients/${e.client.id}/secret`);m(b)}function m(b){var p;b.body?b.body.secret&&o(v,i(b.body.secret)):o(l,i(((p=b.error)==null?void 0:p.message)||"Error"))}var k=Br(),$=d(k),g=d($,!0);c($);var w=a($,2);{var U=b=>{var p=Er(),M=oe(p);ur(M,{autocomplete:"off",label:"Client Secret",placeholder:"Client Secret",disabled:!0,showCopy:!0,get value(){return r(v)},set value(T){o(v,i(T))}});var y=a(M,2);ce(y,{onclick:_,children:(T,L)=>{z();var q=F();j(()=>B(q,t.clients.generateSecret)),u(T,q)},$$slots:{default:!0}}),u(b,p)};J(w,b=>{r(v)&&b(U)})}c(k),j(()=>B(g,r(l))),u(D,k),ne()}var Mr=Q('<div class="err"> </div>'),Pr=Q("<p> </p> <!> <!>",1);function Dr(D,e){se(e,!0);let t=ke(),l=ge(),v=x("");async function h(){o(v,"");let U=await Ct(`/auth/v1/clients/${e.client.id}`);U.error?o(v,i(U.error.message)):e.onSave()}var _=Pr(),m=oe(_),k=d(m,!0);c(m);var $=a(m,2);ce($,{level:-1,onclick:h,children:(U,b)=>{z();var p=F();j(()=>B(p,t.common.delete)),u(U,p)},$$slots:{default:!0}});var g=a($,2);{var w=U=>{var b=Mr(),p=d(b,!0);c(b),j(()=>B(p,r(v))),u(U,b)};J(g,U=>{r(v)&&U(w)})}j(()=>B(k,l.clients.delete1)),u(D,_),ne()}var Qr=Q('<div><div class="flex"><input type="range" class="svelte-12j8dit"> <div class="value font-mono svelte-12j8dit"> </div></div> <div class="label svelte-12j8dit"><label class="font-label noselect svelte-12j8dit"> </label></div></div>');function Ge(D,e){se(e,!0);let t=Z(e,"value",15),l=Z(e,"label",3,""),v=Z(e,"disabled",3,!1),h=Z(e,"step",3,1),_=Z(e,"widthRange",3,"15rem");const m=$e();let k=re(()=>{if(e.hue!==void 0&&e.sat!==void 0&&e.lum!==void 0){if(e.bgMode==="hue")return`linear-gradient(
                    to right,
                    hsl(0 ${e.sat} ${e.lum}) 0%,
                    hsl(60 ${e.sat} ${e.lum}) 17%,
                    hsl(120 ${e.sat} ${e.lum}) 33%,
                    hsl(180 ${e.sat} ${e.lum}) 50%,
                    hsl(240 ${e.sat} ${e.lum}) 67%,
                    hsl(300 ${e.sat} ${e.lum}) 83%,
                    hsl(3600 ${e.sat} ${e.lum}) 100%
                )`;if(e.bgMode==="sat")return`linear-gradient(to right, hsl(${e.hue} 0 ${e.lum}), hsl(${e.hue} 100 ${e.lum}))`;if(e.bgMode==="lum")return`linear-gradient(to right, hsl(${e.hue} ${e.sat} 0), hsl(${e.hue} ${e.sat} 100))`}return"hsl(var(--text) / .5)"});var $=Qr(),g=d($),w=d(g);Ne(w),N(w,"id",m);var U=a(w,2),b=d(U,!0);c(U),c(g);var p=a(g,2),M=d(p);N(M,"for",m);var y=d(M,!0);c(M),c(p),c($),j(()=>{N(w,"name",e.name),N(w,"title",l()),N(w,"aria-label",l()),w.disabled=v(),N(w,"aria-disabled",v()),N(w,"min",e.min),N(w,"max",e.max),N(w,"step",h()),O(w,"width",_()),O(w,"--bg-slider",r(k)),B(b,t()),B(y,l())}),We(w,t),u(D,$),ne()}var Kr=Q('<div class="outer svelte-1evkwuy"><div class="container svelte-1evkwuy"><div><label class="font-label svelte-1evkwuy"> </label> <div class="values svelte-1evkwuy"><!> <!> <!></div></div> <div class="color svelte-1evkwuy"></div></div></div>');function be(D,e){se(e,!0);let t=Z(e,"h",15),l=Z(e,"s",15),v=Z(e,"l",15);const h=$e(),_="15rem";let m=re(()=>`hsl(${t()} ${l()} ${v()})`);var k=Kr(),$=d(k),g=d($),w=d(g);N(w,"for",h);var U=d(w,!0);c(w);var b=a(w,2);N(b,"id",h);var p=d(b);Ge(p,{label:"Hue",min:0,max:359,widthRange:_,bgMode:"hue",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return t()},set value(L){t(L)}});var M=a(p,2);Ge(M,{label:"Sat",min:0,max:100,widthRange:_,bgMode:"sat",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return l()},set value(L){l(L)}});var y=a(M,2);Ge(y,{label:"Lum",min:0,max:100,widthRange:_,bgMode:"lum",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return v()},set value(L){v(L)}}),c(b),c(g);var T=a(g,2);c($),c(k),j(()=>{O($,"border-color",r(m)),B(U,e.label),O(T,"background",r(m))}),u(D,k),ne()}var Nr=(D,e)=>{var t;return(t=r(e))==null?void 0:t.click()},Wr=Q('<div class="container svelte-lcwq3j"><!> <div role="none" class="mask svelte-lcwq3j"><div class="colorWrapper svelte-lcwq3j"><div class="color svelte-lcwq3j"></div></div> <input type="color" class="svelte-lcwq3j"></div></div>');function Fe(D,e){se(e,!0);let t=Z(e,"value",15),l=ge(),v=x(void 0);var h=Wr(),_=d(h);he(_,{get label(){return e.label},get placeholder(){return e.label},get errMsg(){return l.validation.css},get width(){return e.inputWidth},required:!0,pattern:It,get value(){return t()},set value($){t($)}});var m=a(_,2);m.__click=[Nr,v];var k=a(d(m),2);Ne(k),Rt(k,$=>o(v,$),()=>r(v)),c(m),c(h),j(()=>O(h,"--color",t())),We(k,t),u(D,h),ne()}je(["click"]);var zr=Q('<div><p> </p> <div class="hsl svelte-10udpph"><div><!> <!> <!> <!></div> <div><!> <!> <!></div></div> <div><p><!></p> <!> <!> <!></div></div>');function jt(D,e){se(e,!0);let t=Z(e,"values",15),l=ge();var v=zr(),h=d(v),_=d(h,!0);c(h);var m=a(h,2),k=d(m),$=d(k);be($,{label:"--text",get h(){return t().text[0]},set h(n){t(t().text[0]=n,!0)},get s(){return t().text[1]},set s(n){t(t().text[1]=n,!0)},get l(){return t().text[2]},set l(n){t(t().text[2]=n,!0)}});var g=a($,2);be(g,{label:"--text-high",get h(){return t().text_high[0]},set h(n){t(t().text_high[0]=n,!0)},get s(){return t().text_high[1]},set s(n){t(t().text_high[1]=n,!0)},get l(){return t().text_high[2]},set l(n){t(t().text_high[2]=n,!0)}});var w=a(g,2);be(w,{label:"--bg",get h(){return t().bg[0]},set h(n){t(t().bg[0]=n,!0)},get s(){return t().bg[1]},set s(n){t(t().bg[1]=n,!0)},get l(){return t().bg[2]},set l(n){t(t().bg[2]=n,!0)}});var U=a(w,2);be(U,{label:"--bg-high",get h(){return t().bg_high[0]},set h(n){t(t().bg_high[0]=n,!0)},get s(){return t().bg_high[1]},set s(n){t(t().bg_high[1]=n,!0)},get l(){return t().bg_high[2]},set l(n){t(t().bg_high[2]=n,!0)}}),c(k);var b=a(k,2),p=d(b);be(p,{label:"--action",get h(){return t().action[0]},set h(n){t(t().action[0]=n,!0)},get s(){return t().action[1]},set s(n){t(t().action[1]=n,!0)},get l(){return t().action[2]},set l(n){t(t().action[2]=n,!0)}});var M=a(p,2);be(M,{label:"--accent",get h(){return t().accent[0]},set h(n){t(t().accent[0]=n,!0)},get s(){return t().accent[1]},set s(n){t(t().accent[1]=n,!0)},get l(){return t().accent[2]},set l(n){t(t().accent[2]=n,!0)}});var y=a(M,2);be(y,{label:"--error",get h(){return t().error[0]},set h(n){t(t().error[0]=n,!0)},get s(){return t().error[1]},set s(n){t(t().error[1]=n,!0)},get l(){return t().error[2]},set l(n){t(t().error[2]=n,!0)}}),c(b),c(m);var T=a(m,2),L=d(T),q=d(L);ye(q,()=>l.clients.branding.descFullCss),c(L);var H=a(L,2);Fe(H,{label:"--btn-text",get inputWidth(){return e.inputWidth},get value(){return t().btn_text},set value(n){t(t().btn_text=n,!0)}});var S=a(H,2);Fe(S,{label:"--theme-sun",get inputWidth(){return e.inputWidth},get value(){return t().theme_sun},set value(n){t(t().theme_sun=n,!0)}});var I=a(S,2);Fe(I,{label:"--theme-moon",get inputWidth(){return e.inputWidth},get value(){return t().theme_moon},set value(n){t(t().theme_moon=n,!0)}}),c(T),c(v),j(()=>B(_,l.clients.branding.descHsl)),u(D,v),ne()}var Or=D=>D.preventDefault(),Gr=Q('<div aria-label="Preview: All components inside are only for theme and colors preview and have no effect or interaction"><div class="inner svelte-fkmn75"><div class="container svelte-fkmn75"><div class="logo svelte-fkmn75"><img alt="Client Logo"></div> <h3 class="svelte-fkmn75">Header</h3> <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p> <p><span class="svelte-fkmn75">--accent-color</span></p> <!> <div class="btn svelte-fkmn75"><div class="svelte-fkmn75"><!> <br> <!> <br> <!> <br></div> <div class="svelte-fkmn75"><!> <br> <!> <br> <!></div></div> <a>Link</a> <br> <!></div></div></div>');function Mt(D,e){se(e,!0);let t=x(!1);me(()=>{r(t)&&setTimeout(()=>{o(t,!1)},2e3)});var l=Gr();const v=re(()=>e.theme.text.join(" "));j(()=>O(l,"--text",r(v)));const h=re(()=>e.theme.text_high.join(" "));j(()=>O(l,"--text-high",r(h)));const _=re(()=>e.theme.bg.join(" "));j(()=>O(l,"--bg",r(_)));const m=re(()=>e.theme.bg_high.join(" "));j(()=>O(l,"--bg-high",r(m)));const k=re(()=>e.theme.action.join(" "));j(()=>O(l,"--action",r(k)));const $=re(()=>e.theme.accent.join(" "));j(()=>O(l,"--accent",r($)));const g=re(()=>e.theme.error.join(" "));j(()=>O(l,"--error",r(g)));var w=d(l),U=d(w),b=d(U),p=d(b);c(b);var M=a(b,8);he(M,{label:"Preview",placeholder:"Preview",width:"12.5rem"});var y=a(M,2),T=d(y),L=d(T);ce(L,{level:1,get isLoading(){return r(t)},onclick:()=>o(t,!0),children:(f,G)=>{z();var P=F("Button");u(f,P)},$$slots:{default:!0}});var q=a(L,4);ce(q,{level:2,get isLoading(){return r(t)},onclick:()=>o(t,!0),children:(f,G)=>{z();var P=F("Button");u(f,P)},$$slots:{default:!0}});var H=a(q,4);ce(H,{level:3,get isLoading(){return r(t)},onclick:()=>o(t,!0),children:(f,G)=>{z();var P=F("Button");u(f,P)},$$slots:{default:!0}}),z(2),c(T);var S=a(T,2),I=d(S);ce(I,{level:-1,get isLoading(){return r(t)},onclick:()=>o(t,!0),children:(f,G)=>{z();var P=F("Button");u(f,P)},$$slots:{default:!0}});var n=a(I,4);ce(n,{level:-2,get isLoading(){return r(t)},onclick:()=>o(t,!0),children:(f,G)=>{z();var P=F("Button");u(f,P)},$$slots:{default:!0}});var E=a(n,4);ce(E,{level:-3,get isLoading(){return r(t)},onclick:()=>o(t,!0),children:(f,G)=>{z();var P=F("Button");u(f,P)},$$slots:{default:!0}}),c(S),c(y);var K=a(y,2);N(K,"href",window.location.href),K.__click=[Or];var C=a(K,4);mr(C,{}),c(U),c(w),c(l),j(()=>{O(l,"--border-radius",e.borderRadius),O(l,"--btn-text",e.theme.btn_text),O(l,"--theme-sun",e.theme.theme_sun),O(l,"--theme-moon",e.theme.theme_moon),N(p,"src",e.logoUrl)}),u(D,l),ne()}je(["click"]);var Fr=Q('<div><h2>Preview</h2> <!> <div class="preview svelte-1nlq99j"><!></div></div>');function Hr(D,e){se(e,!0);let t=["Light Theme","Dark Theme"],l=x(i(t[0]));var v=Fr(),h=a(d(v),2);qt(h,{tabs:t,center:!0,get selected(){return r(l)},set selected(g){o(l,i(g))}});var _=a(h,2),m=d(_);{var k=g=>{Mt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.light}})},$=g=>{Mt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.dark}})};J(m,g=>{r(l)===t[0]?g(k):g($,!1)})}c(_),c(v),u(D,v),ne()}var Xr=Q('<div class="err"> </div>'),Vr=Q('<div class="values svelte-1pkqupw"><p><!></p> <!> <h1>Light Theme</h1> <!> <br> <h1>Dark Theme</h1> <!></div> <div class="preview"><!> <hr> <p>Logo Upload</p> <!> <div class="buttons svelte-1pkqupw"><!> <!> <!></div> <!></div>',1),Yr=Q('<div class="container svelte-1pkqupw"><!></div>');function Zr(D,e){se(e,!0);const t="13rem";let l=ke(),v=ge(),h=x(!1),_=x(""),m=x(void 0),k=x(i($e())),$=re(()=>`/auth/v1/clients/${e.client.id}/logo?${r(k)}`),g=re(()=>`/auth/v1/theme/${e.client.id}`),w=re(()=>pr().get());me(()=>{U()});async function U(){var L;let T=await Pe(r(g));T.body?(T.body.client_id==="rauthy"&&console.log("using Rauthy default scheme"),o(m,i(T.body))):o(_,i(((L=T.error)==null?void 0:L.message)||"Error"))}async function b(T,L){if(!r(m)){console.error("theme is undefined");return}let q=r(m);q.client_id=e.client.id,console.log("payload",q);let H=await De(r(g),q);H.error?o(_,i(H.error.message)):await M()}async function p(){let T=await Ct(r(g));T.error?o(_,i(T.error.message)):(await U(),await M())}async function M(){o(h,!0);let T=new Date().getTime(),L=document.createElement("link");L.rel="stylesheet";let q=document.getElementsByTagName("head")[0];r(w)&&(L.href=`/auth/v1/theme/{{client_id}}/${T}`,q.appendChild(L)),L.href=`/auth/v1/theme/${e.client.id}/${T}`,q.appendChild(L),e.client.id!=="rauthy"&&(L.href="/auth/v1/theme/rauthy",q.appendChild(L)),setTimeout(()=>{o(h,!1)},2e3)}async function y(){o(k,i($e()))}Ke(D,{get action(){return r(g)},onSubmit:b,children:(T,L)=>{var q=Yr(),H=d(q);{var S=I=>{var n=Vr(),E=oe(n),K=d(E),C=d(K);ye(C,()=>v.clients.branding.descVariables),c(K);var f=a(K,2);he(f,{label:"--border-radius",placeholder:"--border-radius",get errMsg(){return v.validation.css},width:t,required:!0,pattern:It,get value(){return r(m).border_radius},set value(X){r(m).border_radius=X}});var G=a(f,4);jt(G,{inputWidth:t,get values(){return r(m).light},set values(X){r(m).light=X}});var P=a(G,6);jt(P,{inputWidth:t,get values(){return r(m).dark},set values(X){r(m).dark=X}}),c(E);var ae=a(E,2),ue=d(ae);hr(ue,()=>r(k),X=>{Hr(X,{get logoUrl(){return r($)},get theme(){return r(m)}})});var ee=a(ue,6),W=re(()=>`/auth/v1/clients/${e.client.id}/logo`);gr(ee,{method:"PUT",get url(){return r(W)},fileName:"logo",onSuccess:y});var A=a(ee,2),te=d(A);ce(te,{type:"submit",children:(X,fe)=>{z();var ve=F();j(()=>B(ve,l.common.save)),u(X,ve)},$$slots:{default:!0}});var Y=a(te,2);ce(Y,{level:-2,onclick:p,children:(X,fe)=>{z();var ve=F();j(()=>B(ve,v.common.reset)),u(X,ve)},$$slots:{default:!0}});var ie=a(Y,2);{var le=X=>{Ut(X,{})};J(ie,X=>{r(h)&&X(le)})}c(A);var pe=a(A,2);{var _e=X=>{var fe=Xr(),ve=d(fe,!0);c(fe),j(()=>B(ve,r(_))),u(X,fe)};J(pe,X=>{r(_)&&X(_e)})}c(ae),u(I,n)};J(H,I=>{r(m)&&I(S)})}c(q),u(T,q)},$$slots:{default:!0}}),ne()}var Jr=Q('<div class="flex"><!></div> <div class="details"><!></div>',1);function ea(D,e){se(e,!0);let t=ke(),l=ge();const v=[l.nav.config,"Secret","Branding",t.common.delete];let h=x(i(v[0])),_=x(void 0);me(()=>{e.client.id&&requestAnimationFrame(()=>{var p;(p=r(_))==null||p()})});var m=Jr(),k=oe(m),$=d(k);qt($,{tabs:v,get selected(){return r(h)},set selected(p){o(h,i(p))},get focusFirst(){return r(_)},set focusFirst(p){o(_,i(p))}}),c(k);var g=a(k,2),w=d(g);{var U=p=>{Ur(p,{get client(){return e.client},get clients(){return e.clients},get scopesAll(){return e.scopesAll},get onSave(){return e.onSave}})},b=p=>{var M=Le(),y=oe(M);{var T=q=>{jr(q,{get client(){return e.client}})},L=q=>{var H=Le(),S=oe(H);{var I=E=>{Zr(E,{get client(){return e.client}})},n=E=>{var K=Le(),C=oe(K);{var f=G=>{Dr(G,{get client(){return e.client},get onSave(){return e.onSave}})};J(C,G=>{r(h)===t.common.delete&&G(f)},!0)}u(E,K)};J(S,E=>{r(h)==="Branding"?E(I):E(n,!1)},!0)}u(q,H)};J(y,q=>{r(h)==="Secret"?q(T):q(L,!1)},!0)}u(p,M)};J(w,p=>{r(h)===l.nav.config?p(U):p(b,!1)})}c(g),u(D,m),ne()}var ta=Q("<div></div> <!>",1),ra=Q("<!> <!>",1),aa=Q('<div class="err"> </div>'),la=Q('<!> <div id="groups"><!></div>',1),ia=Q("<!> <!>",1);function sa(D,e){se(e,!0);let t=x(void 0),l=x(""),v=x(i([])),h=x(i([])),_=x(void 0),m=nr("cid"),k=x(i([]));const $=["ID"];let g=x(i($[0])),w=x("");const U=["ID"];Jt(()=>{b(),p()}),me(()=>{o(_,i(r(v).find(S=>S.id===m.get())))}),me(()=>{let S=r(w).toLowerCase();S?r(g)===$[0]&&o(h,i(r(v).filter(I=>I.id.toLowerCase().includes(S)))):o(h,i(r(v)))});async function b(){var I;let S=await At("/auth/v1/clients");S.body?o(v,i(S.body)):o(l,i(((I=S.error)==null?void 0:I.message)||"Error"))}async function p(){var I;let S=await At("/auth/v1/scopes");S.body?o(k,i(S.body.map(n=>n.name))):o(l,i(((I=S.error)==null?void 0:I.message)||"Error"))}function M(S,I){let n=I==="up";S===U[0]&&r(v).sort((E,K)=>n?E.id.localeCompare(K.id):K.id.localeCompare(E.id))}function y(){b()}async function T(S){var I;(I=r(t))==null||I(),await b(),m.set(S)}var L=ia(),q=oe(L);ir(q,{paddingTop:"2.1rem",buttonTilesAriaControls:"groups",width:"min(20rem, 100dvw)",thresholdNavSub:700,buttonTiles:S=>{var I=ta(),n=oe(I);O(n,"height",".5rem");var E=a(n,2);Me(E,17,()=>r(h),K=>K.id,(K,C)=>{var f=re(()=>m.get()===r(C).id);lr(K,{onclick:()=>m.set(r(C).id),get selected(){return r(f)},children:(G,P)=>{z();var ae=F();j(()=>B(ae,r(C).id)),u(G,ae)},$$slots:{default:!0}})}),u(S,I)},children:(S,I)=>{var n=ra(),E=oe(n),K=re(()=>r(v).length===0?1:2);rr(E,{get level(){return r(K)},alignRight:!0,get closeModal(){return r(t)},set closeModal(f){o(t,i(f))},children:(f,G)=>{Ar(f,{onSave:T,get clients(){return r(v)}})},$$slots:{default:!0}});var C=a(E,2);sr(C,{searchOptions:$,orderOptions:U,onChangeOrder:M,searchWidth:"min(19.5rem, 100dvw - .5rem)",get searchOption(){return r(g)},set searchOption(f){o(g,i(f))},get value(){return r(w)},set value(f){o(w,i(f))}}),u(S,n)},$$slots:{buttonTiles:!0,default:!0}});var H=a(q,2);ar(H,{children:(S,I)=>{var n=la(),E=oe(n);{var K=P=>{var ae=aa(),ue=d(ae,!0);c(ae),j(()=>B(ue,r(l))),u(P,ae)};J(E,P=>{r(l)&&P(K)})}var C=a(E,2),f=d(C);{var G=P=>{ea(P,{get client(){return r(_)},get clients(){return r(v)},get scopesAll(){return r(k)},onSave:y})};J(f,P=>{r(_)&&P(G)})}c(C),u(S,n)},$$slots:{default:!0}}),u(D,L),ne()}function na(D){sa(D,{})}export{na as component};
