import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.BVESbwbj.js";import{p as A,w as y,a as O,u as a,v as r,c as k,ap as N,s as S,r as j,t as _,f as W}from"../chunks/runtime.BONl2e88.js";import{s as L}from"../chunks/render.AqJWcVDb.js";import{e as ee}from"../chunks/each.Bce--_O8.js";import{a as d,d as P,t as b,e as ae}from"../chunks/template.B7ldVCvc.js";import{p as s}from"../chunks/proxy.0BECmVET.js";import{o as M}from"../chunks/index-client.Bjp_k6xO.js";import{m as re,n as te,o as se,q as oe}from"../chunks/OptionSelect.TkTfcdPh.js";import{i as T}from"../chunks/if.DS90EFHs.js";import{p as R}from"../chunks/props.BlbrNjWf.js";import{r as B}from"../chunks/legacy-client.D71ZcBDy.js";import{E as F}from"../chunks/ExpandContainer.2O3yvOBK.js";import{c as H,a as J}from"../chunks/index.esm.B2KJ0uBO.js";import{W as K,l as Q}from"../chunks/helpers.CQGRRstl.js";import{B as V}from"../chunks/Button.JPJkNEUa.js";import{I as X}from"../chunks/Input.KbCPDMgh.js";import{a as U,c as z}from"../chunks/index.BJiFQ8Di.js";import{T as Y}from"../chunks/Tooltip.BZNUXfH5.js";import{T as ie}from"../chunks/TabBar.u0W3le5w.js";import{O as ne}from"../chunks/OrderSearchBar.DcBjpUC6.js";import{P as le}from"../chunks/Pagination.DjghmVzr.js";var ve=b('<div class="header font-label svelte-r30xs6">ADD NEW GROUP</div>'),de=b('<div class="success svelte-r30xs6">Success</div>'),ce=b('<div class="err svelte-r30xs6"> </div>'),ue=b('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function me(C,h){A(h,!0);let u=R(h,"idx",31,()=>-1),m=y(void 0),l=y(s({group:""})),p=y(""),f=y(!1),x=y(void 0),E=y(s({}));const D=H().shape({group:J().trim().matches(K,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});B(()=>{a(f)&&r(x,s(setTimeout(()=>{h.onSave(),r(f,!1),r(l,s({group:""})),r(m,!1)},1500)))}),M(()=>()=>clearTimeout(a(x)));async function o(){if(r(p,""),!await c()){r(p,"Invalid input");return}a(l).group=a(l).group.trim();let i=await re(a(l));if(i.ok)r(f,!0);else{let w=await i.json();r(p,s(w.message))}}async function c(){try{return await D.validate(a(l),{abortEarly:!1}),r(E,s({})),!0}catch(i){return r(E,s(Q(i))),!1}}F(C,{get idx(){return u()},set idx(i){u(i)},get show(){return a(m)},set show(i){r(m,s(i))},header:i=>{var w=ve();d(i,w)},body:i=>{var w=ue(),G=k(w);X(G,{autocomplete:"off",placeholder:"Group Name",get value(){return a(l).group},set value(e){a(l).group=e},get error(){return a(E).group},set error(e){a(E).group=e},$$events:{input:c},children:(e,v)=>{N();var I=P("GROUP NAME");d(e,I)},$$slots:{default:!0}});var n=S(G,2);V(n,{level:1,width:"4rem",$$events:{click:o},children:(e,v)=>{N();var I=P("SAVE");d(e,I)},$$slots:{default:!0}});var g=S(n,2);{var t=e=>{var v=de();d(e,v)};T(g,e=>{a(f)&&e(t)})}var $=S(g,2);{var q=e=>{var v=ce(),I=k(v,!0);j(v),_(()=>L(I,a(p))),d(e,v)};T($,e=>{a(p)&&e(q)})}j(w),d(i,w)},$$slots:{header:!0,body:!0}}),O()}var pe=b('<div class="success svelte-17in7jd">Success</div>'),fe=b('<div class="mainErr err svelte-17in7jd"> </div>'),ge=b('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function $e(C,h){A(h,!0);let u=R(h,"group",31,()=>s({})),m=y(""),l=y(!1),p=y(void 0);B(()=>{a(l)&&r(p,s(setTimeout(()=>{r(l,!1),h.onSave()},2e3)))}),M(()=>()=>clearTimeout(a(p)));let f=y(s({}));const x=H().shape({name:J().trim().matches(K,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function E(){if(r(m,""),!await D()){r(m,"Invalid input");return}let e={group:u().name.trim()},v=await te(u().id,e);if(v.ok)r(l,!0);else{let I=await v.json();r(m,s(I.message))}}async function D(){try{return await x.validate(u(),{abortEarly:!1}),r(f,s({})),!0}catch(e){return r(f,s(Q(e))),!1}}var o=ge(),c=k(o),i=S(k(c),2),w=k(i,!0);j(i),j(c);var G=S(c,2);X(G,{autocomplete:"off",placeholder:"Group Name",get value(){return u().name},set value(e){u(u().name=e,!0)},get error(){return a(f).name},set error(e){a(f).name=e},$$events:{input:D},children:(e,v)=>{N();var I=P("GROUP NAME");d(e,I)},$$slots:{default:!0}});var n=S(G,2);V(n,{level:1,width:"4rem",$$events:{click:E},children:(e,v)=>{N();var I=P("SAVE");d(e,I)},$$slots:{default:!0}});var g=S(n,2);{var t=e=>{var v=pe();d(e,v)};T(g,e=>{a(l)&&e(t)})}var $=S(g,2);{var q=e=>{var v=fe(),I=k(v,!0);j(v),_(()=>L(I,a(m))),d(e,v)};T($,e=>{a(m)&&e(q)})}j(o),_(()=>L(w,u().id)),d(C,o),O()}var he=b('<div class="err svelte-1jljqe9"> </div>'),we=b('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this group?</div> <!> <!></div>');function ye(C,h){A(h,!0);let u=R(h,"group",19,()=>({})),m=y(!1),l=y("");async function p(){r(l,""),r(m,!0);let o=await se(u().id);if(o.ok)h.onSave();else{let c=await o.json();r(l,s(c.message))}r(m,!1)}var f=we(),x=S(k(f),2);V(x,{level:1,get isLoading(){return a(m)},set isLoading(o){r(m,s(o))},$$events:{click:p},children:(o,c)=>{N();var i=P("DELETE");d(o,i)},$$slots:{default:!0}});var E=S(x,2);{var D=o=>{var c=he(),i=k(c,!0);j(c),_(()=>L(i,a(l))),d(o,c)};T(E,o=>{a(l)&&o(D)})}j(f),d(C,f),O()}var je=b('<div class="data font-mono svelte-115hohv"> </div>'),be=b('<div class="data svelte-115hohv"> </div>'),ke=b('<div class="header svelte-115hohv"><!> <!></div>'),Se=b("<div><!></div>"),De=b("<div><!></div>"),Ie=b("<div><!> <!></div>");function Ee(C,h){A(h,!0);let u=R(h,"group",31,()=>s({})),m=y(void 0);const l=["Config","Delete"];let p=y(s(l[0]));const f=200,x=f/2;function E(){r(m,!1),h.onSave()}F(C,{get show(){return a(m)},set show(D){r(m,s(D))},header:D=>{var o=ke(),c=k(o);Y(c,{text:"Group ID",children:(w,G)=>{var n=je(),g=k(n,!0);j(n),_(()=>L(g,u().id)),d(w,n)},$$slots:{default:!0}});var i=S(c,2);Y(i,{text:"Group Name",children:(w,G)=>{var n=be(),g=k(n,!0);j(n),_(()=>L(g,u().name)),d(w,n)},$$slots:{default:!0}}),j(o),d(D,o)},body:D=>{var o=Ie(),c=k(o);ie(c,{labels:l,get selected(){return a(p)},set selected(n){r(p,s(n))}});var i=S(c,2);{var w=n=>{var g=Se(),t=k(g);$e(t,{get onSave(){return h.onSave},get group(){return u()},set group($){u($)}}),j(g),U(5,g,()=>z,()=>({delay:x,duration:f})),U(6,g,()=>z,()=>({duration:f})),d(n,g)},G=n=>{var g=ae(),t=W(g);{var $=q=>{var e=De(),v=k(e);ye(v,{get group(){return u()},onSave:E}),j(e),U(5,e,()=>z,()=>({delay:x,duration:f})),U(6,e,()=>z,()=>({duration:f})),d(q,e)};T(t,q=>{a(p)==="Delete"&&q($)},!0)}d(n,g)};T(i,n=>{a(p)==="Config"?n(w):n(G,!1)})}j(o),d(D,o)},$$slots:{header:!0,body:!0}}),O()}var xe=b('<div class="svelte-10dkaqk"><!></div>'),Ge=b(' <div class="content"><!> <!> <div id="groups" class="svelte-10dkaqk"></div> <!> <div style="height: 20px"></div></div>',1);function Ce(C,h){A(h,!0);let u=y(""),m=y(s([])),l=y(s([])),p=y(s([])),f=[{label:"Name",callback:(t,$)=>t.name.toLowerCase().includes($.toLowerCase())},{label:"ID",callback:(t,$)=>t.id.toLowerCase().includes($.toLowerCase())}],x=[{label:"Name",callback:(t,$)=>t.name.localeCompare($.name)},{label:"ID",callback:(t,$)=>t.id.localeCompare($.id)}];M(async()=>{E()});async function E(){let t=await oe(),$=await t.json();t.ok?r(m,s([...$])):r(u,s($.message))}function D(){E()}N();var o=Ge(),c=W(o),i=S(c),w=k(i);ne(w,{get items(){return a(m)},searchOptions:f,orderOptions:x,get resItems(){return a(l)},set resItems(t){r(l,s(t))}});var G=S(w,2);me(G,{onSave:D});var n=S(G,2);ee(n,23,()=>a(p),t=>t.id,(t,$,q)=>{let e=q;var v=xe(),I=k(v);Ee(I,{onSave:D,get group(){return a(p)[a(e)]},set group(Z){a(p)[a(e)]=Z}}),j(v),d(t,v)}),j(n);var g=S(n,2);le(g,{get items(){return a(l)},set items(t){r(l,s(t))},get resItems(){return a(p)},set resItems(t){r(p,s(t))}}),N(2),j(i),_(()=>L(c,`${a(u)??""} `)),d(C,o),O()}function qe(C){Ce(C,{})}export{qe as component};
