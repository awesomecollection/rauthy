import{a as u,t as D,d as ye,e as G}from"../chunks/disclose-version.BP4T4xdV.js";import{a as se,s as a,t as U,p as ne,j as r,l as C,k as n,c as d,r as c,f as oe,a9 as re,aa as ge,a7 as W,a5 as Yt}from"../chunks/index-client.hxMyB_b4.js";import{d as Me,e as xt,s as R}from"../chunks/render.yNX9q8-B.js";import{i as Y}from"../chunks/if.BeBa1Kxb.js";import{e as je,i as Ct}from"../chunks/each.BUp7aLCc.js";import{B as ce,a as z,t as er,s as tr}from"../chunks/Button.BR1gOfNn.js";import{p as i}from"../chunks/proxy.DaVNR9vk.js";import{B as rr}from"../chunks/ButtonAddModal.DsDc6nUh.js";import{C as ar}from"../chunks/ContentAdmin.YSUtpxca.js";import{N as lr}from"../chunks/NavButtonTile.DRctQzgA.js";import{N as ir}from"../chunks/NavSub.DILgx03i.js";import{O as sr}from"../chunks/OrderSearchBar.wIdu7A5l.js";import{b as Be,d as Ne,c as Lt,f as St}from"../chunks/fetch.Bq59EV_b.js";import{u as nr}from"../chunks/param.svelte.BbzO27-O.js";import{h as $e}from"../chunks/html.704f8A94.js";import{I as he}from"../chunks/pow.BMnvYon0.js";import{n as or,g as At,a as Ee,o as cr,p as dr,q as It}from"../chunks/patterns.BRCxk8by.js";import{F as Qe}from"../chunks/Form.BnvI_UPN.js";import{u as be}from"../chunks/i18n.svelte.Ci9wvqOq.js";import{u as pe}from"../chunks/i18n_admin.svelte.lt3dD7TQ.js";import{I as ve}from"../chunks/InputCheckbox.BFLz2Hte.js";import{r as De,s as F}from"../chunks/class.CF2J4YCf.js";import{b as Pe}from"../chunks/input.BqbgywMu.js";import{b as qt}from"../chunks/this.uWYFW-L9.js";import{p as V}from"../chunks/props.DNAkfByl.js";import{g as _e}from"../chunks/helpers.CchIKxjM.js";import{I as vr}from"../chunks/IconStop.DLLup3H7.js";import{T as Rt}from"../chunks/Tabs.DUIpSMWU.js";import{I as Tt}from"../chunks/IconCheck.C6tGCpWy.js";import{L as Fe}from"../chunks/LabeledValue.CxxfjE_4.js";import{S as Ut}from"../chunks/SelectList.FzYp0jWd.js";import{O as Mt}from"../chunks/Options.CjsqRicG.js";import{I as ur}from"../chunks/InputPassword.DvK4K3vC.js";import{k as hr}from"../chunks/key.DIUIfgzP.js";import{T as mr}from"../chunks/ThemeSwitch.DTJa252X.js";import{I as gr}from"../chunks/InputFile.BNBX2-L3.js";function pr(B,e,t,l){var v;e(),(v=t.onInput)==null||v.call(t,r(l))}function fr(B,e,t){var l;switch(B.code){case"Enter":e(),(l=t.onEnter)==null||l.call(t);break}}function br(B,e){var t,l;(t=e())==null||t.focus(),(l=e())==null||l.scrollIntoView({behavior:"smooth",block:"center"})}var _r=D('<li class="value svelte-r5y8pk"><div class="label"> </div> <div class="btnClose svelte-r5y8pk"><!></div></li>'),kr=D("<option></option>"),$r=D('<datalist class="absolute svelte-r5y8pk"></datalist>'),wr=D('<span class="err"> </span>'),yr=D('<div role="none" class="container svelte-r5y8pk"><ul class="svelte-r5y8pk"><!> <li class="svelte-r5y8pk"><input autocomplete="off" class="svelte-r5y8pk"> <!></li></ul> <label class="font-label noselect svelte-r5y8pk"> <!></label></div>');function ke(B,e){se(e,!0);let t=V(e,"ref",15),l=V(e,"typ",3,"text"),v=V(e,"id",19,_e),h=V(e,"values",31,()=>i([])),$=V(e,"label",3,""),m=V(e,"placeholder",3,""),w=V(e,"disabled",3,!1),y=V(e,"required",3,!1),g=V(e,"isError",15,!1),k=V(e,"width",3,"inherit"),T=V(e,"maxHeightList",3,"inherit"),_=be();const p=_e();let x=C(""),b=re(()=>e.datalist&&e.datalist.length>0?p:void 0);function E(P){h(h().filter(I=>I!==P))}function N(P){var I;L(),(I=e.onBlur)==null||I.call(e),J()}function Q(P){P.preventDefault(),g(!0)}function J(){r(x)&&L()&&(h().push(r(x)),n(x,""))}function L(){var I;let P=(I=t())==null?void 0:I.validity;return P?(g(!P.valid),P.valid):(g(!1),!0)}var A=yr();A.__click=[br,t];var o=d(A),M=d(o);je(M,17,h,Ct,(P,I)=>{var te=_r(),X=d(te),ie=d(X,!0);c(X);var le=a(X,2),K=d(le);ce(K,{invisible:!0,onclick:()=>E(r(I)),children:(ue,de)=>{vr(ue,{width:"1.2rem"})},$$slots:{default:!0}}),c(le),c(te),U(()=>R(ie,r(I))),u(P,te)});var O=a(M,2),S=d(O);De(S),S.__keydown=[fr,J,e],S.__input=[pr,L,e,x],qt(S,P=>t(P),()=>t());var f=a(S,2);{var Z=P=>{var I=$r();F(I,"id",p),je(I,21,()=>e.datalist,Ct,(te,X)=>{var ie=kr(),le={};U(()=>{le!==(le=r(X))&&(ie.value=(ie.__value=r(X))==null?"":r(X))}),u(te,ie)}),c(I),u(P,I)};Y(f,P=>{e.datalist&&e.datalist.length>1&&P(Z)})}c(O),c(o);var j=a(o,2),ae=d(j),me=a(ae);{var ee=P=>{var I=ye(),te=oe(I);{var X=ie=>{var le=wr(),K=d(le,!0);c(le),U(()=>R(K,e.errMsg||_.common.invalidInput)),u(ie,le)};Y(te,ie=>{g()&&ie(X)})}u(P,I)};Y(me,P=>{g()&&P(ee)})}c(j),c(A),U(()=>{z(A,"width",k()),z(o,"max-height",T()),F(S,"type",l()),F(S,"id",v()),F(S,"name",e.name),F(S,"list",r(b)),F(S,"title",e.errMsg),F(S,"aria-label",$()||m()),F(S,"placeholder",m()),F(S,"aria-placeholder",m()),S.disabled=w(),F(S,"aria-disabled",w()),S.required=y()&&h().length<1,F(S,"aria-required",y()&&h().length<1),F(S,"maxlength",e.maxLength||void 0),F(S,"min",e.min||void 0),F(S,"max",e.max||void 0),F(S,"pattern",e.pattern),F(j,"for",v()),F(j,"data-required",y()),R(ae,`${$()??""} `)}),xt("invalid",S,Q),xt("blur",S,N),Pe(S,()=>r(x),P=>n(x,P)),u(B,A),ne()}Me(["click","keydown","input"]);var xr=D('<div class="err"> </div>'),Cr=D('<!> <!> <!> <p class="svelte-15tp6i6"><!></p> <!> <!> <!> <!>',1),Lr=D('<div class="container svelte-15tp6i6"><!></div>');function Sr(B,e){se(e,!0);let t=be(),l=pe(),v=C(void 0),h=C(""),$=C(""),m=C(""),w=C(!0),y=C(i([])),g=C(i([]));ge(()=>{requestAnimationFrame(()=>{var p;(p=r(v))==null||p.focus()})});async function k(p,x){var N;if(e.clients.find(Q=>Q.id===r($))){n(h,i(l.common.nameExistsAlready));return}n(h,"");let b={id:r($),name:r(m)||void 0,confidential:r(w),redirect_uris:r(y),post_logout_redirect_uris:r(g).length>0?r(g):void 0},E=await Be(p.action,b);E.body?e.onSave(E.body.id):n(h,i(((N=E.error)==null?void 0:N.message)||"Error"))}var T=Lr(),_=d(T);Qe(_,{action:"/auth/v1/clients",onSubmit:k,children:(p,x)=>{var b=Cr(),E=oe(b);he(E,{autocomplete:"off",label:"Client ID",placeholder:"Client ID",required:!0,pattern:or,get ref(){return r(v)},set ref(f){n(v,i(f))},get value(){return r($)},set value(f){n($,i(f))}});var N=a(E,2);he(N,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},pattern:At,get value(){return r(m)},set value(f){n(m,i(f))}});var Q=a(N,2);ve(Q,{get ariaLabel(){return l.clients.confidential},get checked(){return r(w)},set checked(f){n(w,i(f))},children:(f,Z)=>{W();var j=G();U(()=>R(j,l.clients.confidential)),u(f,j)},$$slots:{default:!0}});var J=a(Q,2),L=d(J);$e(L,()=>l.clients.descUri),c(J);var A=a(J,2);ke(A,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(y)},set values(f){n(y,i(f))}});var o=a(A,2);ke(o,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},get values(){return r(g)},set values(f){n(g,i(f))}});var M=a(o,2);ce(M,{type:"submit",children:(f,Z)=>{W();var j=G();U(()=>R(j,t.common.save)),u(f,j)},$$slots:{default:!0}});var O=a(M,2);{var S=f=>{var Z=xr(),j=d(Z,!0);c(Z),U(()=>R(j,r(h))),u(f,Z)};Y(O,f=>{r(h)&&f(S)})}u(p,b)},$$slots:{default:!0}}),c(T),u(B,T),ne()}const Oe="urn:ietf:params:oauth:grant-type:device_code";var Ar=D('<div class="err"> </div>'),Ir=D('<div class="err"> </div>'),qr=D('<h5> </h5> <!> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"> </p> <!> <!> <div></div> <h5> </h5> <!> <!> <!> <p class="mb-0 svelte-5tvvvt">Authentication Flows</p> <!> <!> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <p class="desc svelte-5tvvvt"><strong> </strong></p> <!> <!> <!> <div></div> <p class="desc svelte-5tvvvt"> </p> <!> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p class="desc svelte-5tvvvt"><!></p> <!> <!> <div></div> <p> </p> <!> <div></div> <p> </p> <p> </p> <!> <!> <div></div> <p> </p> <!> <div class="flex gap-05"><!> <!></div> <!> <div></div>',1),Rr=D('<div class="container svelte-5tvvvt"><!></div>');function Tr(B,e){var ae,me;se(e,!0);let t=be(),l=pe();const v="min(20rem, calc(100dvw - .5rem))";let h=C(""),$=C(!1),m=C(i(e.client.id)),w=C(i(e.client.name||"")),y=C(i(e.client.enabled)),g=C(i(e.client.confidential)),k=C(i(e.client.client_uri||"")),T=C(i(e.client.contacts?Array.from(e.client.contacts):[])),_=C(i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),p=C(i(Array.from(e.client.redirect_uris))),x=C(i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),b=i({authorizationCode:e.client.flows_enabled.includes("authorization_code"),clientCredentials:e.client.flows_enabled.includes("client_credentials"),password:e.client.flows_enabled.includes("password"),refreshToken:e.client.flows_enabled.includes("refresh_token"),deviceCode:e.client.flows_enabled.includes(Oe)});const E=["RS256","RS384","RS512","EdDSA"];let N=C(i(e.client.access_token_alg)),Q=C(i(e.client.id_token_alg)),J=C(i(e.client.access_token_lifetime.toString())),L=C(i(e.client.auth_code_lifetime.toString())),A=C(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.scopes.includes(ee)||!1})))),o=C(i(e.scopesAll.map(ee=>({name:ee,selected:e.client.default_scopes.includes(ee)||!1})))),M=i({plain:((ae=e.client.challenges)==null?void 0:ae.includes("plain"))||!1,s256:((me=e.client.challenges)==null?void 0:me.includes("S256"))||!1}),O=C(i(e.client.force_mfa));ge(()=>{var ee,P;e.client.id&&(n(m,i(e.client.id)),n(w,i(e.client.name||"")),n(y,i(e.client.enabled)),n(g,i(e.client.confidential)),n(k,i(e.client.client_uri||"")),n(T,i(e.client.contacts?Array.from(e.client.contacts):[])),n(_,i(e.client.allowed_origins?Array.from(e.client.allowed_origins):[])),n(p,i(Array.from(e.client.redirect_uris))),n(x,i(e.client.post_logout_redirect_uris?Array.from(e.client.post_logout_redirect_uris):[])),b.authorizationCode=e.client.flows_enabled.includes("authorization_code"),b.clientCredentials=e.client.flows_enabled.includes("client_credentials"),b.password=e.client.flows_enabled.includes("password"),b.refreshToken=e.client.flows_enabled.includes("refresh_token"),b.deviceCode=e.client.flows_enabled.includes(Oe),n(N,i(e.client.access_token_alg)),n(Q,i(e.client.id_token_alg)),n(J,i(e.client.access_token_lifetime.toString())),n(L,i(e.client.auth_code_lifetime.toString())),n(A,i(e.scopesAll.map(I=>({name:I,selected:e.client.scopes.includes(I)||!1})))),n(o,i(e.scopesAll.map(I=>({name:I,selected:e.client.default_scopes.includes(I)||!1})))),M.plain=((ee=e.client.challenges)==null?void 0:ee.includes("plain"))||!1,M.s256=((P=e.client.challenges)==null?void 0:P.includes("S256"))||!1)});async function S(ee,P){n(h,"");let I={id:r(m),name:r(w)||void 0,enabled:r(y),confidential:r(g),allowed_origins:r(_).length>0?r(_):void 0,redirect_uris:r(p),post_logout_redirect_uris:r(x).length>0?r(x):void 0,flows_enabled:[],access_token_alg:r(N),id_token_alg:r(Q),access_token_lifetime:Number.parseInt(r(J)),auth_code_lifetime:Number.parseInt(r(L)),scopes:r(A).filter(X=>X.selected).map(X=>X.name),default_scopes:r(o).filter(X=>X.selected).map(X=>X.name),challenges:void 0,force_mfa:r(O),client_uri:r(k)||void 0,contacts:r(T).length>0?r(T):void 0};b.authorizationCode&&I.flows_enabled.push("authorization_code"),b.clientCredentials&&I.flows_enabled.push("client_credentials"),b.password&&I.flows_enabled.push("password"),b.refreshToken&&I.flows_enabled.push("refresh_token"),b.deviceCode&&I.flows_enabled.push(Oe),M.plain&&(I.challenges=["plain"]),M.s256&&(I.challenges?I.challenges.push("S256"):I.challenges=["S256"]),console.log("payload",I);let te=await Ne(ee.action,I);te.error?n(h,i(te.error.message)):(n($,!0),e.onSave(),setTimeout(()=>{n($,!1)},2e3))}var f=Rr(),Z=d(f),j=re(()=>`/auth/v1/clients/${e.client.id}`);Qe(Z,{get action(){return r(j)},onSubmit:S,children:(ee,P)=>{var I=qr(),te=oe(I),X=d(te,!0);c(te);var ie=a(te,2);Fe(ie,{label:"ID",mono:!0,children:(s,H)=>{W();var q=G();U(()=>R(q,e.client.id)),u(s,q)},$$slots:{default:!0}});var le=a(ie,2),K=d(le,!0);c(le);var ue=a(le,2);he(ue,{autocomplete:"off",get label(){return l.clients.name},get placeholder(){return l.clients.name},width:v,pattern:At,get value(){return r(w)},set value(s){n(w,i(s))}});var de=a(ue,2),Nt=d(de,!0);c(de);var Ze=a(de,2);he(Ze,{typ:"url",autocomplete:"off",label:"URI",placeholder:"URI",width:v,pattern:Ee,get value(){return r(k)},set value(s){n(k,i(s))}});var Ge=a(Ze,2);ke(Ge,{get label(){return l.common.contact},pattern:cr,get values(){return r(T)},set values(s){n(T,i(s))}});var Je=a(Ge,2);z(Je,"height",".5rem");var xe=a(Je,2),Et=d(xe,!0);c(xe);var Ke=a(xe,2);ve(Ke,{get ariaLabel(){return l.common.enabled},get checked(){return r(y)},set checked(s){n(y,i(s))},children:(s,H)=>{W();var q=G();U(()=>R(q,l.common.enabled)),u(s,q)},$$slots:{default:!0}});var He=a(Ke,2);ve(He,{get ariaLabel(){return l.clients.confidential},get checked(){return r(g)},set checked(s){n(g,i(s))},children:(s,H)=>{W();var q=G();U(()=>R(q,l.clients.confidential)),u(s,q)},$$slots:{default:!0}});var Xe=a(He,2);ve(Xe,{get ariaLabel(){return l.clients.forceMfa},get checked(){return r(O)},set checked(s){n(O,i(s))},children:(s,H)=>{W();var q=G();U(()=>R(q,l.clients.forceMfa)),u(s,q)},$$slots:{default:!0}});var Ve=a(Xe,4);ve(Ve,{ariaLabel:"authorization_code",get checked(){return b.authorizationCode},set checked(s){b.authorizationCode=s},children:(s,H)=>{W();var q=G("authorization_code");u(s,q)},$$slots:{default:!0}});var Ye=a(Ve,2);ve(Ye,{ariaLabel:"urn:ietf:params:oauth:grant-type:device_code",get checked(){return b.deviceCode},set checked(s){b.deviceCode=s},children:(s,H)=>{W();var q=G("device_code");u(s,q)},$$slots:{default:!0}});var et=a(Ye,2);ve(et,{ariaLabel:"client_credentials",get checked(){return b.clientCredentials},set checked(s){b.clientCredentials=s},children:(s,H)=>{W();var q=G("client_credentials");u(s,q)},$$slots:{default:!0}});var tt=a(et,2);ve(tt,{ariaLabel:"password",get checked(){return b.password},set checked(s){b.password=s},children:(s,H)=>{W();var q=G("password");u(s,q)},$$slots:{default:!0}});var rt=a(tt,2);ve(rt,{ariaLabel:"refresh_token",get checked(){return b.refreshToken},set checked(s){b.refreshToken=s},children:(s,H)=>{W();var q=G("refresh_token");u(s,q)},$$slots:{default:!0}});var at=a(rt,2);z(at,"height",".5rem");var Ce=a(at,2),Qt=d(Ce,!0);c(Ce);var Le=a(Ce,2),lt=d(Le),Dt=d(lt,!0);c(lt),c(Le);var it=a(Le,2);ve(it,{ariaLabel:"PKCE plain",get checked(){return M.plain},set checked(s){M.plain=s},children:(s,H)=>{W();var q=G("plain");u(s,q)},$$slots:{default:!0}});var st=a(it,2);ve(st,{ariaLabel:"PKCE S256",get checked(){return M.s256},set checked(s){M.s256=s},children:(s,H)=>{W();var q=G("S256");u(s,q)},$$slots:{default:!0}});var nt=a(st,2);{var Pt=s=>{var H=Ar(),q=d(H,!0);c(H),U(()=>R(q,l.clients.errConfidentialPKCE)),er(3,H,()=>tr,()=>({duration:150})),u(s,H)};Y(nt,s=>{!r(g)&&!M.plain&&!M.s256&&s(Pt)})}var ot=a(nt,2);z(ot,"height",".5rem");var Se=a(ot,2),Ft=d(Se,!0);c(Se);var ct=a(Se,2);ke(ct,{typ:"url",label:"Allowed Origins",get errMsg(){return l.validation.origin},pattern:dr,get values(){return r(_)},set values(s){n(_,i(s))}});var Ae=a(ct,2),Ot=d(Ae);$e(Ot,()=>l.clients.descUri),c(Ae);var dt=a(Ae,2);ke(dt,{typ:"url",label:"Redirect URIs",get errMsg(){return l.validation.uri},get required(){return b.authorizationCode},pattern:Ee,get values(){return r(p)},set values(s){n(p,i(s))}});var vt=a(dt,2);ke(vt,{typ:"url",label:"Post Logout Redirect URIs",get errMsg(){return l.validation.uri},pattern:Ee,get values(){return r(x)},set values(s){n(x,i(s))}});var ut=a(vt,2);z(ut,"height",".5rem");var Ie=a(ut,2),Wt=d(Ie);$e(Wt,()=>l.clients.scopes.desc),c(Ie);var ht=a(Ie,2);Ut(ht,{get items(){return r(A)},set items(s){n(A,i(s))},children:(s,H)=>{W();var q=G();U(()=>R(q,l.clients.scopes.allowed)),u(s,q)},$$slots:{default:!0}});var mt=a(ht,2);Ut(mt,{get items(){return r(o)},set items(s){n(o,i(s))},children:(s,H)=>{W();var q=G();U(()=>R(q,l.clients.scopes.default)),u(s,q)},$$slots:{default:!0}});var gt=a(mt,2);z(gt,"height",".75rem");var qe=a(gt,2),zt=d(qe,!0);c(qe);var pt=a(qe,2);he(pt,{typ:"number",autocomplete:"off",label:"Token Lifetime",placeholder:"Token Lifetime",width:v,min:"10",max:"86400",errMsg:"10 <= Token Lifetime <= 86400",get value(){return r(J)},set value(s){n(J,i(s))}});var ft=a(pt,2);z(ft,"height",".5rem");var Re=a(ft,2),Zt=d(Re,!0);c(Re);var Te=a(Re,2),Gt=d(Te,!0);c(Te);var bt=a(Te,2);Fe(bt,{label:"Access Token Algorithm",children:(s,H)=>{Mt(s,{ariaLabel:"Access Token Algorithm",options:E,borderless:!0,get value(){return r(N)},set value(q){n(N,i(q))}})},$$slots:{default:!0}});var _t=a(bt,2);Fe(_t,{label:"ID Token Algorithm",children:(s,H)=>{Mt(s,{ariaLabel:"ID Token Algorithm",options:E,borderless:!0,get value(){return r(Q)},set value(q){n(Q,i(q))}})},$$slots:{default:!0}});var kt=a(_t,2);z(kt,"height",".5rem");var Ue=a(kt,2),Jt=d(Ue,!0);c(Ue);var $t=a(Ue,2);he($t,{typ:"number",autocomplete:"off",label:"Auth Code Lifetime",placeholder:"Auth Code Lifetime",width:v,min:"10",max:"300",errMsg:"10 <= Auth Code Lifetime <= 300",get value(){return r(L)},set value(s){n(L,i(s))}});var we=a($t,2);z(we,"margin-top","1rem");var wt=d(we);ce(wt,{type:"submit",children:(s,H)=>{W();var q=G();U(()=>R(q,t.common.save)),u(s,q)},$$slots:{default:!0}});var Kt=a(wt,2);{var Ht=s=>{Tt(s,{})};Y(Kt,s=>{r($)&&s(Ht)})}c(we);var yt=a(we,2);{var Xt=s=>{var H=Ir(),q=d(H,!0);c(H),U(()=>R(q,r(h))),u(s,H)};Y(yt,s=>{r(h)&&s(Xt)})}var Vt=a(yt,2);z(Vt,"height","1rem"),U(()=>{R(X,l.common.information),R(K,l.clients.descName),R(Nt,l.clients.descClientUri),R(Et,l.clients.config),R(Qt,l.clients.descPKCE),R(Dt,l.clients.descPKCEEnforce),R(Ft,l.clients.descOrigin),R(zt,l.clients.tokenLifetime.p1),R(Zt,l.clients.tokenLifetime.p2),R(Gt,l.clients.tokenLifetime.p3),R(Jt,l.clients.descAuthCode)}),u(ee,I)},$$slots:{default:!0}}),c(f),u(B,f),ne()}var Ur=D("<!> <!>",1),Mr=D('<div class="container svelte-19xcrje"><div class="err"> </div> <!></div>');function jr(B,e){se(e,!0);let t=pe(),l=C(""),v=C(void 0);ge(()=>{n(l,""),n(v,""),e.client.confidential?h():n(l,i(t.clients.confidentialNoSecret))});async function h(){let _=await Be(`/auth/v1/clients/${e.client.id}/secret`);m(_)}async function $(){let _=await Ne(`/auth/v1/clients/${e.client.id}/secret`);m(_)}function m(_){var p;_.body?_.body.secret&&n(v,i(_.body.secret)):n(l,i(((p=_.error)==null?void 0:p.message)||"Error"))}var w=Mr(),y=d(w),g=d(y,!0);c(y);var k=a(y,2);{var T=_=>{var p=Ur(),x=oe(p);ur(x,{autocomplete:"off",label:"Client Secret",placeholder:"Client Secret",disabled:!0,showCopy:!0,get value(){return r(v)},set value(E){n(v,i(E))}});var b=a(x,2);ce(b,{onclick:$,children:(E,N)=>{W();var Q=G();U(()=>R(Q,t.clients.generateSecret)),u(E,Q)},$$slots:{default:!0}}),u(_,p)};Y(k,_=>{r(v)&&_(T)})}c(w),U(()=>R(g,r(l))),u(B,w),ne()}var Br=D('<div class="err"> </div>'),Nr=D("<p> </p> <!> <!>",1);function Er(B,e){se(e,!0);let t=be(),l=pe(),v=C("");async function h(){n(v,"");let T=await Lt(`/auth/v1/clients/${e.client.id}`);T.error?n(v,i(T.error.message)):e.onSave()}var $=Nr(),m=oe($),w=d(m,!0);c(m);var y=a(m,2);ce(y,{level:-1,onclick:h,children:(T,_)=>{W();var p=G();U(()=>R(p,t.common.delete)),u(T,p)},$$slots:{default:!0}});var g=a(y,2);{var k=T=>{var _=Br(),p=d(_,!0);c(_),U(()=>R(p,r(v))),u(T,_)};Y(g,T=>{r(v)&&T(k)})}U(()=>R(w,l.clients.delete1)),u(B,$),ne()}var Qr=D('<div><div class="flex"><input type="range" class="svelte-12j8dit"> <div class="value font-mono svelte-12j8dit"> </div></div> <div class="label svelte-12j8dit"><label class="font-label noselect svelte-12j8dit"> </label></div></div>');function We(B,e){se(e,!0);let t=V(e,"value",15),l=V(e,"label",3,""),v=V(e,"disabled",3,!1),h=V(e,"step",3,1),$=V(e,"widthRange",3,"15rem");const m=_e();let w=re(()=>{if(e.hue!==void 0&&e.sat!==void 0&&e.lum!==void 0){if(e.bgMode==="hue")return`linear-gradient(
                    to right,
                    hsl(0 ${e.sat} ${e.lum}) 0%,
                    hsl(60 ${e.sat} ${e.lum}) 17%,
                    hsl(120 ${e.sat} ${e.lum}) 33%,
                    hsl(180 ${e.sat} ${e.lum}) 50%,
                    hsl(240 ${e.sat} ${e.lum}) 67%,
                    hsl(300 ${e.sat} ${e.lum}) 83%,
                    hsl(3600 ${e.sat} ${e.lum}) 100%
                )`;if(e.bgMode==="sat")return`linear-gradient(to right, hsl(${e.hue} 0 ${e.lum}), hsl(${e.hue} 100 ${e.lum}))`;if(e.bgMode==="lum")return`linear-gradient(to right, hsl(${e.hue} ${e.sat} 0), hsl(${e.hue} ${e.sat} 100))`}return"hsl(var(--text) / .5)"});var y=Qr(),g=d(y),k=d(g);De(k),F(k,"id",m);var T=a(k,2),_=d(T,!0);c(T),c(g);var p=a(g,2),x=d(p);F(x,"for",m);var b=d(x,!0);c(x),c(p),c(y),U(()=>{F(k,"name",e.name),F(k,"title",l()),F(k,"aria-label",l()),k.disabled=v(),F(k,"aria-disabled",v()),F(k,"min",e.min),F(k,"max",e.max),F(k,"step",h()),z(k,"width",$()),z(k,"--bg-slider",r(w)),R(_,t()),R(b,l())}),Pe(k,t),u(B,y),ne()}var Dr=D('<div class="outer svelte-1evkwuy"><div class="container svelte-1evkwuy"><div><label class="font-label svelte-1evkwuy"> </label> <div class="values svelte-1evkwuy"><!> <!> <!></div></div> <div class="color svelte-1evkwuy"></div></div></div>');function fe(B,e){se(e,!0);let t=V(e,"h",15),l=V(e,"s",15),v=V(e,"l",15);const h=_e(),$="15rem";let m=re(()=>`hsl(${t()} ${l()} ${v()})`);var w=Dr(),y=d(w),g=d(y),k=d(g);F(k,"for",h);var T=d(k,!0);c(k);var _=a(k,2);F(_,"id",h);var p=d(_);We(p,{label:"Hue",min:0,max:359,widthRange:$,bgMode:"hue",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return t()},set value(N){t(N)}});var x=a(p,2);We(x,{label:"Sat",min:0,max:100,widthRange:$,bgMode:"sat",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return l()},set value(N){l(N)}});var b=a(x,2);We(b,{label:"Lum",min:0,max:100,widthRange:$,bgMode:"lum",get hue(){return t()},get sat(){return l()},get lum(){return v()},get value(){return v()},set value(N){v(N)}}),c(_),c(g);var E=a(g,2);c(y),c(w),U(()=>{z(y,"border-color",r(m)),R(T,e.label),z(E,"background",r(m))}),u(B,w),ne()}var Pr=(B,e)=>{var t;return(t=r(e))==null?void 0:t.click()},Fr=D('<div class="container svelte-lcwq3j"><!> <div role="none" class="mask svelte-lcwq3j"><div class="colorWrapper svelte-lcwq3j"><div class="color svelte-lcwq3j"></div></div> <input type="color" class="svelte-lcwq3j"></div></div>');function ze(B,e){se(e,!0);let t=V(e,"value",15),l=pe(),v=C(void 0);var h=Fr(),$=d(h);he($,{get label(){return e.label},get placeholder(){return e.label},get errMsg(){return l.validation.css},get width(){return e.inputWidth},required:!0,pattern:It,get value(){return t()},set value(y){t(y)}});var m=a($,2);m.__click=[Pr,v];var w=a(d(m),2);De(w),qt(w,y=>n(v,y),()=>r(v)),c(m),c(h),U(()=>z(h,"--color",t())),Pe(w,t),u(B,h),ne()}Me(["click"]);var Or=D('<div><p> </p> <div class="hsl svelte-10udpph"><div><!> <!> <!> <!></div> <div><!> <!> <!></div></div> <div><p><!></p> <!> <!> <!></div></div>');function jt(B,e){se(e,!0);let t=V(e,"values",15),l=pe();var v=Or(),h=d(v),$=d(h,!0);c(h);var m=a(h,2),w=d(m),y=d(w);fe(y,{label:"--text",get h(){return t().text[0]},set h(o){t(t().text[0]=o,!0)},get s(){return t().text[1]},set s(o){t(t().text[1]=o,!0)},get l(){return t().text[2]},set l(o){t(t().text[2]=o,!0)}});var g=a(y,2);fe(g,{label:"--text-high",get h(){return t().text_high[0]},set h(o){t(t().text_high[0]=o,!0)},get s(){return t().text_high[1]},set s(o){t(t().text_high[1]=o,!0)},get l(){return t().text_high[2]},set l(o){t(t().text_high[2]=o,!0)}});var k=a(g,2);fe(k,{label:"--bg",get h(){return t().bg[0]},set h(o){t(t().bg[0]=o,!0)},get s(){return t().bg[1]},set s(o){t(t().bg[1]=o,!0)},get l(){return t().bg[2]},set l(o){t(t().bg[2]=o,!0)}});var T=a(k,2);fe(T,{label:"--bg-high",get h(){return t().bg_high[0]},set h(o){t(t().bg_high[0]=o,!0)},get s(){return t().bg_high[1]},set s(o){t(t().bg_high[1]=o,!0)},get l(){return t().bg_high[2]},set l(o){t(t().bg_high[2]=o,!0)}}),c(w);var _=a(w,2),p=d(_);fe(p,{label:"--action",get h(){return t().action[0]},set h(o){t(t().action[0]=o,!0)},get s(){return t().action[1]},set s(o){t(t().action[1]=o,!0)},get l(){return t().action[2]},set l(o){t(t().action[2]=o,!0)}});var x=a(p,2);fe(x,{label:"--accent",get h(){return t().accent[0]},set h(o){t(t().accent[0]=o,!0)},get s(){return t().accent[1]},set s(o){t(t().accent[1]=o,!0)},get l(){return t().accent[2]},set l(o){t(t().accent[2]=o,!0)}});var b=a(x,2);fe(b,{label:"--error",get h(){return t().error[0]},set h(o){t(t().error[0]=o,!0)},get s(){return t().error[1]},set s(o){t(t().error[1]=o,!0)},get l(){return t().error[2]},set l(o){t(t().error[2]=o,!0)}}),c(_),c(m);var E=a(m,2),N=d(E),Q=d(N);$e(Q,()=>l.clients.branding.descFullCss),c(N);var J=a(N,2);ze(J,{label:"--btn-text",get inputWidth(){return e.inputWidth},get value(){return t().btn_text},set value(o){t(t().btn_text=o,!0)}});var L=a(J,2);ze(L,{label:"--theme-sun",get inputWidth(){return e.inputWidth},get value(){return t().theme_sun},set value(o){t(t().theme_sun=o,!0)}});var A=a(L,2);ze(A,{label:"--theme-moon",get inputWidth(){return e.inputWidth},get value(){return t().theme_moon},set value(o){t(t().theme_moon=o,!0)}}),c(E),c(v),U(()=>R($,l.clients.branding.descHsl)),u(B,v),ne()}var Wr=B=>B.preventDefault(),zr=D('<div aria-label="Preview: All components inside are only for theme and colors preview and have no effect or interaction"><div class="inner svelte-fkmn75"><div class="container svelte-fkmn75"><div class="logo svelte-fkmn75"><img alt="Client Logo"></div> <h3 class="svelte-fkmn75">Header</h3> <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p> <p><span class="svelte-fkmn75">--accent-color</span></p> <!> <div class="btn svelte-fkmn75"><div class="svelte-fkmn75"><!> <br> <!> <br> <!> <br></div> <div class="svelte-fkmn75"><!> <br> <!> <br> <!></div></div> <a>Link</a> <br> <!></div></div></div>');function Bt(B,e){se(e,!0);let t=C(!1);ge(()=>{r(t)&&setTimeout(()=>{n(t,!1)},2e3)});var l=zr();const v=re(()=>e.theme.text.join(" "));U(()=>z(l,"--text",r(v)));const h=re(()=>e.theme.text_high.join(" "));U(()=>z(l,"--text-high",r(h)));const $=re(()=>e.theme.bg.join(" "));U(()=>z(l,"--bg",r($)));const m=re(()=>e.theme.bg_high.join(" "));U(()=>z(l,"--bg-high",r(m)));const w=re(()=>e.theme.action.join(" "));U(()=>z(l,"--action",r(w)));const y=re(()=>e.theme.accent.join(" "));U(()=>z(l,"--accent",r(y)));const g=re(()=>e.theme.error.join(" "));U(()=>z(l,"--error",r(g)));var k=d(l),T=d(k),_=d(T),p=d(_);c(_);var x=a(_,8);he(x,{label:"Preview",placeholder:"Preview",width:"12.5rem"});var b=a(x,2),E=d(b),N=d(E);ce(N,{level:1,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var j=G("Button");u(f,j)},$$slots:{default:!0}});var Q=a(N,4);ce(Q,{level:2,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var j=G("Button");u(f,j)},$$slots:{default:!0}});var J=a(Q,4);ce(J,{level:3,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var j=G("Button");u(f,j)},$$slots:{default:!0}}),W(2),c(E);var L=a(E,2),A=d(L);ce(A,{level:-1,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var j=G("Button");u(f,j)},$$slots:{default:!0}});var o=a(A,4);ce(o,{level:-2,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var j=G("Button");u(f,j)},$$slots:{default:!0}});var M=a(o,4);ce(M,{level:-3,get isLoading(){return r(t)},onclick:()=>n(t,!0),children:(f,Z)=>{W();var j=G("Button");u(f,j)},$$slots:{default:!0}}),c(L),c(b);var O=a(b,2);F(O,"href",window.location.href),O.__click=[Wr];var S=a(O,4);mr(S,{}),c(T),c(k),c(l),U(()=>{z(l,"--border-radius",e.borderRadius),z(l,"--btn-text",e.theme.btn_text),z(l,"--theme-sun",e.theme.theme_sun),z(l,"--theme-moon",e.theme.theme_moon),F(p,"src",e.logoUrl)}),u(B,l),ne()}Me(["click"]);var Zr=D('<div><h2>Preview</h2> <!> <div class="preview svelte-1nlq99j"><!></div></div>');function Gr(B,e){se(e,!0);let t=["Light Theme","Dark Theme"],l=C(i(t[0]));var v=Zr(),h=a(d(v),2);Rt(h,{tabs:t,center:!0,get selected(){return r(l)},set selected(g){n(l,i(g))}});var $=a(h,2),m=d($);{var w=g=>{Bt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.light}})},y=g=>{Bt(g,{get logoUrl(){return e.logoUrl},get borderRadius(){return e.theme.border_radius},get theme(){return e.theme.dark}})};Y(m,g=>{r(l)===t[0]?g(w):g(y,!1)})}c($),c(v),u(B,v),ne()}var Jr=D('<div class="err"> </div>'),Kr=D('<div class="values svelte-1pkqupw"><p><!></p> <!> <h1>Light Theme</h1> <!> <br> <h1>Dark Theme</h1> <!></div> <div class="preview"><!> <hr> <p>Logo Upload</p> <!> <div class="buttons svelte-1pkqupw"><!> <!> <!></div> <!></div>',1),Hr=D('<div class="container svelte-1pkqupw"><!></div>');function Xr(B,e){se(e,!0);const t="13rem";let l=be(),v=pe(),h=C(!1),$=C(""),m=C(void 0),w=C(i(_e())),y=re(()=>`/auth/v1/clients/${e.client.id}/logo?${r(w)}`),g=re(()=>`/auth/v1/theme/${e.client.id}`);ge(()=>{k()});async function k(){var b;let x=await Be(r(g));x.body?(x.body.client_id==="rauthy"&&console.log("using Rauthy default scheme"),n(m,i(x.body))):n($,i(((b=x.error)==null?void 0:b.message)||"Error"))}async function T(x,b){if(!r(m)){console.error("theme is undefined");return}let E=r(m);E.client_id=e.client.id;let N=await Ne(r(g),E);N.error?n($,i(N.error.message)):(n(h,!0),setTimeout(()=>{n(h,!1)},2e3))}async function _(){let x=await Lt(r(g));x.error?n($,i(x.error.message)):(await k(),n(h,!0),setTimeout(()=>{n(h,!1)},2e3))}async function p(){n(w,i(_e()))}Qe(B,{get action(){return r(g)},onSubmit:T,children:(x,b)=>{var E=Hr(),N=d(E);{var Q=J=>{var L=Kr(),A=oe(L),o=d(A),M=d(o);$e(M,()=>v.clients.branding.descVariables),c(o);var O=a(o,2);he(O,{label:"--border-radius",placeholder:"--border-radius",get errMsg(){return v.validation.css},width:t,required:!0,pattern:It,get value(){return r(m).border_radius},set value(K){r(m).border_radius=K}});var S=a(O,4);jt(S,{inputWidth:t,get values(){return r(m).light},set values(K){r(m).light=K}});var f=a(S,6);jt(f,{inputWidth:t,get values(){return r(m).dark},set values(K){r(m).dark=K}}),c(A);var Z=a(A,2),j=d(Z);hr(j,()=>r(w),K=>{Gr(K,{get logoUrl(){return r(y)},get theme(){return r(m)}})});var ae=a(j,6),me=re(()=>`/auth/v1/clients/${e.client.id}/logo`);gr(ae,{method:"PUT",get url(){return r(me)},fileName:"logo",onSuccess:p});var ee=a(ae,2),P=d(ee);ce(P,{type:"submit",children:(K,ue)=>{W();var de=G();U(()=>R(de,l.common.save)),u(K,de)},$$slots:{default:!0}});var I=a(P,2);ce(I,{level:-2,onclick:_,children:(K,ue)=>{W();var de=G();U(()=>R(de,v.common.reset)),u(K,de)},$$slots:{default:!0}});var te=a(I,2);{var X=K=>{Tt(K,{})};Y(te,K=>{r(h)&&K(X)})}c(ee);var ie=a(ee,2);{var le=K=>{var ue=Jr(),de=d(ue,!0);c(ue),U(()=>R(de,r($))),u(K,ue)};Y(ie,K=>{r($)&&K(le)})}c(Z),u(J,L)};Y(N,J=>{r(m)&&J(Q)})}c(E),u(x,E)},$$slots:{default:!0}}),ne()}var Vr=D('<div class="flex"><!></div> <div class="details"><!></div>',1);function Yr(B,e){se(e,!0);let t=be(),l=pe();const v=[l.nav.config,"Secret","Branding",t.common.delete];let h=C(i(v[0])),$=C(void 0);ge(()=>{e.client.id&&requestAnimationFrame(()=>{var p;(p=r($))==null||p()})});var m=Vr(),w=oe(m),y=d(w);Rt(y,{tabs:v,get selected(){return r(h)},set selected(p){n(h,i(p))},get focusFirst(){return r($)},set focusFirst(p){n($,i(p))}}),c(w);var g=a(w,2),k=d(g);{var T=p=>{Tr(p,{get client(){return e.client},get clients(){return e.clients},get scopesAll(){return e.scopesAll},get onSave(){return e.onSave}})},_=p=>{var x=ye(),b=oe(x);{var E=Q=>{jr(Q,{get client(){return e.client}})},N=Q=>{var J=ye(),L=oe(J);{var A=M=>{Xr(M,{get client(){return e.client}})},o=M=>{var O=ye(),S=oe(O);{var f=Z=>{Er(Z,{get client(){return e.client},get onSave(){return e.onSave}})};Y(S,Z=>{r(h)===t.common.delete&&Z(f)},!0)}u(M,O)};Y(L,M=>{r(h)==="Branding"?M(A):M(o,!1)},!0)}u(Q,J)};Y(b,Q=>{r(h)==="Secret"?Q(E):Q(N,!1)},!0)}u(p,x)};Y(k,p=>{r(h)===l.nav.config?p(T):p(_,!1)})}c(g),u(B,m),ne()}var ea=D("<div></div> <!>",1),ta=D("<!> <!>",1),ra=D('<div class="err"> </div>'),aa=D('<!> <div id="groups"><!></div>',1),la=D("<!> <!>",1);function ia(B,e){se(e,!0);let t=C(void 0),l=C(""),v=C(i([])),h=C(i([])),$=C(void 0),m=nr("cid"),w=C(i([]));const y=["ID"];let g=C(i(y[0])),k=C("");const T=["ID"];Yt(()=>{_(),p()}),ge(()=>{n($,i(r(v).find(L=>L.id===m.get())))}),ge(()=>{let L=r(k).toLowerCase();L?r(g)===y[0]&&n(h,i(r(v).filter(A=>A.id.toLowerCase().includes(L)))):n(h,i(r(v)))});async function _(){var A;let L=await St("/auth/v1/clients");L.body?n(v,i(L.body)):n(l,i(((A=L.error)==null?void 0:A.message)||"Error"))}async function p(){var A;let L=await St("/auth/v1/scopes");L.body?n(w,i(L.body.map(o=>o.name))):n(l,i(((A=L.error)==null?void 0:A.message)||"Error"))}function x(L,A){let o=A==="up";L===T[0]&&r(v).sort((M,O)=>o?M.id.localeCompare(O.id):O.id.localeCompare(M.id))}function b(){_()}async function E(L){var A;(A=r(t))==null||A(),await _(),m.set(L)}var N=la(),Q=oe(N);ir(Q,{paddingTop:"2.1rem",buttonTilesAriaControls:"groups",width:"min(20rem, 100dvw)",thresholdNavSub:700,buttonTiles:L=>{var A=ea(),o=oe(A);z(o,"height",".5rem");var M=a(o,2);je(M,17,()=>r(h),O=>O.id,(O,S)=>{var f=re(()=>m.get()===r(S).id);lr(O,{onclick:()=>m.set(r(S).id),get selected(){return r(f)},children:(Z,j)=>{W();var ae=G();U(()=>R(ae,r(S).id)),u(Z,ae)},$$slots:{default:!0}})}),u(L,A)},children:(L,A)=>{var o=ta(),M=oe(o),O=re(()=>r(v).length===0?1:2);rr(M,{get level(){return r(O)},alignRight:!0,get closeModal(){return r(t)},set closeModal(f){n(t,i(f))},children:(f,Z)=>{Sr(f,{onSave:E,get clients(){return r(v)}})},$$slots:{default:!0}});var S=a(M,2);sr(S,{searchOptions:y,orderOptions:T,onChangeOrder:x,searchWidth:"min(19.5rem, 100dvw - .5rem)",get searchOption(){return r(g)},set searchOption(f){n(g,i(f))},get value(){return r(k)},set value(f){n(k,i(f))}}),u(L,o)},$$slots:{buttonTiles:!0,default:!0}});var J=a(Q,2);ar(J,{children:(L,A)=>{var o=aa(),M=oe(o);{var O=j=>{var ae=ra(),me=d(ae,!0);c(ae),U(()=>R(me,r(l))),u(j,ae)};Y(M,j=>{r(l)&&j(O)})}var S=a(M,2),f=d(S);{var Z=j=>{Yr(j,{get client(){return r($)},get clients(){return r(v)},get scopesAll(){return r(w)},onSave:b})};Y(f,j=>{r($)&&j(Z)})}c(S),u(L,o)},$$slots:{default:!0}}),u(B,N),ne()}function sa(B){ia(B,{})}export{sa as component};
