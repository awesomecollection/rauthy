import"../chunks/disclose-version.BDr9Qe-U.js";import{t as k,f as X,p as ze,F as Fe,c as r,s as n,r as t,a as Le,g as e,O as ye,ap as we,i as S,h as l,$ as et}from"../chunks/runtime.BsghBUX9.js";import{h as at}from"../chunks/svelte-head.cS_wx7Ri.js";import{a as v,n as xa,e as me,t as I,d as ke}from"../chunks/template.jENAUvUX.js";import{i as x}from"../chunks/if.6Ov_EDLa.js";import{p as q}from"../chunks/proxy.YH42NwLs.js";import{d as pa,e as oa,s as d,k as tt}from"../chunks/render.CTp9lacC.js";import{a as rt}from"../chunks/window.DDH7z8ZH.js";import{p as R}from"../chunks/props.CslUVmW_.js";import{o as na}from"../chunks/index-client.ClP8y9aT.js";import{j as Je,a9 as ma,_ as st,P as ot,G as nt,y as it,u as vt,aa as lt,B as ct,r as dt}from"../chunks/helpers.CBl6QeM5.js";import{e as fa,i as ut}from"../chunks/each.URXtkKAp.js";import{h as qa}from"../chunks/html.BSubRRdz.js";import{s as ne,g as Z,h as ee,b as Se,f as Ge,t as ga,a as Ye,d as pt,c as Ma}from"../chunks/index.G5lyZbma.js";import{I as Ca}from"../chunks/IconStop.OvZMk6DH.js";import{B as _e,d as mt,b as za,c as La,f as ea}from"../chunks/fetch.BvIeF4JA.js";import{s as Pa}from"../chunks/snippet.C6jUNrz1.js";import{b as Aa}from"../chunks/this.BynWoD8c.js";import{u as We}from"../chunks/i18n.svelte.D8rR00qK.js";import{B as ft}from"../chunks/ButtonAuthProvider.sE1ylnOp.js";import{I as Te}from"../chunks/Input.luLa8YQi.js";import{F as gt}from"../chunks/Form.ry95iany.js";import{a as ha,c as ht,d as Da,e as wt}from"../chunks/patterns.BdncpE46.js";import{I as bt}from"../chunks/InputDateTimeCombo.CadHmiR0.js";import{w as yt,j as kt,k as _t}from"../chunks/dataFetching.B7RPH17f.js";import{u as Wa}from"../chunks/session.svelte.DJ5oIUdF.js";import{w as $t}from"../chunks/registration.CcD5s1by.js";import{W as Ta}from"../chunks/WebauthnRequest.M9ddrbaa.js";import{T as It}from"../chunks/Tooltip.CkN4jj6Y.js";import{P as xt}from"../chunks/PasswordPolicy.B5Y9P_Yk.js";import{I as wa}from"../chunks/InputPassword.DfsGFINf.js";import{C as qt}from"../chunks/CheckIcon.CMbYrOAg.js";import{a as Mt,b as Ct}from"../chunks/input.D13BG9DA.js";import{A as zt}from"../chunks/A.BmPHpmKq.js";import"../chunks/legacy.Dn68_YLB.js";import{D as Na}from"../chunks/Devices.BNRk75kF.js";import{T as Lt}from"../chunks/Template.ZFmGCuZr.js";import{u as Pt}from"../chunks/param.svelte.BhHpzHur.js";import{M as At}from"../chunks/Main.DdVUe3_l.js";import{C as Dt}from"../chunks/ContentCenter.1a7TMW4_.js";import{T as Wt,L as Tt}from"../chunks/LangSelector.TD0HCe5U.js";var Nt=xa('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"></path></svg>');function ia(W,o){let a=R(o,"opacity",3,.9),s=R(o,"width",3,"1.5rem"),$=R(o,"color",3,"hsl(var(--action))");var i=Nt();ne(i,"stroke-width",2),k(()=>{ne(i,"width",s()),ne(i,"color",$()),ne(i,"opacity",a())}),v(W,i)}function ba(W,o){var a=me(),s=X(a);{var $=h=>{ia(h,{color:"hsl(var(--action))"})},i=h=>{Ca(h,{color:"hsl(var(--error))"})};x(s,h=>{o.checked?h($):h(i,!1)})}v(W,a)}function Et(W,o,a){o()||a()}function Bt(W){W.stopPropagation()}var St=I('<span class="closeIcon svelte-utq0b0"><!></span>'),Rt=I('<div class="relative"><div class="absolute close svelte-utq0b0"><!></div></div>'),Ft=I('<dialog aria-modal="true" class="svelte-utq0b0"><div role="none" class="svelte-utq0b0"><!> <!></div></dialog>');function Ut(W,o){ze(o,!0);let a=R(o,"showModal",15),s=R(o,"closeModal",15),$=R(o,"strict",3,!1),i=R(o,"prerender",3,!1),h=We(),f;Fe(()=>{s(c)}),Fe(()=>{a()&&(f==null||f.showModal())});function c(L){L==null||L.preventDefault(),f==null||f.close(),a(!1)}var g=Ft();g.__click=[Et,$,c];var u=r(g);u.__click=[Bt];var B=r(u);{var T=L=>{var Q=Rt(),M=r(Q),C=r(M);_e(C,{get ariaLabel(){return h.common.close},invisible:!0,onclick:c,children:(N,b)=>{var re=St(),Y=r(re);Ca(Y,{color:"currentColor",width:"1.2rem"}),t(re),v(N,re)},$$slots:{default:!0}}),t(M),t(Q),v(L,Q)};x(B,L=>{$()||L(T)})}var A=n(B,2);{var j=L=>{var Q=me(),M=X(Q);Pa(M,()=>o.children),v(L,Q)};x(A,L=>{(i()||a())&&L(j)})}t(u),t(g),Aa(g,L=>f=L,()=>f),k(()=>ne(g,"data-strict",$())),oa("close",g,()=>{var L;a(!1),(L=o.onClose)==null||L.call(o)}),v(W,g),Le()}pa(["click"]);var Vt=I('<div class="link-err value svelte-1tea8v4"> </div>'),jt=I('<div class="fed-btn svelte-1tea8v4"><!> <!></div>'),Kt=I('<h3> </h3> <p> </p> <div class="providers svelte-1tea8v4"></div>',1),Jt=I("<!> <!>",1),Gt=I('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),Yt=I('<div><div> </div> <span class="value svelte-1tea8v4"> </span></div>'),Ot=I('<div><div>WebID:</div> <span class="value svelte-1tea8v4"><a target="_blank"><!></a></span></div>'),Ht=I('<div><div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <div><div class="value svelte-1tea8v4"> </div> <!></div></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <div><div> </div> <!></div> <!> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <div><div> </div> <span class="value svelte-1tea8v4"> </span></div> <!> <!></div>');function Ea(W,o){ze(o,!0);let a=R(o,"user",15),s=We(),$=S(!1),i=S(!1),h=ye(()=>{var G;return(G=a().account_type)==null?void 0:G.startsWith("federated")}),f=ye(()=>{var G;return e(h)?`${a().account_type}: ${((G=o.authProvider)==null?void 0:G.name)||""}`:a().account_type}),c=ye(()=>o.viewModePhone?"rowPhone":"row"),g=ye(()=>o.viewModePhone?"labelPhone":"label");function u(G){st(64,(ve,{challenge:ue,verifier:be})=>{ve||(localStorage.setItem(ot,be),B(G,ue))})}async function B(G,ve){let ue={email:a().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:G,pkce_challenge:ve},be=await za(`/auth/v1/providers/${G}/link`,ue);if(be.text){nt(be.text);let he=be.headers.get("location");he&&(window.location.href=he)}else console.error(be.error)}async function T(){let G=await mt("/auth/v1/providers/link");G.body?a(G.body):(console.error(G.error),l($,!0))}var A=Ht(),j=r(A),L=r(j),Q=r(L,!0);t(L);var M=n(L,2),C=r(M,!0);t(M),t(j);var N=n(j,2),b=r(N),re=r(b,!0);t(b);var Y=n(b,2),ie=r(Y,!0);t(Y),t(N);var se=n(N,2),_=r(se),p=r(_,!0);t(_);var y=n(_,2),m=r(y,!0);t(y),t(se);var O=n(se,2),le=r(O),fe=r(le);t(le);var w=n(le,2),U=r(w,!0);t(w),t(O);var V=n(O,2),F=r(V),J=r(F,!0);t(F);var oe=n(F,2),H=r(oe),pe=r(H,!0);t(H);var ce=n(H,2);{var $e=G=>{var ve=jt(),ue=r(ve);_e(ue,{get ariaLabel(){return s.account.providerUnlink},level:3,onclick:T,children:(Me,Re)=>{we();var Ke=ke();k(()=>d(Ke,s.account.providerUnlink)),v(Me,Ke)},$$slots:{default:!0}});var be=n(ue,2);{var he=Me=>{var Re=Vt(),Ke=r(Re,!0);t(Re),k(()=>d(Ke,s.account.providerUnlinkDesc)),v(Me,Re)};x(be,Me=>{e($)&&Me(he)})}t(ve),v(G,ve)},K=G=>{var ve=me(),ue=X(ve);{var be=he=>{var Me=Jt(),Re=X(Me);_e(Re,{level:2,onclick:()=>l(i,!0),children:(Xe,Ha)=>{we();var Ze=ke();k(()=>d(Ze,s.account.providerLink)),v(Xe,Ze)},$$slots:{default:!0}});var Ke=n(Re,2);Ut(Ke,{get showModal(){return e(i)},set showModal(Xe){l(i,q(Xe))},children:(Xe,Ha)=>{var Ze=Kt(),ca=X(Ze),Qa=r(ca,!0);t(ca);var da=n(ca,2),Xa=r(da,!0);t(da);var $a=n(da,2);fa($a,21,()=>o.providers,ua=>ua.id,(ua,Ia)=>{var Za=ye(()=>`${s.account.providerLink}: ${e(Ia).name}`);ft(ua,{get ariaLabel(){return e(Za)},get provider(){return e(Ia)},onclick:u})}),t($a),k(()=>{d(Qa,s.account.providerLink),d(Xa,s.account.providerLinkDesc)}),v(Xe,Ze)},$$slots:{default:!0}}),v(he,Me)};x(ue,he=>{o.providers.length>0&&he(be)},!0)}v(G,ve)};x(ce,G=>{e(h)?G($e):G(K,!1)})}t(oe),t(V);var P=n(V,2),z=r(P),E=r(z,!0);t(z);var ae=n(z,2),ge=r(ae,!0);t(ae),t(P);var D=n(P,2),te=r(D),de=r(te,!0);t(te);var xe=n(te,2),qe=r(xe,!0);t(xe),t(D);var Ie=n(D,2),Ce=r(Ie),Oe=r(Ce,!0);t(Ce);var Ue=n(Ce,2),aa=ye(()=>!!a().webauthn_user_id);ba(Ue,{get checked(){return e(aa)}}),t(Ie);var Pe=n(Ie,2),Ne=r(Pe),va=r(Ne,!0);t(Ne);var ta=n(Ne,2);ba(ta,{get checked(){return a().enabled}}),t(Pe);var Ve=n(Pe,2),je=r(Ve),la=r(je,!0);t(je);var De=n(je,2);ba(De,{get checked(){return a().email_verified}}),t(Ve);var Ee=n(Ve,2);{var He=G=>{var ve=Gt(),ue=r(ve),be=r(ue,!0);t(ue);var he=n(ue,2),Me=r(he,!0);k(()=>d(Me,Je(a().last_login))),t(he),t(ve),k(()=>{Z(ve,ee(e(c)),"svelte-1tea8v4"),Z(ue,ee(e(g)),"svelte-1tea8v4"),d(be,s.account.lastLogin)}),v(G,ve)};x(Ee,G=>{a().last_login&&G(He)})}var Ae=n(Ee,2),Be=r(Ae),ya=r(Be,!0);t(Be);var Qe=n(Be,2),ja=r(Qe,!0);k(()=>d(ja,a().password_expires&&Je(a().password_expires)||s.common.never)),t(Qe),t(Ae);var ra=n(Ae,2),sa=r(ra),Ka=r(sa,!0);t(sa);var ka=n(sa,2),Ja=r(ka,!0);k(()=>d(Ja,Je(a().created_at))),t(ka),t(ra);var _a=n(ra,2);{var Ga=G=>{var ve=Yt(),ue=r(ve),be=r(ue,!0);t(ue);var he=n(ue,2),Me=r(he,!0);k(()=>d(Me,Je(a().user_expires))),t(he),t(ve),k(()=>{Z(ve,ee(e(c)),"svelte-1tea8v4"),Z(ue,ee(e(g)),"svelte-1tea8v4"),d(be,s.account.userExpiry)}),v(G,ve)};x(_a,G=>{a().user_expires&&G(Ga)})}var Ya=n(_a,2);{var Oa=G=>{var ve=Ot(),ue=r(ve),be=n(ue,2),he=r(be);k(()=>ne(he,"href",ma(a().id)));var Me=r(he);qa(Me,()=>ma(a().id).replace("/auth/","/auth/<wbr/>")),t(he),t(be),t(ve),k(()=>{Z(ve,ee(e(c)),"svelte-1tea8v4"),Z(ue,ee(e(g)),"svelte-1tea8v4")}),v(G,ve)};x(Ya,G=>{o.webIdData&&G(Oa)})}t(A),k(()=>{Z(j,ee(e(c)),"svelte-1tea8v4"),Z(L,ee(e(g)),"svelte-1tea8v4"),d(Q,s.common.email),d(C,a().email),Z(N,ee(e(c)),"svelte-1tea8v4"),Z(b,ee(e(g)),"svelte-1tea8v4"),d(re,s.account.givenName),d(ie,a().given_name),Z(se,ee(e(c)),"svelte-1tea8v4"),Z(_,ee(e(g)),"svelte-1tea8v4"),d(p,s.account.familyName),d(m,a().family_name),Z(O,ee(e(c)),"svelte-1tea8v4"),Z(le,ee(e(g)),"svelte-1tea8v4"),d(fe,`${s.account.user??""} ID`),d(U,a().id),Z(V,ee(e(c)),"svelte-1tea8v4"),Z(F,ee(e(g)),"svelte-1tea8v4"),d(J,s.account.accType),d(pe,e(f)||""),Z(P,ee(e(c)),"svelte-1tea8v4"),Z(z,ee(e(g)),"svelte-1tea8v4"),d(E,s.account.roles),d(ge,a().roles||"None"),Z(D,ee(e(c)),"svelte-1tea8v4"),Z(te,ee(e(g)),"svelte-1tea8v4"),d(de,s.account.groups),d(qe,a().groups||"None"),Z(Ie,ee(e(c)),"svelte-1tea8v4"),Z(Ce,ee(e(g)),"svelte-1tea8v4"),d(Oe,s.account.mfaActivated),Z(Pe,ee(e(c)),"svelte-1tea8v4"),Z(Ne,ee(e(g)),"svelte-1tea8v4"),d(va,s.account.userEnabled),Z(Ve,ee(e(c)),"svelte-1tea8v4"),Z(je,ee(e(g)),"svelte-1tea8v4"),d(la,s.account.emailVerified),Z(Ae,ee(e(c)),"svelte-1tea8v4"),Z(Be,ee(e(g)),"svelte-1tea8v4"),d(ya,s.account.passwordExpiry),Z(ra,ee(e(c)),"svelte-1tea8v4"),Z(sa,ee(e(g)),"svelte-1tea8v4"),d(Ka,s.account.userCreated)}),v(W,A),Le()}var Qt=I('<div class="success svelte-4ogr3z"><!></div>'),Xt=I("<p> </p>"),Zt=I('<div class="err svelte-4ogr3z"> </div>'),er=I('<div class="formInner svelte-4ogr3z"><div><!> <!> <!> <!></div> <div><!> <!> <!> <!> <!></div></div> <div class="bottom svelte-4ogr3z"><div><!></div> <!></div> <!>',1),ar=I('<div class="container svelte-4ogr3z"><!></div>');function Ba(W,o){var B;ze(o,!0);let a=R(o,"user",15);(B=a().user_values)!=null&&B.birthdate||a(a().user_values.birthdate="",!0);let s=We(),$=S(""),i=S(!1),h=S(!1);async function f(T,A){var p;const j=A.get("email"),L=A.get("family_name")||void 0,Q=A.get("given_name")||void 0,M=A.get("birthdate")||void 0,C=((p=A.get("phone"))==null?void 0:p.replaceAll(" ",""))||void 0,N=A.get("street")||void 0,b=A.get("zip")||void 0,re=b?Number.parseInt(b):void 0,Y=A.get("city")||void 0,ie=A.get("country")||void 0;let se={email:j,family_name:L,given_name:Q,user_values:{birthdate:M,phone:C,street:N,zip:re,city:Y,country:ie}},_=await La(`/auth/v1/users/${a().id}/self`,se);if(_.body){l(i,!0),a(_.body);let y=3e3;_.status===202&&(l(h,!0),y=3e4),setTimeout(()=>{l(i,!1)},y)}else _.error&&(console.error(_.error),l($,q(_.error.message)))}var c=ar(),g=r(c),u=ye(()=>`/auth/v1/users/${a().id}/self`);gt(g,{get action(){return e(u)},onSubmit:f,children:(T,A)=>{var j=er(),L=X(j),Q=r(L),M=r(Q);Te(M,{typ:"email",name:"email",get label(){return s.common.email},get placeholder(){return s.common.email},get value(){return a().email},required:!0});var C=n(M,2);Te(C,{name:"given_name",autocomplete:"given-name",get label(){return s.account.givenName},get placeholder(){return s.account.givenName},get value(){return a().given_name},required:!0,maxLength:32,pattern:ha});var N=n(C,2);Te(N,{name:"family_name",autocomplete:"family-name",get label(){return s.account.familyName},get placeholder(){return s.account.familyName},get value(){return a().family_name},maxLength:32,pattern:ha});var b=n(N,2);bt(b,{name:"birthdate",get label(){return s.account.birthdate},withDelete:!0,get value(){return a().user_values.birthdate},set value(F){a(a().user_values.birthdate=F,!0)}}),t(Q);var re=n(Q,2),Y=r(re);Te(Y,{name:"street",autocomplete:"street-address",get label(){return s.account.street},get placeholder(){return s.account.street},get value(){return a().user_values.street},maxLength:48,pattern:ht});var ie=n(Y,2);Te(ie,{typ:"number",name:"zip",autocomplete:"postal-code",get label(){return s.account.zip},get placeholder(){return s.account.zip},get value(){return a().user_values.zip},min:"1000",max:"9999999"});var se=n(ie,2);Te(se,{name:"city",autocomplete:"address-level2",get label(){return s.account.city},get placeholder(){return s.account.city},get value(){return a().user_values.city},maxLength:48,pattern:Da});var _=n(se,2);Te(_,{name:"country",autocomplete:"country",get label(){return s.account.country},get placeholder(){return s.account.country},get value(){return a().user_values.country},maxLength:48,pattern:Da});var p=n(_,2);Te(p,{name:"phone",autocomplete:"tel",get label(){return s.account.phone},get placeholder(){return s.account.phone},get value(){return a().user_values.phone},maxLength:32,pattern:wt}),t(re),t(L);var y=n(L,2),m=r(y),O=r(m);_e(O,{type:"submit",children:(F,J)=>{we();var oe=ke();k(()=>d(oe,s.common.save)),v(F,oe)},$$slots:{default:!0}}),t(m);var le=n(m,2);{var fe=F=>{var J=Qt(),oe=r(J);ia(oe,{}),t(J),Se(3,J,()=>Ge),v(F,J)};x(le,F=>{e(i)&&F(fe)})}t(y);var w=n(y,2);{var U=F=>{var J=Xt(),oe=r(J,!0);t(J),k(()=>d(oe,s.account.emailUpdateConfirm)),v(F,J)},V=F=>{var J=me(),oe=X(J);{var H=pe=>{var ce=Zt(),$e=r(ce,!0);t(ce),k(()=>d($e,e($))),Se(3,ce,()=>Ge),v(pe,ce)};x(oe,pe=>{e($)&&pe(H)},!0)}v(F,J)};x(w,F=>{e(h)?F(U):F(V,!1)})}v(T,j)},$$slots:{default:!0}}),t(c),v(W,c),Le()}var tr=xa('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function rr(W,o){let a=R(o,"opacity",3,.9),s=R(o,"width",3,24),$=R(o,"color",3,"currentColor");var i=tr();ne(i,"stroke-width",2),k(()=>{ne(i,"stroke",$()),ne(i,"width",s()),ne(i,"opacity",a())}),v(W,i)}var sr=I('<div class="err svelte-qkgdvy"><b>Your browser does not support Webauthn credentials and must be updated.</b></div>'),or=I('<!> <div class="regBtns svelte-qkgdvy"><!> <!></div>',1),nr=I('<div class="regNewBtn svelte-qkgdvy"><!></div>'),ir=I('<div class="keysHeader svelte-qkgdvy"> </div>'),vr=I("<div><!></div>"),lr=I('<div class="row svelte-qkgdvy"><div></div> <div class="deleteBtn svelte-qkgdvy"><!></div></div>'),cr=I('<div class="keyContainer svelte-qkgdvy"><div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <div class="nameUv svelte-qkgdvy"><b> </b> <!></div></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <div class="row svelte-qkgdvy"><span class="label svelte-qkgdvy"> </span> <span class="font-mono"> </span></div> <!></div>'),dr=I('<div class="button svelte-qkgdvy"><!></div>'),ur=I('<!> <p class="svelte-qkgdvy"> <br><br> </p> <!> <!> <div class="keysContainer svelte-qkgdvy"></div> <!> <div class="svelte-qkgdvy"> </div>',1),pr=I('<div class="container svelte-qkgdvy"><!></div>');function Sa(W,o){ze(o,!0);const a="credentials"in navigator;let s=We(),$=Wa("account"),i=ye(()=>{var _;return(_=$.get())==null?void 0:_.user_id}),h=S(void 0),f=S(!1),c=S(""),g=S(!1),u=S(o.user.account_type==="password"),B=S(void 0),T=S(""),A=S(!1),j=S(q([]));na(()=>{Q()}),Fe(()=>{e(j).length>0&&o.user.account_type==="passkey"&&l(u,e(j).length>1)}),Fe(()=>{var _;(_=e(h))==null||_.focus()});function L(){l(f,!1),l(c,"")}async function Q(){var p;let _=await ea(`/auth/v1/users/${(p=$.get())==null?void 0:p.user_id}/webauthn`);_.body?l(j,q(_.body)):console.error(_.error)}async function M(){if(L(),e(A)||!e(i))return;if(e(T).length<1){l(f,!0),l(c,q(s.mfa.passkeyNameErr));return}let _=await $t(e(i),e(T),s.authorize.invalidKeyUsed,s.authorize.requestExpired);_.error?(l(f,!0),l(c,`${s.mfa.errorReg} - ${_.error}`)):(l(g,!1),l(T,""),await Q())}async function C(_){let p=await yt(o.user.id,_);if(p.status===200)await Q();else{let y=await p.json();l(f,!0),l(c,q(y.message))}}function N(_){l(B,void 0),l(f,!0),l(c,q(_)),setTimeout(()=>{l(f,!1),l(c,"")},5e3)}function b(_){l(B,void 0),l(c,q(s.mfa.testSuccess)),setTimeout(()=>{l(c,"")},3e3)}var re=pr(),Y=r(re);{var ie=_=>{var p=sr();v(_,p)},se=_=>{var p=ur(),y=X(p);{var m=K=>{Ta(K,{get userId(){return o.user.id},get purpose(){return e(B)},onSuccess:b,onError:N})};x(y,K=>{e(B)&&K(m)})}var O=n(y,2),le=r(O),fe=n(le,3);t(O);var w=n(O,2);{var U=K=>{var P=or(),z=X(P);Te(z,{autocomplete:"off",get label(){return s.mfa.passkeyName},get placeholder(){return s.mfa.passkeyName},maxLength:32,pattern:ha,onEnter:M,get ref(){return e(h)},set ref(D){l(h,q(D))},get value(){return e(T)},set value(D){l(T,q(D))},get isError(){return e(A)},set isError(D){l(A,q(D))}});var E=n(z,2),ae=r(E);_e(ae,{onclick:M,children:(D,te)=>{we();var de=ke();k(()=>d(de,s.mfa.register)),v(D,de)},$$slots:{default:!0}});var ge=n(ae,2);_e(ge,{level:3,onclick:()=>l(g,!1),children:(D,te)=>{we();var de=ke();k(()=>d(de,s.common.cancel)),v(D,de)},$$slots:{default:!0}}),t(E),v(K,P)},V=K=>{var P=nr(),z=r(P),E=ye(()=>e(j).length===0?1:2);_e(z,{get level(){return e(E)},onclick:()=>l(g,!0),children:(ae,ge)=>{we();var D=ke();k(()=>d(D,s.mfa.registerNew)),v(ae,D)},$$slots:{default:!0}}),t(P),v(K,P)};x(w,K=>{e(g)?K(U):K(V,!1)})}var F=n(w,2);{var J=K=>{var P=ir(),z=r(P,!0);t(P),k(()=>d(z,s.mfa.registerdKeys)),v(K,P)};x(F,K=>{e(j).length>0&&K(J)})}var oe=n(F,2);fa(oe,21,()=>e(j),K=>K.name,(K,P)=>{var z=cr(),E=r(z),ae=r(E),ge=r(ae,!0);t(ae);var D=n(ae,2),te=r(D),de=r(te,!0);t(te);var xe=n(te,2);{var qe=De=>{It(De,{get text(){return s.account.userVerifiedTooltip},children:(Ee,He)=>{var Ae=vr();Ye(Ae,"margin-bottom","-.25rem");var Be=r(Ae);rr(Be,{width:18,color:"var(--col-acnt)"}),t(Ae),v(Ee,Ae)},$$slots:{default:!0}})};x(xe,De=>{e(P).user_verified&&De(qe)})}t(D),t(E);var Ie=n(E,2),Ce=r(Ie),Oe=r(Ce,!0);t(Ce);var Ue=n(Ce,2),aa=r(Ue,!0);k(()=>d(aa,Je(e(P).registered))),t(Ue),t(Ie);var Pe=n(Ie,2),Ne=r(Pe),va=r(Ne,!0);t(Ne);var ta=n(Ne,2),Ve=r(ta,!0);k(()=>d(Ve,Je(e(P).last_used))),t(ta),t(Pe);var je=n(Pe,2);{var la=De=>{var Ee=lr(),He=n(r(Ee),2),Ae=r(He);_e(Ae,{level:-3,onclick:()=>C(e(P).name),children:(Be,ya)=>{we();var Qe=ke();k(()=>d(Qe,s.common.delete)),v(Be,Qe)},$$slots:{default:!0}}),t(He),t(Ee),v(De,Ee)};x(je,De=>{e(u)&&De(la)})}t(z),k(()=>{d(ge,s.mfa.passkeyName),d(de,e(P).name),d(Oe,s.mfa.registerd),d(va,s.mfa.lastUsed)}),v(K,z)}),t(oe);var H=n(oe,2);{var pe=K=>{var P=dr(),z=r(P);_e(z,{onclick:()=>l(B,"Test"),children:(E,ae)=>{we();var ge=ke();k(()=>d(ge,s.mfa.test)),v(E,ge)},$$slots:{default:!0}}),t(P),v(K,P)};x(H,K=>{e(j).length>0&&K(pe)})}var ce=n(H,2),$e=r(ce,!0);t(ce),k(()=>{d(le,`${s.mfa.p1??""} `),d(fe,` ${s.mfa.p2??""}`),ga(ce,"success",!e(f)),ga(ce,"err",e(f)),d($e,e(c))}),v(_,p)};x(Y,_=>{a?_(se,!1):_(ie)})}t(re),v(W,re),Le()}var mr=I('<div class="container svelte-ue7bk2"><!> <!> <!> <!> <div class="btn svelte-ue7bk2"><!></div> <div class="err svelte-ue7bk2"> </div></div>');function fr(W,o){ze(o,!0);let a=R(o,"passwords",15),s=R(o,"hideCurrentPassword",3,!1),$=R(o,"isValid",15),i=We();$(T);let h=S(!1),f=S(""),c=S(void 0),g=ye(()=>{var M;return((M=a().new)==null?void 0:M.length)>6&&a().new===a().newConfirm}),u=S(void 0),B=S(void 0);na(async()=>{let M=await ea("/auth/v1/password_policy");M.body?l(c,q(M.body)):console.error(M.error)});function T(){return l(f,""),!s()&&!a().current?(l(f,q(i.account.passwordCurrReq)),!1):a().new?a().newConfirm?e(h)?a().new.length>256?(l(f,"max 256"),!1):a().new!==a().newConfirm?(l(f,q(i.account.passwordNoMatch)),!1):!0:(l(f,q(i.account.passwordPolicyFollow)),!1):(l(f,q(i.account.passwordNewReq)),!1):(l(f,q(i.account.passwordNewReq)),!1)}function A(){if(l(f,""),e(c)){let M=it(e(c));a(a().new=M,!0),a(a().newConfirm=M,!0)}requestAnimationFrame(()=>{var M,C;(M=e(u))==null||M(),(C=e(B))==null||C()})}var j=me(),L=X(j);{var Q=M=>{var C=mr(),N=r(C);xt(N,{get policy(){return e(c)},get password(){return a().new},get accepted(){return e(h)},set accepted(m){l(h,q(m))}});var b=n(N,2);{var re=m=>{wa(m,{autocomplete:"current-password",get label(){return i.account.passwordCurr},get placeholder(){return i.account.passwordCurr},onInput:T,get width(){return o.inputWidth},get value(){return a().current},set value(O){a(a().current=O,!0)}})};x(b,m=>{s()||m(re)})}var Y=n(b,2);wa(Y,{autocomplete:"new-password",get label(){return i.account.passwordNew},get placeholder(){return i.account.passwordNew},onInput:T,get showCopy(){return e(g)},get width(){return o.inputWidth},get value(){return a().new},set value(m){a(a().new=m,!0)},get reportValidity(){return e(u)},set reportValidity(m){l(u,q(m))}});var ie=n(Y,2);wa(ie,{autocomplete:"new-password",get label(){return i.account.passwordConfirm},get placeholder(){return i.account.passwordConfirm},onInput:T,get showCopy(){return e(g)},get width(){return o.inputWidth},get value(){return a().newConfirm},set value(m){a(a().newConfirm=m,!0)},get reportValidity(){return e(B)},set reportValidity(m){l(B,q(m))}});var se=n(ie,2),_=r(se);_e(_,{onclick:A,level:2,children:(m,O)=>{we();var le=ke();k(()=>d(le,i.account.generateRandom)),v(m,le)},$$slots:{default:!0}}),t(se);var p=n(se,2),y=r(p,!0);t(p),t(C),k(()=>d(y,e(f))),v(M,C)};x(L,M=>{e(c)&&M(Q)})}return v(W,j),Le({isPwdValid:T})}var gr=I('<div class="m-05 svelte-1h4zvzu"><p> </p> <p><b> </b></p> <div></div> <p> </p> <!></div>'),hr=I("<p> </p> <p> </p> <p> </p> <div><!></div>",1),wr=I('<div class="success svelte-1h4zvzu"><!></div>'),br=I('<div class="err"> </div>'),yr=I('<div class="cancel"><!></div>'),kr=I('<div class="convertPasskey svelte-1h4zvzu"><h3> </h3> <p> </p> <!></div>'),_r=I('<div><!> <div class="save svelte-1h4zvzu"><!> <!></div></div> <!>',1),$r=I('<div class="container svelte-1h4zvzu"><!> <!> <!> <!></div>');function Ra(W,o){ze(o,!0);let a=R(o,"user",15),s=We(),$=ye(()=>o.viewModePhone?"calc(100vw - 1.5rem)":"300px"),i=S(q(a().account_type)),h=S(q([])),f=S(void 0),c=S(!1),g=S(!1),u=S(""),B=S(!1),T=S(void 0),A=S(q({current:"",new:"",newConfirm:""})),j=ye(()=>e(h).filter(w=>w.user_verified).length>0);na(()=>{L()});async function L(){let w=await ea(`/auth/v1/users/${a().id}/webauthn`);w.body?l(h,q(w.body)):console.error("error fetching passkeys: "+w.error)}async function Q(){let w=await za(`/auth/v1/users/${a().id}/self/convert_passkey`);w.error?console.error("error fetching passkeys: "+w.error):window.location.reload()}async function M(){l(u,""),e(h).length>0?await C():await N()}async function C(){var w;if(!((w=e(f))!=null&&w())){l(u,q(s.common.invalidInput));return}l(T,"PasswordNew")}async function N(w){var F,J;if(!((F=e(f))!=null&&F())){l(u,q(s.common.invalidInput));return}l(g,!0);let U={password_new:e(A).new};w?U.mfa_code=w:U.password_current=e(A).current;let V=await La(`/auth/v1/users/${a().id}/self`,U);V.body?(l(B,!0),l(A,q({current:"",new:"",newConfirm:""})),a(V.body),l(i,q(V.body.account_type)),setTimeout(()=>{l(B,!1),l(c,!1)},3e3)):l(u,q(((J=V.error)==null?void 0:J.message)||"Error")),l(g,!1)}function b(w){l(T,void 0),l(u,q(w)),setTimeout(()=>{l(u,"")},5e3)}function re(w){l(T,void 0),w&&"code"in w&&N(w.code)}async function Y(){let w=await kt({email:a().email});if(w.ok)l(B,!0);else{let U=await w.json();l(u,q(U.message))}}var ie=$r(),se=r(ie);{var _=w=>{Ta(w,{get userId(){return a().id},get purpose(){return e(T)},onSuccess:re,onError:b})};x(se,w=>{e(T)&&w(_)})}var p=n(se,2);{var y=w=>{var U=gr(),V=r(U),F=r(V,!0);t(V);var J=n(V,2),oe=r(J),H=r(oe,!0);t(oe),t(J);var pe=n(J,2);Ye(pe,"height",".3rem");var ce=n(pe,2),$e=r(ce,!0);t(ce);var K=n(ce,2);{var P=E=>{qt(E,{check:!0})},z=E=>{_e(E,{level:2,onclick:Y,children:(ae,ge)=>{we();var D=ke();k(()=>d(D,s.account.passwordReset)),v(ae,D)},$$slots:{default:!0}})};x(K,E=>{e(B)?E(P):E(z,!1)})}t(U),k(()=>{var E;d(F,s.account.federatedConvertPassword1),d(H,((E=o.authProvider)==null?void 0:E.name)||"UNKNOWN"),d($e,s.account.federatedConvertPassword2)}),v(w,U)};x(p,w=>{e(i)==="federated"&&w(y)})}var m=n(p,2);{var O=w=>{var U=hr(),V=X(U),F=r(V,!0);t(V);var J=n(V,2),oe=r(J,!0);t(J);var H=n(J,2),pe=r(H,!0);t(H);var ce=n(H,2),$e=r(ce);_e($e,{level:2,onclick:()=>l(c,!0),children:(K,P)=>{we();var z=ke();k(()=>d(z,s.account.convertAccount)),v(K,z)},$$slots:{default:!0}}),t(ce),k(()=>{d(F,s.account.accTypePasskeyText1),d(oe,s.account.accTypePasskeyText2),d(pe,s.account.accTypePasskeyText3)}),v(w,U)};x(m,w=>{(e(i)==="passkey"||e(i)==="federated_passkey")&&!e(c)&&w(O)})}var le=n(m,2);{var fe=w=>{var U=_r(),V=X(U),F=r(V),J=ye(()=>!(e(i)==="password"&&e(h).length<1));fr(F,{get inputWidth(){return e($)},get hideCurrentPassword(){return e(J)},get passwords(){return e(A)},set passwords(z){l(A,q(z))},get isValid(){return e(f)},set isValid(z){l(f,q(z))}});var oe=n(F,2),H=r(oe);_e(H,{onclick:M,level:1,get isLoading(){return e(g)},children:(z,E)=>{we();var ae=ke();k(()=>d(ae,s.common.save)),v(z,ae)},$$slots:{default:!0}});var pe=n(H,2);{var ce=z=>{var E=wr(),ae=r(E);ia(ae,{}),t(E),Se(3,E,()=>Ge),v(z,E)},$e=z=>{var E=me(),ae=X(E);{var ge=te=>{var de=br(),xe=r(de,!0);t(de),k(()=>d(xe,e(u))),Se(3,de,()=>Ge),v(te,de)},D=te=>{var de=me(),xe=X(de);{var qe=Ie=>{var Ce=yr(),Oe=r(Ce);_e(Oe,{level:3,onclick:()=>l(c,!1),children:(Ue,aa)=>{we();var Pe=ke();k(()=>d(Pe,s.common.cancel)),v(Ue,Pe)},$$slots:{default:!0}}),t(Ce),v(Ie,Ce)};x(xe,Ie=>{e(c)&&!e(g)&&Ie(qe)},!0)}v(te,de)};x(ae,te=>{e(u)?te(ge):te(D,!1)},!0)}v(z,E)};x(pe,z=>{e(B)?z(ce):z($e,!1)})}t(oe),t(V);var K=n(V,2);{var P=z=>{var E=kr(),ae=r(E),ge=r(ae,!0);t(ae);var D=n(ae,2),te=r(D,!0);t(D);var de=n(D,2);_e(de,{level:2,onclick:Q,children:(xe,qe)=>{we();var Ie=ke();k(()=>d(Ie,s.account.convertAccount)),v(xe,Ie)},$$slots:{default:!0}}),t(E),k(()=>{d(ge,s.account.convertAccount),d(te,s.account.convertAccountP1)}),v(z,E)};x(K,z=>{!e(c)&&e(j)&&z(P)})}v(w,U)};x(le,w=>{(e(i)==="password"||e(i)==="federated_password"||e(c))&&w(fe)})}t(ie),v(W,ie),Le()}function Ir(W,o){W.code==="Enter"&&o()}var xr=I('<div class="flex"><div class="label font-label noselect svelte-1xf5lr3"><!></div> <label class="switch svelte-1xf5lr3"><input type="checkbox" class="svelte-1xf5lr3"> <span class="slider slider-round svelte-1xf5lr3"></span></label></div>');function Fa(W,o){ze(o,!0);let a=R(o,"checked",15,!1),s=R(o,"ariaLabel",3,""),$=R(o,"name",3,"");function i(){a(!a())}var h=xr(),f=r(h),c=r(f);Pa(c,()=>o.children),t(f);var g=n(f,2),u=r(g);pt(u),u.__click=i,u.__keydown=[Ir,i],we(2),t(g),t(h),k(()=>{Ye(f,"width",o.labelWidth),ne(u,"name",$()),u.disabled=o.disabled,ne(u,"aria-checked",a()),ne(u,"aria-label",s())}),Mt(u,a),v(W,h),Le()}pa(["click","keydown"]);function qr(W,o){o()}function Mr(W,o,a){var s,$,i,h;switch(o(),W.code){case"ArrowUp":(s=a.onUp)==null||s.call(a);break;case"ArrowDown":($=a.onDown)==null||$.call(a);break;case"ArrowLeft":(i=a.onLeft)==null||i.call(a);break;case"ArrowRight":(h=a.onRight)==null||h.call(a);break}}var Cr=I('<div class="error svelte-y71ny6"> </div>'),zr=I(`<div class="container svelte-y71ny6"><textarea autocomplete="off" class="svelte-y71ny6">
    </textarea> <div class="label svelte-y71ny6"><label class="font-label noselect svelte-y71ny6"> </label> <!></div></div>`);function Lr(W,o){ze(o,!0);let a=R(o,"ref",15),s=R(o,"id",19,vt),$=R(o,"value",15,""),i=R(o,"label",3,""),h=R(o,"rows",3,3),f=R(o,"placeholder",3,""),c=R(o,"errMsg",3,""),g=R(o,"disabled",3,!1),u=R(o,"required",3,!1),B=R(o,"isError",15,!1),T=R(o,"width",3,"inherit");const A=o.pattern?new RegExp(o.pattern,"gm"):void 0;let j=ye(()=>i()||f());function L(p){var y;C(),(y=o.onBlur)==null||y.call(o)}function Q(p){p.preventDefault(),B(!0)}function M(p){C()}function C(){var p,y;return A&&($().match(A).length>2?((p=a())==null||p.setCustomValidity(c()),B(!0)):((y=a())==null||y.setCustomValidity(""),B(!1))),!0}var N=zr(),b=r(N);tt(b),b.__input=[qr,C],b.__keydown=[Mr,C,o],Aa(b,p=>a(p),()=>a());var re=n(b,2),Y=r(re),ie=r(Y,!0);t(Y);var se=n(Y,2);{var _=p=>{var y=Cr(),m=r(y,!0);t(y),k(()=>d(m,c())),Se(3,y,()=>Ma),v(p,y)};x(se,p=>{B()&&p(_)})}t(re),t(N),k(()=>{Ye(N,"width",T()),ne(b,"id",s()),ne(b,"name",o.name),ne(b,"title",e(j)),ne(b,"aria-label",e(j)),ne(b,"rows",h()),ne(b,"placeholder",f()),ne(b,"aria-placeholder",f()),b.disabled=g(),ne(b,"aria-disabled",g()),ne(b,"maxlength",o.maxLength||void 0),b.required=u()||void 0,ne(b,"aria-required",u()||!1),ne(b,"aria-invalid",B()),ne(Y,"for",s()),ne(Y,"data-required",u()),d(ie,i())}),oa("submit",b,M),oa("invalid",b,Q),oa("blur",b,L),Ct(b,$),v(W,N),Le()}pa(["input","keydown"]);var Pr=I("<div><p> </p> <!></div>"),Ar=I('<div class="success svelte-5kivuv"><!></div>'),Dr=I('<div class="err svelte-5kivuv"> </div>'),Wr=I('<div class="container svelte-5kivuv"><p> </p> <p><!></p> <div class="switch svelte-5kivuv"><!></div> <div class="switch svelte-5kivuv"><!></div> <!> <div class="bottom svelte-5kivuv"><!> <!></div></div>');function Ua(W,o){ze(o,!0);let a=R(o,"webIdData",15),s=We();const $="14rem";let i=S(""),h=S(!1),f=S(!!a().custom_triples),c=ma(a().user_id);Fe(()=>{e(h)&&setTimeout(()=>{l(h,!1)},3e3)});async function g(){l(i,"");let p=await _t(a().user_id,a());if(p.ok)l(h,!0);else{let y=await p.json();l(i,q(y.message))}}var u=Wr(),B=r(u),T=r(B,!0);t(B);var A=n(B,2),j=r(A);zt(j,{href:c,target:"_blank",children:(p,y)=>{var m=me(),O=X(m);qa(O,()=>c.replace("/auth/","/auth/<wbr/>")),v(p,m)},$$slots:{default:!0}}),t(A);var L=n(A,2),Q=r(L);Fa(Q,{ariaLabel:"E-Mail",labelWidth:$,get checked(){return a().expose_email},set checked(p){a(a().expose_email=p,!0)},children:(p,y)=>{we();var m=ke("E-Mail");v(p,m)},$$slots:{default:!0}}),t(L);var M=n(L,2),C=r(M);Fa(C,{get ariaLabel(){return s.account.webIdExpertMode},labelWidth:$,get checked(){return e(f)},set checked(p){l(f,q(p))},children:(p,y)=>{we();var m=ke();k(()=>d(m,s.account.webIdExpertMode)),v(p,m)},$$slots:{default:!0}}),t(M);var N=n(M,2);{var b=p=>{var y=Pr(),m=r(y),O=r(m,!0);t(m);var le=n(m,2);Lr(le,{placeholder:"FOAF",rows:15,get value(){return a().custom_triples},set value(fe){a(a().custom_triples=fe,!0)}}),t(y),k(()=>d(O,s.account.webIdDescData)),Se(3,y,()=>Ma),v(p,y)};x(N,p=>{e(f)&&p(b)})}var re=n(N,2),Y=r(re);_e(Y,{onclick:g,children:(p,y)=>{we();var m=ke();k(()=>d(m,s.common.save)),v(p,m)},$$slots:{default:!0}});var ie=n(Y,2);{var se=p=>{var y=Ar(),m=r(y);ia(m,{}),t(y),Se(3,y,()=>Ge),v(p,y)},_=p=>{var y=me(),m=X(y);{var O=le=>{var fe=Dr(),w=r(fe,!0);t(fe),k(()=>d(w,e(i))),Se(3,fe,()=>Ge),v(le,fe)};x(m,le=>{e(i)&&le(O)},!0)}v(p,y)};x(ie,p=>{e(h)?p(se):p(_,!1)})}t(re),t(u),k(()=>d(T,s.account.webIdDesc)),v(W,u),Le()}function Tr(W){Na(W,{viewMode:"account"})}var Nr=I('<span class="font-label tab svelte-mkcuiv"> </span>'),Er=I('<div class="tabs svelte-mkcuiv"></div>');function Va(W,o){ze(o,!0);let a=R(o,"selected",15,""),s=R(o,"borderRadius",3,"5px"),$=R(o,"center",3,!1),i=R(o,"width",3,"inherit");o.tabs.length>0&&a()===""&&a(o.tabs[0]);var h=Er();fa(h,21,()=>o.tabs,ut,(f,c)=>{var g=ye(()=>e(c)===a()?"step":void 0);_e(f,{get ariaCurrent(){return e(g)},invisible:!0,onclick:()=>a(e(c)),children:(u,B)=>{var T=Nr(),A=r(T,!0);t(T),k(()=>{ne(T,"data-selected",e(c)===a()),d(A,e(c))}),v(u,T)},$$slots:{default:!0}})}),t(h),k(()=>{ga(h,"center",$()),Ye(h,"border-radius",s()),Ye(h,"width",i())}),v(W,h),Le()}var Br=I("<h3> </h3>"),Sr=I('<div class="headerPhone svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="innerPhone svelte-k6hxbm"><!></div></div>',1),Rr=I('<div class="header svelte-k6hxbm"><!></div> <div class="container svelte-k6hxbm"><!> <div class="inner svelte-k6hxbm"><!></div></div>',1),Fr=I('<!> <div class="wrapper svelte-k6hxbm"><!></div>',1);function Ur(W,o){ze(o,!0);const a=C=>{var N=Br(),b=r(N,!0);t(N),k(()=>d(b,`${s().given_name} ${s().family_name||""}`)),v(C,N)};let s=R(o,"user",15),$=R(o,"webIdData",15),i=We(),h=S(void 0),f=S(q([])),c=ye(()=>{var C;if((C=s().account_type)!=null&&C.startsWith("federated"))return e(f).filter(N=>N.id===s().auth_provider_id)[0]}),g=ye(()=>e(h)&&e(h)<500),u=S(q(i.account.navInfo)),B=q($()?[i.account.navInfo,i.account.navEdit,i.common.password,i.account.navMfa,"WebID",i.account.devices,i.account.navLogout]:[i.account.navInfo,i.account.navEdit,i.common.password,i.account.navMfa,i.account.devices,i.account.navLogout]);na(()=>{Pt("v").get()==="devices"&&l(u,q(i.account.devices))}),Fe(()=>{e(u)===i.account.navLogout&&lt()});var T=Fr(),A=X(T);Lt(A,{id:ct,get value(){return e(f)},set value(C){l(f,q(C))}});var j=n(A,2),L=r(j);{var Q=C=>{var N=Sr(),b=X(N),re=r(b);a(re),t(b);var Y=n(b,2),ie=r(Y);Va(ie,{get tabs(){return B},get selected(){return e(u)},set selected(m){l(u,q(m))}});var se=n(ie,2),_=r(se);{var p=m=>{Ea(m,{get providers(){return e(f)},get authProvider(){return e(c)},viewModePhone:!0,get webIdData(){return $()},get user(){return s()},set user(O){s(O)}})},y=m=>{var O=me(),le=X(O);{var fe=U=>{Ba(U,{viewModePhone:!0,get user(){return s()},set user(V){s(V)}})},w=U=>{var V=me(),F=X(V);{var J=H=>{Ra(H,{get user(){return s()},get authProvider(){return e(c)},viewModePhone:!0})},oe=H=>{var pe=me(),ce=X(pe);{var $e=P=>{Sa(P,{get user(){return s()}})},K=P=>{var z=me(),E=X(z);{var ae=D=>{Ua(D,{get webIdData(){return $()},set webIdData(te){$(te)}})},ge=D=>{var te=me(),de=X(te);{var xe=qe=>{Na(qe,{viewMode:"account"})};x(de,qe=>{e(u)===i.account.devices&&qe(xe)},!0)}v(D,te)};x(E,D=>{e(u)==="WebID"?D(ae):D(ge,!1)},!0)}v(P,z)};x(ce,P=>{e(u)===i.account.navMfa?P($e):P(K,!1)},!0)}v(H,pe)};x(F,H=>{e(u)===i.common.password?H(J):H(oe,!1)},!0)}v(U,V)};x(le,U=>{e(u)===i.account.navEdit?U(fe):U(w,!1)},!0)}v(m,O)};x(_,m=>{e(u)===i.account.navInfo?m(p):m(y,!1)})}t(se),t(Y),v(C,N)},M=C=>{var N=Rr(),b=X(N),re=r(b);a(re),t(b);var Y=n(b,2),ie=r(Y);Va(ie,{get tabs(){return B},center:!0,get selected(){return e(u)},set selected(m){l(u,q(m))}});var se=n(ie,2),_=r(se);{var p=m=>{Ea(m,{get webIdData(){return $()},get providers(){return e(f)},get authProvider(){return e(c)},get user(){return s()},set user(O){s(O)}})},y=m=>{var O=me(),le=X(O);{var fe=U=>{Ba(U,{get user(){return s()},set user(V){s(V)}})},w=U=>{var V=me(),F=X(V);{var J=H=>{Ra(H,{get user(){return s()},get authProvider(){return e(c)}})},oe=H=>{var pe=me(),ce=X(pe);{var $e=P=>{Sa(P,{get user(){return s()}})},K=P=>{var z=me(),E=X(z);{var ae=D=>{Ua(D,{get webIdData(){return $()},set webIdData(te){$(te)}})},ge=D=>{var te=me(),de=X(te);{var xe=qe=>{Tr(qe)};x(de,qe=>{e(u)===i.account.devices&&qe(xe)},!0)}v(D,te)};x(E,D=>{e(u)==="WebID"?D(ae):D(ge,!1)},!0)}v(P,z)};x(ce,P=>{e(u)===i.account.navMfa?P($e):P(K,!1)},!0)}v(H,pe)};x(F,H=>{e(u)===i.common.password?H(J):H(oe,!1)},!0)}v(U,V)};x(le,U=>{e(u)===i.account.navEdit?U(fe):U(w,!1)},!0)}v(m,O)};x(_,m=>{e(u)===i.account.navInfo?m(p):m(y,!1)})}t(se),t(Y),v(C,N)};x(L,C=>{e(g)?C(Q):C(M,!1)})}t(j),rt("innerWidth",C=>l(h,q(C))),v(W,T),Le()}var Vr=I("<!> <!> <!>",1);function jr(W,o){ze(o,!0);let a=We(),s=Wa("account"),$=S(void 0),i=S(void 0),h=S(!1);Fe(()=>{let c=s.get();c&&f(c)});async function f(c){const g=c.user_id;if(g){let u=await Promise.all([ea(`/auth/v1/users/${g}`),ea(`/auth/v1/users/${g}/webid/data`)]);u[0].body?l($,q(u[0].body)):dt("account"),u[1].body?l(i,q(u[1].body)):u[1].status===404&&l(i,q({user_id:g,expose_email:!1})),l(h,!0)}else console.error("no user_id in session")}at(c=>{k(()=>{var g;return et.title=`${((a==null?void 0:a.account.account)||"Account")??""} ${((g=e($))==null?void 0:g.email)??""}`})}),At(W,{children:(c,g)=>{Dt(c,{children:(u,B)=>{var T=Vr(),A=X(T);{var j=M=>{Ur(M,{get user(){return e($)},set user(C){l($,q(C))},get webIdData(){return e(i)},set webIdData(C){l(i,q(C))}})};x(A,M=>{e(h)&&s&&e($)&&M(j)})}var L=n(A,2);Wt(L,{absolute:!0});var Q=n(L,2);Tt(Q,{absolute:!0}),v(u,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),Le()}export{jr as component};
