import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.Cdp_P06_.js";import{p as n,o as r,a as c,$ as p}from"../chunks/index-client.CzqVbBUo.js";import{h as d}from"../chunks/svelte-head.BSz900xL.js";import{i as m}from"../chunks/lifecycle.BPrHSQsT.js";import{g as f,C as _,a as h,b as w,s as l,c as u,d as k,e as g,f as v,R,h as j}from"../chunks/dataFetching.CF6CPDU9.js";function y(C,i){n(i,!1),r(async()=>{const a=f(),t=new URLSearchParams;let s=R;a.state&&(a.state==="account"?s=j:a.state.startsWith("device")&&(s=`/auth/v1/${a.state}`)),t.append("grant_type","authorization_code"),t.append("code",a.code),t.append("redirect_uri",s),t.append("client_id",_),t.append("code_verifier",h());let o=await w(t),e=await o.json();l(e.access_token),u(e.id_token),o=await k(e.access_token),e=await o.json(),g(e.csrf_token),v(),window.location.href=s}),m(),d(a=>{p.title="Login"}),c()}export{y as component};
