import{a as v,t as w,e as f}from"../chunks/disclose-version.BP4T4xdV.js";import{l as x,a5 as ea,s as o,f as N,t as m,p as la,a as ia,k as c,j as s,c as p,r as u,a7 as $}from"../chunks/index-client.hxMyB_b4.js";import{s as e}from"../chunks/render.yNX9q8-B.js";import{i as y}from"../chunks/if.BeBa1Kxb.js";import{e as va}from"../chunks/each.BUp7aLCc.js";import{p as E}from"../chunks/proxy.DaVNR9vk.js";import{B as ma}from"../chunks/Button.BR1gOfNn.js";import{f as na,b as da}from"../chunks/fetch.Bq59EV_b.js";import{E as ca}from"../chunks/Expandable.CyA69Mcx.js";import{L as b}from"../chunks/LabeledValue.CxxfjE_4.js";import{u as fa}from"../chunks/i18n_admin.svelte.lt3dD7TQ.js";import{I as pa}from"../chunks/IconCheck.C6tGCpWy.js";var ua=w('<div class="font-mono"> </div>'),$a=w('<div class="n svelte-8tua2b"> </div>'),ba=w("<!> <!> <!> <!> <!> <!> <!>",1),ka=w('<div class="err"> </div>'),ha=w('<h2>Json Web Keys</h2> <p> </p> <p> </p> <p> </p> <!> <div class="btn svelte-8tua2b"><!></div> <!> <!>',1);function ya(I,Q){ia(Q,!0);let k=fa(),G=x(E([])),K=x(!1),g=x(""),L=x(!1);ea(()=>{J()});async function J(){var a;let r=await na("/auth/v1/oidc/certs");r.body?c(G,E(r.body.keys)):c(g,E(((a=r.error)==null?void 0:a.message)||"Error"))}async function R(){c(g,""),c(K,!0);let r=await da("/auth/v1/oidc/rotate_jwk");r.error?c(g,E(r.error.message)):(c(L,!0),setTimeout(()=>{c(L,!1)},3e3),await J()),c(K,!1)}var P=ha(),_=o(N(P),2),S=p(_,!0);u(_);var B=o(_,2),U=p(B,!0);u(B);var C=o(B,2),V=p(C,!0);u(C);var T=o(C,2);va(T,17,()=>s(G),r=>r.kid,(r,a)=>{ca(r,{summary:d=>{var h=ua(),j=p(h);u(h),m(()=>e(j,`${s(a).alg??""}
                /
                ${s(a).kid??""}`)),v(d,h)},details:d=>{var h=ba(),j=N(h);b(j,{label:"Key ID",mono:!0,children:(t,n)=>{$();var l=f();m(()=>e(l,s(a).kid)),v(t,l)},$$slots:{default:!0}});var q=o(j,2);b(q,{get label(){return k.jwks.type},mono:!0,children:(t,n)=>{$();var l=f();m(()=>e(l,s(a).kty)),v(t,l)},$$slots:{default:!0}});var z=o(q,2);b(z,{get label(){return k.jwks.alg},mono:!0,children:(t,n)=>{$();var l=f();m(()=>e(l,s(a).alg)),v(t,l)},$$slots:{default:!0}});var F=o(z,2);{var Z=t=>{b(t,{label:"Curve",mono:!0,children:(n,l)=>{$();var i=f();m(()=>e(i,s(a).crv)),v(n,i)},$$slots:{default:!0}})};y(F,t=>{s(a).crv&&t(Z)})}var H=o(F,2);{var aa=t=>{b(t,{label:"n",mono:!0,children:(n,l)=>{var i=$a(),oa=p(i,!0);u(i),m(()=>e(oa,s(a).n)),v(n,i)},$$slots:{default:!0}})};y(H,t=>{s(a).n&&t(aa)})}var M=o(H,2);{var ta=t=>{b(t,{label:"e",mono:!0,children:(n,l)=>{$();var i=f();m(()=>e(i,s(a).e)),v(n,i)},$$slots:{default:!0}})};y(M,t=>{s(a).e&&t(ta)})}var ra=o(M,2);{var sa=t=>{b(t,{label:"x",mono:!0,children:(n,l)=>{$();var i=f();m(()=>e(i,s(a).x)),v(n,i)},$$slots:{default:!0}})};y(ra,t=>{s(a).x&&t(sa)})}v(d,h)},$$slots:{summary:!0,details:!0}})});var D=o(T,2),X=p(D);ma(X,{onclick:R,get isLoading(){return s(K)},children:(r,a)=>{$();var d=f();m(()=>e(d,k.jwks.rotateKeys)),v(r,d)},$$slots:{default:!0}}),u(D);var W=o(D,2);{var Y=r=>{pa(r,{})};y(W,r=>{s(L)&&r(Y)})}var A=o(W,2);{var O=r=>{var a=ka(),d=p(a,!0);u(a),m(()=>e(d,s(g))),v(r,a)};y(A,r=>{s(g)&&r(O)})}m(()=>{e(S,k.jwks.p1),e(U,k.jwks.p2),e(V,k.jwks.p3)}),v(I,P),la()}function ga(I){ya(I,{})}export{ga as component};
