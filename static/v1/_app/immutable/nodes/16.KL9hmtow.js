import{a as $,t as P,d as Q}from"../chunks/disclose-version.BP4T4xdV.js";import{l as n,aa as z,p as W,a as ee,j as e,k as l,f as A,s as u,c as w,r as L}from"../chunks/index-client.hxMyB_b4.js";import{i as te}from"../chunks/if.BeBa1Kxb.js";import{e as re}from"../chunks/each.BUp7aLCc.js";import{p as a}from"../chunks/proxy.DaVNR9vk.js";import{E as j,D as ae}from"../chunks/helpers.CchIKxjM.js";import{E as se}from"../chunks/Event.CWEK7Lx9.js";import{b as oe}from"../chunks/fetch.Bq59EV_b.js";import{O as B}from"../chunks/Options.CjsqRicG.js";import{u as ie}from"../chunks/i18n_admin.svelte.lt3dD7TQ.js";import{I as F}from"../chunks/InputDateTimeCombo.VZN-6SG8.js";import{f as le,a as me,b as G}from"../chunks/form.DekAF1-C.js";import{O as ne}from"../chunks/OrderSearchBar.wIdu7A5l.js";import{C as ve}from"../chunks/ContentAdmin.YSUtpxca.js";var pe=P('<div class="row svelte-itq81i">No events found</div>'),ue=P('<!> <div class="row svelte-itq81i"><!> <!></div> <div class="filters svelte-itq81i"><div class="level svelte-itq81i"><!></div> <div class="typ svelte-itq81i"><!></div></div> <!>',1);function fe(O,H){ee(H,!0);let f=ie(),v=n(a([])),p=n(a([])),T=n(a(le())),V=n(a(me())),c=n(""),d=n("--:--"),q=n("info"),g=n(a(j[0])),y=["IP","Content"],h=n(a(y[0])),D=n(""),C=["Timestamp","Level","Type"];z(()=>{J()}),z(()=>{let s=e(D).toLowerCase();s?e(h)===y[0]?l(p,a(e(v).filter(m=>{var o;return(o=m.ip)==null?void 0:o.includes(s)}))):e(h)===y[1]&&l(p,a(e(v).filter(m=>{var o,r;return((o=m.typ)==null?void 0:o.toLowerCase().includes(s))||((r=m.text)==null?void 0:r.toLowerCase().includes(s))}))):l(p,a(e(v)))});async function J(){let s=G(e(T),e(V));if(!s){console.error("from ts invalid",s);return}let m;e(c)&&e(d)&&(m=G(e(c),e(d)));let o={from:s,until:m,level:e(q),typ:e(g)!==j[0]?e(g):void 0},r=await oe("/auth/v1/events",o);r.body?l(v,a(r.body)):console.error(r.error)}function K(s,m){let o=m==="up";s===C[0]?e(v).sort((r,i)=>o?r.timestamp-i.timestamp:i.timestamp-r.timestamp):s===C[1]?e(v).sort((r,i)=>o?r.level.localeCompare(i.level):i.level.localeCompare(r.level)):s===C[2]&&e(v).sort((r,i)=>o?r.typ.localeCompare(i.typ):i.typ.localeCompare(r.typ))}ve(O,{children:(s,m)=>{var o=ue(),r=A(o);ne(r,{searchOptions:y,orderOptions:C,onChangeOrder:K,firstDirReverse:!0,get searchOption(){return e(h)},set searchOption(t){l(h,a(t))},get value(){return e(D)},set value(t){l(D,a(t))}});var i=u(r,2),k=w(i);F(k,{get label(){return f.common.from},withTime:!0,get value(){return e(T)},set value(t){l(T,a(t))},get timeValue(){return e(V)},set timeValue(t){l(V,a(t))}});var R=u(k,2);F(R,{get label(){return f.common.until},withTime:!0,withDelete:!0,get value(){return e(c)},set value(t){l(c,a(t))},get timeValue(){return e(d)},set timeValue(t){l(d,a(t))}}),L(i);var x=u(i,2),E=w(x),S=w(E);B(S,{get ariaLabel(){return f.events.eventLevel},options:ae,borderless:!0,get value(){return e(q)},set value(t){l(q,a(t))}}),L(E);var N=u(E,2),U=w(N);B(U,{get ariaLabel(){return f.events.eventType},options:j,borderless:!0,get value(){return e(g)},set value(t){l(g,a(t))}}),L(N),L(x);var X=u(x,2);{var Y=t=>{var b=pe();$(t,b)},Z=t=>{var b=Q(),_=A(b);re(_,17,()=>e(p),I=>I.id,(I,M)=>{se(I,{get event(){return e(M)},inline:!0})}),$(t,b)};te(X,t=>{e(p).length===0?t(Y):t(Z,!1)})}$(s,o)},$$slots:{default:!0}}),W()}function ce(O){fe(O,{})}export{ce as component};
