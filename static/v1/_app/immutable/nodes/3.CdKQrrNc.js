import"../chunks/disclose-version.BDr9Qe-U.js";import{U as t,R as i,W as a,T as w,p as We,P as K,b as oa,j as v,g as e,a as Ae,h as Ie,Q as le,V as re,o as Je,$ as _t}from"../chunks/index-client.CzqVbBUo.js";import{h as xt}from"../chunks/svelte-head.BSz900xL.js";import{a as l,t as W,c as we,n as Aa,b as se}from"../chunks/template.io25wnf1.js";import{i as j,p as m}from"../chunks/if.BnegfJmL.js";import{P as Be,a9 as wa,aa as Nt,_ as It,Q as Ct,ab as Pt,U as Dt,g as jt,v as La,w as qt,ac as Ut,ad as Wt,ae as At,af as za,ag as Ma,o as Fe,ah as Ta,ai as Lt,G as Se,H as Ke,aj as zt,D as Ea,$ as Mt,ak as Tt,al as Et,B as Rt,am as Vt,W as Kt,an as Ot,ao as Bt,J as Ht,a1 as Gt,ap as Jt,a2 as Ra,aq as Ft}from"../chunks/dataFetching.Br47vc1D.js";import{d as Va,e as Ka,s as d,r as St}from"../chunks/render.CK5MTJQL.js";import{t as Me,s as _e,f as Ve,e as Qt,g as ne,B as Pe,h as Yt,a as Xt}from"../chunks/Button.JzTZa4bh.js";import{h as Oa,T as Zt,a as er,S as Ba,b as ar,D as tr,c as rr}from"../chunks/Devices.1_HD5eJJ.js";import{p as V,r as sr,s as nr,a as or}from"../chunks/props.C_MHtC74.js";import{r as ba}from"../chunks/legacy-client.DPLAlLYD.js";import{e as Ha}from"../chunks/OptionSelect.jFlepSwk.js";import{t as He,s as Ge,b as oe}from"../chunks/helpers.BvaXa0cv.js";import{C as ia}from"../chunks/CheckIcon.B6v_Qvnl.js";import{s as Ga}from"../chunks/snippet.B82X2vfx.js";import{b as Ja}from"../chunks/this.CLOcaDU7.js";import{u as Te}from"../chunks/i18n.svelte.C_qSL0ZA.js";import{c as Qe,a as De,b as ir,I as Ee}from"../chunks/Input.jkTumKYK.js";import{t as lr}from"../chunks/tweened.x1rdCnFk.js";import{L as Fa}from"../chunks/LangSelector.DQTzLAdQ.js";import{P as cr}from"../chunks/PasswordPolicy.DbNoBlQZ.js";import{P as ga}from"../chunks/PasswordInput.DOldwDot.js";import{W as vr}from"../chunks/WebauthnRequest.DHqnsBvK.js";import{T as dr}from"../chunks/Template.mSBxkRZ-.js";import{M as ur,C as pr}from"../chunks/ContentCenter.B2VsFG_i.js";var mr=W('<div class="container svelte-1yqkxw6"><div class="loading svelte-1yqkxw6"><div class="loading-1 svelte-1yqkxw6"></div> <div class="loading-2 svelte-1yqkxw6"></div> <div class="loading-3 svelte-1yqkxw6"></div></div></div>');function Sa(O,o){let r=V(o,"background",3,!1),b=V(o,"color",3,"hsl(var(--text))"),s=V(o,"global",3,!1),p=V(o,"offset",3,0);var h=mr(),u=t(h),q=t(u),g=i(q,2),k=i(g,2);a(u),a(h),w(()=>{He(h,"global",s()),He(h,"local",!s()),He(h,"background",r()),_e(u,"style",`margin-top: ${p()??""}px;`),Ge(q,"background",b()),Ge(g,"background",b()),Ge(k,"background",b())}),Me(3,h,()=>Ve,()=>({duration:100})),l(O,h)}var hr=W('<div class="load svelte-av2wub"><!></div>'),fr=W('<div class="font-label svelte-av2wub"><!></div>'),wr=W("<button><!></button>");function br(O,o){We(o,!0);let r=V(o,"type",3,"button"),b=V(o,"role",3,"button"),s=V(o,"ref",15),p=V(o,"level",3,1),h=V(o,"isDisabled",3,!1),u=V(o,"isLoading",3,!1),q=V(o,"invisible",3,!1),g=V(o,"invisibleOutline",3,!1),k=sr(o,["$$slots","$$events","$$legacy","type","role","ref","id","ariaLabel","ariaControls","ariaCurrent","level","width","isDisabled","isLoading","invisible","invisibleOutline","popovertarget","popovertargetaction","onclick","onLeft","onRight","onUp","onDown","children"]),z=Ie(()=>{if(q())return"invisible";switch(p()){case-1:return"l1d";case-2:return"l2d";case-3:return"l3d";case 2:return"l2";case 3:return"l3";default:return"l1"}}),N=K(!u()),G=Ie(()=>h()||u());oa(()=>{u()?setTimeout(()=>{v(N,!1)},120):setTimeout(()=>{v(N,!0)},120)});function D(){switch(p()){case-1:return"var(--btn-text)";case-2:return"hsl(var(--error))";case-3:return"hsl(var(--error))";case 2:return"hsl(var(--action))";case 3:return"hsl(var(--action))";default:return"var(--btn-text)"}}function I(C){var R,Z,S,Q,ee;switch(C.code){case"Enter":(R=o.onclick)==null||R.call(o,C);break;case"ArrowLeft":(Z=o.onLeft)==null||Z.call(o);break;case"ArrowRight":(S=o.onRight)==null||S.call(o);break;case"ArrowUp":(Q=o.onUp)==null||Q.call(o);break;case"ArrowDown":(ee=o.onDown)==null||ee.call(o);break}}var M=wr();let Y;var F=t(M);{var A=C=>{var R=hr(),Z=t(R),S=Ie(D);Sa(Z,{background:!1,get color(){return e(S)}}),a(R),l(C,R)},J=C=>{var R=we(),Z=le(R);{var S=Q=>{var ee=fr(),ae=t(ee);Ga(ae,()=>o.children),a(ee),Me(1,ee,()=>Ve),l(Q,ee)};j(Z,Q=>{e(N)&&Q(S)},!0)}l(C,R)};j(F,C=>{u()?C(A):C(J,!1)})}a(M),Ja(M,C=>s(C),()=>s()),w(()=>{Y=Qt(M,Y,{role:b(),type:r(),id:o.id,"aria-label":o.ariaLabel,"aria-controls":o.ariaControls,"aria-current":o.ariaCurrent,class:e(z),"data-isloading":u(),onclick:o.onclick,onkeydown:I,disabled:e(G),"aria-disabled":e(G),popovertarget:o.popovertarget,popovertargetaction:o.popovertargetaction,...k},"svelte-av2wub"),He(M,"invisibleOutline",g()),Ge(M,"width",o.width)}),l(O,M),Ae()}var gr=Aa('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function $r(O,o){let r=V(o,"opacity",3,.9),b=V(o,"width",3,"1.5rem"),s=V(o,"color",3,"hsl(var(--error))");var p=gr();_e(p,"stroke-width",2),w(()=>{_e(p,"width",b()),_e(p,"color",s()),_e(p,"opacity",r())}),l(O,p)}function yr(O,o,r){o()||r()}function kr(O){O.stopPropagation()}var _r=W('<span class="closeIcon svelte-1w7l4fj"><!></span>'),xr=W('<div class="relative"><div class="absolute close svelte-1w7l4fj"><!></div></div>'),Nr=W('<dialog aria-modal="true" class="svelte-1w7l4fj"><div role="none" class="svelte-1w7l4fj"><!> <!></div></dialog>');function Ir(O,o){We(o,!0);let r=V(o,"showModal",15),b=V(o,"closeModal",15),s=V(o,"strict",3,!1),p=V(o,"prerender",3,!1),h=Te(),u;oa(()=>{b(q)}),oa(()=>{r()&&(u==null||u.showModal())});function q(I){I==null||I.preventDefault(),u==null||u.close(),r(!1)}var g=Nr();g.__click=[yr,s,q];var k=t(g);k.__click=[kr];var z=t(k);{var N=I=>{var M=xr(),Y=t(M),F=t(Y);br(F,{get ariaLabel(){return h.common.close},invisible:!0,onclick:q,children:(A,J)=>{var C=_r(),R=t(C);$r(R,{color:"currentColor",width:"1.2rem"}),a(C),l(A,C)},$$slots:{default:!0}}),a(Y),a(M),l(I,M)};j(z,I=>{s()||I(N)})}var G=i(z,2);{var D=I=>{var M=we(),Y=le(M);Ga(Y,()=>o.children),l(I,M)};j(G,I=>{(p()||r())&&I(D)})}a(k),a(g),Ja(g,I=>u=I,()=>u),w(()=>_e(g,"data-strict",s())),Ka("close",g,()=>{var I;r(!1),(I=o.onClose)==null||I.call(o)}),l(O,g),Ae()}Va(["click"]);var Cr=W('<div class="link-err value svelte-bckoh9"> </div>'),Pr=W('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),Dr=(O,o)=>v(o,!e(o)),jr=W('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),qr=W('<p> </p> <div class="providers svelte-bckoh9"></div>',1),Ur=W('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),Wr=W('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),Ar=W('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),Lr=W('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Qa(O,o){We(o,!0);let r=V(o,"user",15),b=V(o,"viewModePhone",3,!1),s=Te(),p=K(!1),h=K(!1),u=Ie(()=>{var X;return(X=r().account_type)==null?void 0:X.startsWith("federated")}),q=Ie(()=>{var X;return e(u)?`${r().account_type}: ${((X=o.authProvider)==null?void 0:X.name)||""}`:r().account_type}),g=Ie(()=>b()?"rowPhone":"row"),k=Ie(()=>b()?"labelPhone":"label");function z(X){It(64,(me,{challenge:xe,verifier:Ne})=>{me||(localStorage.setItem(Ct,Ne),N(X,xe))})}async function N(X,me){let xe={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:X,pkce_challenge:me},Ne=await Pt(X,xe);if(Ne.ok){const Ce=await Ne.text();Dt(Ce),window.location.href=Ne.headers.get("location")}else{let Ce=await Ne.json();console.error(Ce)}}async function G(){let X=await Nt(),me=await X.json();X.ok?r(me):v(p,!0)}var D=Lr(),I=t(D),M=t(I),Y=t(M),F=t(Y);a(Y),a(M);var A=i(M,2),J=t(A,!0);a(A),a(I);var C=i(I,2),R=t(C),Z=t(R),S=t(Z);a(Z),a(R);var Q=i(R,2),ee=t(Q,!0);a(Q),a(C);var ae=i(C,2),ue=t(ae),B=t(ue),U=t(B);a(B),a(ue);var T=i(ue,2),y=t(T,!0);a(T),a(ae);var x=i(ae,2),$=t(x),c=t($),P=t(c);a(c),a($);var n=i($,2),_=t(n,!0);a(n),a(x);var f=i(x,2),E=t(f),te=t(E),ie=t(te);a(te),a(E);var he=i(E,2),pe=t(he),be=t(pe,!0);a(pe);var ge=i(pe,2);{var ke=X=>{var me=Pr(),xe=t(me);Pe(xe,{level:3,$$events:{click:G},children:(je,Ue)=>{re();var Oe=se();w(()=>d(Oe,s.account.providerUnlink)),l(je,Oe)},$$slots:{default:!0}});var Ne=i(xe,2);{var Ce=je=>{var Ue=Cr(),Oe=t(Ue,!0);a(Ue),w(()=>d(Oe,s.account.providerUnlinkDesc)),l(je,Ue)};j(Ne,je=>{e(p)&&je(Ce)})}a(me),l(X,me)},qe=X=>{var me=we(),xe=le(me);{var Ne=Ce=>{var je=Ur(),Ue=le(je);Ue.__click=[Dr,h];var Oe=t(Ue,!0);a(Ue);var gt=i(Ue,2);Ir(gt,{get showModal(){return e(h)},set showModal(ua){v(h,m(ua))},children:(ua,fs)=>{var ja=qr(),pa=le(ja),$t=t(pa,!0);a(pa);var qa=i(pa,2);Ha(qa,21,()=>o.providers,ma=>ma.id,(ma,ha)=>{Pe(ma,{level:3,$$events:{click:()=>z(e(ha).id)},children:(yt,ws)=>{var fa=jr(),Ua=t(fa),Wa=i(Ua,2),kt=t(Wa,!0);a(Wa),a(fa),w(()=>{_e(Ua,"src",`/auth/v1/providers/${e(ha).id}/img`),d(kt,e(ha).name)}),l(yt,fa)},$$slots:{default:!0}})}),a(qa),w(()=>d($t,s.account.providerLinkDesc)),l(ua,ja)},$$slots:{default:!0}}),w(()=>d(Oe,s.account.providerLink)),Ka("keypress",Ue,()=>v(h,!e(h))),l(Ce,je)};j(xe,Ce=>{o.providers.length>0&&Ce(Ne)},!0)}l(X,me)};j(ge,X=>{e(u)?X(ke):X(qe,!1)})}a(he),a(f);var $e=i(f,2),L=t($e),ce=t(L),ve=t(ce);a(ce),a(L);var ye=i(L,2),de=t(ye,!0);a(ye),a($e);var H=i($e,2),fe=t(H),Re=t(fe),Le=t(Re);a(Re),a(fe);var ze=i(fe,2),la=t(ze,!0);a(ze),a(H);var ca=i(H,2),Ye=t(ca),$a=t(Ye),rt=t($a);a($a),a(Ye);var st=i(Ye,2),nt=Ie(()=>!!r().webauthn_user_id);ia(st,{get check(){return e(nt)}}),a(ca);var va=i(ca,2),Xe=t(va),ya=t(Xe),ot=t(ya);a(ya),a(Xe);var it=i(Xe,2);ia(it,{get check(){return r().enabled}}),a(va);var da=i(va,2),Ze=t(da),ka=t(Ze),lt=t(ka);a(ka),a(Ze);var ct=i(Ze,2);ia(ct,{get check(){return r().email_verified}}),a(da);var ea=i(da,2),aa=t(ea),_a=t(aa),vt=t(_a);a(_a),a(aa);var xa=i(aa,2),dt=t(xa,!0);w(()=>d(dt,Be(r().last_login))),a(xa),a(ea);var ta=i(ea,2),ra=t(ta),Na=t(ra),ut=t(Na);a(Na),a(ra);var Ia=i(ra,2),pt=t(Ia,!0);w(()=>d(pt,r().password_expires&&Be(r().password_expires)||s.common.never)),a(Ia),a(ta);var sa=i(ta,2),na=t(sa),Ca=t(na),mt=t(Ca);a(Ca),a(na);var Pa=i(na,2),ht=t(Pa,!0);w(()=>d(ht,Be(r().created_at))),a(Pa),a(sa);var Da=i(sa,2);{var ft=X=>{var me=Wr(),xe=t(me),Ne=t(xe),Ce=t(Ne);a(Ne),a(xe);var je=i(xe,2),Ue=t(je,!0);w(()=>d(Ue,Be(r().user_expires))),a(je),a(me),w(()=>{oe(me,ne(e(g)),"svelte-bckoh9"),oe(xe,ne(e(k)),"svelte-bckoh9"),d(Ce,`${s.account.userExpiry??""}:`)}),l(X,me)};j(Da,X=>{r().user_expires&&X(ft)})}var wt=i(Da,2);{var bt=X=>{var me=Ar(),xe=t(me),Ne=i(xe,2),Ce=t(Ne);w(()=>_e(Ce,"href",wa(r().id)));var je=t(Ce);Oa(je,()=>wa(r().id).replace("/auth/","/auth/<wbr/>")),a(Ce),a(Ne),a(me),w(()=>{oe(me,ne(e(g)),"svelte-bckoh9"),oe(xe,ne(e(k)),"svelte-bckoh9")}),l(X,me)};j(wt,X=>{o.webIdData&&X(bt)})}a(D),w(()=>{oe(I,ne(e(g)),"svelte-bckoh9"),oe(M,ne(e(k)),"svelte-bckoh9"),d(F,`${s.common.email??""}:`),d(J,r().email),oe(C,ne(e(g)),"svelte-bckoh9"),oe(R,ne(e(k)),"svelte-bckoh9"),d(S,`${s.account.givenName??""}:`),d(ee,r().given_name),oe(ae,ne(e(g)),"svelte-bckoh9"),oe(ue,ne(e(k)),"svelte-bckoh9"),d(U,`${s.account.familyName??""}:`),d(y,r().family_name),oe(x,ne(e(g)),"svelte-bckoh9"),oe($,ne(e(k)),"svelte-bckoh9"),d(P,`${s.account.user??""} ID:`),d(_,r().id),oe(f,ne(e(g)),"svelte-bckoh9"),oe(E,ne(e(k)),"svelte-bckoh9"),d(ie,`${s.account.accType??""}:`),d(be,e(q)||""),oe($e,ne(e(g)),"svelte-bckoh9"),oe(L,ne(e(k)),"svelte-bckoh9"),d(ve,`${s.account.roles??""}:`),d(de,r().roles||"None"),oe(H,ne(e(g)),"svelte-bckoh9"),oe(fe,ne(e(k)),"svelte-bckoh9"),d(Le,`${s.account.groups??""}:`),d(la,r().groups||"None"),oe(Ye,ne(e(k)),"svelte-bckoh9"),d(rt,`${s.account.mfaActivated??""}:`),oe(Xe,ne(e(k)),"svelte-bckoh9"),d(ot,`${s.account.userEnabled??""}:`),oe(Ze,ne(e(k)),"svelte-bckoh9"),d(lt,`${s.account.emailVerified??""}:`),oe(ea,ne(e(g)),"svelte-bckoh9"),oe(aa,ne(e(k)),"svelte-bckoh9"),d(vt,`${s.account.lastLogin??""}:`),oe(ta,ne(e(g)),"svelte-bckoh9"),oe(ra,ne(e(k)),"svelte-bckoh9"),d(ut,`${s.account.passwordExpiry??""}:`),oe(sa,ne(e(g)),"svelte-bckoh9"),oe(na,ne(e(k)),"svelte-bckoh9"),d(mt,`${s.account.userCreated??""}:`)}),l(O,D),Ae()}Va(["click"]);function Ya(O,o){We(o,!0);let r=V(o,"selected",15),b=V(o,"showWebId",3,!1),s=Te(),p=m(b()?[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,"WebID",s.account.devices,s.account.navLogout]:[s.account.navInfo,s.account.navEdit,s.common.password,s.account.navMfa,s.account.devices,s.account.navLogout]);Je(()=>{jt().v==="devices"&&r(s.account.devices)}),Zt(O,{get labels(){return p},get selected(){return r()},set selected(h){r(h)}}),Ae()}var zr=W("<p> </p>"),Mr=W('<div class="success svelte-1xh7x72">Update successful <!></div>'),Tr=W('<div class="err svelte-1xh7x72"> </div>'),Er=W('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Xa(O,o){We(o,!0);let r=V(o,"user",31,()=>m({})),b=V(o,"viewModePhone",3,!1),s=Te(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="8rem";let u=K(!1),q=K(""),g=K(!1),k=K(!1),z=m({email:r().email,givenName:r().given_name,familyName:r().family_name}),N=K(m({}));const G=Qe().shape({email:De().required(s.account.validEmail).email(s.account.validEmail),givenName:De().required(s.account.validGivenName).matches(La,s.account.validGivenName),familyName:De().nullable().matches(qt,s.account.validFamilyName)});let D=K(m({}));const I=Qe().shape({birthdate:De().nullable().trim().matches(Ut,s.common.invalidInput),phone:De().nullable().trim().matches(Wt,"+..."),street:De().nullable().trim().matches(At,s.common.invalidInput),zip:ir().nullable().min(1e3).max(999999),city:De().nullable().trim().matches(za,s.common.invalidInput),country:De().nullable().trim().matches(za,s.common.invalidInput)});function M(n){n.code==="Enter"&&Y()}async function Y(){if(!await F()){v(q,m(s.common.invalidInput));return}v(u,!0);const n={email:z.email,given_name:z.givenName,family_name:z.familyName||null,user_values:r().user_values};n.user_values.phone&&(n.user_values.phone=n.user_values.phone.replaceAll(" ","")),n.user_values.zip&&(n.user_values.zip=Number.parseInt(n.user_values.zip));let _=await Ma(r().id,n);if(_.ok)v(g,!0),r(r().email=z.email,!0),r(r().given_name=z.givenName,!0),r(r().family_name=z.familyName,!0),_.status===202&&v(k,!0);else{let f=await _.json();v(q,m(f.message))}v(u,!1)}async function F(){let n=!0;try{await G.validate(z,{abortEarly:!1}),v(N,m({}))}catch(_){v(N,m(Fe(_))),n=!1}try{await I.validate(r().user_values,{abortEarly:!1}),v(D,m({}))}catch(_){v(D,m(Fe(_))),n=!1}return n}var A=Er(),J=t(A),C=t(J);Ee(C,{autocomplete:"family-name",get placeholder(){return s.common.email},get width(){return e(p)},get value(){return z.email},set value(n){z.email=n},get error(){return e(N).email},set error(n){e(N).email=n},$$events:{input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.common.email.toUpperCase())),l(n,f)},$$slots:{default:!0}});var R=i(C,2);Ee(R,{autocomplete:"given-name",get placeholder(){return s.account.givenName},get width(){return e(p)},get value(){return z.givenName},set value(n){z.givenName=n},get error(){return e(N).givenName},set error(n){e(N).givenName=n},$$events:{input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.givenName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var Z=i(R,2);Ee(Z,{autocomplete:"family-name",get placeholder(){return s.account.familyName},get width(){return e(p)},get value(){return z.familyName},set value(n){z.familyName=n},get error(){return e(N).familyName},set error(n){e(N).familyName=n},$$events:{input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.familyName.toUpperCase())),l(n,f)},$$slots:{default:!0}});var S=i(Z,2);Ge(S,"margin",".5rem");var Q=t(S,!0);a(S);var ee=i(S,2);Ee(ee,{autocomplete:"street-address",get placeholder(){return s.account.street},get width(){return e(p)},get value(){return r().user_values.street},set value(n){r(r().user_values.street=n,!0)},get error(){return e(D).street},set error(n){e(D).street=n},$$events:{keypress:M,input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.street.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ae=i(ee,2);Ee(ae,{type:"number",autocomplete:"postal-code",get placeholder(){return s.account.zip},min:1e3,max:999999,get width(){return e(p)},get value(){return r().user_values.zip},set value(n){r(r().user_values.zip=n,!0)},get error(){return e(D).zip},set error(n){e(D).zip=n},$$events:{keypress:M,input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.zip.toUpperCase())),l(n,f)},$$slots:{default:!0}});var ue=i(ae,2);Ee(ue,{autocomplete:"adress-level2",get placeholder(){return s.account.city},get width(){return e(p)},get value(){return r().user_values.city},set value(n){r(r().user_values.city=n,!0)},get error(){return e(D).city},set error(n){e(D).city=n},$$events:{keypress:M,input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.city.toUpperCase())),l(n,f)},$$slots:{default:!0}});var B=i(ue,2);Ee(B,{autocomplete:"country",get placeholder(){return s.account.country},get width(){return e(p)},get value(){return r().user_values.country},set value(n){r(r().user_values.country=n,!0)},get error(){return e(D).country},set error(n){e(D).country=n},$$events:{keypress:M,input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.country.toUpperCase())),l(n,f)},$$slots:{default:!0}});var U=i(B,2);Ee(U,{autocomplete:"tel",get placeholder(){return s.account.phone},get width(){return e(p)},get value(){return r().user_values.phone},set value(n){r(r().user_values.phone=n,!0)},get error(){return e(D).phone},set error(n){e(D).phone=n},$$events:{keypress:M,input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.phone.toUpperCase())),l(n,f)},$$slots:{default:!0}});var T=i(U,2);Ee(T,{type:"date",autocomplete:"bday",get placeholder(){return s.account.birthdate},get width(){return e(p)},get value(){return r().user_values.birthdate},set value(n){r(r().user_values.birthdate=n,!0)},get error(){return e(D).birthdate},set error(n){e(D).birthdate=n},$$events:{keypress:M,input:F},children:(n,_)=>{re();var f=se();w(()=>d(f,s.account.birthdate.toUpperCase())),l(n,f)},$$slots:{default:!0}});var y=i(T,2);Pe(y,{width:h,level:1,get isLoading(){return e(u)},set isLoading(n){v(u,m(n))},$$events:{click:Y},children:(n,_)=>{re();var f=se();w(()=>d(f,s.common.save)),l(n,f)},$$slots:{default:!0}});var x=i(y,2),$=t(x);{var c=n=>{var _=Mr(),f=i(t(_));{var E=te=>{var ie=zr(),he=t(ie,!0);a(ie),w(()=>d(he,s.account.emailUpdateConfirm)),l(te,ie)};j(f,te=>{e(k)&&te(E)})}a(_),Me(3,_,()=>Ve),l(n,_)},P=n=>{var _=we(),f=le(_);{var E=te=>{var ie=Tr(),he=t(ie,!0);a(ie),w(()=>d(he,e(q))),Me(3,ie,()=>Ve),l(te,ie)};j(f,te=>{e(q)&&te(E)},!0)}l(n,_)};j($,n=>{e(g)?n(c):n(P,!1)})}a(x),a(J),a(A),w(()=>d(Q,s.account.optionalValues)),l(O,A),Ae()}var Rr=Aa('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Vr(O,o){let r=V(o,"opacity",3,.9),b=V(o,"width",3,24),s=V(o,"color",3,"currentColor");var p=Rr();_e(p,"stroke-width",2),w(()=>{_e(p,"stroke",s()),_e(p,"width",b()),_e(p,"opacity",r())}),l(O,p)}var Kr=W('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),Or=W('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Br=W('<div class="keysHeader svelte-q7vfo0"> </div>'),Hr=W("<div><!></div>"),Gr=W('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Jr=W('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Fr=W('<div class="button svelte-q7vfo0"><!></div>'),Sr=W('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Za(O,o){We(o,!0);let r=V(o,"user",19,()=>({})),b=Te(),s=K(!1),p=K(""),h=K(!1),u=K(r().account_type==="password"),q=K(m([]));ba(()=>{e(q).length>0&&r().account_type==="passkey"&&v(u,e(q).length>1)});let g=m({passkeyName:""}),k=K(m({}));const z=Qe().shape({passkeyName:De().required(b.common.invalidInput).matches(La,b.mfa.passkeyNameErr)});Je(()=>{G()});function N(){v(s,!1),v(p,"")}async function G(){let y=await Ta(o.session.user_id),x=await y.json();y.ok?v(q,m(x)):console.error("error fetching passkeys: "+x.message)}async function D(){if(N(),!await Y())return;const y=g.passkeyName;if(y.length<2){v(s,!0),v(p,m(b.mfa.passkeyNameErr));return}let x=await Lt(r().id,{passkey_name:y});if(x.status===200){let $=await x.json();$.publicKey.challenge=Se($.publicKey.challenge),$.publicKey.user.id=Se($.publicKey.user.id),$.publicKey.excludeCredentials=$.publicKey.excludeCredentials,$.publicKey.excludeCredentials&&($.publicKey.excludeCredentials=$.publicKey.excludeCredentials.map(n=>(n.id=Se(n.id),n)));let c=await navigator.credentials.create($),P={passkey_name:y,data:{id:c.id,rawId:Ke(c.rawId),response:{attestationObject:Ke(c.response.attestationObject),clientDataJSON:Ke(c.response.clientDataJSON)},type:c.type}};x=await zt(r().id,P),x.status===201?(v(h,!1),g.passkeyName="",await G()):console.error(x)}else v(s,!0),v(p,m(b.mfa.errorReg))}async function I(){N();let y=await Ea(r().id,{purpose:"Test"});if(y.status===200){let x=await y.json(),$=x.rcr;$.publicKey.challenge=Se($.publicKey.challenge);for(let n of $.publicKey.allowCredentials)n.id=Se(n.id);let c;try{c=await navigator.credentials.get($)}catch{v(s,!0),v(p,m(b.mfa.invalidKeyUsed));return}let P={code:x.code,data:{id:c.id,rawId:Ke(c.rawId),response:{authenticatorData:Ke(c.response.authenticatorData),clientDataJSON:Ke(c.response.clientDataJSON),signature:Ke(c.response.signature)},type:c.type}};y=await Mt(r().id,P),y.status===202?(v(p,m(b.mfa.testSuccess)),await G()):console.error(y)}else v(s,!0),v(p,m(b.mfa.testError))}async function M(y){let x=await Tt(r().id,y);if(x.status===200)await G();else{let $=await x.json();v(s,!0),v(p,m($.message))}}async function Y(){try{return await z.validate(g,{abortEarly:!1}),v(k,m({})),!0}catch(y){return v(k,m(Fe(y))),!1}}var F=Sr(),A=t(F),J=t(A),C=i(J,3);a(A);var R=i(A,2);{var Z=y=>{var x=Kr(),$=le(x);Ee($,{autocomplete:"off",get placeholder(){return b.mfa.passkeyName},autofocus:!0,get value(){return g.passkeyName},set value(_){g.passkeyName=_},get error(){return e(k).passkeyName},set error(_){e(k).passkeyName=_},$$events:{input:Y,enter:D},children:(_,f)=>{re();var E=se();w(()=>d(E,b.mfa.passkeyName)),l(_,E)},$$slots:{default:!0}});var c=i($,2),P=t(c);Pe(P,{level:1,$$events:{click:D},children:(_,f)=>{re();var E=se();w(()=>d(E,b.mfa.register)),l(_,E)},$$slots:{default:!0}});var n=i(P,2);Pe(n,{level:4,$$events:{click:()=>v(h,!1)},children:(_,f)=>{re();var E=se();w(()=>d(E,b.common.cancel)),l(_,E)},$$slots:{default:!0}}),a(c),l(y,x)},S=y=>{var x=Or(),$=t(x);Pe($,{level:3,$$events:{click:()=>v(h,!0)},children:(c,P)=>{re();var n=se();w(()=>d(n,b.mfa.registerNew)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};j(R,y=>{e(h)?y(Z):y(S,!1)})}var Q=i(R,2);{var ee=y=>{var x=Br(),$=t(x,!0);a(x),w(()=>d($,b.mfa.registerdKeys)),l(y,x)};j(Q,y=>{e(q).length>0&&y(ee)})}var ae=i(Q,2);Ha(ae,21,()=>e(q),y=>y.name,(y,x)=>{var $=Jr(),c=t($),P=t(c),n=i(P),_=t(n),f=t(_,!0);a(_);var E=i(_,2);{var te=ve=>{er(ve,{get text(){return b.account.userVerifiedTooltip},children:(ye,de)=>{var H=Hr();Ge(H,"margin-bottom","-.25rem");var fe=t(H);Vr(fe,{width:18,color:"var(--col-acnt)"}),a(H),l(ye,H)},$$slots:{default:!0}})};j(E,ve=>{e(x).user_verified&&ve(te)})}a(n),a(c);var ie=i(c,2),he=t(ie),pe=i(he),be=t(pe,!0);w(()=>d(be,Be(e(x).registered))),a(pe),a(ie);var ge=i(ie,2),ke=t(ge),qe=i(ke),$e=t(qe,!0);w(()=>d($e,Be(e(x).last_used))),a(qe),a(ge);var L=i(ge,2);{var ce=ve=>{var ye=Gr(),de=i(t(ye),2),H=t(de);Pe(H,{level:4,$$events:{click:()=>M(e(x).name)},children:(fe,Re)=>{re();var Le=se();w(()=>d(Le,b.mfa.delete.toUpperCase())),l(fe,Le)},$$slots:{default:!0}}),a(de),a(ye),l(ve,ye)};j(L,ve=>{e(u)&&ve(ce)})}a($),w(()=>{d(P,`${`${b.mfa.passkeyName}: `??""} `),d(f,e(x).name),d(he,`${`${b.mfa.registerd}: `??""} `),d(ke,`${`${b.mfa.lastUsed}: `??""} `)}),l(y,$)}),a(ae);var ue=i(ae,2);{var B=y=>{var x=Fr(),$=t(x);Pe($,{level:1,$$events:{click:I},children:(c,P)=>{re();var n=se();w(()=>d(n,b.mfa.test)),l(c,n)},$$slots:{default:!0}}),a(x),l(y,x)};j(ue,y=>{e(q).length>0&&y(B)})}var U=i(ue,2),T=t(U,!0);a(U),a(F),w(()=>{d(J,`${b.mfa.p1??""} `),d(C,` ${b.mfa.p2??""}`),He(U,"msg",!e(s)),He(U,"err",e(s)),d(T,e(p))}),l(O,F),Ae()}var Qr=W('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Yr(O,o){We(o,!0);let r=V(o,"formValues",31,()=>m({})),b=V(o,"btnWidth",3,"4rem"),s=V(o,"hideCurrentPassword",3,!1),p=V(o,"isValid",15),h=Te();p(D);let u=K(!1),q=K(""),g=K(void 0),k=K(m({})),z=Ie(()=>{var A;return((A=r().new)==null?void 0:A.length)>6&&r().new===r().verify});const N=Qe().shape({current:De().required(h.account.passwordCurrReq),new:De().required(h.account.passwordNewReq),verify:De().required(h.account.passwordNoMatch)}),G=Qe().shape({new:De().required(h.account.passwordNewReq),verify:De().required(h.account.passwordNoMatch)});Je(async()=>{let A=await Et(),J=await A.json();A.ok?v(g,m(J)):v(q,m(J.message))});async function D(){if(v(q,""),s())try{await G.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(A){return v(k,m(Fe(A))),!1}else try{await N.validate(r(),{abortEarly:!1}),v(k,m({}))}catch(A){return v(k,m(Fe(A))),!1}return e(u)?r().new.length>256?(v(q,"max 256"),!1):r().new!==r().verify?(v(q,m(h.account.passwordNoMatch)),!1):!0:(v(q,m(h.account.passwordPolicyFollow)),!1)}function I(){const A=e(g).length_min>20?e(g).length_min:20;let J=Rt(A,e(g).include_lower_case,e(g).include_upper_case,e(g).include_digits,e(g).include_special);r(r().new=J,!0),r(r().verify=J,!0)}var M=we(),Y=le(M);{var F=A=>{var J=Qr(),C=t(J);cr(C,{t:h,get policy(){return e(g)},get password(){return r().new},get accepted(){return e(u)},set accepted(B){v(u,m(B))}});var R=i(C,2);{var Z=B=>{ga(B,{get error(){return e(k).current},autocomplete:"current-password",get placeholder(){return h.account.passwordCurr},get width(){return o.inputWidth},get value(){return r().current},set value(U){r(r().current=U,!0)},$$events:{input:D},children:(U,T)=>{re();var y=se();w(()=>d(y,h.account.passwordCurr.toUpperCase())),l(U,y)},$$slots:{default:!0}})};j(R,B=>{s()||B(Z)})}var S=i(R,2);ga(S,{get error(){return e(k).new},autocomplete:"new-password",get placeholder(){return h.account.passwordNew},get showCopy(){return e(z)},get width(){return o.inputWidth},get value(){return r().new},set value(B){r(r().new=B,!0)},$$events:{input:D},children:(B,U)=>{re();var T=se();w(()=>d(T,h.account.passwordNew.toUpperCase())),l(B,T)},$$slots:{default:!0}});var Q=i(S,2);ga(Q,{get error(){return e(k).verify},autocomplete:"new-password",get placeholder(){return h.account.passwordConfirm},get showCopy(){return e(z)},get width(){return o.inputWidth},get value(){return r().verify},set value(B){r(r().verify=B,!0)},$$events:{input:D},children:(B,U)=>{re();var T=se();w(()=>d(T,h.account.passwordConfirm.toUpperCase())),l(B,T)},$$slots:{default:!0}});var ee=i(Q,2);Pe(ee,{level:2,get width(){return b()},$$events:{click:I},children:(B,U)=>{re();var T=se();w(()=>d(T,h.account.generateRandom)),l(B,T)},$$slots:{default:!0}});var ae=i(ee,2),ue=t(ae,!0);a(ae),a(J),w(()=>d(ue,e(q))),l(A,J)};j(Y,A=>{e(g)&&A(F)})}return l(O,M),Ae({isPwdValid:D})}var Xr=W('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Zr=W('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),es=W("<div><!></div>"),as=W('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),ts=W('<div class="success svelte-od1aaa">Update successful</div>'),rs=W('<div class="err svelte-od1aaa"> </div>'),ss=W('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),ns=W('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function et(O,o){We(o,!0);let r=V(o,"user",19,()=>({})),b=V(o,"viewModePhone",3,!1),s=Te(),p=Ie(()=>b()?"calc(100vw - 1.5rem)":"300px");const h="13rem";let u=r().account_type,q=K(m([])),g=K(void 0),k=K(!1),z=K(!1),N=K(""),G=K(!1),D=K(void 0),I=K(m({current:"",new:"",verify:""})),M=Ie(()=>e(q).filter(c=>c.user_verified).length>0);Je(()=>{Y()});async function Y(){let c=await Ta(r().id),P=await c.json();c.ok?v(q,m(P)):console.error("error fetching passkeys: "+P.message)}async function F(){let c=await Vt(r().id);if(c.ok)window.location.reload();else{let P=await c.json();console.error("error fetching passkeys: "+P.message)}}async function A(){e(q).length>0?await J():await C()}async function J(){if(!await e(g)()){v(N,m(s.common.invalidInput));return}const c=await Ea(r().id,{purpose:"PasswordNew"});v(D,m(await c.json()))}async function C(c){if(!await e(g)()){v(N,m(s.common.invalidInput));return}v(z,!0);let P={password_new:e(I).new};c?P.mfa_code=c:P.password_current=e(I).current;let n=await Ma(r().id,P);if(n.ok)v(G,!0),v(I,m({})),window.location.reload();else{let _=await n.json();v(N,m(_.message))}v(z,!1)}function R(){v(D,void 0),v(N,m(s.mfa.errorReg))}function Z(c){c&&(v(D,void 0),C(c.code))}async function S(){let c=await Kt({email:r().email});if(c.ok)v(G,!0);else{let P=await c.json();v(N,m(P.message))}}var Q=ns(),ee=t(Q),ae=t(ee);{var ue=c=>{vr(c,{purpose:"PasswordNew",onSuccess:Z,onError:R,get data(){return e(D)},set data(P){v(D,m(P))}})};j(ae,c=>{e(D)&&c(ue)})}var B=i(ae,2);{var U=c=>{var P=Xr(),n=t(P),_=t(n,!0);a(n);var f=i(n,2),E=t(f),te=t(E,!0);a(E),a(f);var ie=i(f,2),he=t(ie,!0);a(ie);var pe=i(ie,2);{var be=ke=>{ia(ke,{check:!0})},ge=ke=>{Pe(ke,{width:h,level:3,$$events:{click:S},children:(qe,$e)=>{re();var L=se();w(()=>d(L,s.account.passwordReset)),l(qe,L)},$$slots:{default:!0}})};j(pe,ke=>{e(G)?ke(be):ke(ge,!1)})}a(P),w(()=>{d(_,s.account.federatedConvertPassword1),d(te,o.authProvider.name||"UNKNOWN"),d(he,s.account.federatedConvertPassword2)}),l(c,P)};j(B,c=>{u==="federated"&&c(U)})}var T=i(B,2);{var y=c=>{var P=Zr(),n=le(P),_=t(n,!0);a(n);var f=i(n,2),E=t(f,!0);a(f);var te=i(f,2),ie=t(te,!0);a(te);var he=i(te,2);Pe(he,{width:h,level:3,$$events:{click:()=>v(k,!0)},children:(pe,be)=>{re();var ge=se();w(()=>d(ge,s.account.convertAccount)),l(pe,ge)},$$slots:{default:!0}}),w(()=>{d(_,s.account.accTypePasskeyText1),d(E,s.account.accTypePasskeyText2),d(ie,s.account.accTypePasskeyText3)}),l(c,P)};j(T,c=>{(u==="passkey"||u==="federated_passkey")&&!e(k)&&c(y)})}var x=i(T,2);{var $=c=>{var P=ss(),n=le(P),_=t(n),f=Ie(()=>!(u==="password"&&e(q).length<1));Yr(_,{btnWidth:h,get inputWidth(){return e(p)},get hideCurrentPassword(){return e(f)},get formValues(){return e(I)},set formValues(L){v(I,m(L))},get isValid(){return e(g)},set isValid(L){v(g,m(L))}});var E=i(_,2),te=t(E);Pe(te,{width:h,level:1,get isLoading(){return e(z)},set isLoading(L){v(z,m(L))},$$events:{click:A},children:(L,ce)=>{re();var ve=se();w(()=>d(ve,s.common.save)),l(L,ve)},$$slots:{default:!0}}),a(E);var ie=i(E,2);{var he=L=>{var ce=es(),ve=t(ce);Pe(ve,{width:h,level:4,$$events:{click:()=>v(k,!1)},children:(ye,de)=>{re();var H=se();w(()=>d(H,s.common.cancel)),l(ye,H)},$$slots:{default:!0}}),a(ce),l(L,ce)};j(ie,L=>{e(k)&&!e(z)&&L(he)})}a(n);var pe=i(n,2);{var be=L=>{var ce=as(),ve=t(ce),ye=t(ve,!0);a(ve);var de=i(ve,2),H=t(de,!0);a(de);var fe=i(de,2);Pe(fe,{width:h,level:3,$$events:{click:F},children:(Re,Le)=>{re();var ze=se();w(()=>d(ze,s.account.convertAccount)),l(Re,ze)},$$slots:{default:!0}}),a(ce),w(()=>{d(ye,s.account.convertAccount),d(H,s.account.convertAccountP1)}),l(L,ce)};j(pe,L=>{!e(k)&&e(M)&&L(be)})}var ge=i(pe,2),ke=t(ge);{var qe=L=>{var ce=ts();Me(3,ce,()=>Ve),l(L,ce)},$e=L=>{var ce=we(),ve=le(ce);{var ye=de=>{var H=rs(),fe=t(H,!0);a(H),w(()=>d(fe,e(N))),Me(3,H,()=>Ve),l(de,H)};j(ve,de=>{e(N)&&de(ye)},!0)}l(L,ce)};j(ke,L=>{e(G)?L(qe):L($e,!1)})}a(ge),Me(1,n,()=>Yt,()=>({duration:350})),l(c,P)};j(x,c=>{(u==="password"||u==="federated_password"||e(k))&&c($)})}a(ee),a(Q),l(O,Q),Ae()}var os=W('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),is=W('<div class="success svelte-naxx27">Update successful</div>'),ls=W('<div class="err svelte-naxx27"> </div>'),cs=W('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function at(O,o){We(o,!0);let r=V(o,"webIdData",15),b=Te();const s="12rem";let p=K(""),h=K(!1),u=K(!!r().custom_triples),q=wa(r().user_id);ba(()=>{e(h)&&setTimeout(()=>{v(h,!1)},3e3)});async function g(){v(p,"");let U=await Ot(r().user_id,r());if(U.ok)v(h,!0);else{let T=await U.json();v(p,m(T.message))}}var k=cs(),z=t(k),N=t(z),G=t(N,!0);a(N);var D=i(N,2),I=t(D);_e(I,"href",q);var M=t(I);Oa(M,()=>q.replace("/auth/","/auth/<wbr/>")),a(I),a(D);var Y=i(D,2),F=i(t(Y),2);Ba(F,{get selected(){return r().expose_email},set selected(U){r(r().expose_email=U,!0)}}),a(Y);var A=i(Y,2),J=t(A),C=t(J,!0);a(J);var R=i(J,2);Ba(R,{get selected(){return e(u)},set selected(U){v(u,m(U))}}),a(A);var Z=i(A,2);{var S=U=>{var T=os(),y=t(T),x=t(y,!0);a(y);var $=i(y,2);St($),_e($,"rows",15),_e($,"cols",40),a(T),w(()=>d(x,b.account.webIdDescData)),ar($,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),Me(3,T,()=>Xt),l(U,T)};j(Z,U=>{e(u)&&U(S)})}var Q=i(Z,2);Pe(Q,{width:s,level:1,$$events:{click:g},children:(U,T)=>{re();var y=se();w(()=>d(y,b.common.save)),l(U,y)},$$slots:{default:!0}});var ee=i(Q,2),ae=t(ee);{var ue=U=>{var T=is();Me(3,T,()=>Ve),l(U,T)},B=U=>{var T=we(),y=le(T);{var x=$=>{var c=ls(),P=t(c,!0);a(c),w(()=>d(P,e(p))),Me(3,c,()=>Ve),l($,c)};j(y,$=>{e(p)&&$(x)},!0)}l(U,T)};j(ae,U=>{e(h)?U(ue):U(B,!1)})}a(ee),a(z),a(k),w(()=>{d(G,b.account.webIdDesc),d(C,b.account.webIdExpertMode)}),l(O,k),Ae()}var vs=W('<div class="container svelte-1nrg3bb"><!></div>');function tt(O,o){We(o,!0);var r=vs(),b=t(r);tr(b,{get userId(){return o.session.user_id}}),a(r),l(O,r),Ae()}var ds=W('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),us=W('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>'),ps=W("<!> <!>",1);function ms(O,o){We(o,!0);const r=nr(),b=()=>or(z,"$op",r);let s=V(o,"session",7),p=V(o,"user",15),h=V(o,"webIdData",15),u=Te(),q=K(void 0),g=K(m([])),k=Ie(()=>{var C;if((C=p().account_type)!=null&&C.startsWith("federated"))return e(g).filter(R=>R.id===p().auth_provider_id)[0]}),z=lr(1,{duration:100}),N=K(m(u.account.navInfo)),G=K(m(u.account.navInfo));function D(){z.set(0).then(()=>v(N,m(e(G)))).then(()=>z.set(1))}let I=Ie(()=>e(q)&&e(q)<500);ba(()=>{e(G)&&D()}),oa(()=>{e(G)===u.account.navLogout&&Bt()});var M=ps(),Y=le(M);dr(Y,{id:Ht,get value(){return e(g)},set value(C){v(g,m(C))}});var F=i(Y,2);{var A=C=>{var R=ds(),Z=t(R);Fa(Z,{absolute:!0,absoluteRight:!0,updateBackend:!0});var S=i(Z,2),Q=t(S),ee=t(Q,!0);a(Q),a(S);var ae=i(S,2),ue=t(ae);Ya(ue,{get selected(){return e(G)},set selected($){v(G,m($))}});var B=i(ue,2),U=t(B),T=t(U);{var y=$=>{Qa($,{get webIdData(){return h()},viewModePhone:!0,get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(c){p(c)}})},x=$=>{var c=we(),P=le(c);{var n=f=>{Xa(f,{viewModePhone:!0,get user(){return p()},set user(E){p(E)}})},_=f=>{var E=we(),te=le(E);{var ie=pe=>{et(pe,{get user(){return p()},get authProvider(){return e(k)},viewModePhone:!0})},he=pe=>{var be=we(),ge=le(be);{var ke=$e=>{Za($e,{get session(){return s()},get user(){return p()}})},qe=$e=>{var L=we(),ce=le(L);{var ve=de=>{at(de,{get webIdData(){return h()},set webIdData(H){h(H)}})},ye=de=>{var H=we(),fe=le(H);{var Re=Le=>{tt(Le,{get session(){return s()},set session(ze){s(ze)}})};j(fe,Le=>{e(N)===u.account.devices&&Le(Re)},!0)}l(de,H)};j(ce,de=>{e(N)==="WebID"?de(ve):de(ye,!1)},!0)}l($e,L)};j(ge,$e=>{e(N)===u.account.navMfa?$e(ke):$e(qe,!1)},!0)}l(pe,be)};j(te,pe=>{e(N)===u.common.password?pe(ie):pe(he,!1)},!0)}l(f,E)};j(P,f=>{e(N)===u.account.navEdit?f(n):f(_,!1)},!0)}l($,c)};j(T,$=>{e(N)===u.account.navInfo?$(y):$(x,!1)})}a(U),a(B),a(ae),a(R),w(()=>{d(ee,u.account.account),_e(U,"style",`opacity: ${b()??""}`)}),l(C,R)},J=C=>{var R=us(),Z=t(R);Fa(Z,{absolute:!0,updateBackend:!0});var S=i(Z,2),Q=t(S),ee=t(Q,!0);a(Q),a(S);var ae=i(S,2),ue=t(ae),B=Ie(()=>!!h());Ya(ue,{get showWebId(){return e(B)},get selected(){return e(G)},set selected(c){v(G,m(c))}});var U=i(ue,2),T=t(U),y=t(T);{var x=c=>{Qa(c,{get webIdData(){return h()},get providers(){return e(g)},get authProvider(){return e(k)},get user(){return p()},set user(P){p(P)}})},$=c=>{var P=we(),n=le(P);{var _=E=>{Xa(E,{get user(){return p()},set user(te){p(te)}})},f=E=>{var te=we(),ie=le(te);{var he=be=>{et(be,{get user(){return p()},get authProvider(){return e(k)}})},pe=be=>{var ge=we(),ke=le(ge);{var qe=L=>{Za(L,{get session(){return s()},get user(){return p()}})},$e=L=>{var ce=we(),ve=le(ce);{var ye=H=>{at(H,{get webIdData(){return h()},set webIdData(fe){h(fe)}})},de=H=>{var fe=we(),Re=le(fe);{var Le=ze=>{tt(ze,{get session(){return s()},set session(la){s(la)}})};j(Re,ze=>{e(N)===u.account.devices&&ze(Le)},!0)}l(H,fe)};j(ve,H=>{e(N)==="WebID"?H(ye):H(de,!1)},!0)}l(L,ce)};j(ke,L=>{e(N)===u.account.navMfa?L(qe):L($e,!1)},!0)}l(be,ge)};j(ie,be=>{e(N)===u.common.password?be(he):be(pe,!1)},!0)}l(E,te)};j(n,E=>{e(N)===u.account.navEdit?E(_):E(f,!1)},!0)}l(c,P)};j(y,c=>{e(N)===u.account.navInfo?c(x):c($,!1)})}a(T),a(U),a(ae),a(R),w(()=>{d(ee,u.account.account),_e(T,"style",`opacity: ${b()??""}`)}),l(C,R)};j(F,C=>{e(I)?C(A):C(J,!1)})}rr("innerWidth",C=>v(q,m(C))),l(O,M),Ae()}function hs(O,o){We(o,!0);let r=Te(),b=K(void 0),s=K(void 0),p=K(void 0),h=K(!1);Je(async()=>{let u=await Gt();if(u.ok){if(v(b,m(await u.json())),!e(b)){console.error("did not receive valid session response");return}u=await Jt(e(b).user_id),u.ok?v(s,m(await u.json())):Ra("account"),u=await Ft(e(b).user_id),u.ok?v(p,m(await u.json())):u.status===404&&v(p,m({user_id:e(b).user_id,is_open:!1})),v(h,!0)}else Ra("account")}),xt(u=>{w(()=>{var q;return _t.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((q=e(s))==null?void 0:q.email)??""}`})}),ur(O,{children:(u,q)=>{pr(u,{children:(g,k)=>{var z=we(),N=le(z);{var G=I=>{Sa(I,{})},D=I=>{var M=we(),Y=le(M);{var F=A=>{ms(A,{get session(){return e(b)},get user(){return e(s)},set user(J){v(s,m(J))},get webIdData(){return e(p)},set webIdData(J){v(p,m(J))}})};j(Y,A=>{e(b)&&e(s)&&A(F)},!0)}l(I,M)};j(N,I=>{e(h)?I(D,!1):I(G)})}l(g,z)},$$slots:{default:!0}})},$$slots:{default:!0}}),Ae()}export{hs as component};
