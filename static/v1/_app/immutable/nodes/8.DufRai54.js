import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.Dn68_YLB.js";import{p as ce,i as u,f as G,t as D,a as de,h as r,s as v,g as a,ap as w,c as l,r as o}from"../chunks/runtime.BsghBUX9.js";import{d as ne,e as me,s as N}from"../chunks/render.CTp9lacC.js";import{i as T}from"../chunks/if.6Ov_EDLa.js";import{e as fe}from"../chunks/each.URXtkKAp.js";import{a as p,t as k,d as j,e as ue}from"../chunks/template.jENAUvUX.js";import{b as he,c as we}from"../chunks/index.G5lyZbma.js";import{p as i}from"../chunks/proxy.YH42NwLs.js";import{o as Ie}from"../chunks/index-client.ClP8y9aT.js";import{r as ge}from"../chunks/legacy-client.DY3VEcT0.js";import{O as xe,P as $e}from"../chunks/Pagination.C52gIDzw.js";import{g as ke,p as ye,d as be}from"../chunks/OptionSelect.Cn2sqgid.js";import{B as H}from"../chunks/Button.CHwcFOJ-.js";import{c as Pe,a as Se,I as J}from"../chunks/Input.B4ccwD4n.js";import{z as Ee,A as Oe,n as De,j as Ne}from"../chunks/helpers.CBl6QeM5.js";import{I as je}from"../chunks/IconStop.CCiFcogG.js";import{T as Ae}from"../chunks/Tooltip.D8Tbt6Nb.js";var Be=k('<div class="addNewInputs svelte-1fhw572"><!> <!> <div class="saveBtn svelte-1fhw572"><!></div> <div class="err svelte-1fhw572"> </div></div>'),_e=k('<div class="svelte-1fhw572">No blacklisted IPs</div>'),qe=(y,A,b)=>A(a(b).ip),Ce=k('<div role="button" tabindex="0" class="delete svelte-1fhw572"><!></div>'),Le=k('<div class="blacklisted svelte-1fhw572"><div class="ip svelte-1fhw572"> </div> <div class="exp svelte-1fhw572"> </div> <!></div>'),Te=k(' <div class="content"><div class="top svelte-1fhw572"><!> <div class="addNew svelte-1fhw572"><!></div></div> <!> <div id="blacklist" class="svelte-1fhw572"><!></div> <!> <div style="height: 20px"></div></div>',1);function Ve(y,A){ce(A,!0);let b=u(""),I=u(""),P=u(i([])),S=u(i([])),B=u(i([])),g=u(!1),c=i({ip:"",exp:""}),E=u(i({}));const M=Pe().shape({ip:Se().required("IP is required").matches(Ee,"Invalid IPv4")}),Q=new Date().toISOString().split(".")[0],W=[{label:"IP",callback:(e,t)=>e.ip.includes(t)}];let Y=[{label:"IP",callback:(e,t)=>e.ip.localeCompare(t.ip)}];ge(()=>{a(g)&&(r(I,""),c.exp=new Date().toISOString().split(".")[0])}),Ie(()=>{_()});async function _(){let e=await ke(),t=await e.json();e.ok?r(P,i(t.ips)):r(b,i(t.message))}async function Z(){if(r(I,""),!await ee())return;let e=Oe(c.exp);if(!e){r(I,"Invalid Date Input: User Expires");return}let t={ip:c.ip,exp:e},d=await ye(t);if(d.ok)r(g,!1),c.ip="",await _();else{let n=await d.json();r(I,i(n.message))}}async function V(e){(await be(e)).ok&&await _()}async function ee(){try{return await M.validate(c,{abortEarly:!1}),r(E,i({})),!0}catch(e){return r(E,i(De(e))),!1}}w();var z=Te(),F=G(z),K=v(F),q=l(K),R=l(q);xe(R,{get items(){return a(P)},searchOptions:W,orderOptions:Y,get resItems(){return a(S)},set resItems(e){r(S,i(e))}});var U=v(R,2),te=l(U);H(te,{level:3,$$events:{click:()=>r(g,!a(g))},children:(e,t)=>{w();var d=j("BLACKLIST IP");p(e,d)},$$slots:{default:!0}}),o(U),o(q);var X=v(q,2);{var ae=e=>{var t=Be(),d=l(t);J(d,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return c.ip},set value(s){c.ip=s},get error(){return a(E).ip},set error(s){a(E).ip=s},children:(s,O)=>{w();var f=j("IP");p(s,f)},$$slots:{default:!0}});var n=v(d,2);J(n,{type:"datetime-local",step:"60",width:"18rem",min:Q,max:"2099-01-01T00:00",get value(){return c.exp},set value(s){c.exp=s},children:(s,O)=>{w();var f=j("EXPIRES");p(s,f)},$$slots:{default:!0}});var m=v(n,2),x=l(m);H(x,{level:1,$$events:{click:Z},children:(s,O)=>{w();var f=j("SAVE");p(s,f)},$$slots:{default:!0}}),o(m);var h=v(m,2),L=l(h,!0);o(h),o(t),D(()=>N(L,a(I))),he(3,t,()=>we),p(e,t)};T(X,e=>{a(g)&&e(ae)})}var C=v(X,2),se=l(C);{var re=e=>{var t=_e();p(e,t)},ie=e=>{var t=ue(),d=G(t);fe(d,17,()=>a(B),n=>n.ip,(n,m)=>{var x=Le(),h=l(x),L=l(h,!0);o(h);var s=v(h,2),O=l(s,!0);D(()=>N(O,Ne(a(m).exp))),o(s);var f=v(s,2);Ae(f,{text:"Delete IP",children:(ve,Fe)=>{var $=Ce();$.__click=[qe,V,m];var pe=l($);je(pe,{color:"var(--col-err)"}),o($),me("keypress",$,()=>V(a(m).ip)),p(ve,$)},$$slots:{default:!0}}),o(x),D(()=>N(L,a(m).ip)),p(n,x)}),p(e,t)};T(se,e=>{a(P).length===0?e(re):e(ie,!1)})}o(C);var le=v(C,2);{var oe=e=>{$e(e,{get items(){return a(S)},set items(t){r(S,i(t))},get resItems(){return a(B)},set resItems(t){r(B,i(t))}})};T(le,e=>{a(P).length>0&&e(oe)})}w(2),o(K),D(()=>N(F,`${a(b)??""} `)),p(y,z),de()}ne(["click"]);function ze(y){Ve(y,{})}export{ze as component};
