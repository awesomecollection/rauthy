import"../chunks/disclose-version.C0dpEWi_.js";import"../chunks/legacy.6NChWQ7B.js";import{p as r,o as c,a as p,$ as d}from"../chunks/index-client.LkyNpeLM.js";import{h as m}from"../chunks/render.D21ACvZ4.js";import{i as f}from"../chunks/lifecycle.DMuwUPzm.js";import{L as _}from"../chunks/Loading.CZYfBo5y.js";import{g as h,C as w,a as l,b as u,s as k,c as g,d as v,e as L,f as R,R as b,h as j}from"../chunks/dataFetching.C4rEqQY1.js";function y(i,n){r(n,!1),c(async()=>{const a=h(),t=new URLSearchParams;let o=b;a.state&&(a.state==="account"?o=j:a.state.startsWith("device")&&(o=`/auth/v1/${a.state}`)),t.append("grant_type","authorization_code"),t.append("code",a.code),t.append("redirect_uri",o),t.append("client_id",w),t.append("code_verifier",l());let s=await u(t),e=await s.json();k(e.access_token),g(e.id_token),s=await v(e.access_token),e=await s.json(),L(e.csrf_token),R(),window.location.href=o}),f(),m(a=>{d.title="Login"}),_(i,{}),p()}export{y as component};
