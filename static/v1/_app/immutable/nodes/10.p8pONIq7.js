import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DtyiMpWz.js";import{c as v,r as i,s as l,g as e,t as Y,p as le,aJ as At,h as s,a as se,i as C,f as de,F as ft,aN as mt,ao as Ce,aq as j,ar as Nt}from"../chunks/index-client.DAoU_hDn.js";import{s as ce,d as jt,e as lt}from"../chunks/render.mNhspeV3.js";import{e as bt,i as Dt}from"../chunks/each.DTG73tix.js";import{a as n,t as R,e as xe,d as D}from"../chunks/template.DcxtE4ym.js";import{p as u}from"../chunks/proxy.D3ASEzk3.js";import{T as ra,U as la,V as sa,W as ia,X as va,Y as oa,Z as ca,_ as na,$ as da,a0 as ua,a1 as pa,x as ga}from"../chunks/dataFetchingAdmin.D7RWqeRL.js";import{d as Bt,e as ha}from"../chunks/admin.D1fpipkw.js";import{i as P}from"../chunks/if.BANCODOf.js";import{t as ne,f as fa,s as T,a as ue}from"../chunks/index.DER1jHiU.js";import{p as G,c as Ut,r as yt}from"../chunks/props.VJ8UyA45.js";import{E as Mt}from"../chunks/ExpandContainer.mM6ZiTQe.js";import{O as Wt,T as Pt}from"../chunks/OptionSelect.CBlj_bre.js";import{T as ma}from"../chunks/TabBar.BqcS880p.js";import{r as ye}from"../chunks/legacy-client.rYJ80fHr.js";import{I as K,c as $t,a as J,b as ba}from"../chunks/Input.C04-Kl2S.js";import{ac as ya,ad as $a,$ as qt,n as Ke,ae as wa,af as Ia,ag as Gt,o as wt,ah as ie,ai as _a}from"../chunks/helpers.BV-akmwW.js";import{S as Xe,P as ka,b as za,a as Ea}from"../chunks/PasswordInput.JBBIMWuW.js";import{I as Ft}from"../chunks/ItemTiles.DxajBUfv.js";import{B as Se,L as Ca}from"../chunks/Button.CKHLXer8.js";import{s as It}from"../chunks/snippet.DHnbbgSs.js";import{g as st}from"../chunks/helpers.mrWtKrwW.js";import{r as ae,s as Vt,d as xa}from"../chunks/class.DWa3OhYO.js";import{b as ve}from"../chunks/input.CNTnF6Qx.js";import{I as Sa}from"../chunks/ImageUploadRaw.BJmDAa-L.js";import{O as Ra,P as Ta}from"../chunks/Pagination.DF9sn7Vj.js";var La=R('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),Oa=R('<div class="list svelte-f2hz2l"></div>');function Zt(B,c){let t=G(c,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var f=Oa();bt(f,21,t,Dt,(p,m,k)=>{var $=La(),L=v($),g=v(L,!0);i(L);var a=l(L,2);Xe(a,{get selected(){return e(m).value},set selected(z){e(m).value=z}}),i($),Y(()=>ce(g,e(m).label)),n(p,$)}),i(f),n(B,f)}var Aa=R("<div><!></div>");function Na(B,c){le(c,!0);let t=G(c,"validation",19,()=>({})),f=G(c,"value",15),p=G(c,"autocomplete",11,"on"),m=G(c,"validate",15),k=yt(c,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);m(z);let $=C("");const L=At();async function g(){await mt(),L("input",!0),z()}async function a(){L("blur",!0),z()}function z(){var y;return s($,""),f()&&((y=t())!=null&&y.regex)&&!f().match(t().regex)?(s($,u(t().errMsg||"Invalid input")),!1):!0}var _=Aa(),S=v(_);return K(S,Ut({get width(){return c.width},get name(){return c.name},get autocomplete(){return p()}},()=>k,{get value(){return f()},set value(y){f(y)},get error(){return e($)},set error(y){s($,u(y))},$$events:{input:g,blur:a},children:(y,w)=>{var d=xe(),x=de(d);It(x,()=>c.children??ft),n(y,d)},$$slots:{default:!0}})),i(_),ne(7,_,()=>fa,()=>({duration:200})),n(B,_),se({validateValue:z})}var ja=R('<div class="err svelte-nzivgu"> </div>'),Da=R('<div class="container svelte-nzivgu"><!> <!></div>');function Re(B,c){le(c,!0);let t=G(c,"validation",27,()=>u({required:!1,regex:void 0,errMsg:""})),f=G(c,"values",15),p=G(c,"validate",15),m=G(c,"width",3,"260px"),k=G(c,"optional",3,!1),$=G(c,"autocomplete",15,"on"),L=yt(c,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);p(y);let g=C(""),a=C(u([]));const z=At();Ce(()=>{f()||f([]);for(let b of f())e(a).push({name:st(),value:b});e(a).push({name:st(),value:""})});async function _(){await mt(),e(a)[e(a).length-1].value?e(a).push({name:st(),value:""}):e(a).length>1&&!e(a)[e(a).length-2].value&&s(a,u([...e(a).slice(0,e(a).length-1)])),z("input",!0),y(),f(S())}function S(){y();let b=[];for(let A=0;A<e(a).length-1;A++)b.push(e(a)[A].value);return b}function y(){if(t().required&&e(a).length===1&&!e(a)[0].value)return k()?!0:(s(g,"Required"),!1);let b=!0;for(let A of e(a))A.value&&!A.validate()&&(b=!1);return b}var w=Da(),d=v(w);bt(d,17,()=>e(a),Dt,(b,A,W)=>{Na(b,Ut({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(A).name}},()=>L,{get value(){return e(A).value},set value(U){e(A).value=U},get validate(){return e(A).validate},set validate(U){e(A).validate=U},get autocomplete(){return $()},set autocomplete(U){$(U)},$$events:{input:_,blur:_},children:(U,Q)=>{var X=xe(),te=de(X);It(te,()=>c.children??ft),n(U,X)},$$slots:{default:!0}}))});var x=l(d,2);{var N=b=>{var A=ja(),W=v(A,!0);i(A),Y(()=>ce(W,e(g))),n(b,A)};P(x,b=>{e(g)&&b(N)})}return i(w),Y(()=>T(w,"width",m())),n(B,w),se({getValues:S,validateValues:y})}var Ba=R('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),Ua=R(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),Ma=R('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),Wa=R('<div class="success svelte-1pba61y">Success</div>'),Pa=R('<div class="mainErr err svelte-1pba61y"> </div>'),qa=R(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function Ga(B,c){le(c,!0);let t=G(c,"client",31,()=>u({}));const f="350px";let p=C(""),m=C(!1),k=C(void 0),$=u(ya.map(o=>{var O,M;return o.label==="device_code"?o.value=(O=t().flows_enabled)==null?void 0:O.includes("urn:ietf:params:oauth:grant-type:device_code"):o.value=(M=t().flows_enabled)==null?void 0:M.includes(o.label),o})),L=C(void 0);Bt.subscribe(o=>{s(L,u(o))});let g=u($a.map(o=>{var O;return o.value=(O=t().challenges)==null?void 0:O.includes(o.label),o})),a=C(void 0),z=C(void 0),_=C(void 0),S=C(void 0);Ce(()=>()=>clearTimeout(e(k)));let y=C(u({}));const w=$t().shape({name:J().trim().matches(qt,"Can only contain characters, numbers and '-'"),client_uri:J().trim().nullable().matches(Ke,"Invalid URI"),access_token_lifetime:ba().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function d(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function x(o){o.code==="Enter"&&N()}async function N(){s(p,"");const o=await b();if(!e(z)()){s(p,"Invalid Allowed Origin");return}if(!e(_)()){s(p,"Invalid Redirect URIs");return}if(!e(S)()){s(p,"Invalid Post Logout URIs");return}if(!e(a)()){s(p,"Invalid Contacts");return}if(!o){s(p,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=$.filter(H=>H.value).map(H=>H.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":H.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){s(p,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){s(p,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){s(p,"At least one flow must be enabled");return}let O=t();t(t().challenges=g.filter(H=>H.value).map(H=>H.label),!0),t().challenges.length===0&&(O.challenges=null),O.name||(O.name=void 0),O.allowed_origins.length>0&&!O.allowed_origins[0]&&(O.allowed_origins=[]);let M=await ra(O);if(M.ok)s(m,!0);else{let H=await M.json();s(p,u(H.message))}}async function b(){try{return await w.validate(t(),{abortEarly:!1}),s(y,u({})),!0}catch(o){return s(y,u(wt(o))),!1}}ye(()=>{t().id&&d()}),ye(()=>{e(m)&&s(k,u(setTimeout(()=>{s(m,!1),c.onSave()},3e3)))});var A=qa(),W=v(A),U=l(v(W),2),Q=v(U,!0);i(U),i(W);var X=l(W,4);K(X,{autocomplete:"off",placeholder:"Client Name",width:f,get value(){return t().name},set value(o){t(t().name=o,!0)},get error(){return e(y).name},set error(o){e(y).name=o},$$events:{keypress:x,input:b},children:(o,O)=>{j();var M=D("CLIENT NAME");n(o,M)},$$slots:{default:!0}});var te=l(X,4);K(te,{autocomplete:"off",placeholder:"Client URI",width:f,get value(){return t().client_uri},set value(o){t(t().client_uri=o,!0)},get error(){return e(y).client_uri},set error(o){e(y).client_uri=o},$$events:{keypress:x,input:b},children:(o,O)=>{j();var M=D("CLIENT URI");n(o,M)},$$slots:{default:!0}});var ee=l(te,2);Re(ee,{style:`width: ${f}`,validation:{required:!1,regex:wa,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(o){t(t().contacts=o,!0)},get validate(){return e(a)},set validate(o){s(a,u(o))},children:(o,O)=>{j();var M=D("CONTACT");n(o,M)},$$slots:{default:!0}});var Z=l(ee,4);T(Z,"margin-top","-5px");var F=v(Z);T(F,"width","138px");var I=l(v(F),2),h=v(I);Xe(h,{get selected(){return t().enabled},set selected(o){t(t().enabled=o,!0)}}),i(I),i(F);var E=l(F,2);T(E,"width","110px");var V=l(v(E),2),pe=v(V);Xe(pe,{get selected(){return t().confidential},set selected(o){t(t().confidential=o,!0)}}),i(V),i(E),i(Z);var re=l(Z,2),Te=l(v(re),2),Le=v(Te);Zt(Le,{get options(){return $}}),i(Te),i(re);var Oe=l(re,2),$e=l(v(Oe),2),Ye=v($e);Xe(Ye,{get selected(){return t().force_mfa},set selected(o){t(t().force_mfa=o,!0)}}),i($e),i(Oe);var Ae=l(Oe,2);{var Ne=o=>{var O=Ba();T(O,"margin","-10px 0 -15px 5px");var M=v(O),H=v(M);T(H,"color","var(--col-err)"),j(7),i(M),i(O),n(o,O)},it=o=>{var O=xe(),M=de(O);{var H=be=>{var he=Ua();T(he,"margin","-10px 0 -15px 5px");var Ve=v(he),Ze=v(Ve);T(Ze,"color","var(--col-err)"),j(5),i(Ve),i(he),ne(3,he,()=>ue),n(be,he)};P(M,be=>{t().force_mfa&&be(H)},!0)}n(o,O)};P(Ae,o=>{t().id==="rauthy"?o(Ne):o(it,!1)})}var ge=l(Ae,6);T(ge,"margin-top","-10px");var He=l(v(ge),2);Ft(He,{get options(){return e(L)},searchThreshold:4,get items(){return t().scopes},set items(o){t(t().scopes=o,!0)}}),i(ge);var fe=l(ge,2);T(fe,"margin-top","-3px");var je=l(v(fe),2);Ft(je,{get options(){return e(L)},searchThreshold:4,get items(){return t().default_scopes},set items(o){t(t().default_scopes=o,!0)}}),i(fe);var Je=l(fe,4);Re(Je,{style:`width: ${f}`,validation:{required:!0,regex:Ia,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(o){t(t().allowed_origins=o,!0)},get validate(){return e(z)},set validate(o){s(z,u(o))},children:(o,O)=>{j();var M=D("ALLOWED ORIGIN");n(o,M)},$$slots:{default:!0}});var we=l(Je,4);Re(we,{style:`width: ${f}`,validation:{required:!0,regex:Ke,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(o){t(t().redirect_uris=o,!0)},get validate(){return e(_)},set validate(o){s(_,u(o))},children:(o,O)=>{j();var M=D("REDIRECT URI");n(o,M)},$$slots:{default:!0}});var De=l(we,4);Re(De,{style:`width: ${f}`,validation:{required:!0,regex:Ke,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(o){t(t().post_logout_redirect_uris=o,!0)},get validate(){return e(S)},set validate(o){s(S,u(o))},children:(o,O)=>{j();var M=D("POST LOGOUT REDIRECT URI");n(o,M)},$$slots:{default:!0}});var Be=l(De,6);K(Be,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:f,get value(){return t().access_token_lifetime},set value(o){t(t().access_token_lifetime=o,!0)},get error(){return e(y).access_token_lifetime},set error(o){e(y).access_token_lifetime=o},$$events:{input:b},children:(o,O)=>{j();var M=D("ACCESS TOKEN LIFETIME");n(o,M)},$$slots:{default:!0}});var me=l(Be,2),Ie=v(me);T(Ie,"width","220px");var _e=l(v(Ie),2),Qe=v(_e);Wt(Qe,{options:Gt,get value(){return t().access_token_alg},set value(o){t(t().access_token_alg=o,!0)}}),i(_e),i(Ie);var Ue=l(Ie,2),ke=v(Ue);T(ke,"text-align","right");var et=l(ke,2),Me=v(et);Wt(Me,{options:Gt,get value(){return t().id_token_alg},set value(o){t(t().id_token_alg=o,!0)}}),i(et),i(Ue),i(me);var ze=l(me,6),We=l(v(ze),2),Pe=v(We);Zt(Pe,{get options(){return g}}),i(We),i(ze);var qe=l(ze,2),Ge=v(qe);{var tt=o=>{var O=Ma();j(4),n(o,O)};P(Ge,o=>{t().id==="rauthy"&&o(tt)})}i(qe);var Fe=l(qe,2);Se(Fe,{level:1,width:"4rem",$$events:{click:N},children:(o,O)=>{j();var M=D("SAVE");n(o,M)},$$slots:{default:!0}});var Ee=l(Fe,2);{var vt=o=>{var O=Wa();n(o,O)};P(Ee,o=>{e(m)&&o(vt)})}var at=l(Ee,2);{var rt=o=>{var O=Pa(),M=v(O,!0);i(O),Y(()=>ce(M,e(p))),n(o,O)};P(at,o=>{e(p)&&o(rt)})}i(A),Y(()=>ce(Q,t().id)),n(B,A),se()}var Fa=R('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function Va(B,c){le(c,!0);let t=C(""),f=C("");Ce(()=>{p()});async function p(){let S=await la(c.client.id),y=await S.json();S.ok?s(f,u(y.secret)):s(t,u(y.message))}async function m(){let S=await sa(c.client.id),y=await S.json();S.ok?await p():s(t,u(y.message))}var k=Fa(),$=v(k),L=v($,!0);i($);var g=l($,2),a=v(g);{var z=S=>{ka(S,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(f)},set value(y){s(f,u(y))},children:(y,w)=>{j();var d=D("CLIENT SECRET");n(y,d)},$$slots:{default:!0}})};P(a,S=>{e(f)&&S(z)})}i(g);var _=l(g,2);Se(_,{level:1,$$events:{click:m},children:(S,y)=>{j();var w=D("GENERATE NEW");n(S,w)},$$slots:{default:!0}}),i(k),Y(()=>ce(L,e(t))),n(B,k),se()}var Za=R('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),Ka=R('<div class="err svelte-1jljqe9"> </div>'),Xa=R('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),Ya=R('<div class="container svelte-1jljqe9"><!></div>');function Ha(B,c){le(c,!0);let t=G(c,"client",19,()=>({})),f=C(!1),p=C("");async function m(){s(p,""),s(f,!0);let a=await ia(t().id);if(a.ok)c.onSave();else{let z=await a.json();s(p,u(z.message))}s(f,!1)}var k=Ya(),$=v(k);{var L=a=>{var z=Za();n(a,z)},g=a=>{var z=Xa(),_=l(de(z),2);Se(_,{level:1,get isLoading(){return e(f)},set isLoading(w){s(f,u(w))},$$events:{click:m},children:(w,d)=>{j();var x=D("DELETE");n(w,x)},$$slots:{default:!0}});var S=l(_,2);{var y=w=>{var d=Ka(),x=v(d,!0);i(d),Y(()=>ce(x,e(p))),n(w,d)};P(S,w=>{e(p)&&w(y)})}n(a,z)};P($,a=>{t().id==="rauthy"?a(L):a(g,!1)})}i(k),n(B,k),se()}var Ja=(B,c)=>s(c,!0),Qa=R('<div class="load svelte-icxpvn"><!></div>'),er=R('<div class="txt svelte-icxpvn">LOAD</div>'),tr=R('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function _t(B,c){le(c,!0);let t=C(!1),f=C(!1),p=C(void 0),m=C(void 0),k=C(void 0),$=C(void 0),L=C(void 0),g=C("white");Nt(()=>{clearTimeout(e(L))});function a(){switch(c.level){case 1:s(p,u(c.colors.act1)),s(m,u(c.colors.act1a)),s(k,"white"),s($,`1px solid ${c.colors.gmid}`);break;case 2:s(p,u(c.colors.act2)),s(m,u(c.colors.act2a)),s(k,u(c.colors.ghigh)),s($,`1px solid ${c.colors.gmid}`);break;default:s(p,u(c.colors.ghigh)),s(m,"white"),s(k,u(c.colors.act2a)),s($,`1px solid ${c.colors.act2a}`),s(g,u(c.colors.acnt))}}ye(()=>{e(f)&&s(L,u(setTimeout(()=>{s(f,!1)},2e3)))}),ye(()=>{c.colors&&a()});var z=tr(),_=v(z);_.__click=[Ja,f],T(_,"width","100px");var S=v(_);{var y=d=>{var x=Qa(),N=v(x);Ca(N,{background:!1,get color(){return e(g)}}),i(x),n(d,x)},w=d=>{var x=er();n(d,x)};P(S,d=>{e(f)?d(y):d(w,!1)})}i(_),i(z),Y(()=>{T(_,"border",e($)),T(_,"box-shadow",`1px 1px 2px ${c.colors.gmid??""}`),T(_,"cursor",e(f)?"default":"pointer"),T(_,"color",e(k)),T(_,"background",e(t)?e(m):e(p))}),lt("focus",_,()=>s(t,!0)),lt("blur",_,()=>s(t,!1)),lt("keypress",_,()=>s(f,!0)),n(B,z),se()}jt(["click"]);var ar=R('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),rr=R('<div class="err font-label svelte-115vejc"> </div>'),lr=R('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function Kt(B,c){le(c,!0);let t=G(c,"colors",19,()=>({})),f=G(c,"error",3,""),p=G(c,"name",3,""),m=G(c,"password",3,!1),k=G(c,"value",3,""),$=G(c,"width",3,"250px"),L=yt(c,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),g=C(u(m()?"new-password":"text")),a=C(!1),z=C(!1);function _(){e(g)==="password"?s(g,"text"):s(g,"password")}var S=lr(),y=v(S),w=v(y),d=v(w),x=v(d);It(x,()=>c.children??ft),i(d),i(w),i(y);var N=l(y,2);ae(N);var b=()=>s(a,!0),A=()=>s(a,!1),W=()=>s(z,!0),U=()=>s(z,!1);let Q;var X=l(N,2);{var te=F=>{var I=ar(),h=v(I);h.__click=_;var E=v(h);{var V=re=>{za(re,{width:22,get color(){return t().err}})},pe=re=>{Ea(re,{width:22,get color(){return t().ok}})};P(E,re=>{e(g)==="password"?re(V):re(pe,!1)})}i(h),i(I),lt("keypress",h,_),n(F,I)};P(X,F=>{m()&&F(te)})}var ee=l(X,2);{var Z=F=>{var I=rr(),h=v(I,!0);i(I),Y(()=>{T(I,"width",$()),T(I,"color",t().err),ce(h,f())}),ne(7,I,()=>ue,()=>({duration:250})),n(F,I)};P(ee,F=>{f()&&F(Z)})}i(S),Y(()=>{T(S,"width",`calc(${$()??""} + 12px)`),T(w,"background",t().bg),Vt(d,"for",p()),Q=xa(N,Q,{type:e(g),onmouseenter:b,onmouseleave:A,onfocus:W,onblur:U,autocomplete:"off",name:p(),value:k(),...L},"svelte-115vejc"),T(N,"width",$()),T(N,"background",(e(a)||e(z),t().bg)),T(N,"border",e(z)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),T(N,"color",t().text),T(N,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),n(B,S),se()}jt(["click"]);var sr=R('<img alt="No Logo Available">');function Xt(B,c){le(c,!0);var t=sr();Y(()=>Vt(t,"src",`/auth/v1/clients/${c.clientId}/logo?${st(6)}`)),n(B,t),se()}var ir=R('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function vr(B,c){le(c,!0);let t="This is an E-Mail error",f="This is a password error";var p=ir(),m=l(de(p),2),k=v(m),$=v(k),L=v($);{var g=d=>{Xt(d,{get clientId(){return c.clientId}})};P(L,d=>{c.isLoading||d(g)})}i($),i(k);var a=l(k,4);Kt(a,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return c.colors},children:(d,x)=>{j();var N=D("E-MAIL");n(d,N)},$$slots:{default:!0}});var z=l(a,2);Kt(z,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return f},get colors(){return c.colors},children:(d,x)=>{j();var N=D("E-MAIL");n(d,N)},$$slots:{default:!0}});var _=l(z,2),S=v(_);_t(S,{get colors(){return c.colors},level:1});var y=l(S,2);_t(y,{get colors(){return c.colors},level:2});var w=l(y,2);_t(w,{get colors(){return c.colors},level:3}),i(_),i(m),Y(()=>{T(m,"color",c.colors.text),T(m,"border",`1px solid ${c.colors.gmid??""}`),T(m,"background",c.colors.bg)}),n(B,p),se()}var or=R('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),cr=R('<div class="preview svelte-11vvvzr"><!></div>'),nr=R('<div class="success svelte-11vvvzr">Success</div>'),dr=R('<div class="err svelte-11vvvzr"> </div>'),ur=R(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function pr(B,c){le(c,!0);let t=G(c,"client",19,()=>({})),f=C(void 0),p=C(void 0),m=C(!1),k=C(""),$=C(!1),L=C(void 0),g=C(u({})),a=C(u({}));const z=$t().shape({act1:J().trim().matches(ie,"only valid CSS color"),act1a:J().trim().matches(ie,"only valid CSS color"),act2:J().trim().matches(ie,"only valid CSS color"),act2a:J().trim().matches(ie,"only valid CSS color"),acnt:J().trim().matches(ie,"only valid CSS color"),acnta:J().trim().matches(ie,"only valid CSS color"),ok:J().trim().matches(ie,"only valid CSS color"),err:J().trim().matches(ie,"only valid CSS color"),glow:J().trim().matches(ie,"only valid CSS color"),gmid:J().trim().matches(ie,"only valid CSS color"),ghigh:J().trim().matches(ie,"only valid CSS color"),text:J().trim().matches(ie,"only valid CSS color"),bg:J().trim().matches(ie,"only valid CSS color")});Ce(async()=>{await _()}),Nt(()=>{e(L)&&clearTimeout(e(L))});async function _(){let h=await va(t().id);if(h.ok){let E=await h.json();s(f,u(E)),s(a,u(E))}else{let E=await h.json();s(k,u(E.message))}}async function S(){if(s(k,""),s(m,!0),!await d())return;let h=await oa(t().id,e(a));if(h.ok)s($,!0);else{let E=await h.json();s(k,u(E.message))}s(m,!1)}async function y(){s(k,""),s(m,!0);let h=await ca(t().id);if(h.ok)await na(t().id),await _(),s($,!0);else{let E=await h.json();s(k,u(E.message))}s(m,!1)}async function w(h){s(m,!0),await mt();let E=await da(t().id,h);if(!E.ok){let V=await E.json();console.error(V.message)}s(m,!1)}async function d(){try{await z.validate(e(a),{abortEarly:!1}),s(g,u({}))}catch(h){return s(g,u(wt(h))),!1}return s(f,u(e(a))),!0}ye(()=>{e($)&&s(L,u(setTimeout(()=>{s($,!1)},3e3)))}),ye(()=>{e(p)&&w(e(p))});var x=ur(),N=l(v(x),2),b=v(N);{var A=h=>{var E=or(),V=de(E),pe=v(V),re=v(pe);K(re,{autocomplete:"off",placeholder:"act1",get value(){return e(a).act1},set value(r){e(a).act1=r},get error(){return e(g).act1},set error(r){e(g).act1=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("act1");n(r,q)},$$slots:{default:!0}});var Te=l(re,2),Le=v(Te);ae(Le);var Oe=l(Le,2);i(Te),i(pe);var $e=l(pe,2),Ye=v($e);K(Ye,{autocomplete:"off",placeholder:"act1a",get value(){return e(a).act1a},set value(r){e(a).act1a=r},get error(){return e(g).act1a},set error(r){e(g).act1a=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("act1a");n(r,q)},$$slots:{default:!0}});var Ae=l(Ye,2),Ne=v(Ae);ae(Ne);var it=l(Ne,2);i(Ae),i($e);var ge=l($e,2),He=v(ge);K(He,{autocomplete:"off",placeholder:"act2",get value(){return e(a).act2},set value(r){e(a).act2=r},get error(){return e(g).act2},set error(r){e(g).act2=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("act2");n(r,q)},$$slots:{default:!0}});var fe=l(He,2),je=v(fe);ae(je);var Je=l(je,2);i(fe),i(ge);var we=l(ge,2),De=v(we);K(De,{autocomplete:"off",placeholder:"act2a",get value(){return e(a).act2a},set value(r){e(a).act2a=r},get error(){return e(g).act2a},set error(r){e(g).act2a=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("act2a");n(r,q)},$$slots:{default:!0}});var Be=l(De,2),me=v(Be);ae(me);var Ie=l(me,2);i(Be),i(we);var _e=l(we,2),Qe=v(_e);K(Qe,{autocomplete:"off",placeholder:"acnt",get value(){return e(a).acnt},set value(r){e(a).acnt=r},get error(){return e(g).acnt},set error(r){e(g).acnt=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("acnt");n(r,q)},$$slots:{default:!0}});var Ue=l(Qe,2),ke=v(Ue);ae(ke);var et=l(ke,2);i(Ue),i(_e);var Me=l(_e,2),ze=v(Me);K(ze,{autocomplete:"off",placeholder:"acnta",get value(){return e(a).acnta},set value(r){e(a).acnta=r},get error(){return e(g).acnta},set error(r){e(g).acnta=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("acnta");n(r,q)},$$slots:{default:!0}});var We=l(ze,2),Pe=v(We);ae(Pe);var qe=l(Pe,2);i(We),i(Me);var Ge=l(Me,2),tt=v(Ge);K(tt,{autocomplete:"off",placeholder:"ok",get value(){return e(a).ok},set value(r){e(a).ok=r},get error(){return e(g).ok},set error(r){e(g).ok=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("ok");n(r,q)},$$slots:{default:!0}});var Fe=l(tt,2),Ee=v(Fe);ae(Ee);var vt=l(Ee,2);i(Fe),i(Ge);var at=l(Ge,2),rt=v(at);K(rt,{autocomplete:"off",placeholder:"err",get value(){return e(a).err},set value(r){e(a).err=r},get error(){return e(g).err},set error(r){e(g).err=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("err");n(r,q)},$$slots:{default:!0}});var o=l(rt,2),O=v(o);ae(O);var M=l(O,2);i(o),i(at),i(V);var H=l(V,2),be=v(H),he=v(be);K(he,{autocomplete:"off",placeholder:"glow",get value(){return e(a).glow},set value(r){e(a).glow=r},get error(){return e(g).glow},set error(r){e(g).glow=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("glow");n(r,q)},$$slots:{default:!0}});var Ve=l(he,2),Ze=v(Ve);ae(Ze);var Yt=l(Ze,2);i(Ve),i(be);var ot=l(be,2),kt=v(ot);K(kt,{autocomplete:"off",placeholder:"gmid",get value(){return e(a).gmid},set value(r){e(a).gmid=r},get error(){return e(g).gmid},set error(r){e(g).gmid=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("gmid");n(r,q)},$$slots:{default:!0}});var zt=l(kt,2),ct=v(zt);ae(ct);var Ht=l(ct,2);i(zt),i(ot);var nt=l(ot,2),Et=v(nt);K(Et,{autocomplete:"off",placeholder:"ghigh",get value(){return e(a).ghigh},set value(r){e(a).ghigh=r},get error(){return e(g).ghigh},set error(r){e(g).ghigh=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("ghigh");n(r,q)},$$slots:{default:!0}});var Ct=l(Et,2),dt=v(Ct);ae(dt);var Jt=l(dt,2);i(Ct),i(nt);var ut=l(nt,2),xt=v(ut);K(xt,{autocomplete:"off",placeholder:"text",get value(){return e(a).text},set value(r){e(a).text=r},get error(){return e(g).text},set error(r){e(g).text=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("text");n(r,q)},$$slots:{default:!0}});var St=l(xt,2),pt=v(St);ae(pt);var Qt=l(pt,2);i(St),i(ut);var gt=l(ut,2),Rt=v(gt);K(Rt,{autocomplete:"off",placeholder:"bg",get value(){return e(a).bg},set value(r){e(a).bg=r},get error(){return e(g).bg},set error(r){e(g).bg=r},$$events:{input:d},children:(r,oe)=>{j();var q=D("bg");n(r,q)},$$slots:{default:!0}});var Tt=l(Rt,2),ht=v(Tt);ae(ht);var ea=l(ht,2);i(Tt),i(gt);var Lt=l(gt,2),Ot=v(Lt);Sa(Ot,{get image(){return e(p)},set image(r){s(p,u(r))}});var ta=l(Ot,2);{var aa=r=>{Xt(r,{get clientId(){return t().id}})};P(ta,r=>{e(m)||r(aa)})}i(Lt),i(H),Y(()=>{T(Oe,"background",e(a).act1),T(it,"background",e(a).act1a),T(Je,"background",e(a).act2),T(Ie,"background",e(a).act2a),T(et,"background",e(a).acnt),T(qe,"background",e(a).acnta),T(vt,"background",e(a).ok),T(M,"background",e(a).err),T(Yt,"background",e(a).glow),T(Ht,"background",e(a).gmid),T(Jt,"background",e(a).ghigh),T(Qt,"background",e(a).text),T(ea,"background",e(a).bg)}),ve(Le,()=>e(a).act1,r=>e(a).act1=r),ve(Ne,()=>e(a).act1a,r=>e(a).act1a=r),ve(je,()=>e(a).act2,r=>e(a).act2=r),ve(me,()=>e(a).act2a,r=>e(a).act2a=r),ve(ke,()=>e(a).acnt,r=>e(a).acnt=r),ve(Pe,()=>e(a).acnta,r=>e(a).acnta=r),ve(Ee,()=>e(a).ok,r=>e(a).ok=r),ve(O,()=>e(a).err,r=>e(a).err=r),ve(Ze,()=>e(a).glow,r=>e(a).glow=r),ve(ct,()=>e(a).gmid,r=>e(a).gmid=r),ve(dt,()=>e(a).ghigh,r=>e(a).ghigh=r),ve(pt,()=>e(a).text,r=>e(a).text=r),ve(ht,()=>e(a).bg,r=>e(a).bg=r),n(h,E)};P(b,h=>{e(a)&&h(A)})}var W=l(b,2);{var U=h=>{var E=cr(),V=v(E);vr(V,{get clientId(){return t().id},get isLoading(){return e(m)},get colors(){return e(f)},set colors(pe){s(f,u(pe))}}),i(E),n(h,E)};P(W,h=>{e(f)&&h(U)})}i(N);var Q=l(N,2),X=v(Q);Se(X,{level:1,get isLoading(){return e(m)},set isLoading(h){s(m,u(h))},$$events:{click:S},children:(h,E)=>{j();var V=D("SAVE");n(h,V)},$$slots:{default:!0}});var te=l(X,2);Se(te,{level:3,get isLoading(){return e(m)},set isLoading(h){s(m,u(h))},$$events:{click:y},children:(h,E)=>{j();var V=D("RESET");n(h,V)},$$slots:{default:!0}});var ee=l(te,2);{var Z=h=>{var E=nr();n(h,E)};P(ee,h=>{e($)&&h(Z)})}var F=l(ee,2);{var I=h=>{var E=dr(),V=v(E,!0);i(E),Y(()=>ce(V,e(k))),n(h,E)};P(F,h=>{e(k)&&h(I)})}i(Q),i(x),n(B,x),se()}var gr=R('<div class="data font-mono svelte-115hohv"> </div>'),hr=R('<div class="data svelte-115hohv"> </div>'),fr=R('<div class="header svelte-115hohv"><!> <!></div>'),mr=R("<div><!></div>"),br=R("<div><!></div>"),yr=R("<div><!></div>"),$r=R("<div><!></div>"),wr=R("<div><!> <!></div>");function Ir(B,c){le(c,!0);let t=G(c,"client",31,()=>u({})),f=G(c,"onSave",15),p=C(void 0);const m=["Config","Secret","Branding","Delete"];let k=C(u(m[0]));const $=200,L=$/2;function g(){s(p,!1),f()()}Mt(B,{get show(){return e(p)},set show(a){s(p,u(a))},header:a=>{var z=fr(),_=v(z);Pt(_,{text:"Client ID",children:(w,d)=>{var x=gr(),N=v(x,!0);i(x),Y(()=>ce(N,t().id)),n(w,x)},$$slots:{default:!0}});var S=l(_,2);{var y=w=>{Pt(w,{text:"Client Name",children:(d,x)=>{var N=hr(),b=v(N,!0);i(N),Y(()=>ce(b,t().name)),n(d,N)},$$slots:{default:!0}})};P(S,w=>{t().name&&w(y)})}i(z),n(a,z)},body:a=>{var z=wr(),_=v(z);ma(_,{labels:m,get selected(){return e(k)},set selected(d){s(k,u(d))}});var S=l(_,2);{var y=d=>{var x=mr(),N=v(x);Ga(N,{get client(){return t()},set client(b){t(b)},get onSave(){return f()},set onSave(b){f(b)}}),i(x),ne(5,x,()=>ue,()=>({delay:L,duration:$})),ne(6,x,()=>ue,()=>({duration:$})),n(d,x)},w=d=>{var x=xe(),N=de(x);{var b=W=>{var U=br(),Q=v(U);Va(Q,{get client(){return t()}}),i(U),ne(5,U,()=>ue,()=>({delay:L,duration:$})),ne(6,U,()=>ue,()=>({duration:$})),n(W,U)},A=W=>{var U=xe(),Q=de(U);{var X=ee=>{var Z=yr(),F=v(Z);pr(F,{get client(){return t()}}),i(Z),ne(5,Z,()=>ue,()=>({delay:L,duration:$})),ne(6,Z,()=>ue,()=>({duration:$})),n(ee,Z)},te=ee=>{var Z=xe(),F=de(Z);{var I=h=>{var E=$r(),V=v(E);Ha(V,{get client(){return t()},onSave:g}),i(E),ne(5,E,()=>ue,()=>({delay:L,duration:$})),ne(6,E,()=>ue,()=>({duration:$})),n(h,E)};P(F,h=>{e(k)==="Delete"&&h(I)},!0)}n(ee,Z)};P(Q,ee=>{e(k)==="Branding"?ee(X):ee(te,!1)},!0)}n(W,U)};P(N,W=>{e(k)==="Secret"?W(b):W(A,!1)},!0)}n(d,x)};P(S,d=>{e(k)==="Config"?d(y):d(w,!1)})}i(z),n(a,z)},$$slots:{header:!0,body:!0}}),se()}var _r=R('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),kr=R('<div class="success svelte-gbj18i">Success</div>'),zr=R('<div class="mainErr err svelte-gbj18i"> </div>'),Er=R('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function Cr(B,c){le(c,!0);let t=G(c,"idx",31,()=>-1),f=C(void 0),p=u({id:"",name:"",confidential:!0,redirect_uris:[]}),m=C(""),k=C(!1),$=C(void 0),L=C(u({}));const g=$t().shape({id:J().required("Client ID is required").trim().matches(_a,"Can only contain characters, numbers and '-'"),name:J().trim().nullable().matches(qt,"Can only contain characters, numbers and '-'")});let a=C(void 0),z=C(void 0);const _="330px";ye(()=>{e(k)&&s($,u(setTimeout(()=>{c.onSave(),s(k,!1),s(f,!1)},1500)))}),Ce(()=>()=>clearTimeout(e($)));async function S(){if(s(m,""),!await y()||!e(a)()||!e(z)()){s(m,"Invalid input");return}let w=p;w.name||(w.name=void 0);let d=await ua(w);if(d.ok)s(k,!0);else{let x=await d.json();s(m,u(x.message))}}async function y(){try{return await g.validate(p,{abortEarly:!1}),s(L,u({})),!0}catch(w){return s(L,u(wt(w))),!1}}Mt(B,{get idx(){return t()},set idx(w){t(w)},get show(){return e(f)},set show(w){s(f,u(w))},header:w=>{var d=_r();n(w,d)},body:w=>{var d=Er(),x=v(d);K(x,{autocomplete:"off",placeholder:"Client ID",width:_,get value(){return p.id},set value(I){p.id=I},get error(){return e(L).id},set error(I){e(L).id=I},$$events:{input:y},children:(I,h)=>{j();var E=D("CLIENT ID");n(I,E)},$$slots:{default:!0}});var N=l(x,2);K(N,{autocomplete:"off",placeholder:"Client Name",width:_,get value(){return p.name},set value(I){p.name=I},get error(){return e(L).name},set error(I){e(L).name=I},$$events:{input:y},children:(I,h)=>{j();var E=D("NAME");n(I,E)},$$slots:{default:!0}});var b=l(N,2);Re(b,{style:`width: ${_}`,validation:{required:!0,regex:Ke,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return p.redirect_uris},set values(I){p.redirect_uris=I},get validate(){return e(a)},set validate(I){s(a,u(I))},children:(I,h)=>{j();var E=D("REDIRECT URI");n(I,E)},$$slots:{default:!0}});var A=l(b,2);Re(A,{style:`width: ${_}`,validation:{required:!0,regex:Ke,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return p.post_logout_redirect_uris},set values(I){p.post_logout_redirect_uris=I},get validate(){return e(z)},set validate(I){s(z,u(I))},children:(I,h)=>{j();var E=D("POST LOGOUT REDIRECT URI");n(I,E)},$$slots:{default:!0}});var W=l(A,2),U=l(v(W),2),Q=v(U);Xe(Q,{get selected(){return p.confidential},set selected(I){p.confidential=I}}),i(U),i(W);var X=l(W,2);Se(X,{level:1,width:"4rem",$$events:{click:S},children:(I,h)=>{j();var E=D("SAVE");n(I,E)},$$slots:{default:!0}});var te=l(X,2);{var ee=I=>{var h=kr();n(I,h)};P(te,I=>{e(k)&&I(ee)})}var Z=l(te,2);{var F=I=>{var h=zr(),E=v(h,!0);i(h),Y(()=>ce(E,e(m))),n(I,h)};P(Z,I=>{e(m)&&I(F)})}i(d),n(w,d)},$$slots:{header:!0,body:!0}}),se()}var xr=R('<div class="svelte-nj6lei"><!></div>'),Sr=R(' <div class="content"><!> <!> <div id="clients" class="svelte-nj6lei"></div> <!> <div style="height: 20px"></div></div>',1);function Rr(B,c){le(c,!0);let t=C(""),f=C(u([])),p=C(u([])),m=C(u([])),k=C(""),$=[{label:"ID",callback:(b,A)=>b.id.toLowerCase().includes(A.toLowerCase())}],L=[{label:"ID",callback:(b,A)=>b.id.localeCompare(A.id)}];Ce(()=>{g(),a()});async function g(){let b=await pa();if(!b.ok)s(t,"Error fetching clients: "+b.body.message);else{let A=await b.json();s(f,u([...A]))}}async function a(){let b=await ga();if(!b.ok)s(t,"Error fetching scopes: "+b.body.message);else{let A=await b.json();ha.set(A),Bt.set(A.map(W=>W.name))}}function z(){g(),a(),s(k,"")}j();var _=Sr(),S=de(_),y=l(S),w=v(y);Ra(w,{get items(){return e(f)},searchOptions:$,orderOptions:L,get resItems(){return e(p)},set resItems(b){s(p,u(b))},get search(){return e(k)},set search(b){s(k,u(b))}});var d=l(w,2);Cr(d,{onSave:z});var x=l(d,2);bt(x,23,()=>e(m),b=>b.id,(b,A,W)=>{var U=xr(),Q=v(U);Ir(Q,{onSave:z,get client(){return e(m)[e(W)]},set client(X){e(m)[e(W)]=X}}),i(U),n(b,U)}),i(x);var N=l(x,2);Ta(N,{get items(){return e(p)},set items(b){s(p,u(b))},get resItems(){return e(m)},set resItems(b){s(m,u(b))}}),j(2),i(y),Y(()=>ce(S,`${e(t)??""} `)),n(B,_),se()}function Tr(B){Rr(B,{})}export{Tr as component};
