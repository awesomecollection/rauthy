import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.Dn68_YLB.js";import{p as F,i as d,F as A,a as G,g as t,s as L,c as C,h as i,r as y,f as re}from"../chunks/runtime.BsghBUX9.js";import{a as B,t as P,e as se}from"../chunks/template.jENAUvUX.js";import{i as E}from"../chunks/if.6Ov_EDLa.js";import{e as ae}from"../chunks/each.URXtkKAp.js";import{p as r}from"../chunks/proxy.YH42NwLs.js";import{Q as N,S as oe}from"../chunks/helpers.CBl6QeM5.js";import{E as ie}from"../chunks/Event.7OTthgGm.js";import{B as H,b as ne}from"../chunks/fetch.BvIeF4JA.js";import{O as Q,u as J,S as le}from"../chunks/Options.BJCTpMmM.js";import{I as K}from"../chunks/InputDateTimeCombo.CadHmiR0.js";import{f as ve,a as ue,b as M}from"../chunks/form.DXGq3I_7.js";import{p as S}from"../chunks/props.CslUVmW_.js";import{I as de,a as me}from"../chunks/IconBarsArrowUp.CwQnwfB4.js";import{T as W}from"../chunks/Tooltip.CkN4jj6Y.js";var ce=P('<div class="container svelte-5a6d30"><!> <div class="btn svelte-5a6d30"><!></div></div>');function pe(w,s){F(s,!0);let m=S(s,"options",19,()=>[]),o=J(),c=d(r(m()[0])),u=d(r(s.firstDirReverse?"down":"up"));A(()=>{s.onChange(t(c),t(u))});var p=ce(),b=C(p);{var g=n=>{W(n,{get text(){return o.search.orderBy},children:(f,R)=>{Q(f,{get ariaLabel(){return o.search.orderBy},get options(){return m()},get borderless(){return s.borderless},get value(){return t(c)},set value(O){i(c,r(O))}})},$$slots:{default:!0}})};E(b,n=>{m().length>1&&n(g)})}var $=L(b,2),T=C($);{var D=n=>{H(n,{get ariaLabel(){return o.search.orderChangeToDesc},invisible:!0,onclick:()=>i(u,"down"),children:(f,R)=>{W(f,{get text(){return o.search.orderChangeToDesc},children:(O,x)=>{de(O,{})},$$slots:{default:!0}})},$$slots:{default:!0}})},q=n=>{H(n,{get ariaLabel(){return o.search.orderChangeToAsc},invisible:!0,onclick:()=>i(u,"up"),children:(f,R)=>{W(f,{get text(){return o.search.orderChangeToAsc},children:(O,x)=>{me(O,{})},$$slots:{default:!0}})},$$slots:{default:!0}})};E(T,n=>{t(u)==="up"?n(D):n(q,!1)})}y($),y(p),B(w,p),G()}var ge=P('<div class="container svelte-1dr1eqd"><!> <!></div>');function fe(w,s){let m=S(s,"searchOption",15),o=S(s,"value",15),c=S(s,"searchWidth",3,"min(25rem, 95dvw)");var u=ge(),p=C(u);pe(p,{get options(){return s.orderOptions},get onChange(){return s.onChangeOrder},get borderless(){return s.borderless},get firstDirReverse(){return s.firstDirReverse}});var b=L(p,2);le(b,{get datalist(){return s.datalist},get options(){return s.searchOptions},get pattern(){return s.pattern},get width(){return c()},get borderless(){return s.borderless},get onSearch(){return s.onSearch},get value(){return o()},set value(g){o(g)},get option(){return m()},set option(g){m(g)}}),y(u),B(w,u)}var he=P('<div class="row svelte-itq81i">No events found</div>'),be=P('<div class="content"><!> <div class="row svelte-itq81i"><!> <!></div> <div class="filters svelte-itq81i"><div class="level svelte-itq81i"><!></div> <div class="typ svelte-itq81i"><!></div></div> <!></div>');function Ce(w,s){F(s,!0);let m=J(),o=d(r([])),c=d(r([])),u=d(r(ve())),p=d(r(ue())),b=d(""),g=d("--:--"),$=d("info"),T=d(r(N[0])),D=["IP","Content"],q=d(r(D[0])),n=d(""),f=["Timestamp","Level","Type"];A(()=>{R()}),A(()=>{let e=t(n).toLowerCase();e?t(q)===D[0]?i(c,r(t(o).filter(l=>{var v;return(v=l.ip)==null?void 0:v.includes(e)}))):t(q)===D[1]&&i(c,r(t(o).filter(l=>{var v,a;return((v=l.typ)==null?void 0:v.toLowerCase().includes(e))||((a=l.text)==null?void 0:a.toLowerCase().includes(e))}))):i(c,r(t(o)))});async function R(){let e=M(t(u),t(p));if(!e){console.error("from ts invalid",e);return}let l;t(b)&&t(g)&&(l=M(t(b),t(g)));let v={from:e,until:l,level:t($),typ:t(T)!==N[0]?t(T):void 0},a=await ne("/auth/v1/events",v);a.body?i(o,r(a.body)):console.error(a.error)}function O(e,l){let v=l==="up";e===f[0]?t(o).sort((a,h)=>v?a.timestamp-h.timestamp:h.timestamp-a.timestamp):e===f[1]?t(o).sort((a,h)=>v?a.level.localeCompare(h.level):h.level.localeCompare(a.level)):e===f[2]&&t(o).sort((a,h)=>v?a.typ.localeCompare(h.typ):h.typ.localeCompare(a.typ))}var x=be(),_=C(x);fe(_,{searchOptions:D,orderOptions:f,onChangeOrder:O,firstDirReverse:!0,get searchOption(){return t(q)},set searchOption(e){i(q,r(e))},get value(){return t(n)},set value(e){i(n,r(e))}});var V=L(_,2),j=C(V);K(j,{get label(){return m.common.from},withTime:!0,get value(){return t(u)},set value(e){i(u,r(e))},get timeValue(){return t(p)},set timeValue(e){i(p,r(e))}});var U=L(j,2);K(U,{get label(){return m.common.until},withTime:!0,withDelete:!0,get value(){return t(b)},set value(e){i(b,r(e))},get timeValue(){return t(g)},set timeValue(e){i(g,r(e))}}),y(V);var I=L(V,2),k=C(I),X=C(k);Q(X,{get ariaLabel(){return m.events.eventLevel},options:oe,borderless:!0,get value(){return t($)},set value(e){i($,r(e))}}),y(k);var z=L(k,2),Y=C(z);Q(Y,{get ariaLabel(){return m.events.eventType},options:N,borderless:!0,get value(){return t(T)},set value(e){i(T,r(e))}}),y(z),y(I);var Z=L(I,2);{var ee=e=>{var l=he();B(e,l)},te=e=>{var l=se(),v=re(l);ae(v,17,()=>t(c),a=>a.id,(a,h)=>{ie(a,{get event(){return t(h)},inline:!0})}),B(e,l)};E(Z,e=>{t(c).length===0?e(ee):e(te,!1)})}y(x),B(w,x),G()}function ye(w){Ce(w,{})}export{ye as component};
