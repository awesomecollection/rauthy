import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.BVESbwbj.js";import{p as ce,w as u,f as G,t as D,a as de,v as r,s as v,u as a,ap as w,c as l,r as o}from"../chunks/runtime.BONl2e88.js";import{d as me,e as ne,s as q}from"../chunks/render.AqJWcVDb.js";import{i as T}from"../chunks/if.DS90EFHs.js";import{e as fe}from"../chunks/each.Bce--_O8.js";import{a as p,t as k,d as B,e as ue}from"../chunks/template.B7ldVCvc.js";import{a as he,c as we}from"../chunks/index.BJiFQ8Di.js";import{p as i}from"../chunks/proxy.0BECmVET.js";import{o as Ie}from"../chunks/index-client.Bjp_k6xO.js";import{r as xe}from"../chunks/legacy-client.D71ZcBDy.js";import{O as ge}from"../chunks/OrderSearchBar.DcBjpUC6.js";import{P as $e}from"../chunks/Pagination.DjghmVzr.js";import{g as ke,p as ye,d as Pe}from"../chunks/OptionSelect.TkTfcdPh.js";import{B as H}from"../chunks/Button.JPJkNEUa.js";import{I as J}from"../chunks/Input.KbCPDMgh.js";import{x as be,y as Se,l as Ee,z as Oe}from"../chunks/helpers.CQGRRstl.js";import{c as De,a as qe}from"../chunks/index.esm.B2KJ0uBO.js";import{I as Be}from"../chunks/IconStop.C9gKcOrO.js";import{T as Ne}from"../chunks/Tooltip.BZNUXfH5.js";var _e=k('<div class="addNewInputs svelte-1fhw572"><!> <!> <div class="saveBtn svelte-1fhw572"><!></div> <div class="err svelte-1fhw572"> </div></div>'),je=k('<div class="svelte-1fhw572">No blacklisted IPs</div>'),Ae=(y,N,P)=>N(a(P).ip),Ce=k('<div role="button" tabindex="0" class="delete svelte-1fhw572"><!></div>'),Le=k('<div class="blacklisted svelte-1fhw572"><div class="ip svelte-1fhw572"> </div> <div class="exp svelte-1fhw572"> </div> <!></div>'),Te=k(' <div class="content"><div class="top svelte-1fhw572"><!> <div class="addNew svelte-1fhw572"><!></div></div> <!> <div id="blacklist" class="svelte-1fhw572"><!></div> <!> <div style="height: 20px"></div></div>',1);function Ve(y,N){ce(N,!0);let P=u(""),I=u(""),b=u(i([])),S=u(i([])),_=u(i([])),x=u(!1),c=i({ip:"",exp:""}),E=u(i({}));const M=De().shape({ip:qe().required("IP is required").matches(be,"Invalid IPv4")}),Q=new Date().toISOString().split(".")[0],W=[{label:"IP",callback:(e,t)=>e.ip.includes(t)}];let Y=[{label:"IP",callback:(e,t)=>e.ip.localeCompare(t.ip)}];xe(()=>{a(x)&&(r(I,""),c.exp=new Date().toISOString().split(".")[0])}),Ie(()=>{j()});async function j(){let e=await ke(),t=await e.json();e.ok?r(b,i(t.ips)):r(P,i(t.message))}async function Z(){if(r(I,""),!await ee())return;let e=Se(c.exp);if(!e){r(I,"Invalid Date Input: User Expires");return}let t={ip:c.ip,exp:e},d=await ye(t);if(d.ok)r(x,!1),c.ip="",await j();else{let m=await d.json();r(I,i(m.message))}}async function V(e){(await Pe(e)).ok&&await j()}async function ee(){try{return await M.validate(c,{abortEarly:!1}),r(E,i({})),!0}catch(e){return r(E,i(Ee(e))),!1}}w();var z=Te(),F=G(z),K=v(F),A=l(K),R=l(A);ge(R,{get items(){return a(b)},searchOptions:W,orderOptions:Y,get resItems(){return a(S)},set resItems(e){r(S,i(e))}});var U=v(R,2),te=l(U);H(te,{level:3,$$events:{click:()=>r(x,!a(x))},children:(e,t)=>{w();var d=B("BLACKLIST IP");p(e,d)},$$slots:{default:!0}}),o(U),o(A);var X=v(A,2);{var ae=e=>{var t=_e(),d=l(t);J(d,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return c.ip},set value(s){c.ip=s},get error(){return a(E).ip},set error(s){a(E).ip=s},children:(s,O)=>{w();var f=B("IP");p(s,f)},$$slots:{default:!0}});var m=v(d,2);J(m,{type:"datetime-local",step:"60",width:"18rem",min:Q,max:"2099-01-01T00:00",get value(){return c.exp},set value(s){c.exp=s},children:(s,O)=>{w();var f=B("EXPIRES");p(s,f)},$$slots:{default:!0}});var n=v(m,2),g=l(n);H(g,{level:1,$$events:{click:Z},children:(s,O)=>{w();var f=B("SAVE");p(s,f)},$$slots:{default:!0}}),o(n);var h=v(n,2),L=l(h,!0);o(h),o(t),D(()=>q(L,a(I))),he(3,t,()=>we),p(e,t)};T(X,e=>{a(x)&&e(ae)})}var C=v(X,2),se=l(C);{var re=e=>{var t=je();p(e,t)},ie=e=>{var t=ue(),d=G(t);fe(d,17,()=>a(_),m=>m.ip,(m,n)=>{var g=Le(),h=l(g),L=l(h,!0);o(h);var s=v(h,2),O=l(s,!0);D(()=>q(O,Oe(a(n).exp))),o(s);var f=v(s,2);Ne(f,{text:"Delete IP",children:(ve,Fe)=>{var $=Ce();$.__click=[Ae,V,n];var pe=l($);Be(pe,{color:"var(--col-err)"}),o($),ne("keypress",$,()=>V(a(n).ip)),p(ve,$)},$$slots:{default:!0}}),o(g),D(()=>q(L,a(n).ip)),p(m,g)}),p(e,t)};T(se,e=>{a(b).length===0?e(re):e(ie,!1)})}o(C);var le=v(C,2);{var oe=e=>{$e(e,{get items(){return a(S)},set items(t){r(S,i(t))},get resItems(){return a(_)},set resItems(t){r(_,i(t))}})};T(le,e=>{a(b).length>0&&e(oe)})}w(2),o(K),D(()=>q(F,`${a(P)??""} `)),p(y,z),de()}me(["click"]);function ze(y){Ve(y,{})}export{ze as component};
