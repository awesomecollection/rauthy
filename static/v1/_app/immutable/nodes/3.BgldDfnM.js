import{a as v,b as T,c as fe,t as H,n as bt}from"../chunks/disclose-version.DZhRUPAc.js";import{p as Me,g as e,a3 as t,a5 as a,a1 as o,j as i,a as Te,_ as q,h as je,a0 as ie,n as yt,o as Be,a2 as b,a4 as J,$ as $t}from"../chunks/index-client.CGppiJvc.js";import{d as ja,e as Da,s as l,r as kt,h as _t}from"../chunks/render.D4MwAWTL.js";import{i as C}from"../chunks/if.DUA6Hpfn.js";import{p as d}from"../chunks/proxy.DB4Km9hY.js";import{J as Ae,x as Z,a1 as ma,a2 as xt,_ as It,P as Nt,a3 as Pt,M as Ut,g as Ct,v as Ea,w as qt,a4 as jt,a5 as Dt,a6 as Et,a7 as Ma,y as Ta,a8 as za,m as He,a9 as Ka,t as La,aa as Mt,F as Je,G as Re,ab as Tt,B as Wa,U as zt,ac as Kt,ad as Lt,A as Wt,ae as Bt,O as Rt,af as Vt,ag as St,ah as At,k as Ot,ai as Ft,r as Ba,aj as Ht}from"../chunks/dataFetching.Dto1xJW6.js";import{L as Jt}from"../chunks/Loading.wZ55XKP1.js";import{c as Y,s as ze,t as We,f as Oe,h as Zt,b as Yt}from"../chunks/Loading.FF_EHyHU.js";import{h as Ra,T as Gt,a as Xt,S as Va,b as Qt,D as er,c as ar}from"../chunks/Devices.BuQD3GeY.js";import{p as me,s as tr,a as rr}from"../chunks/props.Df_pGDSd.js";import{c as sr,r as Fe}from"../chunks/legacy-client.CgqodnwN.js";import{e as Sa}from"../chunks/OptionSelect.BCgZksOM.js";import{a as nr,C as na}from"../chunks/CheckIcon.Cjxxxfsf.js";import{B as Pe}from"../chunks/Button.BH2_dPry.js";import{s as or}from"../chunks/snippet.xhmr1ywJ.js";import{b as ir}from"../chunks/this.B23tdsYu.js";import{u as Le}from"../chunks/i18n.svelte.BTGsPiz_.js";import{c as Ze,a as Ue,b as lr,I as Ke}from"../chunks/Input.Bj_i2TLU.js";import{t as vr}from"../chunks/tweened.CQQvc4Vq.js";import{L as Aa}from"../chunks/LangSelector.mSh8cV6Q.js";import{P as cr}from"../chunks/PasswordPolicy.D9rZurKD.js";import{P as ha}from"../chunks/PasswordInput.6uXzPAl-.js";import{W as dr}from"../chunks/WebauthnRequest.CHVZELhw.js";import{M as ur,C as pr}from"../chunks/ContentCenter.CsjyBf2d.js";function mr(R){return function(...p){var r=p[0];r.target===this&&(R==null||R.apply(this,p))}}var hr=R=>R.stopPropagation(),wr=(R,p)=>e(p).close(),fr=(R,p)=>e(p).close(),gr=T('<dialog role="none" class="svelte-l3vtl3"><div role="none" class="svelte-l3vtl3"><div role="button" tabindex="0" class="close svelte-l3vtl3"><!></div> <div class="inner svelte-l3vtl3"><!></div></div></dialog>');function br(R,p){Me(p,!0),sr();let r=me(p,"showModal",15),y=q(void 0);Fe(()=>{e(y)&&r()&&e(y).showModal()});var n=gr(),w=je(()=>mr(()=>e(y).close()));n.__click=function(...x){var W;(W=e(w))==null||W.apply(this,x)};var $=t(n);$.__click=[hr];var h=t($);h.__click=[wr,y],h.__keydown=[fr,y];var j=t(h);nr(j,{color:"var(--col-err)",width:24}),a(h);var z=o(h,2),I=t(z);{var _=x=>{var W=fe(),U=ie(W);or(U,()=>p.children??yt),v(x,W)};C(I,x=>{r()&&x(_)})}a(z),a($),a(n),ir(n,x=>i(y,x),()=>e(y)),Da("close",n,()=>r(!1)),v(R,n),Te()}ja(["click","keydown"]);var yr=T('<div class="link-err value svelte-bckoh9"> </div>'),$r=T('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),kr=(R,p)=>i(p,!e(p)),_r=T('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),xr=T('<p> </p> <div class="providers svelte-bckoh9"></div>',1),Ir=T('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),Nr=T('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),Pr=T('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),Ur=T('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Oa(R,p){Me(p,!0);let r=me(p,"user",31,()=>d({})),y=me(p,"viewModePhone",3,!1),n=Le(),w=q(!1),$=q(!1),h=q(d([])),j=je(()=>{var V;return(V=r().account_type)==null?void 0:V.startsWith("federated")}),z=je(()=>{var V;return e(j)?`${r().account_type}: ${((V=p.authProvider)==null?void 0:V.name)||""}`:r().account_type}),I=je(()=>y()?"rowPhone":"row"),_=je(()=>y()?"labelPhone":"label");Be(()=>{var te;let V=(te=document==null?void 0:document.getElementsByTagName("template").namedItem("auth_providers"))==null?void 0:te.innerHTML;V&&V!=="{{ auth_providers|safe }}"&&i(h,d(JSON.parse(V)))});function x(V){It(64,(te,{challenge:_e,verifier:xe})=>{te||(localStorage.setItem(Nt,xe),W(V,_e))})}async function W(V,te){let _e={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:V,pkce_challenge:te},xe=await Pt(V,_e);if(xe.ok){const Ne=await xe.text();Ut(Ne),window.location.href=xe.headers.get("location")}else{let Ne=await xe.json();console.error(Ne)}}async function U(){let V=await xt(),te=await V.json();V.ok?r(te):i(w,!0)}var S=Ur(),A=t(S),he=t(A),X=t(he),B=t(X);a(X),a(he);var K=o(he,2),re=t(K,!0);a(K),a(A);var ne=o(A,2),se=t(ne),le=t(se),we=t(le);a(le),a(se);var ve=o(se,2),ce=t(ve,!0);a(ve),a(ne);var pe=o(ne,2),D=t(pe),N=t(D),E=t(N);a(N),a(D);var g=o(D,2),k=t(g,!0);a(g),a(pe);var m=o(pe,2),c=t(m),P=t(c),s=t(P);a(P),a(c);var f=o(c,2),u=t(f,!0);a(f),a(m);var L=o(m,2),G=t(L),O=t(G),oe=t(O);a(O),a(G);var de=o(G,2),Ie=t(de),ge=t(Ie,!0);a(Ie);var be=o(Ie,2);{var ye=V=>{var te=$r(),_e=t(te);Pe(_e,{level:3,$$events:{click:U},children:(qe,Ee)=>{J();var Se=H();b(()=>l(Se,n.account.providerUnlink)),v(qe,Se)},$$slots:{default:!0}});var xe=o(_e,2);{var Ne=qe=>{var Ee=yr(),Se=t(Ee,!0);a(Ee),b(()=>l(Se,n.account.providerUnlinkDesc)),v(qe,Ee)};C(xe,qe=>{e(w)&&qe(Ne)})}a(te),v(V,te)},$e=V=>{var te=fe(),_e=ie(te);{var xe=Ne=>{var qe=Ir(),Ee=ie(qe);Ee.__click=[kr,$];var Se=t(Ee,!0);a(Ee);var ht=o(Ee,2);br(ht,{get showModal(){return e($)},set showModal(va){i($,d(va))},children:(va,ls)=>{var Pa=xr(),ca=ie(Pa),wt=t(ca,!0);a(ca);var Ua=o(ca,2);Sa(Ua,21,()=>e(h),da=>da.id,(da,ua)=>{Pe(da,{level:3,$$events:{click:()=>x(e(ua).id)},children:(ft,vs)=>{var pa=_r(),Ca=t(pa),qa=o(Ca,2),gt=t(qa,!0);a(qa),a(pa),b(()=>{ze(Ca,"src",`/auth/v1/providers/${e(ua).id}/img`),l(gt,e(ua).name)}),v(ft,pa)},$$slots:{default:!0}})}),a(Ua),b(()=>l(wt,n.account.providerLinkDesc)),v(va,Pa)},$$slots:{default:!0}}),b(()=>l(Se,n.account.providerLink)),Da("keypress",Ee,()=>i($,!e($))),v(Ne,qe)};C(_e,Ne=>{e(h).length>0&&Ne(xe)},!0)}v(V,te)};C(be,V=>{e(j)?V(ye):V($e,!1)})}a(de),a(L);var M=o(L,2),Q=t(M),ee=t(Q),ue=t(ee);a(ee),a(Q);var F=o(Q,2),ae=t(F,!0);a(F),a(M);var ke=o(M,2),Ce=t(ke),De=t(Ce),Ve=t(De);a(De),a(Ce);var wa=o(Ce,2),Xa=t(wa,!0);a(wa),a(ke);var oa=o(ke,2),Ye=t(oa),fa=t(Ye),Qa=t(fa);a(fa),a(Ye);var et=o(Ye,2),at=je(()=>!!r().webauthn_user_id);na(et,{get check(){return e(at)}}),a(oa);var ia=o(oa,2),Ge=t(ia),ga=t(Ge),tt=t(ga);a(ga),a(Ge);var rt=o(Ge,2);na(rt,{get check(){return r().enabled}}),a(ia);var la=o(ia,2),Xe=t(la),ba=t(Xe),st=t(ba);a(ba),a(Xe);var nt=o(Xe,2);na(nt,{get check(){return r().email_verified}}),a(la);var Qe=o(la,2),ea=t(Qe),ya=t(ea),ot=t(ya);a(ya),a(ea);var $a=o(ea,2),it=t($a,!0);b(()=>l(it,Ae(r().last_login))),a($a),a(Qe);var aa=o(Qe,2),ta=t(aa),ka=t(ta),lt=t(ka);a(ka),a(ta);var _a=o(ta,2),vt=t(_a,!0);b(()=>l(vt,r().password_expires&&Ae(r().password_expires)||n.common.never)),a(_a),a(aa);var ra=o(aa,2),sa=t(ra),xa=t(sa),ct=t(xa);a(xa),a(sa);var Ia=o(sa,2),dt=t(Ia,!0);b(()=>l(dt,Ae(r().created_at))),a(Ia),a(ra);var Na=o(ra,2);{var ut=V=>{var te=Nr(),_e=t(te),xe=t(_e),Ne=t(xe);a(xe),a(_e);var qe=o(_e,2),Ee=t(qe,!0);b(()=>l(Ee,Ae(r().user_expires))),a(qe),a(te),b(()=>{Z(te,Y(e(I)),"svelte-bckoh9"),Z(_e,Y(e(_)),"svelte-bckoh9"),l(Ne,`${n.account.userExpiry??""}:`)}),v(V,te)};C(Na,V=>{r().user_expires&&V(ut)})}var pt=o(Na,2);{var mt=V=>{var te=Pr(),_e=t(te),xe=o(_e,2),Ne=t(xe);b(()=>ze(Ne,"href",ma(r().id)));var qe=t(Ne);Ra(qe,()=>ma(r().id).replace("/auth/","/auth/<wbr/>")),a(Ne),a(xe),a(te),b(()=>{Z(te,Y(e(I)),"svelte-bckoh9"),Z(_e,Y(e(_)),"svelte-bckoh9")}),v(V,te)};C(pt,V=>{p.webIdData&&V(mt)})}a(S),b(()=>{Z(A,Y(e(I)),"svelte-bckoh9"),Z(he,Y(e(_)),"svelte-bckoh9"),l(B,`${n.common.email??""}:`),l(re,r().email),Z(ne,Y(e(I)),"svelte-bckoh9"),Z(se,Y(e(_)),"svelte-bckoh9"),l(we,`${n.account.givenName??""}:`),l(ce,r().given_name),Z(pe,Y(e(I)),"svelte-bckoh9"),Z(D,Y(e(_)),"svelte-bckoh9"),l(E,`${n.account.familyName??""}:`),l(k,r().family_name),Z(m,Y(e(I)),"svelte-bckoh9"),Z(c,Y(e(_)),"svelte-bckoh9"),l(s,`${n.account.user??""} ID:`),l(u,r().id),Z(L,Y(e(I)),"svelte-bckoh9"),Z(G,Y(e(_)),"svelte-bckoh9"),l(oe,`${n.account.accType??""}:`),l(ge,e(z)||""),Z(M,Y(e(I)),"svelte-bckoh9"),Z(Q,Y(e(_)),"svelte-bckoh9"),l(ue,`${n.account.roles??""}:`),l(ae,r().roles||"None"),Z(ke,Y(e(I)),"svelte-bckoh9"),Z(Ce,Y(e(_)),"svelte-bckoh9"),l(Ve,`${n.account.groups??""}:`),l(Xa,r().groups||"None"),Z(Ye,Y(e(_)),"svelte-bckoh9"),l(Qa,`${n.account.mfaActivated??""}:`),Z(Ge,Y(e(_)),"svelte-bckoh9"),l(tt,`${n.account.userEnabled??""}:`),Z(Xe,Y(e(_)),"svelte-bckoh9"),l(st,`${n.account.emailVerified??""}:`),Z(Qe,Y(e(I)),"svelte-bckoh9"),Z(ea,Y(e(_)),"svelte-bckoh9"),l(ot,`${n.account.lastLogin??""}:`),Z(aa,Y(e(I)),"svelte-bckoh9"),Z(ta,Y(e(_)),"svelte-bckoh9"),l(lt,`${n.account.passwordExpiry??""}:`),Z(ra,Y(e(I)),"svelte-bckoh9"),Z(sa,Y(e(_)),"svelte-bckoh9"),l(ct,`${n.account.userCreated??""}:`)}),v(R,S),Te()}ja(["click"]);function Fa(R,p){Me(p,!0);let r=me(p,"selected",15),y=me(p,"showWebId",3,!1),n=Le(),w=d(y()?[n.account.navInfo,n.account.navEdit,n.common.password,n.account.navMfa,"WebID",n.account.devices,n.account.navLogout]:[n.account.navInfo,n.account.navEdit,n.common.password,n.account.navMfa,n.account.devices,n.account.navLogout]);Be(()=>{Ct().v==="devices"&&r(n.account.devices)}),Gt(R,{get labels(){return w},get selected(){return r()},set selected($){r($)}}),Te()}var Cr=T("<p> </p>"),qr=T('<div class="success svelte-1xh7x72">Update successful <!></div>'),jr=T('<div class="err svelte-1xh7x72"> </div>'),Dr=T('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Ha(R,p){Me(p,!0);let r=me(p,"user",31,()=>d({})),y=me(p,"viewModePhone",3,!1),n=Le(),w=je(()=>y()?"calc(100vw - 1.5rem)":"300px");const $="8rem";let h=q(!1),j=q(""),z=q(!1),I=q(!1),_=d({email:r().email,givenName:r().given_name,familyName:r().family_name}),x=q(d({}));const W=Ze().shape({email:Ue().required(n.account.validEmail).email(n.account.validEmail),givenName:Ue().required(n.account.validGivenName).matches(Ea,n.account.validGivenName),familyName:Ue().nullable().matches(qt,n.account.validFamilyName)});let U=q(d({}));const S=Ze().shape({birthdate:Ue().nullable().trim().matches(jt,n.common.invalidInput),phone:Ue().nullable().trim().matches(Dt,"+..."),street:Ue().nullable().trim().matches(Et,n.common.invalidInput),zip:lr().nullable().min(1e3).max(999999),city:Ue().nullable().trim().matches(Ma,n.common.invalidInput),country:Ue().nullable().trim().matches(Ma,n.common.invalidInput)});function A(s){s.code==="Enter"&&he()}async function he(){if(!await X()){i(j,d(n.common.invalidInput));return}i(h,!0);const s={email:_.email,given_name:_.givenName,family_name:_.familyName||null,user_values:r().user_values};s.user_values.phone&&(s.user_values.phone=s.user_values.phone.replaceAll(" ","")),s.user_values.zip&&(s.user_values.zip=Number.parseInt(s.user_values.zip));let f=await za(r().id,s);if(f.ok)i(z,!0),r(r().email=_.email,!0),r(r().given_name=_.givenName,!0),r(r().family_name=_.familyName,!0),f.status===202&&i(I,!0);else{let u=await f.json();i(j,d(u.message))}i(h,!1)}async function X(){let s=!0;try{await W.validate(_,{abortEarly:!1}),i(x,d({}))}catch(f){i(x,d(He(f))),s=!1}try{await S.validate(r().user_values,{abortEarly:!1}),i(U,d({}))}catch(f){i(U,d(He(f))),s=!1}return s}var B=Dr(),K=t(B),re=t(K);Ke(re,{autocomplete:"family-name",get placeholder(){return n.common.email},get width(){return e(w)},get value(){return _.email},set value(s){_.email=s},get error(){return e(x).email},set error(s){e(x).email=s},$$events:{input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.common.email.toUpperCase())),v(s,u)},$$slots:{default:!0}});var ne=o(re,2);Ke(ne,{autocomplete:"given-name",get placeholder(){return n.account.givenName},get width(){return e(w)},get value(){return _.givenName},set value(s){_.givenName=s},get error(){return e(x).givenName},set error(s){e(x).givenName=s},$$events:{input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.givenName.toUpperCase())),v(s,u)},$$slots:{default:!0}});var se=o(ne,2);Ke(se,{autocomplete:"family-name",get placeholder(){return n.account.familyName},get width(){return e(w)},get value(){return _.familyName},set value(s){_.familyName=s},get error(){return e(x).familyName},set error(s){e(x).familyName=s},$$events:{input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.familyName.toUpperCase())),v(s,u)},$$slots:{default:!0}});var le=o(se,2);Ta(le,"margin",".5rem");var we=t(le,!0);a(le);var ve=o(le,2);Ke(ve,{autocomplete:"street-address",get placeholder(){return n.account.street},get width(){return e(w)},get value(){return r().user_values.street},set value(s){r(r().user_values.street=s,!0)},get error(){return e(U).street},set error(s){e(U).street=s},$$events:{keypress:A,input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.street.toUpperCase())),v(s,u)},$$slots:{default:!0}});var ce=o(ve,2);Ke(ce,{type:"number",autocomplete:"postal-code",get placeholder(){return n.account.zip},min:1e3,max:999999,get width(){return e(w)},get value(){return r().user_values.zip},set value(s){r(r().user_values.zip=s,!0)},get error(){return e(U).zip},set error(s){e(U).zip=s},$$events:{keypress:A,input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.zip.toUpperCase())),v(s,u)},$$slots:{default:!0}});var pe=o(ce,2);Ke(pe,{autocomplete:"adress-level2",get placeholder(){return n.account.city},get width(){return e(w)},get value(){return r().user_values.city},set value(s){r(r().user_values.city=s,!0)},get error(){return e(U).city},set error(s){e(U).city=s},$$events:{keypress:A,input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.city.toUpperCase())),v(s,u)},$$slots:{default:!0}});var D=o(pe,2);Ke(D,{autocomplete:"country",get placeholder(){return n.account.country},get width(){return e(w)},get value(){return r().user_values.country},set value(s){r(r().user_values.country=s,!0)},get error(){return e(U).country},set error(s){e(U).country=s},$$events:{keypress:A,input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.country.toUpperCase())),v(s,u)},$$slots:{default:!0}});var N=o(D,2);Ke(N,{autocomplete:"tel",get placeholder(){return n.account.phone},get width(){return e(w)},get value(){return r().user_values.phone},set value(s){r(r().user_values.phone=s,!0)},get error(){return e(U).phone},set error(s){e(U).phone=s},$$events:{keypress:A,input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.phone.toUpperCase())),v(s,u)},$$slots:{default:!0}});var E=o(N,2);Ke(E,{type:"date",autocomplete:"bday",get placeholder(){return n.account.birthdate},get width(){return e(w)},get value(){return r().user_values.birthdate},set value(s){r(r().user_values.birthdate=s,!0)},get error(){return e(U).birthdate},set error(s){e(U).birthdate=s},$$events:{keypress:A,input:X},children:(s,f)=>{J();var u=H();b(()=>l(u,n.account.birthdate.toUpperCase())),v(s,u)},$$slots:{default:!0}});var g=o(E,2);Pe(g,{width:$,level:1,get isLoading(){return e(h)},set isLoading(s){i(h,d(s))},$$events:{click:he},children:(s,f)=>{J();var u=H();b(()=>l(u,n.common.save)),v(s,u)},$$slots:{default:!0}});var k=o(g,2),m=t(k);{var c=s=>{var f=qr(),u=o(t(f));{var L=G=>{var O=Cr(),oe=t(O,!0);a(O),b(()=>l(oe,n.account.emailUpdateConfirm)),v(G,O)};C(u,G=>{e(I)&&G(L)})}a(f),We(3,f,()=>Oe),v(s,f)},P=s=>{var f=fe(),u=ie(f);{var L=G=>{var O=jr(),oe=t(O,!0);a(O),b(()=>l(oe,e(j))),We(3,O,()=>Oe),v(G,O)};C(u,G=>{e(j)&&G(L)},!0)}v(s,f)};C(m,s=>{e(z)?s(c):s(P,!1)})}a(k),a(K),a(B),b(()=>l(we,n.account.optionalValues)),v(R,B),Te()}var Er=bt('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Mr(R,p){let r=me(p,"opacity",3,.9),y=me(p,"width",3,24),n=me(p,"color",3,"currentColor");var w=Er();ze(w,"stroke-width",2),b(()=>{ze(w,"stroke",n()),ze(w,"width",y()),ze(w,"opacity",r())}),v(R,w)}var Tr=T('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),zr=T('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Kr=T('<div class="keysHeader svelte-q7vfo0"> </div>'),Lr=T("<div><!></div>"),Wr=T('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Br=T('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Rr=T('<div class="button svelte-q7vfo0"><!></div>'),Vr=T('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Ja(R,p){Me(p,!0);let r=me(p,"user",19,()=>({})),y=Le(),n=q(!1),w=q(""),$=q(!1),h=q(r().account_type==="password"),j=q(d([]));Fe(()=>{e(j).length>0&&r().account_type==="passkey"&&i(h,e(j).length>1)});let z=d({passkeyName:""}),I=q(d({}));const _=Ze().shape({passkeyName:Ue().required(y.common.invalidInput).matches(Ea,y.mfa.passkeyNameErr)});Be(()=>{W()});function x(){i(n,!1),i(w,"")}async function W(){let g=await Ka(p.sessionInfo.user_id),k=await g.json();g.ok?i(j,d(k)):console.error("error fetching passkeys: "+k.message)}async function U(){if(x(),!await he())return;const g=z.passkeyName;if(g.length<2){i(n,!0),i(w,d(y.mfa.passkeyNameErr));return}let k=await Mt(r().id,{passkey_name:g});if(k.status===200){let m=await k.json();m.publicKey.challenge=Je(m.publicKey.challenge),m.publicKey.user.id=Je(m.publicKey.user.id),m.publicKey.excludeCredentials=m.publicKey.excludeCredentials,m.publicKey.excludeCredentials&&(m.publicKey.excludeCredentials=m.publicKey.excludeCredentials.map(s=>(s.id=Je(s.id),s)));let c=await navigator.credentials.create(m),P={passkey_name:g,data:{id:c.id,rawId:Re(c.rawId),response:{attestationObject:Re(c.response.attestationObject),clientDataJSON:Re(c.response.clientDataJSON)},type:c.type}};k=await Tt(r().id,P),k.status===201?(i($,!1),z.passkeyName="",await W()):console.error(k)}else i(n,!0),i(w,d(y.mfa.errorReg))}async function S(){x();let g=await Wa(r().id,{purpose:"Test"});if(g.status===200){let k=await g.json(),m=k.rcr;m.publicKey.challenge=Je(m.publicKey.challenge);for(let s of m.publicKey.allowCredentials)s.id=Je(s.id);let c;try{c=await navigator.credentials.get(m)}catch{i(n,!0),i(w,d(y.mfa.invalidKeyUsed));return}let P={code:k.code,data:{id:c.id,rawId:Re(c.rawId),response:{authenticatorData:Re(c.response.authenticatorData),clientDataJSON:Re(c.response.clientDataJSON),signature:Re(c.response.signature)},type:c.type}};g=await zt(r().id,P),g.status===202?(i(w,d(y.mfa.testSuccess)),await W()):console.error(g)}else i(n,!0),i(w,d(y.mfa.testError))}async function A(g){let k=await Kt(r().id,g);if(k.status===200)await W();else{let m=await k.json();i(n,!0),i(w,d(m.message))}}async function he(){try{return await _.validate(z,{abortEarly:!1}),i(I,d({})),!0}catch(g){return i(I,d(He(g))),!1}}var X=Vr(),B=t(X),K=t(B),re=o(K,3);a(B);var ne=o(B,2);{var se=g=>{var k=Tr(),m=ie(k);Ke(m,{autocomplete:"off",get placeholder(){return y.mfa.passkeyName},autofocus:!0,get value(){return z.passkeyName},set value(f){z.passkeyName=f},get error(){return e(I).passkeyName},set error(f){e(I).passkeyName=f},$$events:{input:he,enter:U},children:(f,u)=>{J();var L=H();b(()=>l(L,y.mfa.passkeyName)),v(f,L)},$$slots:{default:!0}});var c=o(m,2),P=t(c);Pe(P,{level:1,$$events:{click:U},children:(f,u)=>{J();var L=H();b(()=>l(L,y.mfa.register)),v(f,L)},$$slots:{default:!0}});var s=o(P,2);Pe(s,{level:4,$$events:{click:()=>i($,!1)},children:(f,u)=>{J();var L=H();b(()=>l(L,y.common.cancel)),v(f,L)},$$slots:{default:!0}}),a(c),v(g,k)},le=g=>{var k=zr(),m=t(k);Pe(m,{level:3,$$events:{click:()=>i($,!0)},children:(c,P)=>{J();var s=H();b(()=>l(s,y.mfa.registerNew)),v(c,s)},$$slots:{default:!0}}),a(k),v(g,k)};C(ne,g=>{e($)?g(se):g(le,!1)})}var we=o(ne,2);{var ve=g=>{var k=Kr(),m=t(k,!0);a(k),b(()=>l(m,y.mfa.registerdKeys)),v(g,k)};C(we,g=>{e(j).length>0&&g(ve)})}var ce=o(we,2);Sa(ce,21,()=>e(j),g=>g.name,(g,k)=>{var m=Br(),c=t(m),P=t(c),s=o(P),f=t(s),u=t(f,!0);a(f);var L=o(f,2);{var G=ee=>{Xt(ee,{get text(){return y.account.userVerifiedTooltip},children:(ue,F)=>{var ae=Lr();Ta(ae,"margin-bottom","-.25rem");var ke=t(ae);Mr(ke,{width:18,color:"var(--col-acnt)"}),a(ae),v(ue,ae)},$$slots:{default:!0}})};C(L,ee=>{e(k).user_verified&&ee(G)})}a(s),a(c);var O=o(c,2),oe=t(O),de=o(oe),Ie=t(de,!0);b(()=>l(Ie,Ae(e(k).registered))),a(de),a(O);var ge=o(O,2),be=t(ge),ye=o(be),$e=t(ye,!0);b(()=>l($e,Ae(e(k).last_used))),a(ye),a(ge);var M=o(ge,2);{var Q=ee=>{var ue=Wr(),F=o(t(ue),2),ae=t(F);Pe(ae,{level:4,$$events:{click:()=>A(e(k).name)},children:(ke,Ce)=>{J();var De=H();b(()=>l(De,y.mfa.delete.toUpperCase())),v(ke,De)},$$slots:{default:!0}}),a(F),a(ue),v(ee,ue)};C(M,ee=>{e(h)&&ee(Q)})}a(m),b(()=>{l(P,`${`${y.mfa.passkeyName}: `??""} `),l(u,e(k).name),l(oe,`${`${y.mfa.registerd}: `??""} `),l(be,`${`${y.mfa.lastUsed}: `??""} `)}),v(g,m)}),a(ce);var pe=o(ce,2);{var D=g=>{var k=Rr(),m=t(k);Pe(m,{level:1,$$events:{click:S},children:(c,P)=>{J();var s=H();b(()=>l(s,y.mfa.test)),v(c,s)},$$slots:{default:!0}}),a(k),v(g,k)};C(pe,g=>{e(j).length>0&&g(D)})}var N=o(pe,2),E=t(N,!0);a(N),a(X),b(()=>{l(K,`${y.mfa.p1??""} `),l(re,` ${y.mfa.p2??""}`),La(N,"msg",!e(n)),La(N,"err",e(n)),l(E,e(w))}),v(R,X),Te()}var Sr=T('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Ar(R,p){Me(p,!0);let r=me(p,"formValues",31,()=>d({})),y=me(p,"btnWidth",3,"4rem"),n=me(p,"hideCurrentPassword",3,!1),w=me(p,"isValid",15),$=Le();w(U);let h=q(!1),j=q(""),z=q(void 0),I=q(d({})),_=je(()=>{var B;return((B=r().new)==null?void 0:B.length)>6&&r().new===r().verify});const x=Ze().shape({current:Ue().required($.account.passwordCurrReq),new:Ue().required($.account.passwordNewReq),verify:Ue().required($.account.passwordNoMatch)}),W=Ze().shape({new:Ue().required($.account.passwordNewReq),verify:Ue().required($.account.passwordNoMatch)});Be(async()=>{let B=await Lt(),K=await B.json();B.ok?i(z,d(K)):i(j,d(K.message))});async function U(){if(i(j,""),n())try{await W.validate(r(),{abortEarly:!1}),i(I,d({}))}catch(B){return i(I,d(He(B))),!1}else try{await x.validate(r(),{abortEarly:!1}),i(I,d({}))}catch(B){return i(I,d(He(B))),!1}return e(h)?r().new.length>256?(i(j,"max 256"),!1):r().new!==r().verify?(i(j,d($.account.passwordNoMatch)),!1):!0:(i(j,d($.account.passwordPolicyFollow)),!1)}function S(){const B=e(z).length_min>20?e(z).length_min:20;let K=Wt(B,e(z).include_lower_case,e(z).include_upper_case,e(z).include_digits,e(z).include_special);r(r().new=K,!0),r(r().verify=K,!0)}var A=fe(),he=ie(A);{var X=B=>{var K=Sr(),re=t(K);cr(re,{t:$,get policy(){return e(z)},get password(){return r().new},get accepted(){return e(h)},set accepted(D){i(h,d(D))}});var ne=o(re,2);{var se=D=>{ha(D,{get error(){return e(I).current},autocomplete:"current-password",get placeholder(){return $.account.passwordCurr},get width(){return p.inputWidth},get value(){return r().current},set value(N){r(r().current=N,!0)},$$events:{input:U},children:(N,E)=>{J();var g=H();b(()=>l(g,$.account.passwordCurr.toUpperCase())),v(N,g)},$$slots:{default:!0}})};C(ne,D=>{n()||D(se)})}var le=o(ne,2);ha(le,{get error(){return e(I).new},autocomplete:"new-password",get placeholder(){return $.account.passwordNew},get showCopy(){return e(_)},get width(){return p.inputWidth},get value(){return r().new},set value(D){r(r().new=D,!0)},$$events:{input:U},children:(D,N)=>{J();var E=H();b(()=>l(E,$.account.passwordNew.toUpperCase())),v(D,E)},$$slots:{default:!0}});var we=o(le,2);ha(we,{get error(){return e(I).verify},autocomplete:"new-password",get placeholder(){return $.account.passwordConfirm},get showCopy(){return e(_)},get width(){return p.inputWidth},get value(){return r().verify},set value(D){r(r().verify=D,!0)},$$events:{input:U},children:(D,N)=>{J();var E=H();b(()=>l(E,$.account.passwordConfirm.toUpperCase())),v(D,E)},$$slots:{default:!0}});var ve=o(we,2);Pe(ve,{level:2,get width(){return y()},$$events:{click:S},children:(D,N)=>{J();var E=H();b(()=>l(E,$.account.generateRandom)),v(D,E)},$$slots:{default:!0}});var ce=o(ve,2),pe=t(ce,!0);a(ce),a(K),b(()=>l(pe,e(j))),v(B,K)};C(he,B=>{e(z)&&B(X)})}return v(R,A),Te({isPwdValid:U})}var Or=T('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Fr=T('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),Hr=T("<div><!></div>"),Jr=T('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),Zr=T('<div class="success svelte-od1aaa">Update successful</div>'),Yr=T('<div class="err svelte-od1aaa"> </div>'),Gr=T('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),Xr=T('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function Za(R,p){Me(p,!0);let r=me(p,"user",19,()=>({})),y=me(p,"viewModePhone",3,!1),n=Le(),w=je(()=>y()?"calc(100vw - 1.5rem)":"300px");const $="13rem";let h=r().account_type,j=q(d([])),z=q(void 0),I=q(!1),_=q(!1),x=q(""),W=q(!1),U=q(void 0),S=q(d({current:"",new:"",verify:""})),A=je(()=>e(j).filter(c=>c.user_verified).length>0);Be(()=>{he()});async function he(){let c=await Ka(r().id),P=await c.json();c.ok?i(j,d(P)):console.error("error fetching passkeys: "+P.message)}async function X(){let c=await Bt(r().id);if(c.ok)window.location.reload();else{let P=await c.json();console.error("error fetching passkeys: "+P.message)}}async function B(){e(j).length>0?await K():await re()}async function K(){if(!await e(z)()){i(x,d(n.common.invalidInput));return}const c=await Wa(r().id,{purpose:"PasswordNew"});i(U,d(await c.json()))}async function re(c){if(!await e(z)()){i(x,d(n.common.invalidInput));return}i(_,!0);let P={password_new:e(S).new};c?P.mfa_code=c:P.password_current=e(S).current;let s=await za(r().id,P);if(s.ok)i(W,!0),i(S,d({})),window.location.reload();else{let f=await s.json();i(x,d(f.message))}i(_,!1)}function ne(){i(U,void 0),i(x,d(n.mfa.errorReg))}function se(c){c&&(i(U,void 0),re(c.code))}async function le(){let c=await Rt({email:r().email});if(c.ok)i(W,!0);else{let P=await c.json();i(x,d(P.message))}}var we=Xr(),ve=t(we),ce=t(ve);{var pe=c=>{dr(c,{purpose:"PasswordNew",onSuccess:se,onError:ne,get data(){return e(U)},set data(P){i(U,d(P))}})};C(ce,c=>{e(U)&&c(pe)})}var D=o(ce,2);{var N=c=>{var P=Or(),s=t(P),f=t(s,!0);a(s);var u=o(s,2),L=t(u),G=t(L,!0);a(L),a(u);var O=o(u,2),oe=t(O,!0);a(O);var de=o(O,2);{var Ie=be=>{na(be,{check:!0})},ge=be=>{Pe(be,{width:$,level:3,$$events:{click:le},children:(ye,$e)=>{J();var M=H();b(()=>l(M,n.account.passwordReset)),v(ye,M)},$$slots:{default:!0}})};C(de,be=>{e(W)?be(Ie):be(ge,!1)})}a(P),b(()=>{l(f,n.account.federatedConvertPassword1),l(G,p.authProvider.name||"UNKNOWN"),l(oe,n.account.federatedConvertPassword2)}),v(c,P)};C(D,c=>{h==="federated"&&c(N)})}var E=o(D,2);{var g=c=>{var P=Fr(),s=ie(P),f=t(s,!0);a(s);var u=o(s,2),L=t(u,!0);a(u);var G=o(u,2),O=t(G,!0);a(G);var oe=o(G,2);Pe(oe,{width:$,level:3,$$events:{click:()=>i(I,!0)},children:(de,Ie)=>{J();var ge=H();b(()=>l(ge,n.account.convertAccount)),v(de,ge)},$$slots:{default:!0}}),b(()=>{l(f,n.account.accTypePasskeyText1),l(L,n.account.accTypePasskeyText2),l(O,n.account.accTypePasskeyText3)}),v(c,P)};C(E,c=>{(h==="passkey"||h==="federated_passkey")&&!e(I)&&c(g)})}var k=o(E,2);{var m=c=>{var P=Gr(),s=ie(P),f=t(s),u=je(()=>!(h==="password"&&e(j).length<1));Ar(f,{btnWidth:$,get inputWidth(){return e(w)},get hideCurrentPassword(){return e(u)},get formValues(){return e(S)},set formValues(M){i(S,d(M))},get isValid(){return e(z)},set isValid(M){i(z,d(M))}});var L=o(f,2),G=t(L);Pe(G,{width:$,level:1,get isLoading(){return e(_)},set isLoading(M){i(_,d(M))},$$events:{click:B},children:(M,Q)=>{J();var ee=H();b(()=>l(ee,n.common.save)),v(M,ee)},$$slots:{default:!0}}),a(L);var O=o(L,2);{var oe=M=>{var Q=Hr(),ee=t(Q);Pe(ee,{width:$,level:4,$$events:{click:()=>i(I,!1)},children:(ue,F)=>{J();var ae=H();b(()=>l(ae,n.common.cancel)),v(ue,ae)},$$slots:{default:!0}}),a(Q),v(M,Q)};C(O,M=>{e(I)&&!e(_)&&M(oe)})}a(s);var de=o(s,2);{var Ie=M=>{var Q=Jr(),ee=t(Q),ue=t(ee,!0);a(ee);var F=o(ee,2),ae=t(F,!0);a(F);var ke=o(F,2);Pe(ke,{width:$,level:3,$$events:{click:X},children:(Ce,De)=>{J();var Ve=H();b(()=>l(Ve,n.account.convertAccount)),v(Ce,Ve)},$$slots:{default:!0}}),a(Q),b(()=>{l(ue,n.account.convertAccount),l(ae,n.account.convertAccountP1)}),v(M,Q)};C(de,M=>{!e(I)&&e(A)&&M(Ie)})}var ge=o(de,2),be=t(ge);{var ye=M=>{var Q=Zr();We(3,Q,()=>Oe),v(M,Q)},$e=M=>{var Q=fe(),ee=ie(Q);{var ue=F=>{var ae=Yr(),ke=t(ae,!0);a(ae),b(()=>l(ke,e(x))),We(3,ae,()=>Oe),v(F,ae)};C(ee,F=>{e(x)&&F(ue)},!0)}v(M,Q)};C(be,M=>{e(W)?M(ye):M($e,!1)})}a(ge),We(1,s,()=>Zt,()=>({duration:350})),v(c,P)};C(k,c=>{(h==="password"||h==="federated_password"||e(I))&&c(m)})}a(ve),a(we),v(R,we),Te()}var Qr=T('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),es=T('<div class="success svelte-naxx27">Update successful</div>'),as=T('<div class="err svelte-naxx27"> </div>'),ts=T('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function Ya(R,p){Me(p,!0);let r=me(p,"webIdData",15),y=Le();const n="12rem";let w=q(""),$=q(!1),h=q(!!r().custom_triples),j=ma(r().user_id);Fe(()=>{e($)&&setTimeout(()=>{i($,!1)},3e3)});async function z(){i(w,"");let N=await Vt(r().user_id,r());if(N.ok)i($,!0);else{let E=await N.json();i(w,d(E.message))}}var I=ts(),_=t(I),x=t(_),W=t(x,!0);a(x);var U=o(x,2),S=t(U);ze(S,"href",j);var A=t(S);Ra(A,()=>j.replace("/auth/","/auth/<wbr/>")),a(S),a(U);var he=o(U,2),X=o(t(he),2);Va(X,{get selected(){return r().expose_email},set selected(N){r(r().expose_email=N,!0)}}),a(he);var B=o(he,2),K=t(B),re=t(K,!0);a(K);var ne=o(K,2);Va(ne,{get selected(){return e(h)},set selected(N){i(h,d(N))}}),a(B);var se=o(B,2);{var le=N=>{var E=Qr(),g=t(E),k=t(g,!0);a(g);var m=o(g,2);kt(m),ze(m,"rows",15),ze(m,"cols",40),a(E),b(()=>l(k,y.account.webIdDescData)),Qt(m,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),We(3,E,()=>Yt),v(N,E)};C(se,N=>{e(h)&&N(le)})}var we=o(se,2);Pe(we,{width:n,level:1,$$events:{click:z},children:(N,E)=>{J();var g=H();b(()=>l(g,y.common.save)),v(N,g)},$$slots:{default:!0}});var ve=o(we,2),ce=t(ve);{var pe=N=>{var E=es();We(3,E,()=>Oe),v(N,E)},D=N=>{var E=fe(),g=ie(E);{var k=m=>{var c=as(),P=t(c,!0);a(c),b(()=>l(P,e(w))),We(3,c,()=>Oe),v(m,c)};C(g,m=>{e(w)&&m(k)},!0)}v(N,E)};C(ce,N=>{e($)?N(pe):N(D,!1)})}a(ve),a(_),a(I),b(()=>{l(W,y.account.webIdDesc),l(re,y.account.webIdExpertMode)}),v(R,I),Te()}var rs=T('<div class="container svelte-1nrg3bb"><!></div>');function Ga(R,p){Me(p,!0);var r=rs(),y=t(r);er(y,{get userId(){return p.sessionInfo.user_id}}),a(r),v(R,r),Te()}var ss=T('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),ns=T('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>');function os(R,p){Me(p,!0);const r=tr(),y=()=>rr(_,"$op",r);let n=me(p,"sessionInfo",7),w=me(p,"user",31,()=>d({})),$=me(p,"webIdData",15),h=Le(),j=q(void 0),z=q(void 0),I=q(void 0),_=vr(1,{duration:100}),x=q(d(h.account.navInfo)),W=q(d(h.account.navInfo));Be(async()=>{i(z,d(await St()))});function U(){_.set(0).then(()=>i(x,d(e(W)))).then(()=>_.set(1))}let S=je(()=>e(j)<500);Fe(()=>{e(W)&&U()}),Fe(()=>{e(W)===h.account.navLogout&&At()}),Fe(()=>{var K;e(z)&&((K=w().account_type)!=null&&K.startsWith("federated"))&&i(I,d(e(z).filter(re=>re.id===w().auth_provider_id)[0]))});var A=fe(),he=ie(A);{var X=K=>{var re=ss(),ne=t(re);Aa(ne,{absolute:!0,absoluteRight:!0,updateBackend:!0});var se=o(ne,2),le=t(se),we=t(le,!0);a(le),a(se);var ve=o(se,2),ce=t(ve);Fa(ce,{get selected(){return e(W)},set selected(k){i(W,d(k))}});var pe=o(ce,2),D=t(pe),N=t(D);{var E=k=>{Oa(k,{get webIdData(){return $()},viewModePhone:!0,get authProvider(){return e(I)},get user(){return w()},set user(m){w(m)}})},g=k=>{var m=fe(),c=ie(m);{var P=f=>{Ha(f,{viewModePhone:!0,get user(){return w()},set user(u){w(u)}})},s=f=>{var u=fe(),L=ie(u);{var G=oe=>{Za(oe,{get user(){return w()},get authProvider(){return e(I)},viewModePhone:!0})},O=oe=>{var de=fe(),Ie=ie(de);{var ge=ye=>{Ja(ye,{get sessionInfo(){return n()},get user(){return w()}})},be=ye=>{var $e=fe(),M=ie($e);{var Q=ue=>{Ya(ue,{get webIdData(){return $()},set webIdData(F){$(F)}})},ee=ue=>{var F=fe(),ae=ie(F);{var ke=Ce=>{Ga(Ce,{get sessionInfo(){return n()},set sessionInfo(De){n(De)}})};C(ae,Ce=>{e(x)===h.account.devices&&Ce(ke)},!0)}v(ue,F)};C(M,ue=>{e(x)==="WebID"?ue(Q):ue(ee,!1)},!0)}v(ye,$e)};C(Ie,ye=>{e(x)===h.account.navMfa?ye(ge):ye(be,!1)},!0)}v(oe,de)};C(L,oe=>{e(x)===h.common.password?oe(G):oe(O,!1)},!0)}v(f,u)};C(c,f=>{e(x)===h.account.navEdit?f(P):f(s,!1)},!0)}v(k,m)};C(N,k=>{e(x)===h.account.navInfo?k(E):k(g,!1)})}a(D),a(pe),a(ve),a(re),b(()=>{l(we,h.account.account),ze(D,"style",`opacity: ${y()??""}`)}),v(K,re)},B=K=>{var re=ns(),ne=t(re);Aa(ne,{absolute:!0,updateBackend:!0});var se=o(ne,2),le=t(se),we=t(le,!0);a(le),a(se);var ve=o(se,2),ce=t(ve),pe=je(()=>!!$());Fa(ce,{get showWebId(){return e(pe)},get selected(){return e(W)},set selected(m){i(W,d(m))}});var D=o(ce,2),N=t(D),E=t(N);{var g=m=>{Oa(m,{get webIdData(){return $()},get authProvider(){return e(I)},get user(){return w()},set user(c){w(c)}})},k=m=>{var c=fe(),P=ie(c);{var s=u=>{Ha(u,{get user(){return w()},set user(L){w(L)}})},f=u=>{var L=fe(),G=ie(L);{var O=de=>{Za(de,{get user(){return w()},get authProvider(){return e(I)}})},oe=de=>{var Ie=fe(),ge=ie(Ie);{var be=$e=>{Ja($e,{get sessionInfo(){return n()},get user(){return w()}})},ye=$e=>{var M=fe(),Q=ie(M);{var ee=F=>{Ya(F,{get webIdData(){return $()},set webIdData(ae){$(ae)}})},ue=F=>{var ae=fe(),ke=ie(ae);{var Ce=De=>{Ga(De,{get sessionInfo(){return n()},set sessionInfo(Ve){n(Ve)}})};C(ke,De=>{e(x)===h.account.devices&&De(Ce)},!0)}v(F,ae)};C(Q,F=>{e(x)==="WebID"?F(ee):F(ue,!1)},!0)}v($e,M)};C(ge,$e=>{e(x)===h.account.navMfa?$e(be):$e(ye,!1)},!0)}v(de,Ie)};C(G,de=>{e(x)===h.common.password?de(O):de(oe,!1)},!0)}v(u,L)};C(P,u=>{e(x)===h.account.navEdit?u(s):u(f,!1)},!0)}v(m,c)};C(E,m=>{e(x)===h.account.navInfo?m(g):m(k,!1)})}a(N),a(D),a(ve),a(re),b(()=>{l(we,h.account.account),ze(N,"style",`opacity: ${y()??""}`)}),v(K,re)};C(he,K=>{e(S)?K(X):K(B,!1)})}ar("innerWidth",K=>i(j,d(K))),v(R,A),Te()}function is(R,p){Me(p,!0);let r=Le(),y=q(void 0),n=q(void 0),w=q(void 0),$=q(!1);Be(async()=>{let h=await Ot();h.ok?(i(y,d(await h.json())),h=await Ft(e(y).user_id),h.ok?i(n,d(await h.json())):Ba("account"),h=await Ht(e(y).user_id),h.ok?i(w,d(await h.json())):h.status===404&&i(w,d({user_id:e(y).user_id,is_open:!1})),i($,!0)):Ba("account")}),_t(h=>{b(()=>{var j;return $t.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((j=e(n))==null?void 0:j.email)??""}`})}),ur(R,{children:(h,j)=>{pr(h,{children:(z,I)=>{var _=fe(),x=ie(_);{var W=S=>{Jt(S,{})},U=S=>{os(S,{get sessionInfo(){return e(y)},get user(){return e(n)},set user(A){i(n,d(A))},get webIdData(){return e(w)},set webIdData(A){i(w,d(A))}})};C(x,S=>{e($)?S(U,!1):S(W)})}v(z,_)},$$slots:{default:!0}})},$$slots:{default:!0}}),Te()}export{is as component};
