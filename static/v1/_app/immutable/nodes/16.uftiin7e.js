import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.DvmPJwhI.js";import{p as W,o as n,a6 as R,a as Y,l as e,m as l,f as j,s as u,c as w,r as L}from"../chunks/index-client.Ds4XgiuL.js";import{a as $,t as k,e as ee}from"../chunks/template.DXIK6jcH.js";import{i as te}from"../chunks/if.Du7BDhAX.js";import{e as re}from"../chunks/each.MnMr4iw5.js";import{p as a}from"../chunks/proxy.CB6KOiNf.js";import{E as F,F as ae}from"../chunks/helpers.BTvs6bnN.js";import{E as oe}from"../chunks/Event.BMvicAQd.js";import{b as se}from"../chunks/fetch.DFmyLr06.js";import{O as z}from"../chunks/Options.Bth8pjCB.js";import{u as ie}from"../chunks/i18n_admin.svelte.B9VY-ZfA.js";import{I as A}from"../chunks/InputDateTimeCombo.COgp9L7N.js";import{f as le,a as me,b as B}from"../chunks/form.DekAF1-C.js";import{O as ne}from"../chunks/OrderSearchBar.LuMLhfeB.js";import{C as ve}from"../chunks/ContentAdmin.COLOikfe.js";var pe=k('<div class="row svelte-itq81i">No events found</div>'),ue=k('<!> <div class="row svelte-itq81i"><!> <!></div> <div class="filters svelte-itq81i"><div class="level svelte-itq81i"><!></div> <div class="typ svelte-itq81i"><!></div></div> <!>',1);function fe(O,G){W(G,!0);let f=ie(),v=n(a([])),p=n(a([])),T=n(a(le())),q=n(a(me())),c=n(""),d=n("--:--"),V=n("info"),g=n(a(F[0])),y=["IP","Content"],h=n(a(y[0])),x=n(""),C=["Timestamp","Level","Type"];R(()=>{H()}),R(()=>{let o=e(x).toLowerCase();o?e(h)===y[0]?l(p,a(e(v).filter(m=>{var s;return(s=m.ip)==null?void 0:s.includes(o)}))):e(h)===y[1]&&l(p,a(e(v).filter(m=>{var s,r;return((s=m.typ)==null?void 0:s.toLowerCase().includes(o))||((r=m.text)==null?void 0:r.toLowerCase().includes(o))}))):l(p,a(e(v)))});async function H(){let o=B(e(T),e(q));if(!o){console.error("from ts invalid",o);return}let m;e(c)&&e(d)&&(m=B(e(c),e(d)));let s={from:o,until:m,level:e(V),typ:e(g)!==F[0]?e(g):void 0},r=await se("/auth/v1/events",s);r.body?l(v,a(r.body)):console.error(r.error)}function J(o,m){let s=m==="up";o===C[0]?e(v).sort((r,i)=>s?r.timestamp-i.timestamp:i.timestamp-r.timestamp):o===C[1]?e(v).sort((r,i)=>s?r.level.localeCompare(i.level):i.level.localeCompare(r.level)):o===C[2]&&e(v).sort((r,i)=>s?r.typ.localeCompare(i.typ):i.typ.localeCompare(r.typ))}ve(O,{children:(o,m)=>{var s=ue(),r=j(s);ne(r,{searchOptions:y,orderOptions:C,onChangeOrder:J,firstDirReverse:!0,get searchOption(){return e(h)},set searchOption(t){l(h,a(t))},get value(){return e(x)},set value(t){l(x,a(t))}});var i=u(r,2),N=w(i);A(N,{get label(){return f.common.from},withTime:!0,get value(){return e(T)},set value(t){l(T,a(t))},get timeValue(){return e(q)},set timeValue(t){l(q,a(t))}});var K=u(N,2);A(K,{get label(){return f.common.until},withTime:!0,withDelete:!0,get value(){return e(c)},set value(t){l(c,a(t))},get timeValue(){return e(d)},set timeValue(t){l(d,a(t))}}),L(i);var D=u(i,2),E=w(D),S=w(E);z(S,{get ariaLabel(){return f.events.eventLevel},options:ae,borderless:!0,get value(){return e(V)},set value(t){l(V,a(t))}}),L(E);var P=u(E,2),U=w(P);z(U,{get ariaLabel(){return f.events.eventType},options:F,borderless:!0,get value(){return e(g)},set value(t){l(g,a(t))}}),L(P),L(D);var X=u(D,2);{var Z=t=>{var b=pe();$(t,b)},_=t=>{var b=ee(),M=j(b);re(M,17,()=>e(p),I=>I.id,(I,Q)=>{oe(I,{get event(){return e(Q)},inline:!0})}),$(t,b)};te(X,t=>{e(p).length===0?t(Z):t(_,!1)})}$(o,s)},$$slots:{default:!0}}),Y()}function ce(O){fe(O,{})}export{ce as component};
