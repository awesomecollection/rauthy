import"../chunks/disclose-version.BDr9Qe-U.js";import{a6 as f,p as Me,b as ma,a7 as t,a5 as i,a9 as a,a as We,a4 as le,g as e,h as De,a8 as Z,a3 as K,j as v,o as Fe,$ as yt}from"../chunks/index-client.Cqn5bTAA.js";import{h as $t}from"../chunks/svelte-head.DTZb8QfM.js";import{a as n,n as za,t as z,c as xe,b as J}from"../chunks/template.A7ni-K4i.js";import{i as D}from"../chunks/if.CfO-_epY.js";import{p}from"../chunks/proxy.Ce5Ub1RB.js";import{O as Oe,a8 as ha,a9 as kt,_ as _t,P as xt,aa as Nt,S as It,u as ja,v as Pt,ab as Ct,ac as Ut,ad as Dt,ae as Ea,af as Ma,n as Se,ag as Wa,ah as qt,F as Qe,G as Te,ai as zt,B as Ka,Z as jt,aj as Et,ak as Mt,A as Wt,al as Kt,V as Lt,am as Vt,an as Rt,I as Tt,a0 as At,ao as Ot,a1 as La,ap as Bt}from"../chunks/dataFetching.BTF7Y2Cd.js";import{d as Va,e as Ra,s as l,r as Ft}from"../chunks/render.BxZ_8nPF.js";import{s as Ne,i as G,j as H,b as Ta,c as Re,h as Be,t as Aa,n as St,d as Qt}from"../chunks/helpers.CZ9R9OcM.js";import{h as Oa,T as Zt,a as Jt,S as Ba,b as Gt,D as Ht,c as Xt}from"../chunks/Devices.Cz4gxWug.js";import{p as X,s as Yt,a as er}from"../chunks/props.YICxVAwD.js";import{r as fa}from"../chunks/legacy-client.B3KsQmEJ.js";import{B as ar,e as Fa,T as tr}from"../chunks/ThemeSwitch.Nnphyg3I.js";import{C as sa}from"../chunks/CheckIcon.iy0kaw_K.js";import{B as Pe}from"../chunks/Button.Ch35LVs2.js";import{s as rr}from"../chunks/snippet.YItZinX2.js";import{b as sr}from"../chunks/this.ETDJznD-.js";import{u as Ke}from"../chunks/i18n.svelte.CZcZQkVy.js";import{u as or}from"../chunks/param.svelte.BjpJyl57.js";import{c as Ze,a as Ce,b as ir,I as Le}from"../chunks/Input.DikYy5qt.js";import{t as nr}from"../chunks/tweened.D7sgWmKu.js";import{L as Sa}from"../chunks/LangSelector.BJ1Lurmb.js";import{P as cr}from"../chunks/PasswordPolicy.DXpUlmha.js";import{P as wa}from"../chunks/PasswordInput.PI3FNiBa.js";import{W as lr}from"../chunks/WebauthnRequest.CQBdNqvu.js";import{T as vr}from"../chunks/Template.DXDiqOj9.js";import{M as dr,C as ur}from"../chunks/ContentCenter.DAqX6TIP.js";var pr=za('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function mr(O,d){let r=X(d,"opacity",3,.9),b=X(d,"width",3,"1.5rem"),o=X(d,"color",3,"hsl(var(--error))");var u=pr();Ne(u,"stroke-width",2),f(()=>{Ne(u,"width",b()),Ne(u,"color",o()),Ne(u,"opacity",r())}),n(O,u)}function hr(O,d,r){d()||r()}function fr(O){O.stopPropagation()}var wr=z('<span class="closeIcon svelte-19y6abi"><!></span>'),gr=z('<div class="relative"><div class="absolute close svelte-19y6abi"><!></div></div>'),br=z('<dialog aria-modal="true" class="svelte-19y6abi"><div role="none" class="svelte-19y6abi"><!> <!></div></dialog>');function yr(O,d){Me(d,!0);let r=X(d,"showModal",15),b=X(d,"closeModal",15),o=X(d,"strict",3,!1),u=X(d,"prerender",3,!1),y=Ke(),h;ma(()=>{b(j)}),ma(()=>{r()&&(h==null||h.showModal())});function j(U){U==null||U.preventDefault(),h==null||h.close(),r(!1)}var $=br();$.__click=[hr,o,j];var x=t($);x.__click=[fr];var W=t(x);{var I=U=>{var R=gr(),re=t(R),Y=t(re);ar(Y,{get ariaLabel(){return y.common.close},invisible:!0,onclick:j,children:(L,ee)=>{var V=wr(),F=t(V);mr(F,{color:"currentColor",width:"1.2rem"}),a(V),n(L,V)},$$slots:{default:!0}}),a(re),a(R),n(U,R)};D(W,U=>{o()||U(I)})}var B=i(W,2);{var C=U=>{var R=xe(),re=le(R);rr(re,()=>d.children),n(U,R)};D(B,U=>{(u()||r())&&U(C)})}a(x),a($),sr($,U=>h=U,()=>h),f(()=>Ne($,"data-strict",o())),Ra("close",$,()=>{var U;r(!1),(U=d.onClose)==null||U.call(d)}),n(O,$),We()}Va(["click"]);var $r=z('<div class="link-err value svelte-bckoh9"> </div>'),kr=z('<div class="fed-btn svelte-bckoh9"><!> <!></div>'),_r=(O,d)=>v(d,!e(d)),xr=z('<div class="flex-inline svelte-bckoh9"><img alt="" width="20" height="20"> <span class="provider-name svelte-bckoh9"> </span></div>'),Nr=z('<p> </p> <div class="providers svelte-bckoh9"></div>',1),Ir=z('<div role="button" tabindex="0" class="provider-link svelte-bckoh9"> </div> <!>',1),Pr=z('<div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div>'),Cr=z('<div><div><b>WebID:</b></div> <span class="value svelte-bckoh9"><a target="_blank"><!></a></span></div>'),Ur=z('<div class="container svelte-bckoh9"><div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <div><div class="value svelte-bckoh9"> </div> <!></div></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div class="row svelte-bckoh9"><div><b> </b></div> <!></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <div><div><b> </b></div> <span class="value svelte-bckoh9"> </span></div> <!> <!></div>');function Qa(O,d){Me(d,!0);let r=X(d,"user",15),b=X(d,"viewModePhone",3,!1),o=Ke(),u=K(!1),y=K(!1),h=De(()=>{var S;return(S=r().account_type)==null?void 0:S.startsWith("federated")}),j=De(()=>{var S;return e(h)?`${r().account_type}: ${((S=d.authProvider)==null?void 0:S.name)||""}`:r().account_type}),$=De(()=>b()?"rowPhone":"row"),x=De(()=>b()?"labelPhone":"label");function W(S){_t(64,(ue,{challenge:ke,verifier:_e})=>{ue||(localStorage.setItem(xt,_e),I(S,ke))})}async function I(S,ue){let ke={email:r().email,client_id:"rauthy",redirect_uri:window.location.href,provider_id:S,pkce_challenge:ue},_e=await Nt(S,ke);if(_e.ok){const Ie=await _e.text();It(Ie),window.location.href=_e.headers.get("location")}else{let Ie=await _e.json();console.error(Ie)}}async function B(){let S=await kt(),ue=await S.json();S.ok?r(ue):v(u,!0)}var C=Ur(),U=t(C),R=t(U),re=t(R),Y=t(re);a(re),a(R);var L=i(R,2),ee=t(L,!0);a(L),a(U);var V=i(U,2),F=t(V),pe=t(F),ie=t(pe);a(pe),a(F);var ne=i(F,2),me=t(ne,!0);a(ne),a(V);var te=i(V,2),ve=t(te),T=t(ve),P=t(T);a(T),a(ve);var E=i(ve,2),g=t(E,!0);a(E),a(te);var _=i(te,2),w=t(_),c=t(w),N=t(c);a(c),a(w);var s=i(w,2),k=t(s,!0);a(s),a(_);var m=i(_,2),M=t(m),Q=t(M),ae=t(Q);a(Q),a(M);var he=i(M,2),de=t(he),we=t(de,!0);a(de);var ge=i(de,2);{var $e=S=>{var ue=kr(),ke=t(ue);Pe(ke,{level:3,$$events:{click:B},children:(Ue,ze)=>{Z();var Ae=J();f(()=>l(Ae,o.account.providerUnlink)),n(Ue,Ae)},$$slots:{default:!0}});var _e=i(ke,2);{var Ie=Ue=>{var ze=$r(),Ae=t(ze,!0);a(ze),f(()=>l(Ae,o.account.providerUnlinkDesc)),n(Ue,ze)};D(_e,Ue=>{e(u)&&Ue(Ie)})}a(ue),n(S,ue)},qe=S=>{var ue=xe(),ke=le(ue);{var _e=Ie=>{var Ue=Ir(),ze=le(Ue);ze.__click=[_r,y];var Ae=t(ze,!0);a(ze);var ft=i(ze,2);yr(ft,{get showModal(){return e(y)},set showModal(la){v(y,p(la))},children:(la,ds)=>{var Ca=Nr(),va=le(Ca),wt=t(va,!0);a(va);var Ua=i(va,2);Fa(Ua,21,()=>d.providers,da=>da.id,(da,ua)=>{Pe(da,{level:3,$$events:{click:()=>W(e(ua).id)},children:(gt,us)=>{var pa=xr(),Da=t(pa),qa=i(Da,2),bt=t(qa,!0);a(qa),a(pa),f(()=>{Ne(Da,"src",`/auth/v1/providers/${e(ua).id}/img`),l(bt,e(ua).name)}),n(gt,pa)},$$slots:{default:!0}})}),a(Ua),f(()=>l(wt,o.account.providerLinkDesc)),n(la,Ca)},$$slots:{default:!0}}),f(()=>l(Ae,o.account.providerLink)),Ra("keypress",ze,()=>v(y,!e(y))),n(Ie,Ue)};D(ke,Ie=>{d.providers.length>0&&Ie(_e)},!0)}n(S,ue)};D(ge,S=>{e(h)?S($e):S(qe,!1)})}a(he),a(m);var be=i(m,2),q=t(be),se=t(q),oe=t(se);a(se),a(q);var ye=i(q,2),ce=t(ye,!0);a(ye),a(be);var A=i(be,2),fe=t(A),Ve=t(fe),je=t(Ve);a(Ve),a(fe);var Ee=i(fe,2),oa=t(Ee,!0);a(Ee),a(A);var ia=i(A,2),Je=t(ia),ga=t(Je),et=t(ga);a(ga),a(Je);var at=i(Je,2),tt=De(()=>!!r().webauthn_user_id);sa(at,{get check(){return e(tt)}}),a(ia);var na=i(ia,2),Ge=t(na),ba=t(Ge),rt=t(ba);a(ba),a(Ge);var st=i(Ge,2);sa(st,{get check(){return r().enabled}}),a(na);var ca=i(na,2),He=t(ca),ya=t(He),ot=t(ya);a(ya),a(He);var it=i(He,2);sa(it,{get check(){return r().email_verified}}),a(ca);var Xe=i(ca,2),Ye=t(Xe),$a=t(Ye),nt=t($a);a($a),a(Ye);var ka=i(Ye,2),ct=t(ka,!0);f(()=>l(ct,Oe(r().last_login))),a(ka),a(Xe);var ea=i(Xe,2),aa=t(ea),_a=t(aa),lt=t(_a);a(_a),a(aa);var xa=i(aa,2),vt=t(xa,!0);f(()=>l(vt,r().password_expires&&Oe(r().password_expires)||o.common.never)),a(xa),a(ea);var ta=i(ea,2),ra=t(ta),Na=t(ra),dt=t(Na);a(Na),a(ra);var Ia=i(ra,2),ut=t(Ia,!0);f(()=>l(ut,Oe(r().created_at))),a(Ia),a(ta);var Pa=i(ta,2);{var pt=S=>{var ue=Pr(),ke=t(ue),_e=t(ke),Ie=t(_e);a(_e),a(ke);var Ue=i(ke,2),ze=t(Ue,!0);f(()=>l(ze,Oe(r().user_expires))),a(Ue),a(ue),f(()=>{G(ue,H(e($)),"svelte-bckoh9"),G(ke,H(e(x)),"svelte-bckoh9"),l(Ie,`${o.account.userExpiry??""}:`)}),n(S,ue)};D(Pa,S=>{r().user_expires&&S(pt)})}var mt=i(Pa,2);{var ht=S=>{var ue=Cr(),ke=t(ue),_e=i(ke,2),Ie=t(_e);f(()=>Ne(Ie,"href",ha(r().id)));var Ue=t(Ie);Oa(Ue,()=>ha(r().id).replace("/auth/","/auth/<wbr/>")),a(Ie),a(_e),a(ue),f(()=>{G(ue,H(e($)),"svelte-bckoh9"),G(ke,H(e(x)),"svelte-bckoh9")}),n(S,ue)};D(mt,S=>{d.webIdData&&S(ht)})}a(C),f(()=>{G(U,H(e($)),"svelte-bckoh9"),G(R,H(e(x)),"svelte-bckoh9"),l(Y,`${o.common.email??""}:`),l(ee,r().email),G(V,H(e($)),"svelte-bckoh9"),G(F,H(e(x)),"svelte-bckoh9"),l(ie,`${o.account.givenName??""}:`),l(me,r().given_name),G(te,H(e($)),"svelte-bckoh9"),G(ve,H(e(x)),"svelte-bckoh9"),l(P,`${o.account.familyName??""}:`),l(g,r().family_name),G(_,H(e($)),"svelte-bckoh9"),G(w,H(e(x)),"svelte-bckoh9"),l(N,`${o.account.user??""} ID:`),l(k,r().id),G(m,H(e($)),"svelte-bckoh9"),G(M,H(e(x)),"svelte-bckoh9"),l(ae,`${o.account.accType??""}:`),l(we,e(j)||""),G(be,H(e($)),"svelte-bckoh9"),G(q,H(e(x)),"svelte-bckoh9"),l(oe,`${o.account.roles??""}:`),l(ce,r().roles||"None"),G(A,H(e($)),"svelte-bckoh9"),G(fe,H(e(x)),"svelte-bckoh9"),l(je,`${o.account.groups??""}:`),l(oa,r().groups||"None"),G(Je,H(e(x)),"svelte-bckoh9"),l(et,`${o.account.mfaActivated??""}:`),G(Ge,H(e(x)),"svelte-bckoh9"),l(rt,`${o.account.userEnabled??""}:`),G(He,H(e(x)),"svelte-bckoh9"),l(ot,`${o.account.emailVerified??""}:`),G(Xe,H(e($)),"svelte-bckoh9"),G(Ye,H(e(x)),"svelte-bckoh9"),l(nt,`${o.account.lastLogin??""}:`),G(ea,H(e($)),"svelte-bckoh9"),G(aa,H(e(x)),"svelte-bckoh9"),l(lt,`${o.account.passwordExpiry??""}:`),G(ta,H(e($)),"svelte-bckoh9"),G(ra,H(e(x)),"svelte-bckoh9"),l(dt,`${o.account.userCreated??""}:`)}),n(O,C),We()}Va(["click"]);function Za(O,d){Me(d,!0);let r=X(d,"selected",15),b=X(d,"showWebId",3,!1),o=Ke(),u=p(b()?[o.account.navInfo,o.account.navEdit,o.common.password,o.account.navMfa,"WebID",o.account.devices,o.account.navLogout]:[o.account.navInfo,o.account.navEdit,o.common.password,o.account.navMfa,o.account.devices,o.account.navLogout]);Fe(()=>{or("v").get()==="devices"&&r(o.account.devices)}),Zt(O,{get labels(){return u},get selected(){return r()},set selected(y){r(y)}}),We()}var Dr=z("<p> </p>"),qr=z('<div class="success svelte-1xh7x72">Update successful <!></div>'),zr=z('<div class="err svelte-1xh7x72"> </div>'),jr=z('<div class="wrapper svelte-1xh7x72"><div class="container svelte-1xh7x72"><!> <!> <!> <div> </div> <!> <!> <!> <!> <!> <!> <!> <div class="bottom svelte-1xh7x72"><!></div></div></div>');function Ja(O,d){Me(d,!0);let r=X(d,"user",31,()=>p({})),b=X(d,"viewModePhone",3,!1),o=Ke(),u=De(()=>b()?"calc(100vw - 1.5rem)":"300px");const y="8rem";let h=K(!1),j=K(""),$=K(!1),x=K(!1),W=p({email:r().email,givenName:r().given_name,familyName:r().family_name}),I=K(p({}));const B=Ze().shape({email:Ce().required(o.account.validEmail).email(o.account.validEmail),givenName:Ce().required(o.account.validGivenName).matches(ja,o.account.validGivenName),familyName:Ce().nullable().matches(Pt,o.account.validFamilyName)});let C=K(p({}));const U=Ze().shape({birthdate:Ce().nullable().trim().matches(Ct,o.common.invalidInput),phone:Ce().nullable().trim().matches(Ut,"+..."),street:Ce().nullable().trim().matches(Dt,o.common.invalidInput),zip:ir().nullable().min(1e3).max(999999),city:Ce().nullable().trim().matches(Ea,o.common.invalidInput),country:Ce().nullable().trim().matches(Ea,o.common.invalidInput)});function R(s){s.code==="Enter"&&re()}async function re(){if(!await Y()){v(j,p(o.common.invalidInput));return}v(h,!0);const s={email:W.email,given_name:W.givenName,family_name:W.familyName||null,user_values:r().user_values};s.user_values.phone&&(s.user_values.phone=s.user_values.phone.replaceAll(" ","")),s.user_values.zip&&(s.user_values.zip=Number.parseInt(s.user_values.zip));let k=await Ma(r().id,s);if(k.ok)v($,!0),r(r().email=W.email,!0),r(r().given_name=W.givenName,!0),r(r().family_name=W.familyName,!0),k.status===202&&v(x,!0);else{let m=await k.json();v(j,p(m.message))}v(h,!1)}async function Y(){let s=!0;try{await B.validate(W,{abortEarly:!1}),v(I,p({}))}catch(k){v(I,p(Se(k))),s=!1}try{await U.validate(r().user_values,{abortEarly:!1}),v(C,p({}))}catch(k){v(C,p(Se(k))),s=!1}return s}var L=jr(),ee=t(L),V=t(ee);Le(V,{autocomplete:"family-name",get placeholder(){return o.common.email},get width(){return e(u)},get value(){return W.email},set value(s){W.email=s},get error(){return e(I).email},set error(s){e(I).email=s},$$events:{input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.common.email.toUpperCase())),n(s,m)},$$slots:{default:!0}});var F=i(V,2);Le(F,{autocomplete:"given-name",get placeholder(){return o.account.givenName},get width(){return e(u)},get value(){return W.givenName},set value(s){W.givenName=s},get error(){return e(I).givenName},set error(s){e(I).givenName=s},$$events:{input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.givenName.toUpperCase())),n(s,m)},$$slots:{default:!0}});var pe=i(F,2);Le(pe,{autocomplete:"family-name",get placeholder(){return o.account.familyName},get width(){return e(u)},get value(){return W.familyName},set value(s){W.familyName=s},get error(){return e(I).familyName},set error(s){e(I).familyName=s},$$events:{input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.familyName.toUpperCase())),n(s,m)},$$slots:{default:!0}});var ie=i(pe,2);Ta(ie,"margin",".5rem");var ne=t(ie,!0);a(ie);var me=i(ie,2);Le(me,{autocomplete:"street-address",get placeholder(){return o.account.street},get width(){return e(u)},get value(){return r().user_values.street},set value(s){r(r().user_values.street=s,!0)},get error(){return e(C).street},set error(s){e(C).street=s},$$events:{keypress:R,input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.street.toUpperCase())),n(s,m)},$$slots:{default:!0}});var te=i(me,2);Le(te,{type:"number",autocomplete:"postal-code",get placeholder(){return o.account.zip},min:1e3,max:999999,get width(){return e(u)},get value(){return r().user_values.zip},set value(s){r(r().user_values.zip=s,!0)},get error(){return e(C).zip},set error(s){e(C).zip=s},$$events:{keypress:R,input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.zip.toUpperCase())),n(s,m)},$$slots:{default:!0}});var ve=i(te,2);Le(ve,{autocomplete:"adress-level2",get placeholder(){return o.account.city},get width(){return e(u)},get value(){return r().user_values.city},set value(s){r(r().user_values.city=s,!0)},get error(){return e(C).city},set error(s){e(C).city=s},$$events:{keypress:R,input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.city.toUpperCase())),n(s,m)},$$slots:{default:!0}});var T=i(ve,2);Le(T,{autocomplete:"country",get placeholder(){return o.account.country},get width(){return e(u)},get value(){return r().user_values.country},set value(s){r(r().user_values.country=s,!0)},get error(){return e(C).country},set error(s){e(C).country=s},$$events:{keypress:R,input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.country.toUpperCase())),n(s,m)},$$slots:{default:!0}});var P=i(T,2);Le(P,{autocomplete:"tel",get placeholder(){return o.account.phone},get width(){return e(u)},get value(){return r().user_values.phone},set value(s){r(r().user_values.phone=s,!0)},get error(){return e(C).phone},set error(s){e(C).phone=s},$$events:{keypress:R,input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.phone.toUpperCase())),n(s,m)},$$slots:{default:!0}});var E=i(P,2);Le(E,{type:"date",autocomplete:"bday",get placeholder(){return o.account.birthdate},get width(){return e(u)},get value(){return r().user_values.birthdate},set value(s){r(r().user_values.birthdate=s,!0)},get error(){return e(C).birthdate},set error(s){e(C).birthdate=s},$$events:{keypress:R,input:Y},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.account.birthdate.toUpperCase())),n(s,m)},$$slots:{default:!0}});var g=i(E,2);Pe(g,{width:y,level:1,get isLoading(){return e(h)},set isLoading(s){v(h,p(s))},$$events:{click:re},children:(s,k)=>{Z();var m=J();f(()=>l(m,o.common.save)),n(s,m)},$$slots:{default:!0}});var _=i(g,2),w=t(_);{var c=s=>{var k=qr(),m=i(t(k));{var M=Q=>{var ae=Dr(),he=t(ae,!0);a(ae),f(()=>l(he,o.account.emailUpdateConfirm)),n(Q,ae)};D(m,Q=>{e(x)&&Q(M)})}a(k),Re(3,k,()=>Be),n(s,k)},N=s=>{var k=xe(),m=le(k);{var M=Q=>{var ae=zr(),he=t(ae,!0);a(ae),f(()=>l(he,e(j))),Re(3,ae,()=>Be),n(Q,ae)};D(m,Q=>{e(j)&&Q(M)},!0)}n(s,k)};D(w,s=>{e($)?s(c):s(N,!1)})}a(_),a(ee),a(L),f(()=>l(ne,o.account.optionalValues)),n(O,L),We()}var Er=za('<svg fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"></path></svg>');function Mr(O,d){let r=X(d,"opacity",3,.9),b=X(d,"width",3,24),o=X(d,"color",3,"currentColor");var u=Er();Ne(u,"stroke-width",2),f(()=>{Ne(u,"stroke",o()),Ne(u,"width",b()),Ne(u,"opacity",r())}),n(O,u)}var Wr=z('<!> <div class="regBtns svelte-q7vfo0"><!> <!></div>',1),Kr=z('<div class="regNewBtn svelte-q7vfo0"><!></div>'),Lr=z('<div class="keysHeader svelte-q7vfo0"> </div>'),Vr=z("<div><!></div>"),Rr=z('<div class="row svelte-q7vfo0"><div></div> <div class="deleteBtn svelte-q7vfo0"><!></div></div>'),Tr=z('<div class="keyContainer svelte-q7vfo0"><div class="row svelte-q7vfo0"> <div class="nameUv svelte-q7vfo0"><b> </b> <!></div></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <div class="row svelte-q7vfo0"> <span class="font-mono"> </span></div> <!></div>'),Ar=z('<div class="button svelte-q7vfo0"><!></div>'),Or=z('<div class="container svelte-q7vfo0"><p class="svelte-q7vfo0"> <br><br> </p> <!> <!> <div class="keysContainer svelte-q7vfo0"></div> <!> <div class="svelte-q7vfo0"> </div></div>');function Ga(O,d){Me(d,!0);let r=X(d,"user",19,()=>({})),b=Ke(),o=K(!1),u=K(""),y=K(!1),h=K(r().account_type==="password"),j=K(p([]));fa(()=>{e(j).length>0&&r().account_type==="passkey"&&v(h,e(j).length>1)});let $=p({passkeyName:""}),x=K(p({}));const W=Ze().shape({passkeyName:Ce().required(b.common.invalidInput).matches(ja,b.mfa.passkeyNameErr)});Fe(()=>{B()});function I(){v(o,!1),v(u,"")}async function B(){let g=await Wa(d.session.user_id),_=await g.json();g.ok?v(j,p(_)):console.error("error fetching passkeys: "+_.message)}async function C(){if(I(),!await re())return;const g=$.passkeyName;if(g.length<2){v(o,!0),v(u,p(b.mfa.passkeyNameErr));return}let _=await qt(r().id,{passkey_name:g});if(_.status===200){let w=await _.json();w.publicKey.challenge=Qe(w.publicKey.challenge),w.publicKey.user.id=Qe(w.publicKey.user.id),w.publicKey.excludeCredentials=w.publicKey.excludeCredentials,w.publicKey.excludeCredentials&&(w.publicKey.excludeCredentials=w.publicKey.excludeCredentials.map(s=>(s.id=Qe(s.id),s)));let c=await navigator.credentials.create(w),N={passkey_name:g,data:{id:c.id,rawId:Te(c.rawId),response:{attestationObject:Te(c.response.attestationObject),clientDataJSON:Te(c.response.clientDataJSON)},type:c.type}};_=await zt(r().id,N),_.status===201?(v(y,!1),$.passkeyName="",await B()):console.error(_)}else v(o,!0),v(u,p(b.mfa.errorReg))}async function U(){I();let g=await Ka(r().id,{purpose:"Test"});if(g.status===200){let _=await g.json(),w=_.rcr;w.publicKey.challenge=Qe(w.publicKey.challenge);for(let s of w.publicKey.allowCredentials)s.id=Qe(s.id);let c;try{c=await navigator.credentials.get(w)}catch{v(o,!0),v(u,p(b.mfa.invalidKeyUsed));return}let N={code:_.code,data:{id:c.id,rawId:Te(c.rawId),response:{authenticatorData:Te(c.response.authenticatorData),clientDataJSON:Te(c.response.clientDataJSON),signature:Te(c.response.signature)},type:c.type}};g=await jt(r().id,N),g.status===202?(v(u,p(b.mfa.testSuccess)),await B()):console.error(g)}else v(o,!0),v(u,p(b.mfa.testError))}async function R(g){let _=await Et(r().id,g);if(_.status===200)await B();else{let w=await _.json();v(o,!0),v(u,p(w.message))}}async function re(){try{return await W.validate($,{abortEarly:!1}),v(x,p({})),!0}catch(g){return v(x,p(Se(g))),!1}}var Y=Or(),L=t(Y),ee=t(L),V=i(ee,3);a(L);var F=i(L,2);{var pe=g=>{var _=Wr(),w=le(_);Le(w,{autocomplete:"off",get placeholder(){return b.mfa.passkeyName},autofocus:!0,get value(){return $.passkeyName},set value(k){$.passkeyName=k},get error(){return e(x).passkeyName},set error(k){e(x).passkeyName=k},$$events:{input:re,enter:C},children:(k,m)=>{Z();var M=J();f(()=>l(M,b.mfa.passkeyName)),n(k,M)},$$slots:{default:!0}});var c=i(w,2),N=t(c);Pe(N,{level:1,$$events:{click:C},children:(k,m)=>{Z();var M=J();f(()=>l(M,b.mfa.register)),n(k,M)},$$slots:{default:!0}});var s=i(N,2);Pe(s,{level:4,$$events:{click:()=>v(y,!1)},children:(k,m)=>{Z();var M=J();f(()=>l(M,b.common.cancel)),n(k,M)},$$slots:{default:!0}}),a(c),n(g,_)},ie=g=>{var _=Kr(),w=t(_);Pe(w,{level:3,$$events:{click:()=>v(y,!0)},children:(c,N)=>{Z();var s=J();f(()=>l(s,b.mfa.registerNew)),n(c,s)},$$slots:{default:!0}}),a(_),n(g,_)};D(F,g=>{e(y)?g(pe):g(ie,!1)})}var ne=i(F,2);{var me=g=>{var _=Lr(),w=t(_,!0);a(_),f(()=>l(w,b.mfa.registerdKeys)),n(g,_)};D(ne,g=>{e(j).length>0&&g(me)})}var te=i(ne,2);Fa(te,21,()=>e(j),g=>g.name,(g,_)=>{var w=Tr(),c=t(w),N=t(c),s=i(N),k=t(s),m=t(k,!0);a(k);var M=i(k,2);{var Q=oe=>{Jt(oe,{get text(){return b.account.userVerifiedTooltip},children:(ye,ce)=>{var A=Vr();Ta(A,"margin-bottom","-.25rem");var fe=t(A);Mr(fe,{width:18,color:"var(--col-acnt)"}),a(A),n(ye,A)},$$slots:{default:!0}})};D(M,oe=>{e(_).user_verified&&oe(Q)})}a(s),a(c);var ae=i(c,2),he=t(ae),de=i(he),we=t(de,!0);f(()=>l(we,Oe(e(_).registered))),a(de),a(ae);var ge=i(ae,2),$e=t(ge),qe=i($e),be=t(qe,!0);f(()=>l(be,Oe(e(_).last_used))),a(qe),a(ge);var q=i(ge,2);{var se=oe=>{var ye=Rr(),ce=i(t(ye),2),A=t(ce);Pe(A,{level:4,$$events:{click:()=>R(e(_).name)},children:(fe,Ve)=>{Z();var je=J();f(()=>l(je,b.mfa.delete.toUpperCase())),n(fe,je)},$$slots:{default:!0}}),a(ce),a(ye),n(oe,ye)};D(q,oe=>{e(h)&&oe(se)})}a(w),f(()=>{l(N,`${`${b.mfa.passkeyName}: `??""} `),l(m,e(_).name),l(he,`${`${b.mfa.registerd}: `??""} `),l($e,`${`${b.mfa.lastUsed}: `??""} `)}),n(g,w)}),a(te);var ve=i(te,2);{var T=g=>{var _=Ar(),w=t(_);Pe(w,{level:1,$$events:{click:U},children:(c,N)=>{Z();var s=J();f(()=>l(s,b.mfa.test)),n(c,s)},$$slots:{default:!0}}),a(_),n(g,_)};D(ve,g=>{e(j).length>0&&g(T)})}var P=i(ve,2),E=t(P,!0);a(P),a(Y),f(()=>{l(ee,`${b.mfa.p1??""} `),l(V,` ${b.mfa.p2??""}`),Aa(P,"msg",!e(o)),Aa(P,"err",e(o)),l(E,e(u))}),n(O,Y),We()}var Br=z('<div class="container svelte-dpnwj7"><!> <!> <!> <!> <!> <div class="err svelte-dpnwj7"> </div></div>');function Fr(O,d){Me(d,!0);let r=X(d,"formValues",31,()=>p({})),b=X(d,"btnWidth",3,"4rem"),o=X(d,"hideCurrentPassword",3,!1),u=X(d,"isValid",15),y=Ke();u(C);let h=K(!1),j=K(""),$=K(void 0),x=K(p({})),W=De(()=>{var L;return((L=r().new)==null?void 0:L.length)>6&&r().new===r().verify});const I=Ze().shape({current:Ce().required(y.account.passwordCurrReq),new:Ce().required(y.account.passwordNewReq),verify:Ce().required(y.account.passwordNoMatch)}),B=Ze().shape({new:Ce().required(y.account.passwordNewReq),verify:Ce().required(y.account.passwordNoMatch)});Fe(async()=>{let L=await Mt(),ee=await L.json();L.ok?v($,p(ee)):v(j,p(ee.message))});async function C(){if(v(j,""),o())try{await B.validate(r(),{abortEarly:!1}),v(x,p({}))}catch(L){return v(x,p(Se(L))),!1}else try{await I.validate(r(),{abortEarly:!1}),v(x,p({}))}catch(L){return v(x,p(Se(L))),!1}return e(h)?r().new.length>256?(v(j,"max 256"),!1):r().new!==r().verify?(v(j,p(y.account.passwordNoMatch)),!1):!0:(v(j,p(y.account.passwordPolicyFollow)),!1)}function U(){const L=e($).length_min>20?e($).length_min:20;let ee=Wt(L,e($).include_lower_case,e($).include_upper_case,e($).include_digits,e($).include_special);r(r().new=ee,!0),r(r().verify=ee,!0)}var R=xe(),re=le(R);{var Y=L=>{var ee=Br(),V=t(ee);cr(V,{t:y,get policy(){return e($)},get password(){return r().new},get accepted(){return e(h)},set accepted(T){v(h,p(T))}});var F=i(V,2);{var pe=T=>{wa(T,{get error(){return e(x).current},autocomplete:"current-password",get placeholder(){return y.account.passwordCurr},get width(){return d.inputWidth},get value(){return r().current},set value(P){r(r().current=P,!0)},$$events:{input:C},children:(P,E)=>{Z();var g=J();f(()=>l(g,y.account.passwordCurr.toUpperCase())),n(P,g)},$$slots:{default:!0}})};D(F,T=>{o()||T(pe)})}var ie=i(F,2);wa(ie,{get error(){return e(x).new},autocomplete:"new-password",get placeholder(){return y.account.passwordNew},get showCopy(){return e(W)},get width(){return d.inputWidth},get value(){return r().new},set value(T){r(r().new=T,!0)},$$events:{input:C},children:(T,P)=>{Z();var E=J();f(()=>l(E,y.account.passwordNew.toUpperCase())),n(T,E)},$$slots:{default:!0}});var ne=i(ie,2);wa(ne,{get error(){return e(x).verify},autocomplete:"new-password",get placeholder(){return y.account.passwordConfirm},get showCopy(){return e(W)},get width(){return d.inputWidth},get value(){return r().verify},set value(T){r(r().verify=T,!0)},$$events:{input:C},children:(T,P)=>{Z();var E=J();f(()=>l(E,y.account.passwordConfirm.toUpperCase())),n(T,E)},$$slots:{default:!0}});var me=i(ne,2);Pe(me,{level:2,get width(){return b()},$$events:{click:U},children:(T,P)=>{Z();var E=J();f(()=>l(E,y.account.generateRandom)),n(T,E)},$$slots:{default:!0}});var te=i(me,2),ve=t(te,!0);a(te),a(ee),f(()=>l(ve,e(j))),n(L,ee)};D(re,L=>{e($)&&L(Y)})}return n(O,R),We({isPwdValid:C})}var Sr=z('<div class="m-05 svelte-od1aaa"><p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"><b> </b></p> <p class="svelte-od1aaa"> </p> <!></div>'),Qr=z('<p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <p class="svelte-od1aaa"> </p> <!>',1),Zr=z("<div><!></div>"),Jr=z('<div class="convertPasskey svelte-od1aaa"><h3> </h3> <p class="svelte-od1aaa"> </p> <!></div>'),Gr=z('<div class="success svelte-od1aaa">Update successful</div>'),Hr=z('<div class="err svelte-od1aaa"> </div>'),Xr=z('<div><!> <div><!></div> <!></div> <!> <div class="bottom svelte-od1aaa"><!></div>',1),Yr=z('<div class="wrapper svelte-od1aaa"><div class="container svelte-od1aaa"><!> <!> <!> <!></div></div>');function Ha(O,d){Me(d,!0);let r=X(d,"user",19,()=>({})),b=X(d,"viewModePhone",3,!1),o=Ke(),u=De(()=>b()?"calc(100vw - 1.5rem)":"300px");const y="13rem";let h=r().account_type,j=K(p([])),$=K(void 0),x=K(!1),W=K(!1),I=K(""),B=K(!1),C=K(void 0),U=K(p({current:"",new:"",verify:""})),R=De(()=>e(j).filter(c=>c.user_verified).length>0);Fe(()=>{re()});async function re(){let c=await Wa(r().id),N=await c.json();c.ok?v(j,p(N)):console.error("error fetching passkeys: "+N.message)}async function Y(){let c=await Kt(r().id);if(c.ok)window.location.reload();else{let N=await c.json();console.error("error fetching passkeys: "+N.message)}}async function L(){e(j).length>0?await ee():await V()}async function ee(){if(!await e($)()){v(I,p(o.common.invalidInput));return}const c=await Ka(r().id,{purpose:"PasswordNew"});v(C,p(await c.json()))}async function V(c){if(!await e($)()){v(I,p(o.common.invalidInput));return}v(W,!0);let N={password_new:e(U).new};c?N.mfa_code=c:N.password_current=e(U).current;let s=await Ma(r().id,N);if(s.ok)v(B,!0),v(U,p({})),window.location.reload();else{let k=await s.json();v(I,p(k.message))}v(W,!1)}function F(){v(C,void 0),v(I,p(o.mfa.errorReg))}function pe(c){c&&(v(C,void 0),V(c.code))}async function ie(){let c=await Lt({email:r().email});if(c.ok)v(B,!0);else{let N=await c.json();v(I,p(N.message))}}var ne=Yr(),me=t(ne),te=t(me);{var ve=c=>{lr(c,{purpose:"PasswordNew",onSuccess:pe,onError:F,get data(){return e(C)},set data(N){v(C,p(N))}})};D(te,c=>{e(C)&&c(ve)})}var T=i(te,2);{var P=c=>{var N=Sr(),s=t(N),k=t(s,!0);a(s);var m=i(s,2),M=t(m),Q=t(M,!0);a(M),a(m);var ae=i(m,2),he=t(ae,!0);a(ae);var de=i(ae,2);{var we=$e=>{sa($e,{check:!0})},ge=$e=>{Pe($e,{width:y,level:3,$$events:{click:ie},children:(qe,be)=>{Z();var q=J();f(()=>l(q,o.account.passwordReset)),n(qe,q)},$$slots:{default:!0}})};D(de,$e=>{e(B)?$e(we):$e(ge,!1)})}a(N),f(()=>{l(k,o.account.federatedConvertPassword1),l(Q,d.authProvider.name||"UNKNOWN"),l(he,o.account.federatedConvertPassword2)}),n(c,N)};D(T,c=>{h==="federated"&&c(P)})}var E=i(T,2);{var g=c=>{var N=Qr(),s=le(N),k=t(s,!0);a(s);var m=i(s,2),M=t(m,!0);a(m);var Q=i(m,2),ae=t(Q,!0);a(Q);var he=i(Q,2);Pe(he,{width:y,level:3,$$events:{click:()=>v(x,!0)},children:(de,we)=>{Z();var ge=J();f(()=>l(ge,o.account.convertAccount)),n(de,ge)},$$slots:{default:!0}}),f(()=>{l(k,o.account.accTypePasskeyText1),l(M,o.account.accTypePasskeyText2),l(ae,o.account.accTypePasskeyText3)}),n(c,N)};D(E,c=>{(h==="passkey"||h==="federated_passkey")&&!e(x)&&c(g)})}var _=i(E,2);{var w=c=>{var N=Xr(),s=le(N),k=t(s),m=De(()=>!(h==="password"&&e(j).length<1));Fr(k,{btnWidth:y,get inputWidth(){return e(u)},get hideCurrentPassword(){return e(m)},get formValues(){return e(U)},set formValues(q){v(U,p(q))},get isValid(){return e($)},set isValid(q){v($,p(q))}});var M=i(k,2),Q=t(M);Pe(Q,{width:y,level:1,get isLoading(){return e(W)},set isLoading(q){v(W,p(q))},$$events:{click:L},children:(q,se)=>{Z();var oe=J();f(()=>l(oe,o.common.save)),n(q,oe)},$$slots:{default:!0}}),a(M);var ae=i(M,2);{var he=q=>{var se=Zr(),oe=t(se);Pe(oe,{width:y,level:4,$$events:{click:()=>v(x,!1)},children:(ye,ce)=>{Z();var A=J();f(()=>l(A,o.common.cancel)),n(ye,A)},$$slots:{default:!0}}),a(se),n(q,se)};D(ae,q=>{e(x)&&!e(W)&&q(he)})}a(s);var de=i(s,2);{var we=q=>{var se=Jr(),oe=t(se),ye=t(oe,!0);a(oe);var ce=i(oe,2),A=t(ce,!0);a(ce);var fe=i(ce,2);Pe(fe,{width:y,level:3,$$events:{click:Y},children:(Ve,je)=>{Z();var Ee=J();f(()=>l(Ee,o.account.convertAccount)),n(Ve,Ee)},$$slots:{default:!0}}),a(se),f(()=>{l(ye,o.account.convertAccount),l(A,o.account.convertAccountP1)}),n(q,se)};D(de,q=>{!e(x)&&e(R)&&q(we)})}var ge=i(de,2),$e=t(ge);{var qe=q=>{var se=Gr();Re(3,se,()=>Be),n(q,se)},be=q=>{var se=xe(),oe=le(se);{var ye=ce=>{var A=Hr(),fe=t(A,!0);a(A),f(()=>l(fe,e(I))),Re(3,A,()=>Be),n(ce,A)};D(oe,ce=>{e(I)&&ce(ye)},!0)}n(q,se)};D($e,q=>{e(B)?q(qe):q(be,!1)})}a(ge),Re(1,s,()=>St,()=>({duration:350})),n(c,N)};D(_,c=>{(h==="password"||h==="federated_password"||e(x))&&c(w)})}a(me),a(ne),n(O,ne),We()}var es=z('<div><p class="svelte-naxx27"> </p>    <textarea class="font-mono text svelte-naxx27"></textarea></div>'),as=z('<div class="success svelte-naxx27">Update successful</div>'),ts=z('<div class="err svelte-naxx27"> </div>'),rs=z('<div class="wrapper svelte-naxx27"><div class="container svelte-naxx27"><p class="svelte-naxx27"> </p> <p class="svelte-naxx27"><a target="_blank"><!></a></p> <div class="row svelte-naxx27"><div class="label svelte-naxx27">E-Mail</div> <!></div> <div class="row svelte-naxx27"><div class="label svelte-naxx27"> </div> <!></div> <!> <!> <div class="bottom svelte-naxx27"><!></div></div></div>');function Xa(O,d){Me(d,!0);let r=X(d,"webIdData",15),b=Ke();const o="12rem";let u=K(""),y=K(!1),h=K(!!r().custom_triples),j=ha(r().user_id);fa(()=>{e(y)&&setTimeout(()=>{v(y,!1)},3e3)});async function $(){v(u,"");let P=await Vt(r().user_id,r());if(P.ok)v(y,!0);else{let E=await P.json();v(u,p(E.message))}}var x=rs(),W=t(x),I=t(W),B=t(I,!0);a(I);var C=i(I,2),U=t(C);Ne(U,"href",j);var R=t(U);Oa(R,()=>j.replace("/auth/","/auth/<wbr/>")),a(U),a(C);var re=i(C,2),Y=i(t(re),2);Ba(Y,{get selected(){return r().expose_email},set selected(P){r(r().expose_email=P,!0)}}),a(re);var L=i(re,2),ee=t(L),V=t(ee,!0);a(ee);var F=i(ee,2);Ba(F,{get selected(){return e(h)},set selected(P){v(h,p(P))}}),a(L);var pe=i(L,2);{var ie=P=>{var E=es(),g=t(E),_=t(g,!0);a(g);var w=i(g,2);Ft(w),Ne(w,"rows",15),Ne(w,"cols",40),a(E),f(()=>l(_,b.account.webIdDescData)),Gt(w,()=>r().custom_triples,c=>r(r().custom_triples=c,!0)),Re(3,E,()=>Qt),n(P,E)};D(pe,P=>{e(h)&&P(ie)})}var ne=i(pe,2);Pe(ne,{width:o,level:1,$$events:{click:$},children:(P,E)=>{Z();var g=J();f(()=>l(g,b.common.save)),n(P,g)},$$slots:{default:!0}});var me=i(ne,2),te=t(me);{var ve=P=>{var E=as();Re(3,E,()=>Be),n(P,E)},T=P=>{var E=xe(),g=le(E);{var _=w=>{var c=ts(),N=t(c,!0);a(c),f(()=>l(N,e(u))),Re(3,c,()=>Be),n(w,c)};D(g,w=>{e(u)&&w(_)},!0)}n(P,E)};D(te,P=>{e(y)?P(ve):P(T,!1)})}a(me),a(W),a(x),f(()=>{l(B,b.account.webIdDesc),l(V,b.account.webIdExpertMode)}),n(O,x),We()}var ss=z('<div class="container svelte-1nrg3bb"><!></div>');function Ya(O,d){Me(d,!0);var r=ss(),b=t(r);Ht(b,{get userId(){return d.session.user_id}}),a(r),n(O,r),We()}var os=z('<div class="wrapper svelte-47czfz"><!> <div class="headerPhone svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="innerPhone svelte-47czfz"><div><!></div></div></div></div>'),is=z('<div class="wrapper svelte-47czfz"><!> <div class="header svelte-47czfz"><h3> </h3></div> <div class="container svelte-47czfz"><!> <div class="inner svelte-47czfz"><div><!></div></div></div></div>'),ns=z("<!> <!>",1);function cs(O,d){Me(d,!0);const r=Yt(),b=()=>er(W,"$op",r);let o=X(d,"session",7),u=X(d,"user",15),y=X(d,"webIdData",15),h=Ke(),j=K(void 0),$=K(p([])),x=De(()=>{var V;if((V=u().account_type)!=null&&V.startsWith("federated"))return e($).filter(F=>F.id===u().auth_provider_id)[0]}),W=nr(1,{duration:100}),I=K(p(h.account.navInfo)),B=K(p(h.account.navInfo));function C(){W.set(0).then(()=>v(I,p(e(B)))).then(()=>W.set(1))}let U=De(()=>e(j)&&e(j)<500);fa(()=>{e(B)&&C()}),ma(()=>{e(B)===h.account.navLogout&&Rt()});var R=ns(),re=le(R);vr(re,{id:Tt,get value(){return e($)},set value(V){v($,p(V))}});var Y=i(re,2);{var L=V=>{var F=os(),pe=t(F);Sa(pe,{absolute:!0,absoluteRight:!0,updateBackend:!0});var ie=i(pe,2),ne=t(ie),me=t(ne,!0);a(ne),a(ie);var te=i(ie,2),ve=t(te);Za(ve,{get selected(){return e(B)},set selected(w){v(B,p(w))}});var T=i(ve,2),P=t(T),E=t(P);{var g=w=>{Qa(w,{get webIdData(){return y()},viewModePhone:!0,get providers(){return e($)},get authProvider(){return e(x)},get user(){return u()},set user(c){u(c)}})},_=w=>{var c=xe(),N=le(c);{var s=m=>{Ja(m,{viewModePhone:!0,get user(){return u()},set user(M){u(M)}})},k=m=>{var M=xe(),Q=le(M);{var ae=de=>{Ha(de,{get user(){return u()},get authProvider(){return e(x)},viewModePhone:!0})},he=de=>{var we=xe(),ge=le(we);{var $e=be=>{Ga(be,{get session(){return o()},get user(){return u()}})},qe=be=>{var q=xe(),se=le(q);{var oe=ce=>{Xa(ce,{get webIdData(){return y()},set webIdData(A){y(A)}})},ye=ce=>{var A=xe(),fe=le(A);{var Ve=je=>{Ya(je,{get session(){return o()},set session(Ee){o(Ee)}})};D(fe,je=>{e(I)===h.account.devices&&je(Ve)},!0)}n(ce,A)};D(se,ce=>{e(I)==="WebID"?ce(oe):ce(ye,!1)},!0)}n(be,q)};D(ge,be=>{e(I)===h.account.navMfa?be($e):be(qe,!1)},!0)}n(de,we)};D(Q,de=>{e(I)===h.common.password?de(ae):de(he,!1)},!0)}n(m,M)};D(N,m=>{e(I)===h.account.navEdit?m(s):m(k,!1)},!0)}n(w,c)};D(E,w=>{e(I)===h.account.navInfo?w(g):w(_,!1)})}a(P),a(T),a(te),a(F),f(()=>{l(me,h.account.account),Ne(P,"style",`opacity: ${b()??""}`)}),n(V,F)},ee=V=>{var F=is(),pe=t(F);Sa(pe,{absolute:!0,updateBackend:!0});var ie=i(pe,2),ne=t(ie),me=t(ne,!0);a(ne),a(ie);var te=i(ie,2),ve=t(te),T=De(()=>!!y());Za(ve,{get showWebId(){return e(T)},get selected(){return e(B)},set selected(c){v(B,p(c))}});var P=i(ve,2),E=t(P),g=t(E);{var _=c=>{Qa(c,{get webIdData(){return y()},get providers(){return e($)},get authProvider(){return e(x)},get user(){return u()},set user(N){u(N)}})},w=c=>{var N=xe(),s=le(N);{var k=M=>{Ja(M,{get user(){return u()},set user(Q){u(Q)}})},m=M=>{var Q=xe(),ae=le(Q);{var he=we=>{Ha(we,{get user(){return u()},get authProvider(){return e(x)}})},de=we=>{var ge=xe(),$e=le(ge);{var qe=q=>{Ga(q,{get session(){return o()},get user(){return u()}})},be=q=>{var se=xe(),oe=le(se);{var ye=A=>{Xa(A,{get webIdData(){return y()},set webIdData(fe){y(fe)}})},ce=A=>{var fe=xe(),Ve=le(fe);{var je=Ee=>{Ya(Ee,{get session(){return o()},set session(oa){o(oa)}})};D(Ve,Ee=>{e(I)===h.account.devices&&Ee(je)},!0)}n(A,fe)};D(oe,A=>{e(I)==="WebID"?A(ye):A(ce,!1)},!0)}n(q,se)};D($e,q=>{e(I)===h.account.navMfa?q(qe):q(be,!1)},!0)}n(we,ge)};D(ae,we=>{e(I)===h.common.password?we(he):we(de,!1)},!0)}n(M,Q)};D(s,M=>{e(I)===h.account.navEdit?M(k):M(m,!1)},!0)}n(c,N)};D(g,c=>{e(I)===h.account.navInfo?c(_):c(w,!1)})}a(E),a(P),a(te),a(F),f(()=>{l(me,h.account.account),Ne(E,"style",`opacity: ${b()??""}`)}),n(V,F)};D(Y,V=>{e(U)?V(L):V(ee,!1)})}Xt("innerWidth",V=>v(j,p(V))),n(O,R),We()}var ls=z("<!> <!>",1);function vs(O,d){Me(d,!0);let r=Ke(),b=K(void 0),o=K(void 0),u=K(void 0),y=K(!1);Fe(async()=>{let h=await At();if(h.ok){if(v(b,p(await h.json())),!e(b)){console.error("did not receive valid session response");return}h=await Ot(e(b).user_id),h.ok?v(o,p(await h.json())):La("account"),h=await Bt(e(b).user_id),h.ok?v(u,p(await h.json())):h.status===404&&v(u,p({user_id:e(b).user_id,is_open:!1})),v(y,!0)}else La("account")}),$t(h=>{f(()=>{var j;return yt.title=`${((r==null?void 0:r.account.account)||"Account")??""} ${((j=e(o))==null?void 0:j.email)??""}`})}),dr(O,{children:(h,j)=>{ur(h,{children:($,x)=>{var W=ls(),I=le(W);{var B=U=>{cs(U,{get session(){return e(b)},get user(){return e(o)},set user(R){v(o,p(R))},get webIdData(){return e(u)},set webIdData(R){v(u,p(R))}})};D(I,U=>{e(y)&&e(b)&&e(o)&&U(B)})}var C=i(I,2);tr(C,{absolute:!0}),n($,W)},$$slots:{default:!0}})},$$slots:{default:!0}}),We()}export{vs as component};
